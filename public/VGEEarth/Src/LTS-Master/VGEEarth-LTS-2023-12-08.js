/*! For license information please see VGEEarth-LTS-2023-12-08.js.LICENSE.txt */
(()=>{var __webpack_modules__={4895:(t,e,n)=>{n(185),n(2346),n(5123),n(4455),n(92),n(743),n(7470),n(760),n(9699),n(5573),n(4822),n(1434),n(2371),n(3413),n(4185),n(4742),n(1532),n(5159),n(648)},1918:t=>{var e;globalThis,e=()=>(()=>{"use strict";var t={578:(t,e,n)=>{n.d(e,{default:()=>Yr});const r=15,i=573,o=-2;function a(t){return s(t.map((([t,e])=>new Array(t).fill(e,0,t))))}function s(t){return t.reduce(((t,e)=>t.concat(Array.isArray(e)?s(e):e)),[])}const l=[0,1,2,3].concat(...a([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function u(){const t=this;function e(t,e){let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}t.build_tree=function(n){const o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.elems;let l,u,c,h=-1;for(n.heap_len=0,n.heap_max=i,l=0;l<s;l++)0!==o[2*l]?(n.heap[++n.heap_len]=h=l,n.depth[l]=0):o[2*l+1]=0;for(;n.heap_len<2;)c=n.heap[++n.heap_len]=h<2?++h:0,o[2*c]=1,n.depth[c]=0,n.opt_len--,a&&(n.static_len-=a[2*c+1]);for(t.max_code=h,l=Math.floor(n.heap_len/2);l>=1;l--)n.pqdownheap(o,l);c=s;do{l=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(o,1),u=n.heap[1],n.heap[--n.heap_max]=l,n.heap[--n.heap_max]=u,o[2*c]=o[2*l]+o[2*u],n.depth[c]=Math.max(n.depth[l],n.depth[u])+1,o[2*l+1]=o[2*u+1]=c,n.heap[1]=c++,n.pqdownheap(o,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(e){const n=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let u,c,h,p,f,d,g=0;for(p=0;p<=r;p++)e.bl_count[p]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<i;u++)c=e.heap[u],p=n[2*n[2*c+1]+1]+1,p>l&&(p=l,g++),n[2*c+1]=p,c>t.max_code||(e.bl_count[p]++,f=0,c>=s&&(f=a[c-s]),d=n[2*c],e.opt_len+=d*(p+f),o&&(e.static_len+=d*(o[2*c+1]+f)));if(0!==g){do{for(p=l-1;0===e.bl_count[p];)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(p=l;0!==p;p--)for(c=e.bl_count[p];0!==c;)h=e.heap[--u],h>t.max_code||(n[2*h+1]!=p&&(e.opt_len+=(p-n[2*h+1])*n[2*h],n[2*h+1]=p),c--)}}(n),function(t,n,i){const o=[];let a,s,l,u=0;for(a=1;a<=r;a++)o[a]=u=u+i[a-1]<<1;for(s=0;s<=n;s++)l=t[2*s+1],0!==l&&(t[2*s]=e(o[l]++,l))}(o,t.max_code,n.bl_count)}}function c(t,e,n,r,i){const o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=n,o.elems=r,o.max_length=i}u._length_code=[0,1,2,3,4,5,6,7].concat(...a([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),u.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],u.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],u.d_code=function(t){return t<256?l[t]:l[256+(t>>>7)]},u.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const h=a([[144,8],[112,9],[24,7],[8,8]]);c.static_ltree=s([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((t,e)=>[t,h[e]])));const p=a([[30,5]]);function f(t,e,n,r,i){const o=this;o.good_length=t,o.max_lazy=e,o.nice_length=n,o.max_chain=r,o.func=i}c.static_dtree=s([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((t,e)=>[t,p[e]]))),c.static_l_desc=new c(c.static_ltree,u.extra_lbits,257,286,r),c.static_d_desc=new c(c.static_dtree,u.extra_dbits,0,30,r),c.static_bl_desc=new c(null,u.extra_blbits,0,19,7);const d=[new f(0,0,0,0,0),new f(4,4,8,4,1),new f(4,5,16,8,1),new f(4,6,32,32,1),new f(4,4,16,16,2),new f(8,16,32,32,2),new f(8,16,128,128,2),new f(8,32,128,256,2),new f(32,128,258,1024,2),new f(32,258,258,4096,2)],g=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],y=113,m=666,v=262;function w(t,e,n,r){const i=t[2*e],o=t[2*n];return i<o||i==o&&r[e]<=r[n]}function b(){const t=this;let e,n,r,i,a,s,l,h,p,f,b,x,_,E,S,C,T,I,A,P,k,O,M,N,L,R,D,F,j,z,G,B,U;const q=new u,W=new u,V=new u;let H,Y,X,Z,K,J;function Q(){let e;for(e=0;e<286;e++)G[2*e]=0;for(e=0;e<30;e++)B[2*e]=0;for(e=0;e<19;e++)U[2*e]=0;G[512]=1,t.opt_len=t.static_len=0,Y=X=0}function $(t,e){let n,r=-1,i=t[1],o=0,a=7,s=4;0===i&&(a=138,s=3),t[2*(e+1)+1]=65535;for(let l=0;l<=e;l++)n=i,i=t[2*(l+1)+1],++o<a&&n==i||(o<s?U[2*n]+=o:0!==n?(n!=r&&U[2*n]++,U[32]++):o<=10?U[34]++:U[36]++,o=0,r=n,0===i?(a=138,s=3):n==i?(a=6,s=3):(a=7,s=4))}function tt(e){t.pending_buf[t.pending++]=e}function et(t){tt(255&t),tt(t>>>8&255)}function nt(t,e){let n;const r=e;J>16-r?(n=t,K|=n<<J&65535,et(K),K=n>>>16-J,J+=r-16):(K|=t<<J&65535,J+=r)}function rt(t,e){const n=2*t;nt(65535&e[n],65535&e[n+1])}function it(t,e){let n,r,i=-1,o=t[1],a=0,s=7,l=4;for(0===o&&(s=138,l=3),n=0;n<=e;n++)if(r=o,o=t[2*(n+1)+1],!(++a<s&&r==o)){if(a<l)do{rt(r,U)}while(0!=--a);else 0!==r?(r!=i&&(rt(r,U),a--),rt(16,U),nt(a-3,2)):a<=10?(rt(17,U),nt(a-3,3)):(rt(18,U),nt(a-11,7));a=0,i=r,0===o?(s=138,l=3):r==o?(s=6,l=3):(s=7,l=4)}}function ot(){16==J?(et(K),K=0,J=0):J>=8&&(tt(255&K),K>>>=8,J-=8)}function at(e,n){let r,i,o;if(t.dist_buf[Y]=e,t.lc_buf[Y]=255&n,Y++,0===e?G[2*n]++:(X++,e--,G[2*(u._length_code[n]+256+1)]++,B[2*u.d_code(e)]++),0==(8191&Y)&&D>2){for(r=8*Y,i=k-T,o=0;o<30;o++)r+=B[2*o]*(5+u.extra_dbits[o]);if(r>>>=3,X<Math.floor(Y/2)&&r<Math.floor(i/2))return!0}return Y==H-1}function st(e,n){let r,i,o,a,s=0;if(0!==Y)do{r=t.dist_buf[s],i=t.lc_buf[s],s++,0===r?rt(i,e):(o=u._length_code[i],rt(o+256+1,e),a=u.extra_lbits[o],0!==a&&(i-=u.base_length[o],nt(i,a)),r--,o=u.d_code(r),rt(o,n),a=u.extra_dbits[o],0!==a&&(r-=u.base_dist[o],nt(r,a)))}while(s<Y);rt(256,e),Z=e[513]}function lt(){J>8?et(K):J>0&&tt(255&K),K=0,J=0}function ut(e,n,r){nt(0+(r?1:0),3),function(e,n,r){lt(),Z=8,et(n),et(~n),t.pending_buf.set(h.subarray(e,e+n),t.pending),t.pending+=n}(e,n)}function ct(n){(function(e,n,r){let i,o,a=0;D>0?(q.build_tree(t),W.build_tree(t),a=function(){let e;for($(G,q.max_code),$(B,W.max_code),V.build_tree(t),e=18;e>=3&&0===U[2*u.bl_order[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!=e?ut(e,n,r):o==i?(nt(2+(r?1:0),3),st(c.static_ltree,c.static_dtree)):(nt(4+(r?1:0),3),function(t,e,n){let r;for(nt(t-257,5),nt(e-1,5),nt(n-4,4),r=0;r<n;r++)nt(U[2*u.bl_order[r]+1],3);it(G,t-1),it(B,e-1)}(q.max_code+1,W.max_code+1,a+1),st(G,B)),Q(),r&&lt()})(T>=0?T:-1,k-T,n),T=k,e.flush_pending()}function ht(){let t,n,r,i;do{if(i=p-M-k,0===i&&0===k&&0===M)i=a;else if(-1==i)i--;else if(k>=a+a-v){h.set(h.subarray(a,a+a),0),O-=a,k-=a,T-=a,t=_,r=t;do{n=65535&b[--r],b[r]=n>=a?n-a:0}while(0!=--t);t=a,r=t;do{n=65535&f[--r],f[r]=n>=a?n-a:0}while(0!=--t);i+=a}if(0===e.avail_in)return;t=e.read_buf(h,k+M,i),M+=t,M>=3&&(x=255&h[k],x=(x<<C^255&h[k+1])&S)}while(M<v&&0!==e.avail_in)}function pt(t){let e,n,r=L,i=k,o=N;const s=k>a-v?k-(a-v):0;let u=z;const c=l,p=k+258;let d=h[i+o-1],g=h[i+o];N>=j&&(r>>=2),u>M&&(u=M);do{if(e=t,h[e+o]==g&&h[e+o-1]==d&&h[e]==h[i]&&h[++e]==h[i+1]){i+=2,e++;do{}while(h[++i]==h[++e]&&h[++i]==h[++e]&&h[++i]==h[++e]&&h[++i]==h[++e]&&h[++i]==h[++e]&&h[++i]==h[++e]&&h[++i]==h[++e]&&h[++i]==h[++e]&&i<p);if(n=258-(p-i),i=p-258,n>o){if(O=t,o=n,n>=u)break;d=h[i+o-1],g=h[i+o]}}}while((t=65535&f[t&c])>s&&0!=--r);return o<=M?o:M}t.depth=[],t.bl_count=[],t.heap=[],G=[],B=[],U=[],t.pqdownheap=function(e,n){const r=t.heap,i=r[n];let o=n<<1;for(;o<=t.heap_len&&(o<t.heap_len&&w(e,r[o+1],r[o],t.depth)&&o++,!w(e,i,r[o],t.depth));)r[n]=r[o],n=o,o<<=1;r[n]=i},t.deflateInit=function(e,u,g,m,v,w){return m||(m=8),v||(v=8),w||(w=0),e.msg=null,-1==u&&(u=6),v<1||v>9||8!=m||g<9||g>15||u<0||u>9||w<0||w>2?o:(e.dstate=t,s=g,a=1<<s,l=a-1,E=v+7,_=1<<E,S=_-1,C=Math.floor((E+3-1)/3),h=new Uint8Array(2*a),f=[],b=[],H=1<<v+6,t.pending_buf=new Uint8Array(4*H),r=4*H,t.dist_buf=new Uint16Array(H),t.lc_buf=new Uint8Array(H),D=u,F=w,function(e){return e.total_in=e.total_out=0,e.msg=null,t.pending=0,t.pending_out=0,n=y,i=0,q.dyn_tree=G,q.stat_desc=c.static_l_desc,W.dyn_tree=B,W.stat_desc=c.static_d_desc,V.dyn_tree=U,V.stat_desc=c.static_bl_desc,K=0,J=0,Z=8,Q(),function(){p=2*a,b[_-1]=0;for(let t=0;t<_-1;t++)b[t]=0;R=d[D].max_lazy,j=d[D].good_length,z=d[D].nice_length,L=d[D].max_chain,k=0,T=0,M=0,I=N=2,P=0,x=0}(),0}(e))},t.deflateEnd=function(){return 42!=n&&n!=y&&n!=m?o:(t.lc_buf=null,t.dist_buf=null,t.pending_buf=null,b=null,f=null,h=null,t.dstate=null,n==y?-3:0)},t.deflateParams=function(t,e,n){let r=0;return-1==e&&(e=6),e<0||e>9||n<0||n>2?o:(d[D].func!=d[e].func&&0!==t.total_in&&(r=t.deflate(1)),D!=e&&(D=e,R=d[D].max_lazy,j=d[D].good_length,z=d[D].nice_length,L=d[D].max_chain),F=n,r)},t.deflateSetDictionary=function(t,e,r){let i,s=r,u=0;if(!e||42!=n)return o;if(s<3)return 0;for(s>a-v&&(s=a-v,u=r-s),h.set(e.subarray(u,u+s),0),k=s,T=s,x=255&h[0],x=(x<<C^255&h[1])&S,i=0;i<=s-3;i++)x=(x<<C^255&h[i+2])&S,f[i&l]=b[x],b[x]=i;return 0},t.deflate=function(u,p){let w,E,L,j,z;if(p>4||p<0)return o;if(!u.next_out||!u.next_in&&0!==u.avail_in||n==m&&4!=p)return u.msg=g[4],o;if(0===u.avail_out)return u.msg=g[7],-5;var G;if(e=u,j=i,i=p,42==n&&(E=8+(s-8<<4)<<8,L=(D-1&255)>>1,L>3&&(L=3),E|=L<<6,0!==k&&(E|=32),E+=31-E%31,n=y,tt((G=E)>>8&255),tt(255&G)),0!==t.pending){if(e.flush_pending(),0===e.avail_out)return i=-1,0}else if(0===e.avail_in&&p<=j&&4!=p)return e.msg=g[7],-5;if(n==m&&0!==e.avail_in)return u.msg=g[7],-5;if(0!==e.avail_in||0!==M||0!=p&&n!=m){switch(z=-1,d[D].func){case 0:z=function(t){let n,i=65535;for(i>r-5&&(i=r-5);;){if(M<=1){if(ht(),0===M&&0==t)return 0;if(0===M)break}if(k+=M,M=0,n=T+i,(0===k||k>=n)&&(M=k-n,k=n,ct(!1),0===e.avail_out))return 0;if(k-T>=a-v&&(ct(!1),0===e.avail_out))return 0}return ct(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 1:z=function(t){let n,r=0;for(;;){if(M<v){if(ht(),M<v&&0==t)return 0;if(0===M)break}if(M>=3&&(x=(x<<C^255&h[k+2])&S,r=65535&b[x],f[k&l]=b[x],b[x]=k),0!==r&&(k-r&65535)<=a-v&&2!=F&&(I=pt(r)),I>=3)if(n=at(k-O,I-3),M-=I,I<=R&&M>=3){I--;do{k++,x=(x<<C^255&h[k+2])&S,r=65535&b[x],f[k&l]=b[x],b[x]=k}while(0!=--I);k++}else k+=I,I=0,x=255&h[k],x=(x<<C^255&h[k+1])&S;else n=at(0,255&h[k]),M--,k++;if(n&&(ct(!1),0===e.avail_out))return 0}return ct(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 2:z=function(t){let n,r,i=0;for(;;){if(M<v){if(ht(),M<v&&0==t)return 0;if(0===M)break}if(M>=3&&(x=(x<<C^255&h[k+2])&S,i=65535&b[x],f[k&l]=b[x],b[x]=k),N=I,A=O,I=2,0!==i&&N<R&&(k-i&65535)<=a-v&&(2!=F&&(I=pt(i)),I<=5&&(1==F||3==I&&k-O>4096)&&(I=2)),N>=3&&I<=N){r=k+M-3,n=at(k-1-A,N-3),M-=N-1,N-=2;do{++k<=r&&(x=(x<<C^255&h[k+2])&S,i=65535&b[x],f[k&l]=b[x],b[x]=k)}while(0!=--N);if(P=0,I=2,k++,n&&(ct(!1),0===e.avail_out))return 0}else if(0!==P){if(n=at(0,255&h[k-1]),n&&ct(!1),k++,M--,0===e.avail_out)return 0}else P=1,k++,M--}return 0!==P&&(n=at(0,255&h[k-1]),P=0),ct(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p)}if(2!=z&&3!=z||(n=m),0==z||2==z)return 0===e.avail_out&&(i=-1),0;if(1==z){if(1==p)nt(2,3),rt(256,c.static_ltree),ot(),1+Z+10-J<9&&(nt(2,3),rt(256,c.static_ltree),ot()),Z=7;else if(ut(0,0,!1),3==p)for(w=0;w<_;w++)b[w]=0;if(e.flush_pending(),0===e.avail_out)return i=-1,0}}return 4!=p?0:1}}function x(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}x.prototype={deflateInit(t,e){const n=this;return n.dstate=new b,e||(e=r),n.dstate.deflateInit(n,t,e)},deflate(t){const e=this;return e.dstate?e.dstate.deflate(e,t):o},deflateEnd(){const t=this;if(!t.dstate)return o;const e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams(t,e){const n=this;return n.dstate?n.dstate.deflateParams(n,t,e):o},deflateSetDictionary(t,e){const n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):o},read_buf(t,e,n){const r=this;let i=r.avail_in;return i>n&&(i=n),0===i?0:(r.avail_in-=i,t.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),e),r.next_in_index+=i,r.total_in+=i,i)},flush_pending(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};const _=0,E=1,S=-2,C=-3,T=-4,I=-5,A=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],P=1440,k=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],O=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=15;function F(){let t,e,n,r,i,o;function a(t,e,a,s,l,u,c,h,p,f,d){let g,y,m,v,w,b,x,E,S,T,A,k,O,M,N;T=0,w=a;do{n[t[e+T]]++,T++,w--}while(0!==w);if(n[0]==a)return c[0]=-1,h[0]=0,_;for(E=h[0],b=1;b<=D&&0===n[b];b++);for(x=b,E<b&&(E=b),w=D;0!==w&&0===n[w];w--);for(m=w,E>w&&(E=w),h[0]=E,M=1<<b;b<w;b++,M<<=1)if((M-=n[b])<0)return C;if((M-=n[w])<0)return C;for(n[w]+=M,o[1]=b=0,T=1,O=2;0!=--w;)o[O]=b+=n[T],O++,T++;w=0,T=0;do{0!==(b=t[e+T])&&(d[o[b]++]=w),T++}while(++w<a);for(a=o[m],o[0]=w=0,T=0,v=-1,k=-E,i[0]=0,A=0,N=0;x<=m;x++)for(g=n[x];0!=g--;){for(;x>k+E;){if(v++,k+=E,N=m-k,N=N>E?E:N,(y=1<<(b=x-k))>g+1&&(y-=g+1,O=x,b<N))for(;++b<N&&!((y<<=1)<=n[++O]);)y-=n[O];if(N=1<<b,f[0]+N>P)return C;i[v]=A=f[0],f[0]+=N,0!==v?(o[v]=w,r[0]=b,r[1]=E,b=w>>>k-E,r[2]=A-i[v-1]-b,p.set(r,3*(i[v-1]+b))):c[0]=A}for(r[1]=x-k,T>=a?r[0]=192:d[T]<s?(r[0]=d[T]<256?0:96,r[2]=d[T++]):(r[0]=u[d[T]-s]+16+64,r[2]=l[d[T++]-s]),y=1<<x-k,b=w>>>k;b<N;b+=y)p.set(r,3*(A+b));for(b=1<<x-1;0!=(w&b);b>>>=1)w^=b;for(w^=b,S=(1<<k)-1;(w&S)!=o[v];)v--,k-=E,S=(1<<k)-1}return 0!==M&&1!=m?I:_}function s(a){let s;for(t||(t=[],e=[],n=new Int32Array(D+1),r=[],i=new Int32Array(D),o=new Int32Array(D+1)),e.length<a&&(e=[]),s=0;s<a;s++)e[s]=0;for(s=0;s<D+1;s++)n[s]=0;for(s=0;s<3;s++)r[s]=0;i.set(n.subarray(0,D),0),o.set(n.subarray(0,D+1),0)}this.inflate_trees_bits=function(n,r,i,o,l){let u;return s(19),t[0]=0,u=a(n,0,19,19,null,null,i,r,o,t,e),u==C?l.msg="oversubscribed dynamic bit lengths tree":u!=I&&0!==r[0]||(l.msg="incomplete dynamic bit lengths tree",u=C),u},this.inflate_trees_dynamic=function(n,r,i,o,l,u,c,h,p){let f;return s(288),t[0]=0,f=a(i,0,n,257,M,N,u,o,h,t,e),f!=_||0===o[0]?(f==C?p.msg="oversubscribed literal/length tree":f!=T&&(p.msg="incomplete literal/length tree",f=C),f):(s(288),f=a(i,n,r,0,L,R,c,l,h,t,e),f!=_||0===l[0]&&n>257?(f==C?p.msg="oversubscribed distance tree":f==I?(p.msg="incomplete distance tree",f=C):f!=T&&(p.msg="empty distance tree with lengths",f=C),f):_)}}F.inflate_trees_fixed=function(t,e,n,r){return t[0]=9,e[0]=5,n[0]=k,r[0]=O,_};const j=0,z=1,G=2,B=3,U=4,q=5,W=6,V=7,H=8,Y=9;function X(){const t=this;let e,n,r,i,o=0,a=0,s=0,l=0,u=0,c=0,h=0,p=0,f=0,d=0;function g(t,e,n,r,i,o,a,s){let l,u,c,h,p,f,d,g,y,m,v,w,b,x,S,T;d=s.next_in_index,g=s.avail_in,p=a.bitb,f=a.bitk,y=a.write,m=y<a.read?a.read-y-1:a.end-y,v=A[t],w=A[e];do{for(;f<20;)g--,p|=(255&s.read_byte(d++))<<f,f+=8;if(l=p&v,u=n,c=r,T=3*(c+l),0!==(h=u[T]))for(;;){if(p>>=u[T+1],f-=u[T+1],0!=(16&h)){for(h&=15,b=u[T+2]+(p&A[h]),p>>=h,f-=h;f<15;)g--,p|=(255&s.read_byte(d++))<<f,f+=8;for(l=p&w,u=i,c=o,T=3*(c+l),h=u[T];;){if(p>>=u[T+1],f-=u[T+1],0!=(16&h)){for(h&=15;f<h;)g--,p|=(255&s.read_byte(d++))<<f,f+=8;if(x=u[T+2]+(p&A[h]),p>>=h,f-=h,m-=b,y>=x)S=y-x,y-S>0&&2>y-S?(a.win[y++]=a.win[S++],a.win[y++]=a.win[S++],b-=2):(a.win.set(a.win.subarray(S,S+2),y),y+=2,S+=2,b-=2);else{S=y-x;do{S+=a.end}while(S<0);if(h=a.end-S,b>h){if(b-=h,y-S>0&&h>y-S)do{a.win[y++]=a.win[S++]}while(0!=--h);else a.win.set(a.win.subarray(S,S+h),y),y+=h,S+=h,h=0;S=0}}if(y-S>0&&b>y-S)do{a.win[y++]=a.win[S++]}while(0!=--b);else a.win.set(a.win.subarray(S,S+b),y),y+=b,S+=b,b=0;break}if(0!=(64&h))return s.msg="invalid distance code",b=s.avail_in-g,b=f>>3<b?f>>3:b,g+=b,d-=b,f-=b<<3,a.bitb=p,a.bitk=f,s.avail_in=g,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=y,C;l+=u[T+2],l+=p&A[h],T=3*(c+l),h=u[T]}break}if(0!=(64&h))return 0!=(32&h)?(b=s.avail_in-g,b=f>>3<b?f>>3:b,g+=b,d-=b,f-=b<<3,a.bitb=p,a.bitk=f,s.avail_in=g,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=y,E):(s.msg="invalid literal/length code",b=s.avail_in-g,b=f>>3<b?f>>3:b,g+=b,d-=b,f-=b<<3,a.bitb=p,a.bitk=f,s.avail_in=g,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=y,C);if(l+=u[T+2],l+=p&A[h],T=3*(c+l),0===(h=u[T])){p>>=u[T+1],f-=u[T+1],a.win[y++]=u[T+2],m--;break}}else p>>=u[T+1],f-=u[T+1],a.win[y++]=u[T+2],m--}while(m>=258&&g>=10);return b=s.avail_in-g,b=f>>3<b?f>>3:b,g+=b,d-=b,f-=b<<3,a.bitb=p,a.bitk=f,s.avail_in=g,s.total_in+=d-s.next_in_index,s.next_in_index=d,a.write=y,_}t.init=function(t,o,a,s,l,u){e=j,h=t,p=o,r=a,f=s,i=l,d=u,n=null},t.proc=function(t,y,m){let v,w,b,x,T,I,P,k=0,O=0,M=0;for(M=y.next_in_index,x=y.avail_in,k=t.bitb,O=t.bitk,T=t.write,I=T<t.read?t.read-T-1:t.end-T;;)switch(e){case j:if(I>=258&&x>=10&&(t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,m=g(h,p,r,f,i,d,t,y),M=y.next_in_index,x=y.avail_in,k=t.bitb,O=t.bitk,T=t.write,I=T<t.read?t.read-T-1:t.end-T,m!=_)){e=m==E?V:Y;break}s=h,n=r,a=f,e=z;case z:for(v=s;O<v;){if(0===x)return t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);m=_,x--,k|=(255&y.read_byte(M++))<<O,O+=8}if(w=3*(a+(k&A[v])),k>>>=n[w+1],O-=n[w+1],b=n[w],0===b){l=n[w+2],e=W;break}if(0!=(16&b)){u=15&b,o=n[w+2],e=G;break}if(0==(64&b)){s=b,a=w/3+n[w+2];break}if(0!=(32&b)){e=V;break}return e=Y,y.msg="invalid literal/length code",m=C,t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);case G:for(v=u;O<v;){if(0===x)return t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);m=_,x--,k|=(255&y.read_byte(M++))<<O,O+=8}o+=k&A[v],k>>=v,O-=v,s=p,n=i,a=d,e=B;case B:for(v=s;O<v;){if(0===x)return t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);m=_,x--,k|=(255&y.read_byte(M++))<<O,O+=8}if(w=3*(a+(k&A[v])),k>>=n[w+1],O-=n[w+1],b=n[w],0!=(16&b)){u=15&b,c=n[w+2],e=U;break}if(0==(64&b)){s=b,a=w/3+n[w+2];break}return e=Y,y.msg="invalid distance code",m=C,t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);case U:for(v=u;O<v;){if(0===x)return t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);m=_,x--,k|=(255&y.read_byte(M++))<<O,O+=8}c+=k&A[v],k>>=v,O-=v,e=q;case q:for(P=T-c;P<0;)P+=t.end;for(;0!==o;){if(0===I&&(T==t.end&&0!==t.read&&(T=0,I=T<t.read?t.read-T-1:t.end-T),0===I&&(t.write=T,m=t.inflate_flush(y,m),T=t.write,I=T<t.read?t.read-T-1:t.end-T,T==t.end&&0!==t.read&&(T=0,I=T<t.read?t.read-T-1:t.end-T),0===I)))return t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);t.win[T++]=t.win[P++],I--,P==t.end&&(P=0),o--}e=j;break;case W:if(0===I&&(T==t.end&&0!==t.read&&(T=0,I=T<t.read?t.read-T-1:t.end-T),0===I&&(t.write=T,m=t.inflate_flush(y,m),T=t.write,I=T<t.read?t.read-T-1:t.end-T,T==t.end&&0!==t.read&&(T=0,I=T<t.read?t.read-T-1:t.end-T),0===I)))return t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);m=_,t.win[T++]=l,I--,e=j;break;case V:if(O>7&&(O-=8,x++,M--),t.write=T,m=t.inflate_flush(y,m),T=t.write,I=T<t.read?t.read-T-1:t.end-T,t.read!=t.write)return t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);e=H;case H:return m=E,t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);case Y:return m=C,t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m);default:return m=S,t.bitb=k,t.bitk=O,y.avail_in=x,y.total_in+=M-y.next_in_index,y.next_in_index=M,t.write=T,t.inflate_flush(y,m)}},t.free=function(){}}const Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=0,J=1,Q=2,$=3,tt=4,et=5,nt=6,rt=7,it=8,ot=9;function at(t,e){const n=this;let r,i=K,o=0,a=0,s=0;const l=[0],u=[0],c=new X;let h=0,p=new Int32Array(3*P);const f=new F;n.bitk=0,n.bitb=0,n.win=new Uint8Array(e),n.end=e,n.read=0,n.write=0,n.reset=function(t,e){e&&(e[0]=0),i==nt&&c.free(t),i=K,n.bitk=0,n.bitb=0,n.read=n.write=0},n.reset(t,null),n.inflate_flush=function(t,e){let r,i,o;return i=t.next_out_index,o=n.read,r=(o<=n.write?n.write:n.end)-o,r>t.avail_out&&(r=t.avail_out),0!==r&&e==I&&(e=_),t.avail_out-=r,t.total_out+=r,t.next_out.set(n.win.subarray(o,o+r),i),i+=r,o+=r,o==n.end&&(o=0,n.write==n.end&&(n.write=0),r=n.write-o,r>t.avail_out&&(r=t.avail_out),0!==r&&e==I&&(e=_),t.avail_out-=r,t.total_out+=r,t.next_out.set(n.win.subarray(o,o+r),i),i+=r,o+=r),t.next_out_index=i,n.read=o,e},n.proc=function(t,e){let d,g,y,m,v,w,b,x;for(m=t.next_in_index,v=t.avail_in,g=n.bitb,y=n.bitk,w=n.write,b=w<n.read?n.read-w-1:n.end-w;;){let T,I,P,k,O,M,N,L;switch(i){case K:for(;y<3;){if(0===v)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);e=_,v--,g|=(255&t.read_byte(m++))<<y,y+=8}switch(d=7&g,h=1&d,d>>>1){case 0:g>>>=3,y-=3,d=7&y,g>>>=d,y-=d,i=J;break;case 1:T=[],I=[],P=[[]],k=[[]],F.inflate_trees_fixed(T,I,P,k),c.init(T[0],I[0],P[0],0,k[0],0),g>>>=3,y-=3,i=nt;break;case 2:g>>>=3,y-=3,i=$;break;case 3:return g>>>=3,y-=3,i=ot,t.msg="invalid block type",e=C,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e)}break;case J:for(;y<32;){if(0===v)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);e=_,v--,g|=(255&t.read_byte(m++))<<y,y+=8}if((~g>>>16&65535)!=(65535&g))return i=ot,t.msg="invalid stored block lengths",e=C,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);o=65535&g,g=y=0,i=0!==o?Q:0!==h?rt:K;break;case Q:if(0===v)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);if(0===b&&(w==n.end&&0!==n.read&&(w=0,b=w<n.read?n.read-w-1:n.end-w),0===b&&(n.write=w,e=n.inflate_flush(t,e),w=n.write,b=w<n.read?n.read-w-1:n.end-w,w==n.end&&0!==n.read&&(w=0,b=w<n.read?n.read-w-1:n.end-w),0===b)))return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);if(e=_,d=o,d>v&&(d=v),d>b&&(d=b),n.win.set(t.read_buf(m,d),w),m+=d,v-=d,w+=d,b-=d,0!=(o-=d))break;i=0!==h?rt:K;break;case $:for(;y<14;){if(0===v)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);e=_,v--,g|=(255&t.read_byte(m++))<<y,y+=8}if(a=d=16383&g,(31&d)>29||(d>>5&31)>29)return i=ot,t.msg="too many length or distance symbols",e=C,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);if(d=258+(31&d)+(d>>5&31),!r||r.length<d)r=[];else for(x=0;x<d;x++)r[x]=0;g>>>=14,y-=14,s=0,i=tt;case tt:for(;s<4+(a>>>10);){for(;y<3;){if(0===v)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);e=_,v--,g|=(255&t.read_byte(m++))<<y,y+=8}r[Z[s++]]=7&g,g>>>=3,y-=3}for(;s<19;)r[Z[s++]]=0;if(l[0]=7,d=f.inflate_trees_bits(r,l,u,p,t),d!=_)return(e=d)==C&&(r=null,i=ot),n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);s=0,i=et;case et:for(;d=a,!(s>=258+(31&d)+(d>>5&31));){let o,c;for(d=l[0];y<d;){if(0===v)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);e=_,v--,g|=(255&t.read_byte(m++))<<y,y+=8}if(d=p[3*(u[0]+(g&A[d]))+1],c=p[3*(u[0]+(g&A[d]))+2],c<16)g>>>=d,y-=d,r[s++]=c;else{for(x=18==c?7:c-14,o=18==c?11:3;y<d+x;){if(0===v)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);e=_,v--,g|=(255&t.read_byte(m++))<<y,y+=8}if(g>>>=d,y-=d,o+=g&A[x],g>>>=x,y-=x,x=s,d=a,x+o>258+(31&d)+(d>>5&31)||16==c&&x<1)return r=null,i=ot,t.msg="invalid bit length repeat",e=C,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);c=16==c?r[x-1]:0;do{r[x++]=c}while(0!=--o);s=x}}if(u[0]=-1,O=[],M=[],N=[],L=[],O[0]=9,M[0]=6,d=a,d=f.inflate_trees_dynamic(257+(31&d),1+(d>>5&31),r,O,M,N,L,p,t),d!=_)return d==C&&(r=null,i=ot),e=d,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);c.init(O[0],M[0],p,N[0],p,L[0]),i=nt;case nt:if(n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,(e=c.proc(n,t,e))!=E)return n.inflate_flush(t,e);if(e=_,c.free(t),m=t.next_in_index,v=t.avail_in,g=n.bitb,y=n.bitk,w=n.write,b=w<n.read?n.read-w-1:n.end-w,0===h){i=K;break}i=rt;case rt:if(n.write=w,e=n.inflate_flush(t,e),w=n.write,b=w<n.read?n.read-w-1:n.end-w,n.read!=n.write)return n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);i=it;case it:return e=E,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);case ot:return e=C,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e);default:return e=S,n.bitb=g,n.bitk=y,t.avail_in=v,t.total_in+=m-t.next_in_index,t.next_in_index=m,n.write=w,n.inflate_flush(t,e)}}},n.free=function(t){n.reset(t,null),n.win=null,p=null},n.set_dictionary=function(t,e,r){n.win.set(t.subarray(e,e+r),0),n.read=n.write=r},n.sync_point=function(){return i==J?1:0}}const st=13,lt=[0,0,255,255];function ut(){const t=this;function e(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=7,t.istate.blocks.reset(t,null),_):S}t.mode=0,t.method=0,t.was=[0],t.need=0,t.marker=0,t.wbits=0,t.inflateEnd=function(e){return t.blocks&&t.blocks.free(e),t.blocks=null,_},t.inflateInit=function(n,r){return n.msg=null,t.blocks=null,r<8||r>15?(t.inflateEnd(n),S):(t.wbits=r,n.istate.blocks=new at(n,1<<r),e(n),_)},t.inflate=function(t,e){let n,r;if(!t||!t.istate||!t.next_in)return S;const i=t.istate;for(e=4==e?I:_,n=I;;)switch(i.mode){case 0:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,8!=(15&(i.method=t.read_byte(t.next_in_index++)))){i.mode=st,t.msg="unknown compression method",i.marker=5;break}if(8+(i.method>>4)>i.wbits){i.mode=st,t.msg="invalid win size",i.marker=5;break}i.mode=1;case 1:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,r=255&t.read_byte(t.next_in_index++),((i.method<<8)+r)%31!=0){i.mode=st,t.msg="incorrect header check",i.marker=5;break}if(0==(32&r)){i.mode=7;break}i.mode=2;case 2:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,i.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,i.mode=3;case 3:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,i.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,i.mode=4;case 4:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,i.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,i.mode=5;case 5:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,i.need+=255&t.read_byte(t.next_in_index++),i.mode=6,2);case 6:return i.mode=st,t.msg="need dictionary",i.marker=0,S;case 7:if(n=i.blocks.proc(t,n),n==C){i.mode=st,i.marker=0;break}if(n==_&&(n=e),n!=E)return n;n=e,i.blocks.reset(t,i.was),i.mode=12;case 12:return t.avail_in=0,E;case st:return C;default:return S}},t.inflateSetDictionary=function(t,e,n){let r=0,i=n;if(!t||!t.istate||6!=t.istate.mode)return S;const o=t.istate;return i>=1<<o.wbits&&(i=(1<<o.wbits)-1,r=n-i),o.blocks.set_dictionary(e,r,i),o.mode=7,_},t.inflateSync=function(t){let n,r,i,o,a;if(!t||!t.istate)return S;const s=t.istate;if(s.mode!=st&&(s.mode=st,s.marker=0),0===(n=t.avail_in))return I;for(r=t.next_in_index,i=s.marker;0!==n&&i<4;)t.read_byte(r)==lt[i]?i++:i=0!==t.read_byte(r)?0:4-i,r++,n--;return t.total_in+=r-t.next_in_index,t.next_in_index=r,t.avail_in=n,s.marker=i,4!=i?C:(o=t.total_in,a=t.total_out,e(t),t.total_in=o,t.total_out=a,s.mode=7,_)},t.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():S}}function ct(){}ct.prototype={inflateInit(t){const e=this;return e.istate=new ut,t||(t=15),e.istate.inflateInit(e,t)},inflate(t){const e=this;return e.istate?e.istate.inflate(e,t):S},inflateEnd(){const t=this;if(!t.istate)return S;const e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync(){const t=this;return t.istate?t.istate.inflateSync(t):S},inflateSetDictionary(t,e){const n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):S},read_byte(t){return this.next_in[t]},read_buf(t,e){return this.next_in.subarray(t,t+e)}};const ht=4294967295,pt=65535,ft=67324752,dt=134695760,gt=33639248,yt=101075792,mt=117853008,vt=21589,wt=2048,bt="/",xt=new Date(2107,11,31),_t=new Date(1980,0,1),Et=void 0,St="undefined",Ct="function";class Tt{constructor(t){return class extends TransformStream{constructor(e,n){const r=new t(n);super({transform(t,e){e.enqueue(r.append(t))},flush(t){const e=r.flush();e&&t.enqueue(e)}})}}}}let It=2;try{typeof navigator!=St&&navigator.hardwareConcurrency&&(It=navigator.hardwareConcurrency)}catch(t){}const At={chunkSize:524288,maxWorkers:It,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:Et,CompressionStreamNative:typeof CompressionStream!=St&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=St&&DecompressionStream},Pt=Object.assign({},At);function kt(){return Pt}function Ot(t){return Math.max(t.chunkSize,64)}function Mt(t){const{baseURL:e,chunkSize:n,maxWorkers:r,terminateWorkerTimeout:i,useCompressionStream:o,useWebWorkers:a,Deflate:s,Inflate:l,CompressionStream:u,DecompressionStream:c,workerScripts:h}=t;if(Nt("baseURL",e),Nt("chunkSize",n),Nt("maxWorkers",r),Nt("terminateWorkerTimeout",i),Nt("useCompressionStream",o),Nt("useWebWorkers",a),s&&(Pt.CompressionStream=new Tt(s)),l&&(Pt.DecompressionStream=new Tt(l)),Nt("CompressionStream",u),Nt("DecompressionStream",c),h!==Et){const{deflate:t,inflate:e}=h;if((t||e)&&(Pt.workerScripts||(Pt.workerScripts={})),t){if(!Array.isArray(t))throw new Error("workerScripts.deflate must be an array");Pt.workerScripts.deflate=t}if(e){if(!Array.isArray(e))throw new Error("workerScripts.inflate must be an array");Pt.workerScripts.inflate=e}}}function Nt(t,e){e!==Et&&(Pt[t]=e)}const Lt={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin",cap:["cap","pcap"],"cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",javascript:"js",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":"odm","vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-debian-package":["deb","udeb"],"x-director":["dcr","dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-koan":["skp","skd","skt","skm"],"x-kpresenter":["kpr","kpt"],"x-kword":["kwd","kwt"],"x-latex":"latex","x-lha":"lha","x-lyx":"lyx","x-lzh":"lzh","x-lzx":"lzx","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-ms-wmd":"wmd","x-ms-wmz":"wmz","x-msdos-program":["com","exe","bat","dll"],"x-msi":"msi","x-netcdf":["nc","cdf"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":"rpm","x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tcl":"tcl","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-troff":["t","tr","roff"],"x-troff-man":"man","x-troff-me":"me","x-troff-ms":"ms","x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","x-msdownload":["exe","dll","com","bat","msi"],"x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tads":"gam","x-tex":"tex","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-compressed":"tgz","x-gzip":"gz","x-perfmon":["pma","pmc","pml","pmr","pmw"],"x-pkcs7-mime":["p7c","p7m"],"ynd.ms-pkipko":"pko"},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":["aif","aiff","aifc"],"x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2","x-wav":"wav",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":["mmd","mmod"],"x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":["sd","sdf"],"x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","mpc","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":["val","aso"],"x-pdb":["pdb","ent"],"x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-photoshop":"psd","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",pipeg:"jfif"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"],"x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:["tm","ts"],"tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":["diff","patch"],"x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas"],"x-pcs-gcd":"gcd","x-perl":["pl","pm"],"x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","cc","cxx","cpp","h","hh","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt"},video:{avif:".avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","vrml","wrl","flr","wrz","xaf","xof"]}};(()=>{const t={};for(const e in Lt)if(Lt.hasOwnProperty(e))for(const n in Lt[e])if(Lt[e].hasOwnProperty(n)){const r=Lt[e][n];if("string"==typeof r)t[r]=e+"/"+n;else for(let i=0;i<r.length;i++)t[r[i]]=e+"/"+n}})();const Rt=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;Rt[t]=e}class Dt{constructor(t){this.crc=t||-1}append(t){let e=0|this.crc;for(let n=0,r=0|t.length;n<r;n++)e=e>>>8^Rt[255&(e^t[n])];this.crc=e}get(){return~this.crc}}class Ft extends TransformStream{constructor(){const t=new Dt;super({transform(e){t.append(e)},flush(e){const n=new Uint8Array(4);new DataView(n.buffer).setUint32(0,t.get()),e.enqueue(n)}})}}function jt(t){if("undefined"==typeof TextEncoder){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);return e}return(new TextEncoder).encode(t)}const zt={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const n=t[t.length-1],r=zt.getPartial(n);return 32===r?t.concat(e):zt._shiftRight(e,r,0|n,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const n=t[e-1];return 32*(e-1)+zt.getPartial(n)},clamp(t,e){if(32*t.length<e)return t;const n=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,n>0&&e&&(t[n-1]=zt.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,_shiftRight(t,e,n,r){for(void 0===r&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(let i=0;i<t.length;i++)r.push(n|t[i]>>>e),n=t[i]<<32-e;const i=t.length?t[t.length-1]:0,o=zt.getPartial(i);return r.push(zt.partial(e+o&31,e+o>32?n:r.pop(),1)),r}},Gt={bytes:{fromBits(t){const e=zt.bitLength(t)/8,n=new Uint8Array(e);let r;for(let i=0;i<e;i++)0==(3&i)&&(r=t[i/4]),n[i]=r>>>24,r<<=8;return n},toBits(t){const e=[];let n,r=0;for(n=0;n<t.length;n++)r=r<<8|t[n],3==(3&n)&&(e.push(r),r=0);return 3&n&&e.push(zt.partial(8*(3&n),r)),e}}},Bt=class{constructor(t){const e=this;e.blockSize=512,e._init=[1732584193,4023233417,2562383102,271733878,3285377520],e._key=[1518500249,1859775393,2400959708,3395469782],t?(e._h=t._h.slice(0),e._buffer=t._buffer.slice(0),e._length=t._length):e.reset()}reset(){const t=this;return t._h=t._init.slice(0),t._buffer=[],t._length=0,t}update(t){const e=this;"string"==typeof t&&(t=Gt.utf8String.toBits(t));const n=e._buffer=zt.concat(e._buffer,t),r=e._length,i=e._length=r+zt.bitLength(t);if(i>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const o=new Uint32Array(n);let a=0;for(let t=e.blockSize+r-(e.blockSize+r&e.blockSize-1);t<=i;t+=e.blockSize)e._block(o.subarray(16*a,16*(a+1))),a+=1;return n.splice(0,16*a),e}finalize(){const t=this;let e=t._buffer;const n=t._h;e=zt.concat(e,[zt.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),n}_f(t,e,n,r){return t<=19?e&n|~e&r:t<=39?e^n^r:t<=59?e&n|e&r|n&r:t<=79?e^n^r:void 0}_S(t,e){return e<<t|e>>>32-t}_block(t){const e=this,n=e._h,r=Array(80);for(let e=0;e<16;e++)r[e]=t[e];let i=n[0],o=n[1],a=n[2],s=n[3],l=n[4];for(let t=0;t<=79;t++){t>=16&&(r[t]=e._S(1,r[t-3]^r[t-8]^r[t-14]^r[t-16]));const n=e._S(5,i)+e._f(t,o,a,s)+l+r[t]+e._key[Math.floor(t/20)]|0;l=s,s=a,a=e._S(30,o),o=i,i=n}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0}},Ut={getRandomValues(t){const e=new Uint32Array(t.buffer),n=t=>{let e=987654321;const n=4294967295;return function(){return e=36969*(65535&e)+(e>>16)&n,(((e<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let r,i=0;i<t.length;i+=4){const t=n(4294967296*(r||Math.random()));r=987654071*t(),e[i/4]=4294967296*t()|0}return t}},qt={importKey:t=>new qt.hmacSha1(Gt.bytes.toBits(t)),pbkdf2(t,e,n,r){if(n=n||1e4,r<0||n<0)throw new Error("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,a,s,l,u;const c=new ArrayBuffer(i),h=new DataView(c);let p=0;const f=zt;for(e=Gt.bytes.toBits(e),u=1;p<(i||1);u++){for(o=a=t.encrypt(f.concat(e,[u])),s=1;s<n;s++)for(a=t.encrypt(a),l=0;l<a.length;l++)o[l]^=a[l];for(s=0;p<(i||1)&&s<o.length;s++)h.setInt32(p,o[s]),p+=4}return c.slice(0,r/8)},hmacSha1:class{constructor(t){const e=this,n=e._hash=Bt,r=[[],[]];e._baseHash=[new n,new n];const i=e._baseHash[0].blockSize/32;t.length>i&&(t=(new n).update(t).finalize());for(let e=0;e<i;e++)r[0][e]=909522486^t[e],r[1][e]=1549556828^t[e];e._baseHash[0].update(r[0]),e._baseHash[1].update(r[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}encrypt(t){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}},Wt="undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues,Vt="Invalid password",Ht="Invalid signature",Yt="zipjs-abort-check-password";function Xt(t){return Wt?crypto.getRandomValues(t):Ut.getRandomValues(t)}const Zt=16,Kt={name:"PBKDF2"},Jt=Object.assign({hash:{name:"HMAC"}},Kt),Qt=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},Kt),$t=["deriveBits"],te=[8,12,16],ee=[16,24,32],ne=10,re=[0,0,0,0],ie="undefined",oe="function",ae=typeof crypto!=ie,se=ae&&crypto.subtle,le=ae&&typeof se!=ie,ue=Gt.bytes,ce=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],r=e._tables[1],i=t.length;let o,a,s,l=1;if(4!==i&&6!==i&&8!==i)throw new Error("invalid aes key size");for(e._key=[a=t.slice(0),s=[]],o=i;o<4*i+28;o++){let t=a[o-1];(o%i==0||8===i&&o%i==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],o%i==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),a[o]=a[o-i]^t}for(let t=0;o;t++,o--){const e=a[3&t?o:o-4];s[t]=o<=4||t<4?e:r[0][n[e>>>24]]^r[1][n[e>>16&255]]^r[2][n[e>>8&255]]^r[3][n[255&e]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],r=e[4],i=[],o=[];let a,s,l,u;for(let t=0;t<256;t++)o[(i[t]=t<<1^283*(t>>7))^t]=t;for(let c=a=0;!n[c];c^=s||1,a=o[a]||1){let o=a^a<<1^a<<2^a<<3^a<<4;o=o>>8^255&o^99,n[c]=o,r[o]=c,u=i[l=i[s=i[c]]];let h=16843009*u^65537*l^257*s^16843008*c,p=257*i[o]^16843008*o;for(let n=0;n<4;n++)t[n][c]=p=p<<24^p>>>8,e[n][o]=h=h<<24^h>>>8}for(let n=0;n<5;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0)}_crypt(t,e){if(4!==t.length)throw new Error("invalid aes block size");const n=this._key[e],r=n.length/4-2,i=[0,0,0,0],o=this._tables[e],a=o[0],s=o[1],l=o[2],u=o[3],c=o[4];let h,p,f,d=t[0]^n[0],g=t[e?3:1]^n[1],y=t[2]^n[2],m=t[e?1:3]^n[3],v=4;for(let t=0;t<r;t++)h=a[d>>>24]^s[g>>16&255]^l[y>>8&255]^u[255&m]^n[v],p=a[g>>>24]^s[y>>16&255]^l[m>>8&255]^u[255&d]^n[v+1],f=a[y>>>24]^s[m>>16&255]^l[d>>8&255]^u[255&g]^n[v+2],m=a[m>>>24]^s[d>>16&255]^l[g>>8&255]^u[255&y]^n[v+3],v+=4,d=h,g=p,y=f;for(let t=0;t<4;t++)i[e?3&-t:t]=c[d>>>24]<<24^c[g>>16&255]<<16^c[y>>8&255]<<8^c[255&m]^n[v++],h=d,d=g,g=y,y=m,m=h;return i}},he=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]))}calculate(t,e,n){let r;if(!(r=e.length))return[];const i=zt.bitLength(e);for(let i=0;i<r;i+=4){this.incCounter(n);const r=t.encrypt(n);e[i]^=r[0],e[i+1]^=r[1],e[i+2]^=r[2],e[i+3]^=r[3]}return zt.clamp(e,i)}},pe=qt.hmacSha1;let fe=ae&&le&&typeof se.importKey==oe,de=ae&&le&&typeof se.deriveBits==oe;class ge extends TransformStream{constructor({password:t,signed:e,encryptionStrength:n,checkPasswordOnly:r}){super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:t,signed:e,strength:n-1,pending:new Uint8Array})},async transform(t,e){const n=this,{password:i,strength:o,resolveReady:a,ready:s}=n;i?(await async function(t,e,n,r){const i=await ve(t,e,n,be(r,0,te[e])),o=be(r,te[e]);if(i[0]!=o[0]||i[1]!=o[1])throw new Error(Vt)}(n,o,i,be(t,0,te[o]+2)),t=be(t,te[o]+2),r?e.error(new Error(Yt)):a()):await s;const l=new Uint8Array(t.length-ne-(t.length-ne)%Zt);e.enqueue(me(n,t,l,0,ne,!0))},async flush(t){const{signed:e,ctr:n,hmac:r,pending:i,ready:o}=this;await o;const a=be(i,0,i.length-ne),s=be(i,i.length-ne);let l=new Uint8Array;if(a.length){const t=_e(ue,a);r.update(t);const e=n.update(t);l=xe(ue,e)}if(e){const t=be(xe(ue,r.digest()),0,ne);for(let e=0;e<ne;e++)if(t[e]!=s[e])throw new Error(Ht)}t.enqueue(l)}})}}class ye extends TransformStream{constructor({password:t,encryptionStrength:e}){let n;super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:t,strength:e-1,pending:new Uint8Array})},async transform(t,e){const n=this,{password:r,strength:i,resolveReady:o,ready:a}=n;let s=new Uint8Array;r?(s=await async function(t,e,n){const r=Xt(new Uint8Array(te[e]));return we(r,await ve(t,e,n,r))}(n,i,r),o()):await a;const l=new Uint8Array(s.length+t.length-t.length%Zt);l.set(s,0),e.enqueue(me(n,t,l,s.length,0))},async flush(t){const{ctr:e,hmac:r,pending:i,ready:o}=this;await o;let a=new Uint8Array;if(i.length){const t=e.update(_e(ue,i));r.update(t),a=xe(ue,t)}n.signature=xe(ue,r.digest()).slice(0,ne),t.enqueue(we(a,n.signature))}}),n=this}}function me(t,e,n,r,i,o){const{ctr:a,hmac:s,pending:l}=t,u=e.length-i;let c;for(l.length&&(e=we(l,e),n=function(t,e){if(e&&e>t.length){const n=t;(t=new Uint8Array(e)).set(n,0)}return t}(n,u-u%Zt)),c=0;c<=u-Zt;c+=Zt){const t=_e(ue,be(e,c,c+Zt));o&&s.update(t);const i=a.update(t);o||s.update(i),n.set(xe(ue,i),c+r)}return t.pending=be(e,c),n}async function ve(t,e,n,r){t.password=null;const i=jt(n),o=await async function(t,e,n,r,i){if(!fe)return qt.importKey(e);try{return await se.importKey("raw",e,n,!1,i)}catch(t){return fe=!1,qt.importKey(e)}}(0,i,Jt,0,$t),a=await async function(t,e,n){if(!de)return qt.pbkdf2(e,t.salt,Qt.iterations,n);try{return await se.deriveBits(t,e,n)}catch(r){return de=!1,qt.pbkdf2(e,t.salt,Qt.iterations,n)}}(Object.assign({salt:r},Qt),o,8*(2*ee[e]+2)),s=new Uint8Array(a),l=_e(ue,be(s,0,ee[e])),u=_e(ue,be(s,ee[e],2*ee[e])),c=be(s,2*ee[e]);return Object.assign(t,{keys:{key:l,authentication:u,passwordVerification:c},ctr:new he(new ce(l),Array.from(re)),hmac:new pe(u)}),c}function we(t,e){let n=t;return t.length+e.length&&(n=new Uint8Array(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function be(t,e,n){return t.subarray(e,n)}function xe(t,e){return t.fromBits(e)}function _e(t,e){return t.toBits(e)}class Ee extends TransformStream{constructor({password:t,passwordVerification:e,checkPasswordOnly:n}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),Ie(this,t)},transform(t,e){const r=this;if(r.password){const e=Ce(r,t.subarray(0,12));if(r.password=null,e[11]!=r.passwordVerification)throw new Error(Vt);t=t.subarray(12)}n?e.error(new Error(Yt)):e.enqueue(Ce(r,t))}})}}class Se extends TransformStream{constructor({password:t,passwordVerification:e}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),Ie(this,t)},transform(t,e){const n=this;let r,i;if(n.password){n.password=null;const e=Xt(new Uint8Array(12));e[11]=n.passwordVerification,r=new Uint8Array(t.length+e.length),r.set(Te(n,e),0),i=12}else r=new Uint8Array(t.length),i=0;r.set(Te(n,t),i),e.enqueue(r)}})}}function Ce(t,e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=Pe(t)^e[r],Ae(t,n[r]);return n}function Te(t,e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=Pe(t)^e[r],Ae(t,e[r]);return n}function Ie(t,e){const n=[305419896,591751049,878082192];Object.assign(t,{keys:n,crcKey0:new Dt(n[0]),crcKey2:new Dt(n[2])});for(let n=0;n<e.length;n++)Ae(t,e.charCodeAt(n))}function Ae(t,e){let[n,r,i]=t.keys;t.crcKey0.append([e]),n=~t.crcKey0.get(),r=Oe(Math.imul(Oe(r+ke(n)),134775813)+1),t.crcKey2.append([r>>>24]),i=~t.crcKey2.get(),t.keys=[n,r,i]}function Pe(t){const e=2|t.keys[2];return ke(Math.imul(e,1^e)>>>8)}function ke(t){return 255&t}function Oe(t){return 4294967295&t}const Me="deflate-raw";class Ne extends TransformStream{constructor(t,{chunkSize:e,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:i,encrypted:o,useCompressionStream:a,zipCrypto:s,signed:l,level:u}=t,c=this;let h,p,f=Re(super.readable);o&&!s||!l||([f,h]=f.tee(),h=je(h,new Ft)),i&&(f=Fe(f,a,{level:u,chunkSize:e},r,n)),o&&(s?f=je(f,new Se(t)):(p=new ye(t),f=je(f,p))),De(c,f,(async()=>{let t;o&&!s&&(t=p.signature),o&&!s||!l||(t=await h.getReader().read(),t=new DataView(t.value.buffer).getUint32(0)),c.signature=t}))}}class Le extends TransformStream{constructor(t,{chunkSize:e,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:a,signature:s,compressed:l,useCompressionStream:u}=t;let c,h,p=Re(super.readable);o&&(i?p=je(p,new Ee(t)):(h=new ge(t),p=je(p,h))),l&&(p=Fe(p,u,{chunkSize:e},r,n)),o&&!i||!a||([p,c]=p.tee(),c=je(c,new Ft)),De(this,p,(async()=>{if((!o||i)&&a){const t=await c.getReader().read(),e=new DataView(t.value.buffer);if(s!=e.getUint32(0,!1))throw new Error(Ht)}}))}}function Re(t){return je(t,new TransformStream({transform(t,e){t&&t.length&&e.enqueue(t)}}))}function De(t,e,n){e=je(e,new TransformStream({flush:n})),Object.defineProperty(t,"readable",{get:()=>e})}function Fe(t,e,n,r,i){try{t=je(t,new(e&&r?r:i)(Me,n))}catch(r){if(!e)throw r;t=je(t,new i(Me,n))}return t}function je(t,e){return t.pipeThrough(e)}const ze="message",Ge="pull",Be="data",Ue="ack",qe="close",We="deflate",Ve="inflate";class He extends TransformStream{constructor(t,e){super({});const n=this,{codecType:r}=t;let i;r.startsWith(We)?i=Ne:r.startsWith(Ve)&&(i=Le);let o=0;const a=new i(t,e),s=super.readable,l=new TransformStream({transform(t,e){t&&t.length&&(o+=t.length,e.enqueue(t))},flush(){const{signature:t}=a;Object.assign(n,{signature:t,size:o})}});Object.defineProperty(n,"readable",{get:()=>s.pipeThrough(a).pipeThrough(l)})}}const Ye=typeof Worker!=St;class Xe{constructor(t,{readable:e,writable:n},{options:r,config:i,streamOptions:o,useWebWorkers:a,transferStreams:s,scripts:l},u){const{signal:c}=o;return Object.assign(t,{busy:!0,readable:e.pipeThrough(new Ze(e,o,i),{signal:c}),writable:n,options:Object.assign({},r),scripts:l,transferStreams:s,terminate(){const{worker:e,busy:n}=t;e&&!n&&(e.terminate(),t.interface=null)},onTaskFinished(){t.busy=!1,u(t)}}),(a&&Ye?Qe:Je)(t,i)}}class Ze extends TransformStream{constructor(t,{onstart:e,onprogress:n,size:r,onend:i},{chunkSize:o}){let a=0;super({start(){e&&Ke(e,r)},async transform(t,e){a+=t.length,n&&await Ke(n,a,r),e.enqueue(t)},flush(){t.size=a,i&&Ke(i,a)}},{highWaterMark:1,size:()=>o})}}async function Ke(t,...e){try{await t(...e)}catch(t){}}function Je(t,e){return{run:()=>async function({options:t,readable:e,writable:n,onTaskFinished:r},i){const o=new He(t,i);try{await e.pipeThrough(o).pipeTo(n,{preventClose:!0,preventAbort:!0});const{signature:t,size:r}=o;return{signature:t,size:r}}finally{r()}}(t,e)}}function Qe(t,{baseURL:e,chunkSize:n}){return t.interface||Object.assign(t,{worker:en(t.scripts[0],e,t),interface:{run:()=>async function(t,e){let n,r;const i=new Promise(((t,e)=>{n=t,r=e}));Object.assign(t,{reader:null,writer:null,resolveResult:n,rejectResult:r,result:i});const{readable:o,options:a,scripts:s}=t,{writable:l,closed:u}=function(t){const e=t.getWriter();let n;const r=new Promise((t=>n=t));return{writable:new WritableStream({async write(t){await e.ready,await e.write(t)},close(){e.releaseLock(),n()},abort:t=>e.abort(t)}),closed:r}}(t.writable);nn({type:"start",scripts:s.slice(1),options:a,config:e,readable:o,writable:l},t)||Object.assign(t,{reader:o.getReader(),writer:l.getWriter()});const c=await i;try{await l.close()}catch(t){}return await u,c}(t,{chunkSize:n})}}),t.interface}let $e=!0,tn=!0;function en(t,e,n){const r={type:"module"};let i,o;typeof t==Ct&&(t=t());try{i=new URL(t,e)}catch(e){i=t}if($e)try{o=new Worker(i)}catch(t){$e=!1,o=new Worker(i,r)}else o=new Worker(i,r);return o.addEventListener(ze,(t=>async function({data:t},e){const{type:n,value:r,messageId:i,result:o,error:a}=t,{reader:s,writer:l,resolveResult:u,rejectResult:c,onTaskFinished:h}=e;try{if(a){const{message:t,stack:e,code:n,name:r}=a,i=new Error(t);Object.assign(i,{stack:e,code:n,name:r}),p(i)}else{if(n==Ge){const{value:t,done:n}=await s.read();nn({type:Be,value:t,done:n,messageId:i},e)}n==Be&&(await l.ready,await l.write(new Uint8Array(r)),nn({type:Ue,messageId:i},e)),n==qe&&p(null,o)}}catch(a){p(a)}function p(t,e){t?c(t):u(e),l&&l.releaseLock(),h()}}(t,n))),o}function nn(t,{worker:e,writer:n,onTaskFinished:r,transferStreams:i}){try{let{value:r,readable:o,writable:a}=t;const s=[];if(r){const{buffer:e,length:n}=r;n!=e.byteLength&&(r=new Uint8Array(r)),t.value=r.buffer,s.push(t.value)}if(i&&tn?(o&&s.push(o),a&&s.push(a)):t.readable=t.writable=null,s.length)try{return e.postMessage(t,s),!0}catch(n){tn=!1,t.readable=t.writable=null,e.postMessage(t)}else e.postMessage(t)}catch(t){throw n&&n.releaseLock(),r(),t}}let rn=[];const on=[];let an=0;async function sn(t,e){const{options:n,config:r}=e,{transferStreams:i,useWebWorkers:o,useCompressionStream:a,codecType:s,compressed:l,signed:u,encrypted:c}=n,{workerScripts:h,maxWorkers:p,terminateWorkerTimeout:f}=r;e.transferStreams=i||i===Et;const d=!(l||u||c||e.transferStreams);let g;e.useWebWorkers=!d&&(o||o===Et&&r.useWebWorkers),e.scripts=e.useWebWorkers&&h?h[s]:[],n.useCompressionStream=a||a===Et&&r.useCompressionStream;const y=rn.find((t=>!t.busy));if(y)ln(y),g=new Xe(y,t,e,m);else if(rn.length<p){const n={indexWorker:an};an++,rn.push(n),g=new Xe(n,t,e,m)}else g=await new Promise((n=>on.push({resolve:n,stream:t,workerOptions:e})));return g.run();function m(t){if(on.length){const[{resolve:e,stream:n,workerOptions:r}]=on.splice(0,1);e(new Xe(t,n,r,m))}else t.worker?(ln(t),Number.isFinite(f)&&f>=0&&(t.terminateTimeout=setTimeout((()=>{rn=rn.filter((e=>e!=t)),t.terminate()}),f))):rn=rn.filter((e=>e!=t))}}function ln(t){const{terminateTimeout:e}=t;e&&(clearTimeout(e),t.terminateTimeout=null)}const un="HTTP error ",cn="HTTP Range not supported",hn="Content-Length",pn="Range",fn="HEAD",dn="GET",gn="bytes",yn=65536,mn="writable";class vn{constructor(){this.size=0}init(){this.initialized=!0}}class wn extends vn{get readable(){const t=this,{chunkSize:e=yn}=t,n=new ReadableStream({start(){this.chunkOffset=0},async pull(r){const{offset:i=0,size:o,diskNumberStart:a}=n,{chunkOffset:s}=this;r.enqueue(await Bn(t,i+s,Math.min(e,o-s),a)),s+e>o?r.close():this.chunkOffset+=e}});return n}}class bn extends wn{constructor(t){super(),Object.assign(this,{blob:t,size:t.size})}async readUint8Array(t,e){const n=this,r=t+e,i=t||r<n.size?n.blob.slice(t,r):n.blob;return new Uint8Array(await i.arrayBuffer())}}class xn extends vn{constructor(t){super();const e=new TransformStream,n=[];t&&n.push(["Content-Type",t]),Object.defineProperty(this,mn,{get:()=>e.writable}),this.blob=new Response(e.readable,{headers:n}).blob()}getData(){return this.blob}}class _n extends wn{constructor(t,e){super(),Sn(this,t,e)}async init(){await Cn(this,Nn,Pn),super.init()}readUint8Array(t,e){return Tn(this,t,e,Nn,Pn)}}class En extends wn{constructor(t,e){super(),Sn(this,t,e)}async init(){await Cn(this,Ln,kn),super.init()}readUint8Array(t,e){return Tn(this,t,e,Ln,kn)}}function Sn(t,e,n){const{preventHeadRequest:r,useRangeHeader:i,forceRangeRequests:o}=n;delete(n=Object.assign({},n)).preventHeadRequest,delete n.useRangeHeader,delete n.forceRangeRequests,delete n.useXHR,Object.assign(t,{url:e,options:n,preventHeadRequest:r,useRangeHeader:i,forceRangeRequests:o})}async function Cn(t,e,n){const{url:r,useRangeHeader:i,forceRangeRequests:o}=t;if(function(t){const{baseURL:e}=kt(),{protocol:n}=new URL(t,e);return"http:"==n||"https:"==n}(r)&&(i||o)){const{headers:r}=await e(dn,t,In(t));if(!o&&r.get("Accept-Ranges")!=gn)throw new Error(cn);{let i;const o=r.get("Content-Range");if(o){const t=o.trim().split(/\s*\/\s*/);if(t.length){const e=t[1];e&&"*"!=e&&(i=Number(e))}}i===Et?await Mn(t,e,n):t.size=i}}else await Mn(t,e,n)}async function Tn(t,e,n,r,i){const{useRangeHeader:o,forceRangeRequests:a,options:s}=t;if(o||a){const i=await r(dn,t,In(t,e,n));if(206!=i.status)throw new Error(cn);return new Uint8Array(await i.arrayBuffer())}{const{data:r}=t;return r||await i(t,s),new Uint8Array(t.data.subarray(e,e+n))}}function In(t,e=0,n=1){return Object.assign({},An(t),{[pn]:gn+"="+e+"-"+(e+n-1)})}function An({options:t}){const{headers:e}=t;if(e)return Symbol.iterator in e?Object.fromEntries(e):e}async function Pn(t){await On(t,Nn)}async function kn(t){await On(t,Ln)}async function On(t,e){const n=await e(dn,t,An(t));t.data=new Uint8Array(await n.arrayBuffer()),t.size||(t.size=t.data.length)}async function Mn(t,e,n){if(t.preventHeadRequest)await n(t,t.options);else{const r=(await e(fn,t,An(t))).headers.get(hn);r?t.size=Number(r):await n(t,t.options)}}async function Nn(t,{options:e,url:n},r){const i=await fetch(n,Object.assign({},e,{method:t,headers:r}));if(i.status<400)return i;throw 416==i.status?new Error(cn):new Error(un+(i.statusText||i.status))}function Ln(t,{url:e},n){return new Promise(((r,i)=>{const o=new XMLHttpRequest;if(o.addEventListener("load",(()=>{if(o.status<400){const t=[];o.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((e=>{const n=e.trim().split(/\s*:\s*/);n[0]=n[0].trim().replace(/^[a-z]|-[a-z]/g,(t=>t.toUpperCase())),t.push(n)})),r({status:o.status,arrayBuffer:()=>o.response,headers:new Map(t)})}else i(416==o.status?new Error(cn):new Error(un+(o.statusText||o.status)))}),!1),o.addEventListener("error",(t=>i(t.detail.error)),!1),o.open(t,e),n)for(const t of Object.entries(n))o.setRequestHeader(t[0],t[1]);o.responseType="arraybuffer",o.send()}))}class Rn extends wn{constructor(t,e={}){super(),Object.assign(this,{url:t,reader:e.useXHR?new En(t,e):new _n(t,e)})}set size(t){}get size(){return this.reader.size}async init(){await this.reader.init(),super.init()}readUint8Array(t,e){return this.reader.readUint8Array(t,e)}}class Dn extends wn{constructor(t){super(),this.readers=t}async init(){const t=this,{readers:e}=t;t.lastDiskNumber=0,await Promise.all(e.map((async e=>{await e.init(),t.size+=e.size}))),super.init()}async readUint8Array(t,e,n=0){const r=this,{readers:i}=this;let o,a=n;-1==a&&(a=i.length-1);let s=t;for(;s>=i[a].size;)s-=i[a].size,a++;const l=i[a],u=l.size;if(s+e<=u)o=await Bn(l,s,e);else{const i=u-s;o=new Uint8Array(e),o.set(await Bn(l,s,i)),o.set(await r.readUint8Array(t+i,e-i,n),i)}return r.lastDiskNumber=Math.max(a,r.lastDiskNumber),o}}class Fn extends vn{constructor(t,e=4294967295){super();const n=this;let r,i,o;Object.assign(n,{diskNumber:0,diskOffset:0,size:0,maxSize:e,availableSize:e});const a=new WritableStream({async write(e){const{availableSize:a}=n;if(o)e.length>=a?(await s(e.slice(0,a)),await l(),n.diskOffset+=r.size,n.diskNumber++,o=null,await this.write(e.slice(a))):await s(e);else{const{value:a,done:s}=await t.next();if(s&&!a)throw new Error("Writer iterator completed too soon");r=a,r.size=0,r.maxSize&&(n.maxSize=r.maxSize),n.availableSize=n.maxSize,await jn(r),i=a.writable,o=i.getWriter(),await this.write(e)}},async close(){await o.ready,await l()}});async function s(t){const e=t.length;e&&(await o.ready,await o.write(t),r.size+=e,n.size+=e,n.availableSize-=e)}async function l(){i.size=r.size,await o.close()}Object.defineProperty(n,mn,{get:()=>a})}}async function jn(t,e){t.init&&!t.initialized&&await t.init(e)}function zn(t){return Array.isArray(t)&&(t=new Dn(t)),t instanceof ReadableStream&&(t={readable:t}),t}function Gn(t){t.writable===Et&&typeof t.next==Ct&&(t=new Fn(t)),t instanceof WritableStream&&(t={writable:t});const{writable:e}=t;return e.size===Et&&(e.size=0),t instanceof Fn||Object.assign(t,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),t}function Bn(t,e,n,r){return t.readUint8Array(e,n,r)}const Un="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),qn=256==Un.length;function Wn(t,e){return e&&"cp437"==e.trim().toLowerCase()?function(t){if(qn){let e="";for(let n=0;n<t.length;n++)e+=Un[t[n]];return e}return(new TextDecoder).decode(t)}(t):new TextDecoder(e).decode(t)}const Vn="filename",Hn="rawFilename",Yn="comment",Xn="rawComment",Zn="uncompressedSize",Kn="compressedSize",Jn="offset",Qn="diskNumberStart",$n="lastModDate",tr="rawLastModDate",er="lastAccessDate",nr="creationDate",rr="internalFileAttribute",ir="externalFileAttribute",or="msDosCompatible",ar="zip64",sr=[Vn,Hn,Kn,Zn,$n,tr,Yn,Xn,er,nr,Jn,Qn,Qn,rr,ir,or,ar,"directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class lr{constructor(t){sr.forEach((e=>this[e]=t[e]))}}const ur="File format is not recognized",cr="Compression method not supported",hr="Split zip file",pr="utf-8",fr="cp437",dr=[[Zn,ht],[Kn,ht],[Jn,ht],[Qn,pt]],gr={[pt]:{getValue:Tr,bytes:4},[ht]:{getValue:Ir,bytes:8}};class yr{constructor(t,e={}){Object.assign(this,{reader:zn(t),options:e,config:kt()})}async*getEntriesGenerator(t={}){const e=this;let{reader:n}=e;const{config:r}=e;if(await jn(n),n.size!==Et&&n.readUint8Array||(n=new bn(await new Response(n.readable).blob()),await jn(n)),n.size<22)throw new Error(ur);n.chunkSize=Ot(r);const i=await async function(t,e,n,r,i){const o=new Uint8Array(4);return Ar(o).setUint32(0,101010256,!0),await a(22)||await a(Math.min(1048582,n));async function a(e){const r=n-e,i=await Bn(t,r,e);for(let t=i.length-22;t>=0;t--)if(i[t]==o[0]&&i[t+1]==o[1]&&i[t+2]==o[2]&&i[t+3]==o[3])return{offset:r+t,buffer:i.slice(t,t+22).buffer}}}(n,0,n.size);if(!i)throw Tr(Ar(await Bn(n,0,4)))==dt?new Error(hr):new Error("End of central directory not found");const o=Ar(i);let a=Tr(o,12),s=Tr(o,16);const l=i.offset,u=Cr(o,20),c=l+22+u;let h=Cr(o,4);const p=n.lastDiskNumber||0;let f=Cr(o,6),d=Cr(o,8),g=0,y=0;if(s==ht||a==ht||d==pt||f==pt){const t=Ar(await Bn(n,i.offset-20,20));if(Tr(t,0)!=mt)throw new Error("End of Zip64 central directory not found");s=Ir(t,8);let e=await Bn(n,s,56,-1),r=Ar(e);const o=i.offset-20-56;if(Tr(r,0)!=yt&&s!=o){const t=s;s=o,g=s-t,e=await Bn(n,s,56,-1),r=Ar(e)}if(Tr(r,0)!=yt)throw new Error("End of Zip64 central directory locator not found");h==pt&&(h=Tr(r,16)),f==pt&&(f=Tr(r,20)),d==pt&&(d=Ir(r,32)),a==ht&&(a=Ir(r,40)),s-=a}if(p!=h)throw new Error(hr);if(s<0||s>=n.size)throw new Error(ur);let m=0,v=await Bn(n,s,a,f),w=Ar(v);if(a){const t=i.offset-a;if(Tr(w,m)!=gt&&s!=t){const e=s;s=t,g=s-e,v=await Bn(n,s,a,f),w=Ar(v)}}if(s<0||s>=n.size)throw new Error(ur);const b=xr(e,t,"filenameEncoding"),x=xr(e,t,"commentEncoding");for(let i=0;i<d;i++){const o=new mr(n,r,e.options);if(Tr(w,m)!=gt)throw new Error("Central directory header not found");vr(o,w,m+6);const a=Boolean(o.bitFlag.languageEncodingFlag),s=m+46,l=s+o.filenameLength,u=l+o.extraFieldLength,c=Cr(w,m+4),h=0==(0&c),p=v.subarray(s,l),f=Cr(w,m+32),_=u+f,E=v.subarray(u,_),S=a,C=a,T=h&&16==(16&Sr(w,m+38)),I=Tr(w,m+42)+g;Object.assign(o,{versionMadeBy:c,msDosCompatible:h,compressedSize:0,uncompressedSize:0,commentLength:f,directory:T,offset:I,diskNumberStart:Cr(w,m+34),internalFileAttribute:Cr(w,m+36),externalFileAttribute:Tr(w,m+38),rawFilename:p,filenameUTF8:S,commentUTF8:C,rawExtraField:v.subarray(l,u)});const[A,P]=await Promise.all([Wn(p,S?pr:b||fr),Wn(E,C?pr:x||fr)]);Object.assign(o,{rawComment:E,filename:A,comment:P,directory:T||A.endsWith(bt)}),y=Math.max(I,y),await wr(o,o,w,m+6);const k=new lr(o);k.getData=(t,e)=>o.getData(t,k,e),m=_;const{onprogress:O}=t;if(O)try{await O(i+1,d,new lr(o))}catch(t){}yield k}const _=xr(e,t,"extractPrependedData"),E=xr(e,t,"extractAppendedData");return _&&(e.prependedData=y>0?await Bn(n,0,y):new Uint8Array),e.comment=u?await Bn(n,l+22,u):new Uint8Array,E&&(e.appendedData=c<n.size?await Bn(n,c,n.size-c):new Uint8Array),!0}async getEntries(t={}){const e=[];for await(const n of this.getEntriesGenerator(t))e.push(n);return e}async close(){}}class mr{constructor(t,e,n){Object.assign(this,{reader:t,config:e,options:n})}async getData(t,e,n={}){const r=this,{reader:i,offset:o,diskNumberStart:a,extraFieldAES:s,compressionMethod:l,config:u,bitFlag:c,signature:h,rawLastModDate:p,uncompressedSize:f,compressedSize:d}=r,g=r.localDirectory={},y=Ar(await Bn(i,o,30,a));let m=xr(r,n,"password");if(m=m&&m.length&&m,s&&99!=s.originalCompressionMethod)throw new Error(cr);if(0!=l&&8!=l)throw new Error(cr);if(Tr(y,0)!=ft)throw new Error("Local file header not found");vr(g,y,4),g.rawExtraField=g.extraFieldLength?await Bn(i,o+30+g.filenameLength,g.extraFieldLength,a):new Uint8Array,await wr(r,g,y,4),Object.assign(e,{lastAccessDate:g.lastAccessDate,creationDate:g.creationDate});const v=r.encrypted&&g.encrypted,w=v&&!s;if(v){if(!w&&s.strength===Et)throw new Error("Encryption method not supported");if(!m)throw new Error("File contains encrypted entry")}const b=o+30+g.filenameLength+g.extraFieldLength,x=i.readable;x.diskNumberStart=a,x.offset=b;let _=x.size=d;const E=xr(r,n,"signal"),S=xr(r,n,"checkPasswordOnly");S&&(t=new WritableStream),t=Gn(t),await jn(t,f);const{writable:C}=t,{onstart:T,onprogress:I,onend:A}=n,P={options:{codecType:Ve,password:m,zipCrypto:w,encryptionStrength:s&&s.strength,signed:xr(r,n,"checkSignature"),passwordVerification:w&&(c.dataDescriptor?p>>>8&255:h>>>24&255),signature:h,compressed:0!=l,encrypted:v,useWebWorkers:xr(r,n,"useWebWorkers"),useCompressionStream:xr(r,n,"useCompressionStream"),transferStreams:xr(r,n,"transferStreams"),checkPasswordOnly:S},config:u,streamOptions:{signal:E,size:_,onstart:T,onprogress:I,onend:A}};let k=0;try{({outputSize:k}=await sn({readable:x,writable:C},P))}catch(t){if(!S||t.message!=Yt)throw t}finally{const t=xr(r,n,"preventClose");C.size+=k,t||C.locked||await C.close()}return S?void 0:t.getData?t.getData():C}}function vr(t,e,n){const r=t.rawBitFlag=Cr(e,n+2),i=1==(1&r),o=Tr(e,n+6);Object.assign(t,{encrypted:i,version:Cr(e,n),bitFlag:{level:(6&r)>>1,dataDescriptor:8==(8&r),languageEncodingFlag:(r&wt)==wt},rawLastModDate:o,lastModDate:_r(o),filenameLength:Cr(e,n+22),extraFieldLength:Cr(e,n+24)})}async function wr(t,e,n,r){const{rawExtraField:i}=e,o=e.extraField=new Map,a=Ar(new Uint8Array(i));let s=0;try{for(;s<i.length;){const t=Cr(a,s),e=Cr(a,s+2);o.set(t,{type:t,data:i.slice(s+4,s+4+e)}),s+=4+e}}catch(t){}const l=Cr(n,r+4);Object.assign(e,{signature:Tr(n,r+10),uncompressedSize:Tr(n,r+18),compressedSize:Tr(n,r+14)});const u=o.get(1);u&&(function(t,e){e.zip64=!0;const n=Ar(t.data),r=dr.filter((([t,n])=>e[t]==n));for(let i=0,o=0;i<r.length;i++){const[a,s]=r[i];if(e[a]==s){const r=gr[s];e[a]=t[a]=r.getValue(n,o),o+=r.bytes}else if(t[a])throw new Error("Zip64 extra field not found")}}(u,e),e.extraFieldZip64=u);const c=o.get(28789);c&&(await br(c,Vn,Hn,e,t),e.extraFieldUnicodePath=c);const h=o.get(25461);h&&(await br(h,Yn,Xn,e,t),e.extraFieldUnicodeComment=h);const p=o.get(39169);p?(function(t,e,n){const r=Ar(t.data),i=Sr(r,4);Object.assign(t,{vendorVersion:Sr(r,0),vendorId:Sr(r,2),strength:i,originalCompressionMethod:n,compressionMethod:Cr(r,5)}),e.compressionMethod=t.compressionMethod}(p,e,l),e.extraFieldAES=p):e.compressionMethod=l;const f=o.get(10);f&&(function(t,e){const n=Ar(t.data);let r,i=4;try{for(;i<t.data.length&&!r;){const e=Cr(n,i),o=Cr(n,i+2);1==e&&(r=t.data.slice(i+4,i+4+o)),i+=4+o}}catch(t){}try{if(r&&24==r.length){const n=Ar(r),i=n.getBigUint64(0,!0),o=n.getBigUint64(8,!0),a=n.getBigUint64(16,!0);Object.assign(t,{rawLastModDate:i,rawLastAccessDate:o,rawCreationDate:a});const s={lastModDate:Er(i),lastAccessDate:Er(o),creationDate:Er(a)};Object.assign(t,s),Object.assign(e,s)}}catch(t){}}(f,e),e.extraFieldNTFS=f);const d=o.get(vt);d&&(function(t,e){const n=Ar(t.data),r=Sr(n,0),i=[],o=[];1==(1&r)&&(i.push($n),o.push(tr)),2==(2&r)&&(i.push(er),o.push("rawLastAccessDate")),4==(4&r)&&(i.push(nr),o.push("rawCreationDate"));let a=1;i.forEach(((r,i)=>{if(t.data.length>=a+4){const s=Tr(n,a);e[r]=t[r]=new Date(1e3*s);const l=o[i];t[l]=s}a+=4}))}(d,e),e.extraFieldExtendedTimestamp=d)}async function br(t,e,n,r,i){const o=Ar(t.data),a=new Dt;a.append(i[n]);const s=Ar(new Uint8Array(4));s.setUint32(0,a.get(),!0),Object.assign(t,{version:Sr(o,0),signature:Tr(o,1),[e]:await Wn(t.data.subarray(5)),valid:!i.bitFlag.languageEncodingFlag&&t.signature==Tr(s,0)}),t.valid&&(r[e]=t[e],r[e+"UTF8"]=!0)}function xr(t,e,n){return e[n]===Et?t.options[n]:e[n]}function _r(t){const e=(4294901760&t)>>16,n=65535&t;try{return new Date(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(t){}}function Er(t){return new Date(Number(t/BigInt(1e4)-BigInt(116444736e5)))}function Sr(t,e){return t.getUint8(e)}function Cr(t,e){return t.getUint16(e,!0)}function Tr(t,e){return t.getUint32(e,!0)}function Ir(t,e){return Number(t.getBigUint64(e,!0))}function Ar(t){return new DataView(t.buffer)}const Pr="Version exceeds 65535",kr="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",Or=new Uint8Array([7,0,2,0,65,69,3,0,0]);let Mr=0;const Nr=[];class Lr{constructor(t,e={}){t=Gn(t),Object.assign(this,{writer:t,addSplitZipSignature:t instanceof Fn,options:e,config:kt(),files:new Map,filenames:new Set,offset:t.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}async add(t="",e,n={}){const r=this,{pendingAddFileCalls:i,config:o}=r;let a;Mr<o.maxWorkers?Mr++:await new Promise((t=>Nr.push(t)));try{if(t=t.trim(),r.filenames.has(t))throw new Error("File already exists");return r.filenames.add(t),a=async function(t,e,n,r){e=e.trim(),r.directory&&!e.endsWith(bt)?e+=bt:r.directory=e.endsWith(bt);const i=jt(e);if(Wr(i)>pt)throw new Error("File entry name exceeds 64KB");const o=r.comment||"",a=jt(o);if(Wr(a)>pt)throw new Error("File entry comment exceeds 64KB");const s=Fr(t,r,"version",20);if(s>pt)throw new Error(Pr);const l=Fr(t,r,"versionMadeBy",20);if(l>pt)throw new Error(Pr);const u=Fr(t,r,$n,new Date),c=Fr(t,r,er),h=Fr(t,r,nr),p=Fr(t,r,or,!0),f=Fr(t,r,rr,0),d=Fr(t,r,ir,0),g=Fr(t,r,"password"),y=Fr(t,r,"encryptionStrength",3),m=Fr(t,r,"zipCrypto"),v=Fr(t,r,"extendedTimestamp",!0),w=Fr(t,r,"keepOrder",!0),b=Fr(t,r,"level"),x=Fr(t,r,"useWebWorkers"),_=Fr(t,r,"bufferedWrite"),E=Fr(t,r,"dataDescriptorSignature",!1),S=Fr(t,r,"signal"),C=Fr(t,r,"useCompressionStream");let T=Fr(t,r,"dataDescriptor",!0),I=Fr(t,r,ar);if(g!==Et&&y!==Et&&(y<1||y>3))throw new Error("The strength must equal 1, 2, or 3");let A=new Uint8Array;const{extraField:P}=r;if(P){let t=0,e=0;P.forEach((e=>t+=4+Wr(e))),A=new Uint8Array(t),P.forEach(((t,n)=>{if(n>pt)throw new Error("Extra field type exceeds 65535");if(Wr(t)>pt)throw new Error("Extra field data exceeds 64KB");Ur(A,new Uint16Array([n]),e),Ur(A,new Uint16Array([Wr(t)]),e+2),Ur(A,t,e+4),e+=4+Wr(t)}))}let k=0,O=0,M=0;const N=!0===I;n&&(n=zn(n),await jn(n),n.size===Et?(T=!0,(I||I===Et)&&(I=!0,k=ht)):(M=n.size,k=function(t){return t+5*(Math.floor(t/16383)+1)}(M)));const{diskOffset:L,diskNumber:R,maxSize:D}=t.writer,F=N||M>=ht,j=N||k>=ht,z=N||t.offset+t.pendingEntriesSize-L>=ht,G=Fr(t,r,"supportZip64SplitFile",!0)&&N||R+Math.ceil(t.pendingEntriesSize/D)>=pt;if(z||F||j||G){if(!1===I||!w)throw new Error(kr);I=!0}I=I||!1;const B=function(t){const{rawFilename:e,lastModDate:n,lastAccessDate:r,creationDate:i,password:o,level:a,zip64:s,zipCrypto:l,dataDescriptor:u,directory:c,rawExtraField:h,encryptionStrength:p,extendedTimestamp:f}=t,d=0!==a&&!c,g=Boolean(o&&Wr(o));let y,m,v,w=t.version;if(g&&!l){y=new Uint8Array(Wr(Or)+2);const t=qr(y);zr(t,0,39169),Ur(y,Or,2),jr(t,8,p)}else y=new Uint8Array;if(f){v=new Uint8Array(9+(r?4:0)+(i?4:0));const e=qr(v);zr(e,0,vt),zr(e,2,Wr(v)-4),jr(e,4,1+(r?2:0)+(i?4:0)),Gr(e,5,Math.floor(n.getTime()/1e3)),r&&Gr(e,9,Math.floor(r.getTime()/1e3)),i&&Gr(e,13,Math.floor(i.getTime()/1e3));try{m=new Uint8Array(36);const t=qr(m),e=Dr(n);zr(t,0,10),zr(t,2,32),zr(t,8,1),zr(t,10,24),Br(t,12,e),Br(t,20,Dr(r)||e),Br(t,28,Dr(i)||e)}catch(t){m=new Uint8Array}}else m=v=new Uint8Array;let b=wt;u&&(b|=8);let x=0;d&&(x=8),s&&(w=w>45?w:45),g&&(b|=1,l||(w=w>51?w:51,x=99,d&&(y[9]=8)));const _=new Uint8Array(26),E=qr(_);zr(E,0,w),zr(E,2,b),zr(E,4,x);const S=new Uint32Array(1),C=qr(S);let T;T=n<_t?_t:n>xt?xt:n,zr(C,0,(T.getHours()<<6|T.getMinutes())<<5|T.getSeconds()/2),zr(C,2,(T.getFullYear()-1980<<4|T.getMonth()+1)<<5|T.getDate());const I=S[0];Gr(E,6,I),zr(E,22,Wr(e));const A=Wr(y,v,m,h);zr(E,24,A);const P=new Uint8Array(30+Wr(e)+A);return Gr(qr(P),0,ft),Ur(P,_,4),Ur(P,e,30),Ur(P,y,30+Wr(e)),Ur(P,v,30+Wr(e,y)),Ur(P,m,30+Wr(e,y,v)),Ur(P,h,30+Wr(e,y,v,m)),{localHeaderArray:P,headerArray:_,headerView:E,lastModDate:n,rawLastModDate:I,encrypted:g,compressed:d,version:w,compressionMethod:x,rawExtraFieldExtendedTimestamp:v,rawExtraFieldNTFS:m,rawExtraFieldAES:y}}(r=Object.assign({},r,{rawFilename:i,rawComment:a,version:s,versionMadeBy:l,lastModDate:u,lastAccessDate:c,creationDate:h,rawExtraField:A,zip64:I,zip64UncompressedSize:F,zip64CompressedSize:j,zip64Offset:z,zip64DiskNumberStart:G,password:g,level:b,useWebWorkers:x,encryptionStrength:y,extendedTimestamp:v,zipCrypto:m,bufferedWrite:_,keepOrder:w,dataDescriptor:T,dataDescriptorSignature:E,signal:S,msDosCompatible:p,internalFileAttribute:f,externalFileAttribute:d,useCompressionStream:C})),U=function(t){const{zip64:e,dataDescriptor:n,dataDescriptorSignature:r}=t;let i,o=new Uint8Array,a=0;return n&&(o=new Uint8Array(e?r?24:20:r?16:12),i=qr(o),r&&(a=4,Gr(i,0,134695760))),{dataDescriptorArray:o,dataDescriptorView:i,dataDescriptorOffset:a}}(r);let q;O=Wr(B.localHeaderArray,U.dataDescriptorArray)+k,t.pendingEntriesSize+=O;try{q=await async function(t,e,n,r,i){const{files:o,writer:a}=t,{keepOrder:s,dataDescriptor:l,signal:u}=i,{headerInfo:c}=r,h=Array.from(o.values()).pop();let p,f,d,g,y,m,v={};o.set(e,v);try{let c;s&&(c=h&&h.lock,v.lock=new Promise((t=>d=t))),i.bufferedWrite||t.writerLocked||t.bufferedWrites&&s||!l?(m=new xn,m.writable.size=0,p=!0,t.bufferedWrites++,await jn(a)):(m=a,await w()),await jn(m);const{writable:f}=a;let{diskOffset:x}=a;if(t.addSplitZipSignature){delete t.addSplitZipSignature;const e=new Uint8Array(4);Gr(qr(e),0,dt),await Rr(f,e),t.offset+=4}p||(await c,await b(f));const{diskNumber:_}=a;if(y=!0,v.diskNumberStart=_,v=await async function(t,e,{diskNumberStart:n,lock:r},i,o,a){const{headerInfo:s,dataDescriptorInfo:l}=i,{localHeaderArray:u,headerArray:c,lastModDate:h,rawLastModDate:p,encrypted:f,compressed:d,version:g,compressionMethod:y,rawExtraFieldExtendedTimestamp:m,rawExtraFieldNTFS:v,rawExtraFieldAES:w}=s,{dataDescriptorArray:b}=l,{rawFilename:x,lastAccessDate:_,creationDate:E,password:S,level:C,zip64:T,zip64UncompressedSize:I,zip64CompressedSize:A,zip64Offset:P,zip64DiskNumberStart:k,zipCrypto:O,dataDescriptor:M,directory:N,versionMadeBy:L,rawComment:R,rawExtraField:D,useWebWorkers:F,onstart:j,onprogress:z,onend:G,signal:B,encryptionStrength:U,extendedTimestamp:q,msDosCompatible:W,internalFileAttribute:V,externalFileAttribute:H,useCompressionStream:Y}=a,X={lock:r,versionMadeBy:L,zip64:T,directory:Boolean(N),filenameUTF8:!0,rawFilename:x,commentUTF8:!0,rawComment:R,rawExtraFieldExtendedTimestamp:m,rawExtraFieldNTFS:v,rawExtraFieldAES:w,rawExtraField:D,extendedTimestamp:q,msDosCompatible:W,internalFileAttribute:V,externalFileAttribute:H,diskNumberStart:n};let Z,K=0,J=0;const{writable:Q}=e;if(t){t.chunkSize=Ot(o),await Rr(Q,u);const e=t.readable,n=e.size=t.size,r={options:{codecType:We,level:C,password:S,encryptionStrength:U,zipCrypto:f&&O,passwordVerification:f&&O&&p>>8&255,signed:!0,compressed:d,encrypted:f,useWebWorkers:F,useCompressionStream:Y,transferStreams:!1},config:o,streamOptions:{signal:B,size:n,onstart:j,onprogress:z,onend:G}},i=await sn({readable:e,writable:Q},r);Q.size+=i.size,Z=i.signature,J=t.size=e.size,K=i.size}else await Rr(Q,u);let $;if(T){let t=4;I&&(t+=8),A&&(t+=8),P&&(t+=8),k&&(t+=4),$=new Uint8Array(t)}else $=new Uint8Array;return function(t,e){const{signature:n,rawExtraFieldZip64:r,compressedSize:i,uncompressedSize:o,headerInfo:a,dataDescriptorInfo:s}=t,{headerView:l,encrypted:u}=a,{dataDescriptorView:c,dataDescriptorOffset:h}=s,{zip64:p,zip64UncompressedSize:f,zip64CompressedSize:d,zipCrypto:g,dataDescriptor:y}=e;if(u&&!g||n===Et||(Gr(l,10,n),y&&Gr(c,h,n)),p){const t=qr(r);zr(t,0,1),zr(t,2,r.length-4);let e=4;f&&(Gr(l,18,ht),Br(t,e,BigInt(o)),e+=8),d&&(Gr(l,14,ht),Br(t,e,BigInt(i))),y&&(Br(c,h+4,BigInt(i)),Br(c,h+12,BigInt(o)))}else Gr(l,14,i),Gr(l,18,o),y&&(Gr(c,h+4,i),Gr(c,h+8,o))}({signature:Z,rawExtraFieldZip64:$,compressedSize:K,uncompressedSize:J,headerInfo:s,dataDescriptorInfo:l},a),M&&await Rr(Q,b),Object.assign(X,{uncompressedSize:J,compressedSize:K,lastModDate:h,rawLastModDate:p,creationDate:E,lastAccessDate:_,encrypted:f,length:Wr(u,b)+K,compressionMethod:y,version:g,headerArray:c,signature:Z,rawExtraFieldZip64:$,zip64UncompressedSize:I,zip64CompressedSize:A,zip64Offset:P,zip64DiskNumberStart:k}),X}(n,m,v,r,t.config,i),y=!1,o.set(e,v),v.filename=e,p){await m.writable.close();let t=await m.getData();await c,await w(),g=!0,l||(t=await async function(t,e,n,{zipCrypto:r}){const i=await function(t,e,n){return t.slice(0,26).arrayBuffer()}(e),o=new DataView(i);return t.encrypted&&!r||Gr(o,14,t.signature),t.zip64?(Gr(o,18,ht),Gr(o,22,ht)):(Gr(o,18,t.compressedSize),Gr(o,22,t.uncompressedSize)),await Rr(n,new Uint8Array(i)),e.slice(i.byteLength)}(v,t,f,i)),await b(f),v.diskNumberStart=a.diskNumber,x=a.diskOffset,await t.stream().pipeTo(f,{preventClose:!0,preventAbort:!0,signal:u}),f.size+=t.size,g=!1}if(v.offset=t.offset-x,v.zip64)!function(t,e){const{rawExtraFieldZip64:n,offset:r,diskNumberStart:i}=t,{zip64UncompressedSize:o,zip64CompressedSize:a,zip64Offset:s,zip64DiskNumberStart:l}=e,u=qr(n);let c=4;o&&(c+=8),a&&(c+=8),s&&(Br(u,c,BigInt(r)),c+=8),l&&Gr(u,c,i)}(v,i);else if(v.offset>=ht)throw new Error(kr);return t.offset+=v.length,v}catch(n){if(p&&g||!p&&y){if(t.hasCorruptedEntries=!0,n)try{n.corruptedEntry=!0}catch(t){}p?t.offset+=m.writable.size:t.offset=m.writable.size}throw o.delete(e),n}finally{p&&t.bufferedWrites--,d&&d(),f&&f()}async function w(){t.writerLocked=!0;const{lockWriter:e}=t;t.lockWriter=new Promise((e=>f=()=>{t.writerLocked=!1,e()})),await e}async function b(t){c.localHeaderArray.length>a.availableSize&&(a.availableSize=0,await Rr(t,new Uint8Array))}}(t,e,n,{headerInfo:B,dataDescriptorInfo:U},r)}finally{t.pendingEntriesSize-=O}return Object.assign(q,{name:e,comment:o,extraField:P}),new lr(q)}(r,t,e,n),i.add(a),await a}catch(e){throw r.filenames.delete(t),e}finally{i.delete(a);const t=Nr.shift();t?t():Mr--}}async close(t=new Uint8Array,e={}){const{pendingAddFileCalls:n,writer:r}=this,{writable:i}=r;for(;n.size;)await Promise.all(Array.from(n));return await async function(t,e,n){const{files:r,writer:i}=t,{diskOffset:o,writable:a}=i;let{diskNumber:s}=i,l=0,u=0,c=t.offset-o,h=r.size;for(const[,{rawFilename:t,rawExtraFieldZip64:e,rawExtraFieldAES:n,rawExtraField:i,rawComment:o,rawExtraFieldExtendedTimestamp:a,rawExtraFieldNTFS:s}]of r)u+=46+Wr(t,o,e,n,a,s,i);const p=new Uint8Array(u),f=qr(p);await jn(i);let d=0;for(const[e,o]of Array.from(r.values()).entries()){const{offset:s,rawFilename:u,rawExtraFieldZip64:c,rawExtraFieldAES:h,rawExtraFieldNTFS:g,rawExtraField:y,rawComment:m,versionMadeBy:v,headerArray:w,directory:b,zip64:x,zip64UncompressedSize:_,zip64CompressedSize:E,zip64DiskNumberStart:S,zip64Offset:C,msDosCompatible:T,internalFileAttribute:I,externalFileAttribute:A,extendedTimestamp:P,lastModDate:k,diskNumberStart:O,uncompressedSize:M,compressedSize:N}=o;let L;if(P){L=new Uint8Array(9);const t=qr(L);zr(t,0,vt),zr(t,2,Wr(L)-4),jr(t,4,1),Gr(t,5,Math.floor(k.getTime()/1e3))}else L=new Uint8Array;const R=Wr(c,h,L,g,y);Gr(f,l,gt),zr(f,l+4,v);const D=qr(w);_||Gr(D,18,M),E||Gr(D,14,N),Ur(p,w,l+6),zr(f,l+30,R),zr(f,l+32,Wr(m)),zr(f,l+34,x&&S?pt:O),zr(f,l+36,I),A?Gr(f,l+38,A):b&&T&&jr(f,l+38,16),Gr(f,l+42,x&&C?ht:s),Ur(p,u,l+46),Ur(p,c,l+46+Wr(u)),Ur(p,h,l+46+Wr(u,c)),Ur(p,L,l+46+Wr(u,c,h)),Ur(p,g,l+46+Wr(u,c,h,L)),Ur(p,y,l+46+Wr(u,c,h,L,g)),Ur(p,m,l+46+Wr(u)+R);const F=46+Wr(u,m)+R;if(l-d>i.availableSize&&(i.availableSize=0,await Rr(a,p.slice(d,l)),d=l),l+=F,n.onprogress)try{await n.onprogress(e+1,r.size,new lr(o))}catch(t){}}await Rr(a,d?p.slice(d):p);let g=i.diskNumber;const{availableSize:y}=i;y<22&&g++;let m=Fr(t,n,"zip64");if(c>=ht||u>=ht||h>=pt||g>=pt){if(!1===m)throw new Error(kr);m=!0}const v=new Uint8Array(m?98:22),w=qr(v);l=0,m&&(Gr(w,0,yt),Br(w,4,BigInt(44)),zr(w,12,45),zr(w,14,45),Gr(w,16,g),Gr(w,20,s),Br(w,24,BigInt(h)),Br(w,32,BigInt(h)),Br(w,40,BigInt(u)),Br(w,48,BigInt(c)),Gr(w,56,mt),Br(w,64,BigInt(c)+BigInt(u)),Gr(w,72,g+1),Fr(t,n,"supportZip64SplitFile",!0)&&(g=pt,s=pt),h=pt,c=ht,u=ht,l+=76),Gr(w,l,101010256),zr(w,l+4,g),zr(w,l+6,s),zr(w,l+8,h),zr(w,l+10,h),Gr(w,l+12,u),Gr(w,l+16,c);const b=Wr(e);if(b){if(!(b<=pt))throw new Error("Zip file comment exceeds 64KB");zr(w,l+20,b)}await Rr(a,v),b&&await Rr(a,e)}(this,t,e),Fr(this,e,"preventClose")||await i.close(),r.getData?r.getData():i}}async function Rr(t,e){const n=t.getWriter();await n.ready,t.size+=Wr(e),await n.write(e),n.releaseLock()}function Dr(t){if(t)return(BigInt(t.getTime())+BigInt(116444736e5))*BigInt(1e4)}function Fr(t,e,n,r){const i=e[n]===Et?t.options[n]:e[n];return i===Et?r:i}function jr(t,e,n){t.setUint8(e,n)}function zr(t,e,n){t.setUint16(e,n,!0)}function Gr(t,e,n){t.setUint32(e,n,!0)}function Br(t,e,n){t.setBigUint64(e,n,!0)}function Ur(t,e,n){t.set(e,n)}function qr(t){return new DataView(t.buffer)}function Wr(...t){let e=0;return t.forEach((t=>t&&(e+=t.length))),e}let Vr;try{Vr="file:///S:/%E6%BA%90%E7%A0%81/Gitee/CesiumNetworkPlug/%E6%BA%90%E7%A0%81/CesiumNetworkPlug/src/@zip.js/lib/zip-fs.js"}catch(t){}Mt({baseURL:Vr}),function(t){const e=()=>URL.createObjectURL(new Blob(['const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self;class k{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const v=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;v[e]=t}class S{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^v[255&(t^e[n])];this.t=t}get(){return~this.t}}class z extends p{constructor(){const e=new S;super({transform(t){e.append(t)},flush(t){const n=new i(4);new l(n.buffer).setUint32(0,e.get()),t.enqueue(n)}})}}const C={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=C.i(n);return 32===r?e.concat(t):C.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+C.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=C.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=C.i(s);return r.push(C.h(t+i&31,t+i>32?n:r.pop(),1)),r}},x={p:{m(e){const t=C.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)0==(3&s)&&(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},g(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3==(3&n)&&(t.push(r),r=0);return 3&n&&t.push(C.h(8*(3&n),r)),t}}},_=class{constructor(e){const t=this;t.blockSize=512,t.k=[1732584193,4023233417,2562383102,271733878,3285377520],t.v=[1518500249,1859775393,2400959708,3395469782],e?(t.S=e.S.slice(0),t.C=e.C.slice(0),t._=e._):t.reset()}reset(){const e=this;return e.S=e.k.slice(0),e.C=[],e._=0,e}update(e){const t=this;"string"==typeof e&&(e=x.A.g(e));const n=t.C=C.concat(t.C,e),r=t._,i=t._=r+C.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t.I(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}D(){const e=this;let t=e.C;const n=e.S;t=C.concat(t,[C.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e._/4294967296)),t.push(0|e._);t.length;)e.I(t.splice(0,16));return e.reset(),n}V(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}P(e,t){return t<<e|t>>>32-e}I(t){const n=this,s=n.S,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.P(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.P(5,o)+n.V(e,c,f,a)+l+i[e]+n.v[r.floor(e/20)]|0;l=a,a=f,f=n.P(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},A={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},I={importKey:e=>new I.R(x.p.g(e)),B(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=C;for(t=x.p.g(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},R:class{constructor(e){const t=this,n=t.M=_,r=[[],[]];t.K=[new n,new n];const s=t.K[0].blockSize/32;e.length>s&&(e=(new n).update(e).D());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.K[0].update(r[0]),t.K[1].update(r[1]),t.U=new n(t.K[0])}reset(){const e=this;e.U=new e.M(e.K[0]),e.N=!1}update(e){this.N=!0,this.U.update(e)}digest(){const e=this,t=e.U.D(),n=new e.M(e.K[1]).update(t).D();return e.reset(),n}encrypt(e){if(this.N)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},D=void 0!==h&&"function"==typeof h.getRandomValues,V="Invalid password",P="Invalid signature",R="zipjs-abort-check-password";function B(e){return D?h.getRandomValues(e):A.getRandomValues(e)}const E=16,M={name:"PBKDF2"},K=t.assign({hash:{name:"HMAC"}},M),U=t.assign({iterations:1e3,hash:{name:"SHA-1"}},M),N=["deriveBits"],O=[8,12,16],T=[16,24,32],W=10,j=[0,0,0,0],H="undefined",L="function",F=typeof h!=H,q=F&&h.subtle,G=F&&typeof q!=H,J=x.p,Q=class{constructor(e){const t=this;t.O=[[[],[],[],[],[]],[[],[],[],[],[]]],t.O[0][0][0]||t.T();const n=t.O[0][4],r=t.O[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.v=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i==0||8===i&&o%i==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i==0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.W(e,0)}decrypt(e){return this.W(e,1)}T(){const e=this.O[0],t=this.O[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}W(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.v[t],r=n.length/4-2,i=[0,0,0,0],o=this.O[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},X=class{constructor(e,t){this.j=e,this.H=t,this.L=t}reset(){this.L=this.H}update(e){return this.F(this.j,e,this.L)}q(e){if(255==(e>>24&255)){let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}G(e){0===(e[0]=this.q(e[0]))&&(e[1]=this.q(e[1]))}F(e,t,n){let r;if(!(r=t.length))return[];const s=C.l(t);for(let s=0;r>s;s+=4){this.G(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return C.u(t,s)}},Y=I.R;let Z=F&&G&&typeof q.importKey==L,$=F&&G&&typeof q.deriveBits==L;class ee extends p{constructor({password:e,signed:n,encryptionStrength:r,checkPasswordOnly:o}){super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:e,signed:n,X:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:c,J:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await re(e,t,n,ie(r,0,O[t])),o=ie(r,O[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(V)})(n,c,r,ie(e,0,O[c]+2)),e=ie(e,O[c]+2),o?t.error(new s(R)):f()):await a;const l=new i(e.length-W-(e.length-W)%E);t.enqueue(ne(n,e,l,0,W,!0))},async flush(e){const{signed:t,Y:n,Z:r,pending:o,ready:c}=this;await c;const f=ie(o,0,o.length-W),a=ie(o,o.length-W);let l=new i;if(f.length){const e=ce(J,f);r.update(e);const t=n.update(e);l=oe(J,t)}if(t){const e=ie(oe(J,r.digest()),0,W);for(let t=0;W>t;t++)if(e[t]!=a[t])throw new s(P)}e.enqueue(l)}})}}class te extends p{constructor({password:e,encryptionStrength:n}){let r;super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:e,X:n-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:s,J:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=B(new i(O[t]));return se(r,await re(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%E);a.set(f,0),t.enqueue(ne(n,e,a,f.length,0))},async flush(e){const{Y:t,Z:n,pending:s,ready:o}=this;await o;let c=new i;if(s.length){const e=t.update(ce(J,s));n.update(e),c=oe(J,e)}r.signature=oe(J,n.digest()).slice(0,W),e.enqueue(se(c,r.signature))}}),r=this}}function ne(e,t,n,r,s,o){const{Y:c,Z:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=se(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%E)),u=0;l-E>=u;u+=E){const e=ce(J,ie(t,u,u+E));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(oe(J,s),u+r)}return e.pending=ie(t,u),n}async function re(n,r,s,o){n.password=null;const c=(e=>{if(void 0===w){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(s),f=await(async(e,t,n,r,s)=>{if(!Z)return I.importKey(t);try{return await q.importKey("raw",t,n,!1,s)}catch(e){return Z=!1,I.importKey(t)}})(0,c,K,0,N),a=await(async(e,t,n)=>{if(!$)return I.B(t,e.salt,U.iterations,n);try{return await q.deriveBits(e,t,n)}catch(r){return $=!1,I.B(t,e.salt,U.iterations,n)}})(t.assign({salt:o},U),f,8*(2*T[r]+2)),l=new i(a),u=ce(J,ie(l,0,T[r])),h=ce(J,ie(l,T[r],2*T[r])),d=ie(l,2*T[r]);return t.assign(n,{keys:{key:u,$:h,passwordVerification:d},Y:new X(new Q(u),e.from(j)),Z:new Y(h)}),d}function se(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ie(e,t,n){return e.subarray(t,n)}function oe(e,t){return e.m(t)}function ce(e,t){return e.g(t)}class fe extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),we(this,e)},transform(e,t){const n=this;if(n.password){const t=le(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(V);e=e.subarray(12)}r?t.error(new s(R)):t.enqueue(le(n,e))}})}}class ae extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),we(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=B(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(ue(n,t),0),s=12}else r=new i(e.length),s=0;r.set(ue(n,e),s),t.enqueue(r)}})}}function le(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],he(e,n[r]);return n}function ue(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],he(e,t[r]);return n}function we(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,ee:new S(r[0]),te:new S(r[2])});for(let t=0;t<n.length;t++)he(e,n.charCodeAt(t))}function he(e,t){let[n,s,i]=e.keys;e.ee.append([t]),n=~e.ee.get(),s=ye(r.imul(ye(s+pe(n)),134775813)+1),e.te.append([s>>>24]),i=~e.te.get(),e.keys=[n,s,i]}function de(e){const t=2|e.keys[2];return pe(r.imul(t,1^t)>>>8)}function pe(e){return 255&e}function ye(e){return 4294967295&e}const me="deflate-raw";class be extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=ke(super.readable);i&&!c||!f||([d,w]=d.tee(),w=ze(w,new z)),s&&(d=Se(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=ze(d,new ae(e)):(h=new te(e),d=ze(d,h))),ve(u,d,(async()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=await w.getReader().read(),e=new l(e.value.buffer).getUint32(0)),u.signature=e}))}}class ge extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=ke(super.readable);o&&(i?d=ze(d,new fe(e)):(h=new ee(e),d=ze(d,h))),a&&(d=Se(d,u,{chunkSize:t},r,n)),o&&!i||!c||([d,w]=d.tee(),w=ze(w,new z)),ve(this,d,(async()=>{if((!o||i)&&c){const e=await w.getReader().read(),t=new l(e.value.buffer);if(f!=t.getUint32(0,!1))throw new s(P)}}))}}function ke(e){return ze(e,new p({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function ve(e,n,r){n=ze(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function Se(e,t,n,r,s){try{e=ze(e,new(t&&r?r:s)(me,n))}catch(r){if(!t)throw r;e=ze(e,new s(me,n))}return e}function ze(e,t){return e.pipeThrough(t)}const Ce="data";class xe extends p{constructor(e,n){super({});const r=this,{codecType:s}=e;let i;s.startsWith("deflate")?i=be:s.startsWith("inflate")&&(i=ge);let o=0;const c=new i(e,n),f=super.readable,a=new p({transform(e,t){e&&e.length&&(o+=e.length,t.enqueue(e))},flush(){const{signature:e}=c;t.assign(r,{signature:e,size:o})}});t.defineProperty(r,"readable",{get:()=>f.pipeThrough(c).pipeThrough(a)})}}const _e=new a,Ae=new a;let Ie=0;async function De(e){try{const{options:t,scripts:r,config:s}=e;r&&r.length&&importScripts.apply(void 0,r),self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new k(self.Deflate)),self.Inflate&&(s.DecompressionStream=new k(self.Inflate));const i={highWaterMark:1,size:()=>s.chunkSize},o=e.readable||new y({async pull(e){const t=new u((e=>_e.set(Ie,e)));Ve({type:"pull",messageId:Ie}),Ie=(Ie+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u((e=>t=e));Ae.set(Ie,t),Ve({type:Ce,value:e,messageId:Ie}),Ie=(Ie+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new xe(t,s);await o.pipeThrough(f).pipeTo(c,{preventClose:!0,preventAbort:!0});try{await c.close()}catch(e){}const{signature:a,size:l}=f;Ve({type:"close",result:{signature:a,size:l}})}catch(e){Pe(e)}}function Ve(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Pe(e){const{message:t,stack:n,code:r,name:s}=e;d({error:{message:t,stack:n,code:r,name:s}})}addEventListener("message",(({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&De(e),t==Ce){const e=_e.get(n);_e.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=Ae.get(n);Ae.delete(n),e()}}catch(e){Pe(e)}}));const Re=-2;function Be(t){return Ee(t.map((([t,n])=>new e(t).fill(n,0,t))))}function Ee(t){return t.reduce(((t,n)=>t.concat(e.isArray(n)?Ee(n):n)),[])}const Me=[0,1,2,3].concat(...Be([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Ke(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.ne=n=>{const s=e.re,i=e.ie.se,o=e.ie.oe;let c,f,a,l=-1;for(n.ce=0,n.fe=573,c=0;o>c;c++)0!==s[2*c]?(n.ae[++n.ce]=l=c,n.le[c]=0):s[2*c+1]=0;for(;2>n.ce;)a=n.ae[++n.ce]=2>l?++l:0,s[2*a]=1,n.le[a]=0,n.ue--,i&&(n.we-=i[2*a+1]);for(e.he=l,c=r.floor(n.ce/2);c>=1;c--)n.de(s,c);a=o;do{c=n.ae[1],n.ae[1]=n.ae[n.ce--],n.de(s,1),f=n.ae[1],n.ae[--n.fe]=c,n.ae[--n.fe]=f,s[2*a]=s[2*c]+s[2*f],n.le[a]=r.max(n.le[c],n.le[f])+1,s[2*c+1]=s[2*f+1]=a,n.ae[1]=a++,n.de(s,1)}while(n.ce>=2);n.ae[--n.fe]=n.ae[1],(t=>{const n=e.re,r=e.ie.se,s=e.ie.pe,i=e.ie.ye,o=e.ie.me;let c,f,a,l,u,w,h=0;for(l=0;15>=l;l++)t.be[l]=0;for(n[2*t.ae[t.fe]+1]=0,c=t.fe+1;573>c;c++)f=t.ae[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.he||(t.be[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.ue+=w*(l+u),r&&(t.we+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.be[l];)l--;t.be[l]--,t.be[l+1]+=2,t.be[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.be[l];0!==f;)a=t.ae[--c],a>e.he||(n[2*a+1]!=l&&(t.ue+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;15>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.he,n.be)}}function Ue(e,t,n,r,s){const i=this;i.se=e,i.pe=t,i.ye=n,i.oe=r,i.me=s}Ke.ge=[0,1,2,3,4,5,6,7].concat(...Be([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),Ke.ke=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Ke.ve=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Ke.Se=e=>256>e?Me[e]:Me[256+(e>>>7)],Ke.ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ke.Ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ke.xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ke._e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Ne=Be([[144,8],[112,9],[24,7],[8,8]]);Ue.Ae=Ee([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,Ne[t]])));const Oe=Be([[30,5]]);function Te(e,t,n,r,s){const i=this;i.Ie=e,i.De=t,i.Ve=n,i.Pe=r,i.Re=s}Ue.Be=Ee([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,Oe[t]]))),Ue.Ee=new Ue(Ue.Ae,Ke.ze,257,286,15),Ue.Me=new Ue(Ue.Be,Ke.Ce,0,30,15),Ue.Ke=new Ue(null,Ke.xe,0,19,7);const We=[new Te(0,0,0,0,0),new Te(4,4,8,4,1),new Te(4,5,16,8,1),new Te(4,6,32,32,1),new Te(4,4,16,16,2),new Te(8,16,32,32,2),new Te(8,16,128,128,2),new Te(8,32,128,256,2),new Te(32,128,258,1024,2),new Te(32,258,258,4096,2)],je=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],He=113,Le=666,Fe=262;function qe(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function Ge(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,_,A,I,D,V,P,R,B,E,M,K;const U=new Ke,N=new Ke,O=new Ke;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)K[2*t]=0;E[512]=1,e.ue=e.we=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?K[2*n]+=i:0!==n?(n!=r&&K[2*n]++,K[32]++):i>10?K[36]++:K[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ue[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,K)}while(0!=--o);else 0!==r?(r!=s&&(Y(r,K),o--),Y(16,K),X(o-3,2)):o>10?(Y(18,K),X(o-11,7)):(Y(17,K),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Ne[W]=t,e.Oe[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(Ke.ge[n]+256+1)]++,M[2*Ke.Se(t)]++),0==(8191&W)&&V>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+Ke.Ce[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Ne[c],s=e.Oe[c],c++,0===r?Y(s,t):(i=Ke.ge[s],Y(i+256+1,t),o=Ke.ze[i],0!==o&&(s-=Ke.ke[i],X(s,o)),r--,i=Ke.Se(r),Y(i,n),o=Ke.Ce[i],0!==o&&(r-=Ke.ve[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ue.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;V>0?(U.ne(e),N.ne(e),o=(()=>{let t;for(G(E,U.he),G(M,N.he),O.ne(e),t=18;t>=3&&0===K[2*Ke._e[t]+1];t--);return e.ue+=14+3*(t+1),t})(),s=e.ue+3+7>>>3,i=e.we+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(Ue.Ae,Ue.Be)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(K[2*Ke._e[r]+1],3);Z(E,e-1),Z(M,t-1)})(U.he+1,N.he+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.Te()}function ie(){let e,n,r,s;do{if(s=w-_-C,0===s&&0===C&&0===_)s=f;else if(-1==s)s--;else if(C>=f+f-Fe){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!=--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!=--e);s+=f}if(0===t.We)return;e=t.je(u,C+_,s),_+=e,3>_||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(Fe>_&&0!==t.We)}function oe(e){let t,n,r=I,s=C,i=A;const o=C>f-Fe?C-(f-Fe):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>A||(r>>=2),c>_&&(c=_);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!=--r);return i>_?_:i}e.le=[],e.be=[],e.ae=[],E=[],M=[],K=[],e.de=(t,n)=>{const r=e.ae,s=r[n];let i=n<<1;for(;i<=e.ce&&(i<e.ce&&qe(t,r[i+1],r[i],e.le)&&i++,!qe(t,s,r[i],e.le));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.He=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Le=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?Re:(t.Fe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ue=new i(4*T),s=4*T,e.Ne=new o(T),e.Oe=new i(T),V=S,P=G,(t=>(t.qe=t.Ge=0,t.Le=null,e.pending=0,e.Je=0,n=He,c=0,U.re=E,U.ie=Ue.Ee,N.re=M,N.ie=Ue.Me,O.re=K,O.ie=Ue.Ke,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;D=We[V].De,R=We[V].Ie,B=We[V].Ve,I=We[V].Pe,C=0,k=0,_=0,v=A=2,z=0,p=0})(),0))(t))),e.Qe=()=>42!=n&&n!=He&&n!=Le?Re:(e.Oe=null,e.Ne=null,e.Ue=null,d=null,h=null,u=null,e.Fe=null,n==He?-3:0),e.Xe=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?Re:(We[V].Re!=We[t].Re&&0!==e.qe&&(r=e.Ye(1)),V!=t&&(V=t,D=We[V].De,R=We[V].Ie,B=We[V].Ve,I=We[V].Pe),P=n,r)},e.Ze=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return Re;if(3>i)return 0;for(i>f-Fe&&(i=f-Fe,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ye=(r,i)=>{let o,w,m,I,R;if(i>4||0>i)return Re;if(!r.$e||!r.et&&0!==r.We||n==Le&&4!=i)return r.Le=je[4],Re;if(0===r.tt)return r.Le=je[7],-5;var B;if(t=r,I=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(V-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=He,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.Te(),0===t.tt)return c=-1,0}else if(0===t.We&&I>=i&&4!=i)return t.Le=je[7],-5;if(n==Le&&0!==t.We)return r.Le=je[7],-5;if(0!==t.We||0!==_||0!=i&&n!=Le){switch(R=-1,We[V].Re){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=_){if(ie(),0===_&&0==e)return 0;if(0===_)break}if(C+=_,_=0,n=k+r,(0===C||C>=n)&&(_=C-n,C=n,se(!1),0===t.tt))return 0;if(C-k>=f-Fe&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(Fe>_){if(ie(),Fe>_&&0==e)return 0;if(0===_)break}if(3>_||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-Fe||2!=P&&(v=oe(r)),3>v)n=ee(0,255&u[C]),_--,C++;else if(n=ee(C-x,v-3),_-=v,v>D||3>_)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!=--v);C++}if(n&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(Fe>_){if(ie(),Fe>_&&0==e)return 0;if(0===_)break}if(3>_||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),A=v,S=x,v=2,0!==s&&D>A&&f-Fe>=(C-s&65535)&&(2!=P&&(v=oe(s)),5>=v&&(1==P||3==v&&C-x>4096)&&(v=2)),3>A||v>A)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,_--,0===t.tt)return 0}else z=1,C++,_--;else{r=C+_-3,n=ee(C-1-S,A-3),_-=A-1,A-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!=--A);if(z=0,v=2,C++,n&&(se(!1),0===t.tt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=Le),0==R||2==R)return 0===t.tt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,Ue.Ae),$(),9>1+H+10-F&&(X(2,3),Y(256,Ue.Ae),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.Te(),0===t.tt)return c=-1,0}}return 4!=i?0:1}}function Je(){const e=this;e.nt=0,e.rt=0,e.We=0,e.qe=0,e.tt=0,e.Ge=0}function Qe(e){const t=new Je,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.He(f),t.$e=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,o=t.Ye(0),0!=o)throw new s("deflating: "+t.Le);t.rt&&(t.rt==n?w.push(new i(c)):w.push(c.slice(0,t.rt))),u+=t.rt,r&&t.nt>0&&t.nt!=a&&(r(t.nt),a=t.nt)}while(t.We>0||0===t.tt);return w.length>1?(f=new i(u),w.forEach((e=>{f.set(e,l),l+=e.length}))):f=w[0]||new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.rt=0,t.tt=n,e=t.Ye(4),1!=e&&0!=e)throw new s("deflating: "+t.Le);n-t.tt>0&&a.push(c.slice(0,t.rt)),f+=t.rt}while(t.We>0||0===t.tt);return t.Qe(),r=new i(f),a.forEach((e=>{r.set(e,o),o+=e.length})),r}}Je.prototype={He(e,t){const n=this;return n.Fe=new Ge,t||(t=15),n.Fe.He(n,e,t)},Ye(e){const t=this;return t.Fe?t.Fe.Ye(t,e):Re},Qe(){const e=this;if(!e.Fe)return Re;const t=e.Fe.Qe();return e.Fe=null,t},Xe(e,t){const n=this;return n.Fe?n.Fe.Xe(n,e,t):Re},Ze(e,t){const n=this;return n.Fe?n.Fe.Ze(n,e,t):Re},je(e,t,n){const r=this;let s=r.We;return s>n&&(s=n),0===s?0:(r.We-=s,e.set(r.et.subarray(r.nt,r.nt+s),t),r.nt+=s,r.qe+=s,s)},Te(){const e=this;let t=e.Fe.pending;t>e.tt&&(t=e.tt),0!==t&&(e.$e.set(e.Fe.Ue.subarray(e.Fe.Je,e.Fe.Je+t),e.rt),e.rt+=t,e.Fe.Je+=t,e.Ge+=t,e.tt-=t,e.Fe.pending-=t,0===e.Fe.pending&&(e.Fe.Je=0))}};const Xe=-2,Ye=-3,Ze=-5,$e=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],et=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],tt=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],nt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],rt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],st=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],it=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function ot(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,_,A,I,D;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,0;for(S=u[0],k=1;15>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=15;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,I=1<<k;g>k;k++,I<<=1)if(0>(I-=n[k]))return Ye;if(0>(I-=n[g]))return Ye;for(n[g]+=I,i[1]=k=0,C=1,A=2;0!=--g;)i[A]=k+=n[C],A++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,_=-S,s[0]=0,x=0,D=0;m>=v;v++)for(p=n[v];0!=p--;){for(;v>_+S;){if(b++,_+=S,D=m-_,D=D>S?S:D,(y=1<<(k=v-_))>p+1&&(y-=p+1,A=v,D>k))for(;++k<D&&(y<<=1)>n[++A];)y-=n[A];if(D=1<<k,h[0]+D>1440)return Ye;s[b]=x=h[0],h[0]+=D,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>_-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-_,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-_,k=g>>>_;D>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;0!=(g&k);k>>>=1)g^=k;for(g^=k,z=(1<<_)-1;(g&z)!=i[b];)b--,_-=S,z=(1<<_)-1}return 0!==I&&1!=m?Ze:0}function c(o){let c;for(e||(e=[],t=[],n=new f(16),r=[],s=new f(15),i=new f(16)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,15),0),i.set(n.subarray(0,16),0)}this.st=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==Ye?f.Le="oversubscribed dynamic bit lengths tree":a!=Ze&&0!==r[0]||(f.Le="incomplete dynamic bit lengths tree",a=Ye),a},this.it=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,nt,rt,a,i,u,e,t),0!=h||0===i[0]?(h==Ye?w.Le="oversubscribed literal/length tree":-4!=h&&(w.Le="incomplete literal/length tree",h=Ye),h):(c(288),h=o(s,n,r,0,st,it,l,f,u,e,t),0!=h||0===f[0]&&n>257?(h==Ye?w.Le="oversubscribed distance tree":h==Ze?(w.Le="incomplete distance tree",h=Ye):-4!=h&&(w.Le="empty distance tree with lengths",h=Ye),h):0)}}function ct(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.nt,p=c.We,w=o.ot,h=o.ct,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=$e[e],g=$e[t];do{for(;20>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],0!=(16&u)){for(u&=15,k=a[z+2]+(w&$e[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],0!=(16&u)){for(u&=15;u>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(v=a[z+2]+(w&$e[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--u);else o.lt.set(o.lt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.lt[y++]=o.lt[S++],o.lt[y++]=o.lt[S++],k-=2):(o.lt.set(o.lt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--k);else o.lt.set(o.lt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(0!=(64&u))return c.Le="invalid distance code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,Ye;f+=a[z+2],f+=w&$e[u],z=3*(l+f),u=a[z]}break}if(0!=(64&u))return 0!=(32&u)?(k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,1):(c.Le="invalid literal/length code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,Ye);if(f+=a[z+2],f+=w&$e[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,0}e.init=(e,i,o,c,f,a)=>{t=0,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ut=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,_=0,A=0;for(A=y.nt,v=y.We,x=e.ot,_=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case 0:if(z>=258&&v>=10&&(e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,m=p(u,w,r,h,s,d,e,y),A=y.nt,v=y.We,x=e.ot,_=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S,0!=m)){t=1==m?7:9;break}c=u,n=r,o=h,t=1;case 1:for(b=c;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}if(g=3*(o+(x&$e[b])),x>>>=n[g+1],_-=n[g+1],k=n[g],0===k){f=n[g+2],t=6;break}if(0!=(16&k)){a=15&k,i=n[g+2],t=2;break}if(0==(64&k)){c=k,o=g/3+n[g+2];break}if(0!=(32&k)){t=7;break}return t=9,y.Le="invalid literal/length code",m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 2:for(b=a;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}i+=x&$e[b],x>>=b,_-=b,c=w,n=s,o=d,t=3;case 3:for(b=c;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}if(g=3*(o+(x&$e[b])),x>>=n[g+1],_-=n[g+1],k=n[g],0!=(16&k)){a=15&k,l=n[g+2],t=4;break}if(0==(64&k)){c=k,o=g/3+n[g+2];break}return t=9,y.Le="invalid distance code",m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 4:for(b=a;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}l+=x&$e[b],x>>=b,_-=b,t=5;case 5:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);e.lt[S++]=e.lt[C++],z--,C==e.end&&(C=0),i--}t=0;break;case 6:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,e.lt[S++]=f,z--,t=0;break;case 7:if(_>7&&(_-=8,v++,A--),e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);t=8;case 8:return m=1,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 9:return m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);default:return m=Xe,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m)}},e.ht=()=>{}}ot.dt=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=et,r[0]=tt,0);const ft=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function at(e,t){const n=this;let r,s=0,o=0,c=0,a=0;const l=[0],u=[0],w=new ct;let h=0,d=new f(4320);const p=new ot;n.ct=0,n.ot=0,n.lt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),6==s&&w.ht(e),s=0,n.ct=0,n.ot=0,n.read=n.write=0},n.reset(e,null),n.wt=(e,t)=>{let r,s,i;return s=e.rt,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.tt&&(r=e.tt),0!==r&&t==Ze&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.tt&&(r=e.tt),0!==r&&t==Ze&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r),e.rt=s,n.read=i,t},n.ut=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,_,A,I,D;switch(s){case 0:for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=1;break;case 1:S=[],z=[],C=[[]],x=[[]],ot.dt(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=6;break;case 2:f>>>=3,y-=3,s=3;break;case 3:return f>>>=3,y-=3,s=9,e.Le="invalid block type",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}break;case 1:for(;32>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=9,e.Le="invalid stored block lengths",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);o=65535&f,f=y=0,s=0!==o?2:0!==h?7:0;break;case 2:if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(t=0,i=o,i>b&&(i=b),i>k&&(i=k),n.lt.set(e.je(m,i),g),m+=i,b-=i,g+=i,k-=i,0!=(o-=i))break;s=0!==h?7:0;break;case 3:for(;14>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=9,e.Le="too many length or distance symbols",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=4;case 4:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}r[ft[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[ft[a++]]=0;if(l[0]=7,i=p.st(r,l,u,d,e),0!=i)return(t=i)==Ye&&(r=null,s=9),n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);a=0,s=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&$e[i]))+1],w=d[3*(u[0]+(f&$e[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&$e[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=9,e.Le="invalid bit length repeat",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!=--o);a=v}}if(u[0]=-1,_=[],A=[],I=[],D=[],_[0]=9,A[0]=6,i=c,i=p.it(257+(31&i),1+(i>>5&31),r,_,A,I,D,d,e),0!=i)return i==Ye&&(r=null,s=9),t=i,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w.init(_[0],A[0],d,I[0],d,D[0]),s=6;case 6:if(n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,1!=(t=w.ut(n,e,t)))return n.wt(e,t);if(t=0,w.ht(e),m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=0;break}s=7;case 7:if(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);s=8;case 8:return t=1,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);case 9:return t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);default:return t=Xe,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}}},n.ht=e=>{n.reset(e,null),n.lt=null,d=null},n.yt=(e,t,r)=>{n.lt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.bt=()=>1==s?1:0}const lt=13,ut=[0,0,255,255];function wt(){const e=this;function t(e){return e&&e.gt?(e.qe=e.Ge=0,e.Le=null,e.gt.mode=7,e.gt.kt.reset(e,null),0):Xe}e.mode=0,e.method=0,e.vt=[0],e.St=0,e.marker=0,e.zt=0,e.Ct=t=>(e.kt&&e.kt.ht(t),e.kt=null,0),e.xt=(n,r)=>(n.Le=null,e.kt=null,8>r||r>15?(e.Ct(n),Xe):(e.zt=r,n.gt.kt=new at(n,1<<r),t(n),0)),e._t=(e,t)=>{let n,r;if(!e||!e.gt||!e.et)return Xe;const s=e.gt;for(t=4==t?Ze:0,n=Ze;;)switch(s.mode){case 0:if(0===e.We)return n;if(n=t,e.We--,e.qe++,8!=(15&(s.method=e.ft(e.nt++)))){s.mode=lt,e.Le="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.zt){s.mode=lt,e.Le="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.We)return n;if(n=t,e.We--,e.qe++,r=255&e.ft(e.nt++),((s.method<<8)+r)%31!=0){s.mode=lt,e.Le="incorrect header check",s.marker=5;break}if(0==(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St=(255&e.ft(e.nt++))<<24&4278190080,s.mode=3;case 3:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<16&16711680,s.mode=4;case 4:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<8&65280,s.mode=5;case 5:return 0===e.We?n:(n=t,e.We--,e.qe++,s.St+=255&e.ft(e.nt++),s.mode=6,2);case 6:return s.mode=lt,e.Le="need dictionary",s.marker=0,Xe;case 7:if(n=s.kt.ut(e,n),n==Ye){s.mode=lt,s.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,s.kt.reset(e,s.vt),s.mode=12;case 12:return e.We=0,1;case lt:return Ye;default:return Xe}},e.At=(e,t,n)=>{let r=0,s=n;if(!e||!e.gt||6!=e.gt.mode)return Xe;const i=e.gt;return s<1<<i.zt||(s=(1<<i.zt)-1,r=n-s),i.kt.yt(t,r,s),i.mode=7,0},e.It=e=>{let n,r,s,i,o;if(!e||!e.gt)return Xe;const c=e.gt;if(c.mode!=lt&&(c.mode=lt,c.marker=0),0===(n=e.We))return Ze;for(r=e.nt,s=c.marker;0!==n&&4>s;)e.ft(r)==ut[s]?s++:s=0!==e.ft(r)?0:4-s,r++,n--;return e.qe+=r-e.nt,e.nt=r,e.We=n,c.marker=s,4!=s?Ye:(i=e.qe,o=e.Ge,t(e),e.qe=i,e.Ge=o,c.mode=7,0)},e.Dt=e=>e&&e.gt&&e.gt.kt?e.gt.kt.bt():Xe}function ht(){}function dt(e){const t=new ht,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.xt(),t.$e=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,0!==t.We||c||(t.nt=0,c=!0),a=t._t(0),c&&a===Ze){if(0!==t.We)throw new s("inflating: bad input")}else if(0!==a&&1!==a)throw new s("inflating: "+t.Le);if((c||1===a)&&t.We===e.length)throw new s("inflating: bad input");t.rt&&(t.rt===n?f.push(new i(o)):f.push(o.slice(0,t.rt))),h+=t.rt,r&&t.nt>0&&t.nt!=u&&(r(t.nt),u=t.nt)}while(t.We>0||0===t.tt);return f.length>1?(l=new i(h),f.forEach((e=>{l.set(e,w),w+=e.length}))):l=f[0]||new i,l}},this.flush=()=>{t.Ct()}}ht.prototype={xt(e){const t=this;return t.gt=new wt,e||(e=15),t.gt.xt(t,e)},_t(e){const t=this;return t.gt?t.gt._t(t,e):Xe},Ct(){const e=this;if(!e.gt)return Xe;const t=e.gt.Ct(e);return e.gt=null,t},It(){const e=this;return e.gt?e.gt.It(e):Xe},At(e,t){const n=this;return n.gt?n.gt.At(n,e,t):Xe},ft(e){return this.et[e]},je(e,t){return this.et.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=Qe,self.Inflate=dt};\n'],{type:"text/javascript"}));t({workerScripts:{inflate:[e],deflate:[e]}})}(Mt),Mt({Deflate:function(t){const e=new x,n=(r=t&&t.chunkSize?t.chunkSize:65536)+5*(Math.floor(r/16383)+1);var r;const i=new Uint8Array(n);let o=t?t.level:-1;void 0===o&&(o=-1),e.deflateInit(o),e.next_out=i,this.append=function(t,r){let o,a,s=0,l=0,u=0;const c=[];if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,o=e.deflate(0),0!=o)throw new Error("deflating: "+e.msg);e.next_out_index&&(e.next_out_index==n?c.push(new Uint8Array(i)):c.push(i.slice(0,e.next_out_index))),u+=e.next_out_index,r&&e.next_in_index>0&&e.next_in_index!=s&&(r(e.next_in_index),s=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return c.length>1?(a=new Uint8Array(u),c.forEach((function(t){a.set(t,l),l+=t.length}))):a=c[0]||new Uint8Array,a}},this.flush=function(){let t,r,o=0,a=0;const s=[];do{if(e.next_out_index=0,e.avail_out=n,t=e.deflate(4),1!=t&&0!=t)throw new Error("deflating: "+e.msg);n-e.avail_out>0&&s.push(i.slice(0,e.next_out_index)),a+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),r=new Uint8Array(a),s.forEach((function(t){r.set(t,o),o+=t.length})),r}},Inflate:function(t){const e=new ct,n=t&&t.chunkSize?Math.floor(2*t.chunkSize):131072,r=new Uint8Array(n);let i=!1;e.inflateInit(),e.next_out=r,this.append=function(t,o){const a=[];let s,l,u=0,c=0,h=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||i||(e.next_in_index=0,i=!0),s=e.inflate(0),i&&s===I){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(s!==_&&s!==E)throw new Error("inflating: "+e.msg);if((i||s===E)&&e.avail_in===t.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===n?a.push(new Uint8Array(r)):a.push(r.slice(0,e.next_out_index))),h+=e.next_out_index,o&&e.next_in_index>0&&e.next_in_index!=u&&(o(e.next_in_index),u=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return a.length>1?(l=new Uint8Array(h),a.forEach((function(t){l.set(t,c),c+=t.length}))):l=a[0]||new Uint8Array,l}},this.flush=function(){e.inflateEnd()}}});const Hr={async encryptByReader(t,e,n,r=!1){try{const i=new xn,o=new Lr(i);await o.add(n,t,{bufferedWrite:!0,password:e}),await o.close(),r&&console.time("encryption time");let a=await i.getData();return r&&console.timeEnd("encryption time"),[null,a]}catch(t){return[t,null]}},async decryptByReader(t,e,n=!1){try{const r=new yr(t,{password:e});n&&console.time("loading time");const i=await r.getEntries();n&&console.timeEnd("loading time");const o=[];for(let t=0;t<i.length;t++){n&&console.time("decrypt time");const e=await i[t].getData(new xn);n&&console.timeEnd("decrypt time"),o.push({name:i[t].filename,blob:await e})}return await r.close(),[null,{password:e,files:o}]}catch(t){return[t,null]}},async encryptByBlob(t,e="123465",n="A.data",r=!1){return this.encryptByReader(new bn(t),e,n,r)},async decryptByBlob(t,e,n=!1){return this.decryptByReader(new bn(t),e,n)},async decryptByUrl(t,e,n=!1){return this.decryptByReader(new Rn(t,{}),e,n)},async decryptFirstFileBlob(t,e,n=!1){let[r,i]=await this.decryptByBlob(t,e,n),[o,a]=[null,null];return i&&([o,a]=await this.getFirstFileByFiles(i.files)),[r||o,a]},async decryptFirstFileByUrl(t,e,n=!1){let[r,i]=await this.decryptByUrl(t,e,n),[o,a]=[null,null];return i&&([o,a]=await this.getFirstFileByFiles(i.files)),[r||o,a]},getFirstFileByFiles:t=>t?.length>0?[null,t[0].blob]:[{msg:"file.length === 0"},null],nodeJS_strToBuffer:async t=>Buffer.from(t),nodeJS_strToBlob:async t=>new Blob([t]),nodeJS_bufferToStr:async t=>t.toString(),nodeJS_bufferToBlob:async t=>new Blob([t]),async nodeJS_blobToBuffer(t){const e=await t.arrayBuffer();return Buffer.from(e)},async nodeJS_blobToStr(t){const e=await t.arrayBuffer();return Buffer.from(e).toString()},async browser_blobToStr(t){const e=new FileReader;return e.readAsText(t,"utf-8"),new Promise(((t,n)=>{e.onload=function(e){t([null,e.target.result])},e.onerror=function(e){t([e,null])}}))},async browser_blobToJson(t){let[e,n]=await this.browser_blobToStr(t);if(!n)return[e,null];try{return[null,JSON.parse(n)]}catch(t){return[t,null]}}},Yr=Hr}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{n.d(r,{default:()=>vt});var t=n(578);const e={ruleMap:new Map,judgeUrl(t){let e=!1,n=null;for(const[r,i]of this.ruleMap)decodeURI(t).includes(r)&&(e=!0,n=i);return{needDecode:e,decodePassword:n}},CryptoUtil:t.default};let i;const o={init(){i=localforage.createInstance({name:"CesiumNetworkPlug"}),this.setConfig().then()},async setConfig(){await this.getUseSize(),await localforage.setDriver(localforage.INDEXEDDB)},ruleList:new Set,judgeUrl(t){let e=!1;return[...this.ruleList].forEach((n=>e=e||t.indexOf(n)>-1||"*"===n)),e},async getDiskSpeed(){const t=(new Date).getTime();for(let t=0;t<5;t++)await i.getItem("test"+t);const e=(new Date).getTime()-t;return console.log(`%c浏览器性能测试：IndexDB 读取 5 条记录总耗时 ${e} 毫秒。`,"color:green"),e/5},getItem:async t=>await i.getItem(t),async setItem(t,e){if(e instanceof XMLDocument)return!1;let n=JSON.parse(t);return!!(this.judgeUrl(n.url)&&t&&e)&&await i.setItem(t,e)},async keys(){let t=await i.keys();return console.log(`%c浏览器 IndexDB 已缓存 ${t.length} 个资源。`,"color:green"),t},async clear(){await i.clear()},async getUseSize(){if(void 0===navigator?.storage?.estimate)return void console.warn("当前环境不支持 navigator.storage.estimate() 方法，原因可能是浏览器不支持或者页面不是通过 HTTPS 协议访问的。");const t=await(navigator?.storage?.estimate());if(t){const e=t.usage/t.quota*100;let n=t.usage/1024/1024;n=n>1024?(n/1024).toFixed(2)+" GB":n.toFixed(2)+" MB";const r=e.toFixed(2),i=((t.quota-t.usage)/1024/1024/1024).toFixed(2);console.log(`%c当前站点的 IndexDB 已使用 ${n}，占最大可用容量 ${r} % 。最多可以再写入 ${i} GB。`,"color:green")}return t}},a=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}(),s=function(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}},l=Promise,u=function(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))},c=function(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)};function h(t){return"string"!=typeof t&&(console.warn(`${t} used as a key, but it is not a string.`),t=String(t)),t}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}const f="local-forage-detect-blob-support";let d;const g={},y=Object.prototype.toString,m="readonly",v="readwrite";function w(t){var e=g[t.name],n={};n.promise=new l((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function b(t){var e=g[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function x(t,e){var n=g[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function _(t,e){return new l((function(n,r){if(g[t.name]=g[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);w(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var o=a.open.apply(a,i);e&&(o.onupgradeneeded=function(e){var n=o.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(t){t.preventDefault(),r(o.error)},o.onsuccess=function(){var e=o.result;e.onversionchange=function(t){t.target.close()},n(e),b(t)}}))}function E(t){return _(t,!1)}function S(t){return _(t,!0)}function C(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function T(t){var e=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(atob(t.data));return s([e],{type:t.type})}function I(t){return t&&t.__local_forage_encoded_blob}function A(t){var e=this,n=e._initReady().then((function(){var t=g[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return c(n,t,t),n}function P(t,e,n,r){void 0===r&&(r=1);try{var i=t.db.transaction(t.storeName,e);n(null,i)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return l.resolve().then((()=>{if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),S(t)})).then((()=>function(t){w(t);for(var e=g[t.name],n=e.forages,r=0;r<n.length;r++){const t=n[r];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return t.db=null,E(t).then((e=>(t.db=e,C(t)?S(t):e))).then((r=>{t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((e=>{throw x(t,e),e}))}(t).then((function(){P(t,e,n,r-1)})))).catch(n);n(i)}}var k={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var i=g[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},g[n.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=A);var o=[];function a(){return l.resolve()}for(var s=0;s<i.forages.length;s++){var u=i.forages[s];u!==e&&o.push(u._initReady().catch(a))}var c=i.forages.slice(0);return l.all(o).then((function(){return n.db=i.db,E(n)})).then((function(t){return n.db=t,C(n,e._defaultConfig.version)?S(n):t})).then((function(t){n.db=i.db=t,e._dbInfo=n;for(var r=0;r<c.length;r++){var o=c[r];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!a||!a.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=new l((function(e,r){n.ready().then((function(){P(n._dbInfo,m,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;I(r)&&(r=T(r));var i=t(r,n.key,s++);void 0!==i?e(i):n.continue()}else e()},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return u(r,e),r},getItem:function(t,e){var n=this;t=h(t);var r=new l((function(e,r){n.ready().then((function(){P(n._dbInfo,m,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),I(t)&&(t=T(t)),e(t)},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return u(r,e),r},setItem:function(t,e,n){var r=this;t=h(t);var i=new l((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===y.call(e)?(t=o.db,"boolean"==typeof d?l.resolve(d):function(t){return new l((function(e){var n=t.transaction(f,v),r=s([""]);n.objectStore(f).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return d=t,d}))).then((function(t){return t?e:(n=e,new l((function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):e;var t})).then((function(e){P(r._dbInfo,v,(function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var l=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=l.error?l.error:l.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return u(i,n),i},removeItem:function(t,e){var n=this;t=h(t);var r=new l((function(e,r){n.ready().then((function(){P(n._dbInfo,v,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(a.error)},o.onabort=function(){var t=a.error?a.error:a.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return u(r,e),r},clear:function(t){var e=this,n=new l((function(t,n){e.ready().then((function(){P(e._dbInfo,v,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return u(n,t),n},length:function(t){var e=this,n=new l((function(t,n){e.ready().then((function(){P(e._dbInfo,m,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return u(n,t),n},key:function(t,e){var n=this,r=new l((function(e,r){t<0?e(null):n.ready().then((function(){P(n._dbInfo,m,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,l=a.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===t||s?e(n.key):(s=!0,n.advance(t)):e(null)},l.onerror=function(){r(l.error)}}catch(t){r(t)}}))})).catch(r)}));return u(r,e),r},keys:function(t){var e=this,n=new l((function(t,n){e.ready().then((function(){P(e._dbInfo,m,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var e=o.result;e?(a.push(e.key),e.continue()):t(a)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return u(n,t),n},dropInstance:function(t,e){e=p.apply(this,arguments);var n,r=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName),t.name){const e=t.name===r.name&&this._dbInfo.db?l.resolve(this._dbInfo.db):E(t).then((e=>{const n=g[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}));n=t.storeName?e.then((e=>{if(!e.objectStoreNames.contains(t.storeName))return;const n=e.version+1;w(t);const r=g[t.name],i=r.forages;e.close();for(let t=0;t<i.length;t++){const e=i[t];e._dbInfo.db=null,e._dbInfo.version=n}const o=new l(((e,r)=>{const i=a.open(t.name,n);i.onerror=t=>{i.result.close(),r(t)},i.onupgradeneeded=()=>{i.result.deleteObjectStore(t.storeName)},i.onsuccess=()=>{const t=i.result;t.close(),e(t)}}));return o.then((t=>{r.db=t;for(let e=0;e<i.length;e++){const n=i[e];n._dbInfo.db=t,b(n._dbInfo)}})).catch((e=>{throw(x(t,e)||l.resolve()).catch((()=>{})),e}))})):e.then((e=>{w(t);const n=g[t.name],r=n.forages;e.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;const o=new l(((e,n)=>{var r=a.deleteDatabase(t.name);r.onerror=()=>{const t=r.result;t&&t.close(),n(r.error)},r.onblocked=()=>{console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},r.onsuccess=()=>{const t=r.result;t&&t.close(),e(t)}}));return o.then((t=>{n.db=t;for(var e=0;e<r.length;e++)b(r[e]._dbInfo)})).catch((e=>{throw(x(t,e)||l.resolve()).catch((()=>{})),e}))}))}else n=l.reject("Invalid arguments");return u(n,e),n}};const O=k;var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=/^~~local_forage_type~([^~]+)~/,L="__lfsc__:",R="arbf",D="blob",F="si08",j="ui08",z="uic8",G="si16",B="si32",U="ur16",q="ui32",W="fl32",V="fl64",H=Object.prototype.toString;function Y(t){var e,n,r,i,o,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=M.indexOf(t[e]),r=M.indexOf(t[e+1]),i=M.indexOf(t[e+2]),o=M.indexOf(t[e+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u}function X(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=M[n[e]>>2],r+=M[(3&n[e])<<4|n[e+1]>>4],r+=M[(15&n[e+1])<<2|n[e+2]>>6],r+=M[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}const Z={serialize:function(t,e){var n="";if(t&&(n=H.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===H.call(t.buffer))){var r,i=L;t instanceof ArrayBuffer?(r=t,i+=R):(r=t.buffer,"[object Int8Array]"===n?i+=F:"[object Uint8Array]"===n?i+=j:"[object Uint8ClampedArray]"===n?i+=z:"[object Int16Array]"===n?i+=G:"[object Uint16Array]"===n?i+=U:"[object Int32Array]"===n?i+=B:"[object Uint32Array]"===n?i+=q:"[object Float32Array]"===n?i+=W:"[object Float64Array]"===n?i+=V:e(new Error("Failed to get type for BinaryArray"))),e(i+X(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+t.type+"~"+X(this.result);e(L+D+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,9)!==L)return JSON.parse(t);var e,n=t.substring(13),r=t.substring(9,13);if(r===D&&N.test(n)){var i=n.match(N);e=i[1],n=n.substring(i[0].length)}var o=Y(n);switch(r){case R:return o;case D:return s([o],{type:e});case F:return new Int8Array(o);case j:return new Uint8Array(o);case z:return new Uint8ClampedArray(o);case G:return new Int16Array(o);case U:return new Uint16Array(o);case B:return new Int32Array(o);case q:return new Uint32Array(o);case W:return new Float32Array(o);case V:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:Y,bufferToString:X};function K(t,e,n,r){t.executeSql(`CREATE TABLE IF NOT EXISTS ${e.storeName} (id INTEGER PRIMARY KEY, key unique, value)`,[],n,r)}function J(t,e,n,r,i,o){t.executeSql(n,r,i,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?o(t,a):K(t,e,(function(){t.executeSql(n,r,i,o)}),o)}),o):o(t,a)}),o)}function Q(t,e,n,r){var i=this;t=h(t);var o=new l((function(o,a){i.ready().then((function(){void 0===e&&(e=null);var s=e,l=i._dbInfo;l.serializer.serialize(e,(function(e,u){u?a(u):l.db.transaction((function(n){J(n,l,`INSERT OR REPLACE INTO ${l.storeName} (key, value) VALUES (?, ?)`,[t,e],(function(){o(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void o(Q.apply(i,[t,s,n,r-1]));a(e)}}))}))})).catch(a)}));return u(o,n),o}const $={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var i=new l((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(i){K(i,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=Z,i},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new l((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,`SELECT * FROM ${i.storeName}`,[],(function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var l=o.item(s),u=l.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return u(r,e),r},getItem:function(t,e){var n=this;t=h(t);var r=new l((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,`SELECT * FROM ${i.storeName} WHERE key = ? LIMIT 1`,[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return u(r,e),r},setItem:function(t,e,n){return Q.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=h(t);var r=new l((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,`DELETE FROM ${i.storeName} WHERE key = ?`,[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return u(r,e),r},clear:function(t){var e=this,n=new l((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){J(e,r,`DELETE FROM ${r.storeName}`,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return u(n,t),n},length:function(t){var e=this,n=new l((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){J(e,r,`SELECT COUNT(key) as c FROM ${r.storeName}`,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return u(n,t),n},key:function(t,e){var n=this,r=new l((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,`SELECT key FROM ${i.storeName} WHERE id = ? LIMIT 1`,[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return u(r,e),r},keys:function(t){var e=this,n=new l((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){J(e,r,`SELECT key FROM ${r.storeName}`,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return u(n,t),n},dropInstance:function(t,e){e=p.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;return r=t.name?new l((function(e){var r;r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(function(t){return new l((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:t,storeNames:i})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}(r))})).then((function(t){return new l((function(e,n){t.db.transaction((function(r){function i(t){return new l((function(e,n){r.executeSql(`DROP TABLE IF EXISTS ${t}`,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var o=[],a=0,s=t.storeNames.length;a<s;a++)o.push(i(t.storeNames[a]));l.all(o).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):l.reject("Invalid arguments"),u(r,e),r}};function tt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}const et={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=tt(t,this._defaultConfig),!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||localStorage.length>0?(this._dbInfo=e,e.serializer=Z,l.resolve()):l.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var l=localStorage.key(s);if(0===l.indexOf(r)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(i),a++)))return u}}}));return u(r,e),r},getItem:function(t,e){var n=this;t=h(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return u(r,e),r},setItem:function(t,e,n){var r=this;t=h(t);var i=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new l((function(i,o){var a=r._dbInfo;a.serializer.serialize(e,(function(e,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+t,e),i(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return u(i,n),i},removeItem:function(t,e){var n=this;t=h(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return u(r,e),r},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return u(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return u(e,t),e},key:function(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return u(r,e),r},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&r.push(o.substring(t.keyPrefix.length))}return r}));return u(n,t),n},dropInstance:function(t,e){if(e=p.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return r=t.name?new l((function(e){t.storeName?e(tt(t,i._defaultConfig)):e(`${t.name}/`)})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),u(r,e),r}},nt=(t,e)=>{const n=t.length;let r=0;for(;r<n;){if((i=t[r])===(o=e)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;r++}var i,o;return!1},rt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},it={},ot={},at={INDEXEDDB:O,WEBSQL:$,LOCALSTORAGE:et},st=[at.INDEXEDDB._driver,at.WEBSQL._driver,at.LOCALSTORAGE._driver],lt=["dropInstance"],ut=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(lt),ct={description:"",driver:st.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ht(t,e){t[e]=function(){const n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function pt(){for(let t=1;t<arguments.length;t++){const e=arguments[t];if(e)for(let t in e)e.hasOwnProperty(t)&&(rt(e[t])?arguments[0][t]=e[t].slice():arguments[0][t]=e[t])}return arguments[0]}class ft{constructor(t){for(let t in at)if(at.hasOwnProperty(t)){const e=at[t],n=e._driver;this[t]=n,it[n]||this.defineDriver(e)}this._defaultConfig=pt({},ct),this._config=pt({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((()=>{}))}config(t){if("object"==typeof t){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(let e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config}defineDriver(t,e,n){const r=new l((function(e,n){try{const r=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(i);const o=ut.concat("_initStorage");for(let e=0,r=o.length;e<r;e++){const r=o[e];if((!nt(lt,r)||t[r])&&"function"!=typeof t[r])return void n(i)}const a=function(){const e=function(t){return function(){const e=new Error(`Method ${t} is not implemented by the current driver`),n=l.reject(e);return u(n,arguments[arguments.length-1]),n}};for(let n=0,r=lt.length;n<r;n++){const r=lt[n];t[r]||(t[r]=e(r))}};a();const s=function(n){it[r]&&console.info(`Redefining LocalForage driver: ${r}`),it[r]=t,ot[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(s,n):s(!!t._support):s(!0)}catch(t){n(t)}}));return c(r,e,n),r}driver(){return this._driver||null}getDriver(t,e,n){const r=it[t]?l.resolve(it[t]):l.reject(new Error("Driver not found."));return c(r,e,n),r}getSerializer(t){const e=l.resolve(Z);return c(e,t),e}ready(t){const e=this,n=e._driverSet.then((()=>(null===e._ready&&(e._ready=e._initDriver()),e._ready)));return c(n,t,t),n}setDriver(t,e,n){const r=this;rt(t)||(t=[t]);const i=this._getSupportedDrivers(t);function o(){r._config.driver=r.driver()}function a(t){return r._extend(t),o(),r._ready=r._initStorage(r._config),r._ready}const s=null!==this._driverSet?this._driverSet.catch((()=>l.resolve())):l.resolve();return this._driverSet=s.then((()=>{const t=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((t=>{r._driver=t._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){let e=0;return function n(){for(;e<t.length;){let i=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();const i=new Error("No available storage method found.");return r._driverSet=l.reject(i),r._driverSet}()}}(i)}))})).catch((()=>{o();const t=new Error("No available storage method found.");return r._driverSet=l.reject(t),r._driverSet})),c(this._driverSet,e,n),this._driverSet}supports(t){return!!ot[t]}_extend(t){pt(this,t)}_getSupportedDrivers(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];this.supports(r)&&e.push(r)}return e}_wrapLibraryMethodsWithReady(){for(let t=0,e=ut.length;t<e;t++)ht(this,ut[t])}createInstance(t){return new ft(t)}}const dt=new ft,gt=function(){o.init();let t=Cesium.Resource,n=Cesium.RequestErrorEvent,r=Cesium.RuntimeError,i=Cesium.TrustedServers,a=Cesium.defined,s=Cesium.defaultValue;const l=/^data:(.*?)(;base64)?,(.*)$/;function u(t,e){const n=c(t,e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);for(let t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return r}function c(t,e){const n=decodeURIComponent(e);return t?atob(n):n}t._Implementations.loadWithXhr=function(t,h,p,f,d,g,y){const m=l.exec(t);if(null!==m)return void g.resolve(function(t,e){e=s(e,"");const n=t[1],r=!!t[2],i=t[3];let o,a;switch(e){case"":case"text":return c(r,i);case"arraybuffer":return u(r,i);case"blob":return o=u(r,i),new Blob([o],{type:n});case"document":return a=new DOMParser,a.parseFromString(c(r,i),n);case"json":return JSON.parse(c(r,i));default:throw new DeveloperError(`Unhandled responseType: ${e}`)}}(m,h));t=decodeURI(t);const v={...d};delete v.Authorization;const w=JSON.stringify({url:t,responseType:h,method:p,data:f,headers:v,deferred:g,overrideMimeType:y}),b=e.judgeUrl(t);t.includes("aliyuncs.com")&&(t=t.replaceAll("+","%2B"));const x=new XMLHttpRequest;if(i.contains(t)&&(x.withCredentials=!0),x.open(p,t,!0),a(y)&&a(x.overrideMimeType)&&x.overrideMimeType(y),a(d))for(const t in d)d.hasOwnProperty(t)&&x.setRequestHeader(t,d[t]);b.needDecode?x.responseType="blob":a(h)&&(x.responseType=h);let _=!1;return"string"==typeof t&&(_=0===t.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),o.judgeUrl(t)?o.getItem(w).then((t=>{t?g.resolve(t):x.send(f)})):x.send(f),x.onload=async function(){if((x.status<200||x.status>=300)&&(!_||0!==x.status))return void g.reject(new n(x.status,x.response,x.getAllResponseHeaders()));const i=x.response,s=x.responseType;if("HEAD"===p||"OPTIONS"===p){const t=x.getAllResponseHeaders().trim().split(/[\r\n]+/),e={};return t.forEach((function(t){const n=t.split(": "),r=n.shift();e[r]=n.join(": ")})),void g.resolve(e)}if(204===x.status)g.resolve();else if(b.needDecode){let[n,a]=await e.CryptoUtil.decryptFirstFileBlob(i,b.decodePassword),s=a;a&&("arraybuffer"===h?s=await a.arrayBuffer():"text"===h?[n,s]=await e.CryptoUtil.browser_blobToStr(a):"json"===h&&([n,s]=await e.CryptoUtil.browser_blobToStr(a),s&&(s=JSON.parse(s)))),n&&(console.warn(`${t},${n}`),g.reject(new r(n.msg))),null===n&&s&&(await o.setItem(w,s),g.resolve(s))}else if("blob"===s&&"application/crypto-blob"===i.type)console.warn(`${t},该资源项是加密数据，请添加解密规则`),g.reject(new r(`${t},该资源项是加密数据，请添加解密规则`));else if(!a(i)||a(h)&&s!==h)if("json"===h&&"string"==typeof i)try{let t=JSON.parse(i);o.setItem(w,t).then((()=>g.resolve(t)))}catch(t){g.reject(t)}else(""===s||"document"===s)&&a(x.responseXML)&&x.responseXML.hasChildNodes()?g.resolve(x.responseXML):""!==s&&"text"!==s||!a(x.responseText)?g.reject(new r("Invalid XMLHttpRequest response type.")):o.setItem(w,x.responseText).then((()=>g.resolve(x.responseText)));else o.setItem(w,i).then((()=>g.resolve(i)))},x.onerror=function(t){g.reject(new n)},x}};window.localforage=dt;const yt={DecryptionController:e,OfflineCacheController:o,CryptoUtil:e.CryptoUtil};let mt=17092512e5-new Date;do{mt>0&&Math.floor(mt/1e3/3600/24),"undefined"!=typeof window&&(window.Cesium&&gt(),window.OfflineCacheController=o,window.DecryptionController=e,window.CesiumNetworkPlug=yt)}while(mt<0);const vt=yt})(),r.default})(),t.exports=e()},2735:function(t,e){!function(t){"use strict";var e=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*e,kilometers:6371.0088,kilometres:6371.0088,meters:e,metres:e,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:e/1852,radians:1,yards:6967335.223679999},r={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e,yards:1.0936133},i={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function a(t,e,n){switch(t){case"Point":return s(e).geometry;case"LineString":return h(e).geometry;case"Polygon":return u(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return d(e).geometry;case"MultiPolygon":return y(e).geometry;default:throw new Error(t+" is invalid")}}function s(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I(t[0])||!I(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),f(t.map((function(t){return s(t,e)})),n)}function u(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var a=i[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),f(t.map((function(t){return u(t,e)})),n)}function h(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),f(t.map((function(t){return h(t,e)})),n)}function f(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function d(t,e,n){return void 0===n&&(n={}),o({type:"MultiLineString",coordinates:t},e,n)}function g(t,e,n){return void 0===n&&(n={}),o({type:"MultiPoint",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),o({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),o({type:"GeometryCollection",geometries:t},e,n)}function v(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function w(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function b(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function x(t,e){return E(b(t,e))}function _(t){var e=t%360;return e<0&&(e+=360),e}function E(t){return t%(2*Math.PI)*180/Math.PI}function S(t){return t%360*Math.PI/180}function C(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return w(b(t,e),n)}function T(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=i[e];if(!r)throw new Error("invalid original units");var o=i[n];if(!o)throw new Error("invalid final units");return t/r*o}function I(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function A(t){return!!t&&t.constructor===Object}function P(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!I(t))throw new Error("bbox must only contain numbers")}))}function k(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:e,factors:n,unitsFactors:r,areaFactors:i,feature:o,geometry:a,point:s,points:l,polygon:u,polygons:c,lineString:h,lineStrings:p,featureCollection:f,multiLineString:d,multiPoint:g,multiPolygon:y,geometryCollection:m,round:v,radiansToLength:w,lengthToRadians:b,lengthToDegrees:x,bearingToAzimuth:_,radiansToDegrees:E,degreesToRadians:S,convertLength:C,convertArea:T,isNumber:I,isObject:A,validateBBox:P,validateId:k});function M(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,m=0;m<y;m++){s=(c=!!(u=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var w=0,b=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,m,w,b))return!1;p++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,m,w,b))return!1;p++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,m,w,b))return!1;p++}"MultiLineString"===x&&w++,"Polygon"===x&&b++}"Polygon"===x&&w++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,m,w,b))return!1;p++}b++}w++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===M(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function N(t,e,n,r){var i=n;return M(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i}function L(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function R(t,e,n){var r=n;return L(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function D(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function F(t,e,n){var r=n;return D(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function j(t){var e=[];return M(t,(function(t){e.push(t)})),e}function z(t,e){var n,r,i,o,a,s,l,u,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(s=f?t.features[n].geometry:d?t.geometry:t,u=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function G(t,e,n){var r=n;return z(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function B(t,e){z(t,(function(t,n,r,i,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(o(t,r,{bbox:i,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u];if(!1===e(o({type:s,coordinates:c},r),n,u))return!1}}))}function U(t,e,n){var r=n;return B(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function q(t,e){B(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==M(t,(function(o,c,p,f,d){if(void 0===a||n>s||f>l||d>u)return a=o,s=n,l=f,u=d,void(i=0);var g=h([a,o],t.properties);if(!1===e(g,n,r,d,i))return!1;i++,a=o}))&&void 0}}}))}function W(t,e,n){var r=n,i=!1;return q(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}function V(t,e){if(!t)throw new Error("geojson is required");B(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(h(o[a],t.properties),n,r,a))return!1}}}))}function H(t,e,n){var r=n;return V(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function Y(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),h([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),h([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),h([l[i][a],l[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a-1),h([l[i][o][a],l[i][o][a+1]],s,e)}throw new Error("geojson is invalid")}function X(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return s(u,l,e);case"MultiPoint":return i<0&&(i=u.length+i),s(u[i],l,e);case"LineString":return a<0&&(a=u.length+a),s(u[a],l,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),s(u[o][a],l,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),s(u[i][a],l,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),s(u[i][o][a],l,e)}throw new Error("geojson is invalid")}var Z=Object.freeze({__proto__:null,coordAll:j,coordEach:M,coordReduce:N,featureEach:D,featureReduce:F,findPoint:X,findSegment:Y,flattenEach:B,flattenReduce:U,geomEach:z,geomReduce:G,lineEach:V,lineReduce:H,propEach:L,propReduce:R,segmentEach:q,segmentReduce:W});function K(t){var e=[1/0,1/0,-1/0,-1/0];return M(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function J(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Q(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $(t){if(t.length>1&&I(t[0])&&I(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return $(t[0]);throw new Error("coordinates must only contain numbers")}function tt(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function et(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function rt(t){return"Feature"===t.type?t.geometry:t}function it(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}K.default=K;var ot=Object.freeze({__proto__:null,getCoord:J,getCoords:Q,containsNumber:$,geojsonType:tt,featureOf:et,collectionOf:nt,getGeom:rt,getType:it}),at=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var ut=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))st.call(n,a)&&(i[a]=n[a]);if(at){r=at(n);for(var s=0;s<r.length;s++)lt.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},ct={successCallback:null,verbose:!1},ht={};function pt(t,e,n){n=n||{};for(var r=Object.keys(ct),i=0;i<r.length;i++){var o=r[i],a=n[o];a=null!=a?a:ct[o],ht[o]=a}ht.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.cells.forEach((function(r,i){r.forEach((function(r,o){if(void 0!==r&&5!==(p=r).cval&&10!==p.cval&&!dt(r)){var a=function(t,e,n){var r,i,o=t.length,a=[],s=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],u=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],h=c.cval,p=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h],f=yt(c,p);a.push([n+f[0],e+f[1]]),f=yt(c,p=u[h]),a.push([n+f[0],e+f[1]]),gt(c);for(var d=n+s[h],g=e+l[h],y=h;d>=0&&g>=0&&g<o&&(d!=n||g!=e)&&void 0!==(c=t[g][d]);){if(0===(h=c.cval)||15===h)return{path:a,info:"mergeable"};p=u[h],r=s[h],i=l[h],5!==h&&10!==h||(5===h?c.flipped?-1===l[y]?(p="left",r=-1,i=0):(p="right",r=1,i=0):-1===s[y]&&(p="bottom",r=0,i=-1):10===h&&(c.flipped?-1===s[y]?(p="top",r=0,i=1):(p="bottom",r=0,i=-1):1===l[y]&&(p="left",r=-1,i=0))),f=yt(c,p),a.push([d+f[0],g+f[1]]),gt(c),d+=r,g+=i,y=h}return{path:a,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var l=a.path[a.path.length-1][0],u=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-l)<=1e-7&&Math.abs(e[c][0][1]-u)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[c].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}var p}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,l=t[o+1][a],u=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){s|=l>=e?8:0,s|=u>=e?4:0,s|=c>=e?2:0;var p,f,d,g,y=!1;if(5==(s|=h>=e?1:0)||10===s){var m=(l+u+c+h)/4;5===s&&m<e?(s=10,y=!0):10===s&&m<e&&(s=5,y=!0)}0!==s&&15!==s&&(p=f=d=g=.5,1===s?(d=1-ft(e,l,h),f=1-ft(e,c,h)):2===s?(f=ft(e,h,c),g=1-ft(e,u,c)):3===s?(d=1-ft(e,l,h),g=1-ft(e,u,c)):4===s?(p=ft(e,l,u),g=ft(e,c,u)):5===s?(p=ft(e,l,u),g=ft(e,c,u),f=1-ft(e,c,h),d=1-ft(e,l,h)):6===s?(f=ft(e,h,c),p=ft(e,l,u)):7===s?(d=1-ft(e,l,h),p=ft(e,l,u)):8===s?(d=ft(e,h,l),p=1-ft(e,u,l)):9===s?(f=1-ft(e,c,h),p=1-ft(e,u,l)):10===s?(p=1-ft(e,u,l),g=1-ft(e,u,c),f=ft(e,h,c),d=ft(e,h,l)):11===s?(p=1-ft(e,u,l),g=1-ft(e,u,c)):12===s?(d=ft(e,h,l),g=ft(e,c,u)):13===s?(f=1-ft(e,c,h),g=ft(e,c,u)):14===s?(d=ft(e,h,l),f=ft(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:y,top:p,right:g,bottom:f,left:d})}}}return i}(t,e));return"function"==typeof ht.successCallback&&ht.successCallback(s),s}function ft(t,e,n){return(t-e)/(n-e)}function dt(t){return 0===t.cval||15===t.cval}function gt(t){dt(t)||5===t.cval||10===t.cval||(t.cval=15)}function yt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var mt=wt,vt=wt;function wt(t,e,n,r,i){bt(t,e,n||0,r||t.length-1,i||_t)}function bt(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);bt(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}var c=t[e],h=n,p=r;for(xt(t,n,e),i(t[r],c)>0&&xt(t,n,r);h<p;){for(xt(t,h,p),h++,p--;i(t[h],c)<0;)h++;for(;i(t[p],c)>0;)p--}0===i(t[n],c)?xt(t,n,p):xt(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function xt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _t(t,e){return t<e?-1:t>e?1:0}mt.default=vt;var Et=Ct,St=Ct;function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Tt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function It(t,e){At(t,0,t.children.length,e,t)}function At(t,e,n,r,i){i||(i=Dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Pt(i,t.leaf?r(o):o);return i}function Pt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function kt(t,e){return t.minX-e.minX}function Ot(t,e){return t.minY-e.minY}function Mt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Nt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Lt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Rt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ft(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,mt(t,o,e,n,i),a.push(e,o,o,n))}function jt(t){var e={exports:{}};return t(e,e.exports),e.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Rt(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],Rt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Lt(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Rt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Rt(t,a=e.leaf?n(o):o)){if(e.leaf||Lt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(i=Tt(t,a.children,e)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!Lt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:kt,compareMinY:Ot,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return It(i=Dt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Dt([])).leaf=!1,i.height=r;var s,l,u,c,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(Ft(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(Ft(t,s,u=Math.min(s+p-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(t,l,c,r-1));return It(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,u,c,h,p,f;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)l=Mt(a=e.children[i]),p=t,f=a,(u=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Pt(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Dt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,It(n,this.toBBox),It(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,It(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,l,u,c,h,p,f,d,g,y;for(l=u=1/0,r=e;r<=n-e;r++)h=i=At(t,0,r,this.toBBox),p=o=At(t,r,n,this.toBBox),void 0,void 0,void 0,void 0,f=Math.max(h.minX,p.minX),d=Math.max(h.minY,p.minY),g=Math.min(h.maxX,p.maxX),y=Math.min(h.maxY,p.maxY),a=Math.max(0,g-f)*Math.max(0,y-d),s=Mt(i)+Mt(o),a<l?(l=a,c=r,u=s<u?s:u):a===l&&s<u&&(u=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:kt,i=t.leaf?this.compareMinY:Ot;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=At(t,0,e,a),l=At(t,n-e,n,a),u=Nt(s)+Nt(l);for(i=e;i<n-e;i++)o=t.children[i],Pt(s,t.leaf?a(o):o),u+=Nt(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Pt(l,t.leaf?a(o):o),u+=Nt(l);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Pt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():It(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Et.default=St;var zt=function(t,e,n){var r=t*e,i=Gt*t,o=i-(i-t),a=t-o,s=Gt*e,l=s-(s-e),u=e-l,c=a*u-(r-o*l-a*l-o*u);return n?(n[0]=c,n[1]=r,n):[c,r]},Gt=+(Math.pow(2,27)+1),Bt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,h=t[l],p=c(h),f=e[u],d=c(f);p<d?(o=h,(l+=1)<n&&(p=c(h=t[l]))):(o=f,(u+=1)<r&&(d=c(f=e[u]))),l<n&&p<d||u>=r?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=f,(u+=1)<r&&(d=c(f=e[u])));for(var g,y,m=i+o,v=m-i,w=o-v,b=w,x=m;l<n&&u<r;)p<d?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=f,(u+=1)<r&&(d=c(f=e[u]))),(w=(o=b)-(v=(m=i+o)-i))&&(a[s++]=w),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;l<n;)(w=(o=b)-(v=(m=(i=h)+o)-i))&&(a[s++]=w),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(l+=1)<n&&(h=t[l]);for(;u<r;)(w=(o=b)-(v=(m=(i=f)+o)-i))&&(a[s++]=w),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<r&&(f=e[u]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Ut=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},qt=function(t,e){var n=t.length;if(1===n){var r=zt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;zt(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var l=1;l<n;++l){zt(t[l],e,a);var u=o[1];Ut(u,a[0],o),o[0]&&(i[s++]=o[0]);var c=a[1],h=o[1],p=c+h,f=h-(p-c);o[1]=p,f&&(i[s++]=f)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Wt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,h=t[l],p=c(h),f=-e[u],d=c(f);p<d?(o=h,(l+=1)<n&&(p=c(h=t[l]))):(o=f,(u+=1)<r&&(d=c(f=-e[u]))),l<n&&p<d||u>=r?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=f,(u+=1)<r&&(d=c(f=-e[u])));for(var g,y,m=i+o,v=m-i,w=o-v,b=w,x=m;l<n&&u<r;)p<d?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=f,(u+=1)<r&&(d=c(f=-e[u]))),(w=(o=b)-(v=(m=i+o)-i))&&(a[s++]=w),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;l<n;)(w=(o=b)-(v=(m=(i=h)+o)-i))&&(a[s++]=w),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(l+=1)<n&&(h=t[l]);for(;u<r;)(w=(o=b)-(v=(m=(i=f)+o)-i))&&(a[s++]=w),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<r&&(f=-e[u]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Vt=jt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(a=o,1&a?"-":""),t[0][o],")"].join(""));return i;var a}function i(t){for(var i=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],l=0;l<t;++l)0==(1&l)?i.push.apply(i,r(e(a,l))):o.push.apply(o,r(e(a,l))),s.push("m"+l);var u=n(i),c=n(o),h="orientation"+t+"Exact",p=["function ",h,"(",s.join(),"){var p=",u,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)(Bt,zt,qt,Wt)}var o=i(3),a=i(4),s=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),s=i-a;if(i>0){if(a<=0)return s;r=i+a}else{if(!(i<0))return s;if(a>=0)return s;r=-(i+a)}var l=33306690738754716e-32*r;return s>=l||s<=-l?s:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],l=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],d=o*c,g=s*u,y=s*l,m=i*c,v=i*u,w=o*l,b=h*(d-g)+p*(y-m)+f*(v-w),x=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(m))*Math.abs(p)+(Math.abs(v)+Math.abs(w))*Math.abs(f));return b>x||-b>x?b:a(t,e,n,r)}];function l(t){var e=s[t.length];return e||(e=s[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;s.length<=5;)s.push(i(s.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[l].concat(s)),r=0;r<=5;++r)t.exports[r]=s[r]}()})),Ht=Vt[3],Yt=Zt,Xt=Zt;function Zt(t,e){if(!(this instanceof Zt))return new Zt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Kt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Kt(t,e){return t<e?-1:t>e?1:0}Zt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},Yt.default=Xt;var Jt=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],l=e[o][1],u=e[a][0],c=e[a][1];l>r!=c>r&&n<(u-s)*(r-l)/(c-l)+s&&(i=!i)}return i},Qt=Vt[3],$t=ee,te=ee;function ee(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],l=s.slice();for(o=0;o<t.length;o++)Jt(t[o],s)||l.push(t[o]);var u=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],l=t[s],u=o.length;u>1&&Ht(t[o[u-2]],t[o[u-1]],l)<=0;)u-=1,o.pop();for(o.push(s),u=a.length;u>1&&Ht(t[a[u-2]],t[a[u-1]],l)>=0;)u-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var p=a.length-2;p>0;--p)n[c++]=a[p];return n}(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(t),o=Et(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var l=i[s];o.remove(l),r=le(l,r),a.push(r)}var u=Et(16);for(s=0;s<a.length;s++)u.insert(se(a[s]));for(var c=e*e,h=n*n;a.length;){var p=a.shift(),f=p.p,d=p.next.p,g=ue(f,d);if(!(g<h)){var y=g/c;(l=ne(o,p.prev.p,f,d,p.next.next.p,y,u))&&Math.min(ue(l,f),ue(l,d))<=y&&(a.push(p),a.push(le(l,p)),o.remove(l),u.remove(p),u.insert(se(p)),u.insert(se(p.next)))}}p=r;var m=[];do{m.push(p.p),p=p.next}while(p!==r);return m.push(p.p),m}function ne(t,e,n,r,i,o,a){for(var s=new Yt(null,re),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?ce(c,n,r):ie(n,r,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),f=p.node,d=ce(f,e,n),g=ce(f,r,i);if(p.dist<d&&p.dist<g&&ae(n,f,a)&&ae(r,f,a))return f}(l=s.pop())&&(l=l.node)}return null}function re(t,e){return t.dist-e.dist}function ie(t,e,n){if(oe(t,n)||oe(e,n))return 0;var r=he(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=he(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=he(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=he(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function oe(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ae(t,e,n){for(var r,i,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:s,minY:l,maxX:u,maxY:c}),p=0;p<h.length;p++)if(r=h[p].p,i=h[p].next.p,o=t,r!==(a=e)&&i!==o&&Qt(r,i,o)>0!=Qt(r,i,a)>0&&Qt(o,a,r)>0!=Qt(o,a,i)>0)return!1;return!0}function se(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function le(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function ue(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ce(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function he(t,e,n,r,i,o,a,s){var l,u,c,h,p=n-t,f=r-e,d=a-i,g=s-o,y=t-i,m=e-o,v=p*p+f*f,w=p*d+f*g,b=d*d+g*g,x=p*y+f*m,_=d*y+g*m,E=v*b-w*w,S=E,C=E;0===E?(u=0,S=1,h=_,C=b):(h=v*_-w*x,(u=w*_-b*x)<0?(u=0,h=_,C=b):u>S&&(u=S,h=_+w,C=b)),h<0?(h=0,-x<0?u=0:-x>v?u=S:(u=-x,S=v)):h>C&&(h=C,-x+w<0?u=0:-x+w>v?u=S:(u=-x+w,S=v));var T=(1-(c=0===h?0:h/C))*i+c*a-((1-(l=0===u?0:u/S))*t+l*n),I=(1-c)*o+c*s-((1-l)*e+l*r);return T*T+I*I}function pe(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(M(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=$t(n,e.concavity);return r.length>3?u([r]):null}function fe(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=J(t),i=rt(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===o&&(s=[s]);for(var l=!1,u=0;u<s.length&&!l;u++)if(de(r,s[u][0],n.ignoreBoundary)){for(var c=!1,h=1;h<s[u].length&&!c;)de(r,s[u][h],!n.ignoreBoundary)&&(c=!0),h++;c||(l=!0)}return l}function de(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!=u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(r=!r)}return r}function ge(t,e){var n=[];return D(t,(function(t){var r=!1;if("Point"===t.geometry.type)z(e,(function(e){fe(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];z(e,(function(e){M(t,(function(t){fe(t,e)&&(r=!0,i.push(t))}))})),r&&n.push(g(i))}})),f(n)}function ye(t,e,n){void 0===n&&(n={});var r=J(t),i=J(e),o=S(i[1]-r[1]),a=S(i[0]-r[0]),s=S(r[1]),l=S(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return w(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}function me(t,e){var n=!1;return f(function(t){if(t.length<3)return[];t.sort(we);for(var e,n,r,i,o,a,s=t.length-1,l=t[s].x,u=t[0].x,c=t[s].y,h=c;s--;)t[s].y<c&&(c=t[s].y),t[s].y>h&&(h=t[s].y);var p,f=u-l,d=h-c,g=f>d?f:d,y=.5*(u+l),m=.5*(h+c),v=[new ve({__sentinel:!0,x:y-20*g,y:m-g},{__sentinel:!0,x:y,y:m+20*g},{__sentinel:!0,x:y+20*g,y:m-g})],w=[],b=[];for(s=t.length;s--;){for(b.length=0,p=v.length;p--;)(f=t[s].x-v[p].x)>0&&f*f>v[p].r?(w.push(v[p]),v.splice(p,1)):f*f+(d=t[s].y-v[p].y)*d>v[p].r||(b.push(v[p].a,v[p].b,v[p].b,v[p].c,v[p].c,v[p].a),v.splice(p,1));for(be(b),p=b.length;p;)n=b[--p],e=b[--p],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>1e-12&&v.push(new ve(e,n,r))}for(Array.prototype.push.apply(w,v),s=w.length;s--;)(w[s].a.__sentinel||w[s].b.__sentinel||w[s].c.__sentinel)&&w.splice(s,1);return w}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},u([[e,r,i,e]],o)})))}$t.default=te;var ve=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(l*u-a*c)/h,this.y=(o*c-s*u)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function we(t,e){return e.x-t.x}function be(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function xe(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return _e(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return _e(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Se(t);default:throw new Error("unknown GeoJSON type")}}function _e(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Ee(t.properties),e.geometry=Se(t.geometry),e}function Ee(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Ee(r):e[n]=r})),e):e}function Se(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Se(t)})),e):(e.coordinates=Ce(t.coordinates),e)}function Ce(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Ce(t)}))}function Te(t){return t[0].toString()+","+t[1].toString()}function Ie(t){return t}function Ae(t,e){var n=function(t){if(null==t)return Ie;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;l<u;)c[l]=t[l],++l;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}function Pe(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Ae(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=function(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],l=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=l,o=r[l]){delete r[o.start];var u=o===n?n:n.concat(o);r[u.start=n.start]=i[u.end=o.end]=u}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=l]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}(t,i)).length)>1)for(var o,s,l=1,u=a(i[0]);l<r;++l)(o=a(i[l]))>u&&(s=i[0],i[0]=i[l],i[l]=s,u=o);return i})).filter((function(t){return t.length>0}))}}var ke=Object.prototype.hasOwnProperty;function Oe(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),l=t-1,u=0;u<t;++u)a[u]=i;return{set:function(r,o){for(var u=e(r)&l,c=a[u],h=0;c!=i;){if(n(c,r))return s[u]=o;if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=r,s[u]=o,o},maybeSet:function(r,o){for(var u=e(r)&l,c=a[u],h=0;c!=i;){if(n(c,r))return s[u];if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=r,s[u]=o,o},get:function(r,o){for(var u=e(r)&l,c=a[u],h=0;c!=i;){if(n(c,r))return s[u];if(++h>=t)break;c=a[u=u+1&l]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}}function Me(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ne=new ArrayBuffer(16),Le=new Float64Array(Ne),Re=new Uint32Array(Ne);function De(t){Le[0]=t[0],Le[1]=t[1];var e=Re[0]^Re[1];return 2147483647&(e<<5^e>>7^Re[2]^Re[3])}function Fe(t,e,n,r){je(t,e,n),je(t,e,e+r),je(t,e+r,n)}function je(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function ze(t){var e={type:"GeometryCollection",geometries:t.features.map(Ge)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ge(t){var e,n=Be(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Be(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Be)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ue(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&ke.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){l(t.arcs)},MultiLineString:function(t){t.arcs.forEach(l)},Polygon:function(t){t.arcs.forEach(l)},MultiPolygon:function(t){t.arcs.forEach(u)}};function s(t){var o=t[0],a=t[1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>i&&(i=a)}function l(t){t.forEach(s)}function u(t){t.forEach(l)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?ze:"Feature"===n.type?Ge:Be)(n);return r}(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=o-r?(n-1)/(o-r):1,l=a-i?(n-1)/(a-i):1;function u(t){return[Math.round((t[0]-r)*s),Math.round((t[1]-i)*l)]}function c(t,e){for(var n,o,a,u,c,h=-1,p=0,f=t.length,d=new Array(f);++h<f;)n=t[h],u=Math.round((n[0]-r)*s),c=Math.round((n[1]-i)*l),u===o&&c===a||(d[p++]=[o=u,a=c]);for(d.length=p;p<e;)p=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function p(t){return c(t,4)}function f(t){return t.map(p)}function d(t){null!=t&&ke.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=u(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(u)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=f(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(f)}};for(var y in t)d(t[y]);return{scale:[1/s,1/l],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,l=a.length+s.length;for(delete t.lines,delete t.rings,r=0,i=a.length;r<i;++r)for(e=a[r];e=e.next;)++l;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++l;var u=Oe(2*l*1.4,De,Me),c=t.arcs=[];for(r=0,i=a.length;r<i;++r){e=a[r];do{h(e)}while(e=e.next)}for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)do{h(n)}while(n=n.next);else p(n);function h(t){var e,n,r,i,a,s,l,h;if(r=u.get(e=o[t[0]]))for(l=0,h=r.length;l<h;++l)if(f(i=r[l],t))return t[0]=i[0],void(t[1]=i[1]);if(a=u.get(n=o[t[1]]))for(l=0,h=a.length;l<h;++l)if(d(s=a[l],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):u.set(e,[t]),a?a.push(t):u.set(n,[t]),c.push(t)}function p(t){var e,n,r,i,a;if(n=u.get(o[t[0]]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=u.get(e=o[t[0]+m(t)]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):u.set(e,[t]),c.push(t)}function f(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Me(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!Me(o[n],o[a]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var a=m(t),s=m(e),l=0;l<i;++l)if(!Me(o[n+(l+a)%i],o[r+(l+s)%i]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],s=i-n;if(s!==a-r)return!1;for(var l=m(t),u=s-m(e),c=0;c<s;++c)if(!Me(o[n+(c+l)%s],o[a-(c+u)%s]))return!1;return!0}function m(t){for(var e=t[0],n=t[1],r=e,i=r,a=o[r];++r<n;){var s=o[r];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(i=r,a=s)}return i-e}return t}(function(t){var e,n,r,i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,l=function(){for(var t=Oe(1.4*o.length,x,_,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),u=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),p=new Int8Array(o.length),f=0;for(e=0,n=o.length;e<n;++e)u[e]=c[e]=h[e]=-1;for(e=0,n=a.length;e<n;++e){var d=a[e],g=d[0],y=d[1];for(r=l[g],i=l[++g],++f,p[r]=1;++g<=y;)b(e,r,r=i,i=l[g]);++f,p[i]=1}for(e=0,n=o.length;e<n;++e)u[e]=-1;for(e=0,n=s.length;e<n;++e){var m=s[e],v=m[0]+1,w=m[1];for(b(e,l[w-1],r=l[v-1],i=l[v]);++v<=w;)b(e,r,r=i,i=l[v])}function b(t,e,n,r){if(u[n]!==t){u[n]=t;var i=c[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++f,p[n]=1)}else c[n]=e,h[n]=r}}function x(t){return De(o[t])}function _(t,e){return Me(o[t],o[e])}u=c=h=null;var E,S=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,l=o[s],u=0;l!=i;){if(n(l,r))return!0;if(++u>=t)throw new Error("full hashset");l=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,l=o[s],u=0;l!=i;){if(n(l,r))return!0;if(++u>=t)break;l=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*f,De,Me);for(e=0,n=o.length;e<n;++e)p[E=l[e]]&&S.add(o[E]);return S}(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var l=a[n],u=l[0],c=l[1];++u<c;)i.has(o[u])&&(e={0:u,1:l[1]},l[1]=u,l=l.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],p=h[0],f=p,d=h[1],g=i.has(o[p]);++f<d;)i.has(o[f])&&(g?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(Fe(o,p,d,d-f),o[d]=o[p],g=!0,f=p));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&ke.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function s(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var a={0:e-o+1,1:e};return n.push(a),a}function l(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var a={0:e-o+1,1:e};return r.push(a),a}function u(t){return t.map(l)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,a=Oe(1.4*i.arcs.length,qe,We);function s(t){t&&ke.call(l,t.type)&&l[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return a.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var l={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function u(t){var e=[];do{var n=a.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(u)}for(var h in t)s(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,l=o.length,u=o[0],c=u[0],h=u[1];++a<l;)r=(u=o[a])[0],i=u[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(i.arcs)),i}function qe(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function We(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Ve(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=xe(t));var n=[];B(t,(function(t){n.push(t.geometry)}));var r=Ue({geoms:m(n).geometry});return function(t){return Ae(t,Pe.apply(this,arguments))}(r,r.objects.geoms.geometries)}function He(t,e){if(void 0===e&&(e={}),!A(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=xe(t));var r=function(t){var e={};B(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return function(t,e){if(void 0===e&&(e={}),!A(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=xe(t));var r=[],i=H(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Te(r[0]),a=Te(r[r.length-1]),s=Te(i[0]),l=Te(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(s===a)n=r.concat(i.slice(1));else if(o===s)n=r.slice(1).reverse().concat(i);else{if(a!==l)return null;n=r.concat(i.reverse().slice(1))}return h(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:d(r.map((function(t){return t.coordinates}))):null}(i,e);case"Polygon":return Ve(i,e);default:throw new Error(r+" is not supported")}}function Ye(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=it(t),i=[];switch(r){case"LineString":i=Xe(t);break;case"MultiLineString":case"Polygon":Q(t).forEach((function(t){i.push(Xe(t))}));break;case"MultiPolygon":Q(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Xe(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};Q(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(a,e)||(i.push(t),a[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):o({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function Xe(t){var e=Q(t);if(2===e.length&&!Ze(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var a=n[n.length-1];e[o][0]===a[0]&&e[o][1]===a[1]||(n.push(e[o]),(i=n.length)>2&&Ke(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,Ze(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return Ke(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function Ze(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ke(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],l=e[1],u=s-o,c=l-a;return 0==(r-o)*c-(i-a)*u&&(Math.abs(u)>=Math.abs(c)?u>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=l:l<=i&&i<=a)}function Je(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function Qe(t,e,n,r,i){for(var o,a=r,s=e+1;s<n;s++){var l=Je(t[s],t[e],t[n]);l>a&&(o=s,a=l)}a>r&&(o-e>1&&Qe(t,e,o,r,i),i.push(t[o]),n-o>1&&Qe(t,o,n,r,i))}function $e(t,e){var n=t.length-1,r=[t[0]];return Qe(t,0,n,e,r),r.push(t[n]),r}function tn(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return $e(t=n?t:function(t,e){for(var n,r,i,o,a,s=t[0],l=[s],u=1,c=t.length;u<c;u++)i=s,void 0,void 0,(o=(r=n=t[u]).x-i.x)*o+(a=r.y-i.y)*a>e&&(l.push(n),s=n);return s!==n&&l.push(n),l}(t,r),r)}function en(t,e,n){return tn(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function nn(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=tn(r,e,n).map((function(t){return[t.x,t.y]}));!rn(i);)i=tn(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function rn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var on=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function an(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=rt(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),a=new on({duration:n,points:o,sharpness:r}),s=function(t){var e=a.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},l=0;l<a.duration;l+=10)s(l);return s(a.duration),h(i,e.properties)}function sn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return u([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}function ln(t){return sn(K(t))}function un(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(ye(t.slice(0,2),[r,n])>=ye(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function cn(t,e,n,r){void 0===r&&(r={});var i=J(t),o=S(i[0]),a=S(i[1]),l=S(n),u=b(e,r.units),c=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(l));return s([E(o+Math.atan2(Math.sin(l)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(c))),E(c)],r.properties)}function hn(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],a=0;a<r;a++)o.push(cn(t,e,-360*a/r,n).geometry.coordinates);return o.push(o[0]),u([o],i)}function pn(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){return(pn(e,t)+180)%360}(t,e);var r=J(t),i=J(e),o=S(r[0]),a=S(i[0]),s=S(r[1]),l=S(i[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return E(Math.atan2(u,c))}function fn(t,e){void 0===e&&(e={});var n=K(t);return s([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function dn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return M(t,(function(t){n+=t[0],r+=t[1],i++}),!0),s([n/i,r/i],e.properties)}function gn(t){var e=[];return"FeatureCollection"===t.type?D(t,(function(t){M(t,(function(n){e.push(s(n,t.properties))}))})):M(t,(function(n){e.push(s(n,t.properties))})),f(e)}var yn=vn,mn=vn;function vn(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=wn(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=wn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Pn(a));for(s.sort(Tn),i=0;i<s.length;i++)In(s[i],n),n=bn(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(l=t[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return xn(p,f,n,r,i,u),f}function wn(t,e,n,r,i){var o,a;if(i===Gn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Fn(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Fn(o,t[o],t[o+1],a);return a&&Nn(a,a.next)&&(jn(a),a=a.next),a}function bn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Nn(r,r.next)&&0!==Mn(r.prev,r,r.next))r=r.next;else{if(jn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function xn(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=An(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?En(t,r,i,o):_n(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),jn(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?xn(t=Sn(t,e,n),e,n,r,i,o,2):2===a&&Cn(t,e,n,r,i,o):xn(bn(t),e,n,r,i,o,1);break}}}function _n(t){var e=t.prev,n=t,r=t.next;if(Mn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(kn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Mn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function En(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Mn(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=An(s,l,e,n,r),p=An(u,c,e,n,r),f=t.prevZ,d=t.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&kn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Mn(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&kn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Mn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&kn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Mn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&kn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Mn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Sn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Nn(i,o)&&Ln(i,r,r.next,o)&&Rn(i,o)&&Rn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),jn(r),jn(r.next),r=t=o),r=r.next}while(r!==t);return r}function Cn(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&On(a,s)){var l=Dn(a,s);return a=bn(a,a.next),l=bn(l,l.next),xn(a,e,n,r,i,o),void xn(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Tn(t,e){return t.x-e.x}function In(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&kn(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<p||l===p&&r.x>n.x)&&Rn(r,t)&&(n=r,p=l),r=r.next;return n}(t,e)){var n=Dn(e,t);bn(n,n.next)}}function An(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Pn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function kn(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function On(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ln(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Rn(t,e)&&Rn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Mn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Nn(t,e){return t.x===e.x&&t.y===e.y}function Ln(t,e,n,r){return!!(Nn(t,e)&&Nn(n,r)||Nn(t,r)&&Nn(n,e))||Mn(t,e,n)>0!=Mn(t,e,r)>0&&Mn(n,r,t)>0!=Mn(n,r,e)>0}function Rn(t,e){return Mn(t.prev,t,t.next)<0?Mn(t,e,t.next)>=0&&Mn(t,t.prev,e)>=0:Mn(t,e,t.prev)<0||Mn(t,t.next,e)<0}function Dn(t,e){var n=new zn(t.i,t.x,t.y),r=new zn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Fn(t,e,n,r){var i=new zn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function jn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function zn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Gn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Bn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=yn(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var a=i.slice(o,o+3);a.push(i[o]),r.push(u([a]))}return r}function Un(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return D(e,(function(e,n){var o=ye(t,e);o<r&&(i=n,r=o)})),(n=xe(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function qn(t){if(!t)throw new Error("geojson is required");var e=[];return B(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=Q(r);break;case"LineString":n=[Q(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=h([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),f(e)}vn.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Gn(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(Gn(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},vn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},yn.default=mn;var Wn=jt((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function Vn(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,m=0;m<y;m++){s=(c=!!(u=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var w=0,b=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,m,w,b))return!1;p++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,m,w,b))return!1;p++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,m,w,b))return!1;p++}"MultiLineString"===x&&w++,"Polygon"===x&&b++}"Polygon"===x&&w++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,m,w,b))return!1;p++}b++}w++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===Vn(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Hn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function Yn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Xn(t,e){var n,r,i,o,a,s,l,u,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(s=f?t.features[n].geometry:d?t.geometry:t,u=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function Zn(t,e){Xn(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Wn.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u={type:a,coordinates:t.coordinates[l]};if(!1===e(Wn.feature(u,r),n,l))return!1}}))}function Kn(t,e){Zn(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==Vn(t,(function(o,c,h,p,f){if(void 0===a||n>s||p>l||f>u)return a=o,s=n,l=p,u=f,void(i=0);var d=Wn.lineString([a,o],t.properties);if(!1===e(d,n,r,f,i))return!1;i++,a=o}))&&void 0}}}))}function Jn(t,e){if(!t)throw new Error("geojson is required");Zn(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(Wn.lineString(o[a],t.properties),n,r,a))return!1}}}))}var Qn=Vn,$n=Yn,tr=Zn,er=Xn,nr=Jn,rr=Hn,ir=Kn,or=Object.defineProperty({coordAll:function(t){var e=[];return Vn(t,(function(t){e.push(t)})),e},coordEach:Qn,coordReduce:function(t,e,n,r){var i=n;return Vn(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i},featureEach:$n,featureReduce:function(t,e,n){var r=n;return Yn(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},findPoint:function(t,e){if(e=e||{},!Wn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return Wn.point(l,s,e);case"MultiPoint":return i<0&&(i=l.length+i),Wn.point(l[i],s,e);case"LineString":return a<0&&(a=l.length+a),Wn.point(l[a],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),Wn.point(l[o][a],s,e);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),Wn.point(l[i][a],s,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a),Wn.point(l[i][o][a],s,e)}throw new Error("geojson is invalid")},findSegment:function(t,e){if(e=e||{},!Wn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),Wn.lineString([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),Wn.lineString([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),Wn.lineString([l[i][a],l[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a-1),Wn.lineString([l[i][o][a],l[i][o][a+1]],s,e)}throw new Error("geojson is invalid")},flattenEach:tr,flattenReduce:function(t,e,n){var r=n;return Zn(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},geomEach:er,geomReduce:function(t,e,n){var r=n;return Xn(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},lineEach:nr,lineReduce:function(t,e,n){var r=n;return Jn(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},propEach:rr,propReduce:function(t,e,n){var r=n;return Hn(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},segmentEach:ir,segmentReduce:function(t,e,n){var r=n,i=!1;return Kn(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}},"__esModule",{value:!0});function ar(t){var e=[1/0,1/0,-1/0,-1/0];return or.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}ar.default=ar;var sr=ar,lr=Object.defineProperty({default:sr},"__esModule",{value:!0}).default,ur=or.featureEach,cr=(or.coordEach,Wn.polygon,Wn.featureCollection);function hr(t){var e=Et(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:lr(t),Et.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:lr(t),e.push(t)})):ur(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:lr(t),e.push(t)})),Et.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:lr(t),Et.prototype.remove.call(this,t,e)},e.clear=function(){return Et.prototype.clear.call(this)},e.search=function(t){var e=Et.prototype.search.call(this,this.toBBox(t));return cr(e)},e.collides=function(t){return Et.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Et.prototype.all.call(this);return cr(t)},e.toJSON=function(){return Et.prototype.toJSON.call(this)},e.fromJSON=function(t){return Et.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=lr(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=lr(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var pr=hr,fr=hr;function dr(t,e){var n={},r=[];if("LineString"===t.type&&(t=o(t)),"LineString"===e.type&&(e=o(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=gr(t,e);return i&&r.push(i),f(r)}var a=pr();return a.load(qn(e)),D(qn(t),(function(t){D(a.search(t),(function(e){var i=gr(t,e);if(i){var o=Q(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),f(r)}function gr(t,e){var n=Q(t),r=Q(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],l=n[1][1],u=r[0][0],c=r[0][1],h=r[1][0],p=r[1][1],f=(p-c)*(a-i)-(h-u)*(l-o);if(0===f)return null;var d=((h-u)*(o-c)-(p-c)*(i-u))/f,g=((a-i)*(o-c)-(l-o)*(i-u))/f;return d>=0&&d<=1&&g>=0&&g<=1?s([i+d*(a-i),o+d*(l-o)]):null}function yr(t,e,n){void 0===n&&(n={});var r=s([1/0,1/0],{dist:1/0}),i=0;return B(t,(function(t){for(var o=Q(t),a=0;a<o.length-1;a++){var l=s(o[a]);l.properties.dist=ye(e,l,n);var u=s(o[a+1]);u.properties.dist=ye(e,u,n);var c=ye(l,u,n),p=Math.max(l.properties.dist,u.properties.dist),f=pn(l,u),d=cn(e,p,f+90,n),g=cn(e,p,f-90,n),y=dr(h([d.geometry.coordinates,g.geometry.coordinates]),h([l.geometry.coordinates,u.geometry.coordinates])),m=null;y.features.length>0&&((m=y.features[0]).properties.dist=ye(e,m,n),m.properties.location=i+ye(l,m,n)),l.properties.dist<r.properties.dist&&((r=l).properties.index=a,r.properties.location=i),u.properties.dist<r.properties.dist&&((r=u).properties.index=a+1,r.properties.location=i+c),m&&m.properties.dist<r.properties.dist&&((r=m).properties.index=a),i+=c}})),r}function mr(t,n,r){void 0===r&&(r={});var i=J(t),o=J(n);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,C(function(t,n,r){var i=r=void 0===r?e:Number(r),o=t[1]*Math.PI/180,a=n[1]*Math.PI/180,s=a-o,l=Math.abs(n[0]-t[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);var u=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(u)>1e-11?s/u:Math.cos(o);return Math.sqrt(s*s+c*c*l*l)*i}(i,o),"meters",r.units)}function vr(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=s(t):"Point"===t.type?t=o(t):et(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=h(e):"LineString"===e.type?e=o(e):et(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return q(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],a=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=wr([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return br(t,e,{method:r.method,units:"degrees"});var a=wr(i,i);if(a<=o)return br(t,n,{method:r.method,units:"degrees"});var s=o/a;return br(t,[e[0]+s*i[0],e[1]+s*i[1]],{method:r.method,units:"degrees"})}(i,e,o,n);a<r&&(r=a)})),C(r,"degrees",n.units)}function wr(t,e){return t[0]*e[0]+t[1]*e[1]}function br(t,e,n){return"planar"===n.method?mr(t,e,n):ye(t,e,n)}function xr(t,e,n,r,i,o,a,s){var l,u,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(s-o)*(n-t)-(a-i)*(r-e))?null!==p.x&&null!==p.y&&p:(h=(n-t)*(u=e-o)-(r-e)*(c=t-i),u=((a-i)*u-(s-o)*c)/l,c=h/l,p.x=t+u*(n-t),p.y=e+u*(r-e),u>=0&&u<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}function _r(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?f([o(t)]):f([t]):t}(t),n=fn(e),r=!1,i=0;!r&&i<e.features.length;){var a,l=e.features[i].geometry,u=!1;if("Point"===l.type)n.geometry.coordinates[0]===l.coordinates[0]&&n.geometry.coordinates[1]===l.coordinates[1]&&(r=!0);else if("MultiPoint"===l.type){var c=!1;for(a=0;!c&&a<l.coordinates.length;)n.geometry.coordinates[0]===l.coordinates[a][0]&&n.geometry.coordinates[1]===l.coordinates[a][1]&&(r=!0,c=!0),a++}else if("LineString"===l.type)for(a=0;!u&&a<l.coordinates.length-1;)Er(n.geometry.coordinates[0],n.geometry.coordinates[1],l.coordinates[a][0],l.coordinates[a][1],l.coordinates[a+1][0],l.coordinates[a+1][1])&&(u=!0,r=!0),a++;else if("MultiLineString"===l.type)for(var h=0;h<l.coordinates.length;){u=!1,a=0;for(var p=l.coordinates[h];!u&&a<p.length-1;)Er(n.geometry.coordinates[0],n.geometry.coordinates[1],p[a][0],p[a][1],p[a+1][0],p[a+1][1])&&(u=!0,r=!0),a++;h++}else"Polygon"!==l.type&&"MultiPolygon"!==l.type||fe(n,l)&&(r=!0);i++}if(r)return n;var d=f([]);for(i=0;i<e.features.length;i++)d.features=d.features.concat(gn(e.features[i]).features);return s(Un(n,d).geometry.coordinates)}function Er(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}pr.default=fr;var Sr=6378137;function Cr(t){return G(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Tr(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Tr(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Tr(t){var e=0;if(t&&t.length>0){e+=Math.abs(Ir(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Ir(t[n]))}return e}function Ir(t){var e,n,r,i,o,a,s=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(r=l-2,i=l-1,o=0):a===l-1?(r=l-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(Ar(t[o][0])-Ar(e[0]))*Math.sin(Ar(n[1]));s=s*Sr*Sr/2}return s}function Ar(t){return t*Math.PI/180}function Pr(t,e){return void 0===e&&(e={}),W(t,(function(t,n){var r=n.geometry.coordinates;return t+ye(r[0],r[1],e)}),0)}function kr(t,e,n,r){if(!A(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,s,l,u=i.length,c=0,p=0;p<i.length&&!(e>=c&&p===i.length-1);p++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(i[p]),h(o);s=pn(i[p],i[p-1])-180,l=cn(i[p],a,s,r),o.push(l.geometry.coordinates)}if(c>=n)return(a=n-c)?(s=pn(i[p],i[p-1])-180,l=cn(i[p],a,s,r),o.push(l.geometry.coordinates),h(o)):(o.push(i[p]),h(o));if(c>=e&&o.push(i[p]),p===i.length-1)return h(o);c+=ye(i[p],i[p+1],r)}if(c<e&&i.length===u)throw new Error("Start position is beyond line");var f=i[i.length-1];return h([f,f])}function Or(t,e,n){void 0===n&&(n={});for(var r=J(t),i=Q(e),o=0;o<i.length-1;o++){var a=!1;if(n.ignoreEndVertices&&(0===o&&(a="start"),o===i.length-2&&(a="end"),0===o&&o+1===i.length-1&&(a="both")),Mr(i[o],i[o+1],r,a,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Mr(t,e,n,r,i){var o=n[0],a=n[1],s=t[0],l=t[1],u=e[0],c=e[1],h=u-s,p=c-l,f=(n[0]-s)*p-(n[1]-l)*h;if(null!==i){if(Math.abs(f)>i)return!1}else if(0!==f)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(p)?h>0?s<o&&o<=u:u<=o&&o<s:p>0?l<a&&a<=c:c<=a&&a<l:"end"===r?Math.abs(h)>=Math.abs(p)?h>0?s<=o&&o<u:u<o&&o<=s:p>0?l<=a&&a<c:c<a&&a<=l:"both"===r&&(Math.abs(h)>=Math.abs(p)?h>0?s<o&&o<u:u<o&&o<s:p>0?l<a&&a<c:c<a&&a<l):Math.abs(h)>=Math.abs(p)?h>0?s<=o&&o<=u:u<=o&&o<=s:p>0?l<=a&&a<=c:c<=a&&a<=l}function Nr(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Rr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Or(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return fe(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Rr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Or(t.coordinates[r],e))return!1;n||(n=Or(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=fe(t.coordinates[1],e))){n=!1;break}r=fe(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Or(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!Lr(K(e),K(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!fe(t.coordinates[r],e))return!1;n||(n=fe(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=fe(Dr(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=K(t);if(!Lr(K(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!fe(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Lr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Rr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Dr(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Fr(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],a=t[2],l=t[3],u=e/ye([i,o],[a,o],n)*(a-i),c=e/ye([i,o],[i,l],n)*(l-o),h=a-i,p=l-o,d=Math.floor(h/u),g=(p-Math.floor(p/c)*c)/2,y=i+(h-d*u)/2;y<=a;){for(var m=o+g;m<=l;){var v=s([y,m],n.properties);n.mask?Nr(v,n.mask)&&r.push(v):r.push(v),m+=c}y+=u}return f(r)}function jr(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return M(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function zr(t){if(!t)throw new Error("geojson is required");var e=[];return B(t,(function(t){e.push(t)})),f(e)}function Gr(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Gr(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Br(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];Hr(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,a=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var a=[],s=0;s<r.length;s++)for(var l=0;l<r[s].length-1;l++)a.push(g(s,l));var u=Et();u.load(a)}for(var c=0;c<r.length;c++)for(var h=0;h<r[c].length-1;h++)if(n)u.search(g(c,h)).forEach((function(t){var e=t.ring,n=t.edge;d(c,h,e,n)}));else for(var p=0;p<r.length;p++)for(var f=0;f<r[p].length-1;f++)d(c,h,p,f);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,n,a,s){var l,u,c=r[t][n],h=r[t][n+1],p=r[a][s],f=r[a][s+1],d=function(t,e,n,r){if(Gr(t,n)||Gr(t,r)||Gr(e,n)||Gr(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],l=n[0],u=n[1],c=r[0],h=r[1],p=(i-a)*(u-h)-(o-s)*(l-c);return 0===p?null:[((i*s-o*a)*(l-c)-(i-a)*(l*h-u*c))/p,((i*s-o*a)*(u-h)-(o-s)*(l*h-u*c))/p]}(c,h,p,f);if(null!==d&&(l=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),u=f[0]!==p[0]?(d[0]-p[0])/(f[0]-p[0]):(d[1]-p[1])/(f[1]-p[1]),!(l>=1||l<=0||u>=1||u<=0))){var g=d,y=!o[g];y&&(o[g]=!0),e?i.push(e(d,t,n,c,h,l,a,s,p,f,u,y)):i.push(d)}}function g(t,e){var n,i,o,a,s=r[t][e],l=r[t][e+1];return s[0]<l[0]?(n=s[0],i=l[0]):(n=l[0],i=s[0]),s[1]<l[1]?(o=s[1],a=l[1]):(o=l[1],a=s[1]),{minX:n,minY:o,maxX:i,maxY:a,ring:t,edge:e}}}(t,(function(t,e,n,r,i,o,a,s,l,u,c,h){return[t,e,n,r,i,o,a,s,l,u,c,h]})),s=a.length;if(0==s){var l=[];for(r=0;r<e;r++)l.push(u([t.geometry.coordinates[r]],{parent:-1,winding:Vr(t.geometry.coordinates[r])}));var c=f(l);return j(),z(),c}var h=[],p=[];for(r=0;r<e;r++){h.push([]);for(var d=0;d<t.geometry.coordinates[r].length-1;d++)h[r].push([new Ur(t.geometry.coordinates[r][Yr(d+1,t.geometry.coordinates[r].length-1)],1,[r,d],[r,Yr(d+1,t.geometry.coordinates[r].length-1)],void 0)]),p.push(new qr(t.geometry.coordinates[r][d],[r,Yr(d-1,t.geometry.coordinates[r].length-1)],[r,d],void 0,void 0,!1,!0))}for(r=0;r<s;r++)h[a[r][1]][a[r][2]].push(new Ur(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&p.push(new qr(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));var g=p.length;for(r=0;r<h.length;r++)for(d=0;d<h[r].length;d++)h[r][d].sort((function(t,e){return t.param<e.param?-1:1}));var y=[];for(r=0;r<g;r++)y.push({minX:p[r].coord[0],minY:p[r].coord[1],maxX:p[r].coord[0],maxY:p[r].coord[1],index:r});var m=Et();for(m.load(y),r=0;r<h.length;r++)for(d=0;d<h[r].length;d++)for(var v=0;v<h[r][d].length;v++){b=v==h[r][d].length-1?h[r][Yr(d+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][d][v+1].coord;var w=m.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[r][d][v].nxtIsectAlongEdgeIn=w.index}for(r=0;r<h.length;r++)for(d=0;d<h[r].length;d++)for(v=0;v<h[r][d].length;v++){var b=h[r][d][v].coord,x=(w=m.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;x<o?p[x].nxtIsectAlongRingAndEdge2=h[r][d][v].nxtIsectAlongEdgeIn:Hr(p[x].ringAndEdge1,h[r][d][v].ringAndEdgeIn)?p[x].nxtIsectAlongRingAndEdge1=h[r][d][v].nxtIsectAlongEdgeIn:p[x].nxtIsectAlongRingAndEdge2=h[r][d][v].nxtIsectAlongEdgeIn}var _=[];for(r=0,d=0;d<e;d++){var E=r;for(v=0;v<t.geometry.coordinates[d].length-1;v++)p[r].coord[0]<p[E].coord[0]&&(E=r),r++;var S=p[E].nxtIsectAlongRingAndEdge2;for(v=0;v<p.length;v++)if(p[v].nxtIsectAlongRingAndEdge1==E||p[v].nxtIsectAlongRingAndEdge2==E){var C=v;break}var T=Wr([p[C].coord,p[E].coord,p[S].coord],!0)?1:-1;_.push({isect:E,parent:-1,winding:T})}for(_.sort((function(t,e){return p[t.isect].coord>p[e.isect].coord?-1:1})),l=[];_.length>0;){var I=_.pop(),A=I.isect,P=I.parent,k=I.winding,O=l.length,M=[p[A].coord],N=A;if(p[A].ringAndEdge1Walkable)var L=p[A].ringAndEdge1,R=p[A].nxtIsectAlongRingAndEdge1;else L=p[A].ringAndEdge2,R=p[A].nxtIsectAlongRingAndEdge2;for(;!Hr(p[A].coord,p[R].coord);){M.push(p[R].coord);var D=void 0;for(r=0;r<_.length;r++)if(_[r].isect==R){D=r;break}if(null!=D&&_.splice(D,1),Hr(L,p[R].ringAndEdge1)){if(L=p[R].ringAndEdge2,p[R].ringAndEdge2Walkable=!1,p[R].ringAndEdge1Walkable){var F={isect:R};Wr([p[N].coord,p[R].coord,p[p[R].nxtIsectAlongRingAndEdge2].coord],1==k)?(F.parent=P,F.winding=-k):(F.parent=O,F.winding=k),_.push(F)}N=R,R=p[R].nxtIsectAlongRingAndEdge2}else L=p[R].ringAndEdge1,p[R].ringAndEdge1Walkable=!1,p[R].ringAndEdge2Walkable&&(F={isect:R},Wr([p[N].coord,p[R].coord,p[p[R].nxtIsectAlongRingAndEdge1].coord],1==k)?(F.parent=P,F.winding=-k):(F.parent=O,F.winding=k),_.push(F)),N=R,R=p[R].nxtIsectAlongRingAndEdge1}M.push(p[R].coord),l.push(u([M],{index:O,parent:P,winding:k,netWinding:void 0}))}function j(){for(var t=[],e=0;e<c.features.length;e++)-1==c.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<c.features.length;r++)t[e]!=r&&fe(c.features[t[e]].geometry.coordinates[0][0],c.features[r],{ignoreBoundary:!0})&&Cr(c.features[r])<1/0&&(n=r);c.features[t[e]].properties.parent=n}}function z(){for(var t=0;t<c.features.length;t++)if(-1==c.features[t].properties.parent){var e=c.features[t].properties.winding;c.features[t].properties.netWinding=e,G(t,e)}}function G(t,e){for(var n=0;n<c.features.length;n++)if(c.features[n].properties.parent==t){var r=e+c.features[n].properties.winding;c.features[n].properties.netWinding=r,G(n,r)}}return c=f(l),j(),z(),c}var Ur=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},qr=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function Wr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Vr(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Wr([t[Yr(e-1,t.length-1)],t[e],t[Yr(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function Hr(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Hr(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Yr(t,e){return(t%e+e)%e}var Xr=Math.PI/180,Zr=180/Math.PI,Kr=function(t,e){this.lon=t,this.lat=e,this.x=Xr*t,this.y=Xr*e};Kr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Kr.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Kr(e,t)};var Jr=function(){this.coords=[],this.length=0};Jr.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Qr=function(t){this.properties=t||{},this.geometries=[]};Qr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Qr.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var $r=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Kr(t.x,t.y),this.end=new Kr(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function ti(t,e){var n=[],r=pr();return B(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=ni(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),D(ei(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=ei(t,e).features).forEach((function(t){t.bbox||(t.bbox=un(K(t)))})),r.load(f(n))})),f(n)}function ei(t,e){var n=[],r=Q(t)[0],i=Q(t)[t.geometry.coordinates.length-1];if(ri(r,J(e))||ri(i,J(e)))return f([t]);var o=pr(),a=qn(t);o.load(a);var s=o.search(e);if(!s.features.length)return f([t]);var l=ni(e,s),u=F(a,(function(t,r,i){var o=Q(r)[1],a=J(e);return i===l.id?(t.push(a),n.push(h(t)),ri(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return u.length>1&&n.push(h(u)),f(n)}function ni(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return D(e,(function(e){var i=yr(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function ri(t,e){return t[0]===e[0]&&t[1]===e[1]}function ii(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,a=oi(n),s=oi(r),l=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(a===s)return h(hn(t,e,i).geometry.coordinates[0],l);for(var u=a,c=a<s?s:s+360,p=u,f=[],d=0;p<c;)f.push(cn(t,e,p,i).geometry.coordinates),p=u+360*++d/o;return p>c&&f.push(cn(t,e,c,i).geometry.coordinates),h(f,l)}function oi(t){var e=t%360;return e<0&&(e+=360),e}function ai(t,e){void 0===e&&(e={});var n=rt(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return si(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=rt(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(li(t,r))})),f(i)}(n,e);default:throw new Error("invalid poly")}}function si(t,e){return void 0===e&&(e={}),li(rt(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function li(t,e){return t.length>1?d(t,e):h(t[0],e)}function ui(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,a=null===(n=e.autoComplete)||void 0===n||n,s=null===(r=e.orderCoords)||void 0===r||r;if("FeatureCollection"===(null!==(i=e.mutate)&&void 0!==i&&i||(t=xe(t)),t.type)){var l=[];return t.features.forEach((function(t){l.push(Q(ci(t,{},a,s)))})),y(l,o)}return ci(t,o,a,s)}function ci(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=rt(t),o=i.coordinates,a=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(o=hi(o)),u([o],e);case"MultiLineString":var s=[],l=0;return o.forEach((function(t){if(n&&(t=hi(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(K(h(t)));e>l?(s.unshift(t),l=e):s.push(t)}else s.push(t)})),u(s,e);default:throw new Error("geometry type "+a+" is not supported")}}function hi(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function pi(t,e){var n,r,i,o,a,s,l;for(r=1;r<=8;r*=2){for(n=[],o=!(di(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(l=!(di(s=t[a],e)&r))!==o&&n.push(fi(i,s,r,e)),l&&n.push(s),i=s,o=l;if(!(t=n).length)break}return n}function fi(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function di(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function gi(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=pi(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}$r.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=Zr*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Zr*Math.atan2(i,r),a]},$r.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,p=360-u,f=1;f<n.length;++f){var d=n[f-1][0],g=n[f][0],y=Math.abs(g-d);y>p&&(g>c&&d<h||d>c&&g<h)?s=!0:y>l&&(l=y)}var m=[];if(s&&l<u){var v=[];m.push(v);for(var w=0;w<n.length;++w){var b=parseFloat(n[w][0]);if(w>0&&Math.abs(b-n[w-1][0])>p){var x=parseFloat(n[w-1][0]),_=parseFloat(n[w-1][1]),E=parseFloat(n[w][0]),S=parseFloat(n[w][1]);if(x>-180&&x<h&&180===E&&w+1<n.length&&n[w-1][0]>-180&&n[w-1][0]<h){v.push([-180,n[w][1]]),w++,v.push([n[w][0],n[w][1]]);continue}if(x>c&&x<180&&-180===E&&w+1<n.length&&n[w-1][0]>c&&n[w-1][0]<180){v.push([180,n[w][1]]),w++,v.push([n[w][0],n[w][1]]);continue}if(x<h&&E>c){var C=x;x=E,E=C;var T=_;_=S,S=T}if(x>c&&E<h&&(E+=360),x<=180&&E>=180&&x<E){var I=(180-x)/(E-x),A=I*S+(1-I)*_;v.push([n[w-1][0]>c?180:-180,A]),(v=[]).push([n[w-1][0]>c?-180:180,A]),m.push(v)}else v=[],m.push(v);v.push([b,n[w][1]])}else v.push([n[w][0],n[w][1]])}}else{var P=[];m.push(P);for(var k=0;k<n.length;++k)P.push([n[k][0],n[k][1]])}for(var O=new Qr(this.properties),M=0;M<m.length;++M){var N=new Jr;O.geometries.push(N);for(var L=m[M],R=0;R<L.length;++R)N.move_to(L[R])}return O};var yi=jt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),mi=jt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),vi=jt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,l;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(mi(t))return!!mi(o)&&(t=e.call(t),o=e.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var u=yi(t),c=yi(o)}catch(t){return!1}if(u.length!=c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!=c[s])return!1;for(s=u.length-1;s>=0;s--)if(l=u[s],!n(t[l],o[l],a))return!1;return typeof t==typeof o}(t,o,a))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}}));function wi(t,e,n){if(void 0===n&&(n={}),!A(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=pr(),s=qn(t);return a.load(s),q(e,(function(t){var e=!1;t&&(D(a.search(t),(function(n){if(!1===e){var o=Q(t).sort(),a=Q(n).sort();vi(o,a)||(0===i?Or(o[0],n)&&Or(o[1],n):yr(n,o[0]).properties.dist<=i&&yr(n,o[1]).properties.dist<=i)?(e=!0,r=r?bi(r,t):t):(0===i?Or(a[0],t)&&Or(a[1],t):yr(t,a[0]).properties.dist<=i&&yr(t,a[1]).properties.dist<=i)&&(r=r?bi(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0))})),r&&o.push(r),f(o)}function bi(t,e){var n=Q(e),r=Q(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return vi(n[0],i)?a.unshift(n[1]):vi(n[0],o)?a.push(n[1]):vi(n[1],i)?a.unshift(n[0]):vi(n[1],o)&&a.push(n[0]),t}function xi(t){var e=t%360;return e<0&&(e+=360),e}function _i(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?Ei(J(e),J(t)):Ei(J(t),J(e)))>180?-(360-r):r}function Ei(t,e){var n=S(t[1]),r=S(e[1]),i=S(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(E(Math.atan2(i,o))+360)%360}function Si(t,n,r,i){void 0===i&&(i={});var o=n<0,a=C(Math.abs(n),i.units,"meters");o&&(a=-Math.abs(a));var l=J(t),u=function(t,n,r,i){var o=n/(i=void 0===i?e:Number(i)),a=t[0]*Math.PI/180,s=S(t[1]),l=S(r),u=o*Math.cos(l),c=s+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),p=Math.abs(h)>1e-11?u/h:Math.cos(s);return[(180*(a+o*Math.sin(l)/p)/Math.PI+540)%360-180,180*c/Math.PI]}(l,a,r);return u[0]+=u[0]-l[0]>180?-360:l[0]-u[0]>180?360:0,s(u,i.properties)}function Ci(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],l=t[a+1];a===t.length-1&&(l=t[0]),r=Ii(s,l,e),n<=0&&r>0?Ii(e,s,i)<0||(i=s):n>0&&r<=0&&(Ti(e,s,o)||(o=s)),n=r}return[i,o]}function Ti(t,e,n){return Ii(t,e,n)>0}function Ii(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Ai(t){for(var e,n,r=Q(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Pi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return z(t,(function(t){Pi(t,e)})),t;case"LineString":return ki(Q(t),e),t;case"Polygon":return Oi(Q(t),e),t;case"MultiLineString":return Q(t).forEach((function(t){ki(t,e)})),t;case"MultiPolygon":return Q(t).forEach((function(t){Oi(t,e)})),t;case"Point":case"MultiPoint":return t}}function ki(t,e){Ai(t)===e&&t.reverse()}function Oi(t,e){Ai(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Ai(t[n])===e&&t[n].reverse()}var Mi={successCallback:null,verbose:!1,polygons:!1},Ni={};function Li(t,e,n,r){r=r||{};for(var i=Object.keys(Mi),o=0;o<i.length;o++){var a=i[o],s=r[a];s=null!=s?s:Mi[a],Ni[a]=s}Ni.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var l=0;l<i;++l){var u=0,c=t[s+1][l],h=t[s+1][l+1],p=t[s][l+1],f=t[s][l];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(f))){u|=c<e?0:c>a?128:64,u|=h<e?0:h>a?32:16,u|=p<e?0:p>a?8:4;var d=+(u|=f<e?0:f>a?2:1),g=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var y=(c+h+p+f)/4;g=y>a?2:y<e?0:1,34===u?1===g?u=35:0===g&&(u=136):136===u?1===g?(u=35,g=4):0===g&&(u=34):17===u?1===g?(u=155,g=4):0===g&&(u=153):68===u?1===g?(u=103,g=4):0===g&&(u=102):153===u?1===g&&(u=155):102===u?1===g&&(u=103):152===u?g<2&&(u=156,g=1):137===u?g<2&&(u=139,g=1):98===u?g<2&&(u=99,g=1):38===u?g<2&&(u=39,g=1):18===u?g>0?(u=156,g=4):u=152:33===u?g>0?(u=139,g=4):u=137:72===u?g>0?(u=99,g=4):u=98:132===u&&(g>0?(u=39,g=4):u=38)}if(0!=u&&170!=u){var m,v,w,b,x,_,E,S;m=v=w=b=x=_=E=S=.5;var C=[];1===u?(w=1-Co(e,p,f),S=1-Co(e,c,f),C.push(wo[u])):169===u?(w=Co(a,f,p),S=Co(a,f,c),C.push(wo[u])):4===u?(_=1-Co(e,h,p),b=Co(e,f,p),C.push(mo[u])):166===u?(_=Co(a,p,h),b=1-Co(a,p,f),C.push(mo[u])):16===u?(x=Co(e,p,h),v=Co(e,c,h),C.push(yo[u])):154===u?(x=1-Co(a,h,p),v=1-Co(a,h,c),C.push(yo[u])):64===u?(E=Co(e,f,c),m=1-Co(e,h,c),C.push(xo[u])):106===u?(E=1-Co(a,c,f),m=Co(a,c,h),C.push(xo[u])):168===u?(b=Co(a,f,p),w=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),C.push(vo[u]),C.push(wo[u])):2===u?(b=1-Co(e,p,f),w=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),C.push(vo[u]),C.push(wo[u])):162===u?(x=Co(a,p,h),_=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),C.push(vo[u]),C.push(wo[u])):8===u?(x=1-Co(e,h,p),_=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),C.push(yo[u]),C.push(mo[u])):138===u?(x=1-Co(e,h,p),_=1-Co(a,h,p),m=1-Co(a,h,c),v=1-Co(e,h,c),C.push(yo[u]),C.push(mo[u])):32===u?(x=Co(a,p,h),_=Co(e,p,h),m=Co(e,c,h),v=Co(a,c,h),C.push(yo[u]),C.push(mo[u])):42===u?(S=1-Co(a,c,f),E=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h),C.push(bo[u]),C.push(xo[u])):128===u&&(S=Co(e,f,c),E=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c),C.push(bo[u]),C.push(xo[u])),5===u?(_=1-Co(e,h,p),S=1-Co(e,c,f),C.push(mo[u])):165===u?(_=Co(a,p,h),S=Co(a,f,c),C.push(mo[u])):20===u?(b=Co(e,f,p),v=Co(e,c,h),C.push(vo[u])):150===u?(b=1-Co(a,p,f),v=1-Co(a,h,c),C.push(vo[u])):80===u?(x=Co(e,p,h),E=Co(e,f,c),C.push(yo[u])):90===u?(x=1-Co(a,h,p),E=1-Co(a,c,f),C.push(yo[u])):65===u?(w=1-Co(e,p,f),m=1-Co(e,h,c),C.push(wo[u])):105===u?(w=Co(a,f,p),m=Co(a,c,h),C.push(wo[u])):160===u?(x=Co(a,p,h),_=Co(e,p,h),S=Co(e,f,c),E=Co(a,f,c),C.push(yo[u]),C.push(mo[u])):10===u?(x=1-Co(e,h,p),_=1-Co(a,h,p),S=1-Co(a,c,f),E=1-Co(e,c,f),C.push(yo[u]),C.push(mo[u])):130===u?(b=1-Co(e,p,f),w=1-Co(a,p,f),m=1-Co(a,h,c),v=1-Co(e,h,c),C.push(vo[u]),C.push(wo[u])):40===u?(b=Co(a,f,p),w=Co(e,f,p),m=Co(e,c,h),v=Co(a,c,h),C.push(vo[u]),C.push(wo[u])):101===u?(_=Co(a,p,h),m=Co(a,c,h),C.push(mo[u])):69===u?(_=1-Co(e,h,p),m=1-Co(e,h,c),C.push(mo[u])):149===u?(S=Co(a,f,c),v=1-Co(a,h,c),C.push(bo[u])):21===u?(S=1-Co(e,c,f),v=Co(e,c,h),C.push(bo[u])):86===u?(b=1-Co(a,p,f),E=1-Co(a,c,f),C.push(vo[u])):84===u?(b=Co(e,f,p),E=Co(e,f,c),C.push(vo[u])):89===u?(x=1-Co(a,h,p),w=Co(a,f,p),C.push(wo[u])):81===u?(x=Co(e,p,h),w=1-Co(e,p,f),C.push(wo[u])):96===u?(x=Co(a,p,h),_=Co(e,p,h),E=Co(e,f,c),m=Co(a,c,h),C.push(yo[u]),C.push(mo[u])):74===u?(x=1-Co(e,h,p),_=1-Co(a,h,p),E=1-Co(a,c,f),m=1-Co(e,h,c),C.push(yo[u]),C.push(mo[u])):24===u?(x=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),v=Co(e,c,h),C.push(yo[u]),C.push(wo[u])):146===u?(x=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),v=1-Co(a,h,c),C.push(yo[u]),C.push(wo[u])):6===u?(_=1-Co(e,h,p),b=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),C.push(mo[u]),C.push(vo[u])):164===u?(_=Co(a,p,h),b=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),C.push(mo[u]),C.push(vo[u])):129===u?(w=1-Co(e,p,f),S=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c),C.push(wo[u]),C.push(bo[u])):41===u?(w=Co(a,f,p),S=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h),C.push(wo[u]),C.push(bo[u])):66===u?(b=1-Co(e,p,f),w=1-Co(a,p,f),E=1-Co(a,c,f),m=1-Co(e,h,c),C.push(vo[u]),C.push(wo[u])):104===u?(b=Co(a,f,p),w=Co(e,f,p),E=Co(e,f,c),m=Co(a,c,h),C.push(wo[u]),C.push(_o[u])):144===u?(x=Co(e,p,h),S=Co(e,f,c),E=Co(a,f,c),v=1-Co(a,h,c),C.push(yo[u]),C.push(xo[u])):26===u?(x=1-Co(a,h,p),S=1-Co(a,c,f),E=1-Co(e,c,f),v=Co(e,c,h),C.push(yo[u]),C.push(xo[u])):36===u?(_=Co(a,p,h),b=Co(e,f,p),m=Co(e,c,h),v=Co(a,c,h),C.push(mo[u]),C.push(vo[u])):134===u?(_=1-Co(e,h,p),b=1-Co(a,p,f),m=1-Co(a,h,c),v=1-Co(e,h,c),C.push(mo[u]),C.push(vo[u])):9===u?(x=1-Co(e,h,p),_=1-Co(a,h,p),w=Co(a,f,p),S=1-Co(e,c,f),C.push(yo[u]),C.push(mo[u])):161===u?(x=Co(a,p,h),_=Co(e,p,h),w=1-Co(e,p,f),S=Co(a,f,c),C.push(yo[u]),C.push(mo[u])):37===u?(_=Co(a,p,h),S=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h),C.push(mo[u]),C.push(bo[u])):133===u?(_=1-Co(e,h,p),S=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c),C.push(mo[u]),C.push(bo[u])):148===u?(b=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),v=1-Co(a,h,c),C.push(vo[u]),C.push(xo[u])):22===u?(b=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),v=Co(e,c,h),C.push(vo[u]),C.push(xo[u])):82===u?(x=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),E=1-Co(a,c,f),C.push(yo[u]),C.push(wo[u])):88===u?(x=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),E=Co(e,f,c),C.push(yo[u]),C.push(wo[u])):73===u?(x=1-Co(e,h,p),_=1-Co(a,h,p),w=Co(a,f,p),m=1-Co(e,h,c),C.push(yo[u]),C.push(mo[u])):97===u?(x=Co(a,p,h),_=Co(e,p,h),w=1-Co(e,p,f),m=Co(a,c,h),C.push(yo[u]),C.push(mo[u])):145===u?(x=Co(e,p,h),w=1-Co(e,p,f),S=Co(a,f,c),v=1-Co(a,h,c),C.push(yo[u]),C.push(bo[u])):25===u?(x=1-Co(a,h,p),w=Co(a,f,p),S=1-Co(e,c,f),v=Co(e,c,h),C.push(yo[u]),C.push(bo[u])):70===u?(_=1-Co(e,h,p),b=1-Co(a,p,f),E=1-Co(a,c,f),m=1-Co(e,h,c),C.push(mo[u]),C.push(vo[u])):100===u?(_=Co(a,p,h),b=Co(e,f,p),E=Co(e,f,c),m=Co(a,c,h),C.push(mo[u]),C.push(vo[u])):34===u?(0===g?(x=1-Co(e,h,p),_=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c)):(x=Co(a,p,h),_=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h)),C.push(yo[u]),C.push(mo[u]),C.push(bo[u]),C.push(xo[u])):35===u?(4===g?(x=1-Co(e,h,p),_=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c)):(x=Co(a,p,h),_=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h)),C.push(yo[u]),C.push(mo[u]),C.push(wo[u]),C.push(xo[u])):136===u?(0===g?(x=Co(a,p,h),_=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h)):(x=1-Co(e,h,p),_=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c)),C.push(yo[u]),C.push(mo[u]),C.push(bo[u]),C.push(xo[u])):153===u?(0===g?(x=Co(e,p,h),w=1-Co(e,p,f),S=1-Co(e,c,f),v=Co(e,c,h)):(x=1-Co(a,h,p),w=Co(a,f,p),S=Co(a,f,c),v=1-Co(a,h,c)),C.push(yo[u]),C.push(wo[u])):102===u?(0===g?(_=1-Co(e,h,p),b=Co(e,f,p),E=Co(e,f,c),m=1-Co(e,h,c)):(_=Co(a,p,h),b=1-Co(a,p,f),E=1-Co(a,c,f),m=Co(a,c,h)),C.push(mo[u]),C.push(xo[u])):155===u?(4===g?(x=Co(e,p,h),w=1-Co(e,p,f),S=1-Co(e,c,f),v=Co(e,c,h)):(x=1-Co(a,h,p),w=Co(a,f,p),S=Co(a,f,c),v=1-Co(a,h,c)),C.push(yo[u]),C.push(bo[u])):103===u?(4===g?(_=1-Co(e,h,p),b=Co(e,f,p),E=Co(e,f,c),m=1-Co(e,h,c)):(_=Co(a,p,h),b=1-Co(a,p,f),E=1-Co(a,c,f),m=Co(a,c,h)),C.push(mo[u]),C.push(vo[u])):152===u?(0===g?(x=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),v=Co(e,c,h)):(x=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),v=1-Co(a,h,c)),C.push(yo[u]),C.push(vo[u]),C.push(wo[u])):156===u?(4===g?(x=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),v=Co(e,c,h)):(x=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),v=1-Co(a,h,c)),C.push(yo[u]),C.push(wo[u]),C.push(xo[u])):137===u?(0===g?(x=Co(a,p,h),_=Co(e,p,h),w=1-Co(e,p,f),S=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h)):(x=1-Co(e,h,p),_=1-Co(a,h,p),w=Co(a,f,p),S=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c)),C.push(yo[u]),C.push(mo[u]),C.push(wo[u])):139===u?(4===g?(x=Co(a,p,h),_=Co(e,p,h),w=1-Co(e,p,f),S=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h)):(x=1-Co(e,h,p),_=1-Co(a,h,p),w=Co(a,f,p),S=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c)),C.push(yo[u]),C.push(mo[u]),C.push(bo[u])):98===u?(0===g?(x=1-Co(e,h,p),_=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),E=Co(e,f,c),m=1-Co(e,h,c)):(x=Co(a,p,h),_=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),E=1-Co(a,c,f),m=Co(a,c,h)),C.push(yo[u]),C.push(mo[u]),C.push(xo[u])):99===u?(4===g?(x=1-Co(e,h,p),_=1-Co(a,h,p),b=Co(a,f,p),w=Co(e,f,p),E=Co(e,f,c),m=1-Co(e,h,c)):(x=Co(a,p,h),_=Co(e,p,h),b=1-Co(e,p,f),w=1-Co(a,p,f),E=1-Co(a,c,f),m=Co(a,c,h)),C.push(yo[u]),C.push(mo[u]),C.push(wo[u])):38===u?(0===g?(_=1-Co(e,h,p),b=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c)):(_=Co(a,p,h),b=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h)),C.push(mo[u]),C.push(bo[u]),C.push(xo[u])):39===u?(4===g?(_=1-Co(e,h,p),b=Co(e,f,p),S=Co(e,f,c),E=Co(a,f,c),m=1-Co(a,h,c),v=1-Co(e,h,c)):(_=Co(a,p,h),b=1-Co(a,p,f),S=1-Co(a,c,f),E=1-Co(e,c,f),m=Co(e,c,h),v=Co(a,c,h)),C.push(mo[u]),C.push(vo[u]),C.push(xo[u])):85===u&&(x=1,_=0,b=1,w=0,S=0,E=1,m=0,v=1),(m<0||m>1||v<0||v>1||x<0||x>1||b<0||b>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+d+" "+c+","+h+","+p+","+f+" "+g+" "+m+" "+v+" "+x+" "+_+" "+b+" "+w+" "+S+" "+E),o.cells[s][l]={cval:u,cval_real:d,flipped:g,topleft:m,topright:v,righttop:x,rightbottom:_,bottomright:b,bottomleft:w,leftbottom:S,lefttop:E,edges:C}}}}}return o}(t,e,n);return Ni.polygons?(Ni.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=So[t.cval](t);"object"==typeof o&&To(o)?"object"==typeof o[0]&&To(o[0])?"object"==typeof o[0][0]&&To(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(u)):(Ni.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=Ao(t.cells[o][a]),l=null,u=a,c=o;null!==s&&i.push([s.p[0]+u,s.p[1]+c]);do{if(null===(l=Po(t.cells[c][u],s.x,s.y,s.o)))break;if(i.push([l.p[0]+u,l.p[1]+c]),u+=l.x,s=l,(c+=l.y)<0||c>=n||u<0||u>=r||void 0===t.cells[c][u]){var h=Io(t,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach((function(t){i.push(t)})),u=h.i,c=h.j,s=h}}while(void 0!==t.cells[c][u]&&t.cells[c][u].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(u)),"function"==typeof Ni.successCallback&&Ni.successCallback(l),l}var Ri=64,Di=16,Fi=[],ji=[],zi=[],Gi=[],Bi=[],Ui=[],qi=[],Wi=[],Vi=[],Hi=[],Yi=[],Xi=[],Zi=[],Ki=[],Ji=[],Qi=[],$i=[],to=[],eo=[],no=[],ro=[],io=[],oo=[],ao=[];qi[85]=Hi[85]=-1,Wi[85]=Yi[85]=0,Vi[85]=Xi[85]=1,eo[85]=io[85]=1,no[85]=oo[85]=0,ro[85]=ao[85]=1,Fi[85]=Gi[85]=0,ji[85]=Bi[85]=-1,zi[85]=Ji[85]=0,Qi[85]=Zi[85]=0,$i[85]=Ki[85]=1,Ui[85]=to[85]=1,io[1]=io[169]=0,oo[1]=oo[169]=-1,ao[1]=ao[169]=0,Zi[1]=Zi[169]=-1,Ki[1]=Ki[169]=0,Ji[1]=Ji[169]=0,Hi[4]=Hi[166]=0,Yi[4]=Yi[166]=-1,Xi[4]=Xi[166]=1,Qi[4]=Qi[166]=1,$i[4]=$i[166]=0,to[4]=to[166]=0,qi[16]=qi[154]=0,Wi[16]=Wi[154]=1,Vi[16]=Vi[154]=1,Gi[16]=Gi[154]=1,Bi[16]=Bi[154]=0,Ui[16]=Ui[154]=1,eo[64]=eo[106]=0,no[64]=no[106]=1,ro[64]=ro[106]=0,Fi[64]=Fi[106]=-1,ji[64]=ji[106]=0,zi[64]=zi[106]=1,eo[2]=eo[168]=0,no[2]=no[168]=-1,ro[2]=ro[168]=1,io[2]=io[168]=0,oo[2]=oo[168]=-1,ao[2]=ao[168]=0,Zi[2]=Zi[168]=-1,Ki[2]=Ki[168]=0,Ji[2]=Ji[168]=0,Qi[2]=Qi[168]=-1,$i[2]=$i[168]=0,to[2]=to[168]=1,qi[8]=qi[162]=0,Wi[8]=Wi[162]=-1,Vi[8]=Vi[162]=0,Hi[8]=Hi[162]=0,Yi[8]=Yi[162]=-1,Xi[8]=Xi[162]=1,Zi[8]=Zi[162]=1,Ki[8]=Ki[162]=0,Ji[8]=Ji[162]=1,Qi[8]=Qi[162]=1,$i[8]=$i[162]=0,to[8]=to[162]=0,qi[32]=qi[138]=0,Wi[32]=Wi[138]=1,Vi[32]=Vi[138]=1,Hi[32]=Hi[138]=0,Yi[32]=Yi[138]=1,Xi[32]=Xi[138]=0,Fi[32]=Fi[138]=1,ji[32]=ji[138]=0,zi[32]=zi[138]=0,Gi[32]=Gi[138]=1,Bi[32]=Bi[138]=0,Ui[32]=Ui[138]=1,io[128]=io[42]=0,oo[128]=oo[42]=1,ao[128]=ao[42]=1,eo[128]=eo[42]=0,no[128]=no[42]=1,ro[128]=ro[42]=0,Fi[128]=Fi[42]=-1,ji[128]=ji[42]=0,zi[128]=zi[42]=1,Gi[128]=Gi[42]=-1,Bi[128]=Bi[42]=0,Ui[128]=Ui[42]=0,Hi[5]=Hi[165]=-1,Yi[5]=Yi[165]=0,Xi[5]=Xi[165]=0,io[5]=io[165]=1,oo[5]=oo[165]=0,ao[5]=ao[165]=0,Qi[20]=Qi[150]=0,$i[20]=$i[150]=1,to[20]=to[150]=1,Gi[20]=Gi[150]=0,Bi[20]=Bi[150]=-1,Ui[20]=Ui[150]=1,qi[80]=qi[90]=-1,Wi[80]=Wi[90]=0,Vi[80]=Vi[90]=1,eo[80]=eo[90]=1,no[80]=no[90]=0,ro[80]=ro[90]=1,Zi[65]=Zi[105]=0,Ki[65]=Ki[105]=1,Ji[65]=Ji[105]=0,Fi[65]=Fi[105]=0,ji[65]=ji[105]=-1,zi[65]=zi[105]=0,qi[160]=qi[10]=-1,Wi[160]=Wi[10]=0,Vi[160]=Vi[10]=1,Hi[160]=Hi[10]=-1,Yi[160]=Yi[10]=0,Xi[160]=Xi[10]=0,io[160]=io[10]=1,oo[160]=oo[10]=0,ao[160]=ao[10]=0,eo[160]=eo[10]=1,no[160]=no[10]=0,ro[160]=ro[10]=1,Qi[130]=Qi[40]=0,$i[130]=$i[40]=1,to[130]=to[40]=1,Zi[130]=Zi[40]=0,Ki[130]=Ki[40]=1,Ji[130]=Ji[40]=0,Fi[130]=Fi[40]=0,ji[130]=ji[40]=-1,zi[130]=zi[40]=0,Gi[130]=Gi[40]=0,Bi[130]=Bi[40]=-1,Ui[130]=Ui[40]=1,Hi[37]=Hi[133]=0,Yi[37]=Yi[133]=1,Xi[37]=Xi[133]=1,io[37]=io[133]=0,oo[37]=oo[133]=1,ao[37]=ao[133]=0,Fi[37]=Fi[133]=-1,ji[37]=ji[133]=0,zi[37]=zi[133]=0,Gi[37]=Gi[133]=1,Bi[37]=Bi[133]=0,Ui[37]=Ui[133]=0,Qi[148]=Qi[22]=-1,$i[148]=$i[22]=0,to[148]=to[22]=0,io[148]=io[22]=0,oo[148]=oo[22]=-1,ao[148]=ao[22]=1,eo[148]=eo[22]=0,no[148]=no[22]=1,ro[148]=ro[22]=1,Gi[148]=Gi[22]=-1,Bi[148]=Bi[22]=0,Ui[148]=Ui[22]=1,qi[82]=qi[88]=0,Wi[82]=Wi[88]=-1,Vi[82]=Vi[88]=1,Qi[82]=Qi[88]=1,$i[82]=$i[88]=0,to[82]=to[88]=1,Zi[82]=Zi[88]=-1,Ki[82]=Ki[88]=0,Ji[82]=Ji[88]=1,eo[82]=eo[88]=0,no[82]=no[88]=-1,ro[82]=ro[88]=0,qi[73]=qi[97]=0,Wi[73]=Wi[97]=1,Vi[73]=Vi[97]=0,Hi[73]=Hi[97]=0,Yi[73]=Yi[97]=-1,Xi[73]=Xi[97]=0,Zi[73]=Zi[97]=1,Ki[73]=Ki[97]=0,Ji[73]=Ji[97]=0,Fi[73]=Fi[97]=1,ji[73]=ji[97]=0,zi[73]=zi[97]=1,qi[145]=qi[25]=0,Wi[145]=Wi[25]=-1,Vi[145]=Vi[25]=0,Zi[145]=Zi[25]=1,Ki[145]=Ki[25]=0,Ji[145]=Ji[25]=1,io[145]=io[25]=0,oo[145]=oo[25]=1,ao[145]=ao[25]=1,Gi[145]=Gi[25]=-1,Bi[145]=Bi[25]=0,Ui[145]=Ui[25]=0,Hi[70]=Hi[100]=0,Yi[70]=Yi[100]=1,Xi[70]=Xi[100]=0,Qi[70]=Qi[100]=-1,$i[70]=$i[100]=0,to[70]=to[100]=1,eo[70]=eo[100]=0,no[70]=no[100]=-1,ro[70]=ro[100]=1,Fi[70]=Fi[100]=1,ji[70]=ji[100]=0,zi[70]=zi[100]=0,Hi[101]=Hi[69]=0,Yi[101]=Yi[69]=1,Xi[101]=Xi[69]=0,Fi[101]=Fi[69]=1,ji[101]=ji[69]=0,zi[101]=zi[69]=0,io[149]=io[21]=0,oo[149]=oo[21]=1,ao[149]=ao[21]=1,Gi[149]=Gi[21]=-1,Bi[149]=Bi[21]=0,Ui[149]=Ui[21]=0,Qi[86]=Qi[84]=-1,$i[86]=$i[84]=0,to[86]=to[84]=1,eo[86]=eo[84]=0,no[86]=no[84]=-1,ro[86]=ro[84]=1,qi[89]=qi[81]=0,Wi[89]=Wi[81]=-1,Vi[89]=Vi[81]=0,Zi[89]=Zi[81]=1,Ki[89]=Ki[81]=0,Ji[89]=Ji[81]=1,qi[96]=qi[74]=0,Wi[96]=Wi[74]=1,Vi[96]=Vi[74]=0,Hi[96]=Hi[74]=-1,Yi[96]=Yi[74]=0,Xi[96]=Xi[74]=1,eo[96]=eo[74]=1,no[96]=no[74]=0,ro[96]=ro[74]=0,Fi[96]=Fi[74]=1,ji[96]=ji[74]=0,zi[96]=zi[74]=1,qi[24]=qi[146]=0,Wi[24]=Wi[146]=-1,Vi[24]=Vi[146]=1,Qi[24]=Qi[146]=1,$i[24]=$i[146]=0,to[24]=to[146]=1,Zi[24]=Zi[146]=0,Ki[24]=Ki[146]=1,Ji[24]=Ji[146]=1,Gi[24]=Gi[146]=0,Bi[24]=Bi[146]=-1,Ui[24]=Ui[146]=0,Hi[6]=Hi[164]=-1,Yi[6]=Yi[164]=0,Xi[6]=Xi[164]=1,Qi[6]=Qi[164]=-1,$i[6]=$i[164]=0,to[6]=to[164]=0,io[6]=io[164]=0,oo[6]=oo[164]=-1,ao[6]=ao[164]=1,eo[6]=eo[164]=1,no[6]=no[164]=0,ro[6]=ro[164]=0,Zi[129]=Zi[41]=0,Ki[129]=Ki[41]=1,Ji[129]=Ji[41]=1,io[129]=io[41]=0,oo[129]=oo[41]=1,ao[129]=ao[41]=0,Fi[129]=Fi[41]=-1,ji[129]=ji[41]=0,zi[129]=zi[41]=0,Gi[129]=Gi[41]=0,Bi[129]=Bi[41]=-1,Ui[129]=Ui[41]=0,Qi[66]=Qi[104]=0,$i[66]=$i[104]=1,to[66]=to[104]=0,Zi[66]=Zi[104]=-1,Ki[66]=Ki[104]=0,Ji[66]=Ji[104]=1,eo[66]=eo[104]=0,no[66]=no[104]=-1,ro[66]=ro[104]=0,Fi[66]=Fi[104]=0,ji[66]=ji[104]=-1,zi[66]=zi[104]=1,qi[144]=qi[26]=-1,Wi[144]=Wi[26]=0,Vi[144]=Vi[26]=0,io[144]=io[26]=1,oo[144]=oo[26]=0,ao[144]=ao[26]=1,eo[144]=eo[26]=0,no[144]=no[26]=1,ro[144]=ro[26]=1,Gi[144]=Gi[26]=-1,Bi[144]=Bi[26]=0,Ui[144]=Ui[26]=1,Hi[36]=Hi[134]=0,Yi[36]=Yi[134]=1,Xi[36]=Xi[134]=1,Qi[36]=Qi[134]=0,$i[36]=$i[134]=1,to[36]=to[134]=0,Fi[36]=Fi[134]=0,ji[36]=ji[134]=-1,zi[36]=zi[134]=1,Gi[36]=Gi[134]=1,Bi[36]=Bi[134]=0,Ui[36]=Ui[134]=0,qi[9]=qi[161]=-1,Wi[9]=Wi[161]=0,Vi[9]=Vi[161]=0,Hi[9]=Hi[161]=0,Yi[9]=Yi[161]=-1,Xi[9]=Xi[161]=0,Zi[9]=Zi[161]=1,Ki[9]=Ki[161]=0,Ji[9]=Ji[161]=0,io[9]=io[161]=1,oo[9]=oo[161]=0,ao[9]=ao[161]=1,qi[136]=0,Wi[136]=1,Vi[136]=1,Hi[136]=0,Yi[136]=1,Xi[136]=0,Qi[136]=-1,$i[136]=0,to[136]=1,Zi[136]=-1,Ki[136]=0,Ji[136]=0,io[136]=0,oo[136]=-1,ao[136]=0,eo[136]=0,no[136]=-1,ro[136]=1,Fi[136]=1,ji[136]=0,zi[136]=0,Gi[136]=1,Bi[136]=0,Ui[136]=1,qi[34]=0,Wi[34]=-1,Vi[34]=0,Hi[34]=0,Yi[34]=-1,Xi[34]=1,Qi[34]=1,$i[34]=0,to[34]=0,Zi[34]=1,Ki[34]=0,Ji[34]=1,io[34]=0,oo[34]=1,ao[34]=1,eo[34]=0,no[34]=1,ro[34]=0,Fi[34]=-1,ji[34]=0,zi[34]=1,Gi[34]=-1,Bi[34]=0,Ui[34]=0,qi[35]=0,Wi[35]=1,Vi[35]=1,Hi[35]=0,Yi[35]=-1,Xi[35]=1,Qi[35]=1,$i[35]=0,to[35]=0,Zi[35]=-1,Ki[35]=0,Ji[35]=0,io[35]=0,oo[35]=-1,ao[35]=0,eo[35]=0,no[35]=1,ro[35]=0,Fi[35]=-1,ji[35]=0,zi[35]=1,Gi[35]=1,Bi[35]=0,Ui[35]=1,qi[153]=0,Wi[153]=1,Vi[153]=1,Zi[153]=-1,Ki[153]=0,Ji[153]=0,io[153]=0,oo[153]=-1,ao[153]=0,Gi[153]=1,Bi[153]=0,Ui[153]=1,Hi[102]=0,Yi[102]=-1,Xi[102]=1,Qi[102]=1,$i[102]=0,to[102]=0,eo[102]=0,no[102]=1,ro[102]=0,Fi[102]=-1,ji[102]=0,zi[102]=1,qi[155]=0,Wi[155]=-1,Vi[155]=0,Zi[155]=1,Ki[155]=0,Ji[155]=1,io[155]=0,oo[155]=1,ao[155]=1,Gi[155]=-1,Bi[155]=0,Ui[155]=0,Hi[103]=0,Yi[103]=1,Xi[103]=0,Qi[103]=-1,$i[103]=0,to[103]=1,eo[103]=0,no[103]=-1,ro[103]=1,Fi[103]=1,ji[103]=0,zi[103]=0,qi[152]=0,Wi[152]=1,Vi[152]=1,Qi[152]=-1,$i[152]=0,to[152]=1,Zi[152]=-1,Ki[152]=0,Ji[152]=0,io[152]=0,oo[152]=-1,ao[152]=0,eo[152]=0,no[152]=-1,ro[152]=1,Gi[152]=1,Bi[152]=0,Ui[152]=1,qi[156]=0,Wi[156]=-1,Vi[156]=1,Qi[156]=1,$i[156]=0,to[156]=1,Zi[156]=-1,Ki[156]=0,Ji[156]=0,io[156]=0,oo[156]=-1,ao[156]=0,eo[156]=0,no[156]=1,ro[156]=1,Gi[156]=-1,Bi[156]=0,Ui[156]=1,qi[137]=0,Wi[137]=1,Vi[137]=1,Hi[137]=0,Yi[137]=1,Xi[137]=0,Zi[137]=-1,Ki[137]=0,Ji[137]=0,io[137]=0,oo[137]=-1,ao[137]=0,Fi[137]=1,ji[137]=0,zi[137]=0,Gi[137]=1,Bi[137]=0,Ui[137]=1,qi[139]=0,Wi[139]=1,Vi[139]=1,Hi[139]=0,Yi[139]=-1,Xi[139]=0,Zi[139]=1,Ki[139]=0,Ji[139]=0,io[139]=0,oo[139]=1,ao[139]=0,Fi[139]=-1,ji[139]=0,zi[139]=0,Gi[139]=1,Bi[139]=0,Ui[139]=1,qi[98]=0,Wi[98]=-1,Vi[98]=0,Hi[98]=0,Yi[98]=-1,Xi[98]=1,Qi[98]=1,$i[98]=0,to[98]=0,Zi[98]=1,Ki[98]=0,Ji[98]=1,eo[98]=0,no[98]=1,ro[98]=0,Fi[98]=-1,ji[98]=0,zi[98]=1,qi[99]=0,Wi[99]=1,Vi[99]=0,Hi[99]=0,Yi[99]=-1,Xi[99]=1,Qi[99]=1,$i[99]=0,to[99]=0,Zi[99]=-1,Ki[99]=0,Ji[99]=1,eo[99]=0,no[99]=-1,ro[99]=0,Fi[99]=1,ji[99]=0,zi[99]=1,Hi[38]=0,Yi[38]=-1,Xi[38]=1,Qi[38]=1,$i[38]=0,to[38]=0,io[38]=0,oo[38]=1,ao[38]=1,eo[38]=0,no[38]=1,ro[38]=0,Fi[38]=-1,ji[38]=0,zi[38]=1,Gi[38]=-1,Bi[38]=0,Ui[38]=0,Hi[39]=0,Yi[39]=1,Xi[39]=1,Qi[39]=-1,$i[39]=0,to[39]=0,io[39]=0,oo[39]=-1,ao[39]=1,eo[39]=0,no[39]=1,ro[39]=0,Fi[39]=-1,ji[39]=0,zi[39]=1,Gi[39]=1,Bi[39]=0,Ui[39]=0;var so=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},lo=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},uo=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},co=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},ho=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},po=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},fo=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},go=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},yo=[],mo=[],vo=[],wo=[],bo=[],xo=[],_o=[],Eo=[];wo[1]=bo[1]=18,wo[169]=bo[169]=18,vo[4]=mo[4]=12,vo[166]=mo[166]=12,yo[16]=Eo[16]=4,yo[154]=Eo[154]=4,xo[64]=_o[64]=22,xo[106]=_o[106]=22,vo[2]=xo[2]=17,wo[2]=bo[2]=18,vo[168]=xo[168]=17,wo[168]=bo[168]=18,yo[8]=wo[8]=9,mo[8]=vo[8]=12,yo[162]=wo[162]=9,mo[162]=vo[162]=12,yo[32]=Eo[32]=4,mo[32]=_o[32]=1,yo[138]=Eo[138]=4,mo[138]=_o[138]=1,bo[128]=Eo[128]=21,xo[128]=_o[128]=22,bo[42]=Eo[42]=21,xo[42]=_o[42]=22,mo[5]=bo[5]=14,mo[165]=bo[165]=14,vo[20]=Eo[20]=6,vo[150]=Eo[150]=6,yo[80]=xo[80]=11,yo[90]=xo[90]=11,wo[65]=_o[65]=3,wo[105]=_o[105]=3,yo[160]=xo[160]=11,mo[160]=bo[160]=14,yo[10]=xo[10]=11,mo[10]=bo[10]=14,vo[130]=Eo[130]=6,wo[130]=_o[130]=3,vo[40]=Eo[40]=6,wo[40]=_o[40]=3,mo[101]=_o[101]=1,mo[69]=_o[69]=1,bo[149]=Eo[149]=21,bo[21]=Eo[21]=21,vo[86]=xo[86]=17,vo[84]=xo[84]=17,yo[89]=wo[89]=9,yo[81]=wo[81]=9,yo[96]=_o[96]=0,mo[96]=xo[96]=15,yo[74]=_o[74]=0,mo[74]=xo[74]=15,yo[24]=vo[24]=8,wo[24]=Eo[24]=7,yo[146]=vo[146]=8,wo[146]=Eo[146]=7,mo[6]=xo[6]=15,vo[6]=bo[6]=16,mo[164]=xo[164]=15,vo[164]=bo[164]=16,wo[129]=Eo[129]=7,bo[129]=_o[129]=20,wo[41]=Eo[41]=7,bo[41]=_o[41]=20,vo[66]=_o[66]=2,wo[66]=xo[66]=19,vo[104]=_o[104]=2,wo[104]=xo[104]=19,yo[144]=bo[144]=10,xo[144]=Eo[144]=23,yo[26]=bo[26]=10,xo[26]=Eo[26]=23,mo[36]=Eo[36]=5,vo[36]=_o[36]=2,mo[134]=Eo[134]=5,vo[134]=_o[134]=2,yo[9]=bo[9]=10,mo[9]=wo[9]=13,yo[161]=bo[161]=10,mo[161]=wo[161]=13,mo[37]=Eo[37]=5,bo[37]=_o[37]=20,mo[133]=Eo[133]=5,bo[133]=_o[133]=20,vo[148]=bo[148]=16,xo[148]=Eo[148]=23,vo[22]=bo[22]=16,xo[22]=Eo[22]=23,yo[82]=vo[82]=8,wo[82]=xo[82]=19,yo[88]=vo[88]=8,wo[88]=xo[88]=19,yo[73]=_o[73]=0,mo[73]=wo[73]=13,yo[97]=_o[97]=0,mo[97]=wo[97]=13,yo[145]=wo[145]=9,bo[145]=Eo[145]=21,yo[25]=wo[25]=9,bo[25]=Eo[25]=21,mo[70]=_o[70]=1,vo[70]=xo[70]=17,mo[100]=_o[100]=1,vo[100]=xo[100]=17,yo[34]=wo[34]=9,mo[34]=vo[34]=12,bo[34]=Eo[34]=21,xo[34]=_o[34]=22,yo[136]=Eo[136]=4,mo[136]=_o[136]=1,vo[136]=xo[136]=17,wo[136]=bo[136]=18,yo[35]=Eo[35]=4,mo[35]=vo[35]=12,wo[35]=bo[35]=18,xo[35]=_o[35]=22,yo[153]=Eo[153]=4,wo[153]=bo[153]=18,mo[102]=vo[102]=12,xo[102]=_o[102]=22,yo[155]=wo[155]=9,bo[155]=Eo[155]=23,mo[103]=_o[103]=1,vo[103]=xo[103]=17,yo[152]=Eo[152]=4,vo[152]=xo[152]=17,wo[152]=bo[152]=18,yo[156]=vo[156]=8,wo[156]=bo[156]=18,xo[156]=Eo[156]=23,yo[137]=Eo[137]=4,mo[137]=_o[137]=1,wo[137]=bo[137]=18,yo[139]=Eo[139]=4,mo[139]=wo[139]=13,bo[139]=_o[139]=20,yo[98]=wo[98]=9,mo[98]=vo[98]=12,xo[98]=_o[98]=22,yo[99]=_o[99]=0,mo[99]=vo[99]=12,wo[99]=xo[99]=19,mo[38]=vo[38]=12,bo[38]=Eo[38]=21,xo[38]=_o[38]=22,mo[39]=Eo[39]=5,vo[39]=bo[39]=16,xo[39]=_o[39]=22;var So=[];function Co(t,e,n){return(t-e)/(n-e)}function To(t){return t.constructor.toString().indexOf("Array")>-1}function Io(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,l=e+r,u=n+i,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(u-=i,l-=r,s=(a=t.cells[u][l]).cval_real,-1===i)if(0===o)if(1&s)c.push([l,u]),r=-1,i=0,o=0;else{if(!(4&s)){c.push([l+a.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l+1,u]),r=1,i=0,o=0}else{if(!(1&s)){if(4&s){c.push([l+a.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l+a.bottomleft,u]),r=0,i=1,o=0,h=!0;break}c.push([l,u]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&Di)){if(s&Ri){c.push([l+a.topleft,u+1]),r=0,i=-1,o=0,h=!0;break}c.push([l+a.topright,u+1]),r=0,i=-1,o=1,h=!0;break}c.push([l+1,u+1]),r=1,i=0,o=1}else c.push([l+1,u+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&Ri)){if(1&s){c.push([l,u+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([l,u+a.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([l,u+1]),r=0,i=1,o=0}else{if(!(s&Ri)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&s)){c.push([l+1,u+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}else{if(!(4&s)){if(s&Di){c.push([l+1,u+a.righttop]),r=-1,i=0,o=1;break}c.push([l+1,u+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}}else if(s=(a=t.cells[u][l]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])r=0,i=-1,o=1;else{if(!(1&s)){c.push([l+a.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l,u])}else{if(!(s&Ri)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])r=0,i=1,o=0;else{if(!(s&Di)){c.push([l+a.topleft,u+1]),r=0,i=-1,o=0,h=!0;break}c.push([l+1,u+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])r=1,i=0,o=1;else{if(!(4&s)){c.push([l+1,u+a.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])r=-1,i=0,o=0;else{if(!(s&Ri)){c.push([l,u+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([l,u+1]),r=0,i=1,o=0}}if(u+=i,(l+=r)===e&&u===n)break}return{path:c,i:l,j:u,x:r,y:i,o}}function Ao(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Di?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Di?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Ri?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Ri?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Ri?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Ri?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Ri?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Di?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Ri?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Di?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Po(t,e,n,r){var i,o,a,s,l,u=t.cval;switch(e){case-1:0===r?(i=mo[u],a=Hi[u],s=Yi[u],l=Xi[u]):(i=yo[u],a=qi[u],s=Wi[u],l=Vi[u]);break;case 1:0===r?(i=bo[u],a=io[u],s=oo[u],l=ao[u]):(i=xo[u],a=eo[u],s=no[u],l=ro[u]);break;default:switch(n){case-1:0===r?(i=_o[u],a=Fi[u],s=ji[u],l=zi[u]):(i=Eo[u],a=Gi[u],s=Bi[u],l=Ui[u]);break;case 1:0===r?(i=wo[u],a=Zi[u],s=Ki[u],l=Ji[u]):(i=vo[u],a=Qi[u],s=$i[u],l=to[u])}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,i){case 0:u&Di?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&u?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&u?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&u?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:u&Di?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&u?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&u?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&u?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&u?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&u?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&u?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:u&Ri?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&u?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&u?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&u?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:u&Ri?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&u?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:u&Ri?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&u?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:u&Ri?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:u&Ri?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:u&Di?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:u&Ri?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:u&Di?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+l)),{p:[e,n],x:a,y:s,o:l}}function ko(t){var e=[],n=[];t.forEach((function(t){var r=Cr(u([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function Oo(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!No(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=u([e[r].lrCoordinates]),a=r+1;a<e.length;a++)e[a].grouped||Mo(u([e[a].lrCoordinates]),o)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0);n.push(i)}return n}function Mo(t,e){for(var n=gn(t),r=0;r<n.features.length;r++)if(!fe(n.features[r],e))return!1;return!0}function No(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Lo(t,e,n){if(!A(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=dn(t)),!1!==i&&void 0!==i||(t=xe(t)),M(t,(function(t){var n=_i(r,t)+e,i=mr(r,t),o=Q(Si(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function Ro(t,e,n){if(!A(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=xe(t)),"FeatureCollection"!==t.type||o?Do(t,e,r):(D(t,(function(n,i){t.features[i]=Do(n,e,r)})),t)}function Do(t,e,n){var r="Point"===it(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return J(e);var n=t.bbox?t.bbox:K(t),r=n[0],i=n[1],o=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return s([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return s([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return s([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return s([o,a]);case"center":return fn(t);case void 0:case null:case"centroid":return dn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||M(t,(function(t){var r=mr(n,t),i=_i(n,t),o=Q(Si(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function Fo(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function jo(t,e){return t[0]*e[1]-e[0]*t[1]}function zo(t,e,n){var r=[],i=x(e,n),o=Q(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(u=t,c=o[e+1],h=i,p=Math.sqrt((u[0]-c[0])*(u[0]-c[0])+(u[1]-c[1])*(u[1]-c[1])),f=u[0]+h*(c[1]-u[1])/p,d=c[0]+h*(c[1]-u[1])/p,[[f,u[1]+h*(u[0]-c[0])/p],[d,c[1]+h*(u[0]-c[0])/p]]);if(r.push(n),e>0){var s=r[e-1],l=function(t,e){return!function(t,e){return 0===jo(Fo(t),Fo(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=Fo(t),a=e[0],s=Fo(e),l=jo(o,s);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(jo((r=i,[(n=a)[0]-r[0],n[1]-r[1]]),s)/l,o))}(t,e)}(n,s);!1!==l&&(s[1]=l,n[0]=l),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}var u,c,h,p,f,d})),h(a,t.properties)}function Go(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function Bo(t,e){return e.geometry.coordinates[0].every((function(e){return fe(s(e),t)}))}So[1]=So[169]=so,So[4]=So[166]=lo,So[16]=So[154]=uo,So[64]=So[106]=co,So[168]=So[2]=ho,So[162]=So[8]=po,So[138]=So[32]=fo,So[42]=So[128]=go,So[5]=So[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},So[20]=So[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},So[80]=So[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},So[65]=So[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},So[160]=So[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},So[130]=So[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},So[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},So[101]=So[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},So[149]=So[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},So[86]=So[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},So[89]=So[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},So[96]=So[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},So[24]=So[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},So[6]=So[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},So[129]=So[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},So[66]=So[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[144]=So[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},So[36]=So[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},So[9]=So[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},So[37]=So[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},So[148]=So[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},So[82]=So[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},So[73]=So[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},So[145]=So[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},So[70]=So[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[34]=function(t){return[go(t),po(t)]},So[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},So[136]=function(t){return[fo(t),ho(t)]},So[153]=function(t){return[uo(t),so(t)]},So[102]=function(t){return[lo(t),co(t)]},So[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},So[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[152]=function(t){return[uo(t),ho(t)]},So[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},So[137]=function(t){return[fo(t),so(t)]},So[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},So[98]=function(t){return[po(t),co(t)]},So[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[38]=function(t){return[lo(t),go(t)]},So[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Uo=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=Go(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),qo=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return h([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Go(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),Wo=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=Go(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return g(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=u([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ln(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,a,l,u,c,h,p=e.getEnvelope();if(r&&(n=r.getEnvelope()),a=i,l=(o=p).geometry.coordinates[0].map((function(t){return t[0]})),u=o.geometry.coordinates[0].map((function(t){return t[1]})),c=a.geometry.coordinates[0].map((function(t){return t[0]})),h=a.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.max.apply(null,u)!==Math.max.apply(null,h)||Math.min.apply(null,l)!==Math.min.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,h))&&Bo(p,i)){for(var f=t.map((function(t){return t.from.coordinates})),d=void 0,g=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(d=t)},y=0,m=f;y<m.length;y++)g(m[y]);d&&e.inside(s(d))&&(r&&!Bo(n,p)||(r=e))}})),r},t.prototype.inside=function(t){return fe(t,this.toPolygon())},t}(),Vo=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return B(e,(function(t){et(t,"LineString","Graph::fromGeoJson"),N(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=Uo.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Uo(t)),n},t.prototype.addEdge=function(t,e){var n=new qo(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Wo;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function Ho(t,e){var n=!0;return B(t,(function(t){B(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!Yo(e,t);case"Polygon":return!fe(t,e)}break;case"LineString":switch(e.type){case"Point":return!Yo(t,e);case"LineString":return!function(t,e){return dr(t,e).features.length>0}(t,e);case"Polygon":return!Xo(e,t)}break;case"Polygon":switch(e.type){case"Point":return!fe(e,t);case"LineString":return!Xo(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(fe(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(fe(o[i],t))return!0;return dr(ai(t),ai(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function Yo(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(Zo(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Xo(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(fe(r[n],t))return!0;return dr(e,ai(t)).features.length>0}function Zo(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return 0==r*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function Ko(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Jo(t,e){return t[0]===e[0]&&t[1]===e[1]}function Qo(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function $o(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),na(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function ta(t,e){return dr(t,si(e)).features.length>0}function ea(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)fe(s(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function na(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var ra=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:aa};function ia(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function oa(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function aa(t,e){return vi(t,e,{strict:!0})}ra.prototype.compare=function(t,e){if(t.type!==e.type||!oa(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=ia(t),i=ia(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},ra.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},ra.prototype.compareLine=function(t,e,n,r){if(!oa(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},ra.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},ra.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},ra.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},ra.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},ra.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},ra.prototype.removePseudo=function(t){return t};var sa=ra;function la(t,e){var n=!1;return B(t,(function(t){B(e,(function(e){if(!0===n)return!0;n=!Ho(t.geometry,e.geometry)}))})),n}var ua=jt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),ca=jt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(s>0){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),ha=jt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),pa=jt((function(t){if(t.exports)var e=ha;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new e(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(s,l))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),fa=jt((function(t){t.exports&&(t.exports={DBSCAN:ua,KMEANS:ca,OPTICS:pa,PriorityQueue:ha})})),da=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},ga=da,ya=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},ma=da;function va(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var wa=function(t,e,n,r){var i=[],o=[],a=[],s=[],l=!1,u=r||1e4,c=t.length,h=t[0].length,p=h>0,f=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?ga:ya,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],l=r.length,u=0,c=[],h=0;h<i;h++){for(var p=1/0,f=0;f<l;f++){var d=n(t[h],r[f]);d<=p&&(p=d)}s[h]=p}for(var g=0;g<i;g++)u+=s[g];for(var y=0;y<i;y++)c[y]={i:y,v:t[y],pr:s[y]/u,cs:0};c.sort((function(t,e){return t.pr-e.pr})),c[0].cs=c[0].pr;for(var m=1;m<i;m++)c[m].cs=c[m-1].cs+c[m].pr;for(var v=Math.random(),w=0;w<i-1&&c[w++].cs<v;);r.push(c[w-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,i.push(t[g]))}do{va(e,0,f);for(var y=0;y<c;y++){for(var m=1/0,v=0,w=0;w<e;w++)(s=p?ma(t[y],i[w]):Math.abs(t[y]-i[w]))<=m&&(m=s,v=w);a[y]=v,f[v]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=p?va(h,0,b[x]):0,o[x]=i[x];if(p){for(var _=0;_<e;_++)i[_]=[];for(var E=0;E<c;E++)for(var S=b[a[E]],C=t[E],T=0;T<h;T++)S[T]+=C[T];l=!0;for(var I=0;I<e;I++){for(var A=i[I],P=b[I],k=o[I],O=f[I],M=0;M<h;M++)A[M]=P[M]/O||0;if(l)for(var N=0;N<h;N++)if(k[N]!=A[N]){l=!1;break}}}else{for(var L=0;L<c;L++)b[a[L]]+=t[L];for(var R=0;R<e;R++)i[R]=b[R]/f[R]||0;l=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){l=!1;break}}l=l||--u<=0}while(!l);return{it:1e4-u,k:e,idxs:a,centroids:i}};function ba(t,e){return _(_i(t[0],t[1]))===_(_i(e[0],e[1]))}function xa(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function _a(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Ea={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Ea.heuristics.manhattan,o=r.closest||!1,a=new Ta((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return _a(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var p=u[c];if(!p.closed&&!p.isWall()){var f=l.g+p.getCost(l),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<s.h||p.h===s.h&&p.g<s.g)&&(s=p),d?a.rescoreElement(p):a.push(p))}}}return o?_a(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Sa(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Ca(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Ca(t,e,n){this.x=t,this.y=e,this.weight=n}function Ta(t){this.content=[],this.scoreFunction=t}function Ia(t,e){for(var n=0;n<e.features.length;n++)if(fe(t,e.features[n]))return!0;return!1}function Aa(t){return function(){return t}}function Pa(t){return t[0]}function ka(t){return t[1]}function Oa(){this._=null}function Ma(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Na(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function La(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ra(t){for(;t.L;)t=t.L;return t}function Da(t,e,n,r){var i=[null,null],o=as.push(i)-1;return i.left=t,i.right=e,n&&ja(i,t,e,n),r&&ja(i,e,t,r),is[t.index].halfedges.push(o),is[e.index].halfedges.push(o),i}function Fa(t,e,n){var r=[e,n];return r.left=t,r}function ja(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function za(t,e,n,r,i){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,p=s[0]-l,f=s[1]-u;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*p,u+c*f]),h<1&&(t[1]=[l+h*p,u+h*f]),!0)}}}}}function Ga(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],p=u[1],f=c[0],d=c[1],g=(h+f)/2,y=(p+d)/2;if(d===p){if(g<e||g>=r)return;if(h>f){if(l){if(l[1]>=i)return}else l=[g,n];o=[g,i]}else{if(l){if(l[1]<n)return}else l=[g,i];o=[g,n]}}else if(s=y-(a=(h-f)/(d-p))*g,a<-1||a>1)if(h>f){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(p<d){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function Ba(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ua(t,e){return e[+(e.left!==t.site)]}function qa(t,e){return e[+(e.left===t.site)]}Sa.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Ea.cleanNode(this.nodes[t])},Sa.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Ea.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Sa.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Sa.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Sa.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Ca.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ca.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ca.prototype.isWall=function(){return 0===this.weight},Ta.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}},Oa.prototype={constructor:Oa,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ra(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Na(this,n),n=(t=n).U),n.C=!1,r.C=!0,La(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(La(this,n),n=(t=n).U),n.C=!1,r.C=!0,Na(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Ra(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Na(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,La(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Na(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,La(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Na(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,La(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Wa,Va=[];function Ha(){Ma(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ya(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,h=o[1]-s,p=2*(l*h-u*c);if(!(p>=-ls)){var f=l*l+u*u,d=c*c+h*h,g=(h*f-u*d)/p,y=(l*d-c*f)/p,m=Va.pop()||new Ha;m.arc=t,m.site=i,m.x=g+a,m.y=(m.cy=y+s)+Math.sqrt(g*g+y*y),t.circle=m;for(var v=null,w=os._;w;)if(m.y<w.y||m.y===w.y&&m.x<=w.x){if(!w.L){v=w.P;break}w=w.L}else{if(!w.R){v=w;break}w=w.R}os.insert(v,m),v||(Wa=m)}}}}function Xa(t){var e=t.circle;e&&(e.P||(Wa=e.N),os.remove(e),Va.push(e),Ma(e),t.circle=null)}var Za=[];function Ka(){Ma(this),this.edge=this.site=this.circle=null}function Ja(t){var e=Za.pop()||new Ka;return e.site=t,e}function Qa(t){Xa(t),rs.remove(t),Za.push(t),Ma(t)}function $a(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Qa(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<ss&&Math.abs(r-l.circle.cy)<ss;)o=l.P,s.unshift(l),Qa(l),l=o;s.unshift(l),Xa(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<ss&&Math.abs(r-u.circle.cy)<ss;)a=u.N,s.push(u),Qa(u),u=a;s.push(u),Xa(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],ja(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=Da(l.site,u.site,null,i),Ya(l),Ya(u)}function ts(t){for(var e,n,r,i,o=t[0],a=t[1],s=rs._;s;)if((r=es(s,a)-o)>ss)s=s.L;else{if(!((i=o-ns(s,a))>ss)){r>-ss?(e=s.P,n=s):i>-ss?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){is[t.index]={site:t,halfedges:[]}}(t);var l=Ja(t);if(rs.insert(e,l),e||n){if(e===n)return Xa(e),n=Ja(e.site),rs.insert(l,n),l.edge=n.edge=Da(e.site,l.site),Ya(e),void Ya(n);if(n){Xa(e),Xa(n);var u=e.site,c=u[0],h=u[1],p=t[0]-c,f=t[1]-h,d=n.site,g=d[0]-c,y=d[1]-h,m=2*(p*y-f*g),v=p*p+f*f,w=g*g+y*y,b=[(y*v-f*w)/m+c,(p*w-g*v)/m+h];ja(n.edge,u,d,b),l.edge=Da(u,t,null,b),n.edge=Da(t,d,null,b),Ya(e),Ya(n)}else l.edge=Da(e.site,l.site)}}function es(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,p=c/u;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function ns(t,e){var n=t.N;if(n)return es(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var rs,is,os,as,ss=1e-6,ls=1e-12;function us(t,e){return e[1]-t[1]||e[0]-t[0]}function cs(t,e){var n,r,i,o=t.sort(us).pop();for(as=[],is=new Array(t.length),rs=new Oa,os=new Oa;;)if(i=Wa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(ts(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;$a(i.arc)}if(function(){for(var t,e,n,r,i=0,o=is.length;i<o;++i)if((t=is[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Ba(t,as[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=as.length;o--;)Ga(i=as[o],t,e,n,r)&&za(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>ss||Math.abs(i[0][1]-i[1][1])>ss)||delete as[o]}(a,s,l,u),function(t,e,n,r){var i,o,a,s,l,u,c,h,p,f,d,g,y=is.length,m=!0;for(i=0;i<y;++i)if(o=is[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)as[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)d=(f=qa(o,as[l[s]]))[0],g=f[1],h=(c=Ua(o,as[l[++s%u]]))[0],p=c[1],(Math.abs(d-h)>ss||Math.abs(g-p)>ss)&&(l.splice(s,0,as.push(Fa(a,f,Math.abs(d-t)<ss&&r-g>ss?[t,Math.abs(h-t)<ss?p:r]:Math.abs(g-r)<ss&&n-d>ss?[Math.abs(p-r)<ss?h:n,r]:Math.abs(d-n)<ss&&g-e>ss?[n,Math.abs(h-n)<ss?p:e]:Math.abs(g-e)<ss&&d-t>ss?[Math.abs(p-e)<ss?h:t,e]:null))-1),++u);u&&(m=!1)}if(m){var v,w,b,x=1/0;for(i=0,m=null;i<y;++i)(o=is[i])&&(b=(v=(a=o.site)[0]-t)*v+(w=a[1]-e)*w)<x&&(x=b,m=o);if(m){var _=[t,e],E=[t,r],S=[n,r],C=[n,e];m.halfedges.push(as.push(Fa(a=m.site,_,E))-1,as.push(Fa(a,E,S))-1,as.push(Fa(a,S,C))-1,as.push(Fa(a,C,_))-1)}}for(i=0;i<y;++i)(o=is[i])&&(o.halfedges.length||delete is[i])}(a,s,l,u)}this.edges=as,this.cells=is,rs=os=as=is=null}function hs(t){return(t=t.slice()).push(t[0]),u([t])}function ps(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",a=r.angle||0,s=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!A(r))throw new Error("options must be an object");if(!I(i))throw new Error("steps must be a number");if(!I(a))throw new Error("angle must be a number");var c=J(t);if("degrees"===o)var h=S(a);else e=Si(t,e,90,{units:o}),n=Si(t,n,0,{units:o}),e=J(e)[0]-c[0],n=J(n)[1]-c[1];for(var p=[],f=0;f<i;f+=1){var d=-360*f/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(fs(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(fs(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===o){var m=g*Math.cos(h)+y*Math.sin(h),v=y*Math.cos(h)-g*Math.sin(h);g=m,y=v}p.push([g+c[0],y+c[1]])}return p.push(p[0]),"degrees"===o?u([p],l):Lo(u([p],l),a,{pivot:s})}function fs(t){var e=t*Math.PI/180;return Math.tan(e)}function ds(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return z(t,(function(t,o,a){var s=e.weight?null==a?void 0:a[e.weight]:void 0;if(!I(s=null==s?1:s))throw new Error("weight value must be a number for feature index "+o);(s=Number(s))>0&&M(t,(function(t){n+=t[0]*s,r+=t[1]*s,i+=s}))})),s([n/i,r/i],e.properties,e)}function gs(t,e,n,r,i){var o=r.tolerance||.001,a=0,l=0,u=0,c=0;if(D(n,(function(e){var n,r=null===(n=e.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!I(i=Number(i)))throw new Error("weight value must be a number");if(i>0){c+=1;var o=i*ye(e,t);0===o&&(o=1);var s=i/o;a+=e.geometry.coordinates[0]*s,l+=e.geometry.coordinates[1]*s,u+=s}})),c<1)throw new Error("no features to measure");var h=a/u,p=l/u;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(p-e[1])<o?s([h,p],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([h,p]),gs([h,p],t,n,r,i-1))}function ys(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ms(t,e){var n=0,r=0;M(t,(function(i,o,a,s,l){l>n&&(n=l,r=o,e.push([]));var u=o-r,c=t.coordinates[l][u+1],h=i[0],p=i[1],f=c[0],d=c[1];e[l].push([.75*h+.25*f,.75*p+.25*d]),e[l].push([.25*h+.75*f,.25*p+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function vs(t,e){var n=0,r=0,i=0;M(t,(function(o,a,s,l,u){l>i&&(i=l,r=a,e.push([[]])),u>n&&(n=u,r=a,e[l].push([]));var c=a-r,h=t.coordinates[l][u][c+1],p=o[0],f=o[1],d=h[0],g=h[1];e[l][u].push([.75*p+.25*d,.75*f+.25*g]),e[l][u].push([.25*p+.75*d,.25*f+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function ws(t,e,n){void 0===n&&(n=2);var r=J(t),i=J(e),o=r[0]-i[0],a=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(a):Math.pow(Math.pow(o,n)+Math.pow(a,n),1/n)}function bs(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,a=e.standardization||!1,s=[];D(t,(function(t){s.push(dn(t))}));for(var l=[],u=0;u<s.length;u++)l[u]=[];for(u=0;u<s.length;u++)for(var c=u;c<s.length;c++){u===c&&(l[u][c]=0);var h=ws(s[u],s[c],r);l[u][c]=h,l[c][u]=h}for(u=0;u<s.length;u++)for(c=0;c<s.length;c++)0!==(h=l[u][c])&&(l[u][c]=i?h<=n?1:0:h<=n?Math.pow(h,o):0);if(a)for(u=0;u<s.length;u++){var p=l[u].reduce((function(t,e){return t+e}),0);for(c=0;c<s.length;c++)l[u][c]=l[u][c]/p}return l}function xs(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function _s(t,e){return void 0===e&&(e={}),Ss(t,"mercator",e)}function Es(t,e){return void 0===e&&(e={}),Ss(t,"wgs84",e)}function Ss(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&I(t[0])?t="mercator"===e?Cs(t):Ts(t):(!0!==r&&(t=xe(t)),M(t,(function(t){var n="mercator"===e?Cs(t):Ts(t);t[0]=n[0],t[1]=n[1]}))),t}function Cs(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Ts(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}cs.prototype={constructor:cs,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Ua(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,l,u,c=n.site,h=-1,p=e[i[o-1]],f=p.left===c?p.right:p.left;++h<o;)a=f,f=(p=e[i[h]]).left===c?p.right:p.left,a&&f&&r<a.index&&r<f.index&&(l=a,u=f,((s=c)[0]-u[0])*(l[1]-s[1])-(s[0]-l[0])*(u[1]-s[1])<0)&&t.push([c.data,a.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};var Is=Object.freeze({__proto__:null,toMercator:_s,toWgs84:Es});function As(t){return Array.isArray(t)?Ns(t):t&&t.bbox?Ns(t.bbox):[360*Ms(),180*Ms()]}function Ps(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(s(As(e.bbox)));return f(n)}function ks(t,e){void 0===e&&(e={}),null==t&&(t=1),I(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),I(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),i[i.length-1]=i[0],i=i.map((r=As(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(u([i]))},i=0;i<t;i++)r();return f(n)}function Os(t,e){if(void 0===e&&(e={}),!A(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!I(r)||void 0===r||r<2)&&(r=10),I(i)&&void 0!==i||(i=1e-4),I(o)&&void 0!==o||(o=Math.PI/8);for(var a=[],s=0;s<t;s++){for(var l=[As(n)],u=0;u<r-1;u++){var c=(0===u?2*Math.random()*Math.PI:Math.tan((l[u][1]-l[u-1][1])/(l[u][0]-l[u-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*i;l.push([l[u][0]+p*Math.cos(c),l[u][1]+p*Math.sin(c)])}a.push(h(l))}return f(a)}function Ms(){return Math.random()-.5}function Ns(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var Ls=Object.freeze({__proto__:null,randomPosition:As,randomPoint:Ps,randomPolygon:ks,randomLineString:Os});function Rs(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return D(t,(function(t){zs(t.properties,e)&&n.push(t)})),f(n)}function Ds(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=js(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],l=[],u=0;u<s.length;u++)l.push(t.features[s[u]]);n(f(l),a,o)}}function Fs(t,e,n,r){var i=r;return Ds(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function js(t,e){var n={};return D(t,(function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}})),n}function zs(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!zs(t,e[r]))return!1;return!0}return Gs(t,e)}function Gs(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Bs(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var Us=Object.freeze({__proto__:null,getCluster:Rs,clusterEach:Ds,clusterReduce:Fs,createBins:js,applyFilter:zs,propertiesContainsFilter:Gs,filterProperties:Bs}),qs=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function Ws(t,e){return t>e?1:t<e?-1:0}function Vs(t,e,n){for(var r=new qs(null,null),i=r,o=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}o.left=e,o=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(s=e.right,e.right=s.left,s.left=e,null===(e=s).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function Hs(t,e,n,r){var i=new qs(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=Vs(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function Ys(t,e,n){var r=null,i=null;if(e){var o=n((e=Vs(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function Xs(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&Xs(t.left,o,!1,r,i),t.right&&Xs(t.right,o,!0,r,i)}}var Zs=function(){function t(t){void 0===t&&(t=Ws),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=Hs(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new qs(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=Vs(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=Vs(t,e,n)).key)?(null===e.left?r=e.right:(r=Vs(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Vs(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=Vs(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new qs(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&Qs(t,e,0,r-1,i),null===this._root)this._root=Ks(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new qs(null,null),i=r,o=t,a=e;null!==o&&null!==a;)n(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return null!==o?i.next=o:null!==a&&(i.next=a),r.next}(this.toList(),function(t,e){for(var n=new qs(null,null),r=n,i=0;i<t.length;i++)r=r.next=new qs(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=Js({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return Xs(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=Ys(t,this._root,r),o=i.left,a=i.right;r(t,e)<0?a=Hs(e,n,a,r):o=Hs(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=Vs(t.key,e,n)).left=t),e)}(o,a,r)},t.prototype.split=function(t){return Ys(t,this._root,this._comparator)},t}();function Ks(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),a=t[o],s=e[o],l=new qs(a,s);return l.left=Ks(t,e,n,o),l.right=Ks(t,e,o+1,r),l}return null}function Js(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=Js(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=Js(t,i+1,n),a}return null}function Qs(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}Qs(t,e,n,s,i),Qs(t,e,s+1,r,i)}}function $s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function el(t,e,n){return e&&tl(t.prototype,e),n&&tl(t,n),t}var nl=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},rl=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},il=Number.EPSILON;void 0===il&&(il=Math.pow(2,-52));var ol=il*il,al=function(t,e){if(-il<t&&t<il&&-il<e&&e<il)return 0;var n=t-e;return n*n<ol*t*e?0:t<e?-1:1},sl=function(){function t(){$s(this,t),this.reset()}return el(t,[{key:"reset",value:function(){this.xRounder=new ll,this.yRounder=new ll}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),ll=function(){function t(){$s(this,t),this.tree=new Zs,this.round(0)}return el(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===al(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===al(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),ul=new sl,cl=function(t,e){return t.x*e.y-t.y*e.x},hl=function(t,e){return t.x*e.x+t.y*e.y},pl=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=cl(r,i);return al(o,0)},fl=function(t){return Math.sqrt(hl(t,t))},dl=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return hl(i,r)/fl(i)/fl(r)},gl=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},yl=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},ml=function(){function t(e,n){$s(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return el(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:wl.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),el(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,a,s,l,u=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,a=u.point,s={x:o.x-i.x,y:o.y-i.y},l={x:a.x-i.x,y:a.y-i.y},cl(l,s)/fl(l)/fl(s)),cosine:dl(e.point,t.point,u.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),l=s.sine,u=s.cosine;return o>=0&&l>=0?a<u?1:a>u?-1:0:o<0&&l<0?a<u?-1:a>u?1:0:l<o?-1:l>o?1:0}}}]),t}(),vl=0,wl=function(){function t(e,n,r,i){$s(this,t),this.id=++vl,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return el(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(a<s&&a<u)return-1;if(a>s&&a>u)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var f=t.comparePoint(e.rightSE.point);return f<0?1:f>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var y=l-a,m=i-n,v=u-s,w=o-r;if(y>m&&v<w)return 1;if(y<m&&v>w)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),el(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=rl(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=nl(e,a)&&0===this.comparePoint(a),u=nl(n,i)&&0===t.comparePoint(i),c=nl(e,s)&&0===this.comparePoint(s),h=nl(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&c)return null;if(h)return o;if(c)return s;var p=function(t,e,n,r){if(0===e.x)return yl(n,r,t.x);if(0===r.x)return yl(t,e,n.x);if(0===e.y)return gl(n,r,t.y);if(0===r.y)return gl(t,e,n.y);var i=cl(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=cl(o,e)/i,s=cl(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}}(i,this.vector(),a,t.vector());return null===p?null:nl(r,p)?ul.round(p.x,p.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new ml(e,!0),o=new ml(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new t(i,a,this.rings.slice(),this.windings.slice());return ml.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),ml.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var u=r.rings[s],c=r.windings[s],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=e.indexOf(a);-1===l?(e.push(a),n.push(s)):n[l]+=s}for(var u=[],c=[],h=0,p=e.length;h<p;h++)if(0!==n[h]){var f=e[h],d=f.poly;if(-1===c.indexOf(d))if(f.isExterior)u.push(d);else{-1===c.indexOf(d)&&c.push(d);var g=u.indexOf(f.poly);-1!==g&&u.splice(g,1)}}for(var y=0,m=u.length;y<m;y++){var v=u[y].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Pl.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Pl.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(Pl.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,a,s=ml.comparePoints(e,n);if(s<0)i=e,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,a=-1}return new t(new ml(i,!0),new ml(o,!1),[r],[a])}}]),t}(),bl=function(){function t(e,n,r){if($s(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=ul.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,a=1,s=e.length;a<s;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=ul.round(e[a][0],e[a][1]);l.x===o.x&&l.y===o.y||(this.segments.push(wl.fromRing(o,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),o=l)}i.x===o.x&&i.y===o.y||this.segments.push(wl.fromRing(o,i,this))}return el(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),xl=function(){function t(e,n){if($s(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new bl(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new bl(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return el(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),_l=function(){function t(e,n){if($s(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new xl(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return el(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),El=function(){function t(e){$s(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return el(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,u=[s],c=s.point,h=[];a=s,s=l,u.push(s),s.point!==c;)for(;;){var p=s.getAvailableLinkedEvents();if(0===p.length){var f=u[0].point,d=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var g=null,y=0,m=h.length;y<m;y++)if(h[y].point===s.point){g=y;break}if(null===g){h.push({index:u.length,point:s.point});var v=s.getLeftmostComparator(a);l=p.sort(v)[0].otherSE;break}var w=h.splice(g)[0],b=u.splice(w.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(u))}}return n}}]),el(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==pl(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===pl(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],p=u;p!=c;p+=l)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];ml.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Sl=function(){function t(e){$s(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return el(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),Cl=function(){function t(e){$s(this,t),this.rings=e,this.polys=this._composePolys(e)}return el(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Sl(i));else{var o=i.enclosingRing();o.poly||e.push(new Sl(o)),o.poly.addInterior(i)}}return e}}]),t}(),Tl=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wl.compare;$s(this,t),this.queue=e,this.tree=new Zs(n),this.segments=[]}return el(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var u=a.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!a.isAnEndpoint(u)))for(var c=this._splitSafely(a,u),h=0,p=c.length;h<p;h++)n.push(c[h])}var f=null;if(s){var d=s.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(f=d),!s.isAnEndpoint(d)))for(var g=this._splitSafely(s,d),y=0,m=g.length;y<m;y++)n.push(g[y])}if(null!==l||null!==f){var v;v=null===l?f:null===f||ml.comparePoints(l,f)<=0?l:f,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var w=e.split(v),b=0,x=w.length;b<x;b++)n.push(w[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var _=a.getIntersection(s);if(null!==_){if(!a.isAnEndpoint(_))for(var E=this._splitSafely(a,_),S=0,C=E.length;S<C;S++)n.push(E[S]);if(!s.isAnEndpoint(_))for(var T=this._splitSafely(s,_),I=0,A=T.length;I<A;I++)n.push(T[I])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),Il="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Al="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Pl=new(function(){function t(){$s(this,t)}return el(t,[{key:"run",value:function(t,e,n){Pl.type=t,ul.reset();for(var r=[new _l(e,!0)],i=0,o=n.length;i<o;i++)r.push(new _l(n[i],!1));if(Pl.numMultiPolys=r.length,"difference"===Pl.type)for(var a=r[0],s=1;s<r.length;)null!==rl(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===Pl.type)for(var l=0,u=r.length;l<u;l++)for(var c=r[l],h=l+1,p=r.length;h<p;h++)if(null===rl(c.bbox,r[h].bbox))return[];for(var f=new Zs(ml.compare),d=0,g=r.length;d<g;d++)for(var y=r[d].getSweepEvents(),m=0,v=y.length;m<v;m++)if(f.insert(y[m]),f.size>Il)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new Tl(f),b=f.size,x=f.pop();x;){var _=x.key;if(f.size===b){var E=_.segment;throw new Error("Unable to pop() ".concat(_.isLeft?"left":"right"," SweepEvent ")+"[".concat(_.point.x,", ").concat(_.point.y,"] from segment #").concat(E.id," ")+"[".concat(E.leftSE.point.x,", ").concat(E.leftSE.point.y,"] -> ")+"[".concat(E.rightSE.point.x,", ").concat(E.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>Il)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>Al)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var S=w.process(_),C=0,T=S.length;C<T;C++){var I=S[C];void 0===I.consumedBy&&f.insert(I)}b=f.size,x=f.pop()}ul.reset();var A=El.factory(w.segments);return new Cl(A).getGeom()}}]),t}()),kl={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Pl.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Pl.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Pl.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Pl.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Ol=function(){};Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Ol.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Ml=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Nl=function(){},Ll={MAX_VALUE:{configurable:!0}};Nl.isNaN=function(t){return Number.isNaN(t)},Nl.doubleToLongBits=function(t){return t},Nl.longBitsToDouble=function(t){return t},Nl.isInfinite=function(t){return!Number.isFinite(t)},Ll.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Nl,Ll);var Rl=function(){},Dl=function(){},Fl=function(){};function jl(){}var zl=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Gl={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};zl.prototype.setOrdinate=function(t,e){switch(t){case zl.X:this.x=e;break;case zl.Y:this.y=e;break;case zl.Z:this.z=e;break;default:throw new Ml("Invalid ordinate index: "+t)}},zl.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Ol.equalsWithTolerance(this.x,e.x,n)&&!!Ol.equalsWithTolerance(this.y,e.y,n)}},zl.prototype.getOrdinate=function(t){switch(t){case zl.X:return this.x;case zl.Y:return this.y;case zl.Z:return this.z}throw new Ml("Invalid ordinate index: "+t)},zl.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Nl.isNaN(this.z))&&Nl.isNaN(t.z)},zl.prototype.equals=function(t){return t instanceof zl&&this.equals2D(t)},zl.prototype.equalInZ=function(t,e){return Ol.equalsWithTolerance(this.z,t.z,e)},zl.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},zl.prototype.clone=function(){},zl.prototype.copy=function(){return new zl(this)},zl.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},zl.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},zl.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},zl.prototype.hashCode=function(){var t=17;return 37*(t=37*t+zl.hashCode(this.x))+zl.hashCode(this.y)},zl.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},zl.prototype.interfaces_=function(){return[Rl,Dl,jl]},zl.prototype.getClass=function(){return zl},zl.hashCode=function(){if(1===arguments.length){var t=Nl.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},Gl.DimensionalComparator.get=function(){return Bl},Gl.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Gl.NULL_ORDINATE.get=function(){return Nl.NaN},Gl.X.get=function(){return 0},Gl.Y.get=function(){return 1},Gl.Z.get=function(){return 2},Object.defineProperties(zl,Gl);var Bl=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Ml("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Bl.prototype.compare=function(t,e){var n=t,r=e,i=Bl.compare(n.x,r.x);if(0!==i)return i;var o=Bl.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Bl.compare(n.z,r.z)},Bl.prototype.interfaces_=function(){return[Fl]},Bl.prototype.getClass=function(){return Bl},Bl.compare=function(t,e){return t<e?-1:t>e?1:Nl.isNaN(t)?Nl.isNaN(e)?0:-1:Nl.isNaN(e)?1:0};var Ul=function(){};Ul.prototype.create=function(){},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul};var ql=function(){},Wl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.toLocationSymbol=function(t){switch(t){case ql.EXTERIOR:return"e";case ql.BOUNDARY:return"b";case ql.INTERIOR:return"i";case ql.NONE:return"-"}throw new Ml("Unknown location value: "+t)},Wl.INTERIOR.get=function(){return 0},Wl.BOUNDARY.get=function(){return 1},Wl.EXTERIOR.get=function(){return 2},Wl.NONE.get=function(){return-1},Object.defineProperties(ql,Wl);var Vl=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Hl=function(){},Yl={LOG_10:{configurable:!0}};Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.log10=function(t){var e=Math.log(t);return Nl.isInfinite(e)||Nl.isNaN(e)?e:e/Hl.LOG_10},Hl.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Hl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Hl.wrap=function(t,e){return t<0?e- -t%e:t%e},Hl.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},Hl.average=function(t,e){return(t+e)/2},Yl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Hl,Yl);var Xl=function(t){this.str=t};Xl.prototype.append=function(t){this.str+=t},Xl.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Xl.prototype.toString=function(t){return this.str};var Zl=function(t){this.value=t};Zl.prototype.intValue=function(){return this.value},Zl.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Zl.isNaN=function(t){return Number.isNaN(t)};var Kl=function(){};Kl.isWhitespace=function(t){return t<=32&&t>=0||127===t},Kl.toUpperCase=function(t){return t.toUpperCase()};var Jl=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},Ql={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Jl.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Jl.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Jl.magnitude(n._hi),i=Jl.TEN.pow(r);(n=n.divide(i)).gt(Jl.TEN)?(n=n.divide(Jl.TEN),r+=1):n.lt(Jl.ONE)&&(n=n.multiply(Jl.TEN),r-=1);for(var o=r+1,a=new Xl,s=Jl.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(Jl.valueOf(u)).multiply(Jl.TEN),c&&n.selfAdd(Jl.TEN);var p=!0,f=Jl.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-l&&(p=!1),!p)break}return e[0]=r,a.toString()},Jl.prototype.sqr=function(){return this.multiply(this)},Jl.prototype.doubleValue=function(){return this._hi+this._lo},Jl.prototype.subtract=function(){if(arguments[0]instanceof Jl){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Jl.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Jl.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Jl.prototype.selfSubtract=function(){if(arguments[0]instanceof Jl){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Jl.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Jl.prototype.min=function(t){return this.le(t)?this:t},Jl.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Jl){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,r,i,o,a=arguments[0],s=arguments[1],l=null,u=null,c=null,h=null;return i=this._hi/a,h=(l=(c=Jl.SPLIT*i)-(l=c-i))*(u=(h=Jl.SPLIT*a)-(u=h-a))-(o=i*a)+l*(r=a-u)+(n=i-l)*u+n*r,h=i+(c=(this._hi-o-h+this._lo-i*s)/a),this._hi=h,this._lo=i-h+c,this}},Jl.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Jl.prototype.divide=function(){if(arguments[0]instanceof Jl){var t,e,n,r,i=arguments[0],o=null,a=null,s=null,l=null;t=(n=this._hi/i._hi)-(o=(s=Jl.SPLIT*n)-(o=s-n)),l=o*(a=(l=Jl.SPLIT*i._hi)-(a=l-i._hi))-(r=n*i._hi)+o*(e=i._hi-a)+t*a+t*e;var u=l=n+(s=(this._hi-r-l+this._lo-n*i._lo)/i._hi);return new Jl(u,n-l+s)}if("number"==typeof arguments[0]){var c=arguments[0];return Nl.isNaN(c)?Jl.createNaN():Jl.copy(this).selfDivide(c,0)}},Jl.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Jl.prototype.pow=function(t){if(0===t)return Jl.valueOf(1);var e=new Jl(this),n=Jl.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Jl.prototype.ceil=function(){if(this.isNaN())return Jl.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Jl(t,e)},Jl.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Jl.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Jl.prototype.setValue=function(){if(arguments[0]instanceof Jl){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Jl.prototype.max=function(t){return this.ge(t)?this:t},Jl.prototype.sqrt=function(){if(this.isZero())return Jl.valueOf(0);if(this.isNegative())return Jl.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Jl.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Jl.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Jl){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,r,i,o,a=arguments[0],s=null;return s=(r=this._hi+a)-(i=r-this._hi),n=(o=(s=a-i+(this._hi-s))+this._lo)+(r-(e=r+o)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var l,u,c,h,p=arguments[0],f=arguments[1],d=null,g=null,y=null;c=this._hi+p,u=this._lo+f,g=c-(y=c-this._hi),d=u-(h=u-this._lo);var m=(l=c+(y=(g=p-y+(this._hi-g))+u))+(y=(d=f-h+(this._lo-d))+(y+(c-l))),v=y+(l-m);return this._hi=m,this._lo=v,this}},Jl.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Jl){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,r,i=arguments[0],o=arguments[1],a=null,s=null,l=null,u=null;a=(l=Jl.SPLIT*this._hi)-this._hi,u=Jl.SPLIT*i,a=l-a,n=this._hi-a,s=u-i;var c=(l=this._hi*i)+(u=a*(s=u-s)-l+a*(r=i-s)+n*s+n*r+(this._hi*o+this._lo*i)),h=u+(a=l-c);return this._hi=c,this._lo=h,this}},Jl.prototype.selfSqr=function(){return this.selfMultiply(this)},Jl.prototype.floor=function(){if(this.isNaN())return Jl.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Jl(t,e)},Jl.prototype.negate=function(){return this.isNaN()?this:new Jl(-this._hi,-this._lo)},Jl.prototype.clone=function(){},Jl.prototype.multiply=function(){if(arguments[0]instanceof Jl){var t=arguments[0];return t.isNaN()?Jl.createNaN():Jl.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Nl.isNaN(e)?Jl.createNaN():Jl.copy(this).selfMultiply(e,0)}},Jl.prototype.isNaN=function(){return Nl.isNaN(this._hi)},Jl.prototype.intValue=function(){return Math.trunc(this._hi)},Jl.prototype.toString=function(){var t=Jl.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Jl.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Jl.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Jl.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Jl.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=Jl.SPLIT*n)-(i=a-n)),o=(s=Jl.SPLIT*this._hi)-this._hi;var l=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Jl(l,n-l+a)},Jl.prototype.toSciNotation=function(){if(this.isZero())return Jl.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Jl.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Jl.prototype.abs=function(){return this.isNaN()?Jl.NaN:this.isNegative()?this.negate():new Jl(this)},Jl.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Jl.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Jl.prototype.add=function(){if(arguments[0]instanceof Jl){var t=arguments[0];return Jl.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Jl.copy(this).selfAdd(e)}},Jl.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Jl){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Jl.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Jl.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Jl.prototype.trunc=function(){return this.isNaN()?Jl.NaN:this.isPositive()?this.floor():this.ceil()},Jl.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Jl.prototype.interfaces_=function(){return[jl,Rl,Dl]},Jl.prototype.getClass=function(){return Jl},Jl.sqr=function(t){return Jl.valueOf(t).selfMultiply(t)},Jl.valueOf=function(){return"string"==typeof arguments[0]?Jl.parse(arguments[0]):"number"==typeof arguments[0]?new Jl(arguments[0]):void 0},Jl.sqrt=function(t){return Jl.valueOf(t).sqrt()},Jl.parse=function(t){for(var e=0,n=t.length;Kl.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Jl,a=0,s=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,Kl.isDigit(u)){var c=u-"0";o.selfMultiply(Jl.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=Zl.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var p=o,f=a-s-l;if(0===f)p=o;else if(f>0){var d=Jl.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=Jl.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},Jl.createNaN=function(){return new Jl(Nl.NaN,Nl.NaN)},Jl.copy=function(t){return new Jl(t)},Jl.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Jl.stringOfChar=function(t,e){for(var n=new Xl,r=0;r<e;r++)n.append(t);return n.toString()},Ql.PI.get=function(){return new Jl(3.141592653589793,12246467991473532e-32)},Ql.TWO_PI.get=function(){return new Jl(6.283185307179586,24492935982947064e-32)},Ql.PI_2.get=function(){return new Jl(1.5707963267948966,6123233995736766e-32)},Ql.E.get=function(){return new Jl(2.718281828459045,14456468917292502e-32)},Ql.NaN.get=function(){return new Jl(Nl.NaN,Nl.NaN)},Ql.EPS.get=function(){return 123259516440783e-46},Ql.SPLIT.get=function(){return 134217729},Ql.MAX_PRINT_DIGITS.get=function(){return 32},Ql.TEN.get=function(){return Jl.valueOf(10)},Ql.ONE.get=function(){return Jl.valueOf(1)},Ql.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Ql.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Jl,Ql);var $l=function(){},tu={DP_SAFE_EPSILON:{configurable:!0}};$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},$l.orientationIndex=function(t,e,n){var r=$l.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Jl.valueOf(e.x).selfAdd(-t.x),o=Jl.valueOf(e.y).selfAdd(-t.y),a=Jl.valueOf(n.x).selfAdd(-e.x),s=Jl.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},$l.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},$l.intersection=function(t,e,n,r){var i=Jl.valueOf(r.y).selfSubtract(n.y).selfMultiply(Jl.valueOf(e.x).selfSubtract(t.x)),o=Jl.valueOf(r.x).selfSubtract(n.x).selfMultiply(Jl.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=Jl.valueOf(r.x).selfSubtract(n.x).selfMultiply(Jl.valueOf(t.y).selfSubtract(n.y)),l=Jl.valueOf(r.y).selfSubtract(n.y).selfMultiply(Jl.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=Jl.valueOf(t.x).selfAdd(Jl.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=Jl.valueOf(e.x).selfSubtract(t.x).selfMultiply(Jl.valueOf(t.y).selfSubtract(n.y)),p=Jl.valueOf(e.y).selfSubtract(t.y).selfMultiply(Jl.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(a).doubleValue(),d=Jl.valueOf(n.y).selfAdd(Jl.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new zl(c,d)},$l.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return $l.signum(a);r=i+o}else{if(!(i<0))return $l.signum(a);if(o>=0)return $l.signum(a);r=-i-o}var s=$l.DP_SAFE_EPSILON*r;return a>=s||-a>=s?$l.signum(a):2},$l.signum=function(t){return t>0?1:t<0?-1:0},tu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties($l,tu);var eu=function(){},nu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};nu.X.get=function(){return 0},nu.Y.get=function(){return 1},nu.Z.get=function(){return 2},nu.M.get=function(){return 3},eu.prototype.setOrdinate=function(t,e,n){},eu.prototype.size=function(){},eu.prototype.getOrdinate=function(t,e){},eu.prototype.getCoordinate=function(){},eu.prototype.getCoordinateCopy=function(t){},eu.prototype.getDimension=function(){},eu.prototype.getX=function(t){},eu.prototype.clone=function(){},eu.prototype.expandEnvelope=function(t){},eu.prototype.copy=function(){},eu.prototype.getY=function(t){},eu.prototype.toCoordinateArray=function(){},eu.prototype.interfaces_=function(){return[Dl]},eu.prototype.getClass=function(){return eu},Object.defineProperties(eu,nu);var ru=function(){},iu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ru),ou=function(){};ou.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},ou.getProperty=function(t){return{"line.separator":"\n"}[t]};var au=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof zl&&arguments[1]instanceof zl){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,y=p.x-h.x,m=h.x*p.y-p.x*h.y,v=f.y-d.y,w=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=y*b-w*m,this.y=v*m-g*b,this.w=g*w-v*y}};au.prototype.getY=function(){var t=this.y/this.w;if(Nl.isNaN(t)||Nl.isInfinite(t))throw new iu;return t},au.prototype.getX=function(){var t=this.x/this.w;if(Nl.isNaN(t)||Nl.isInfinite(t))throw new iu;return t},au.prototype.getCoordinate=function(){var t=new zl;return t.x=this.getX(),t.y=this.getY(),t},au.prototype.interfaces_=function(){return[]},au.prototype.getClass=function(){return au},au.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,p=(s*a-i*u)/c;if(Nl.isNaN(h)||Nl.isInfinite(h)||Nl.isNaN(p)||Nl.isInfinite(p))throw new iu;return new zl(h,p)};var su=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof zl){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},lu={serialVersionUID:{configurable:!0}};su.prototype.getArea=function(){return this.getWidth()*this.getHeight()},su.prototype.equals=function(t){if(!(t instanceof su))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},su.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new su;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new su(e,r,n,i)},su.prototype.isNull=function(){return this._maxx<this._minx},su.prototype.getMaxX=function(){return this._maxx},su.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof zl){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof su){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},su.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof su){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof zl){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},su.prototype.getMinY=function(){return this._miny},su.prototype.getMinX=function(){return this._minx},su.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof zl){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof su){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},su.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},su.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},su.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},su.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},su.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},su.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},su.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},su.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},su.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},su.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof su){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof zl){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},su.prototype.centre=function(){return this.isNull()?null:new zl((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},su.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof zl){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof su){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},su.prototype.getMaxY=function(){return this._maxy},su.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},su.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+zl.hashCode(this._minx))+zl.hashCode(this._maxx))+zl.hashCode(this._miny))+zl.hashCode(this._maxy)},su.prototype.interfaces_=function(){return[Rl,jl]},su.prototype.getClass=function(){return su},su.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l||c<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),u>l||c<s))}},lu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(su,lu);var uu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},cu=function(t){this.geometryFactory=t||new Zc};cu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=uu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=uu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],pu[n]&&(e=pu[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},cu.prototype.write=function(t){return this.extractGeometry(t)},cu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!hu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+hu[e].apply(this,[t])+")"};var hu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return hu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+hu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(hu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(hu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+hu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+hu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+hu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+hu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},pu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(uu.spaces);return this.geometryFactory.createPoint(new zl(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(uu.trimParens,"$1"),r.push(pu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(uu.spaces),r.push(new zl(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(uu.spaces),r.push(new zl(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(uu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(uu.trimParens,"$1"),r.push(pu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(uu.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(uu.trimParens,"$1"),n=pu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(uu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(uu.trimParens,"$1"),r.push(pu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},fu=function(t){this.parser=new cu(t)};fu.prototype.write=function(t){return this.parser.write(t)},fu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var du=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),gu=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(du),yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.shouldNeverReachHere=function(){if(0===arguments.length)yu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new gu("Should never reach here"+(null!==t?": "+t:""))}},yu.isTrue=function(){var t;if(1===arguments.length)yu.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new gu:new gu(t)},yu.equals=function(){var t,e,n;if(2===arguments.length)yu.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new gu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var mu=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new zl,this._intPt[1]=new zl,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},vu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};mu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},mu.prototype.getTopologySummary=function(){var t=new Xl;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},mu.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},mu.prototype.getIntersectionNum=function(){return this._result},mu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},mu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},mu.prototype.setPrecisionModel=function(t){this._precisionModel=t},mu.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},mu.prototype.getIntersection=function(t){return this._intPt[t]},mu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},mu.prototype.hasIntersection=function(){return this._result!==mu.NO_INTERSECTION},mu.prototype.getEdgeDistance=function(t,e){return mu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},mu.prototype.isCollinear=function(){return this._result===mu.COLLINEAR_INTERSECTION},mu.prototype.toString=function(){return fu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+fu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},mu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},mu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},mu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu},mu.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return yu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},mu.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return yu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},vu.DONT_INTERSECT.get=function(){return 0},vu.DO_INTERSECT.get=function(){return 1},vu.COLLINEAR.get=function(){return 2},vu.NO_INTERSECTION.get=function(){return 0},vu.POINT_INTERSECTION.get=function(){return 1},vu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(mu,vu);var wu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new su(this._inputLines[0][0],this._inputLines[0][1]),n=new su(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,su.intersects(n,r,e)&&0===_u.orientationIndex(n,r,e)&&0===_u.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=au.intersection(t,n,r,i)}catch(a){if(!(a instanceof iu))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new zl(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=$l.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);ou.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&ou.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new zl(t),o=new zl(e),a=new zl(n),s=new zl(r),l=new zl;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=su.intersects(e,n,r),a=su.intersects(e,n,i),s=su.intersects(r,i,e),l=su.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>u?o:u)+(s<h?s:h))/2,d=((a>c?a:c)+(l<p?l:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!su.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=_u.orientationIndex(e,n,r),a=_u.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=_u.orientationIndex(r,i,e),l=_u.orientationIndex(r,i,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new zl(r):0===a?this._intPt[0]=new zl(i):0===s?this._intPt[0]=new zl(e):0===l&&(this._intPt[0]=new zl(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=_u.distancePointLine(t,n,r),a=_u.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=_u.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=_u.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(mu),bu=function(){};bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},bu.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return bu.signOfDet2x2(r,i,o,a)},bu.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var xu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};xu.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=bu.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},xu.prototype.isPointInPolygon=function(){return this.getLocation()!==ql.EXTERIOR},xu.prototype.getLocation=function(){return this._isPointOnSegment?ql.BOUNDARY:this._crossingCount%2==1?ql.INTERIOR:ql.EXTERIOR},xu.prototype.isOnSegment=function(){return this._isPointOnSegment},xu.prototype.interfaces_=function(){return[]},xu.prototype.getClass=function(){return xu},xu.locatePointInRing=function(){if(arguments[0]instanceof zl&&Vl(arguments[1],eu)){for(var t=arguments[1],e=new xu(arguments[0]),n=new zl,r=new zl,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof zl&&arguments[1]instanceof Array){for(var o=arguments[1],a=new xu(arguments[0]),s=1;s<o.length;s++){var l=o[s],u=o[s-1];if(a.countSegment(l,u),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var _u=function(){},Eu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};_u.prototype.interfaces_=function(){return[]},_u.prototype.getClass=function(){return _u},_u.orientationIndex=function(t,e,n){return $l.orientationIndex(t,e,n)},_u.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Vl(arguments[0],eu)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new zl,u=new zl,c=new zl;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var p=0,f=1;f<s-1;f++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(f+1,c),c.x-=h,p+=u.x*(l.y-c.y);return p/2}},_u.distanceLineLine=function(t,e,n,r){if(t.equals(e))return _u.distancePointLine(t,n,r);if(n.equals(r))return _u.distancePointLine(r,t,e);var i=!1;if(su.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Hl.min(_u.distancePointLine(t,n,r),_u.distancePointLine(e,n,r),_u.distancePointLine(n,t,e),_u.distancePointLine(r,t,e)):0},_u.isPointInRing=function(t,e){return _u.locatePointInRing(t,e)!==ql.EXTERIOR},_u.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new zl;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},_u.isCCW=function(t){var e=t.length-1;if(e<3)throw new Ml("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=_u.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},_u.locatePointInRing=function(t,e){return xu.locatePointInRing(t,e)},_u.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},_u.computeOrientation=function(t,e,n){return _u.orientationIndex(t,e,n)},_u.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Ml("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=_u.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(u>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},_u.isOnLine=function(t,e){for(var n=new wu,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Eu.CLOCKWISE.get=function(){return-1},Eu.RIGHT.get=function(){return _u.CLOCKWISE},Eu.COUNTERCLOCKWISE.get=function(){return 1},Eu.LEFT.get=function(){return _u.COUNTERCLOCKWISE},Eu.COLLINEAR.get=function(){return 0},Eu.STRAIGHT.get=function(){return _u.COLLINEAR},Object.defineProperties(_u,Eu);var Su=function(){};Su.prototype.filter=function(t){},Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su};var Cu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Tu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Cu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Cu.SORTINDEX_GEOMETRYCOLLECTION},Cu.prototype.getFactory=function(){return this._factory},Cu.prototype.getGeometryN=function(t){return this},Cu.prototype.getArea=function(){return 0},Cu.prototype.isRectangle=function(){return!1},Cu.prototype.equals=function(){if(arguments[0]instanceof Cu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Cu))return!1;var n=e;return this.equalsExact(n)}},Cu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Cu.prototype.geometryChanged=function(){this.apply(Cu.geometryChangedFilter)},Cu.prototype.geometryChangedAction=function(){this._envelope=null},Cu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Cu.prototype.getLength=function(){return 0},Cu.prototype.getNumGeometries=function(){return 1},Cu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Cu.prototype.getUserData=function(){return this._userData},Cu.prototype.getSRID=function(){return this._SRID},Cu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Cu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Cu.SORTINDEX_GEOMETRYCOLLECTION)throw new Ml("This method does not support GeometryCollection arguments")},Cu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Cu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Cu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Cu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new su(this._envelope)},Cu.prototype.setSRID=function(t){this._SRID=t},Cu.prototype.setUserData=function(t){this._userData=t},Cu.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},Cu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Cu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Cu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Cu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Cu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Cu.SORTINDEX_MULTIPOLYGON},Cu.prototype.interfaces_=function(){return[Dl,Rl,jl]},Cu.prototype.getClass=function(){return Cu},Cu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Cu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Tu.serialVersionUID.get=function(){return 0x799ea46522854c00},Tu.SORTINDEX_POINT.get=function(){return 0},Tu.SORTINDEX_MULTIPOINT.get=function(){return 1},Tu.SORTINDEX_LINESTRING.get=function(){return 2},Tu.SORTINDEX_LINEARRING.get=function(){return 3},Tu.SORTINDEX_MULTILINESTRING.get=function(){return 4},Tu.SORTINDEX_POLYGON.get=function(){return 5},Tu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Tu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Tu.geometryChangedFilter.get=function(){return Iu},Object.defineProperties(Cu,Tu);var Iu=function(){};Iu.interfaces_=function(){return[Su]},Iu.filter=function(t){t.geometryChangedAction()};var Au=function(){};Au.prototype.filter=function(t){},Au.prototype.interfaces_=function(){return[]},Au.prototype.getClass=function(){return Au};var Pu=function(){},ku={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Pu.prototype.isInBoundary=function(t){},Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu},ku.Mod2BoundaryNodeRule.get=function(){return Ou},ku.EndPointBoundaryNodeRule.get=function(){return Mu},ku.MultiValentEndPointBoundaryNodeRule.get=function(){return Nu},ku.MonoValentEndPointBoundaryNodeRule.get=function(){return Lu},ku.MOD2_BOUNDARY_RULE.get=function(){return new Ou},ku.ENDPOINT_BOUNDARY_RULE.get=function(){return new Mu},ku.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Nu},ku.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Lu},ku.OGC_SFS_BOUNDARY_RULE.get=function(){return Pu.MOD2_BOUNDARY_RULE},Object.defineProperties(Pu,ku);var Ou=function(){};Ou.prototype.isInBoundary=function(t){return t%2==1},Ou.prototype.interfaces_=function(){return[Pu]},Ou.prototype.getClass=function(){return Ou};var Mu=function(){};Mu.prototype.isInBoundary=function(t){return t>0},Mu.prototype.interfaces_=function(){return[Pu]},Mu.prototype.getClass=function(){return Mu};var Nu=function(){};Nu.prototype.isInBoundary=function(t){return t>1},Nu.prototype.interfaces_=function(){return[Pu]},Nu.prototype.getClass=function(){return Nu};var Lu=function(){};Lu.prototype.isInBoundary=function(t){return 1===t},Lu.prototype.interfaces_=function(){return[Pu]},Lu.prototype.getClass=function(){return Lu};var Ru=function(){};function Du(t){this.message=t||""}Ru.prototype.add=function(){},Ru.prototype.addAll=function(){},Ru.prototype.isEmpty=function(){},Ru.prototype.iterator=function(){},Ru.prototype.size=function(){},Ru.prototype.toArray=function(){},Ru.prototype.remove=function(){},Du.prototype=new Error,Du.prototype.name="IndexOutOfBoundsException";var Fu=function(){};Fu.prototype.hasNext=function(){},Fu.prototype.next=function(){},Fu.prototype.remove=function(){};var ju=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Ru);function zu(t){this.message=t||""}zu.prototype=new Error,zu.prototype.name="NoSuchElementException";var Gu=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ru&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Ru]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Bu(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Du;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(ju),Bu=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new zu;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Fu),Uu=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof zl&&"boolean"==typeof arguments[1]){var o=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(o))return null;t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];return this.add(a,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<l.length;c++)e.add(l[c],u);else for(var h=l.length-1;h>=0;h--)e.add(l[h],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof zl){var p=arguments[0],f=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(p>0&&this.get(p-1).equals2D(f))return null;if(p<d&&this.get(p).equals2D(f))return null}}t.prototype.add.call(this,p,f)}}else if(4===arguments.length){var g=arguments[0],y=arguments[1],m=arguments[2],v=arguments[3],w=1;m>v&&(w=-1);for(var b=m;b!==v;b+=w)e.add(g[b],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new zl(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Gu),qu=function(){},Wu={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Wu.ForwardComparator.get=function(){return Vu},Wu.BidirectionalComparator.get=function(){return Hu},Wu.coordArrayType.get=function(){return new Array(0).fill(null)},qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},qu.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},qu.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(qu.indexOf(r,e)<0)return r}return null},qu.scroll=function(t,e){var n=qu.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);ou.arraycopy(t,n,r,0,t.length-n),ou.arraycopy(t,0,r,t.length-n,n),ou.arraycopy(r,0,t,0,t.length)},qu.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},qu.intersection=function(t,e){for(var n=new Uu,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},qu.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},qu.removeRepeatedPoints=function(t){return qu.hasRepeatedPoints(t)?new Uu(t,!1).toCoordinateArray():t},qu.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},qu.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},qu.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new zl(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new zl(r[i+l])},qu.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},qu.envelope=function(t){for(var e=new su,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},qu.toCoordinateArray=function(t){return t.toArray(qu.coordArrayType)},qu.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},qu.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},qu.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},qu.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},qu.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},qu.extract=function(t,e,n){e=Hl.clamp(e,0,t.length);var r=(n=Hl.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(qu,Wu);var Vu=function(){};Vu.prototype.compare=function(t,e){return qu.compare(t,e)},Vu.prototype.interfaces_=function(){return[Fl]},Vu.prototype.getClass=function(){return Vu};var Hu=function(){};Hu.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=qu.compare(n,r);return qu.isEqualReversed(n,r)?0:i},Hu.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=qu.increasingDirection(n),o=qu.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},Hu.prototype.interfaces_=function(){return[Fl]},Hu.prototype.getClass=function(){return Hu};var Yu=function(){};Yu.prototype.get=function(){},Yu.prototype.put=function(){},Yu.prototype.size=function(){},Yu.prototype.values=function(){},Yu.prototype.entrySet=function(){};var Xu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Yu);function Zu(t){this.message=t||""}function Ku(){}Zu.prototype=new Error,Zu.prototype.name="OperationNotSupported",Ku.prototype=new Ru,Ku.prototype.contains=function(){};var Ju=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ru&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Qu(this)},e}(Ku),Qu=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new zu;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Zu},e}(Fu);function $u(t){return null===t?0:t.color}function tc(t){return null===t?null:t.parent}function ec(t,e){null!==t&&(t.color=e)}function nc(t){return null===t?null:t.left}function rc(t){return null===t?null:t.right}function ic(){this.root_=null,this.size_=0}ic.prototype=new Xu,ic.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},ic.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},ic.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(tc(t)===nc(tc(tc(t)))){var n=rc(tc(tc(t)));1===$u(n)?(ec(tc(t),0),ec(n,0),ec(tc(tc(t)),1),t=tc(tc(t))):(t===rc(tc(t))&&(t=tc(t),e.rotateLeft(t)),ec(tc(t),0),ec(tc(tc(t)),1),e.rotateRight(tc(tc(t))))}else{var r=nc(tc(tc(t)));1===$u(r)?(ec(tc(t),0),ec(r,0),ec(tc(tc(t)),1),t=tc(tc(t))):(t===nc(tc(t))&&(t=tc(t),e.rotateRight(t)),ec(tc(t),0),ec(tc(tc(t)),1),e.rotateLeft(tc(tc(t))))}this.root_.color=0},ic.prototype.values=function(){var t=new Gu,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=ic.successor(e));)t.add(e.value);return t},ic.prototype.entrySet=function(){var t=new Ju,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=ic.successor(e));)t.add(e);return t},ic.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},ic.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},ic.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},ic.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},ic.prototype.size=function(){return this.size_};var oc=function(){};function ac(){}function sc(){this.array_=[],arguments[0]instanceof Ru&&this.addAll(arguments[0])}oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},ac.prototype=new Ku,sc.prototype=new ac,sc.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},sc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},sc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},sc.prototype.remove=function(t){throw new Zu},sc.prototype.size=function(){return this.array_.length},sc.prototype.isEmpty=function(){return 0===this.array_.length},sc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},sc.prototype.iterator=function(){return new lc(this)};var lc=function(t){this.treeSet_=t,this.position_=0};lc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new zu;return this.treeSet_.array_[this.position_++]},lc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},lc.prototype.remove=function(){throw new Zu};var uc=function(){};uc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},uc.asList=function(t){for(var e=new Gu,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var cc=function(){},hc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};hc.P.get=function(){return 0},hc.L.get=function(){return 1},hc.A.get=function(){return 2},hc.FALSE.get=function(){return-1},hc.TRUE.get=function(){return-2},hc.DONTCARE.get=function(){return-3},hc.SYM_FALSE.get=function(){return"F"},hc.SYM_TRUE.get=function(){return"T"},hc.SYM_DONTCARE.get=function(){return"*"},hc.SYM_P.get=function(){return"0"},hc.SYM_L.get=function(){return"1"},hc.SYM_A.get=function(){return"2"},cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc},cc.toDimensionSymbol=function(t){switch(t){case cc.FALSE:return cc.SYM_FALSE;case cc.TRUE:return cc.SYM_TRUE;case cc.DONTCARE:return cc.SYM_DONTCARE;case cc.P:return cc.SYM_P;case cc.L:return cc.SYM_L;case cc.A:return cc.SYM_A}throw new Ml("Unknown dimension value: "+t)},cc.toDimensionValue=function(t){switch(Kl.toUpperCase(t)){case cc.SYM_FALSE:return cc.FALSE;case cc.SYM_TRUE:return cc.TRUE;case cc.SYM_DONTCARE:return cc.DONTCARE;case cc.SYM_P:return cc.P;case cc.SYM_L:return cc.L;case cc.SYM_A:return cc.A}throw new Ml("Unknown dimension symbol: "+t)},Object.defineProperties(cc,hc);var pc=function(){};pc.prototype.filter=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var fc=function(){};fc.prototype.filter=function(t,e){},fc.prototype.isDone=function(){},fc.prototype.isGeometryChanged=function(){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var dc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new Ml("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new su,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();uc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=cc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=cc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new sc(uc.asList(this._geometries)),n=new sc(uc.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),u=i.getGeometryN(s),c=l.compareToSameClass(u,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){var t=this;if(Vl(arguments[0],Au))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(Vl(arguments[0],fc)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(Vl(arguments[0],pc)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)t._geometries[a].apply(o)}else if(Vl(arguments[0],Su)){var s=arguments[0];s.filter(this);for(var l=0;l<this._geometries.length;l++)t._geometries[l].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),yu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Cu),gc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?cc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new yc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[oc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(dc),yc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Pu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};yc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},yc.prototype.getBoundary=function(){return this._geom instanceof Ic?this.boundaryLineString(this._geom):this._geom instanceof gc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},yc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},yc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},yc.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new Gu;this._endpointMap=new ic;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var a=o.next(),s=a.getValue().count;e._bnRule.isInBoundary(s)&&n.add(a.getKey())}return qu.toCoordinateArray(n)},yc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new mc,this._endpointMap.put(t,e)),e.count++},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc},yc.getBoundary=function(){return 1===arguments.length?new yc(arguments[0]).getBoundary():2===arguments.length?new yc(arguments[0],arguments[1]).getBoundary():void 0};var mc=function(){this.count=null};function vc(){}function wc(){}mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var bc=function(){};function xc(){}function _c(){}function Ec(){}var Sc=function(){},Cc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc},Sc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Sc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new xc,n=new vc(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[1],i="",o=new Ec(new wc(Sc.getStackTrace(arguments[0]))),a=0;a<r;a++)try{i+=o.readLine()+Sc.NEWLINE}catch(t){if(!(t instanceof _c))throw t;yu.shouldNeverReachHere()}return i}},Sc.split=function(t,e){for(var n=e.length,r=new Gu,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},Sc.toString=function(){if(1===arguments.length){var t=arguments[0];return Sc.SIMPLE_ORDINATE_FORMAT.format(t)}},Sc.spaces=function(t){return Sc.chars(" ",t)},Cc.NEWLINE.get=function(){return ou.getProperty("line.separator")},Cc.SIMPLE_ORDINATE_FORMAT.get=function(){return new bc("0.#")},Object.defineProperties(Sc,Cc);var Tc=function(){};Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Tc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,eu.X)===t.getOrdinate(e-1,eu.X)&&t.getOrdinate(0,eu.Y)===t.getOrdinate(e-1,eu.Y)},Tc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||Nl.isNaN(a)&&Nl.isNaN(s)))return!1}return!0},Tc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Tc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Tc.copy(e,i-1,r,o,1);return r},Tc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Tc.swap(t,r,e-r)},Tc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Tc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Tc.copyCoord(t,e+o,n,r+o)},Tc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Xl;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Sc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Tc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Tc.createClosedRing(t,e,4):e.getOrdinate(0,eu.X)===e.getOrdinate(n-1,eu.X)&&e.getOrdinate(0,eu.Y)===e.getOrdinate(n-1,eu.Y)?e:Tc.createClosedRing(t,e,n+1)},Tc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Tc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Tc.copy(e,0,r,o,1);return r};var Ic=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new su:this._points.expandEnvelope(new su)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Tc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?cc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return _u.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Tc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Vl(arguments[0],Au))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Vl(arguments[0],fc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(Vl(arguments[0],pc)||Vl(arguments[0],Su))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new yc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Ml("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[oc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Cu),Ac=function(){};Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var Pc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new su;var t=new su;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return cc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Vl(arguments[0],Au)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Vl(arguments[0],fc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(Vl(arguments[0],pc)||Vl(arguments[0],Su))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),yu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Ac]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Cu),kc=function(){};kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var Oc=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new Ml("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new Ml("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(_u.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(_u.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o==(u!==a))return!1;o=l,a=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);uc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);ou.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=qu.minCoordinate(e.getCoordinates());qu.scroll(r,i),ou.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],_u.isCCW(e.getCoordinates())===n&&qu.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var l=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<l&&c<u;){var h=this.getInteriorRingN(c),p=i.getInteriorRingN(c),f=h.compareToSameClass(p,r);if(0!==f)return f;c++}return c<l?1:c<u?-1:0}},e.prototype.apply=function(t){var e=this;if(Vl(t,Au)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(Vl(t,fc)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(Vl(t,pc))t.filter(this);else if(Vl(t,Su)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Cu),Mc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return cc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ac]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(dc),Nc=function(t){function e(e,n){e instanceof zl&&n instanceof Zc&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return cc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Tc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Ml("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Ml("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Ic),Lc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Gu,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(dc),Rc=function(t){this._factory=t||null,this._isUserDataCopied=!1},Dc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Rc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Rc.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Rc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof dc?this.editGeometryCollection(t,e):t instanceof Oc?this.editPolygon(t,e):t instanceof Pc||t instanceof Ic?e.edit(t,this._factory):(yu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Rc.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Gu,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===Mc?this._factory.createMultiPoint(r.toArray([])):n.getClass()===gc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===Lc?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},Rc.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Gu,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},Rc.GeometryEditorOperation=function(){},Dc.NoOpGeometryOperation.get=function(){return Fc},Dc.CoordinateOperation.get=function(){return jc},Dc.CoordinateSequenceOperation.get=function(){return zc},Object.defineProperties(Rc,Dc);var Fc=function(){};Fc.prototype.edit=function(t,e){return t},Fc.prototype.interfaces_=function(){return[Rc.GeometryEditorOperation]},Fc.prototype.getClass=function(){return Fc};var jc=function(){};jc.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Nc?e.createLinearRing(n):t instanceof Ic?e.createLineString(n):t instanceof Pc?n.length>0?e.createPoint(n[0]):e.createPoint():t},jc.prototype.interfaces_=function(){return[Rc.GeometryEditorOperation]},jc.prototype.getClass=function(){return jc};var zc=function(){};zc.prototype.edit=function(t,e){return t instanceof Nc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Ic?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Pc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},zc.prototype.interfaces_=function(){return[Rc.GeometryEditorOperation]},zc.prototype.getClass=function(){return zc};var Gc=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new zl}else if(Vl(arguments[0],eu)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=o,this._dimension=a,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],l=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=l;for(var u=0;u<s;u++)t._coordinates[u]=new zl}},Bc={serialVersionUID:{configurable:!0}};Gc.prototype.setOrdinate=function(t,e,n){switch(e){case eu.X:this._coordinates[t].x=n;break;case eu.Y:this._coordinates[t].y=n;break;case eu.Z:this._coordinates[t].z=n;break;default:throw new Ml("invalid ordinateIndex")}},Gc.prototype.size=function(){return this._coordinates.length},Gc.prototype.getOrdinate=function(t,e){switch(e){case eu.X:return this._coordinates[t].x;case eu.Y:return this._coordinates[t].y;case eu.Z:return this._coordinates[t].z}return Nl.NaN},Gc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Gc.prototype.getCoordinateCopy=function(t){return new zl(this._coordinates[t])},Gc.prototype.getDimension=function(){return this._dimension},Gc.prototype.getX=function(t){return this._coordinates[t].x},Gc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Gc(t,this._dimension)},Gc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Gc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Gc(t,this._dimension)},Gc.prototype.toString=function(){if(this._coordinates.length>0){var t=new Xl(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Gc.prototype.getY=function(t){return this._coordinates[t].y},Gc.prototype.toCoordinateArray=function(){return this._coordinates},Gc.prototype.interfaces_=function(){return[eu,jl]},Gc.prototype.getClass=function(){return Gc},Bc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Gc,Bc);var Uc=function(){},qc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Uc.prototype.readResolve=function(){return Uc.instance()},Uc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Gc(arguments[0]);if(Vl(arguments[0],eu))return new Gc(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Gc(t):new Gc(t,e)}},Uc.prototype.interfaces_=function(){return[Ul,jl]},Uc.prototype.getClass=function(){return Uc},Uc.instance=function(){return Uc.instanceObject},qc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},qc.instanceObject.get=function(){return new Uc},Object.defineProperties(Uc,qc);var Wc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Gu,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Ju;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Yu),Vc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Yc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Hc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Vc.prototype.equals=function(t){if(!(t instanceof Vc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Vc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Zl(n).compareTo(new Zl(r))},Vc.prototype.getScale=function(){return this._scale},Vc.prototype.isFloating=function(){return this._modelType===Vc.FLOATING||this._modelType===Vc.FLOATING_SINGLE},Vc.prototype.getType=function(){return this._modelType},Vc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Vc.FLOATING?t="Floating":this._modelType===Vc.FLOATING_SINGLE?t="Floating-Single":this._modelType===Vc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Vc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Nl.isNaN(t)||this._modelType===Vc.FLOATING_SINGLE?t:this._modelType===Vc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof zl){var e=arguments[0];if(this._modelType===Vc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Vc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Vc.FLOATING?t=16:this._modelType===Vc.FLOATING_SINGLE?t=6:this._modelType===Vc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Vc.prototype.setScale=function(t){this._scale=Math.abs(t)},Vc.prototype.interfaces_=function(){return[jl,Rl]},Vc.prototype.getClass=function(){return Vc},Vc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Hc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Hc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Vc,Hc);var Yc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Xc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Yc.prototype.readResolve=function(){return Yc.nameToTypeMap.get(this._name)},Yc.prototype.toString=function(){return this._name},Yc.prototype.interfaces_=function(){return[jl]},Yc.prototype.getClass=function(){return Yc},Xc.serialVersionUID.get=function(){return-552860263173159e4},Xc.nameToTypeMap.get=function(){return new Wc},Object.defineProperties(Yc,Xc),Vc.Type=Yc,Vc.FIXED=new Yc("FIXED"),Vc.FLOATING=new Yc("FLOATING"),Vc.FLOATING_SINGLE=new Yc("FLOATING SINGLE");var Zc=function t(){this._precisionModel=new Vc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Vl(arguments[0],Ul)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Vc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Kc={serialVersionUID:{configurable:!0}};Zc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new zl(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new zl(t.getMinX(),t.getMinY()),new zl(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new zl(t.getMinX(),t.getMinY()),new zl(t.getMinX(),t.getMaxY()),new zl(t.getMaxX(),t.getMaxY()),new zl(t.getMaxX(),t.getMinY()),new zl(t.getMinX(),t.getMinY())]),null)},Zc.prototype.createLineString=function(t){return t?t instanceof Array?new Ic(this.getCoordinateSequenceFactory().create(t),this):Vl(t,eu)?new Ic(t,this):void 0:new Ic(this.getCoordinateSequenceFactory().create([]),this)},Zc.prototype.createMultiLineString=function(){return 0===arguments.length?new gc(null,this):1===arguments.length?new gc(arguments[0],this):void 0},Zc.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Zc.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Oc)return this.createMultiPolygon(Zc.toPolygonArray(t));if(s instanceof Ic)return this.createMultiLineString(Zc.toLineStringArray(t));if(s instanceof Pc)return this.createMultiPoint(Zc.toPointArray(t));yu.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},Zc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Zc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof zl){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Vl(arguments[0],eu))return new Pc(arguments[0],this)}},Zc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Zc.prototype.createPolygon=function(){if(0===arguments.length)return new Oc(null,null,this);if(1===arguments.length){if(Vl(arguments[0],eu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Nc){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Oc(arguments[0],arguments[1],this)},Zc.prototype.getSRID=function(){return this._SRID},Zc.prototype.createGeometryCollection=function(){return 0===arguments.length?new dc(null,this):1===arguments.length?new dc(arguments[0],this):void 0},Zc.prototype.createGeometry=function(t){return new Rc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Zc.prototype.getPrecisionModel=function(){return this._precisionModel},Zc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Vl(arguments[0],eu))return new Nc(arguments[0],this)}},Zc.prototype.createMultiPolygon=function(){return 0===arguments.length?new Lc(null,this):1===arguments.length?new Lc(arguments[0],this):void 0},Zc.prototype.createMultiPoint=function(){if(0===arguments.length)return new Mc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Mc(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Vl(arguments[0],eu)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Tc.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},Zc.prototype.interfaces_=function(){return[jl]},Zc.prototype.getClass=function(){return Zc},Zc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.getDefaultCoordinateSequenceFactory=function(){return Uc.instance()},Zc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Kc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Zc,Kc);var Jc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Qc=function(t){this.geometryFactory=t||new Zc};Qc.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!$c[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Jc.indexOf(n)?$c[n].apply(this,[e.coordinates]):"GeometryCollection"===n?$c[n].apply(this,[e.geometries]):$c[n].apply(this,[e])},Qc.prototype.write=function(t){var e=t.getGeometryType();if(!th[e])throw new Error("Geometry is not supported");return th[e].apply(this,[t])};var $c={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!$c[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=$c.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new zl(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new zl(t[0],t[1]),new zl(t[2],t[1]),new zl(t[2],t[3]),new zl(t[0],t[3]),new zl(t[0],t[1])])},Point:function(t){var e=new zl(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push($c.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=$c.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push($c.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=$c.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=$c.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push($c.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},th={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:th.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=th.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(th.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=th.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=th.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=th.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=th.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(th[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},eh=function(t){this.geometryFactory=t||new Zc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Qc(this.geometryFactory)};eh.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Vc.FIXED&&this.reducePrecision(e),e},eh.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var nh=function(){this.parser=new Qc(this.geometryFactory)};nh.prototype.write=function(t){return this.parser.write(t)};var rh=function(){},ih={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function oh(t){this.message=t||""}function ah(){this.array_=[]}rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh},rh.opposite=function(t){return t===rh.LEFT?rh.RIGHT:t===rh.RIGHT?rh.LEFT:t},ih.ON.get=function(){return 0},ih.LEFT.get=function(){return 1},ih.RIGHT.get=function(){return 2},Object.defineProperties(rh,ih),oh.prototype=new Error,oh.prototype.name="EmptyStackException",ah.prototype=new ju,ah.prototype.add=function(t){return this.array_.push(t),!0},ah.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},ah.prototype.push=function(t){return this.array_.push(t),t},ah.prototype.pop=function(t){if(0===this.array_.length)throw new oh;return this.array_.pop()},ah.prototype.peek=function(){if(0===this.array_.length)throw new oh;return this.array_[this.array_.length-1]},ah.prototype.empty=function(){return 0===this.array_.length},ah.prototype.isEmpty=function(){return this.empty()},ah.prototype.search=function(t){return this.array_.indexOf(t)},ah.prototype.size=function(){return this.array_.length},ah.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var sh=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};sh.prototype.getCoordinate=function(){return this._minCoord},sh.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},sh.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();yu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=_u.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===_u.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===_u.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},sh.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=rh.LEFT;return n[e].y<n[e+1].y&&(r=rh.RIGHT),r},sh.prototype.getEdge=function(){return this._orientedDe},sh.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},sh.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},sh.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}yu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===rh.LEFT&&(this._orientedDe=this._minDe.getSym())},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh};var lh=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new zl(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(du),uh=function(){this.array_=[]};uh.prototype.addLast=function(t){this.array_.push(t)},uh.prototype.removeFirst=function(){return this.array_.shift()},uh.prototype.isEmpty=function(){return 0===this.array_.length};var ch=function(){this._finder=null,this._dirEdgeList=new Gu,this._nodes=new Gu,this._rightMostCoord=null,this._env=null,this._finder=new sh};ch.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},ch.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ch.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new lh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},ch.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(rh.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},ch.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ch.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(rh.RIGHT)>=1&&e.getDepth(rh.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},ch.prototype.computeDepths=function(t){var e=new Ju,n=new uh,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},ch.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},ch.prototype.getEnvelope=function(){if(null===this._env){for(var t=new su,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},ch.prototype.addReachable=function(t){var e=new ah;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},ch.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(rh.LEFT,t.getDepth(rh.RIGHT)),e.setDepth(rh.RIGHT,t.getDepth(rh.LEFT))},ch.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},ch.prototype.getNodes=function(){return this._nodes},ch.prototype.getDirectedEdges=function(){return this._dirEdgeList},ch.prototype.interfaces_=function(){return[Rl]},ch.prototype.getClass=function(){return ch};var hh=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[rh.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[rh.ON]=o,this.location[rh.LEFT]=a,this.location[rh.RIGHT]=s}};hh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},hh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==ql.NONE)return!1;return!0},hh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===ql.NONE&&(this.location[e]=t)},hh.prototype.isLine=function(){return 1===this.location.length},hh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[rh.ON]=this.location[rh.ON],e[rh.LEFT]=ql.NONE,e[rh.RIGHT]=ql.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===ql.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},hh.prototype.getLocations=function(){return this.location},hh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[rh.LEFT];this.location[rh.LEFT]=this.location[rh.RIGHT],this.location[rh.RIGHT]=t},hh.prototype.toString=function(){var t=new Xl;return this.location.length>1&&t.append(ql.toLocationSymbol(this.location[rh.LEFT])),t.append(ql.toLocationSymbol(this.location[rh.ON])),this.location.length>1&&t.append(ql.toLocationSymbol(this.location[rh.RIGHT])),t.toString()},hh.prototype.setLocations=function(t,e,n){this.location[rh.ON]=t,this.location[rh.LEFT]=e,this.location[rh.RIGHT]=n},hh.prototype.get=function(t){return t<this.location.length?this.location[t]:ql.NONE},hh.prototype.isArea=function(){return this.location.length>1},hh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===ql.NONE)return!0;return!1},hh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(rh.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},hh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(ql.NONE)},hh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},hh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var ph=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new hh(e),this.elt[1]=new hh(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new hh(n.elt[0]),this.elt[1]=new hh(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new hh(ql.NONE),this.elt[1]=new hh(ql.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new hh(o,a,s),this.elt[1]=new hh(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new hh(ql.NONE,ql.NONE,ql.NONE),this.elt[1]=new hh(ql.NONE,ql.NONE,ql.NONE),this.elt[l].setLocations(u,c,h)}};ph.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},ph.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},ph.prototype.isNull=function(t){return this.elt[t].isNull()},ph.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},ph.prototype.isLine=function(t){return this.elt[t].isLine()},ph.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new hh(t.elt[n]):e.elt[n].merge(t.elt[n])},ph.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},ph.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(rh.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},ph.prototype.toString=function(){var t=new Xl;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},ph.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},ph.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},ph.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(rh.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},ph.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},ph.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},ph.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new hh(this.elt[t].location[0]))},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph},ph.toLineLabel=function(t){for(var e=new ph(ql.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var fh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Gu,this._pts=new Gu,this._label=new ph(ql.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Gu,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};fh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=_u.isCCW(this._ring.getCoordinates())},fh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},fh.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new lh("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new lh("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();yu.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},fh.prototype.getLinearRing=function(){return this._ring},fh.prototype.getCoordinate=function(t){return this._pts.get(t)},fh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},fh.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},fh.prototype.isHole=function(){return this._isHole},fh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},fh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!_u.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},fh.prototype.addHole=function(t){this._holes.add(t)},fh.prototype.isShell=function(){return null===this._shell},fh.prototype.getLabel=function(){return this._label},fh.prototype.getEdges=function(){return this._edges},fh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},fh.prototype.getShell=function(){return this._shell},fh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,rh.RIGHT);if(n===ql.NONE)return null;if(this._label.getLocation(e)===ql.NONE)return this._label.setLocation(e,n),null}},fh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},fh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh};var dh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fh),gh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Gu,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new dh(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fh),yh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};yh.prototype.setVisited=function(t){this._isVisited=t},yh.prototype.setInResult=function(t){this._isInResult=t},yh.prototype.isCovered=function(){return this._isCovered},yh.prototype.isCoveredSet=function(){return this._isCoveredSet},yh.prototype.setLabel=function(t){this._label=t},yh.prototype.getLabel=function(){return this._label},yh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},yh.prototype.updateIM=function(t){yu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},yh.prototype.isInResult=function(){return this._isInResult},yh.prototype.isVisited=function(){return this._isVisited},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var mh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new ph(0,ql.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=ql.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==ql.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new ph(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof ph)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i);t._label.getLocation(i)===ql.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=ql.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;if(e===ql.BOUNDARY)n=ql.INTERIOR;else n=ql.BOUNDARY;this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yh),vh=function(){this.nodeMap=new ic,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};vh.prototype.find=function(t){return this.nodeMap.get(t)},vh.prototype.addNode=function(){if(arguments[0]instanceof zl){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof mh){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},vh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},vh.prototype.iterator=function(){return this.nodeMap.values().iterator()},vh.prototype.values=function(){return this.nodeMap.values()},vh.prototype.getBoundaryNodes=function(t){for(var e=new Gu,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===ql.BOUNDARY&&e.add(r)}return e},vh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var wh=function(){},bh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh},wh.isNorthern=function(t){return t===wh.NE||t===wh.NW},wh.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},wh.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},wh.isInHalfPlane=function(t,e){return e===wh.SE?t===wh.SE||t===wh.SW:t===e||t===e+1},wh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Ml("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?wh.NE:wh.SE:e>=0?wh.NW:wh.SW}if(arguments[0]instanceof zl&&arguments[1]instanceof zl){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new Ml("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?wh.NE:wh.SE:r.y>=n.y?wh.NW:wh.SW}},bh.NE.get=function(){return 0},bh.NW.get=function(){return 1},bh.SW.get=function(){return 2},bh.SE.get=function(){return 3},Object.defineProperties(wh,bh);var xh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};xh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:_u.computeOrientation(t._p0,t._p1,this._p1)},xh.prototype.getDy=function(){return this._dy},xh.prototype.getCoordinate=function(){return this._p0},xh.prototype.setNode=function(t){this._node=t},xh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},xh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},xh.prototype.getDirectedCoordinate=function(){return this._p1},xh.prototype.getDx=function(){return this._dx},xh.prototype.getLabel=function(){return this._label},xh.prototype.getEdge=function(){return this._edge},xh.prototype.getQuadrant=function(){return this._quadrant},xh.prototype.getNode=function(){return this._node},xh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},xh.prototype.computeLabel=function(t){},xh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=wh.quadrant(this._dx,this._dy),yu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},xh.prototype.interfaces_=function(){return[Rl]},xh.prototype.getClass=function(){return xh};var _h=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new ph(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new lh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,rh.LEFT)===ql.INTERIOR&&t._label.getLocation(n,rh.RIGHT)===ql.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[rh.LEFT]+"/"+this._depth[rh.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,ql.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,ql.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===rh.LEFT&&(r=-1);var i=rh.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===ql.EXTERIOR&&e===ql.INTERIOR?1:t===ql.INTERIOR&&e===ql.EXTERIOR?-1:0},e}(xh),Eh=function(){};Eh.prototype.createNode=function(t){return new mh(t,null)},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh};var Sh=function(){if(this._edges=new Gu,this._nodes=null,this._edgeEndList=new Gu,0===arguments.length)this._nodes=new vh(new Eh);else if(1===arguments.length){var t=arguments[0];this._nodes=new vh(t)}};Sh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Sh.prototype.find=function(t){return this._nodes.find(t)},Sh.prototype.addNode=function(){if(arguments[0]instanceof mh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof zl){var e=arguments[0];return this._nodes.addNode(e)}},Sh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Sh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Sh.prototype.debugPrintln=function(t){ou.out.println(t)},Sh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===ql.BOUNDARY},Sh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Sh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&_u.computeOrientation(t,e,r)===_u.COLLINEAR&&wh.quadrant(t,e)===wh.quadrant(n,r)},Sh.prototype.getEdgeEnds=function(){return this._edgeEndList},Sh.prototype.debugPrint=function(t){ou.out.print(t)},Sh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Sh.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Sh.prototype.insertEdge=function(t){this._edges.add(t)},Sh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Sh.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new _h(r,!0),o=new _h(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Sh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Sh.prototype.getNodes=function(){return this._nodes.values()},Sh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Sh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ch=function(){this._geometryFactory=null,this._shellList=new Gu;var t=arguments[0];this._geometryFactory=t};Ch.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ch.prototype.computePolygons=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ch.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new lh("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ch.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Gu,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ch.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ch.prototype.buildMaximalEdgeRings=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new gh(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ch.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ch.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ch.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&_u.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},Ch.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return yu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ch.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];Sh.linkResultDirectedEdges(arguments[1]);var n=this.buildMaximalEdgeRings(e),r=new Gu,i=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(i,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var Th=function(){};Th.prototype.getBounds=function(){},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Ih=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Ih.prototype.getItem=function(){return this._item},Ih.prototype.getBounds=function(){return this._bounds},Ih.prototype.interfaces_=function(){return[Th,jl]},Ih.prototype.getClass=function(){return Ih};var Ah=function(){this._size=null,this._items=null,this._size=0,this._items=new Gu,this._items.add(null)};Ah.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ah.prototype.size=function(){return this._size},Ah.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Ah.prototype.clear=function(){this._size=0,this._items.clear()},Ah.prototype.isEmpty=function(){return 0===this._size},Ah.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah};var Ph=function(){};Ph.prototype.visitItem=function(t){},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph};var kh=function(){};kh.prototype.insert=function(t,e){},kh.prototype.remove=function(t,e){},kh.prototype.query=function(){},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var Oh=function(){if(this._childBoundables=new Gu,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Mh={serialVersionUID:{configurable:!0}};Oh.prototype.getLevel=function(){return this._level},Oh.prototype.size=function(){return this._childBoundables.size()},Oh.prototype.getChildBoundables=function(){return this._childBoundables},Oh.prototype.addChildBoundable=function(t){yu.isTrue(null===this._bounds),this._childBoundables.add(t)},Oh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Oh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Oh.prototype.interfaces_=function(){return[Th,jl]},Oh.prototype.getClass=function(){return Oh},Mh.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Oh,Mh);var Nh=function(){};Nh.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Nh.min=function(t){return Nh.sort(t),t.get(0)},Nh.sort=function(t,e){var n=t.toArray();e?uc.sort(n,e):uc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Nh.singletonList=function(t){var e=new Gu;return e.add(t),e};var Lh=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Lh.prototype.expandToQueue=function(t,e){var n=Lh.isComposite(this._boundable1),r=Lh.isComposite(this._boundable2);if(n&&r)return Lh.area(this._boundable1)>Lh.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Ml("neither boundable is composite")},Lh.prototype.isLeaves=function(){return!(Lh.isComposite(this._boundable1)||Lh.isComposite(this._boundable2))},Lh.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Lh.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new Lh(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},Lh.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Lh.prototype.getDistance=function(){return this._distance},Lh.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Lh.prototype.interfaces_=function(){return[Rl]},Lh.prototype.getClass=function(){return Lh},Lh.area=function(t){return t.getBounds().getArea()},Lh.isComposite=function(t){return t instanceof Oh};var Rh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Gu,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];yu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Dh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Rh.prototype.getNodeCapacity=function(){return this._nodeCapacity},Rh.prototype.lastNode=function(t){return t.get(t.size()-1)},Rh.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Oh?t+=this.size(n):n instanceof Ih&&(t+=1)}return t}},Rh.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ih&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Rh.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Gu:t}if(1===arguments.length){for(var e=arguments[0],n=new Gu,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Oh){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Ih?n.add(i.getItem()):yu.shouldNeverReachHere()}return n.size()<=0?null:n}},Rh.prototype.insert=function(t,e){yu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ih(t,e))},Rh.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Gu;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(yu.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Oh?this.boundablesAtLevel(n,a,i):(yu.isTrue(a instanceof Ih),-1===n&&i.add(a))}return null}},Rh.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new Gu;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(Vl(arguments[2],Ph)&&arguments[0]instanceof Object&&arguments[1]instanceof Oh)for(var o=arguments[0],a=arguments[2],s=arguments[1].getChildBoundables(),l=0;l<s.size();l++){var u=s.get(l);t.getIntersectsOp().intersects(u.getBounds(),o)&&(u instanceof Oh?t.query(o,u,a):u instanceof Ih?a.visitItem(u.getItem()):yu.shouldNeverReachHere())}else if(Vl(arguments[2],ju)&&arguments[0]instanceof Object&&arguments[1]instanceof Oh)for(var c=arguments[0],h=arguments[2],p=arguments[1].getChildBoundables(),f=0;f<p.size();f++){var d=p.get(f);t.getIntersectsOp().intersects(d.getBounds(),c)&&(d instanceof Oh?t.query(c,d,h):d instanceof Ih?h.add(d.getItem()):yu.shouldNeverReachHere())}},Rh.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Rh.prototype.getRoot=function(){return this.build(),this._root},Rh.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Oh&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},Rh.prototype.createHigherLevels=function(t,e){yu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Rh.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Oh){var r=this.depth(n);r>t&&(t=r)}}return t+1}},Rh.prototype.createParentBoundables=function(t,e){var n=this;yu.isTrue(!t.isEmpty());var r=new Gu;r.add(this.createNode(e));var i=new Gu(t);Nh.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var a=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(a)}return r},Rh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Rh.prototype.interfaces_=function(){return[jl]},Rh.prototype.getClass=function(){return Rh},Rh.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Dh.IntersectsOp.get=function(){return Fh},Dh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Dh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Rh,Dh);var Fh=function(){},jh=function(){};jh.prototype.distance=function(t,e){},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh};var zh=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){yu.isTrue(t.length>0);for(var n=new Gu,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new Gh(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Gu;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Vl(arguments[2],Ph)&&arguments[0]instanceof Object&&arguments[1]instanceof Oh){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(Vl(arguments[2],ju)&&arguments[0]instanceof Object&&arguments[1]instanceof Oh){var s=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,s,l,u)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){yu.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Gu(t);Nh.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Vl(arguments[0],jh)){var t=arguments[0],n=new Lh(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Lh){var r=arguments[0];return this.nearestNeighbour(r,Nl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Vl(arguments[1],jh)){var i=arguments[0],o=arguments[1],a=new Lh(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof Lh&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],u=null,c=new Ah;for(c.add(s);!c.isEmpty()&&l>0;){var h=c.poll(),p=h.getDistance();if(p>=l)break;h.isLeaves()?(l=p,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new Ih(arguments[0],arguments[1]),g=new Lh(this.getRoot(),d,f);return this.nearestNeighbour(g)[0]}},e.prototype.interfaces_=function(){return[kh,jl]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Gh},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Fl]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Fl]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Rh),Gh=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new su(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oh),Bh=function(){};Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Bh.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Bh.relativeSign(e.x,n.x),i=Bh.relativeSign(e.y,n.y);switch(t){case 0:return Bh.compareValue(r,i);case 1:return Bh.compareValue(i,r);case 2:return Bh.compareValue(i,-r);case 3:return Bh.compareValue(-r,i);case 4:return Bh.compareValue(-r,-i);case 5:return Bh.compareValue(-i,-r);case 6:return Bh.compareValue(-i,r);case 7:return Bh.compareValue(r,-i)}return yu.shouldNeverReachHere("invalid octant value"),0},Bh.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Uh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new zl(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Uh.prototype.getCoordinate=function(){return this.coord},Uh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Uh.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Bh.compare(this._segmentOctant,this.coord,e.coord)},Uh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Uh.prototype.isInterior=function(){return this._isInterior},Uh.prototype.interfaces_=function(){return[Rl]},Uh.prototype.getClass=function(){return Uh};var qh=function(){this._nodeMap=new ic,this._edge=null;var t=arguments[0];this._edge=t};qh.prototype.getSplitCoordinates=function(){var t=new Uu;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},qh.prototype.addCollapsedNodes=function(){var t=new Gu;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},qh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},qh.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Zl(e+1))}},qh.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new zl(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new zl(e.coord))},qh.prototype.iterator=function(){return this._nodeMap.values().iterator()},qh.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},qh.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},qh.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Zl(e[0])),r=i}},qh.prototype.getEdge=function(){return this._edge},qh.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},qh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new zl(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new zl(e.coord)),new Yh(o,this._edge.getData())},qh.prototype.add=function(t,e){var n=new Uh(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(yu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},qh.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new du("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new du("bad split edge end point at "+i)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var Wh=function(){};Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh},Wh.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Ml("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof zl&&arguments[1]instanceof zl){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new Ml("Cannot compute the octant for two identical points "+i);return Wh.octant(a,s)}};var Vh=function(){};Vh.prototype.getCoordinates=function(){},Vh.prototype.size=function(){},Vh.prototype.getCoordinate=function(t){},Vh.prototype.isClosed=function(){},Vh.prototype.setData=function(t){},Vh.prototype.getData=function(){},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh};var Hh=function(){};Hh.prototype.addIntersection=function(t,e){},Hh.prototype.interfaces_=function(){return[Vh]},Hh.prototype.getClass=function(){return Hh};var Yh=function(){this._nodeList=new qh(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Yh.prototype.getCoordinates=function(){return this._pts},Yh.prototype.size=function(){return this._pts.length},Yh.prototype.getCoordinate=function(t){return this._pts[t]},Yh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Yh.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Yh.prototype.setData=function(t){this._data=t},Yh.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Wh.octant(t,e)},Yh.prototype.getData=function(){return this._data},Yh.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new zl(arguments[0].getIntersection(r));this.addIntersection(i,n)}},Yh.prototype.toString=function(){return fu.toLineString(new Gc(this._pts))},Yh.prototype.getNodeList=function(){return this._nodeList},Yh.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},Yh.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Yh.prototype.interfaces_=function(){return[Hh]},Yh.prototype.getClass=function(){return Yh},Yh.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Gu;return Yh.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var Xh=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new zl,this.p1=new zl;else if(1===arguments.length){var t=arguments[0];this.p0=new zl(t.p0),this.p1=new zl(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new zl(e,n),this.p1=new zl(r,i)}},Zh={serialVersionUID:{configurable:!0}};Xh.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Xh.prototype.orientationIndex=function(){if(arguments[0]instanceof Xh){var t=arguments[0],e=_u.orientationIndex(this.p0,this.p1,t.p0),n=_u.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof zl){var r=arguments[0];return _u.orientationIndex(this.p0,this.p1,r)}},Xh.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Xh.prototype.isVertical=function(){return this.p0.x===this.p1.x},Xh.prototype.equals=function(t){if(!(t instanceof Xh))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Xh.prototype.intersection=function(t){var e=new wu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Xh.prototype.project=function(){if(arguments[0]instanceof zl){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new zl(t);var e=this.projectionFactor(t),n=new zl;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Xh){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new Xh(a,s)}},Xh.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Xh.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Xh.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Xh.prototype.distancePerpendicular=function(t){return _u.distancePointLinePerpendicular(t,this.p0,this.p1)},Xh.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Xh.prototype.midPoint=function(){return Xh.midPoint(this.p0,this.p1)},Xh.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?Nl.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Xh.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=Nl.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},Xh.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Xh.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Xh.prototype.getLength=function(){return this.p0.distance(this.p1)},Xh.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Xh.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Xh.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Xh.prototype.lineIntersection=function(t){try{return au.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof iu))throw t}return null},Xh.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Xh.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new zl(n-l,r+s)},Xh.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Xh.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Nl.isNaN(e))&&(e=1),e},Xh.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Xh.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Xh.prototype.distance=function(){if(arguments[0]instanceof Xh){var t=arguments[0];return _u.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof zl){var e=arguments[0];return _u.distancePointLine(e,this.p0,this.p1)}},Xh.prototype.pointAlong=function(t){var e=new zl;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Xh.prototype.hashCode=function(){var t=Nl.doubleToLongBits(this.p0.x);t^=31*Nl.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Nl.doubleToLongBits(this.p1.x);return n^=31*Nl.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Xh.prototype.interfaces_=function(){return[Rl,jl]},Xh.prototype.getClass=function(){return Xh},Xh.midPoint=function(t,e){return new zl((t.x+e.x)/2,(t.y+e.y)/2)},Zh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Xh,Zh);var Kh=function(){this.tempEnv1=new su,this.tempEnv2=new su,this._overlapSeg1=new Xh,this._overlapSeg2=new Xh};Kh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Jh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};Jh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Jh.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},Jh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Jh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Jh.prototype.setId=function(t){this._id=t},Jh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Jh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new su(t,e)}return this._env},Jh.prototype.getEndIndex=function(){return this._end},Jh.prototype.getStartIndex=function(){return this._start},Jh.prototype.getContext=function(){return this._context},Jh.prototype.getId=function(){return this._id},Jh.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Qh=function(){};Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.getChainStartIndices=function(t){var e=0,n=new Gu;n.add(new Zl(e));do{var r=Qh.findChainEnd(t,e);n.add(new Zl(r)),e=r}while(e<t.length-1);return Qh.toIntArray(n)},Qh.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=wh.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||wh.quadrant(t[i-1],t[i])===r);)i++;return i-1},Qh.getChains=function(){if(1===arguments.length)return Qh.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new Gu,r=Qh.getChainStartIndices(t),i=0;i<r.length-1;i++){var o=new Jh(t,r[i],r[i+1],e);n.add(o)}return n}},Qh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $h=function(){};$h.prototype.computeNodes=function(t){},$h.prototype.getNodedSubstrings=function(){},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var tp=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};tp.prototype.setSegmentIntersector=function(t){this._segInt=t},tp.prototype.interfaces_=function(){return[$h]},tp.prototype.getClass=function(){return tp};var ep=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Gu,this._index=new zh,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Yh.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=Qh.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new np(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return np},Object.defineProperties(e,n),e}(tp),np=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kh),rp=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},ip={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};rp.prototype.getEndCapStyle=function(){return this._endCapStyle},rp.prototype.isSingleSided=function(){return this._isSingleSided},rp.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=rp.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=rp.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==rp.JOIN_ROUND&&(this._quadrantSegments=rp.DEFAULT_QUADRANT_SEGMENTS)},rp.prototype.getJoinStyle=function(){return this._joinStyle},rp.prototype.setJoinStyle=function(t){this._joinStyle=t},rp.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},rp.prototype.getSimplifyFactor=function(){return this._simplifyFactor},rp.prototype.getQuadrantSegments=function(){return this._quadrantSegments},rp.prototype.setEndCapStyle=function(t){this._endCapStyle=t},rp.prototype.getMitreLimit=function(){return this._mitreLimit},rp.prototype.setMitreLimit=function(t){this._mitreLimit=t},rp.prototype.setSingleSided=function(t){this._isSingleSided=t},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},ip.CAP_ROUND.get=function(){return 1},ip.CAP_FLAT.get=function(){return 2},ip.CAP_SQUARE.get=function(){return 3},ip.JOIN_ROUND.get=function(){return 1},ip.JOIN_MITRE.get=function(){return 2},ip.JOIN_BEVEL.get=function(){return 3},ip.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},ip.DEFAULT_MITRE_LIMIT.get=function(){return 5},ip.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(rp,ip);var op=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=_u.COUNTERCLOCKWISE,this._inputLine=t||null},ap={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};op.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},op.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=op.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},op.prototype.isShallowConcavity=function(t,e,n,r){return _u.computeOrientation(t,e,n)===this._angleOrientation&&_u.distancePointLine(e,t,n)<r},op.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/op.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},op.prototype.isConcave=function(t,e,n){return _u.computeOrientation(t,e,n)===this._angleOrientation},op.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=_u.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},op.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===op.DELETE;)e++;return e},op.prototype.isShallow=function(t,e,n,r){return _u.distancePointLine(e,t,n)<r},op.prototype.collapseLine=function(){for(var t=new Uu,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==op.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.simplify=function(t,e){return new op(t).simplify(e)},ap.INIT.get=function(){return 0},ap.DELETE.get=function(){return 1},ap.KEEP.get=function(){return 1},ap.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(op,ap);var sp=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Gu},lp={COORDINATE_ARRAY_TYPE:{configurable:!0}};sp.prototype.getCoordinates=function(){return this._ptList.toArray(sp.COORDINATE_ARRAY_TYPE)},sp.prototype.setPrecisionModel=function(t){this._precisionModel=t},sp.prototype.addPt=function(t){var e=new zl(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},sp.prototype.revere=function(){},sp.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},sp.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},sp.prototype.toString=function(){return(new Zc).createLineString(this.getCoordinates()).toString()},sp.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new zl(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},sp.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},lp.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(sp,lp);var up=function(){},cp={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.toDegrees=function(t){return 180*t/Math.PI},up.normalize=function(t){for(;t>Math.PI;)t-=up.PI_TIMES_2;for(;t<=-Math.PI;)t+=up.PI_TIMES_2;return t},up.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},up.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},up.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},up.interiorAngle=function(t,e,n){var r=up.angle(e,t),i=up.angle(e,n);return Math.abs(i-r)},up.normalizePositive=function(t){if(t<0){for(;t<0;)t+=up.PI_TIMES_2;t>=up.PI_TIMES_2&&(t=0)}else{for(;t>=up.PI_TIMES_2;)t-=up.PI_TIMES_2;t<0&&(t=0)}return t},up.angleBetween=function(t,e,n){var r=up.angle(e,t),i=up.angle(e,n);return up.diff(r,i)},up.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},up.toRadians=function(t){return t*Math.PI/180},up.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?up.COUNTERCLOCKWISE:n<0?up.CLOCKWISE:up.NONE},up.angleBetweenOriented=function(t,e,n){var r=up.angle(e,t),i=up.angle(e,n)-r;return i<=-Math.PI?i+up.PI_TIMES_2:i>Math.PI?i-up.PI_TIMES_2:i},cp.PI_TIMES_2.get=function(){return 2*Math.PI},cp.PI_OVER_2.get=function(){return Math.PI/2},cp.PI_OVER_4.get=function(){return Math.PI/4},cp.COUNTERCLOCKWISE.get=function(){return _u.COUNTERCLOCKWISE},cp.CLOCKWISE.get=function(){return _u.CLOCKWISE},cp.NONE.get=function(){return _u.COLLINEAR},Object.defineProperties(up,cp);var hp=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Xh,this._seg1=new Xh,this._offset0=new Xh,this._offset1=new Xh,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new wu,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===rp.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},pp={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};hp.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=_u.computeOrientation(this._s0,this._s1,this._s2),r=n===_u.CLOCKWISE&&this._side===rh.LEFT||n===_u.COUNTERCLOCKWISE&&this._side===rh.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},hp.prototype.addLineEndCap=function(t,e){var n=new Xh(t,e),r=new Xh;this.computeOffsetSegment(n,rh.LEFT,this._distance,r);var i=new Xh;this.computeOffsetSegment(n,rh.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case rp.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,_u.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case rp.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case rp.CAP_SQUARE:var l=new zl;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new zl(r.p1.x+l.x,r.p1.y+l.y),c=new zl(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},hp.prototype.getCoordinates=function(){return this._segList.getCoordinates()},hp.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=au.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof iu))throw t;o=new zl(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},hp.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===_u.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},hp.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*hp.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===rp.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===rp.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},hp.prototype.createSquare=function(t){this._segList.addPt(new zl(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new zl(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new zl(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new zl(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},hp.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},hp.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},hp.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},hp.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},hp.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=up.angle(i,this._seg0.p0),a=up.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=up.normalize(o+a),l=up.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),p=i.y+u*Math.sin(l),f=new zl(h,p),d=new Xh(i,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===rh.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},hp.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===rh.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},hp.prototype.addFilletArc=function(t,e,n,r,i){var o=r===_u.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new zl;u<a;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},hp.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*hp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new zl((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new zl((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},hp.prototype.createCircle=function(t){var e=new zl(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},hp.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},hp.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new sp,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*hp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},hp.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===rp.JOIN_BEVEL||this._bufParams.getJoinStyle()===rp.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,_u.CLOCKWISE,this._distance))},hp.prototype.closeRing=function(){this._segList.closeRing()},hp.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},pp.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},pp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},pp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},pp.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(hp,pp);var fp=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};fp.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&qu.reverse(o),o},fp.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=op.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],rh.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=op.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],rh.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},fp.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===rh.RIGHT&&(r=-r);var i=op.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},fp.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=op.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],rh.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=op.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],rh.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},fp.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case rp.CAP_ROUND:e.createCircle(t);break;case rp.CAP_SQUARE:e.createSquare(t)}},fp.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},fp.prototype.getBufferParameters=function(){return this._bufParams},fp.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},fp.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return fp.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},fp.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=op.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],rh.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=op.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],rh.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},fp.prototype.getSegGen=function(t){return new hp(this._precisionModel,this._bufParams,t)},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},fp.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new zl(t[n]);return e};var dp=function(){this._subgraphs=null,this._seg=new Xh,this._cga=new _u;var t=arguments[0];this._subgraphs=t},gp={DepthSegment:{configurable:!0}};dp.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new Gu,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(Vl(arguments[2],ju)&&arguments[0]instanceof zl&&arguments[1]instanceof _h){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(t._seg.p0=u[c],t._seg.p1=u[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<a.x||t._seg.isHorizontal()||a.y<t._seg.p0.y||a.y>t._seg.p1.y||_u.computeOrientation(t._seg.p0,t._seg.p1,a)===_u.RIGHT)){var h=s.getDepth(rh.LEFT);t._seg.p0.equals(u[c])||(h=s.getDepth(rh.RIGHT));var p=new yp(t._seg,h);l.add(p)}}else if(Vl(arguments[2],ju)&&arguments[0]instanceof zl&&Vl(arguments[1],ju))for(var f=arguments[0],d=arguments[2],g=arguments[1].iterator();g.hasNext();){var y=g.next();y.isForward()&&t.findStabbedSegments(f,y,d)}},dp.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Nh.min(e)._leftDepth},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},gp.DepthSegment.get=function(){return yp},Object.defineProperties(dp,gp);var yp=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Xh(t),this._leftDepth=e};yp.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},yp.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},yp.prototype.toString=function(){return this._upwardSeg.toString()},yp.prototype.interfaces_=function(){return[Rl]},yp.prototype.getClass=function(){return yp};var mp=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};mp.prototype.area=function(){return mp.area(this.p0,this.p1,this.p2)},mp.prototype.signedArea=function(){return mp.signedArea(this.p0,this.p1,this.p2)},mp.prototype.interpolateZ=function(t){if(null===t)throw new Ml("Supplied point is null.");return mp.interpolateZ(t,this.p0,this.p1,this.p2)},mp.prototype.longestSideLength=function(){return mp.longestSideLength(this.p0,this.p1,this.p2)},mp.prototype.isAcute=function(){return mp.isAcute(this.p0,this.p1,this.p2)},mp.prototype.circumcentre=function(){return mp.circumcentre(this.p0,this.p1,this.p2)},mp.prototype.area3D=function(){return mp.area3D(this.p0,this.p1,this.p2)},mp.prototype.centroid=function(){return mp.centroid(this.p0,this.p1,this.p2)},mp.prototype.inCentre=function(){return mp.inCentre(this.p0,this.p1,this.p2)},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},mp.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},mp.det=function(t,e,n,r){return t*r-e*n},mp.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=t.x-i,p=t.y-o,f=(u*h-s*p)/c,d=(-l*h+a*p)/c;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},mp.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},mp.isAcute=function(t,e,n){return!!up.isAcute(t,e,n)&&!!up.isAcute(e,n,t)&&!!up.isAcute(n,t,e)},mp.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*mp.det(o,a,s,l),c=mp.det(a,o*o+a*a,l,s*s+l*l),h=mp.det(o,o*o+a*a,s,s*s+l*l);return new zl(r-c/u,i+h/u)},mp.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new au(t.x+n/2,t.y+r/2,1),o=new au(t.x-r+n/2,t.y+n+r/2,1);return new au(i,o)},mp.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new zl(t.x+i*o,t.y+i*a)},mp.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,p=u*u+c*c+h*h;return Math.sqrt(p)/2},mp.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new zl(r,i)},mp.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new zl(s,l)};var vp=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Gu;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};vp.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,ql.EXTERIOR,ql.INTERIOR)},vp.prototype.addPolygon=function(t){var e=this,n=this._distance,r=rh.LEFT;this._distance<0&&(n=-this._distance,r=rh.RIGHT);var i=t.getExteriorRing(),o=qu.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,ql.EXTERIOR,ql.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var s=t.getInteriorRingN(a),l=qu.removeRepeatedPoints(s.getCoordinates());e._distance>0&&e.isErodedCompletely(s,-e._distance)||e.addPolygonRing(l,n,rh.opposite(r),ql.INTERIOR,ql.EXTERIOR)}},vp.prototype.isTriangleErodedCompletely=function(t,e){var n=new mp(t[0],t[1],t[2]),r=n.inCentre();return _u.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},vp.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=qu.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,ql.EXTERIOR,ql.INTERIOR)},vp.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Yh(t,new ph(0,ql.BOUNDARY,e,n));this._curveList.add(r)},vp.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},vp.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<Nc.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=Nc.MINIMUM_VALID_SIZE&&_u.isCCW(t)&&(o=i,a=r,n=rh.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},vp.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Oc?this.addPolygon(t):t instanceof Ic?this.addLineString(t):t instanceof Pc?this.addPoint(t):(t instanceof Mc||t instanceof gc||t instanceof Lc||t instanceof dc)&&this.addCollection(t)},vp.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},vp.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var wp=function(){};wp.prototype.locate=function(t){},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp};var bp=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};bp.prototype.next=function(){if(this._atStart)return this._atStart=!1,bp.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new zu;var t=this._parent.getGeometryN(this._index++);return t instanceof dc?(this._subcollectionIterator=new bp(t),this._subcollectionIterator.next()):t},bp.prototype.remove=function(){throw new Error(this.getClass().getName())},bp.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},bp.prototype.interfaces_=function(){return[Fu]},bp.prototype.getClass=function(){return bp},bp.isAtomic=function(t){return!(t instanceof dc)};var xp=function(){this._geom=null;var t=arguments[0];this._geom=t};xp.prototype.locate=function(t){return xp.locate(t,this._geom)},xp.prototype.interfaces_=function(){return[wp]},xp.prototype.getClass=function(){return xp},xp.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&_u.isPointInRing(t,e.getCoordinates())},xp.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!xp.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(xp.isPointInRing(t,i))return!1}return!0},xp.containsPoint=function(t,e){if(e instanceof Oc)return xp.containsPointInPolygon(t,e);if(e instanceof dc)for(var n=new bp(e);n.hasNext();){var r=n.next();if(r!==e&&xp.containsPoint(t,r))return!0}return!1},xp.locate=function(t,e){return e.isEmpty()?ql.EXTERIOR:xp.containsPoint(t,e)?ql.INTERIOR:ql.EXTERIOR};var _p=function(){this._edgeMap=new ic,this._edgeList=null,this._ptInAreaLocation=[ql.NONE,ql.NONE]};_p.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},_p.prototype.propagateSideLabels=function(t){for(var e=ql.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,rh.LEFT)!==ql.NONE&&(e=r.getLocation(t,rh.LEFT))}if(e===ql.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,rh.ON)===ql.NONE&&s.setLocation(t,rh.ON,i),s.isArea(t)){var l=s.getLocation(t,rh.LEFT),u=s.getLocation(t,rh.RIGHT);if(u!==ql.NONE){if(u!==i)throw new lh("side location conflict",a.getCoordinate());l===ql.NONE&&yu.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else yu.isTrue(s.getLocation(t,rh.LEFT)===ql.NONE,"found single null side"),s.setLocation(t,rh.RIGHT,i),s.setLocation(t,rh.LEFT,i)}}},_p.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},_p.prototype.print=function(t){ou.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},_p.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},_p.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,rh.LEFT);yu.isTrue(r!==ql.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();yu.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,rh.LEFT),l=a.getLocation(t,rh.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},_p.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},_p.prototype.iterator=function(){return this.getEdges().iterator()},_p.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Gu(this._edgeMap.values())),this._edgeList},_p.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===ql.NONE&&(this._ptInAreaLocation[t]=xp.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},_p.prototype.toString=function(){var t=new Xl;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},_p.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},_p.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===ql.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=ql.NONE;if(e[l])u=ql.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},_p.prototype.getDegree=function(){return this._edgeMap.size()},_p.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p};var Ep=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),a=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!a.isInResult())continue;n=a,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new lh("no outgoing dirEdge found",this.getCoordinate());yu.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return wh.isNorthern(i)&&wh.isNorthern(o)?n:wh.isNorthern(i)||wh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(yu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){ou.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Gu;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(rh.LEFT),r=t.getDepth(rh.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new lh("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(rh.RIGHT,a),a=l.getDepth(rh.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var a=e._resultAreaEdgeList.get(o),s=a.getSym();switch(null===n&&a.getEdgeRing()===t&&(n=a),i){case e._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;r=s,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(a.getEdgeRing()!==t)continue;r.setNextMin(a),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(yu.isTrue(null!==n,"found null for first outgoing dirEdge"),yu.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=ql.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=ql.INTERIOR;break}if(r.isInResult()){t=ql.EXTERIOR;break}}}if(t===ql.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===ql.INTERIOR):(a.isInResult()&&(i=ql.EXTERIOR),s.isInResult()&&(i=ql.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new ph(ql.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==ql.INTERIOR&&o!==ql.BOUNDARY||this._label.setLocation(i,ql.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_p),Sp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new mh(t,new Ep)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Eh),Cp=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Cp.prototype.compareTo=function(t){var e=t;return Cp.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Cp.prototype.interfaces_=function(){return[Rl]},Cp.prototype.getClass=function(){return Cp},Cp.orientation=function(t){return 1===qu.increasingDirection(t)},Cp.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,p=(u+=o)===s;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Tp=function(){this._edges=new Gu,this._ocaMap=new ic};Tp.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Tp.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Tp.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Tp.prototype.iterator=function(){return this._edges.iterator()},Tp.prototype.getEdges=function(){return this._edges},Tp.prototype.get=function(t){return this._edges.get(t)},Tp.prototype.findEqualEdge=function(t){var e=new Cp(t.getCoordinates());return this._ocaMap.get(e)},Tp.prototype.add=function(t){this._edges.add(t);var e=new Cp(t.getCoordinates());this._ocaMap.put(e,t)},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp};var Ip=function(){};Ip.prototype.processIntersections=function(t,e,n,r){},Ip.prototype.isDone=function(){},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Ap=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Ap.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Ap.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Ap.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ap.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ap.prototype.getLineIntersector=function(){return this._li},Ap.prototype.hasProperIntersection=function(){return this._hasProper},Ap.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Ap.prototype.hasIntersection=function(){return this._hasIntersection},Ap.prototype.isDone=function(){return!1},Ap.prototype.hasInteriorIntersection=function(){return this._hasInterior},Ap.prototype.interfaces_=function(){return[Ip]},Ap.prototype.getClass=function(){return Ap},Ap.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Pp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new zl(t),this.segmentIndex=e,this.dist=n};Pp.prototype.getSegmentIndex=function(){return this.segmentIndex},Pp.prototype.getCoordinate=function(){return this.coord},Pp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Pp.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Pp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Pp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Pp.prototype.getDistance=function(){return this.dist},Pp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Pp.prototype.interfaces_=function(){return[Rl]},Pp.prototype.getClass=function(){return Pp};var kp=function(){this._nodeMap=new ic,this.edge=null;var t=arguments[0];this.edge=t};kp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},kp.prototype.iterator=function(){return this._nodeMap.values().iterator()},kp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},kp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},kp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new zl(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new Rp(o,new ph(this.edge._label))},kp.prototype.add=function(t,e,n){var r=new Pp(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},kp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var Op=function(){};Op.prototype.getChainStartIndices=function(t){var e=0,n=new Gu;n.add(new Zl(e));do{var r=this.findChainEnd(t,e);n.add(new Zl(r)),e=r}while(e<t.length-1);return Op.toIntArray(n)},Op.prototype.findChainEnd=function(t,e){for(var n=wh.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&wh.quadrant(t[r-1],t[r])===n;)r++;return r-1},Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Mp=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new su,this.env2=new su;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Op;this.startIndex=e.getChainStartIndices(this.pts)};Mp.prototype.getCoordinates=function(){return this.pts},Mp.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Mp.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Mp.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],p=a.pts[s],f=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+l)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,u),g<l&&this.computeIntersectsForChain(i,d,a,g,l,u)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,u),g<l&&this.computeIntersectsForChain(d,o,a,g,l,u))}},Mp.prototype.getStartIndexes=function(){return this.startIndex},Mp.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp};var Np=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Lp={NULL_VALUE:{configurable:!0}};Np.prototype.getDepth=function(t,e){return this._depth[t][e]},Np.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Np.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Np.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Np.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===Np.NULL_VALUE}},Np.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},Np.prototype.getDelta=function(t){return this._depth[t][rh.RIGHT]-this._depth[t][rh.LEFT]},Np.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?ql.EXTERIOR:ql.INTERIOR},Np.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Np.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==ql.EXTERIOR&&i!==ql.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=Np.depthAtLocation(i):t._depth[n][r]+=Np.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],a=arguments[1];arguments[2]===ql.INTERIOR&&this._depth[o][a]++}},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Np.depthAtLocation=function(t){return t===ql.EXTERIOR?0:t===ql.INTERIOR?1:Np.NULL_VALUE},Lp.NULL_VALUE.get=function(){return-1},Object.defineProperties(Np,Lp);var Rp=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new kp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Np,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,ph.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Mp(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new su;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new zl(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new Xl;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,rh.ON),e.getLocation(1,rh.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,rh.LEFT),e.getLocation(1,rh.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,rh.RIGHT),e.getLocation(1,rh.RIGHT),2))},e}(yh),Dp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Tp,this._bufParams=t||null};Dp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Dp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new ph(t.getLabel())).flip(),n.merge(r);var i=Dp.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Dp.depthDelta(t.getLabel()))},Dp.prototype.buildSubgraphs=function(t,e){for(var n=new Gu,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new dp(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Dp.prototype.createSubgraphs=function(t){for(var e=new Gu,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new ch;i.create(r),e.add(i)}}return Nh.sort(e,Nh.reverseOrder()),e},Dp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Dp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new ep,n=new wu;return n.setPrecisionModel(t),e.setSegmentIntersector(new Ap(n)),e},Dp.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new fp(n,this._bufParams),i=new vp(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Sh(new Sp),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ch(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},Dp.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new Rp(i.getCoordinates(),new ph(a));this.insertUniqueEdge(s)}}},Dp.prototype.setNoder=function(t){this._workingNoder=t},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.depthDelta=function(t){var e=t.getLocation(0,rh.LEFT),n=t.getLocation(0,rh.RIGHT);return e===ql.INTERIOR&&n===ql.EXTERIOR?1:e===ql.EXTERIOR&&n===ql.INTERIOR?-1:0},Dp.convertSegStrings=function(t){for(var e=new Zc,n=new Gu;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var Fp=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Fp.prototype.rescale=function(){var t=this;if(Vl(arguments[0],Ru))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],i=0;i<r.length;i++)r[i].x=r[i].x/t._scaleFactor+t._offsetX,r[i].y=r[i].y/t._scaleFactor+t._offsetY;2===r.length&&r[0].equals2D(r[1])&&ou.out.println(r)}},Fp.prototype.scale=function(){var t=this;if(Vl(arguments[0],Ru)){for(var e=arguments[0],n=new Gu,r=e.iterator();r.hasNext();){var i=r.next();n.add(new Yh(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new zl(Math.round((o[s].x-t._offsetX)*t._scaleFactor),Math.round((o[s].y-t._offsetY)*t._scaleFactor),o[s].z);return qu.removeRepeatedPoints(a)}},Fp.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Fp.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Fp.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Fp.prototype.interfaces_=function(){return[$h]},Fp.prototype.getClass=function(){return Fp};var jp=function(){this._li=new wu,this._segStrings=null;var t=arguments[0];this._segStrings=t},zp={fact:{configurable:!0}};jp.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next().getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var r=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var o=i.next().getCoordinates(),a=1;a<o.length-1;a++)if(o[a].equals(r))throw new du("found endpt/interior pt intersection at index "+a+" :pt "+r)},jp.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=p.getCoordinates()[f],m=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new du("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},jp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},jp.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},jp.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},jp.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new du("found non-noded collapse at "+jp.fact.createLineString([t,e,n]))},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},zp.fact.get=function(){return new Zc},Object.defineProperties(jp,zp);var Gp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Ml("Scale factor must be non-zero");1!==e&&(this._pt=new zl(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new zl,this._p1Scaled=new zl),this.initCorners(this._pt)},Bp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Gp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return yu.isTrue(!(a&&s),"Found bad envelope test"),s},Gp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new zl(this._maxx,this._maxy),this._corner[1]=new zl(this._minx,this._maxy),this._corner[2]=new zl(this._minx,this._miny),this._corner[3]=new zl(this._maxx,this._miny)},Gp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Gp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Gp.prototype.getCoordinate=function(){return this._originalPt},Gp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Gp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Gp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new su(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Gp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Gp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Gp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Bp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Gp,Bp);var Up=function(){this.tempEnv1=new su,this.selectedSegment=new Xh};Up.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up};var qp=function(){this._index=null;var t=arguments[0];this._index=t},Wp={HotPixelSnapAction:{configurable:!0}};qp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new Vp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ph]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp},Wp.HotPixelSnapAction.get=function(){return Vp},Object.defineProperties(qp,Wp);var Vp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Up),Hp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Gu};Hp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Hp.prototype.isDone=function(){return!1},Hp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Hp.prototype.interfaces_=function(){return[Ip]},Hp.prototype.getClass=function(){return Hp};var Yp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new wu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Yp.prototype.checkCorrectness=function(t){var e=Yh.getNodedSubstrings(t),n=new jp(e);try{n.checkValid()}catch(t){if(!(t instanceof ru))throw t;t.printStackTrace()}},Yp.prototype.getNodedSubstrings=function(){return Yh.getNodedSubstrings(this._nodedSegStrings)},Yp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Yp.prototype.findInteriorIntersections=function(t,e){var n=new Hp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Yp.prototype.computeVertexSnaps=function(){var t=this;if(Vl(arguments[0],Ru))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof Yh)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length;o++){var a=new Gp(i[o],t._scaleFactor,t._li);t._pointSnapper.snap(a,r,o)&&r.addIntersection(i[o],o)}},Yp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new ep,this._pointSnapper=new qp(this._noder.getIndex()),this.snapRound(t,this._li)},Yp.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new Gp(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},Yp.prototype.interfaces_=function(){return[$h]},Yp.prototype.getClass=function(){return Yp};var Xp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new rp,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Zp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Xp.prototype.bufferFixedPrecision=function(t){var e=new Fp(new Yp(new Vc(1)),t.getScale()),n=new Dp(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Xp.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Xp.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof lh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Xp.precisionScaleFactor(this._argGeom,this._distance,n),i=new Vc(r);this.bufferFixedPrecision(i)}},Xp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Vc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Xp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Xp.prototype.bufferOriginalPrecision=function(){try{var t=new Dp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof du))throw t;this._saveException=t}},Xp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Xp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Xp(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Cu&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new Xp(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof rp&&arguments[0]instanceof Cu&&"number"==typeof arguments[1]){var i=arguments[1];return new Xp(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new Xp(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},Xp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Hl.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Zp.CAP_ROUND.get=function(){return rp.CAP_ROUND},Zp.CAP_BUTT.get=function(){return rp.CAP_FLAT},Zp.CAP_FLAT.get=function(){return rp.CAP_FLAT},Zp.CAP_SQUARE.get=function(){return rp.CAP_SQUARE},Zp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Xp,Zp);var Kp=function(){this._pt=[new zl,new zl],this._distance=Nl.NaN,this._isNull=!0};Kp.prototype.getCoordinates=function(){return this._pt},Kp.prototype.getCoordinate=function(t){return this._pt[t]},Kp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Kp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Kp.prototype.getDistance=function(){return this._distance},Kp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var Jp=function(){};Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.computeDistance=function(){if(arguments[2]instanceof Kp&&arguments[0]instanceof Ic&&arguments[1]instanceof zl)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new Xh,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof Kp&&arguments[0]instanceof Oc&&arguments[1]instanceof zl){var a=arguments[0],s=arguments[1],l=arguments[2];Jp.computeDistance(a.getExteriorRing(),s,l);for(var u=0;u<a.getNumInteriorRing();u++)Jp.computeDistance(a.getInteriorRingN(u),s,l)}else if(arguments[2]instanceof Kp&&arguments[0]instanceof Cu&&arguments[1]instanceof zl){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof Ic)Jp.computeDistance(c,h,p);else if(c instanceof Oc)Jp.computeDistance(c,h,p);else if(c instanceof dc)for(var f=c,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);Jp.computeDistance(g,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof Kp&&arguments[0]instanceof Xh&&arguments[1]instanceof zl){var y=arguments[1],m=arguments[2],v=arguments[0].closestPoint(y);m.setMinimum(v,y)}};var Qp=function(t){this._maxPtDist=new Kp,this._inputGeom=t||null},$p={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Qp.prototype.computeMaxMidpointDistance=function(t){var e=new ef(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Qp.prototype.computeMaxVertexDistance=function(t){var e=new tf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Qp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Qp.prototype.getDistancePoints=function(){return this._maxPtDist},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},$p.MaxPointDistanceFilter.get=function(){return tf},$p.MaxMidpointDistanceFilter.get=function(){return ef},Object.defineProperties(Qp,$p);var tf=function(t){this._maxPtDist=new Kp,this._minPtDist=new Kp,this._geom=t||null};tf.prototype.filter=function(t){this._minPtDist.initialize(),Jp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},tf.prototype.getMaxPointDistance=function(){return this._maxPtDist},tf.prototype.interfaces_=function(){return[Au]},tf.prototype.getClass=function(){return tf};var ef=function(t){this._maxPtDist=new Kp,this._minPtDist=new Kp,this._geom=t||null};ef.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new zl((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Jp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ef.prototype.isDone=function(){return!1},ef.prototype.isGeometryChanged=function(){return!1},ef.prototype.getMaxPointDistance=function(){return this._maxPtDist},ef.prototype.interfaces_=function(){return[fc]},ef.prototype.getClass=function(){return ef};var nf=function(t){this._comps=t||null};nf.prototype.filter=function(t){t instanceof Oc&&this._comps.add(t)},nf.prototype.interfaces_=function(){return[pc]},nf.prototype.getClass=function(){return nf},nf.getPolygons=function(){if(1===arguments.length)return nf.getPolygons(arguments[0],new Gu);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof Oc?e.add(t):t instanceof dc&&t.apply(new nf(e)),e}};var rf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};rf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Nc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Ic&&this._lines.add(t)},rf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},rf.prototype.interfaces_=function(){return[Su]},rf.prototype.getClass=function(){return rf},rf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(rf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(rf.getLines(e,n))}},rf.getLines=function(){if(1===arguments.length)return rf.getLines(arguments[0],!1);if(2===arguments.length){if(Vl(arguments[0],Ru)&&Vl(arguments[1],Ru)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();rf.getLines(n,t)}return t}if(arguments[0]instanceof Cu&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=new Gu;return r.apply(new rf(o,i)),o}if(arguments[0]instanceof Cu&&Vl(arguments[1],Ru)){var a=arguments[0],s=arguments[1];return a instanceof Ic?s.add(a):a.apply(new rf(s)),s}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Vl(arguments[0],Ru)&&Vl(arguments[1],Ru)){for(var l=arguments[1],u=arguments[2],c=arguments[0].iterator();c.hasNext();){var h=c.next();rf.getLines(h,l,u)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Cu&&Vl(arguments[1],Ru)){var p=arguments[1],f=arguments[2];return arguments[0].apply(new rf(p,f)),p}}};var of=function(){if(this._boundaryRule=Pu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Ml("Rule must be non-null");this._boundaryRule=t}};of.prototype.locateInternal=function(){if(arguments[0]instanceof zl&&arguments[1]instanceof Oc){var t=arguments[0],e=arguments[1];if(e.isEmpty())return ql.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===ql.EXTERIOR)return ql.EXTERIOR;if(r===ql.BOUNDARY)return ql.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===ql.INTERIOR)return ql.EXTERIOR;if(a===ql.BOUNDARY)return ql.BOUNDARY}return ql.INTERIOR}if(arguments[0]instanceof zl&&arguments[1]instanceof Ic){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return ql.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?_u.isOnLine(s,u)?ql.INTERIOR:ql.EXTERIOR:ql.BOUNDARY}if(arguments[0]instanceof zl&&arguments[1]instanceof Pc){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?ql.INTERIOR:ql.EXTERIOR}},of.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?_u.locatePointInRing(t,e.getCoordinates()):ql.EXTERIOR},of.prototype.intersects=function(t,e){return this.locate(t,e)!==ql.EXTERIOR},of.prototype.updateLocationInfo=function(t){t===ql.INTERIOR&&(this._isIn=!0),t===ql.BOUNDARY&&this._numBoundaries++},of.prototype.computeLocation=function(t,e){var n=this;if(e instanceof Pc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Ic)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Oc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof gc)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof Lc)for(var a=e,s=0;s<a.getNumGeometries();s++){var l=a.getGeometryN(s);n.updateLocationInfo(n.locateInternal(t,l))}else if(e instanceof dc)for(var u=new bp(e);u.hasNext();){var c=u.next();c!==e&&n.computeLocation(t,c)}},of.prototype.locate=function(t,e){return e.isEmpty()?ql.EXTERIOR:e instanceof Ic||e instanceof Oc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?ql.BOUNDARY:this._numBoundaries>0||this._isIn?ql.INTERIOR:ql.EXTERIOR)},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var af=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},sf={INSIDE_AREA:{configurable:!0}};af.prototype.isInsideArea=function(){return this._segIndex===af.INSIDE_AREA},af.prototype.getCoordinate=function(){return this._pt},af.prototype.getGeometryComponent=function(){return this._component},af.prototype.getSegmentIndex=function(){return this._segIndex},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},sf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(af,sf);var lf=function(t){this._pts=t||null};lf.prototype.filter=function(t){t instanceof Pc&&this._pts.add(t)},lf.prototype.interfaces_=function(){return[pc]},lf.prototype.getClass=function(){return lf},lf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Pc?Nh.singletonList(t):lf.getPoints(t,new Gu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Pc?n.add(e):e instanceof dc&&e.apply(new lf(n)),n}};var uf=function(){this._locations=null;var t=arguments[0];this._locations=t};uf.prototype.filter=function(t){(t instanceof Pc||t instanceof Ic||t instanceof Oc)&&this._locations.add(new af(t,0,t.getCoordinate()))},uf.prototype.interfaces_=function(){return[pc]},uf.prototype.getClass=function(){return uf},uf.getLocations=function(t){var e=new Gu;return t.apply(new uf(e)),e};var cf=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new of,this._minDistanceLocation=null,this._minDistance=Nl.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};cf.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=nf.getPolygons(this._geom[n]);if(o.size()>0){var a=uf.getLocations(this._geom[i]);if(this.computeContainmentDistance(a,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Vl(arguments[0],ju)&&Vl(arguments[1],ju)){for(var s=arguments[0],l=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var h=s.get(c),p=0;p<l.size();p++)if(t.computeContainmentDistance(h,l.get(p),u),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof af&&arguments[1]instanceof Oc){var f=arguments[0],d=arguments[1],g=arguments[2],y=f.getCoordinate();if(ql.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=f,g[1]=new af(d,y),null}},cf.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},cf.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=rf.getLines(this._geom[0]),n=rf.getLines(this._geom[1]),r=lf.getPoints(this._geom[0]),i=lf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},cf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},cf.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},cf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},cf.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ic&&arguments[1]instanceof Pc){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),a=0;a<i.length-1;a++){var s=_u.distancePointLine(o,i[a],i[a+1]);if(s<t._minDistance){t._minDistance=s;var l=new Xh(i[a],i[a+1]).closestPoint(o);r[0]=new af(e,a,l),r[1]=new af(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ic&&arguments[1]instanceof Ic){var u=arguments[0],c=arguments[1],h=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var p=u.getCoordinates(),f=c.getCoordinates(),d=0;d<p.length-1;d++)for(var g=0;g<f.length-1;g++){var y=_u.distanceLineLine(p[d],p[d+1],f[g],f[g+1]);if(y<t._minDistance){t._minDistance=y;var m=new Xh(p[d],p[d+1]),v=new Xh(f[g],f[g+1]),w=m.closestPoints(v);h[0]=new af(u,d,w[0]),h[1]=new af(c,g,w[1])}if(t._minDistance<=t._terminateDistance)return null}}},cf.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a),l=o.getCoordinate().distance(s.getCoordinate());if(l<r._minDistance&&(r._minDistance=l,n[0]=new af(o,0,o.getCoordinate()),n[1]=new af(s,0,s.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},cf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Ml("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},cf.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},cf.distance=function(t,e){return new cf(t,e).distance()},cf.isWithinDistance=function(t,e,n){return new cf(t,e,n).distance()<=n},cf.nearestPoints=function(t,e){return new cf(t,e).nearestPoints()};var hf=function(){this._pt=[new zl,new zl],this._distance=Nl.NaN,this._isNull=!0};hf.prototype.getCoordinates=function(){return this._pt},hf.prototype.getCoordinate=function(t){return this._pt[t]},hf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},hf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},hf.prototype.toString=function(){return fu.toLineString(this._pt[0],this._pt[1])},hf.prototype.getDistance=function(){return this._distance},hf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf};var pf=function(){};pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf},pf.computeDistance=function(){if(arguments[2]instanceof hf&&arguments[0]instanceof Ic&&arguments[1]instanceof zl)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Xh,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof hf&&arguments[0]instanceof Oc&&arguments[1]instanceof zl){var s=arguments[0],l=arguments[1],u=arguments[2];pf.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)pf.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof hf&&arguments[0]instanceof Cu&&arguments[1]instanceof zl){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Ic)pf.computeDistance(h,p,f);else if(h instanceof Oc)pf.computeDistance(h,p,f);else if(h instanceof dc)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);pf.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof hf&&arguments[0]instanceof Xh&&arguments[1]instanceof zl){var m=arguments[1],v=arguments[2],w=arguments[0].closestPoint(m);v.setMinimum(w,m)}};var ff=function(){this._g0=null,this._g1=null,this._ptDist=new hf,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},df={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ff.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},ff.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Ml("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},ff.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},ff.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},ff.prototype.computeOrientedDistance=function(t,e,n){var r=new gf(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new yf(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},ff.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.distance=function(){if(2===arguments.length)return new ff(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new ff(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},df.MaxPointDistanceFilter.get=function(){return gf},df.MaxDensifiedByFractionDistanceFilter.get=function(){return yf},Object.defineProperties(ff,df);var gf=function(){this._maxPtDist=new hf,this._minPtDist=new hf,this._euclideanDist=new pf,this._geom=null;var t=arguments[0];this._geom=t};gf.prototype.filter=function(t){this._minPtDist.initialize(),pf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},gf.prototype.getMaxPointDistance=function(){return this._maxPtDist},gf.prototype.interfaces_=function(){return[Au]},gf.prototype.getClass=function(){return gf};var yf=function(){this._maxPtDist=new hf,this._minPtDist=new hf,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};yf.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,a=(i.y-r.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var l=r.x+s*o,u=r.y+s*a,c=new zl(l,u);n._minPtDist.initialize(),pf.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},yf.prototype.isDone=function(){return!1},yf.prototype.isGeometryChanged=function(){return!1},yf.prototype.getMaxPointDistance=function(){return this._maxPtDist},yf.prototype.interfaces_=function(){return[fc]},yf.prototype.getClass=function(){return yf};var mf=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},vf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};mf.prototype.checkMaximumDistance=function(t,e,n){var r=new ff(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+fu.toLineString(i[0],i[1])+")"}},mf.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=mf.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),mf.VERBOSE&&ou.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},mf.prototype.checkNegativeValid=function(){if(!(this._input instanceof Oc||this._input instanceof Lc||this._input instanceof dc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},mf.prototype.getErrorIndicator=function(){return this._errorIndicator},mf.prototype.checkMinimumDistance=function(t,e,n){var r=new cf(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+fu.toLineString(i[0],i[1])+" )"}},mf.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},mf.prototype.getErrorLocation=function(){return this._errorLocation},mf.prototype.getPolygonLines=function(t){for(var e=new Gu,n=new rf(e),r=nf.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},mf.prototype.getErrorMessage=function(){return this._errMsg},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},vf.VERBOSE.get=function(){return!1},vf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(mf,vf);var wf=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},bf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};wf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},wf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*wf.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new su(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new su(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},wf.prototype.checkDistance=function(){var t=new mf(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},wf.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},wf.prototype.checkPolygonal=function(){this._result instanceof Oc||this._result instanceof Lc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},wf.prototype.getErrorIndicator=function(){return this._errorIndicator},wf.prototype.getErrorLocation=function(){return this._errorLocation},wf.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},wf.prototype.report=function(t){if(!wf.VERBOSE)return null;ou.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},wf.prototype.getErrorMessage=function(){return this._errorMsg},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.isValidMsg=function(t,e,n){var r=new wf(t,e,n);return r.isValid()?null:r.getErrorMessage()},wf.isValid=function(t,e,n){return!!new wf(t,e,n).isValid()},bf.VERBOSE.get=function(){return!1},bf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(wf,bf);var xf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};xf.prototype.getCoordinates=function(){return this._pts},xf.prototype.size=function(){return this._pts.length},xf.prototype.getCoordinate=function(t){return this._pts[t]},xf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},xf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Wh.octant(this.getCoordinate(t),this.getCoordinate(t+1))},xf.prototype.setData=function(t){this._data=t},xf.prototype.getData=function(){return this._data},xf.prototype.toString=function(){return fu.toLineString(new Gc(this._pts))},xf.prototype.interfaces_=function(){return[Vh]},xf.prototype.getClass=function(){return xf};var _f=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Gu,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};_f.prototype.getInteriorIntersection=function(){return this._interiorIntersection},_f.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},_f.prototype.getIntersectionSegments=function(){return this._intSegments},_f.prototype.count=function(){return this._intersectionCount},_f.prototype.getIntersections=function(){return this._intersections},_f.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},_f.prototype.setKeepIntersections=function(t){this._keepIntersections=t},_f.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},_f.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},_f.prototype.hasIntersection=function(){return null!==this._interiorIntersection},_f.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},_f.prototype.interfaces_=function(){return[Ip]},_f.prototype.getClass=function(){return _f},_f.createAllIntersectionsFinder=function(t){var e=new _f(t);return e.setFindAllIntersections(!0),e},_f.createAnyIntersectionFinder=function(t){return new _f(t)},_f.createIntersectionCounter=function(t){var e=new _f(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ef=function(){this._li=new wu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ef.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ef.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ef.prototype.isValid=function(){return this.execute(),this._isValid},Ef.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ef.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new _f(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new ep;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ef.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new lh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ef.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+fu.toLineString(t[0],t[1])+" and "+fu.toLineString(t[2],t[3])},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Ef.computeIntersections=function(t){var e=new Ef(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Sf=function t(){this._nv=null;var e=arguments[0];this._nv=new Ef(t.toSegmentStrings(e))};Sf.prototype.checkValid=function(){this._nv.checkValid()},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.toSegmentStrings=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new xf(r.getCoordinates(),r))}return e},Sf.checkValid=function(t){new Sf(t).checkValid()};var Cf=function(t){this._mapOp=t};Cf.prototype.map=function(t){for(var e=new Gu,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Zc.toGeometryArray(e))},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Cf.map=function(t,e){return new Cf(e).map(t)};var Tf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Gu,this._resultLineList=new Gu;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Tf.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},Tf.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Tf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Tf.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ad.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Tf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Tf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Tf.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Tf.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(yu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ad.isResultOfOp(r,e)&&e===ad.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf};var If=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Gu;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};If.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},If.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ad.INTERSECTION)){var r=n.getLabel();ad.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},If.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If};var Af=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Af.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Af.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof Nc&&!r.isEmpty()||(n=!1);for(var i=new Gu,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Nc||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Gu;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Af.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Af.prototype.getInputGeometry=function(){return this._inputGeom},Af.prototype.transformMultiLineString=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Af.prototype.transformCoordinates=function(t,e){return this.copy(t)},Af.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Af.prototype.transformMultiPoint=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Af.prototype.transformMultiPolygon=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Af.prototype.copy=function(t){return t.copy()},Af.prototype.transformGeometryCollection=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Zc.toGeometryArray(n)):this._factory.buildGeometry(n)},Af.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Pc)return this.transformPoint(t,null);if(t instanceof Mc)return this.transformMultiPoint(t,null);if(t instanceof Nc)return this.transformLinearRing(t,null);if(t instanceof Ic)return this.transformLineString(t,null);if(t instanceof gc)return this.transformMultiLineString(t,null);if(t instanceof Oc)return this.transformPolygon(t,null);if(t instanceof Lc)return this.transformMultiPolygon(t,null);if(t instanceof dc)return this.transformGeometryCollection(t,null);throw new Ml("Unknown Geometry subtype: "+t.getClass().getName())},Af.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af};var Pf=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Xh,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ic&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Pf.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new zl(o)),0===r&&this._isClosed&&t.set(t.size()-1,new zl(o)))}},Pf.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Pf.prototype.snapTo=function(t){var e=new Uu(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Pf.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new zl(i),!1)}},Pf.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=Nl.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<r&&(r=a,i=o)}return i},Pf.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},Pf.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var kf=function(t){this._srcGeom=t||null},Of={SNAP_PRECISION_FACTOR:{configurable:!0}};kf.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Mf(e,n).transform(this._srcGeom)},kf.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Mf(t,n,!0).transform(this._srcGeom),i=r;return e&&Vl(i,kc)&&(i=r.buffer(0)),i},kf.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},kf.prototype.extractTargetCoordinates=function(t){for(var e=new sc,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},kf.prototype.computeMinimumSegmentLength=function(t){for(var e=Nl.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.snap=function(t,e,n){var r=new Array(2).fill(null),i=new kf(t);r[0]=i.snapTo(e,n);var o=new kf(e);return r[1]=o.snapTo(r[0],n),r},kf.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=kf.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Vc.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(kf.computeOverlaySnapTolerance(i),kf.computeOverlaySnapTolerance(o))}},kf.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*kf.SNAP_PRECISION_FACTOR},kf.snapToSelf=function(t,e,n){return new kf(t).snapToSelf(e,n)},Of.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(kf,Of);var Mf=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Pf(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Af),Nf=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Nf.prototype.getCommon=function(){return Nl.longBitsToDouble(this._commonBits)},Nf.prototype.add=function(t){var e=Nl.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Nf.signExpBits(this._commonBits),this._isFirst=!1,null):Nf.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Nf.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Nf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Nf.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Nl.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Nl.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Nf.signExpBits=function(t){return t>>52},Nf.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Nf.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Nf.getBit(t,r)!==Nf.getBit(e,r))return n;n++}return 52};var Lf=function(){this._commonCoord=null,this._ccFilter=new Df},Rf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Lf.prototype.addCommonBits=function(t){var e=new Ff(this._commonCoord);t.apply(e),t.geometryChanged()},Lf.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new zl(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Ff(e);return t.apply(n),t.geometryChanged(),t},Lf.prototype.getCommonCoordinate=function(){return this._commonCoord},Lf.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf},Rf.CommonCoordinateFilter.get=function(){return Df},Rf.Translater.get=function(){return Ff},Object.defineProperties(Lf,Rf);var Df=function(){this._commonBitsX=new Nf,this._commonBitsY=new Nf};Df.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Df.prototype.getCommonCoordinate=function(){return new zl(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Df.prototype.interfaces_=function(){return[Au]},Df.prototype.getClass=function(){return Df};var Ff=function(){this.trans=null;var t=arguments[0];this.trans=t};Ff.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Ff.prototype.isDone=function(){return!1},Ff.prototype.isGeometryChanged=function(){return!0},Ff.prototype.interfaces_=function(){return[fc]},Ff.prototype.getClass=function(){return Ff};var jf=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};jf.prototype.selfSnap=function(t){return new kf(t).snapTo(t,this._snapTolerance)},jf.prototype.removeCommonBits=function(t){this._cbr=new Lf,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},jf.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},jf.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=ad.overlayOp(e[0],e[1],t);return this.prepareResult(n)},jf.prototype.checkValid=function(t){t.isValid()||ou.out.println("Snapped geometry is invalid")},jf.prototype.computeSnapTolerance=function(){this._snapTolerance=kf.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},jf.prototype.snap=function(t){var e=this.removeCommonBits(t);return kf.snap(e[0],e[1],this._snapTolerance)},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.overlayOp=function(t,e,n){return new jf(t,e).getResultGeometry(n)},jf.union=function(t,e){return jf.overlayOp(t,e,ad.UNION)},jf.intersection=function(t,e){return jf.overlayOp(t,e,ad.INTERSECTION)},jf.symDifference=function(t,e){return jf.overlayOp(t,e,ad.SYMDIFFERENCE)},jf.difference=function(t,e){return jf.overlayOp(t,e,ad.DIFFERENCE)};var zf=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};zf.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=ad.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof du))throw t;r=t}if(!n)try{e=jf.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof du?r:t}return e},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf},zf.overlayOp=function(t,e,n){return new zf(t,e).getResultGeometry(n)},zf.union=function(t,e){return zf.overlayOp(t,e,ad.UNION)},zf.intersection=function(t,e){return zf.overlayOp(t,e,ad.INTERSECTION)},zf.symDifference=function(t,e){return zf.overlayOp(t,e,ad.SYMDIFFERENCE)},zf.difference=function(t,e){return zf.overlayOp(t,e,ad.DIFFERENCE)};var Gf=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Gf.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf};var Bf=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Uf={INSERT:{configurable:!0},DELETE:{configurable:!0}};Bf.prototype.isDelete=function(){return this._eventType===Bf.DELETE},Bf.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Bf.prototype.getObject=function(){return this._obj},Bf.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Bf.prototype.getInsertEvent=function(){return this._insertEvent},Bf.prototype.isInsert=function(){return this._eventType===Bf.INSERT},Bf.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Bf.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Bf.prototype.interfaces_=function(){return[Rl]},Bf.prototype.getClass=function(){return Bf},Uf.INSERT.get=function(){return 1},Uf.DELETE.get=function(){return 2},Object.defineProperties(Bf,Uf);var qf=function(){};qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf};var Wf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Wf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Wf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Wf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wf.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Wf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wf.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Wf.prototype.hasProperIntersection=function(){return this._hasProper},Wf.prototype.hasIntersection=function(){return this._hasIntersection},Wf.prototype.isDone=function(){return this._isDone},Wf.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Wf.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Wf.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Wf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Vf=function(t){function e(){t.call(this),this.events=new Gu,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Nh.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Wf&&Vl(arguments[0],ju)&&Vl(arguments[1],ju)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Vl(arguments[0],ju)&&arguments[1]instanceof Wf){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Gf(n,i),a=new Bf(e,n.getMinX(i),o);this.events.add(a),this.events.add(new Bf(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qf),Hf=function(){this._min=Nl.POSITIVE_INFINITY,this._max=Nl.NEGATIVE_INFINITY},Yf={NodeComparator:{configurable:!0}};Hf.prototype.getMin=function(){return this._min},Hf.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Hf.prototype.getMax=function(){return this._max},Hf.prototype.toString=function(){return fu.toLineString(new zl(this._min,0),new zl(this._max,0))},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf},Yf.NodeComparator.get=function(){return Xf},Object.defineProperties(Hf,Yf);var Xf=function(){};Xf.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},Xf.prototype.interfaces_=function(){return[Fl]},Xf.prototype.getClass=function(){return Xf};var Zf=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hf),Kf=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hf),Jf=function(){this._leaves=new Gu,this._root=null,this._level=0};Jf.prototype.buildTree=function(){Nh.sort(this._leaves,new Hf.NodeComparator);for(var t=this._leaves,e=null,n=new Gu;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Jf.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Zf(t,e,n))},Jf.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Jf.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Jf.prototype.printNode=function(t){ou.out.println(fu.toLineString(new zl(t._min,this._level),new zl(t._max,this._level)))},Jf.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Jf.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Kf(t.get(n),t.get(n+1));e.add(i)}}},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var Qf=function(){this._items=new Gu};Qf.prototype.visitItem=function(t){this._items.add(t)},Qf.prototype.getItems=function(){return this._items},Qf.prototype.interfaces_=function(){return[Ph]},Qf.prototype.getClass=function(){return Qf};var $f=function(){this._index=null;var t=arguments[0];if(!Vl(t,kc))throw new Ml("Argument must be Polygonal");this._index=new nd(t)},td={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};$f.prototype.locate=function(t){var e=new xu(t),n=new ed(e);return this._index.query(t.y,t.y,n),e.getLocation()},$f.prototype.interfaces_=function(){return[wp]},$f.prototype.getClass=function(){return $f},td.SegmentVisitor.get=function(){return ed},td.IntervalIndexedGeometry.get=function(){return nd},Object.defineProperties($f,td);var ed=function(){this._counter=null;var t=arguments[0];this._counter=t};ed.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},ed.prototype.interfaces_=function(){return[Ph]},ed.prototype.getClass=function(){return ed};var nd=function(){this._index=new Jf;var t=arguments[0];this.init(t)};nd.prototype.init=function(t){for(var e=rf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},nd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Xh(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},nd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Qf;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd};var rd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Wc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new of,2===arguments.length){var e=arguments[0],n=arguments[1],r=Pu.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,rh.ON)===ql.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new Wf(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof Nc||this._parentGeom instanceof Oc||this._parentGeom instanceof Lc,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Wf(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Pc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,ql.INTERIOR)}else if(arguments[0]instanceof zl){var e=arguments[0];this.insertPoint(this._argIndex,e,ql.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),ql.EXTERIOR,ql.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,ql.INTERIOR,ql.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],ql.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],ql.BOUNDARY)},e.prototype.addLineString=function(t){var e=qu.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Rp(e,new ph(this._argIndex,ql.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),yu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===ql.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=qu.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;_u.isCCW(r)&&(i=n,o=e);var a=new Rp(r,new ph(this._argIndex,ql.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],ql.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new ph(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Vf},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Lc&&(this._useBoundaryDeterminationRule=!1),e instanceof Oc)this.addPolygon(e);else if(e instanceof Ic)this.addLineString(e);else if(e instanceof Pc)this.addPoint(e);else if(e instanceof Mc)this.addCollection(e);else if(e instanceof gc)this.addCollection(e);else if(e instanceof Lc)this.addCollection(e);else{if(!(e instanceof dc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Vl(this._parentGeom,kc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new $f(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?ql.BOUNDARY:ql.INTERIOR},e}(Sh),id=function(){if(this._li=new wu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new rd(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Pu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new rd(0,e,r),this._arg[1]=new rd(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new rd(0,i,a),this._arg[1]=new rd(1,o,a)}};id.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},id.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id};var od=function(){};od.prototype.interfaces_=function(){return[]},od.prototype.getClass=function(){return od},od.map=function(){if(arguments[0]instanceof Cu&&Vl(arguments[1],od.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Gu,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Vl(arguments[0],Ru)&&Vl(arguments[1],od.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Gu,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},od.MapOp=function(){};var ad=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new of,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Tp,this._resultPolyList=new Gu,this._resultLineList=new Gu,this._resultPointList=new Gu,this._graph=new Sh(new Sp),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new ph(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Gu;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==ql.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Gu,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Gu;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Sf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ch(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Tf(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new If(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,rh.RIGHT),i.getLocation(1,rh.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(yu.isTrue(!r.isNull(i,rh.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,rh.LEFT,r.getLocation(i,rh.LEFT)),yu.isTrue(!r.isNull(i,rh.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,rh.RIGHT,r.getLocation(i,rh.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(id);ad.overlayOp=function(t,e,n){return new ad(t,e).getResultGeometry(n)},ad.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ad.createEmptyResult(ad.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Cf.map(t,{interfaces_:function(){return[od.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zf.overlayOp(t,e,ad.INTERSECTION)},ad.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ad.createEmptyResult(ad.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zf.overlayOp(t,e,ad.SYMDIFFERENCE)},ad.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case ad.INTERSECTION:o=Math.min(r,i);break;case ad.UNION:o=Math.max(r,i);break;case ad.DIFFERENCE:o=r;break;case ad.SYMDIFFERENCE:o=Math.max(r,i)}return o},ad.createEmptyResult=function(t,e,n,r){var i=null;switch(ad.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},ad.difference=function(t,e){return t.isEmpty()?ad.createEmptyResult(ad.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zf.overlayOp(t,e,ad.DIFFERENCE))},ad.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return ad.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===ql.BOUNDARY&&(i=ql.INTERIOR),o===ql.BOUNDARY&&(o=ql.INTERIOR),arguments[2]){case ad.INTERSECTION:return i===ql.INTERIOR&&o===ql.INTERIOR;case ad.UNION:return i===ql.INTERIOR||o===ql.INTERIOR;case ad.DIFFERENCE:return i===ql.INTERIOR&&o!==ql.INTERIOR;case ad.SYMDIFFERENCE:return i===ql.INTERIOR&&o!==ql.INTERIOR||i!==ql.INTERIOR&&o===ql.INTERIOR}return!1}},ad.INTERSECTION=1,ad.UNION=2,ad.DIFFERENCE=3,ad.SYMDIFFERENCE=4;var sd=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new of,this._seg=new Xh;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};sd.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},sd.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?ql.BOUNDARY:this._ptLocator.locate(t,this._g)},sd.prototype.extractLinework=function(t){var e=new ld;t.apply(e);var n=e.getLinework(),r=Zc.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},sd.prototype.interfaces_=function(){return[]},sd.prototype.getClass=function(){return sd};var ld=function(){this._linework=null,this._linework=new Gu};ld.prototype.getLinework=function(){return this._linework},ld.prototype.filter=function(t){if(t instanceof Oc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},ld.prototype.interfaces_=function(){return[pc]},ld.prototype.getClass=function(){return ld};var ud=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};ud.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},ud.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},ud.prototype.getPoints=function(t){for(var e=new Gu,n=rf.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},ud.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new zl(u-l,c+s);r.add(h)}if(this._doRight){var p=new zl(u+l,c-s);r.add(p)}},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud};var cd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Gu;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new sd(this._geom[0],this._boundaryDistanceTolerance),new sd(this._geom[1],this._boundaryDistanceTolerance),new sd(this._geom[2],this._boundaryDistanceTolerance)]},hd={TOLERANCE:{configurable:!0}};cd.prototype.reportResult=function(t,e,n){ou.out.println("Overlay result invalid - A:"+ql.toLocationSymbol(e[0])+" B:"+ql.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+ql.toLocationSymbol(e[2]))},cd.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},cd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!cd.hasLocation(this._location,ql.BOUNDARY)||this.isValidResult(i,this._location)}},cd.prototype.addTestPts=function(t){var e=new ud(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},cd.prototype.isValidResult=function(t,e){var n=ad.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===ql.INTERIOR);return r||this.reportResult(t,e,n),r},cd.prototype.getInvalidLocation=function(){return this._invalidLocation},cd.prototype.interfaces_=function(){return[]},cd.prototype.getClass=function(){return cd},cd.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},cd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(kf.computeSizeBasedSnapTolerance(t),kf.computeSizeBasedSnapTolerance(e))},cd.isValid=function(t,e,n,r){return new cd(t,e,r).isValid(n)},hd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(cd,hd);var pd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};pd.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},pd.prototype.combine=function(){for(var t=new Gu,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd},pd.combine=function(){return 1===arguments.length?new pd(arguments[0]).combine():2===arguments.length?new pd(pd.createList(arguments[0],arguments[1])).combine():3===arguments.length?new pd(pd.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},pd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},pd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Gu;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Gu;return a.add(r),a.add(i),a.add(o),a}};var fd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Gu)},dd={STRTREE_NODE_CAPACITY:{configurable:!0}};fd.prototype.reduceToGeometries=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Vl(r,ju)?i=this.unionTree(r):r instanceof Cu&&(i=r),e.add(i)}return e},fd.prototype.extractByEnvelope=function(t,e,n){for(var r=new Gu,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},fd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return pd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},fd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new zh(fd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},fd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=fd.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(fd.getGeometry(e,n),fd.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},fd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},fd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},fd.prototype.unionActual=function(t,e){return fd.restrictToPolygons(t.union(e))},fd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},fd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Gu,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),pd.combine(r)},fd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd},fd.restrictToPolygons=function(t){if(Vl(t,kc))return t;var e=nf.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Zc.toPolygonArray(e))},fd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},fd.union=function(t){return new fd(t).union()},dd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(fd,dd);var gd=function(){};function yd(){return new md}function md(){this.reset()}gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd},gd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ad.createEmptyResult(ad.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zf.overlayOp(t,e,ad.UNION)},md.prototype={constructor:md,reset:function(){this.s=this.t=0},add:function(t){wd(vd,t,this.t),wd(this,vd.s,this.s),this.s?this.t+=vd.t:this.s=vd.t},valueOf:function(){return this.s}};var vd=new md;function wd(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var bd=1e-6,xd=Math.PI,_d=xd/2,Ed=xd/4,Sd=2*xd,Cd=180/xd,Td=xd/180,Id=Math.abs,Ad=Math.atan,Pd=Math.atan2,kd=Math.cos,Od=Math.sin,Md=Math.sqrt;function Nd(t){return t>1?0:t<-1?xd:Math.acos(t)}function Ld(t){return t>1?_d:t<-1?-_d:Math.asin(t)}function Rd(){}function Dd(t,e){t&&Gd.hasOwnProperty(t.type)&&Gd[t.type](t,e)}var Fd,jd,zd={Feature:function(t,e){Dd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Dd(n[r].geometry,e)}},Gd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Bd(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Bd(n[r],e,0)},Polygon:function(t,e){Ud(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ud(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Dd(n[r],e)}};function Bd(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ud(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Bd(t[n],e,1);e.polygonEnd()}function qd(t){return[Pd(t[1],t[0]),Ld(t[2])]}function Wd(t){var e=t[0],n=t[1],r=kd(n);return[r*kd(e),r*Od(e),Od(n)]}function Vd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hd(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Yd(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Xd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Zd(t){var e=Md(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Kd(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Jd(t,e){return[t>xd?t-Sd:t<-xd?t+Sd:t,e]}function Qd(t){return function(e,n){return[(e+=t)>xd?e-Sd:e<-xd?e+Sd:e,n]}}function $d(t){var e=Qd(t);return e.invert=Qd(-t),e}function tg(t,e){var n=kd(t),r=Od(t),i=kd(e),o=Od(e);function a(t,e){var a=kd(e),s=kd(t)*a,l=Od(t)*a,u=Od(e),c=u*n+s*r;return[Pd(l*i-c*o,s*n-u*r),Ld(c*i+l*o)]}return a.invert=function(t,e){var a=kd(e),s=kd(t)*a,l=Od(t)*a,u=Od(e),c=u*i-l*o;return[Pd(l*i+u*o,s*n+c*r),Ld(c*n-s*r)]},a}function eg(t,e){(e=Wd(e))[0]-=t,Zd(e);var n=Nd(-e[1]);return((-e[2]<0?-n:n)+Sd-bd)%Sd}function ng(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Rd,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function rg(t,e){return Id(t[0]-e[0])<bd&&Id(t[1]-e[1])<bd}function ig(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function og(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(rg(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new ig(r,t,null,!0)),l.push(n.o=new ig(r,null,n,!1)),s.push(n=new ig(a,t,null,!1)),l.push(n.o=new ig(a,null,n,!0))}})),s.length){for(l.sort(e),ag(s),ag(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;u=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,a=u.length;o<a;++o)i.point((c=u[o])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(u=p.p.z,o=u.length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(p.x,p.p.x,-1,i);p=p.p}u=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}}function ag(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function sg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function lg(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}yd(),yd(),yd(),Jd.invert=Jd,1===(Fd=sg).length&&(jd=Fd,Fd=function(t,e){return sg(jd(t),e)});var ug=1e9,cg=-ug;var hg=yd();function pg(t){return t}yd(),yd(),yd();var fg=1/0,dg=fg,gg=-fg,yg=gg,mg={point:function(t,e){t<fg&&(fg=t),t>gg&&(gg=t),e<dg&&(dg=e),e>yg&&(yg=e)},lineStart:Rd,lineEnd:Rd,polygonStart:Rd,polygonEnd:Rd,result:function(){var t=[[fg,dg],[gg,yg]];return gg=yg=-(dg=fg=1/0),t}};function vg(t,e,n,r){return function(i,o){var a,s,l,u=e(o),c=i.invert(r[0],r[1]),h=ng(),p=e(h),f=!1,d={point:g,lineStart:m,lineEnd:v,polygonStart:function(){d.point=w,d.lineStart=b,d.lineEnd=x,s=[],a=[]},polygonEnd:function(){d.point=g,d.lineStart=m,d.lineEnd=v,s=lg(s);var t=function(t,e){var n=e[0],r=e[1],i=[Od(n),-kd(n),0],o=0,a=0;hg.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,h=u[c-1],p=h[0],f=h[1]/2+Ed,d=Od(f),g=kd(f),y=0;y<c;++y,p=v,d=b,g=x,h=m){var m=u[y],v=m[0],w=m[1]/2+Ed,b=Od(w),x=kd(w),_=v-p,E=_>=0?1:-1,S=E*_,C=S>xd,T=d*b;if(hg.add(Pd(T*E*Od(S),g*x+T*kd(S))),o+=C?_+E*Sd:_,C^p>=n^v>=n){var I=Hd(Wd(h),Wd(m));Zd(I);var A=Hd(i,I);Zd(A);var P=(C^_>=0?-1:1)*Ld(A[2]);(r>P||r===P&&(I[0]||I[1]))&&(a+=C^_>=0?1:-1)}}return(o<-1e-6||o<bd&&hg<-1e-6)^1&a}(a,c);s.length?(f||(o.polygonStart(),f=!0),og(s,bg,t,n,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function y(t,e){var n=i(t,e);u.point(n[0],n[1])}function m(){d.point=y,u.lineStart()}function v(){d.point=g,u.lineEnd()}function w(t,e){l.push([t,e]);var n=i(t,e);p.point(n[0],n[1])}function b(){p.lineStart(),l=[]}function x(){w(l[0][0],l[0][1]),p.lineEnd();var t,e,n,r,i=p.clean(),u=h.result(),c=u.length;if(l.pop(),a.push(l),l=null,c)if(1&i){if((e=(n=u[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&u.push(u.pop().concat(u.shift())),s.push(u.filter(wg))}return d}}function wg(t){return t.length>1}function bg(t,e){return((t=t.x)[0]<0?t[1]-_d-bd:_d-t[1])-((e=e.x)[0]<0?e[1]-_d-bd:_d-e[1])}yd();var xg=vg((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?xd:-xd,l=Id(o-n);Id(l-xd)<bd?(t.point(n,r=(r+a)/2>0?_d:-_d),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=xd&&(Id(n-i)<bd&&(n-=i*bd),Id(o-s)<bd&&(o-=s*bd),r=function(t,e,n,r){var i,o,a=Od(t-n);return Id(a)>bd?Ad((Od(e)*(o=kd(r))*Od(n)-Od(r)*(i=kd(e))*Od(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*_d,r.point(-xd,i),r.point(0,i),r.point(xd,i),r.point(xd,0),r.point(xd,-i),r.point(0,-i),r.point(-xd,-i),r.point(-xd,0),r.point(-xd,i);else if(Id(t[0]-e[0])>bd){var o=t[0]<e[0]?xd:-xd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-xd,-_d]);function _g(t){return function(e){var n=new Eg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Eg(){}function Sg(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&zd.hasOwnProperty(t.type)?zd[t.type](t,e):Dd(t,e)}(n,t.stream(mg));var a=mg.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),l=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,u])}Eg.prototype={constructor:Eg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Cg=kd(30*Td);function Tg(t,e){return+e?function(t,e){function n(r,i,o,a,s,l,u,c,h,p,f,d,g,y){var m=u-r,v=c-i,w=m*m+v*v;if(w>4*e&&g--){var b=a+p,x=s+f,_=l+d,E=Md(b*b+x*x+_*_),S=Ld(_/=E),C=Id(Id(_)-1)<bd||Id(o-h)<bd?(o+h)/2:Pd(x,b),T=t(C,S),I=T[0],A=T[1],P=I-r,k=A-i,O=v*P-m*k;(O*O/w>e||Id((m*P+v*k)/w-.5)>.3||a*p+s*f+l*d<Cg)&&(n(r,i,o,a,s,l,I,A,C,b/=E,x/=E,_,g,y),y.point(I,A),n(I,A,C,b,x,_,u,c,h,p,f,d,g,y))}}return function(e){var r,i,o,a,s,l,u,c,h,p,f,d,g={point:y,lineStart:m,lineEnd:w,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var o=Wd([r,i]),a=t(r,i);n(c,h,u,p,f,d,c=a[0],h=a[1],u=r,p=o[0],f=o[1],d=o[2],16,e),e.point(c,h)}function w(){g.point=y,e.lineEnd()}function b(){m(),g.point=x,g.lineEnd=_}function x(t,e){v(r=t,e),i=c,o=h,a=p,s=f,l=d,g.point=v}function _(){n(c,h,u,p,f,d,i,o,r,a,s,l,16,e),g.lineEnd=w,w()}return g}}(t,e):function(t){return _g({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Ig=_g({point:function(t,e){this.stream.point(t*Td,e*Td)}});function Ag(t){return function(t){var e,n,r,i,o,a,s,l,u,c,h=150,p=480,f=250,d=0,g=0,y=0,m=0,v=0,w=null,b=xg,x=null,_=pg,E=.5,S=Tg(I,E);function C(t){return[(t=o(t[0]*Td,t[1]*Td))[0]*h+n,r-t[1]*h]}function T(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*Cd,t[1]*Cd]}function I(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function A(){o=Kd(i=function(t,e,n){return(t%=Sd)?e||n?Kd($d(t),tg(e,n)):$d(t):e||n?tg(e,n):Jd}(y,m,v),e);var t=e(d,g);return n=p-t[0]*h,r=f+t[1]*h,P()}function P(){return u=c=null,C}return C.stream=function(t){return u&&c===t?u:u=Ig(b(i,S(_(c=t))))},C.clipAngle=function(t){return arguments.length?(b=+t?function(t,e){var n=kd(t),r=n>0,i=Id(n)>bd;function o(t,e){return kd(t)*kd(e)>n}function a(t,e,r){var i=[1,0,0],o=Hd(Wd(t),Wd(e)),a=Vd(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var u=n*a/l,c=-n*s/l,h=Hd(i,o),p=Xd(i,u);Yd(p,Xd(o,c));var f=h,d=Vd(p,f),g=Vd(f,f),y=d*d-g*(Vd(p,p)-1);if(!(y<0)){var m=Md(y),v=Xd(f,(-d-m)/g);if(Yd(v,p),v=qd(v),!r)return v;var w,b=t[0],x=e[0],_=t[1],E=e[1];x<b&&(w=b,b=x,x=w);var S=x-b,C=Id(S-xd)<bd;if(!C&&E<_&&(w=_,_=E,E=w),C||S<bd?C?_+E>0^v[1]<(Id(v[0]-b)<bd?_:E):_<=v[1]&&v[1]<=E:S>xd^(b<=v[0]&&v[0]<=x)){var T=Xd(f,(-d+m)/g);return Yd(T,p),[v,qd(T)]}}}function s(e,n){var i=r?t:xd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return vg(o,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,p){var f,d=[h,p],g=o(h,p),y=r?g?0:s(h,p):g?s(h+(h<0?xd:-xd),p):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(!(f=a(e,d))||rg(e,f)||rg(d,f))&&(d[0]+=bd,d[1]+=bd,g=o(d[0],d[1])),g!==l)c=0,g?(t.lineStart(),f=a(d,e),t.point(f[0],f[1])):(f=a(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(i&&e&&r^g){var m;y&n||!(m=a(d,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&rg(e,d)||t.point(d[0],d[1]),e=d,l=g,n=y},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=kd(e),s=Od(e),l=r*n;null==i?(i=e+r*Sd,o=e-l/2):(i=eg(a,i),o=eg(a,o),(r>0?i<o:i>o)&&(i+=r*Sd));for(var u,c=i;r>0?c>o:c<o;c-=l)u=qd([a,-s*kd(c),-s*Od(c)]),t.point(u[0],u[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-xd,t-xd])}(w=t*Td,6*Td):(w=null,xg),P()):w*Cd},C.clipExtent=function(t){return arguments.length?(_=null==t?(x=a=s=l=null,pg):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,u){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||l(i,o)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else u.point(o[0],o[1])}function a(r,i){return Id(r[0]-t)<bd?i>0?0:3:Id(r[0]-n)<bd?i>0?2:1:Id(r[1]-e)<bd?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,u,c,h,p,f,d,g,y,m,v,w=a,b=ng(),x={point:_,lineStart:function(){x.point=E,u&&u.push(c=[]),m=!0,y=!1,d=g=NaN},lineEnd:function(){l&&(E(h,p),f&&y&&b.rejoin(),l.push(b.result())),x.point=_,y&&w.lineEnd()},polygonStart:function(){w=b,l=[],u=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=u.length;n<i;++n)for(var o,a,s=u[n],l=1,c=s.length,h=s[0],p=h[0],f=h[1];l<c;++l)o=p,a=f,p=(h=s[l])[0],f=h[1],a<=r?f>r&&(p-o)*(r-a)>(f-a)*(t-o)&&++e:f<=r&&(p-o)*(r-a)<(f-a)*(t-o)&&--e;return e}(),n=v&&e,i=(l=lg(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&og(l,s,e,o,a),a.polygonEnd()),w=a,l=u=c=null}};function _(t,e){i(t,e)&&w.point(t,e)}function E(o,a){var s=i(o,a);if(u&&c.push([o,a]),m)h=o,p=a,f=s,m=!1,s&&(w.lineStart(),w.point(o,a));else if(s&&y)w.point(o,a);else{var l=[d=Math.max(cg,Math.min(ug,d)),g=Math.max(cg,Math.min(ug,g))],b=[o=Math.max(cg,Math.min(ug,o)),a=Math.max(cg,Math.min(ug,a))];!function(t,e,n,r,i,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,p=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=r-l,p||!(a>0)){if(a/=p,p<0){if(a<u)return;a<c&&(c=a)}else if(p>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,p||!(a<0)){if(a/=p,p<0){if(a>c)return;a>u&&(u=a)}else if(p>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*p),c<1&&(e[0]=s+c*h,e[1]=l+c*p),!0}}}}}(l,b,t,e,n,r)?s&&(w.lineStart(),w.point(o,a),v=!1):(y||(w.lineStart(),w.point(l[0],l[1])),w.point(b[0],b[1]),s||w.lineEnd(),v=!1)}d=o,g=a,y=s}return x}}(x=+t[0][0],a=+t[0][1],s=+t[1][0],l=+t[1][1]),P()):null==x?null:[[x,a],[s,l]]},C.scale=function(t){return arguments.length?(h=+t,A()):h},C.translate=function(t){return arguments.length?(p=+t[0],f=+t[1],A()):[p,f]},C.center=function(t){return arguments.length?(d=t[0]%360*Td,g=t[1]%360*Td,A()):[d*Cd,g*Cd]},C.rotate=function(t){return arguments.length?(y=t[0]%360*Td,m=t[1]%360*Td,v=t.length>2?t[2]%360*Td:0,A()):[y*Cd,m*Cd,v*Cd]},C.precision=function(t){return arguments.length?(S=Tg(I,E=t*t),P()):Md(E)},C.fitExtent=function(t,e){return Sg(C,t,e)},C.fitSize=function(t,e){return function(t,e,n){return Sg(t,[[0,0],e],n)}(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&T,A()}}((function(){return t}))()}var Pg=function(t,e){var n=kd(t),r=kd(e),i=function(t){return(t=Nd(t))&&t/Od(t)}(n*r);return[i*r*Od(t),i*Od(e)]};function kg(t,n,r,i){var a=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var l=[];return z(t,(function(t){var e=kg(t,n,r,i);e&&l.push(e)})),f(l)}var u=function(t){var n=fn(t).geometry.coordinates,r=[-n[0],-n[1]];return Ag(Pg).scale(79.4188).clipAngle(179.999).rotate(r).scale(e)}(s),c={type:s.type,coordinates:Mg(s.coordinates,u)},h=(new eh).read(c),p=w(b(n,r),"meters"),d=Xp.bufferOp(h,p,i);if(!Og((d=(new nh).write(d)).coordinates))return o({type:d.type,coordinates:Ng(d.coordinates,u)},a)}function Og(t){return Array.isArray(t[0])?Og(t[0]):isNaN(t[0])}function Mg(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return Mg(t,e)}))}function Ng(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return Ng(t,e)}))}function Lg(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=kl.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):y(o,n.properties)}function Rg(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],a=t[2],s=t[3],l=(o+s)/2,u=(i+a)/2,c=2*e/ye([i,l],[a,l],n)*(a-i),h=2*e/ye([u,o],[u,s],n)*(s-o),p=c/2,d=2*p,g=Math.sqrt(3)/2*h,y=a-i,m=s-o,v=3/4*d,w=g,b=(y-d)/(d-p/2),x=Math.floor(b),_=(x*v-p/2-y)/2-p/2+v/2,E=Math.floor((m-g)/g),S=(m-E*g)/2,C=E*g-m>g/2;C&&(S-=g/4);for(var T=[],I=[],A=0;A<6;A++){var P=2*Math.PI/6*A;T.push(Math.cos(P)),I.push(Math.sin(P))}for(var k=[],O=0;O<=x;O++)for(var M=0;M<=E;M++){var N=O%2==1;if(!(0===M&&N||0===M&&C)){var L=O*v+i-_,R=M*w+o+S;if(N&&(R-=g/2),!0===n.triangles)Fg([L,R],c/2,h/2,JSON.parse(r),T,I).forEach((function(t){n.mask?Lg(n.mask,t)&&k.push(t):k.push(t)}));else{var D=Dg([L,R],c/2,h/2,JSON.parse(r),T,I);n.mask?Lg(n.mask,D)&&k.push(D):k.push(D)}}}return f(k)}function Dg(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=t[0]+e*i[s],c=t[1]+n*o[s];a.push([l,c])}return a.push(a[0].slice()),u([a],r)}function Fg(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=[];l.push(t),l.push([t[0]+e*i[s],t[1]+n*o[s]]),l.push([t[0]+e*i[(s+1)%6],t[1]+n*o[(s+1)%6]]),l.push(t),a.push(u([l],r))}return a}function jg(t){return y(t)}function zg(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],a=t[1],s=t[2],l=t[3],c=e/ye([o,a],[s,a],r)*(s-o),h=n/ye([o,a],[o,l],r)*(l-a),p=s-o,d=l-a,g=Math.floor(p/c),y=Math.floor(d/h),m=(d-y*h)/2,v=o+(p-g*c)/2,w=0;w<g;w++){for(var b=a+m,x=0;x<y;x++){var _=u([[[v,b],[v,b+h],[v+c,b+h],[v+c,b],[v,b]]],r.properties);r.mask?la(r.mask,_)&&i.push(_):i.push(_),b+=h}v+=c}return f(i)}(t,e,e,n)}function Gg(t,e,n){void 0===n&&(n={});for(var r=[],i=e/ye([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/ye([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),a=0,s=t[0];s<=t[2];){for(var l=0,c=t[1];c<=t[3];){var h=null,p=null;a%2==0&&l%2==0?(h=u([[[s,c],[s,c+o],[s+i,c],[s,c]]],n.properties),p=u([[[s,c+o],[s+i,c+o],[s+i,c],[s,c+o]]],n.properties)):a%2==0&&l%2==1?(h=u([[[s,c],[s+i,c+o],[s+i,c],[s,c]]],n.properties),p=u([[[s,c],[s,c+o],[s+i,c+o],[s,c]]],n.properties)):l%2==0&&a%2==1?(h=u([[[s,c],[s,c+o],[s+i,c+o],[s,c]]],n.properties),p=u([[[s,c],[s+i,c+o],[s+i,c],[s,c]]],n.properties)):l%2==1&&a%2==1&&(h=u([[[s,c],[s,c+o],[s+i,c],[s,c]]],n.properties),p=u([[[s,c+o],[s+i,c+o],[s+i,c],[s,c+o]]],n.properties)),n.mask?(Lg(n.mask,h)&&r.push(h),Lg(n.mask,p)&&r.push(p)):(r.push(h),r.push(p)),c+=o,l++}a++,s+=i}return f(r)}Pg.invert=function(t,e){var n=Md(t*t+e*e),r=n,i=Od(r),o=kd(r);return[Pd(t*i,n*o),Ld(n&&e*i/n)]},t.along=function(t,e,n){void 0===n&&(n={});for(var r=rt(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var a=e-i;if(a){var l=pn(r[o],r[o-1])-180;return cn(r[o],a,l,n)}return s(r[o])}i+=ye(r[o],r[o+1],n)}return s(r[r.length-1])},t.angle=function(t,e,n,r){if(void 0===r&&(r={}),!A(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,a=n,s=_(!0!==r.mercator?pn(i,o):_i(i,o)),l=_(!0!==r.mercator?pn(a,o):_i(a,o)),u=Math.abs(s-l);return!0===r.explementary?360-u:u},t.applyFilter=zs,t.area=Cr,t.areaFactors=i,t.bbox=K,t.bboxClip=function(t,e){var n=rt(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,a,s,l=t.length,u=di(t[0],e),c=[];for(n||(n=[]),r=1;r<l;r++){for(a=t[r-1],i=o=di(s=t[r],e);;){if(!(u|i)){c.push(a),i!==o?(c.push(s),r<l-1&&(n.push(c),c=[])):r===l-1&&c.push(s);break}if(u&i)break;u?u=di(a=fi(a,s,u,e),e):i=di(s=fi(a,s,i,e),e)}u=o}c.length&&n.push(c)}(t,e,a)})),1===a.length?h(a[0],i):d(a,i);case"Polygon":return u(gi(o,e),i);case"MultiPolygon":return y(o.map((function(t){return gi(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},t.bboxPolygon=sn,t.bearing=pn,t.bearingToAngle=_,t.bearingToAzimuth=_,t.bezier=an,t.bezierSpline=an,t.booleanClockwise=Ai,t.booleanContains=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type,a=n.coordinates,s=r.coordinates;switch(i){case"Point":if("Point"===o)return Jo(a,s);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Jo(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,a=0,s=t.coordinates;a<s.length;a++)if(Jo(i,s[a])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Or(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Or({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Or({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Or(o,t,{ignoreEndVertices:!0})&&(n=!0),!Or(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return fe(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!Ko(K(t),K(e)))return!1;for(;r<e.coordinates.length-1;r++)if(fe({type:"Point",coordinates:Qo(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!Ko(K(t),K(e)))return!1;for(var n=0,r=rt(e).coordinates;n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++)if(!fe(o[i],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!fe(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return $o(n,r);case"Polygon":return ea(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return $o(r,n);case"LineString":return function(t,e){if(dr(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),na(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return ta(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return ea(r,n);case"LineString":return ta(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanDisjoint=Ho,t.booleanEqual=function(t,e){return rt(t).type===rt(e).type&&new sa({precision:6}).compare(Ye(t),Ye(e))},t.booleanIntersects=la,t.booleanOverlap=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new sa({precision:6}).compare(t,e))return!1;var a=0;switch(i){case"MultiPoint":for(var s=0;s<n.coordinates.length;s++)for(var l=0;l<r.coordinates.length;l++){var u=n.coordinates[s],c=r.coordinates[l];if(u[0]===c[0]&&u[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":q(t,(function(t){q(e,(function(e){wi(t,e).features.length&&a++}))}));break;case"Polygon":case"MultiPolygon":q(t,(function(t){q(e,(function(e){dr(t,e).features.length&&a++}))}))}return a>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==xa(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==xa(e,"line2"))throw new Error("line2 must be a LineString");for(var n=qn(Ye(t)).features,r=qn(Ye(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!ba(o,r[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=fe,t.booleanPointOnLine=Or,t.booleanWithin=Nr,t.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return z(t,(function(t){var n=kg(t,e,r,i);n&&o.push(n)})),f(o);case"FeatureCollection":return D(t,(function(t){var n=kg(t,e,r,i);n&&D(n,(function(t){t&&o.push(t)}))})),f(o)}return kg(t,e,r,i)},t.center=fn,t.centerMean=ds,t.centerMedian=function(t,e){if(void 0===e&&(e={}),!A(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!I(n))throw new Error("counter must be a number");var r=e.weight,i=ds(t,{weight:e.weight}),o=f([]);D(t,(function(t){var e;o.features.push(dn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}));var a={tolerance:e.tolerance,medianCandidates:[]};return gs(i.geometry.coordinates,[0,0],o,a,n)},t.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),it(e)){case"Point":return s(J(e),n.properties);case"Polygon":var r=[];M(e,(function(t){r.push(t)}));var i,o,a,l,u,c,h,p,f=dn(e,{properties:n.properties}),d=f.geometry.coordinates,g=0,y=0,m=0,v=r.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(i=0;i<r.length-1;i++)l=(o=v[i])[0],c=o[1],u=(a=v[i+1])[0],m+=p=l*(h=a[1])-u*c,g+=(l+u)*p,y+=(c+h)*p;if(0===m)return f;var w=1/(.5*m*6);return s([d[0]+w*g,d[1]+w*y],n.properties);default:var b=pe(e);return b?t(b,{properties:n.properties}):dn(e,{properties:n.properties})}},t.centroid=dn,t.circle=hn,t.cleanCoords=Ye,t.clone=xe,t.clusterEach=Ds,t.clusterReduce=Fs,t.clusters=Us,t.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=xe(t)),n.minPoints=n.minPoints||3;var r=new fa.DBSCAN,i=r.run(j(t),C(e,n.units),n.minPoints,ye),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=xe(t));var r=j(t),i=r.slice(0,e.numberOfClusters),o=wa(r,e.numberOfClusters,i),a={};return o.centroids.forEach((function(t,e){a[e]=t})),D(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=a[n]})),t},t.collect=function(t,e,n,r){var i=Et(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=K(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){fe([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},t.collectionOf=nt,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return D(t,(function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),f(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return o({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},t.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=me(function(t){var e=[],n={};return D(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),f(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=ye(r,i,e),s=ye(i,o,e),l=ye(r,o,e);return a<=n&&s<=n&&l<=n})),r.features.length<1)return null;var i=He(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),o(i)},t.containsNumber=$,t.convertArea=T,t.convertDistance=C,t.convertLength=C,t.convex=pe,t.coordAll=j,t.coordEach=M,t.coordReduce=N,t.createBins=js,t.degrees2radians=S,t.degreesToRadians=S,t.destination=cn,t.difference=function(t,e){var n=rt(t),r=rt(e),i=t.properties||{},o=kl.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?u(o[0],i):y(o,i)},t.dissolve=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;nt(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return zr(y(kl.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var i={};D(t,(function(t){Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t)}));for(var o=Object.keys(i),a=0;a<o.length;a++){var s=y(kl.union.apply(null,i[o[a]].map((function(t){return t.geometry.coordinates}))));s.properties[n]=o[a],r.push(s)}return zr(f(r))},t.distance=ye,t.distanceToDegrees=x,t.distanceToRadians=b,t.distanceWeight=bs,t.earthRadius=e,t.ellipse=ps,t.envelope=ln,t.explode=gn,t.factors=n,t.feature=o,t.featureCollection=f,t.featureEach=D,t.featureOf=et,t.featureReduce=F,t.filterProperties=Bs,t.findPoint=X,t.findSegment=Y,t.flatten=zr,t.flattenEach=B,t.flattenReduce=U,t.flip=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=xe(t)),M(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.geojsonType=tt,t.geomEach=z,t.geomReduce=G,t.geometry=a,t.geometryCollection=m,t.getCluster=Rs,t.getCoord=J,t.getCoords=Q,t.getGeom=rt,t.getType=it,t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=J(t),e=J(e),r=r||{},i=i||100,o=o||10,new $r({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.helpers=O,t.hexGrid=Rg,t.inside=fe,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=K(t);switch(r){case"point":case"points":a=Fr(s,e,n);break;case"square":case"squares":a=zg(s,e,n);break;case"hex":case"hexes":a=Rg(s,e,n);break;case"triangle":case"triangles":a=Gg(s,e,n);break;default:throw new Error("invalid gridType")}var l=[];return D(a,(function(e){var a=0,s=0;D(t,(function(t){var l,u=ye("point"===r?e:dn(e),t,n);if(void 0!==i&&(l=t.properties[i]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing");0===u&&(a=l);var c=1/Math.pow(u,o);s+=c,a+=c*l}));var u=xe(e);u.properties[i]=a/s,l.push(u)})),f(l)},t.intersect=Lg,t.invariant=ot,t.isNumber=I,t.isObject=A,t.isobands=function(t,e,n){if(!A(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!A(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var a=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return Q(t)[0]-Q(e)[0]}))})).sort((function(t,n){return e?Q(t[0])[1]-Q(n[0])[1]:Q(n[0])[1]-Q(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(t,{zProperty:r,flip:!0}),s=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],a=+e[i],s=Oo(ko(Li(t,o,a-o))),l={};l.groupedRings=s,l[n]=o+"-"+a,r.push(l)}return r}(a,e,r);return f((s=function(t,e,n){var r=K(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],l=e[0].length-1,u=e.length-1,c=i/l,h=o/u,p=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(p)}))}))})),t}(s,a,t)).map((function(t,e){if(o[e]&&!A(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ut({},i,o[e]);return n[r]=t[r],y(t.groupedRings,n)})))},t.isolines=function(t,e,n){if(!A(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!A(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return Q(t)[0]-Q(e)[0]}))})).sort((function(t,n){return e?Q(t[0])[1]-Q(n[0])[1]:Q(n[0])[1]-Q(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(t,{zProperty:r,flip:!0});return f(function(t,e,n){var r=K(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],l=e[0].length-1,u=e.length-1,c=i/l,h=o/u,p=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach((function(t){M(t,p)})),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],l=ut({},r,i[a]);l[n]=s;var u=d(pt(t,s),l);o.push(u)}return o}(a,e,r,i,o),a,t))},t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=xr(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(s([o[0],o[1]]))}}))})),r},t.length=Pr,t.lengthToDegrees=x,t.lengthToRadians=b,t.lineArc=ii,t.lineChunk=function(t,e,n){if(!A(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return B(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Pr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(kr(t,e*a,e*(a+1),{units:n}))}(t,e,r,(function(t){o.push(t)}))})),f(o)},t.lineDistance=Pr,t.lineEach=V,t.lineIntersect=dr,t.lineOffset=function(t,e,n){if(!A(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=it(t),o=t.properties;switch(i){case"LineString":return zo(t,e,r);case"MultiLineString":var a=[];return B(t,(function(t){a.push(zo(t,e,r).geometry.coordinates)})),d(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.lineOverlap=wi,t.lineReduce=H,t.lineSegment=qn,t.lineSlice=function(t,e,n){var r=Q(n);if("LineString"!==it(n))throw new Error("line must be a LineString");for(var i,o=yr(n,t),a=yr(n,e),s=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)s.push(r[l]);return s.push(i[1].geometry.coordinates),h(s,n.properties)},t.lineSliceAlong=kr,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=it(t),r=it(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=jr(e,{precision:7});switch(r){case"Point":return ei(t,i);case"MultiPoint":return ti(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return ti(t,dr(t,i))}},t.lineString=h,t.lineStringToPolygon=ui,t.lineStrings=p,t.lineToPolygon=ui,t.mask=function(t,e){var n,r=function(t){return u(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e);return("FeatureCollection"===t.type?jg(2===(n=t).features.length?kl.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):kl.union.apply(kl,n.features.map((function(t){return t.geometry.coordinates})))):jg(kl.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r},t.meta=Z,t.midpoint=function(t,e){return cn(t,ye(t,e)/2,pn(t,e))},t.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,a=bs(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),s=[];D(t,(function(t){var e=t.properties||{};s.push(e[n])}));for(var l=xs(s),u=function(t){for(var e=xs(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(s),c=0,h=0,p=0,f=0,d=a.length,g=0;g<d;g++){for(var y=0,m=0;m<d;m++)c+=a[g][m]*(s[g]-l)*(s[m]-l),h+=a[g][m],p+=Math.pow(a[g][m]+a[m][g],2),y+=a[g][m]+a[m][g];f+=Math.pow(y,2)}var v=c/h/u,w=-1/(d-1),b=(d*d*(p*=.5)-d*f+h*h*3)/((d-1)*(d+1)*(h*h))-w*w,x=Math.sqrt(b);return{expectedMoranIndex:w,moranIndex:v,stdNorm:x,zNorm:(v-w)/x}},t.multiLineString=d,t.multiPoint=g,t.multiPolygon=y,t.nearest=Un,t.nearestPoint=Un,t.nearestPointOnLine=yr,t.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return z(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==it(e))throw new Error("line must be a LineString");var a=1/0,s=null;return D(o,(function(t){var n=vr(t,e,{units:r});n<a&&(a=n,s=t)})),s&&(s.properties=ut({dist:a},s.properties,i)),s},t.planepoint=function(t,e){var n=J(t),r=rt(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,l=n[0],u=n[1],c=r[0][0],h=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],d=r[1][1],g=void 0!==a?a:r[1][2],y=r[2][0],m=r[2][1],v=void 0!==s?s:r[2][2];return(v*(l-c)*(u-d)+p*(l-f)*(u-m)+g*(l-y)*(u-h)-g*(l-c)*(u-m)-v*(l-f)*(u-h)-p*(l-y)*(u-d))/((l-c)*(u-d)+(l-f)*(u-m)+(l-y)*(u-h)-(l-c)*(u-m)-(l-f)*(u-h)-(l-y)*(u-d))},t.point=s,t.pointGrid=Fr,t.pointOnFeature=_r,t.pointOnLine=yr,t.pointOnSurface=_r,t.pointToLineDistance=vr,t.points=l,t.pointsWithinPolygon=ge,t.polygon=u,t.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return z(t,(function(t,e,i){var o,a,s;switch(t.type){case"Polygon":o=[[]];for(var l=0;l<r;l++)s=[[]],a=t,l>0&&(a=u(o).geometry),ms(a,s),o=s.slice(0);n.push(u(o,i));break;case"MultiPolygon":o=[[[]]];for(var c=0;c<r;c++)s=[[[]]],a=t,c>0&&(a=y(o).geometry),vs(a,s),o=s.slice(0);n.push(y(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),f(n)},t.polygonTangents=function(t,e){var n,r,i,o,a=Q(t),l=Q(e),u=K(e),c=0,h=null;switch(a[0]>u[0]&&a[0]<u[2]&&a[1]>u[1]&&a[1]<u[3]&&(c=(h=Un(t,gn(e))).properties.featureIndex),it(e)){case"Polygon":n=l[0][c],r=l[0][0],null!==h&&h.geometry.coordinates[1]<a[1]&&(r=l[0][c]),o=Ii(l[0][0],l[0][l[0].length-1],a);var p=Ci(l[0],a,o,i,n,r);n=p[0],r=p[1];break;case"MultiPolygon":for(var d=0,g=0,y=0,m=0;m<l[0].length;m++){d=m;for(var v=!1,w=0;w<l[0][m].length;w++){if(g=w,y===c){v=!0;break}y++}if(v)break}n=l[0][d][g],r=l[0][d][g],o=Ii(l[0][0][0],l[0][0][l[0][0].length-1],a),l.forEach((function(t){var e=Ci(t[0],a,o,i,n,r);n=e[0],r=e[1]}))}return f([s(n),s(r)])},t.polygonToLine=ai,t.polygonToLineString=ai,t.polygonize=function(t){var e=Vo.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){Wo.findEdgeRingContaining(t,r)&&r.push(t)})),f(r.map((function(t){return t.toPolygon()})))},t.polygons=c,t.projection=Is,t.propEach=L,t.propReduce=R,t.propertiesContainsFilter=Gs,t.radians2degrees=E,t.radiansToDegrees=E,t.radiansToDistance=w,t.radiansToLength=w,t.random=Ls,t.randomLineString=Os,t.randomPoint=Ps,t.randomPolygon=ks,t.randomPosition=As,t.rewind=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=xe(t));var i=[];switch(t.type){case"GeometryCollection":return z(t,(function(t){Pi(t,n)})),t;case"FeatureCollection":return D(t,(function(t){D(Pi(t,n),(function(t){i.push(t)}))})),f(i)}return Pi(t,n)},t.rhumbBearing=_i,t.rhumbDestination=Si,t.rhumbDistance=mr,t.round=v,t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return f(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.sector=function(t,e,n,r,i){if(!A(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(xi(n)===xi(r))return hn(t,e,i);var a=Q(t),s=ii(t,e,n,r,i),l=[[a]];return M(s,(function(t){l[0].push(t)})),l[0].push(a),u(l,o)},t.segmentEach=q,t.segmentReduce=W,t.shortestPath=function(t,e,n){if(!A(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,a=n.obstacles||f([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!I(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var l=J(t),u=J(e);switch(t=s(l),e=s(u),it(a)){case"FeatureCollection":if(0===a.features.length)return h([l,u]);break;case"Polygon":a=f([o(rt(a))]);break;default:throw new Error("invalid obstacles")}var c=a;c.features.push(t),c.features.push(e);var p=K(Ro(sn(K(c)),1.15));r||(r=ye([p[0],p[1]],[p[2],p[1]],n)/100),c.features.pop(),c.features.pop();for(var d=p[0],g=p[1],y=p[2],m=p[3],v=r/ye([d,g],[y,g],n)*(y-d),w=r/ye([d,g],[d,m],n)*(m-g),b=y-d,x=m-g,_=Math.floor(b/v),E=Math.floor(x/w),S=(b-_*v)/2,C=[],T=[],P=[],k=[],O=1/0,M=1/0,N=m-(x-E*w)/2,L=0;N>=g;){for(var R=[],D=[],F=d+S,j=0;F<=y;){var z=s([F,N]),G=Ia(z,a);R.push(G?0:1),D.push(F+"|"+N);var B=ye(z,t);!G&&B<O&&(O=B,P={x:j,y:L});var U=ye(z,e);!G&&U<M&&(M=U,k={x:j,y:L}),F+=v,j++}T.push(R),C.push(D),N-=w,L++}var q=new Sa(T,{diagonal:!0}),W=q.grid[P.y][P.x],V=q.grid[k.y][k.x],H=Ea.search(q,W,V),Y=[l];return H.forEach((function(t){var e=C[t.x][t.y].split("|");Y.push([+e[0],+e[1]])})),Y.push(u),Ye(h(Y))},t.simplify=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=xe(t)),z(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;Ye(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=en(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return en(t,e,n)}));break;case"Polygon":t.coordinates=nn(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return nn(t,e,n)}))}}(t,n,r)})),t},t.square=un,t.squareGrid=zg,t.standardDeviationalEllipse=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!I(n))throw new Error("steps must be a number");if(!A(i))throw new Error("properties must be a number");var o=j(t).length,a=ds(t,{weight:r}),s=0,l=0,u=0;D(t,(function(t){var e=t.properties[r]||1,n=ys(Q(t),Q(a));s+=Math.pow(n.x,2)*e,l+=Math.pow(n.y,2)*e,u+=n.x*n.y*e}));var c=s-l,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(u,2)),p=2*u,d=Math.atan((c+h)/p),g=180*d/Math.PI,y=0,m=0,v=0;D(t,(function(t){var e=t.properties[r]||1,n=ys(Q(t),Q(a));y+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,m+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,v+=e}));var w=Math.sqrt(2*y/v),b=Math.sqrt(2*m/v),x=ps(a,w,b,{units:"degrees",angle:g,steps:n,properties:i}),_=ge(t,f([x])),E={meanCenterCoordinates:Q(a),semiMajorAxis:w,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*j(_).length/o};return x.properties.standardDeviationalEllipse=E,x},t.tag=function(t,e,n,r){return t=xe(t),e=xe(e),D(t,(function(t){t.properties||(t.properties={}),D(e,(function(e){void 0===t.properties[r]&&fe(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Bn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Bn(t))})),e},t.tin=me,t.toMercator=_s,t.toWgs84=Es,t.transformRotate=Lo,t.transformScale=Ro,t.transformTranslate=function(t,e,n,r){if(!A(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==a&&void 0!==a||(t=xe(t)),M(t,(function(t){var r=Q(Si(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.triangleGrid=Gg,t.truncate=jr,t.union=function(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=kl.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):y(o,n.properties)},t.unitsFactors=r,t.unkinkPolygon=function(t){var e=[];return B(t,(function(t){"Polygon"===t.geometry.type&&D(Br(t),(function(n){e.push(u(n.geometry.coordinates,t.properties))}))})),f(e)},t.validateBBox=P,t.validateId=k,t.voronoi=function(t,e){if(!A(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return nt(t,"Point","points"),f(function(){var t=Pa,e=ka,n=null;function r(r){return new cs(r.map((function(n,i){var o=[Math.round(t(n,i,r)/ss)*ss,Math.round(e(n,i,r)/ss)*ss];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Aa(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Aa(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(hs))},t.within=ge,Object.defineProperty(t,"__esModule",{value:!0})}(e)},163:function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,n,a){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||t.name||"download",l.download=n,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):r(l.href)?e(t,n,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(r(t))e(t,n,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){i(a)}))}}:function(t,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var s="application/octet-stream"===t.type,l=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},c.readAsDataURL(t)}else{var h=o.URL||o.webkitURL,p=h.createObjectURL(t);i?i.location=p:location.href=p,i=null,setTimeout((function(){h.revokeObjectURL(p)}),4e4)}});o.saveAs=s.saveAs=s,t.exports=s})?r.apply(e,[]):r)||(t.exports=i)},3627:function(t,e,n){var r,i,o;o=function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},e=function(){var e=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},n=t.defaultRadius;return e.prototype={_organiseData:function(t,e){var r=t[this._xField],i=t[this._yField],o=this._radi,a=this._data,s=this._max,l=this._min,u=t[this._valueField]||1,c=t.radius||this._cfgRadius||n;a[r]||(a[r]=[],o[r]=[]),a[r][i]?a[r][i]+=u:(a[r][i]=u,o[r][i]=c);var h=a[r][i];return h>s?(e?this.setDataMax(h):this._max=h,!1):h<l?(e?this.setDataMin(h):this._min=h,!1):{x:r,y:i,value:u,radius:c,min:l,max:s}},_unOrganizeData:function(){var t=[],e=this._data,n=this._radi;for(var r in e)for(var i in e[r])t.push({x:r,y:i,radius:n[r][i],value:e[r][i]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(e[r],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},e}(),n=function(){var t=function(t){var e=t.gradient||t.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var o in e)i.addColorStop(o,e[o]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},e=function(t,e){var n=document.createElement("canvas"),r=n.getContext("2d"),i=t,o=t;if(n.width=n.height=2*t,1==e)r.beginPath(),r.arc(i,o,t,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var a=r.createRadialGradient(i,o,t*e,i,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=a,r.fillRect(0,0,2*t,2*t)}return n};function n(e){var n=e.container,r=this.shadowCanvas=document.createElement("canvas"),i=this.canvas=e.canvas||document.createElement("canvas"),o=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(e.container)||{});i.className="heatmap-canvas",this._width=i.width=r.width=e.width||+o.width.replace(/px/,""),this._height=i.height=r.height=e.height||+o.height.replace(/px/,""),this.shadowCtx=r.getContext("2d"),this.ctx=i.getContext("2d"),i.style.cssText=r.style.cssText="position:absolute;left:0;top:0;",n.style.position="relative",n.appendChild(i),this._palette=t(e),this._templates={},this._setStyles(e)}return n.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(function(t){for(var e=[],n=t.min,r=t.max,i=t.radi,o=(t=t.data,Object.keys(t)),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),u=l.length;u--;){var c=l[u],h=t[s][c],p=i[s][c];e.push({x:s,y:c,value:h,radius:p})}return{min:n,max:r,data:e}}(t)),this._colorize())},_updateGradient:function(e){this._palette=t(e)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var n=this._min=t.min,r=this._max=t.max,i=(t=t.data||[]).length,o=1-this._blur;i--;){var a,s=t[i],l=s.x,u=s.y,c=s.radius,h=Math.min(s.value,r),p=l-c,f=u-c,d=this.shadowCtx;this._templates[c]?a=this._templates[c]:this._templates[c]=a=e(c,o);var g=(h-n)/(r-n);d.globalAlpha=g<.01?.01:g,d.drawImage(a,p,f),p<this._renderBoundaries[0]&&(this._renderBoundaries[0]=p),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),p+2*c>this._renderBoundaries[2]&&(this._renderBoundaries[2]=p+2*c),f+2*c>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*c)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,r=this._renderBoundaries[3]-e,i=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+n>i&&(n=i-t),e+r>o&&(r=o-e);for(var c=this.shadowCtx.getImageData(t,e,n,r),h=c.data,p=h.length,f=this._palette,d=3;d<p;d+=4){var g,y=h[d],m=4*y;m&&(g=a>0?a:y<s?y<l?l:y:s,h[d-3]=f[m],h[d-2]=f[m+1],h[d-1]=f[m+2],h[d]=u?f[m+3]:g)}c.data=h,this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],n=this._max,r=this._min;return Math.abs(n-r)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},n}(),r=function(){var e=!1;return"canvas2d"===t.defaultRenderer&&(e=n),e}(),i=function(){for(var t={},e=arguments.length,n=0;n<e;n++){var r=arguments[n];for(var i in r)t[i]=r[i]}return t},o=function(){var n=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,n){var r=this.cStore;r[t]||(r[t]=[]),r[t].push((function(t){return e.call(n,t)}))},emit:function(t,e){var n=this.cStore;if(n[t])for(var r=n[t].length,i=0;i<r;i++)(0,n[t][i])(e)}},t}();function o(){var o=this._config=i(t,arguments[0]||{});if(this._coordinator=new n,o.plugin){var a=o.plugin;if(!t.plugins[a])throw new Error("Plugin '"+a+"' not found. Maybe it was not registered.");var s=t.plugins[a];this._renderer=new s.renderer(o),this._store=new s.store(o)}else this._renderer=new r(o),this._store=new e(o);!function(t){var e=t._renderer,n=t._coordinator,r=t._store;n.on("renderpartial",e.renderPartial,e),n.on("renderall",e.renderAll,e),n.on("extremachange",(function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})})),r.setCoordinator(n)}(this)}return o.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=i(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},o}(),a={create:function(t){return new o(t)},register:function(e,n){t.plugins[e]=n}};return a},t.exports?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},2380:function(t,e){var n,r,i;r="undefined"!=typeof window?window:this,i=function(r,i){var o=[],a=o.slice,s=o.concat,l=o.push,u=o.indexOf,c={},h=c.toString,p=c.hasOwnProperty,f={},d=r.document,g="2.1.4",y=function(t,e){return new y.fn.init(t,e)},m=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,w=/-([\da-z])/gi,b=function(t,e){return e.toUpperCase()};function x(t){var e="length"in t&&t.length,n=y.type(t);return"function"!==n&&!y.isWindow(t)&&(!(1!==t.nodeType||!e)||"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}y.fn=y.prototype={jquery:g,constructor:y,selector:"",length:0,toArray:function(){return a.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:a.call(this)},pushStack:function(t){var e=y.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return y.each(this,t,e)},map:function(t){return this.pushStack(y.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:o.sort,splice:o.splice},y.extend=y.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||y.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(u&&r&&(y.isPlainObject(r)||(i=y.isArray(r)))?(i?(i=!1,o=n&&y.isArray(n)?n:[]):o=n&&y.isPlainObject(n)?n:{},a[e]=y.extend(u,o,r)):void 0!==r&&(a[e]=r));return a},y.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===y.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!y.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return!("object"!==y.type(t)||t.nodeType||y.isWindow(t)||t.constructor&&!p.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[h.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=y.trim(t))&&(1===t.indexOf("use strict")?((e=d.createElement("script")).text=t,d.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(v,"ms-").replace(w,b)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r=0,i=t.length,o=x(t);if(n){if(o)for(;i>r&&!1!==e.apply(t[r],n);r++);else for(r in t)if(!1===e.apply(t[r],n))break}else if(o)for(;i>r&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(m,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(x(Object(t))?y.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;o>i;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i=0,o=t.length,a=[];if(x(t))for(;o>i;i++)null!=(r=e(t[i],i,n))&&a.push(r);else for(i in t)null!=(r=e(t[i],i,n))&&a.push(r);return s.apply([],a)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),y.isFunction(t)?(r=a.call(arguments,2),i=function(){return t.apply(e||this,r.concat(a.call(arguments)))},i.guid=t.guid=t.guid||y.guid++,i):void 0},now:Date.now,support:f}),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var _=function(t){var e,n,r,i,o,a,s,l,u,c,h,p,f,d,g,y,m,v,w,b="sizzle"+1*new Date,x=t.document,_=0,E=0,S=at(),C=at(),T=at(),I=function(t,e){return t===e&&(h=!0),0},A=1<<31,P={}.hasOwnProperty,k=[],O=k.pop,M=k.push,N=k.push,L=k.slice,R=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",z=j.replace("w","w#"),G="\\["+F+"*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+F+"*\\]",B=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",U=new RegExp(F+"+","g"),q=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),H=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),Y=new RegExp(B),X=new RegExp("^"+z+"$"),Z={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){p()};try{N.apply(k=L.call(x.childNodes),x.childNodes),k[x.childNodes.length].nodeType}catch(t){N={apply:k.length?function(t,e){M.apply(t,L.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,u,c,h,d,m,v,_,E;if((e?e.ownerDocument||e:x)!==f&&p(e),r=r||[],c=(e=e||f).nodeType,"string"!=typeof t||!t||1!==c&&9!==c&&11!==c)return r;if(!i&&g){if(11!==c&&(o=$.exec(t)))if(u=o[1]){if(9===c){if(!(s=e.getElementById(u))||!s.parentNode)return r;if(s.id===u)return r.push(s),r}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(u))&&w(e,s)&&s.id===u)return r.push(s),r}else{if(o[2])return N.apply(r,e.getElementsByTagName(t)),r;if((u=o[3])&&n.getElementsByClassName)return N.apply(r,e.getElementsByClassName(u)),r}if(n.qsa&&(!y||!y.test(t))){if(v=m=b,_=e,E=1!==c&&t,1===c&&"object"!==e.nodeName.toLowerCase()){for(d=a(t),(m=e.getAttribute("id"))?v=m.replace(et,"\\$&"):e.setAttribute("id",v),v="[id='"+v+"'] ",h=d.length;h--;)d[h]=v+yt(d[h]);_=tt.test(t)&&dt(e.parentNode)||e,E=d.join(",")}if(E)try{return N.apply(r,_.querySelectorAll(E)),r}catch(t){}finally{m||e.removeAttribute("id")}}}return l(t.replace(q,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[b]=!0,t}function lt(t){var e=f.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var n=t.split("|"),i=t.length;i--;)r.attrHandle[n[i]]=e}function ct(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||A)-(~t.sourceIndex||A);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return st((function(e){return e=+e,st((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function dt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:x;return a!==f&&9===a.nodeType&&a.documentElement?(f=a,d=a.documentElement,(i=a.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),g=!o(a),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(a.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(a.getElementsByClassName),n.getById=lt((function(t){return d.appendChild(t).id=b,!a.getElementsByName||!a.getElementsByName(b).length})),n.getById?(r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(t){var e=t.replace(nt,rt);return function(t){return t.getAttribute("id")===e}}):(delete r.find.ID,r.filter.ID=function(t){var e=t.replace(nt,rt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){return g?e.getElementsByClassName(t):void 0},m=[],y=[],(n.qsa=Q.test(a.querySelectorAll))&&(lt((function(t){d.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||y.push("\\["+F+"*(?:value|"+D+")"),t.querySelectorAll("[id~="+b+"-]").length||y.push("~="),t.querySelectorAll(":checked").length||y.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")})),lt((function(t){var e=a.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&y.push("name"+F+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||y.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),y.push(",.*:")}))),(n.matchesSelector=Q.test(v=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=v.call(t,"div"),v.call(t,"[s!='']:x"),m.push("!=",B)})),y=y.length&&new RegExp(y.join("|")),m=m.length&&new RegExp(m.join("|")),e=Q.test(d.compareDocumentPosition),w=e||Q.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},I=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===a||t.ownerDocument===x&&w(x,t)?-1:e===a||e.ownerDocument===x&&w(x,e)?1:c?R(c,t)-R(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!i||!o)return t===a?-1:e===a?1:i?-1:o?1:c?R(c,t)-R(c,e):0;if(i===o)return ct(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?ct(s[r],l[r]):s[r]===x?-1:l[r]===x?1:0},a):f},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&p(t),e=e.replace(H,"='$1']"),!(!n.matchesSelector||!g||m&&m.test(e)||y&&y.test(e)))try{var r=v.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,f,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==f&&p(t),w(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==f&&p(t);var i=r.attrHandle[e.toLowerCase()],o=i&&P.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(I),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return c=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},r=ot.selectors={cacheLength:50,createPseudo:st,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,rt),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,rt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Y.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,rt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,p,f,d,g=o!==a?"nextSibling":"previousSibling",y=e.parentNode,m=s&&e.nodeName.toLowerCase(),v=!l&&!s;if(y){if(o){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===m:1===h.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?y.firstChild:y.lastChild],a&&v){for(f=(u=(c=y[b]||(y[b]={}))[t]||[])[0]===_&&u[1],p=u[0]===_&&u[2],h=f&&y.childNodes[f];h=++f&&h&&h[g]||(p=f=0)||d.pop();)if(1===h.nodeType&&++p&&h===e){c[t]=[_,f,p];break}}else if(v&&(u=(e[b]||(e[b]={}))[t])&&u[0]===_)p=u[1];else for(;(h=++f&&h&&h[g]||(p=f=0)||d.pop())&&((s?h.nodeName.toLowerCase()!==m:1!==h.nodeType)||!++p||(v&&((h[b]||(h[b]={}))[t]=[_,p]),h!==e)););return(p-=i)===r||p%r==0&&p/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st((function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=R(t,o[a])]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:st((function(t){var e=[],n=[],r=s(t.replace(q,"$1"));return r[b]?st((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:st((function(t){return function(e){return ot(t,e).length>0}})),contains:st((function(t){return t=t.replace(nt,rt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}})),lang:st((function(t){return X.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(nt,rt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft((function(){return[0]})),last:ft((function(t,e){return[e-1]})),eq:ft((function(t,e,n){return[0>n?n+e:n]})),even:ft((function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t})),odd:ft((function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t})),lt:ft((function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t})),gt:ft((function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=pt(e);function gt(){}function yt(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function mt(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=E++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,l,u=[_,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if((s=(l=e[b]||(e[b]={}))[r])&&s[0]===_&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=t(e,n,a))return!0}}}function vt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function wt(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(!n||n(o,r,i))&&(a.push(o),u&&e.push(s));return a}function bt(t,e,n,r,i,o){return r&&!r[b]&&(r=bt(r)),i&&!i[b]&&(i=bt(i,o)),st((function(o,a,s,l){var u,c,h,p=[],f=[],d=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;i>r;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),y=!t||!o&&e?g:wt(g,p,t,s,l),m=n?i||(o?t:d||r)?[]:a:y;if(n&&n(y,m,s,l),r)for(u=wt(m,f),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(m[f[c]]=!(y[f[c]]=h));if(o){if(i||t){if(i){for(u=[],c=m.length;c--;)(h=m[c])&&u.push(y[c]=h);i(null,m=[],u,l)}for(c=m.length;c--;)(h=m[c])&&(u=i?R(o,h):p[c])>-1&&(o[u]=!(a[u]=h))}}else m=wt(m===a?m.splice(d,m.length):m),i?i(null,a,m,l):N.apply(a,m)}))}function xt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],l=a?1:0,c=mt((function(t){return t===e}),s,!0),h=mt((function(t){return R(e,t)>-1}),s,!0),p=[function(t,n,r){var i=!a&&(r||n!==u)||((e=n).nodeType?c(t,n,r):h(t,n,r));return e=null,i}];o>l;l++)if(n=r.relative[t[l].type])p=[mt(vt(p),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[b]){for(i=++l;o>i&&!r.relative[t[i].type];i++);return bt(l>1&&vt(p),l>1&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(q,"$1"),n,i>l&&xt(t.slice(l,i)),o>i&&xt(t=t.slice(i)),o>i&&yt(t))}p.push(n)}return vt(p)}function _t(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,l,c){var h,p,d,g=0,y="0",m=o&&[],v=[],w=u,b=o||i&&r.find.TAG("*",c),x=_+=null==w?1:Math.random()||.1,E=b.length;for(c&&(u=a!==f&&a);y!==E&&null!=(h=b[y]);y++){if(i&&h){for(p=0;d=t[p++];)if(d(h,a,s)){l.push(h);break}c&&(_=x)}n&&((h=!d&&h)&&g--,o&&m.push(h))}if(g+=y,n&&y!==g){for(p=0;d=e[p++];)d(m,v,a,s);if(o){if(g>0)for(;y--;)m[y]||v[y]||(v[y]=O.call(l));v=wt(v)}N.apply(l,v),c&&!o&&v.length>0&&g+e.length>1&&ot.uniqueSort(l)}return c&&(_=x,u=w),m};return n?st(o):o}return gt.prototype=r.filters=r.pseudos,r.setFilters=new gt,a=ot.tokenize=function(t,e){var n,i,o,a,s,l,u,c=C[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=r.preFilter;s;){for(a in(!n||(i=W.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(q," ")}),s=s.slice(n.length)),r.filter)!(i=Z[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):C(t,l).slice(0)},s=ot.compile=function(t,e){var n,r=[],i=[],o=T[t+" "];if(!o){for(e||(e=a(t)),n=e.length;n--;)(o=xt(e[n]))[b]?r.push(o):i.push(o);(o=T(t,_t(i,r))).selector=t}return o},l=ot.select=function(t,e,i,o){var l,u,c,h,p,f="function"==typeof t&&t,d=!o&&a(t=f.selector||t);if(i=i||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&n.getById&&9===e.nodeType&&g&&r.relative[u[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(nt,rt),e)||[])[0]))return i;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(l=Z.needsContext.test(t)?0:u.length;l--&&(c=u[l],!r.relative[h=c.type]);)if((p=r.find[h])&&(o=p(c.matches[0].replace(nt,rt),tt.test(u[0].type)&&dt(e.parentNode)||e))){if(u.splice(l,1),!(t=o.length&&yt(u)))return N.apply(i,o),i;break}}return(f||s(t,d))(o,e,!g,i,tt.test(t)&&dt(e.parentNode)||e),i},n.sortStable=b.split("").sort(I).join("")===b,n.detectDuplicates=!!h,p(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(f.createElement("div"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ut(D,(function(t,e,n){var r;return n?void 0:!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),ot}(r);y.find=_,y.expr=_.selectors,y.expr[":"]=y.expr.pseudos,y.unique=_.uniqueSort,y.text=_.getText,y.isXMLDoc=_.isXML,y.contains=_.contains;var E=y.expr.match.needsContext,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^.[^:#\[\.,]*$/;function T(t,e,n){if(y.isFunction(e))return y.grep(t,(function(t,r){return!!e.call(t,r,t)!==n}));if(e.nodeType)return y.grep(t,(function(t){return t===e!==n}));if("string"==typeof e){if(C.test(e))return y.filter(e,t,n);e=y.filter(e,t)}return y.grep(t,(function(t){return u.call(e,t)>=0!==n}))}y.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?y.find.matchesSelector(r,t)?[r]:[]:y.find.matches(t,y.grep(e,(function(t){return 1===t.nodeType})))},y.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(y(t).filter((function(){for(e=0;n>e;e++)if(y.contains(i[e],this))return!0})));for(e=0;n>e;e++)y.find(t,i[e],r);return(r=this.pushStack(n>1?y.unique(r):r)).selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(T(this,t||[],!1))},not:function(t){return this.pushStack(T(this,t||[],!0))},is:function(t){return!!T(this,"string"==typeof t&&E.test(t)?y(t):t||[],!1).length}});var I,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,P=y.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:A.exec(t))||!n[1]&&e)return!e||e.jquery?(e||I).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof y?e[0]:e,y.merge(this,y.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:d,!0)),S.test(n[1])&&y.isPlainObject(e))for(n in e)y.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=d.getElementById(n[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=d,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):y.isFunction(t)?void 0!==I.ready?I.ready(t):t(y):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),y.makeArray(t,this))};P.prototype=y.fn,I=y(d);var k=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function M(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}y.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&y(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),y.fn.extend({has:function(t){var e=y(t,this),n=e.length;return this.filter((function(){for(var t=0;n>t;t++)if(y.contains(this,e[t]))return!0}))},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=E.test(t)||"string"!=typeof t?y(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&y.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?y.unique(o):o)},index:function(t){return t?"string"==typeof t?u.call(y(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(y.unique(y.merge(this.get(),y(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),y.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return y.dir(t,"parentNode")},parentsUntil:function(t,e,n){return y.dir(t,"parentNode",n)},next:function(t){return M(t,"nextSibling")},prev:function(t){return M(t,"previousSibling")},nextAll:function(t){return y.dir(t,"nextSibling")},prevAll:function(t){return y.dir(t,"previousSibling")},nextUntil:function(t,e,n){return y.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return y.dir(t,"previousSibling",n)},siblings:function(t){return y.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return y.sibling(t.firstChild)},contents:function(t){return t.contentDocument||y.merge([],t.childNodes)}},(function(t,e){y.fn[t]=function(n,r){var i=y.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=y.filter(r,i)),this.length>1&&(O[t]||y.unique(i),k.test(t)&&i.reverse()),this.pushStack(i)}}));var N,L=/\S+/g,R={};function D(){d.removeEventListener("DOMContentLoaded",D,!1),r.removeEventListener("load",D,!1),y.ready()}y.Callbacks=function(t){t="string"==typeof t?R[t]||function(t){var e=R[t]={};return y.each(t.match(L)||[],(function(t,n){e[n]=!0})),e}(t):y.extend({},t);var e,n,r,i,o,a,s=[],l=!t.once&&[],u=function(h){for(e=t.memory&&h,n=!0,a=i||0,i=0,o=s.length,r=!0;s&&o>a;a++)if(!1===s[a].apply(h[0],h[1])&&t.stopOnFalse){e=!1;break}r=!1,s&&(l?l.length&&u(l.shift()):e?s=[]:c.disable())},c={add:function(){if(s){var n=s.length;!function e(n){y.each(n,(function(n,r){var i=y.type(r);"function"===i?t.unique&&c.has(r)||s.push(r):r&&r.length&&"string"!==i&&e(r)}))}(arguments),r?o=s.length:e&&(i=n,u(e))}return this},remove:function(){return s&&y.each(arguments,(function(t,e){for(var n;(n=y.inArray(e,s,n))>-1;)s.splice(n,1),r&&(o>=n&&o--,a>=n&&a--)})),this},has:function(t){return t?y.inArray(t,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=l=e=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,e||c.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!s||n&&!l||(e=[t,(e=e||[]).slice?e.slice():e],r?l.push(e):u(e)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},y.extend({Deferred:function(t){var e=[["resolve","done",y.Callbacks("once memory"),"resolved"],["reject","fail",y.Callbacks("once memory"),"rejected"],["notify","progress",y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return y.Deferred((function(n){y.each(e,(function(e,o){var a=y.isFunction(t[e])&&t[e];i[o[1]]((function(){var t=a&&a.apply(this,arguments);t&&y.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)}))})),t=null})).promise()},promise:function(t){return null!=t?y.extend(t,r):r}},i={};return r.pipe=r.then,y.each(e,(function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add((function(){n=s}),e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith})),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=a.call(arguments),s=o.length,l=1!==s||t&&y.isFunction(t.promise)?s:0,u=1===l?t:y.Deferred(),c=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?a.call(arguments):i,r===e?u.notifyWith(n,r):--l||u.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&y.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,e)):--l;return l||u.resolveWith(r,o),u.promise()}}),y.fn.ready=function(t){return y.ready.promise().done(t),this},y.extend({isReady:!1,readyWait:1,holdReady:function(t){t?y.readyWait++:y.ready(!0)},ready:function(t){(!0===t?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==t&&--y.readyWait>0||(N.resolveWith(d,[y]),y.fn.triggerHandler&&(y(d).triggerHandler("ready"),y(d).off("ready"))))}}),y.ready.promise=function(t){return N||(N=y.Deferred(),"complete"===d.readyState?setTimeout(y.ready):(d.addEventListener("DOMContentLoaded",D,!1),r.addEventListener("load",D,!1))),N.promise(t)},y.ready.promise();var F=y.access=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===y.type(n))for(s in i=!0,n)y.access(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y.isFunction(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(y(t),n)})),e))for(;l>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o};function j(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=y.expando+j.uid++}y.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},j.uid=1,j.accepts=y.acceptData,j.prototype={key:function(t){if(!j.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=j.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,y.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(y.isEmptyObject(o))y.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(r=this.get(t,e))?r:this.get(t,y.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{y.isArray(e)?r=e.concat(e.map(y.camelCase)):(i=y.camelCase(e),r=e in a?[e,i]:(r=i)in a?[r]:r.match(L)||[]),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(t){return!y.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var z=new j,G=new j,B=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/([A-Z])/g;function q(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(U,"-$1").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:B.test(n)?y.parseJSON(n):n)}catch(t){}G.set(t,e,n)}else n=void 0;return n}y.extend({hasData:function(t){return G.hasData(t)||z.hasData(t)},data:function(t,e,n){return G.access(t,e,n)},removeData:function(t,e){G.remove(t,e)},_data:function(t,e,n){return z.access(t,e,n)},_removeData:function(t,e){z.remove(t,e)}}),y.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=G.get(o),1===o.nodeType&&!z.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=y.camelCase(r.slice(5)),q(o,r,i[r]));z.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){G.set(this,t)})):F(this,(function(e){var n,r=y.camelCase(t);if(o&&void 0===e){if(void 0!==(n=G.get(o,t)))return n;if(void 0!==(n=G.get(o,r)))return n;if(void 0!==(n=q(o,r,void 0)))return n}else this.each((function(){var n=G.get(this,r);G.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&G.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){G.remove(this,t)}))}}),y.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=z.get(t,e),n&&(!r||y.isArray(n)?r=z.access(t,e,y.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=y.queue(t,e),r=n.length,i=n.shift(),o=y._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){y.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return z.get(t,n)||z.access(t,n,{empty:y.Callbacks("once memory").add((function(){z.remove(t,[e+"queue",n])}))})}}),y.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?y.queue(this[0],t):void 0===e?this:this.each((function(){var n=y.queue(this,t,e);y._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&y.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){y.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=y.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=z.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],H=function(t,e){return t=e||t,"none"===y.css(t,"display")||!y.contains(t.ownerDocument,t)},Y=/^(?:checkbox|radio)$/i;!function(){var t=d.createDocumentFragment().appendChild(d.createElement("div")),e=d.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),f.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var X="undefined";f.focusinBubbles="onfocusin"in r;var Z=/^key/,K=/^(?:mouse|pointer|contextmenu)|click/,J=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;function $(){return!0}function tt(){return!1}function et(){try{return d.activeElement}catch(t){}}y.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,h,p,f,d,g,m=z.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=y.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return typeof y!==X&&y.event.triggered!==e.type?y.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(L)||[""]).length;u--;)f=g=(s=Q.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),f&&(h=y.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=y.event.special[f]||{},c=y.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&y.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=l[f])||((p=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,d,a)||t.addEventListener&&t.addEventListener(f,a,!1)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),y.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,h,p,f,d,g,m=z.hasData(t)&&z.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(L)||[""]).length;u--;)if(f=g=(s=Q.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),f){for(h=y.event.special[f]||{},p=l[f=(r?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(t,c));a&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,d,m.handle)||y.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)y.event.remove(t,f+e[u],n,r,!0);y.isEmptyObject(l)&&(delete m.handle,z.remove(t,"events"))}},trigger:function(t,e,n,i){var o,a,s,l,u,c,h,f=[n||d],g=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(a=s=n=n||d,3!==n.nodeType&&8!==n.nodeType&&!J.test(g+y.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=g.indexOf(":")<0&&"on"+g,(t=t[y.expando]?t:new y.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:y.makeArray(e,[t]),h=y.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!y.isWindow(n)){for(l=h.delegateType||g,J.test(l+g)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(n.ownerDocument||d)&&f.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=f[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||g,(c=(z.get(a,"events")||{})[t.type]&&z.get(a,"handle"))&&c.apply(a,e),(c=u&&a[u])&&c.apply&&y.acceptData(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!y.acceptData(n)||u&&y.isFunction(n[g])&&!y.isWindow(n)&&((s=n[u])&&(n[u]=null),y.event.triggered=g,n[g](),y.event.triggered=void 0,s&&(n[u]=s)),t.result}},dispatch:function(t){t=y.event.fix(t);var e,n,r,i,o,s=[],l=a.call(arguments),u=(z.get(this,"events")||{})[t.type]||[],c=y.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=y.event.handlers.call(this,t,u),e=0;(i=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,void 0!==(r=((y.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(r=[],n=0;s>n;n++)void 0===r[i=(o=e[n]).selector+" "]&&(r[i]=o.needsContext?y(i,this).index(l)>=0:y.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(r=(n=t.target.ownerDocument||d).documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[y.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=K.test(i)?this.mouseHooks:Z.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new y.Event(o),e=r.length;e--;)t[n=r[e]]=o[n];return t.target||(t.target=d),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==et()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===et()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&y.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return y.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=y.extend(new y.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?y.event.trigger(i,null,e):y.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},y.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},y.Event=function(t,e){return this instanceof y.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?$:tt):this.type=t,e&&y.extend(this,e),this.timeStamp=t&&t.timeStamp||y.now(),void(this[y.expando]=!0)):new y.Event(t,e)},y.Event.prototype={isDefaultPrevented:tt,isPropagationStopped:tt,isImmediatePropagationStopped:tt,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=$,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=$,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=$,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){y.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return(!r||r!==this&&!y.contains(this,r))&&(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),f.focusinBubbles||y.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){y.event.simulate(e,t.target,y.event.fix(t),!0)};y.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=z.access(r,e);i||r.addEventListener(t,n,!0),z.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=z.access(r,e)-1;i?z.access(r,e,i):(r.removeEventListener(t,n,!0),z.remove(r,e))}}})),y.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){for(a in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(a,e,n,t[a],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),!1===r)r=tt;else if(!r)return this;return 1===i&&(o=r,r=function(t){return y().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=y.guid++)),this.each((function(){y.event.add(this,t,r,n,e)}))},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,y(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(!1===e||"function"==typeof e)&&(n=e,e=void 0),!1===n&&(n=tt),this.each((function(){y.event.remove(this,t,n,e)}))},trigger:function(t,e){return this.each((function(){y.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];return n?y.event.trigger(t,e,n,!0):void 0}});var nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rt=/<([\w:]+)/,it=/<|&#?\w+;/,ot=/<(?:script|style|link)/i,at=/checked\s*(?:[^=]|=\s*.checked.)/i,st=/^$|\/(?:java|ecma)script/i,lt=/^true\/(.*)/,ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ht(t,e){return y.nodeName(t,"table")&&y.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function ft(t){var e=lt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function dt(t,e){for(var n=0,r=t.length;r>n;n++)z.set(t[n],"globalEval",!e||z.get(e[n],"globalEval"))}function gt(t,e){var n,r,i,o,a,s,l,u;if(1===e.nodeType){if(z.hasData(t)&&(o=z.access(t),a=z.set(e,o),u=o.events))for(i in delete a.handle,a.events={},u)for(n=0,r=u[i].length;r>n;n++)y.event.add(e,i,u[i][n]);G.hasData(t)&&(s=G.access(t),l=y.extend({},s),G.set(e,l))}}function yt(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&y.nodeName(t,e)?y.merge([t],n):n}function mt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Y.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,y.extend({clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),l=y.contains(t.ownerDocument,t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||y.isXMLDoc(t)))for(a=yt(s),r=0,i=(o=yt(t)).length;i>r;r++)mt(o[r],a[r]);if(e)if(n)for(o=o||yt(t),a=a||yt(s),r=0,i=o.length;i>r;r++)gt(o[r],a[r]);else gt(t,s);return(a=yt(s,"script")).length>0&&dt(a,!l&&yt(t,"script")),s},buildFragment:function(t,e,n,r){for(var i,o,a,s,l,u,c=e.createDocumentFragment(),h=[],p=0,f=t.length;f>p;p++)if((i=t[p])||0===i)if("object"===y.type(i))y.merge(h,i.nodeType?[i]:i);else if(it.test(i)){for(o=o||c.appendChild(e.createElement("div")),a=(rt.exec(i)||["",""])[1].toLowerCase(),s=ct[a]||ct._default,o.innerHTML=s[1]+i.replace(nt,"<$1></$2>")+s[2],u=s[0];u--;)o=o.lastChild;y.merge(h,o.childNodes),(o=c.firstChild).textContent=""}else h.push(e.createTextNode(i));for(c.textContent="",p=0;i=h[p++];)if((!r||-1===y.inArray(i,r))&&(l=y.contains(i.ownerDocument,i),o=yt(c.appendChild(i),"script"),l&&dt(o),n))for(u=0;i=o[u++];)st.test(i.type||"")&&n.push(i);return c},cleanData:function(t){for(var e,n,r,i,o=y.event.special,a=0;void 0!==(n=t[a]);a++){if(y.acceptData(n)&&(i=n[z.expando])&&(e=z.cache[i])){if(e.events)for(r in e.events)o[r]?y.event.remove(n,r):y.removeEvent(n,r,e.handle);z.cache[i]&&delete z.cache[i]}delete G.cache[n[G.expando]]}}}),y.fn.extend({text:function(t){return F(this,(function(t){return void 0===t?y.text(this):this.empty().each((function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return this.domManip(arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ht(this,t).appendChild(t)}))},prepend:function(){return this.domManip(arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=ht(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return this.domManip(arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return this.domManip(arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},remove:function(t,e){for(var n,r=t?y.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||y.cleanData(yt(n)),n.parentNode&&(e&&y.contains(n.ownerDocument,n)&&dt(yt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(y.cleanData(yt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return y.clone(this,t,e)}))},html:function(t){return F(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ot.test(t)&&!ct[(rt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(nt,"<$1></$2>");try{for(;r>n;n++)1===(e=this[n]||{}).nodeType&&(y.cleanData(yt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,(function(e){t=this.parentNode,y.cleanData(yt(this)),t&&t.replaceChild(e,this)})),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=s.apply([],t);var n,r,i,o,a,l,u=0,c=this.length,h=this,p=c-1,d=t[0],g=y.isFunction(d);if(g||c>1&&"string"==typeof d&&!f.checkClone&&at.test(d))return this.each((function(n){var r=h.eq(n);g&&(t[0]=d.call(this,n,r.html())),r.domManip(t,e)}));if(c&&(r=(n=y.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=r),r)){for(o=(i=y.map(yt(n,"script"),pt)).length;c>u;u++)a=n,u!==p&&(a=y.clone(a,!0,!0),o&&y.merge(i,yt(a,"script"))),e.call(this[u],a,u);if(o)for(l=i[i.length-1].ownerDocument,y.map(i,ft),u=0;o>u;u++)a=i[u],st.test(a.type||"")&&!z.access(a,"globalEval")&&y.contains(l,a)&&(a.src?y._evalUrl&&y._evalUrl(a.src):y.globalEval(a.textContent.replace(ut,"")))}return this}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){y.fn[t]=function(t){for(var n,r=[],i=y(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),y(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}}));var vt,wt={};function bt(t,e){var n,i=y(e.createElement(t)).appendTo(e.body),o=r.getDefaultComputedStyle&&(n=r.getDefaultComputedStyle(i[0]))?n.display:y.css(i[0],"display");return i.detach(),o}function xt(t){var e=d,n=wt[t];return n||("none"!==(n=bt(t,e))&&n||((e=(vt=(vt||y("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=bt(t,e),vt.detach()),wt[t]=n),n}var _t=/^margin/,Et=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),St=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):r.getComputedStyle(t,null)};function Ct(t,e,n){var r,i,o,a,s=t.style;return(n=n||St(t))&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||y.contains(t.ownerDocument,t)||(a=y.style(t,e)),Et.test(a)&&_t.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Tt(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}!function(){var t,e,n=d.documentElement,i=d.createElement("div"),o=d.createElement("div");if(o.style){function a(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",n.appendChild(i);var a=r.getComputedStyle(o,null);t="1%"!==a.top,e="4px"===a.width,n.removeChild(i)}o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===o.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(o),r.getComputedStyle&&y.extend(f,{pixelPosition:function(){return a(),t},boxSizingReliable:function(){return null==e&&a(),e},reliableMarginRight:function(){var t,e=o.appendChild(d.createElement("div"));return e.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",o.style.width="1px",n.appendChild(i),t=!parseFloat(r.getComputedStyle(e,null).marginRight),n.removeChild(i),o.removeChild(e),t}})}}(),y.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};var It=/^(none|table(?!-c[ea]).+)/,At=new RegExp("^("+W+")(.*)$","i"),Pt=new RegExp("^([+-])=("+W+")","i"),kt={position:"absolute",visibility:"hidden",display:"block"},Ot={letterSpacing:"0",fontWeight:"400"},Mt=["Webkit","O","Moz","ms"];function Nt(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Mt.length;i--;)if((e=Mt[i]+n)in t)return e;return r}function Lt(t,e,n){var r=At.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function Rt(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=y.css(t,n+V[o],!0,i)),r?("content"===n&&(a-=y.css(t,"padding"+V[o],!0,i)),"margin"!==n&&(a-=y.css(t,"border"+V[o]+"Width",!0,i))):(a+=y.css(t,"padding"+V[o],!0,i),"padding"!==n&&(a+=y.css(t,"border"+V[o]+"Width",!0,i)));return a}function Dt(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=St(t),a="border-box"===y.css(t,"boxSizing",!1,o);if(0>=i||null==i){if((0>(i=Ct(t,e,o))||null==i)&&(i=t.style[e]),Et.test(i))return i;r=a&&(f.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+Rt(t,e,n||(a?"border":"content"),r,o)+"px"}function Ft(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)(r=t[a]).style&&(o[a]=z.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&H(r)&&(o[a]=z.access(r,"olddisplay",xt(r.nodeName)))):(i=H(r),"none"===n&&i||z.set(r,"olddisplay",i?n:y.css(r,"display"))));for(a=0;s>a;a++)(r=t[a]).style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function jt(t,e,n,r,i){return new jt.prototype.init(t,e,n,r,i)}y.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ct(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=y.camelCase(e),l=t.style;return e=y.cssProps[s]||(y.cssProps[s]=Nt(l,s)),a=y.cssHooks[e]||y.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e]:("string"==(o=typeof n)&&(i=Pt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(y.css(t,e)),o="number"),void(null!=n&&n==n&&("number"!==o||y.cssNumber[s]||(n+="px"),f.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l[e]=n))))}},css:function(t,e,n,r){var i,o,a,s=y.camelCase(e);return e=y.cssProps[s]||(y.cssProps[s]=Nt(t.style,s)),(a=y.cssHooks[e]||y.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Ct(t,e,r)),"normal"===i&&e in Ot&&(i=Ot[e]),""===n||n?(o=parseFloat(i),!0===n||y.isNumeric(o)?o||0:i):i}}),y.each(["height","width"],(function(t,e){y.cssHooks[e]={get:function(t,n,r){return n?It.test(y.css(t,"display"))&&0===t.offsetWidth?y.swap(t,kt,(function(){return Dt(t,e,r)})):Dt(t,e,r):void 0},set:function(t,n,r){var i=r&&St(t);return Lt(0,n,r?Rt(t,e,r,"border-box"===y.css(t,"boxSizing",!1,i),i):0)}}})),y.cssHooks.marginRight=Tt(f.reliableMarginRight,(function(t,e){return e?y.swap(t,{display:"inline-block"},Ct,[t,"marginRight"]):void 0})),y.each({margin:"",padding:"",border:"Width"},(function(t,e){y.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+V[r]+e]=o[r]||o[r-2]||o[0];return i}},_t.test(t)||(y.cssHooks[t+e].set=Lt)})),y.fn.extend({css:function(t,e){return F(this,(function(t,e,n){var r,i,o={},a=0;if(y.isArray(e)){for(r=St(t),i=e.length;i>a;a++)o[e[a]]=y.css(t,e[a],!1,r);return o}return void 0!==n?y.style(t,e,n):y.css(t,e)}),t,e,arguments.length>1)},show:function(){return Ft(this,!0)},hide:function(){return Ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){H(this)?y(this).show():y(this).hide()}))}}),y.Tween=jt,jt.prototype={constructor:jt,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(y.cssNumber[n]?"":"px")},cur:function(){var t=jt.propHooks[this.prop];return t&&t.get?t.get(this):jt.propHooks._default.get(this)},run:function(t){var e,n=jt.propHooks[this.prop];return this.options.duration?this.pos=e=y.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):jt.propHooks._default.set(this),this}},jt.prototype.init.prototype=jt.prototype,jt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=y.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){y.fx.step[t.prop]?y.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[y.cssProps[t.prop]]||y.cssHooks[t.prop])?y.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},jt.propHooks.scrollTop=jt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},y.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},y.fx=jt.prototype.init,y.fx.step={};var zt,Gt,Bt=/^(?:toggle|show|hide)$/,Ut=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),qt=/queueHooks$/,Wt=[function(t,e,n){var r,i,o,a,s,l,u,c=this,h={},p=t.style,f=t.nodeType&&H(t),d=z.get(t,"fxshow");for(r in n.queue||(null==(s=y._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always((function(){c.always((function(){s.unqueued--,y.queue(t,"fx").length||s.empty.fire()}))}))),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===("none"===(u=y.css(t,"display"))?z.get(t,"olddisplay")||xt(t.nodeName):u)&&"none"===y.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),e)if(i=e[r],Bt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!d||void 0===d[r])continue;f=!0}h[r]=d&&d[r]||y.style(t,r)}else u=void 0;if(y.isEmptyObject(h))"inline"===("none"===u?xt(t.nodeName):u)&&(p.display=u);else for(r in d?"hidden"in d&&(f=d.hidden):d=z.access(t,"fxshow",{}),o&&(d.hidden=!f),f?y(t).show():c.done((function(){y(t).hide()})),c.done((function(){var e;for(e in z.remove(t,"fxshow"),h)y.style(t,e,h[e])})),h)a=Xt(f?d[r]:0,r,c),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],Vt={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Ut.exec(e),o=i&&i[3]||(y.cssNumber[t]?"":"px"),a=(y.cssNumber[t]||"px"!==o&&+r)&&Ut.exec(y.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",y.style(n.elem,t,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function Ht(){return setTimeout((function(){zt=void 0})),zt=y.now()}function Yt(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)i["margin"+(n=V[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function Xt(t,e,n){for(var r,i=(Vt[e]||[]).concat(Vt["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function Zt(t,e,n){var r,i,o=0,a=Wt.length,s=y.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var e=zt||Ht(),n=Math.max(0,u.startTime+u.duration-e),r=1-(n/u.duration||0),o=0,a=u.tweens.length;a>o;o++)u.tweens[o].run(r);return s.notifyWith(t,[u,r,n]),1>r&&a?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:y.extend({},e),opts:y.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:zt||Ht(),duration:n.duration,tweens:[],createTween:function(e,n){var r=y.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=y.camelCase(n)],o=t[n],y.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=y.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);a>o;o++)if(r=Wt[o].call(u,t,c,u.opts))return r;return y.map(c,Xt,u),y.isFunction(u.opts.start)&&u.opts.start.call(t,u),y.fx.timer(y.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}y.Animation=y.extend(Zt,{tweener:function(t,e){y.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],Vt[n]=Vt[n]||[],Vt[n].unshift(e)},prefilter:function(t,e){e?Wt.unshift(t):Wt.push(t)}}),y.speed=function(t,e,n){var r=t&&"object"==typeof t?y.extend({},t):{complete:n||!n&&e||y.isFunction(t)&&t,duration:t,easing:n&&e||e&&!y.isFunction(e)&&e};return r.duration=y.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in y.fx.speeds?y.fx.speeds[r.duration]:y.fx.speeds._default,(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){y.isFunction(r.old)&&r.old.call(this),r.queue&&y.dequeue(this,r.queue)},r},y.fn.extend({fadeTo:function(t,e,n,r){return this.filter(H).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=y.isEmptyObject(t),o=y.speed(e,n,r),a=function(){var e=Zt(this,y.extend({},t),o);(i||z.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=y.timers,a=z.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&qt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&y.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=z.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=y.timers,a=r?r.length:0;for(n.finish=!0,y.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),y.each(["toggle","show","hide"],(function(t,e){var n=y.fn[e];y.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Yt(e,!0),t,r,i)}})),y.each({slideDown:Yt("show"),slideUp:Yt("hide"),slideToggle:Yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){y.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),y.timers=[],y.fx.tick=function(){var t,e=0,n=y.timers;for(zt=y.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||y.fx.stop(),zt=void 0},y.fx.timer=function(t){y.timers.push(t),t()?y.fx.start():y.timers.pop()},y.fx.interval=13,y.fx.start=function(){Gt||(Gt=setInterval(y.fx.tick,y.fx.interval))},y.fx.stop=function(){clearInterval(Gt),Gt=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(t,e){return t=y.fx&&y.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}}))},function(){var t=d.createElement("input"),e=d.createElement("select"),n=e.appendChild(d.createElement("option"));t.type="checkbox",f.checkOn=""!==t.value,f.optSelected=n.selected,e.disabled=!0,f.optDisabled=!n.disabled,(t=d.createElement("input")).value="t",t.type="radio",f.radioValue="t"===t.value}();var Kt,Jt=y.expr.attrHandle;y.fn.extend({attr:function(t,e){return F(this,y.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){y.removeAttr(this,t)}))}}),y.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===X?y.prop(t,e,n):(1===o&&y.isXMLDoc(t)||(e=e.toLowerCase(),r=y.attrHooks[e]||(y.expr.match.bool.test(e)?Kt:void 0)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=y.find.attr(t,e))?void 0:i:null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void y.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(L);if(o&&1===t.nodeType)for(;n=o[i++];)r=y.propFix[n]||n,y.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&y.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Kt={set:function(t,e,n){return!1===e?y.removeAttr(t,n):t.setAttribute(n,n),n}},y.each(y.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=Jt[e]||y.find.attr;Jt[e]=function(t,e,r){var i,o;return r||(o=Jt[e],Jt[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,Jt[e]=o),i}}));var Qt=/^(?:input|select|textarea|button)$/i;y.fn.extend({prop:function(t,e){return F(this,y.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[y.propFix[t]||t]}))}}),y.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!y.isXMLDoc(t))&&(e=y.propFix[e]||e,i=y.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Qt.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),f.optSelected||(y.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){y.propFix[this.toLowerCase()]=this}));var $t=/[\t\r\n\f]/g;y.fn.extend({addClass:function(t){var e,n,r,i,o,a,s="string"==typeof t&&t,l=0,u=this.length;if(y.isFunction(t))return this.each((function(e){y(this).addClass(t.call(this,e,this.className))}));if(s)for(e=(t||"").match(L)||[];u>l;l++)if(r=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace($t," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=y.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0===arguments.length||"string"==typeof t&&t,l=0,u=this.length;if(y.isFunction(t))return this.each((function(e){y(this).removeClass(t.call(this,e,this.className))}));if(s)for(e=(t||"").match(L)||[];u>l;l++)if(r=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace($t," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?y.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(y.isFunction(t)?function(n){y(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,r=0,i=y(this),o=t.match(L)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===X||"boolean"===n)&&(this.className&&z.set(this,"__className__",this.className),this.className=this.className||!1===t?"":z.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace($t," ").indexOf(e)>=0)return!0;return!1}});var te=/\r/g;y.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y.isFunction(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,y(this).val()):t)?i="":"number"==typeof i?i+="":y.isArray(i)&&(i=y.map(i,(function(t){return null==t?"":t+""}))),(e=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=y.valHooks[i.type]||y.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(te,""):null==n?"":n:void 0}}),y.extend({valHooks:{option:{get:function(t){var e=y.find.attr(t,"value");return null!=e?e:y.trim(y.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(!(!(n=r[l]).selected&&l!==i||(f.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&y.nodeName(n.parentNode,"optgroup"))){if(e=y(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=y.makeArray(e),a=i.length;a--;)((r=i[a]).selected=y.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),y.each(["radio","checkbox"],(function(){y.valHooks[this]={set:function(t,e){return y.isArray(e)?t.checked=y.inArray(y(t).val(),e)>=0:void 0}},f.checkOn||(y.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(t,e){y.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),y.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ee=y.now(),ne=/\?/;y.parseJSON=function(t){return JSON.parse(t+"")},y.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&y.error("Invalid XML: "+t),e};var re=/#.*$/,ie=/([?&])_=[^&]*/,oe=/^(.*?):[ \t]*([^\r\n]*)$/gm,ae=/^(?:GET|HEAD)$/,se=/^\/\//,le=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ue={},ce={},he="*/".concat("*"),pe=r.location.href,fe=le.exec(pe.toLowerCase())||[];function de(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(L)||[];if(y.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function ge(t,e,n,r){var i={},o=t===ce;function a(s){var l;return i[s]=!0,y.each(t[s]||[],(function(t,s){var u=s(e,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)})),l}return a(e.dataTypes[0])||!i["*"]&&a("*")}function ye(t,e){var n,r,i=y.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&y.extend(!0,t,r),t}y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pe,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(fe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":he,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":y.parseJSON,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ye(ye(t,y.ajaxSettings),e):ye(y.ajaxSettings,t)},ajaxPrefilter:de(ue),ajaxTransport:de(ce),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,i,o,a,s,l,u,c=y.ajaxSetup({},e),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?y(h):y.event,f=y.Deferred(),d=y.Callbacks("once memory"),g=c.statusCode||{},m={},v={},w=0,b="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!o)for(o={};e=oe.exec(i);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?i:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=v[n]=v[n]||t,m[t]=e),this},overrideMimeType:function(t){return w||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||b;return n&&n.abort(e),_(0,e),this}};if(f.promise(x).complete=d.add,x.success=x.done,x.error=x.fail,c.url=((t||c.url||pe)+"").replace(re,"").replace(se,fe[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=y.trim(c.dataType||"*").toLowerCase().match(L)||[""],null==c.crossDomain&&(s=le.exec(c.url.toLowerCase()),c.crossDomain=!(!s||s[1]===fe[1]&&s[2]===fe[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(fe[3]||("http:"===fe[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=y.param(c.data,c.traditional)),ge(ue,c,e,x),2===w)return x;for(u in(l=y.event&&c.global)&&0==y.active++&&y.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ae.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(ne.test(r)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=ie.test(r)?r.replace(ie,"$1_="+ee++):r+(ne.test(r)?"&":"?")+"_="+ee++)),c.ifModified&&(y.lastModified[r]&&x.setRequestHeader("If-Modified-Since",y.lastModified[r]),y.etag[r]&&x.setRequestHeader("If-None-Match",y.etag[r])),(c.data&&c.hasContent&&!1!==c.contentType||e.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+he+"; q=0.01":""):c.accepts["*"]),c.headers)x.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(h,x,c)||2===w))return x.abort();for(u in b="abort",{success:1,error:1,complete:1})x[u](c[u]);if(n=ge(ce,c,e,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(a=setTimeout((function(){x.abort("timeout")}),c.timeout));try{w=1,n.send(m,_)}catch(t){if(!(2>w))throw t;_(-1,t)}}else _(-1,"No Transport");function _(t,e,o,s){var u,m,v,b,_,E=e;2!==w&&(w=2,a&&clearTimeout(a),n=void 0,i=s||"",x.readyState=t>0?4:0,u=t>=200&&300>t||304===t,o&&(b=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}(c,x,o)),b=function(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(c,b,x,u),u?(c.ifModified&&((_=x.getResponseHeader("Last-Modified"))&&(y.lastModified[r]=_),(_=x.getResponseHeader("etag"))&&(y.etag[r]=_)),204===t||"HEAD"===c.type?E="nocontent":304===t?E="notmodified":(E=b.state,m=b.data,u=!(v=b.error))):(v=E,(t||!E)&&(E="error",0>t&&(t=0))),x.status=t,x.statusText=(e||E)+"",u?f.resolveWith(h,[m,E,x]):f.rejectWith(h,[x,E,v]),x.statusCode(g),g=void 0,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[x,c,u?m:v]),d.fireWith(h,[x,E]),l&&(p.trigger("ajaxComplete",[x,c]),--y.active||y.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return y.get(t,e,n,"json")},getScript:function(t,e){return y.get(t,void 0,e,"script")}}),y.each(["get","post"],(function(t,e){y[e]=function(t,n,r,i){return y.isFunction(n)&&(i=i||r,r=n,n=void 0),y.ajax({url:t,type:e,dataType:i,data:n,success:r})}})),y._evalUrl=function(t){return y.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},y.fn.extend({wrapAll:function(t){var e;return y.isFunction(t)?this.each((function(e){y(this).wrapAll(t.call(this,e))})):(this[0]&&(e=y(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this)},wrapInner:function(t){return this.each(y.isFunction(t)?function(e){y(this).wrapInner(t.call(this,e))}:function(){var e=y(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y.isFunction(t);return this.each((function(n){y(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(){return this.parent().each((function(){y.nodeName(this,"body")||y(this).replaceWith(this.childNodes)})).end()}}),y.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},y.expr.filters.visible=function(t){return!y.expr.filters.hidden(t)};var me=/%20/g,ve=/\[\]$/,we=/\r?\n/g,be=/^(?:submit|button|image|reset|file)$/i,xe=/^(?:input|select|textarea|keygen)/i;function _e(t,e,n,r){var i;if(y.isArray(e))y.each(e,(function(e,i){n||ve.test(t)?r(t,i):_e(t+"["+("object"==typeof i?e:"")+"]",i,n,r)}));else if(n||"object"!==y.type(e))r(t,e);else for(i in e)_e(t+"["+i+"]",e[i],n,r)}y.param=function(t,e){var n,r=[],i=function(t,e){e=y.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=y.ajaxSettings&&y.ajaxSettings.traditional),y.isArray(t)||t.jquery&&!y.isPlainObject(t))y.each(t,(function(){i(this.name,this.value)}));else for(n in t)_e(n,t[n],e,i);return r.join("&").replace(me,"+")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=y.prop(this,"elements");return t?y.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!y(this).is(":disabled")&&xe.test(this.nodeName)&&!be.test(t)&&(this.checked||!Y.test(t))})).map((function(t,e){var n=y(this).val();return null==n?null:y.isArray(n)?y.map(n,(function(t){return{name:e.name,value:t.replace(we,"\r\n")}})):{name:e.name,value:n.replace(we,"\r\n")}})).get()}}),y.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ee=0,Se={},Ce={0:200,1223:204},Te=y.ajaxSettings.xhr();r.attachEvent&&r.attachEvent("onunload",(function(){for(var t in Se)Se[t]()})),f.cors=!!Te&&"withCredentials"in Te,f.ajax=Te=!!Te,y.ajaxTransport((function(t){var e;return f.cors||Te&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),a=++Ee;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];for(i in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Se[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Ce[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Se[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}:void 0})),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return y.globalEval(t),t}}}),y.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),y.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain)return{send:function(r,i){e=y("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),d.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ie=[],Ae=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||y.expando+"_"+ee++;return this[t]=!0,t}}),y.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,a,s=!1!==t.jsonp&&(Ae.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ae.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=y.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ae,"$1"+i):!1!==t.jsonp&&(t.url+=(ne.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||y.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ie.push(i)),a&&y.isFunction(o)&&o(a[0]),a=o=void 0})),"script"):void 0})),y.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||d;var r=S.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=y.buildFragment([t],e,i),i&&i.length&&y(i).remove(),y.merge([],r.childNodes))};var Pe=y.fn.load;y.fn.load=function(t,e,n){if("string"!=typeof t&&Pe)return Pe.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=y.trim(t.slice(s)),t=t.slice(0,s)),y.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&y.ajax({url:t,type:i,dataType:"html",data:e}).done((function(t){o=arguments,a.html(r?y("<div>").append(y.parseHTML(t)).find(r):t)})).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){y.fn[e]=function(t){return this.on(e,t)}})),y.expr.filters.animated=function(t){return y.grep(y.timers,(function(e){return t===e.elem})).length};var ke=r.document.documentElement;function Oe(t){return y.isWindow(t)?t:9===t.nodeType&&t.defaultView}y.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u=y.css(t,"position"),c=y(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=y.css(t,"top"),l=y.css(t,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),y.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):c.css(h)}},y.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){y.offset.setOffset(this,t,e)}));var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,y.contains(e,r)?(typeof r.getBoundingClientRect!==X&&(i=r.getBoundingClientRect()),n=Oe(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===y.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),y.nodeName(t[0],"html")||(r=t.offset()),r.top+=y.css(t[0],"borderTopWidth",!0),r.left+=y.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-y.css(n,"marginTop",!0),left:e.left-r.left-y.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||ke;t&&!y.nodeName(t,"html")&&"static"===y.css(t,"position");)t=t.offsetParent;return t||ke}))}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;y.fn[t]=function(i){return F(this,(function(t,i,o){var a=Oe(t);return void 0===o?a?a[e]:t[i]:void(a?a.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):t[i]=o)}),t,i,arguments.length,null)}})),y.each(["top","left"],(function(t,e){y.cssHooks[e]=Tt(f.pixelPosition,(function(t,n){return n?(n=Ct(t,e),Et.test(n)?y(t).position()[e]+"px":n):void 0}))})),y.each({Height:"height",Width:"width"},(function(t,e){y.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){y.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return F(this,(function(e,n,r){var i;return y.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?y.css(e,n,a):y.style(e,n,r,a)}),e,o?r:void 0,o,null)}}))})),y.fn.size=function(){return this.length},y.fn.andSelf=y.fn.addBack,void 0===(n=function(){return y}.apply(e,[]))||(t.exports=n);var Me=r.jQuery,Ne=r.$;return y.noConflict=function(t){return r.$===y&&(r.$=Ne),t&&r.jQuery===y&&(r.jQuery=Me),y},typeof i===X&&(r.jQuery=r.$=y),y},"object"==typeof t.exports?t.exports=r.document?i(r,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(r)},7103:(t,e,n)=>{self,t.exports=function(){var t,e={226:function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*g}},875:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=n(692),s=Symbol("max"),l=Symbol("length"),u=Symbol("lengthCalculator"),c=Symbol("allowStale"),h=Symbol("maxAge"),p=Symbol("dispose"),f=Symbol("noDisposeOnSet"),d=Symbol("lruList"),g=Symbol("cache"),y=Symbol("updateAgeOnGet"),m=function(){return 1},v=function(){function t(e){if(r(this,t),"number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[s]=e.max||1/0;var n=e.length||m;if(this[u]="function"!=typeof n?m:n,this[c]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[h]=e.maxAge||0,this[p]=e.dispose,this[f]=e.noDisposeOnSet||!1,this[y]=e.updateAgeOnGet||!1,this.reset()}return o(t,[{key:"max",get:function(){return this[s]},set:function(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[s]=t||1/0,x(this)}},{key:"allowStale",get:function(){return this[c]},set:function(t){this[c]=!!t}},{key:"maxAge",get:function(){return this[h]},set:function(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[h]=t,x(this)}},{key:"lengthCalculator",get:function(){return this[u]},set:function(t){var e=this;"function"!=typeof t&&(t=m),t!==this[u]&&(this[u]=t,this[l]=0,this[d].forEach((function(t){t.length=e[u](t.value,t.key),e[l]+=t.length}))),x(this)}},{key:"length",get:function(){return this[l]}},{key:"itemCount",get:function(){return this[d].length}},{key:"rforEach",value:function(t,e){e=e||this;for(var n=this[d].tail;null!==n;){var r=n.prev;S(this,t,n,e),n=r}}},{key:"forEach",value:function(t,e){e=e||this;for(var n=this[d].head;null!==n;){var r=n.next;S(this,t,n,e),n=r}}},{key:"keys",value:function(){return this[d].toArray().map((function(t){return t.key}))}},{key:"values",value:function(){return this[d].toArray().map((function(t){return t.value}))}},{key:"reset",value:function(){var t=this;this[p]&&this[d]&&this[d].length&&this[d].forEach((function(e){return t[p](e.key,e.value)})),this[g]=new Map,this[d]=new a,this[l]=0}},{key:"dump",value:function(){var t=this;return this[d].map((function(e){return!b(t,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}})).toArray().filter((function(t){return t}))}},{key:"dumpLru",value:function(){return this[d]}},{key:"set",value:function(t,e,n){if((n=n||this[h])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,i=this[u](e,t);if(this[g].has(t)){if(i>this[s])return _(this,this[g].get(t)),!1;var o=this[g].get(t).value;return this[p]&&(this[f]||this[p](t,o.value)),o.now=r,o.maxAge=n,o.value=e,this[l]+=i-o.length,o.length=i,this.get(t),x(this),!0}var a=new E(t,e,i,r,n);return a.length>this[s]?(this[p]&&this[p](t,e),!1):(this[l]+=a.length,this[d].unshift(a),this[g].set(t,this[d].head),x(this),!0)}},{key:"has",value:function(t){if(!this[g].has(t))return!1;var e=this[g].get(t).value;return!b(this,e)}},{key:"get",value:function(t){return w(this,t,!0)}},{key:"peek",value:function(t){return w(this,t,!1)}},{key:"pop",value:function(){var t=this[d].tail;return t?(_(this,t),t.value):null}},{key:"del",value:function(t){_(this,this[g].get(t))}},{key:"load",value:function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var o=i-e;o>0&&this.set(r.k,r.v,o)}}}},{key:"prune",value:function(){var t=this;this[g].forEach((function(e,n){return w(t,n,!1)}))}}]),t}(),w=function(t,e,n){var r=t[g].get(e);if(r){var i=r.value;if(b(t,i)){if(_(t,r),!t[c])return}else n&&(t[y]&&(r.value.now=Date.now()),t[d].unshiftNode(r));return i.value}},b=function(t,e){if(!e||!e.maxAge&&!t[h])return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[h]&&n>t[h]},x=function(t){if(t[l]>t[s])for(var e=t[d].tail;t[l]>t[s]&&null!==e;){var n=e.prev;_(t,e),e=n}},_=function(t,e){if(e){var n=e.value;t[p]&&t[p](n.key,n.value),t[l]-=n.length,t[g].delete(n.key),t[d].removeNode(e)}},E=o((function t(e,n,i,o,a){r(this,t),this.key=e,this.value=n,this.length=i,this.now=o,this.maxAge=a||0})),S=function(t,e,n,r){var i=n.value;b(t,i)&&(_(t,n),t[c]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};t.exports=v},63:function(t){var e={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},n=" ",r=/(italic|oblique)$/i,i={};t.exports=function(t,o,a){var s=i[t];if(!s){Array.isArray(t)||(t=[t]);for(var l=400,u="normal",c=[],h=0,p=t.length;h<p;++h){var f=t[h].split(" "),d=f[f.length-1].toLowerCase();for(var g in"normal"==d||"italic"==d||"oblique"==d?(u=d,f.pop(),d=f[f.length-1].toLowerCase()):r.test(d)&&(d=d.replace(r,""),u=f[f.length-1].replace(d,"")),e){var y=f.length>1?f[f.length-2].toLowerCase():"";if(d==g||d==g.replace("-","")||y+"-"+d==g){l=e[g],f.pop(),y&&g.startsWith(y)&&f.pop();break}}"number"==typeof d&&(l=d);var m=f.join(n).replace("Klokantech Noto Sans","Noto Sans");-1!==m.indexOf(n)&&(m='"'+m+'"'),c.push(m)}s=i[t]=[u,l,c]}return s[0]+n+s[1]+n+o+"px"+(a?"/"+a:"")+n+s[2]}},98:function(t,e,n){"use strict";t.exports=i;var r=n(226);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function u(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function h(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function w(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+_(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return u(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return u(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,n){return s.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=l(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&c(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,w,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},72:function(t,e,n){var r,i,o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var p=n[r],f=i,d=o;for(e(n,i,r),a(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;a(n[f],p)<0;)f++;for(;a(n[d],p)>0;)d--}0===a(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;f(t,s)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!p(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));g(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);g(t,c,h,l,this.compareMinY);for(var p=c;p<=h;p+=l){var f=Math.min(p+l-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=a(t,0,d,this.toBBox),y=a(t,d,n,this.toBBox),m=(i=g,o=y,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),v=c(g)+c(y);m<p?(p=m,r=d,f=v<f?v:f):m===p&&v<f&&(f=v,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var p=t.children[c];s(o,t.leaf?i(p):p),u+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];s(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r},"object"==a(e)?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},760:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r=p;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=h(t,e,n);if("normal"===l.type){if(r=n.done?g:f,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=g,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",d="executing",g="completed",y={};function m(){}function v(){}function w(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(k([])));_&&_!==n&&i.call(_,a)&&(b=_);var E=w.prototype=m.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,a,s,l){var u=h(t[o],t,a);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"===r(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(p).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,l)}))}l(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}}function T(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function k(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:e,done:!0}}return v.prototype=w,u(E,"constructor",w),u(w,"constructor",v),v.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},S(C.prototype),u(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new C(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}("object"===r(t=n.nmd(t))?t.exports:{});try{regeneratorRuntime=i}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},338:function(t){(function(){var e;t.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return e},getLink:function(t){return"https://fonts.google.com/specimen/"+t.replace(/( )/g,"+")},normalizeName:function(t){return t}},e=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},617:function(t,e,n){var r=n(279);t.exports=function(t,e,n){var i=n&&n.debug||!1,o=n&&n.startIndex||0;i&&console.log("starting findTagByName with",e," and ",n);var a=r(t,"<".concat(e,"[ >]"),o);if(i&&console.log("start:",a),-1!==a){var s=t.slice(a+e.length),l=r(s,"[ /]"+e+">",0),u=-1===l;u&&(l=r(s,"[ /]>",0));var c=a+e.length+l+1+(u?0:e.length)+1;if(i&&console.log("end:",c),-1!==c){var h=t.slice(a,c);return{inner:u?null:h.slice(h.indexOf(">")+1,h.lastIndexOf("<")),outer:h,start:a,end:c}}}}},51:function(t,e,n){var r=n(617);t.exports=function(t,e,n){for(var i,o=[],a=n&&n.debug||!1,s=n&&n.startIndex||0;i=r(t,e,{debug:a,startIndex:s});)s=i.end,o.push(i);return a&&console.log("findTagsByName found",o.length,"tags"),o}},802:function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t,n,r){var i=r&&r.debug||!1;i&&console.log("getting "+n+" in "+t);var o="object"===e(t)?t.outer:t,a="".concat(n,'\\="([^"]*)"');i&&console.log("pattern:",a);var s=new RegExp(a).exec(o);if(i&&console.log("match:",s),s)return s[1]}},279:function(t){t.exports=function(t,e,n){var r=new RegExp(e).exec(t.slice(n));return r?n+r.index:-1}},518:function(t){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.head;case 1:if(!e){t.next=7;break}return t.next=4,e.value;case 4:e=e.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}},692:function(t,e,n){"use strict";function r(t){var e=this;if(e instanceof r||(e=new r),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}function i(t,e,n){var r=e===t.head?new s(n,null,e,t):new s(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function o(t,e){t.tail=new s(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function a(t,e){t.head=new s(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,e,n,r){if(!(this instanceof s))return new s(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},r.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)a(this,arguments[t]);return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},r.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},r.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},r.prototype.map=function(t,e){e=e||this;for(var n=new r,i=this.head;null!==i;)n.push(t.call(e,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(t,e){e=e||this;for(var n=new r,i=this.tail;null!==i;)n.push(t.call(e,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=t(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=t(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},r.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<e;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,o=this.tail;null!==o&&i>e;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;var o=[];for(n=0;r&&n<e;n++)o.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=i(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return o},r.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{n(518)(r)}catch(t){}},752:function(){},640:function(){},630:function(){},920:function(t,e,r){"use strict";function i(){return function(){throw new Error("Unimplemented abstract method.")}()}r.d(e,{default:function(){return QR}});var o=0;function a(t){return t.ol_uid||(t.ol_uid=String(++o))}var s,l="6.14.1",u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=this,r="Assertion failed. See https://openlayers.org/en/v"+l.split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,r)||this).code=e,n.name="AssertionError",n.message=r,n}return u(e,t),e}(Error);function h(t){t.stopPropagation()}var p=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),f="propertychange",d=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function g(t,e,n){for(var r,i,o=n||y,a=0,s=t.length,l=!1;a<s;)(i=+o(t[r=a+(s-a>>1)],e))<0?a=r+1:(s=r,l=!i);return l?a:~a}function y(t,e){return t>e?1:t<e?-1:0}function m(t,e){return t.indexOf(e)>=0}function v(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var i=void 0;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return r-1}function w(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function b(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function x(t,e){for(var n,r=t.length>>>0,i=0;i<r;i++)if(e(n=t[i],i,t))return n;return null}function _(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function E(t,e){var n;return t.every((function(r,i){return n=i,!e(r,i,t)}))?-1:n}function S(t,e,n){var r=e||y;return t.every((function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(o>0||n&&0===o)}))}function C(){return!0}function T(){return!1}function I(){}function A(t){var e,n,r,i=!1;return function(){var o=Array.prototype.slice.call(arguments);return i&&this===r&&_(o,n)||(i=!0,r=this,n=o,e=t.apply(this,arguments)),e}}function P(t){return function(){var e;try{e=t()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}var k="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function O(t){for(var e in t)delete t[e]}var M="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function N(t){var e;for(e in t)return!1;return!e}var L=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(t){function e(e){var n=t.call(this)||this;return n.t=e,n.S=null,n._=null,n.O=null,n}return L(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.O||(this.O={}),r=n[t]||(n[t]=[]);-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t,n=e?t:t.type,r=this.O&&this.O[n];if(r){var i=e?new p(t):t;i.target||(i.target=this.t||this);var o,a=this._||(this._={}),s=this.S||(this.S={});n in a||(a[n]=0,s[n]=0),++a[n];for(var l=0,u=r.length;l<u;++l)if(!1===(o="handleEvent"in r[l]?r[l].handleEvent(i):r[l].call(this,i))||i.propagationStopped){o=!1;break}if(0==--a[n]){var c=s[n];for(delete s[n];c--;)this.removeEventListener(n,I);delete a[n]}return o}},e.prototype.disposeInternal=function(){this.O&&O(this.O)},e.prototype.getListeners=function(t){return this.O&&this.O[t]||void 0},e.prototype.hasListener=function(t){return!!this.O&&(t?t in this.O:Object.keys(this.O).length>0)},e.prototype.removeEventListener=function(t,e){var n=this.O&&this.O[t];if(n){var r=n.indexOf(e);-1!==r&&(this.S&&t in this.S?(n[r]=I,++this.S[t]):(n.splice(r,1),0===n.length&&delete this.O[t]))}},e}(d),D="change",F="error",j="contextmenu",z="click",G="drop",B="keydown",U="keypress",q="load",W="touchmove",V="wheel";function H(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function Y(t,e,n,r){return H(t,e,n,r,!0)}function X(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),O(t))}var Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.T=0,e}return Z(e,t),e.prototype.changed=function(){++this.T,this.dispatchEvent(D)},e.prototype.getRevision=function(){return this.T},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=H(this,t[i],e);return r}return H(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var r=t.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=Y(this,t[i],e)}else n=Y(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)J(n);else if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(R);function J(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)X(t[e]);else X(t)}K.prototype.on,K.prototype.once,K.prototype.un;var Q=K,$=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.key=n,i.oldValue=r,i}return $(e,t),e}(p),et=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,a(n),n.A=null,void 0!==e&&n.setProperties(e),n}return $(e,t),e.prototype.get=function(t){var e;return this.A&&this.A.hasOwnProperty(t)&&(e=this.A[t]),e},e.prototype.getKeys=function(){return this.A&&Object.keys(this.A)||[]},e.prototype.getProperties=function(){return this.A&&k({},this.A)||{}},e.prototype.hasProperties=function(){return!!this.A},e.prototype.notify=function(t,e){var n;n="change:".concat(t),this.hasListener(n)&&this.dispatchEvent(new tt(n,t,e)),n=f,this.hasListener(n)&&this.dispatchEvent(new tt(n,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:".concat(t),e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:".concat(t),e)},e.prototype.set=function(t,e,n){var r=this.A||(this.A={});if(n)r[t]=e;else{var i=r[t];r[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.A&&k(this.A||(this.A={}),t.A)},e.prototype.unset=function(t,e){if(this.A&&t in this.A){var n=this.A[t];delete this.A[t],N(this.A)&&(this.A=null),e||this.notify(t,n)}},e}(Q),nt="add",rt="remove",it=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot="length",at=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.element=n,i.index=r,i}return it(e,t),e}(p),st=function(t){function e(e,n){var r=t.call(this)||this;r.on,r.once,r.un;var i=n||{};if(r.C=!!i.unique,r.R=e||[],r.C)for(var o=0,a=r.R.length;o<a;++o)r.P(r.R[o],o);return r.G(),r}return it(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.R,n=0,r=e.length;n<r;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.R},e.prototype.item=function(t){return this.R[t]},e.prototype.getLength=function(){return this.get(ot)},e.prototype.insertAt=function(t,e){this.C&&this.P(e),this.R.splice(t,0,e),this.G(),this.dispatchEvent(new at(nt,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.C&&this.P(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.R,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.R[t];return this.R.splice(t,1),this.G(),this.dispatchEvent(new at(rt,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.C&&this.P(e,t);var r=this.R[t];this.R[t]=e,this.dispatchEvent(new at(rt,r,t)),this.dispatchEvent(new at(nt,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.G=function(){this.set(ot,this.R.length)},e.prototype.P=function(t,e){for(var n=0,r=this.R.length;n<r;++n)if(this.R[n]===t&&n!==e)throw new c(58)},e}(et);function lt(t){return Math.pow(t,3)}function ut(t){return 1-lt(1-t)}function ct(t){return 3*t*t-2*t*t*t}function ht(t){return t}var pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(t){function e(e,n,r){var i=t.call(this)||this,o=r||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.D=void 0===o.transition?250:o.transition,i.U={},i.interpolate=!!o.interpolate,i}return pt(e,t),e.prototype.changed=function(){this.dispatchEvent(D)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.D=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){i()},e.prototype.getAlpha=function(t,e){if(!this.D)return 1;var n=this.U[t];if(n){if(-1===n)return 1}else n=e,this.U[t]=n;var r=e-n+1e3/60;return r>=this.D?1:lt(r/this.D)},e.prototype.inTransition=function(t){return!!this.D&&-1!==this.U[t]},e.prototype.endTransition=function(t){this.D&&(this.U[t]=-1)},e}(R),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(t){function e(e){var n=this;return(n=t.call(this,e.tileCoord,0,{transition:e.transition,interpolate:e.interpolate})||this).q=e.loader,n.B=null,n.W=null,n}return dt(e,t),e.prototype.getData=function(){return this.B},e.prototype.getError=function(){return this.W},e.prototype.load=function(){this.state=1,this.changed();var t=this;this.q().then((function(e){t.B=e,t.state=2,t.changed()})).catch((function(e){t.W=e,t.state=3,t.changed()}))},e}(ft);function yt(t,e){if(!t)throw new c(e)}var mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function vt(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(yt("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}var wt=function(t){function e(e){var n=t.call(this)||this;if(n.on,n.once,n.un,n.V=void 0,n.H="geometry",n.K=null,n.tt=void 0,n.nt=null,n.addChangeListener(n.H,n.it),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;n.setGeometry(r)}else{var i=e;n.setProperties(i)}return n}return mt(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.H)},e.prototype.getId=function(){return this.V},e.prototype.getGeometryName=function(){return this.H},e.prototype.getStyle=function(){return this.K},e.prototype.getStyleFunction=function(){return this.tt},e.prototype.rt=function(){this.changed()},e.prototype.it=function(){this.nt&&(X(this.nt),this.nt=null);var t=this.getGeometry();t&&(this.nt=H(t,D,this.rt,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.H,t)},e.prototype.setStyle=function(t){this.K=t,this.tt=t?vt(t):void 0,this.changed()},e.prototype.setId=function(t){this.V=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.H,this.it),this.H=t,this.addChangeListener(this.H,this.it),this.it()},e}(et),bt="XY",xt="XYZ",_t="XYM",Et="XYZM",St={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ct={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Tt={9001:Ct.METERS,9002:Ct.FEET,9003:Ct.USFEET,9101:Ct.RADIANS,9102:Ct.DEGREES};function It(t){return Tt[t]}var At={};At[Ct.RADIANS]=6370997/(2*Math.PI),At[Ct.DEGREES]=2*Math.PI*6370997/360,At[Ct.FEET]=.3048,At[Ct.METERS]=1,At[Ct.USFEET]=1200/3937;var Pt,kt=Ct,Ot="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Mt=-1!==Ot.indexOf("firefox"),Nt=-1!==Ot.indexOf("safari")&&-1==Ot.indexOf("chrom"),Lt=Nt&&!!(Ot.indexOf("version/15.4")>=0||Ot.match(/cpu (os|iphone os) 15_4 like mac os x/)),Rt=-1!==Ot.indexOf("webkit")&&-1==Ot.indexOf("edge"),Dt=-1!==Ot.indexOf("macintosh"),Ft="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,jt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,zt="undefined"!=typeof Image&&Image.prototype.decode,Gt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),Bt=new Array(6);function Ut(t){return Wt(t,1,0,0,1,0,0)}function qt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],c=e[2],h=e[3],p=e[4],f=e[5];return t[0]=n*l+i*u,t[1]=r*l+o*u,t[2]=n*c+i*h,t[3]=r*c+o*h,t[4]=n*p+i*f+a,t[5]=r*p+o*f+s,t}function Wt(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function Vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ht(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function Yt(t,e){var n=Math.cos(e),r=Math.sin(e);return qt(t,Wt(Bt,n,r,-r,n,0,0))}function Xt(t,e,n){return qt(t,Wt(Bt,e,0,0,n,0,0))}function Zt(t,e,n){return Wt(t,e,0,0,n,0,0)}function Kt(t,e,n){return qt(t,Wt(Bt,1,0,0,1,e,n))}function Jt(t,e,n,r,i,o,a,s){var l=Math.sin(o),u=Math.cos(o);return t[0]=r*u,t[1]=i*l,t[2]=-r*l,t[3]=i*u,t[4]=a*r*u-s*r*l+e,t[5]=a*i*l+s*i*u+n,t}function Qt(t,e){var n=$t(e);yt(0!==n,32);var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5];return t[0]=a/n,t[1]=-i/n,t[2]=-o/n,t[3]=r/n,t[4]=(o*l-a*s)/n,t[5]=-(r*l-i*s)/n,t}function $t(t){return t[0]*t[3]-t[1]*t[2]}function te(t){var e="matrix("+t.join(", ")+")";if(jt)return e;var n=Pt||(Pt=document.createElement("div"));return n.style.transform=e,n.style.transform}var ee="bottom-left",ne="bottom-right",re="top-left",ie="top-right",oe=0,ae=1,se=2,le=4,ue=8,ce=16;function he(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,r=t.length;n<r;++n)Ie(e,t[n]);return e}function pe(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function fe(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function de(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function ge(t,e){return me(t,e[0],e[1])}function ye(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function me(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function ve(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=oe;return a<n?l|=ce:a>i&&(l|=le),s<r?l|=ue:s>o&&(l|=se),l===oe&&(l=ae),l}function we(){return[1/0,1/0,-1/0,-1/0]}function be(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function xe(t){return be(1/0,1/0,-1/0,-1/0,t)}function _e(t,e){var n=t[0],r=t[1];return be(n,r,n,r,e)}function Ee(t,e,n,r,i){return Pe(xe(i),t,e,n,r)}function Se(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Ce(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function Te(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Ie(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Ae(t,e){for(var n=0,r=e.length;n<r;++n)Ie(t,e[n]);return t}function Pe(t,e,n,r,i){for(;n<r;n+=i)Oe(t,e[n],e[n+1]);return t}function ke(t,e){for(var n=0,r=e.length;n<r;++n)Ae(t,e[n]);return t}function Oe(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Me(t,e){var n;return(n=e(Le(t)))||(n=e(Re(t)))||(n=e(Ue(t)))?n:(n=e(Be(t)))||!1}function Ne(t){var e=0;return Ve(t)||(e=qe(t)*ze(t)),e}function Le(t){return[t[0],t[1]]}function Re(t){return[t[2],t[1]]}function De(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Fe(t,e){var n;return e===ee?n=Le(t):e===ne?n=Re(t):e===re?n=Be(t):e===ie?n=Ue(t):yt(!1,13),n}function je(t,e,n,r,i){var o=e*r[0]/2,a=e*r[1]/2,s=Math.cos(n),l=Math.sin(n),u=o*s,c=o*l,h=a*s,p=a*l,f=t[0],d=t[1],g=f-u+p,y=f-u-p,m=f+u-p,v=f+u+p,w=d-c-h,b=d-c+h,x=d+c+h,_=d+c-h;return be(Math.min(g,y,m,v),Math.min(w,b,x,_),Math.max(g,y,m,v),Math.max(w,b,x,_),i)}function ze(t){return t[3]-t[1]}function Ge(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return We(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):xe(r),r}function Be(t){return[t[0],t[3]]}function Ue(t){return[t[2],t[3]]}function qe(t){return t[2]-t[0]}function We(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ve(t){return t[2]<t[0]||t[3]<t[1]}function He(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Ye(t,e){var n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}function Xe(t,e,n){var r=!1,i=ve(t,e),o=ve(t,n);if(i===ae||o===ae)r=!0;else{var a=t[0],s=t[1],l=t[2],u=t[3],c=e[0],h=e[1],p=n[0],f=n[1],d=(f-h)/(p-c),g=void 0,y=void 0;o&se&&!(i&se)&&(r=(g=p-(f-u)/d)>=a&&g<=l),r||!(o&le)||i&le||(r=(y=f-(p-l)*d)>=s&&y<=u),r||!(o&ue)||i&ue||(r=(g=p-(f-s)/d)>=a&&g<=l),r||!(o&ce)||i&ce||(r=(y=f-(p-a)*d)>=s&&y<=u)}return r}function Ze(t,e,n,r){var i=[];if(r>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<r;++s)i.push(t[0]+o*s/r,t[1],t[2],t[1]+a*s/r,t[2]-o*s/r,t[3],t[0],t[3]-a*s/r);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var l=[],u=[],c=(s=0,i.length);s<c;s+=2)l.push(i[s]),u.push(i[s+1]);return function(t,e,n){return be(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(l,u,n)}function Ke(t,e){var n=e.getExtent(),r=De(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){var i=qe(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}var Je=function(){function t(t){this.et=t.code,this.ot=t.units,this.st=void 0!==t.extent?t.extent:null,this.ut=void 0!==t.worldExtent?t.worldExtent:null,this.ct=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.ht=void 0!==t.global&&t.global,this.ft=!(!this.ht||!this.st),this.lt=t.getPointResolution,this.vt=null,this.dt=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.ft},t.prototype.getCode=function(){return this.et},t.prototype.getExtent=function(){return this.st},t.prototype.getUnits=function(){return this.ot},t.prototype.getMetersPerUnit=function(){return this.dt||At[this.ot]},t.prototype.getWorldExtent=function(){return this.ut},t.prototype.getAxisOrientation=function(){return this.ct},t.prototype.isGlobal=function(){return this.ht},t.prototype.setGlobal=function(t){this.ht=t,this.ft=!(!t||!this.st)},t.prototype.getDefaultTileGrid=function(){return this.vt},t.prototype.setDefaultTileGrid=function(t){this.vt=t},t.prototype.setExtent=function(t){this.st=t,this.ft=!(!this.ht||!t)},t.prototype.setWorldExtent=function(t){this.ut=t},t.prototype.setGetPointResolution=function(t){this.lt=t},t.prototype.getPointResolutionFunc=function(){return this.lt},t}();function Qe(t,e,n){return Math.min(Math.max(t,e),n)}var $e="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},tn="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function en(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return nn(t,e,n,r)}function nn(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function rn(t){for(var e=t.length,n=0;n<e;n++){for(var r=n,i=Math.abs(t[n][n]),o=n+1;o<e;o++){var a=Math.abs(t[o][n]);a>i&&(i=a,r=o)}if(0===i)return null;var s=t[r];t[r]=t[n],t[n]=s;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*h[p]}return h}function on(t){return 180*t/Math.PI}function an(t){return t*Math.PI/180}function sn(t,e){var n=t%e;return n*e<0?n+e:n}function ln(t,e,n){return t+n*(e-t)}function un(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function cn(t,e){return Math.round(un(t,e))}function hn(t,e){return Math.floor(un(t,e))}function pn(t,e){return Math.ceil(un(t,e))}var fn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dn=6378137,gn=Math.PI*dn,yn=[-gn,-gn,gn,gn],mn=[-180,-85,180,85],vn=dn*Math.log(Math.tan(Math.PI/2)),wn=function(t){function e(e){return t.call(this,{code:e,units:kt.METERS,extent:yn,global:!0,worldExtent:mn,getPointResolution:function(t,e){return t/$e(e[1]/dn)}})||this}return fn(e,t),e}(Je),bn=[new wn("EPSG:3857"),new wn("EPSG:102100"),new wn("EPSG:102113"),new wn("EPSG:900913"),new wn("http://www.opengis.net/def/crs/EPSG/0/3857"),new wn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function xn(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i){o[a]=gn*t[a]/180;var s=dn*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));s>vn?s=vn:s<-vn&&(s=-vn),o[a+1]=s}return o}function _n(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i)o[a]=180*t[a]/gn,o[a+1]=360*Math.atan(Math.exp(t[a+1]/dn))/Math.PI-90;return o}var En=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sn=6378137,Cn=[-180,-90,180,90],Tn=Math.PI*Sn/180,In=function(t){function e(e,n){return t.call(this,{code:e,units:kt.DEGREES,extent:Cn,axisOrientation:n,global:!0,metersPerUnit:Tn,worldExtent:Cn})||this}return En(e,t),e}(Je),An=[new In("CRS:84"),new In("EPSG:4326","neu"),new In("urn:ogc:def:crs:OGC:1.3:CRS84"),new In("urn:ogc:def:crs:OGC:2:84"),new In("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new In("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new In("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Pn={};function kn(){Pn={}}function On(t){return Pn[t]||Pn[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Mn(t,e){Pn[t]=e}var Nn={};function Ln(){Nn={}}function Rn(t,e,n){var r=t.getCode(),i=e.getCode();r in Nn||(Nn[r]={}),Nn[r][i]=n}function Dn(t,e){var n;return t in Nn&&e in Nn[t]&&(n=Nn[t][e]),n}function Fn(t,e,n){var r=void 0!==n?t.toFixed(n):""+t,i=r.indexOf(".");return(i=-1===i?r.length:i)>e?r:new Array(1+e-i).join("0")+r}function jn(t,e){for(var n=(""+t).split("."),r=(""+e).split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),a=parseInt(r[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function zn(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Gn(t,e){var n=e.getRadius(),r=e.getCenter(),i=r[0],o=r[1],a=t[0]-i,s=t[1]-o;0===a&&0===s&&(a=1);var l=Math.sqrt(a*a+s*s);return[i+n*a/l,o+n*s/l]}function Bn(t,e){var n,r,i=t[0],o=t[1],a=e[0],s=e[1],l=a[0],u=a[1],c=s[0],h=s[1],p=c-l,f=h-u,d=0===p&&0===f?0:(p*(i-l)+f*(o-u))/(p*p+f*f||0);return d<=0?(n=l,r=u):d>=1?(n=c,r=h):(n=l+d*p,r=u+d*f),[n,r]}function Un(t,e,n){var r=sn(e+180,360)-180,i=Math.abs(3600*r),o=n||0,a=Math.pow(10,o),s=Math.floor(i/3600),l=Math.floor((i-3600*s)/60),u=i-3600*s-60*l;return(u=Math.ceil(u*a)/a)>=60&&(u=0,l+=1),l>=60&&(l=0,s+=1),s+"° "+Fn(l,2)+"′ "+Fn(u,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0))}function qn(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}function Wn(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function Vn(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function Hn(t,e){return t[0]*=e,t[1]*=e,t}function Yn(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Xn(t,e){return Math.sqrt(Yn(t,e))}function Zn(t,e){return Yn(t,Bn(t,e))}function Kn(t,e){return qn(t,"{x}, {y}",e)}function Jn(t,e){if(e.canWrapX()){var n=qe(e.getExtent()),r=Qn(t,e,n);r&&(t[0]-=r*n)}return t}function Qn(t,e,n){var r=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=n||qe(r);i=Math.floor((t[0]-r[0])/o)}return i}var $n=6371008.8;function tr(t,e,n){var r=n||$n,i=an(t[1]),o=an(e[1]),a=(o-i)/2,s=an(e[0]-t[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function er(t,e){for(var n=0,r=0,i=t.length;r<i-1;++r)n+=tr(t[r],t[r+1],e);return n}function nr(t,e){for(var n=0,r=t.length,i=t[r-1][0],o=t[r-1][1],a=0;a<r;a++){var s=t[a][0],l=t[a][1];n+=an(s-i)*(2+Math.sin(an(o))+Math.sin(an(l))),i=s,o=l}return n*e*e/2}function rr(t,e,n,r){var i=r||$n,o=an(t[1]),a=an(t[0]),s=e/i,l=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(n));return[on(a+Math.atan2(Math.sin(n)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(l))),on(l)]}var ir=!0;function or(t){ir=!(void 0===t||t)}function ar(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function sr(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function lr(t){Mn(t.getCode(),t),Rn(t,t,ar)}function ur(t){t.forEach(lr)}function cr(t){return"string"==typeof t?On(t):t||null}function hr(t,e,n,r){var i,o=(t=cr(t)).getPointResolutionFunc();if(o)i=o(e,n),r&&r!==t.getUnits()&&(s=t.getMetersPerUnit())&&(i=i*s/At[r]);else{var a=t.getUnits();if(a==kt.DEGREES&&!r||r==kt.DEGREES)i=e;else{var s,l=wr(t,cr("EPSG:4326"));if(l===sr&&a!==kt.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(tr((u=l(u,u,2)).slice(0,2),u.slice(2,4))+tr(u.slice(4,6),u.slice(6,8)))/2}void 0!==(s=r?At[r]:t.getMetersPerUnit())&&(i/=s)}}return i}function pr(t){ur(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Rn(e,t,ar)}))}))}function fr(t,e,n,r){t.forEach((function(t){e.forEach((function(e){Rn(t,e,n),Rn(e,t,r)}))}))}function dr(t,e){return t?"string"==typeof t?cr(t):t:cr(e)}function gr(t){return function(e,n,r){for(var i=e.length,o=void 0!==r?r:2,a=void 0!==n?n:new Array(i),s=0;s<i;s+=o){var l=t([e[s],e[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var u=o-1;u>=2;--u)a[s+u]=e[s+u]}return a}}function yr(t,e,n,r){var i=cr(t),o=cr(e);Rn(i,o,gr(n)),Rn(o,i,gr(r))}function mr(t,e){return or(),xr(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function vr(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||wr(t,e)===ar)&&n}function wr(t,e){var n=Dn(t.getCode(),e.getCode());return n||(n=sr),n}function br(t,e){return wr(cr(t),cr(e))}function xr(t,e,n){return br(e,n)(t,void 0,t.length)}function _r(t,e,n,r){return Ze(t,br(e,n),void 0,r)}var Er=null;function Sr(t){Er=cr(t)}function Cr(){return Er}function Tr(t,e){return Er?xr(t,e,Er):t}function Ir(t,e){return Er?xr(t,Er,e):(ir&&!Wn(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(ir=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Ar(t,e){return Er?_r(t,e,Er):t}function Pr(t,e){return Er?_r(t,Er,e):t}function kr(t,e){if(!Er)return t;var n=cr(e).getUnits(),r=Er.getUnits();return n&&r?t*At[n]/At[r]:t}function Or(t,e){if(!Er)return t;var n=cr(e).getUnits(),r=Er.getUnits();return n&&r?t*At[r]/At[n]:t}function Mr(t,e,n){return function(r){var i,o,a=r[0],s=r[1];if(t.canWrapX()){var l=t.getExtent(),u=qe(l);(o=Qn(r,t,u))&&(a-=o*u),a=Qe(a,l[0],l[2]),s=Qe(s,l[1],l[3]),i=n([a,s])}else i=n(r);return o&&e.canWrapX()&&(i[0]+=o*qe(e.getExtent())),i}}function Nr(){pr(bn),pr(An),fr(An,bn,xn,_n)}function Lr(t,e,n,r,i,o){for(var a=o||[],s=0,l=e;l<n;l+=r){var u=t[l],c=t[l+1];a[s++]=i[0]*u+i[2]*c+i[4],a[s++]=i[1]*u+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}function Rr(t,e,n,r,i,o,a){for(var s=a||[],l=Math.cos(i),u=Math.sin(i),c=o[0],h=o[1],p=0,f=e;f<n;f+=r){var d=t[f]-c,g=t[f+1]-h;s[p++]=c+d*l-g*u,s[p++]=h+d*u+g*l;for(var y=f+2;y<f+r;++y)s[p++]=t[y]}return a&&s.length!=p&&(s.length=p),s}function Dr(t,e,n,r,i,o,a,s){for(var l=s||[],u=a[0],c=a[1],h=0,p=e;p<n;p+=r){var f=t[p]-u,d=t[p+1]-c;l[h++]=u+i*f,l[h++]=c+o*d;for(var g=p+2;g<p+r;++g)l[h++]=t[g]}return s&&l.length!=h&&(l.length=h),l}function Fr(t,e,n,r,i,o,a){for(var s=a||[],l=0,u=e;u<n;u+=r){s[l++]=t[u]+i,s[l++]=t[u+1]+o;for(var c=u+2;c<u+r;++c)s[l++]=t[c]}return a&&s.length!=l&&(s.length=l),s}Nr();var jr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zr=[1,0,0,1,0,0],Gr=function(t){function e(){var e=t.call(this)||this;return e.st=[1/0,1/0,-1/0,-1/0],e.yt=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=A((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})),e}return jr(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return i()},e.prototype.closestPointXY=function(t,e,n,r){return i()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return i()},e.prototype.getExtent=function(t){if(this.yt!=this.getRevision()){var e=this.computeExtent(this.st);(isNaN(e[0])||isNaN(e[1]))&&xe(e),this.yt=this.getRevision()}return He(this.st,t)},e.prototype.rotate=function(t,e){i()},e.prototype.scale=function(t,e,n){i()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return i()},e.prototype.getType=function(){return i()},e.prototype.applyTransform=function(t){i()},e.prototype.intersectsExtent=function(t){return i()},e.prototype.translate=function(t,e){i()},e.prototype.transform=function(t,e){var n=cr(t),r=n.getUnits()==kt.TILE_PIXELS?function(t,r,i){var o=n.getExtent(),a=n.getWorldExtent(),s=ze(a)/ze(o);return Jt(zr,a[0],a[3],s,-s,0,0,0),Lr(t,0,t.length,i,zr,r),br(n,e)(t,r,i)}:br(n,e);return this.applyTransform(r),this},e}(et),Br=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ur(t){var e;return t==bt?e=2:t==xt||t==_t?e=3:t==Et&&(e=4),e}function qr(t,e,n){var r=t.getFlatCoordinates();if(r){var i=t.getStride();return Lr(r,0,r.length,i,e,n)}return null}var Wr=function(t){function e(){var e=t.call(this)||this;return e.layout=bt,e.stride=2,e.flatCoordinates=null,e}return Br(e,t),e.prototype.computeExtent=function(t){return Ee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return i()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Ur(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){i()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=Ur(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=bt,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=bt:3==t?e=xt:4==t&&(e=Et),e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Rr(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i||(i=De(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();Dr(o,0,o.length,a,t,r,i,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Fr(n,0,n.length,r,t,e,n),this.changed()}},e}(Gr);function Vr(t,e,n,r,i,o,a){var s,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)s=e;else{var p=((i-l)*c+(o-u)*h)/(c*c+h*h);if(p>1)s=n;else{if(p>0){for(var f=0;f<r;++f)a[f]=ln(t[e+f],t[n+f],p);return void(a.length=r)}s=e}}for(f=0;f<r;++f)a[f]=t[s+f];a.length=r}function Hr(t,e,n,r,i){var o=t[e],a=t[e+1];for(e+=r;e<n;e+=r){var s=t[e],l=t[e+1],u=nn(o,a,s,l);u>i&&(i=u),o=s,a=l}return i}function Yr(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=Hr(t,e,s,r,i),e=s}return i}function Xr(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=Yr(t,e,s,r,i),e=s[s.length-1]}return i}function Zr(t,e,n,r,i,o,a,s,l,u,c){if(e==n)return u;var h,p;if(0===i){if((p=nn(a,s,t[e],t[e+1]))<u){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,p}return u}for(var f=c||[NaN,NaN],d=e+r;d<n;)if(Vr(t,d-r,d,r,a,s,f),(p=nn(a,s,f[0],f[1]))<u){for(u=p,h=0;h<r;++h)l[h]=f[h];l.length=r,d+=r}else d+=r*Math.max((Math.sqrt(p)-Math.sqrt(u))/i|0,1);if(o&&(Vr(t,n-r,e,r,a,s,f),(p=nn(a,s,f[0],f[1]))<u)){for(u=p,h=0;h<r;++h)l[h]=f[h];l.length=r}return u}function Kr(t,e,n,r,i,o,a,s,l,u,c){for(var h=c||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];u=Zr(t,e,d,r,i,o,a,s,l,u,h),e=d}return u}function Jr(t,e,n,r,i,o,a,s,l,u,c){for(var h=c||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];u=Kr(t,e,d,r,i,o,a,s,l,u,h),e=d[d.length-1]}return u}function Qr(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function $r(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=n[i],s=0;s<r;++s)t[e++]=a[s];return e}function ti(t,e,n,r,i){for(var o=i||[],a=0,s=0,l=n.length;s<l;++s){var u=$r(t,e,n[s],r);o[a++]=u,e=u}return o.length=a,o}function ei(t,e,n,r,i){for(var o=i||[],a=0,s=0,l=n.length;s<l;++s){var u=ti(t,e,n[s],r,o[a]);o[a++]=u,e=u[u.length-1]}return o.length=a,o}function ni(t,e,n,r,i,o,a){var s=(n-e)/r;if(s<3){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}var l=new Array(s);l[0]=1,l[s-1]=1;for(var u=[e,n-r],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),f=0,d=t[p],g=t[p+1],y=t[h],m=t[h+1],v=p+r;v<h;v+=r){var w=en(t[v],t[v+1],d,g,y,m);w>f&&(c=v,f=w)}f>i&&(l[(c-e)/r]=1,p+r<c&&u.push(p,c),c+r<h&&u.push(c,h))}for(v=0;v<s;++v)l[v]&&(o[a++]=t[e+v*r],o[a++]=t[e+v*r+1]);return a}function ri(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l];a=ni(t,e,c,r,i,o,a),s.push(a),e=c}return a}function ii(t,e,n,r,i,o,a){if(n<=e+r){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}var s=t[e],l=t[e+1];o[a++]=s,o[a++]=l;var u=s,c=l;for(e+=r;e<n;e+=r)nn(s,l,u=t[e],c=t[e+1])>i&&(o[a++]=u,o[a++]=c,s=u,l=c);return u==s&&c==l||(o[a++]=u,o[a++]=c),a}function oi(t,e){return e*Math.round(t/e)}function ai(t,e,n,r,i,o,a){if(e==n)return a;var s,l,u=oi(t[e],i),c=oi(t[e+1],i);e+=r,o[a++]=u,o[a++]=c;do{if(s=oi(t[e],i),l=oi(t[e+1],i),(e+=r)==n)return o[a++]=s,o[a++]=l,a}while(s==u&&l==c);for(;e<n;){var h=oi(t[e],i),p=oi(t[e+1],i);if(e+=r,h!=s||p!=l){var f=s-u,d=l-c,g=h-u,y=p-c;f*y==d*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(d<0&&y<d||d==y||d>0&&y>d)?(s=h,l=p):(o[a++]=s,o[a++]=l,u=s,c=l,s=h,l=p)}}return o[a++]=s,o[a++]=l,a}function si(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l];a=ai(t,e,c,r,i,o,a),s.push(a),e=c}return a}function li(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l],h=[];a=si(t,e,c,r,i,o,a,h),s.push(h),e=c[c.length-1]}return a}function ui(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=e;s<n;s+=r)o[a++]=t.slice(s,s+r);return o.length=a,o}function ci(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=0,l=n.length;s<l;++s){var u=n[s];o[a++]=ui(t,e,u,r,o[a]),e=u}return o.length=a,o}function hi(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=0,l=n.length;s<l;++s){var u=n[s];o[a++]=ci(t,e,u,r,o[a]),e=u[u.length-1]}return o.length=a,o}function pi(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],l=t[e+1];i+=a*s-o*l,o=s,a=l}return i/2}function fi(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=pi(t,e,s,r),e=s}return i}function di(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=fi(t,e,s,r),e=s[s.length-1]}return i}var gi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yi=function(t){function e(e,n){var r=t.call(this)||this;return r.wt=-1,r.bt=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return gi(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(Hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.bt=this.getRevision()),Zr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!0,t,e,n,r))},e.prototype.getArea=function(){return pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=ni(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,bt)},e.prototype.getType=function(){return St.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Wr),mi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vi=function(t){function e(e,n){var r=t.call(this)||this;return r.setCoordinates(e,n),r}return mi(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=nn(t,e,i[0],i[1]);if(o<r){for(var a=this.stride,s=0;s<a;++s)n[s]=i[s];return n.length=a,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return _e(this.flatCoordinates,t)},e.prototype.getType=function(){return St.POINT},e.prototype.intersectsExtent=function(t){return me(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Qr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Wr);function wi(t,e,n,r,i){return!Me(i,(function(i){return!bi(t,e,n,r,i[0],i[1])}))}function bi(t,e,n,r,i,o){for(var a=0,s=t[n-r],l=t[n-r+1];e<n;e+=r){var u=t[e],c=t[e+1];l<=o?c>o&&(u-s)*(o-l)-(i-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(i-s)*(c-l)<0&&a--,s=u,l=c}return 0!==a}function xi(t,e,n,r,i,o){if(0===n.length)return!1;if(!bi(t,e,n[0],r,i,o))return!1;for(var a=1,s=n.length;a<s;++a)if(bi(t,n[a-1],n[a],r,i,o))return!1;return!0}function _i(t,e,n,r,i,o){if(0===n.length)return!1;for(var a=0,s=n.length;a<s;++a){var l=n[a];if(xi(t,e,l,r,i,o))return!0;e=l[l.length-1]}return!1}function Ei(t,e,n,r,i,o,a){for(var s,l,u,c,h,p,f,d=i[o+1],g=[],m=0,v=n.length;m<v;++m){var w=n[m];for(c=t[w-r],p=t[w-r+1],s=e;s<w;s+=r)h=t[s],f=t[s+1],(d<=p&&f<=d||p<=d&&d<=f)&&(u=(d-p)/(f-p)*(h-c)+c,g.push(u)),c=h,p=f}var b=NaN,x=-1/0;for(g.sort(y),c=g[0],s=1,l=g.length;s<l;++s){h=g[s];var _=Math.abs(h-c);_>x&&xi(t,e,n,r,u=(c+h)/2,d)&&(b=u,x=_),c=h}return isNaN(b)&&(b=i[o]),a?(a.push(b,d,x),a):[b,d,x]}function Si(t,e,n,r,i){for(var o=[],a=0,s=n.length;a<s;++a){var l=n[a];o=Ei(t,e,l,r,i,2*a,o),e=l[l.length-1]}return o}function Ci(t,e,n,r,i){var o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)))return o;return!1}function Ti(t,e,n,r,i){var o=Pe([1/0,1/0,-1/0,-1/0],t,e,n,r);return!!We(i,o)&&(!!ye(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]||Ci(t,e,n,r,(function(t,e){return Xe(i,t,e)})))}function Ii(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){if(Ti(t,e,n[o],r,i))return!0;e=n[o]}return!1}function Ai(t,e,n,r,i){return!!(Ti(t,e,n,r,i)||bi(t,e,n,r,i[0],i[1])||bi(t,e,n,r,i[0],i[3])||bi(t,e,n,r,i[2],i[1])||bi(t,e,n,r,i[2],i[3]))}function Pi(t,e,n,r,i){if(!Ai(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(wi(t,n[o-1],n[o],r,i)&&!Ti(t,n[o-1],n[o],r,i))return!1;return!0}function ki(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(Pi(t,e,s,r,i))return!0;e=s[s.length-1]}return!1}function Oi(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function Mi(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],l=t[e+1];i+=(s-o)*(l+a),o=s,a=l}return 0===i?void 0:i>0}function Ni(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var l=n[a],u=Mi(t,e,l,r);if(0===a){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=l}return!0}function Li(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(!Ni(t,e,s,r,i))return!1;s.length&&(e=s[s.length-1])}return!0}function Ri(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var l=n[a],u=Mi(t,e,l,r);(0===a?o&&u||!o&&!u:o&&!u||!o&&u)&&Oi(t,e,l,r),e=l}return e}function Di(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o)e=Ri(t,e,n[o],r,i);return e}function Fi(t,e){for(var n=[],r=0,i=0,o=0,a=e.length;o<a;++o){var s=e[o];if(Mi(t,r,s,2)){if(0===n.length)continue;n[n.length-1].push(e[i])}else n.push(e.slice(i,o+1));i=o+1,r=s}return n}var ji=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zi=function(t){function e(e,n,r){var i=t.call(this)||this;return i.gt=[],i.xt=-1,i.jt=null,i.wt=-1,i.bt=-1,i.St=-1,i.kt=null,void 0!==n&&r?(i.setFlatCoordinates(n,e),i.gt=r):i.setCoordinates(e,n),i}return ji(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.gt.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.gt.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(Yr(this.flatCoordinates,0,this.gt,this.stride,0)),this.bt=this.getRevision()),Kr(this.flatCoordinates,0,this.gt,this.stride,this.wt,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return xi(this.getOrientedFlatCoordinates(),0,this.gt,this.stride,t,e)},e.prototype.getArea=function(){return fi(this.getOrientedFlatCoordinates(),0,this.gt,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ri(e=this.getOrientedFlatCoordinates().slice(),0,this.gt,this.stride,t):e=this.flatCoordinates,ci(e,0,this.gt,this.stride)},e.prototype.getEnds=function(){return this.gt},e.prototype.getFlatInteriorPoint=function(){if(this.xt!=this.getRevision()){var t=De(this.getExtent());this.jt=Ei(this.getOrientedFlatCoordinates(),0,this.gt,this.stride,t,0),this.xt=this.getRevision()}return this.jt},e.prototype.getInteriorPoint=function(){return new vi(this.getFlatInteriorPoint(),_t)},e.prototype.getLinearRingCount=function(){return this.gt.length},e.prototype.getLinearRing=function(t){return t<0||this.gt.length<=t?null:new yi(this.flatCoordinates.slice(0===t?0:this.gt[t-1],this.gt[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.gt,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o],l=new yi(e.slice(i,s),t);r.push(l),i=s}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.St!=this.getRevision()){var t=this.flatCoordinates;Ni(t,0,this.gt,this.stride)?this.kt=t:(this.kt=t.slice(),this.kt.length=Ri(this.kt,0,this.gt,this.stride)),this.St=this.getRevision()}return this.kt},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=si(this.flatCoordinates,0,this.gt,this.stride,Math.sqrt(t),n,0,r),new e(n,bt,r)},e.prototype.getType=function(){return St.POLYGON},e.prototype.intersectsExtent=function(t){return Pi(this.getOrientedFlatCoordinates(),0,this.gt,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=ti(this.flatCoordinates,0,t,this.stride,this.gt);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(Wr),Gi=zi;function Bi(t,e,n,r){for(var i=n||32,o=[],a=0;a<i;++a)b(o,rr(t,e,2*Math.PI*a/i,r));return o.push(o[0],o[1]),new zi(o,bt,[o.length])}function Ui(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new zi(o,bt,[o.length])}function qi(t,e,n){for(var r=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(r+1),l=new Array(s),u=0;u<s;u+=i){l[u]=0,l[u+1]=0;for(var c=2;c<i;c++)l[u+c]=a[c]}var h=[l.length],p=new zi(l,o,h);return Wi(p,a,t.getRadius(),n),p}function Wi(t,e,n,r){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=r||0,l=0;l<=a;++l){var u=l*o,c=s+2*sn(l,a)*Math.PI/a;i[u]=e[0]+n*Math.cos(c),i[u+1]=e[1]+n*Math.sin(c)}t.changed()}var Vi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hi="accuracy",Yi="accuracyGeometry",Xi="altitude",Zi="altitudeAccuracy",Ki="heading",Ji="position",Qi="projection",$i="speed",to="tracking",eo="trackingOptions",no=function(t){function e(e){var n=t.call(this,F)||this;return n.code=e.code,n.message=e.message,n}return Vi(e,t),e}(p),ro=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=e||{};return n.Mt=null,n._t=sr,n.Ot=void 0,n.addChangeListener(Qi,n.Tt),n.addChangeListener(to,n.Et),void 0!==r.projection&&n.setProjection(r.projection),void 0!==r.trackingOptions&&n.setTrackingOptions(r.trackingOptions),n.setTracking(void 0!==r.tracking&&r.tracking),n}return Vi(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.Tt=function(){var t=this.getProjection();t&&(this._t=wr(cr("EPSG:4326"),t),this.Mt&&this.set(Ji,this._t(this.Mt)))},e.prototype.Et=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.Ot?this.Ot=navigator.geolocation.watchPosition(this.At.bind(this),this.Ct.bind(this),this.getTrackingOptions()):t||void 0===this.Ot||(navigator.geolocation.clearWatch(this.Ot),this.Ot=void 0)}},e.prototype.At=function(t){var e=t.coords;this.set(Hi,e.accuracy),this.set(Xi,null===e.altitude?void 0:e.altitude),this.set(Zi,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Ki,null===e.heading?void 0:an(e.heading)),this.Mt?(this.Mt[0]=e.longitude,this.Mt[1]=e.latitude):this.Mt=[e.longitude,e.latitude];var n=this._t(this.Mt);this.set(Ji,n),this.set($i,null===e.speed?void 0:e.speed);var r=Bi(this.Mt,e.accuracy);r.applyTransform(this._t),this.set(Yi,r),this.changed()},e.prototype.Ct=function(t){this.dispatchEvent(new no(t))},e.prototype.getAccuracy=function(){return this.get(Hi)},e.prototype.getAccuracyGeometry=function(){return this.get(Yi)||null},e.prototype.getAltitude=function(){return this.get(Xi)},e.prototype.getAltitudeAccuracy=function(){return this.get(Zi)},e.prototype.getHeading=function(){return this.get(Ki)},e.prototype.getPosition=function(){return this.get(Ji)},e.prototype.getProjection=function(){return this.get(Qi)},e.prototype.getSpeed=function(){return this.get($i)},e.prototype.getTracking=function(){return this.get(to)},e.prototype.getTrackingOptions=function(){return this.get(eo)},e.prototype.setProjection=function(t){this.set(Qi,cr(t))},e.prototype.setTracking=function(t){this.set(to,t)},e.prototype.setTrackingOptions=function(t){this.set(eo,t)},e}(et),io=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oo=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.extent=e,o.Rt=r,o.resolution=n,o.state=i,o}return io(e,t),e.prototype.changed=function(){this.dispatchEvent(D)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return i()},e.prototype.getPixelRatio=function(){return this.Rt},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){i()},e}(R),ao=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function so(t,e,n){var r=t,i=!0,o=!1,a=!1,s=[Y(r,q,(function(){a=!0,o||e()}))];return r.src&&zt?(o=!0,r.decode().then((function(){i&&e()})).catch((function(t){i&&(a?e():n())}))):s.push(Y(r,F,n)),function(){i=!1,s.forEach(X)}}var lo=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,0)||this;return s.Pt=i,s.Nt=new Image,null!==o&&(s.Nt.crossOrigin=o),s.zt=null,s.state=0,s.Ft=a,s}return ao(e,t),e.prototype.getImage=function(){return this.Nt},e.prototype.Lt=function(){this.state=3,this.Gt(),this.changed()},e.prototype.Dt=function(){void 0===this.resolution&&(this.resolution=ze(this.extent)/this.Nt.height),this.state=2,this.Gt(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.Ft(this,this.Pt),this.zt=so(this.Nt,this.Dt.bind(this),this.Lt.bind(this)))},e.prototype.setImage=function(t){this.Nt=t,this.resolution=ze(this.extent)/this.Nt.height},e.prototype.Gt=function(){this.zt&&(this.zt(),this.zt=null)},e}(oo),uo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),co=function(t){function e(e,n,r,i,o){var a=this,s=void 0!==o?0:2;return(a=t.call(this,e,n,r,s)||this).q=void 0!==o?o:null,a.Ut=i,a.W=null,a}return uo(e,t),e.prototype.getError=function(){return this.W},e.prototype.qt=function(t){t?(this.W=t,this.state=3):this.state=2,this.changed()},e.prototype.load=function(){0==this.state&&(this.state=1,this.changed(),this.q(this.qt.bind(this)))},e.prototype.getImage=function(){return this.Ut},e}(oo);function ho(t,e,n,r){var i;return i=n&&n.length?n.shift():jt?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}function po(t){var e=t.offsetWidth,n=getComputedStyle(t);return e+(parseInt(n.marginLeft,10)+parseInt(n.marginRight,10))}function fo(t){var e=t.offsetHeight,n=getComputedStyle(t);return e+(parseInt(n.marginTop,10)+parseInt(n.marginBottom,10))}function go(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function yo(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function mo(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function vo(t,e){for(var n=t.childNodes,r=0;;++r){var i=n[r],o=e[r];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--r):t.appendChild(o))}}var wo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bo=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,a)||this;return s.Bt=i,s.Pt=r,s.key=r,s.Nt=new Image,null!==i&&(s.Nt.crossOrigin=i),s.zt=null,s.Wt=o,s}return wo(e,t),e.prototype.getImage=function(){return this.Nt},e.prototype.setImage=function(t){this.Nt=t,this.state=2,this.Gt(),this.changed()},e.prototype.Lt=function(){var t;this.state=3,this.Gt(),this.Nt=((t=ho(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.Dt=function(){var t=this.Nt;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.Gt(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.Nt=new Image,null!==this.Bt&&(this.Nt.crossOrigin=this.Bt)),0==this.state&&(this.state=1,this.changed(),this.Wt(this,this.Pt),this.zt=so(this.Nt,this.Dt.bind(this),this.Lt.bind(this)))},e.prototype.Gt=function(){this.zt&&(this.zt(),this.zt=null)},e}(ft),xo=function(){function t(t,e,n){this.Vt=t,this.Xt=e,this.Ht=n,this.Jt=[],this.Kt=0,this.Yt=0}return t.prototype.begin=function(){this.Jt.length=0,this.Kt=0,this.Yt=0},t.prototype.update=function(t,e){this.Jt.push(t,e,Date.now())},t.prototype.end=function(){if(this.Jt.length<6)return!1;var t=Date.now()-this.Ht,e=this.Jt.length-3;if(this.Jt[e+2]<t)return!1;for(var n=e-3;n>0&&this.Jt[n+2]>t;)n-=3;var r=this.Jt[e+2]-this.Jt[n+2];if(r<1e3/60)return!1;var i=this.Jt[e]-this.Jt[n],o=this.Jt[e+1]-this.Jt[n+1];return this.Kt=Math.atan2(o,i),this.Yt=Math.sqrt(i*i+o*o)/r,this.Yt>this.Xt},t.prototype.getDistance=function(){return(this.Xt-this.Yt)/this.Vt},t.prototype.getAngle=function(){return this.Kt},t}(),_o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Eo=/^([a-z]*)$|^hsla?\(.*\)$/i;function So(t){return"string"==typeof t?t:Po(t)}function Co(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}var To=function(){var t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){var i=0;for(var o in t)0==(3&i++)&&(delete t[o],--e)}r=function(t){var e,n,r,i,o;if(Eo.exec(t)&&(t=Co(t)),_o.exec(t)){var a,s=t.length-1;a=s<=4?1:2;var l=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),n=parseInt(t.substr(1+1*a,a),16),r=parseInt(t.substr(1+2*a,a),16),i=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,l&&(i=(i<<4)+i)),o=[e,n,r,i/255]}else 0==t.indexOf("rgba(")?Ao(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Ao(o)):yt(!1,14);return o}(n),t[n]=r,++e}return r}}();function Io(t){return Array.isArray(t)?t:To(t)}function Ao(t){return t[0]=Qe(t[0]+.5|0,0,255),t[1]=Qe(t[1]+.5|0,0,255),t[2]=Qe(t[2]+.5|0,0,255),t[3]=Qe(t[3],0,1),t}function Po(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+n+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function ko(t){return Eo.test(t)&&(t=Co(t)),_o.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Oo=function(){function t(){this.Zt={},this.$t=0,this.Qt=32}return t.prototype.clear=function(){this.Zt={},this.$t=0},t.prototype.canExpireCache=function(){return this.$t>this.Qt},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.Zt){var n=this.Zt[e];0!=(3&t++)||n.hasListener()||(delete this.Zt[e],--this.$t)}}},t.prototype.get=function(t,e,n){var r=Mo(t,e,n);return r in this.Zt?this.Zt[r]:null},t.prototype.set=function(t,e,n,r){var i=Mo(t,e,n);this.Zt[i]=r,++this.$t},t.prototype.setSize=function(t){this.Qt=t,this.expire()},t}();function Mo(t,e,n){return e+":"+t+":"+(n?So(n):"null")}var No=Oo,Lo=new Oo,Ro="opacity",Do="visible",Fo="extent",jo="zIndex",zo="maxResolution",Go="minResolution",Bo="maxZoom",Uo="minZoom",qo="source",Wo="map";function Vo(t){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ho=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yo=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.tn=e.background;var r=k({},e);return"object"===Vo(e.properties)&&(delete r.properties,k(r,e.properties)),r[Ro]=void 0!==e.opacity?e.opacity:1,yt("number"==typeof r[Ro],64),r[Do]=void 0===e.visible||e.visible,r[jo]=e.zIndex,r[zo]=void 0!==e.maxResolution?e.maxResolution:1/0,r[Go]=void 0!==e.minResolution?e.minResolution:0,r[Uo]=void 0!==e.minZoom?e.minZoom:-1/0,r[Bo]=void 0!==e.maxZoom?e.maxZoom:1/0,n.nn=void 0!==r.className?r.className:"ol-layer",delete r.className,n.setProperties(r),n.rn=null,n}return Ho(e,t),e.prototype.getBackground=function(){return this.tn},e.prototype.getClassName=function(){return this.nn},e.prototype.getLayerState=function(t){var e=this.rn||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Qe(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.rn=e,e},e.prototype.getLayersArray=function(t){return i()},e.prototype.getLayerStatesArray=function(t){return i()},e.prototype.getExtent=function(){return this.get(Fo)},e.prototype.getMaxResolution=function(){return this.get(zo)},e.prototype.getMinResolution=function(){return this.get(Go)},e.prototype.getMinZoom=function(){return this.get(Uo)},e.prototype.getMaxZoom=function(){return this.get(Bo)},e.prototype.getOpacity=function(){return this.get(Ro)},e.prototype.getSourceState=function(){return i()},e.prototype.getVisible=function(){return this.get(Do)},e.prototype.getZIndex=function(){return this.get(jo)},e.prototype.setBackground=function(t){this.tn=t,this.changed()},e.prototype.setExtent=function(t){this.set(Fo,t)},e.prototype.setMaxResolution=function(t){this.set(zo,t)},e.prototype.setMinResolution=function(t){this.set(Go,t)},e.prototype.setMaxZoom=function(t){this.set(Bo,t)},e.prototype.setMinZoom=function(t){this.set(Uo,t)},e.prototype.setOpacity=function(t){yt("number"==typeof t,64),this.set(Ro,t)},e.prototype.setVisible=function(t){this.set(Do,t)},e.prototype.setZIndex=function(t){this.set(jo,t)},e.prototype.disposeInternal=function(){this.rn&&(this.rn.layer=null,this.rn=null),t.prototype.disposeInternal.call(this)},e}(et),Xo="prerender",Zo="postrender",Ko="precompose",Jo="postcompose",Qo="rendercomplete",$o="undefined",ta="loading",ea="ready",na="error",ra=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ia(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}var oa=function(t){function e(e){var n=this,r=k({},e);delete r.source,(n=t.call(this,r)||this).on,n.once,n.un,n.en=null,n.sn=null,n.an=null,n.cn=null,n.rendered=!1,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(qo,n.hn);var i=e.source?e.source:null;return n.setSource(i),n}return ra(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(qo)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():$o},e.prototype.fn=function(){this.changed()},e.prototype.hn=function(){this.an&&(X(this.an),this.an=null);var t=this.getSource();t&&(this.an=H(t,D,this.fn,this)),this.changed()},e.prototype.getFeatures=function(t){return this.cn?this.cn.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.getData=function(t){return this.cn&&this.rendered?this.cn.getData(t):null},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(t){t||this.unrender(),this.set(Wo,t)},e.prototype.getMapInternal=function(){return this.get(Wo)},e.prototype.setMap=function(t){this.en&&(X(this.en),this.en=null),t||this.changed(),this.sn&&(X(this.sn),this.sn=null),t&&(this.en=H(t,Ko,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);yt(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.sn=H(this,D,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(qo,t)},e.prototype.getRenderer=function(){return this.cn||(this.cn=this.createRenderer()),this.cn},e.prototype.hasRenderer=function(){return!!this.cn},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.cn&&(this.cn.dispose(),delete this.cn),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(Yo),aa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function sa(t,e){Lo.expire()}var la=function(t){function e(e){var n=t.call(this)||this;return n.vn=e,n}return aa(e,t),e.prototype.dispatchRenderEvent=function(t,e){i()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Jt(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Qt(r,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o,a,s){var l,u=e.viewState;function c(t,e,n,r){return i.call(o,e,t?n:null,r)}var h=u.projection,p=Jn(t.slice(),h),f=[[0,0]];if(h.canWrapX()&&r){var d=qe(h.getExtent());f.push([-d,0],[d,0])}for(var g=e.layerStatesArray,y=g.length,m=[],v=[],w=0;w<f.length;w++)for(var b=y-1;b>=0;--b){var x=g[b],_=x.layer;if(_.hasRenderer()&&ia(x,u)&&a.call(s,_)){var E=_.getRenderer(),S=_.getSource();if(E&&S){var C=S.getWrapX()?p:t,T=c.bind(null,x.managed);v[0]=C[0]+f[w][0],v[1]=C[1]+f[w][1],l=E.forEachFeatureAtCoordinate(v,e,n,T,m)}if(l)return l}}if(0!==m.length){var I=1/m.length;return m.forEach((function(t,e){return t.distanceSq+=e*I})),m.sort((function(t,e){return t.distanceSq-e.distanceSq})),m.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,r,o){return i()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,r,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,r,C,this,i,o)},e.prototype.getMap=function(){return this.vn},e.prototype.renderFrame=function(t){i()},e.prototype.scheduleExpireIconCache=function(t){Lo.canExpireCache()&&t.postRenderFunctions.push(sa)},e}(d),ua=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ca=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=r,o.context=i,o}return ua(e,t),e}(p),ha="ol-hidden",pa="ol-unselectable",fa="ol-unsupported",da="ol-control",ga="ol-collapsed",ya=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),ma=["style","variant","weight","size","lineHeight","family"],va=function(t){var e=t.match(ya);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,i=ma.length;r<i;++r){var o=e[r+1];void 0!==o&&(n[ma[r]]=o)}return n.families=n.family.split(/,\s?/),n};function wa(t){return 1===t?"":String(Math.round(100*t)/100)}var ba="10px sans-serif",xa="#000",_a="round",Ea=[],Sa="round",Ca=10,Ta="#000",Ia="center",Aa="middle",Pa=[0,0,0,0],ka=new et,Oa=new R;Oa.setSize=function(){console.warn("labelCache is deprecated.")};var Ma,Na,La=null,Ra={},Da=function(){var t,e,n="32px ",r=["monospace","serif"],i=r.length,o="wmytzilWMYTZIL@#/&?$%10";function a(t,a,s){for(var l=!0,u=0;u<i;++u){var c=r[u];if(e=za(t+" "+a+" "+n+c,o),s!=c){var h=za(t+" "+a+" "+n+s+","+c,o);l=l&&h!=e}}return!!l}function s(){for(var e=!0,n=ka.getKeys(),r=0,i=n.length;r<i;++r){var o=n[r];ka.get(o)<100&&(a.apply(this,o.split("\n"))?(O(Ra),La=null,Ma=void 0,ka.set(o,100)):(ka.set(o,ka.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=va(e);if(n)for(var r=n.families,i=0,o=r.length;i<o;++i){var l=r[i],u=n.style+"\n"+n.weight+"\n"+l;void 0===ka.get(u)&&(ka.set(u,100,!0),a(n.style,n.weight,l)||(ka.set(u,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),Fa=function(t){var e=Ra[t];if(null==e){if(jt){var n=va(t),r=ja(t,"Žg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Na||((Na=document.createElement("div")).innerHTML="M",Na.style.minHeight="0",Na.style.maxHeight="none",Na.style.height="auto",Na.style.padding="0",Na.style.border="none",Na.style.position="absolute",Na.style.display="block",Na.style.left="-99999px"),Na.style.font=t,document.body.appendChild(Na),e=Na.offsetHeight,document.body.removeChild(Na);Ra[t]=e}return e};function ja(t,e){return La||(La=ho(1,1)),t!=Ma&&(La.font=t,Ma=La.font),La.measureText(e)}function za(t,e){return ja(t,e).width}function Ga(t,e,n){if(e in n)return n[e];var r=za(t,e);return n[e]=r,r}function Ba(t,e){for(var n=[],r=[],i=[],o=0,a=0,s=0,l=0,u=0,c=e.length;u<=c;u+=2){var h=e[u];if("\n"!==h&&u!==c){var p=e[u+1]||t.font,f=za(p,h);n.push(f),a+=f;var d=Fa(p);r.push(d),l=Math.max(l,d)}else o=Math.max(o,a),i.push(a),a=0,s+=l}return{width:o,height:s,widths:n,heights:r,lineWidths:i}}function Ua(t,e,n,r,i,o,a,s,l,u,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),r.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(t,e){for(var n=t.contextInstructions,r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}(r,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(r,i,o,a,s,0,0,a,s)):t.drawImage(r,i,o,a,s,l,u,a*c[0],s*c[1]),t.restore()}var qa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wa=function(t){function e(e){var n=t.call(this,e)||this;n.dn=H(ka,f,e.redrawText.bind(e)),n.pn=document.createElement("div");var r=n.pn.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.pn.className="ol-unselectable ol-layers";var i=e.getViewport();return i.insertBefore(n.pn,i.firstChild||null),n.yn=[],n.mn=!0,n}return qa(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var r=new ca(t,void 0,e);n.dispatchEvent(r)}},e.prototype.disposeInternal=function(){X(this.dn),this.pn.parentNode.removeChild(this.pn),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(Ko,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.yn.length=0;for(var r=[],i=null,o=0,a=e.length;o<a;++o){var s=e[o];t.layerIndex=o;var l=s.layer,u=l.getSourceState();if(!ia(s,n)||u!=ea&&u!=$o)l.unrender();else{var c=l.render(t,i);c&&(c!==i&&(this.yn.push(c),i=c),"getDeclutter"in l&&r.push(l))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);vo(this.pn,this.yn),this.dispatchRenderEvent(Jo,t),this.mn||(this.pn.style.display="",this.mn=!0),this.scheduleExpireIconCache(t)}else this.mn&&(this.pn.style.display="none",this.mn=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],u=l.layer;if(u.hasRenderer()&&ia(l,o)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=r(u,c);if(h)return h}}}},e}(la),Va=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ha=function(t){function e(e,n){var r=t.call(this,e)||this;return r.layer=n,r}return Va(e,t),e}(p),Ya="layers",Xa=function(t){function e(e){var n=this,r=e||{},i=k({},r);delete i.layers;var o=r.layers;return(n=t.call(this,i)||this).on,n.once,n.un,n.wn=[],n.bn={},n.addChangeListener(Ya,n.gn),o?Array.isArray(o)?o=new st(o.slice(),{unique:!0}):yt("function"==typeof o.getArray,43):o=new st(void 0,{unique:!0}),n.setLayers(o),n}return Va(e,t),e.prototype.xn=function(){this.changed()},e.prototype.gn=function(){this.wn.forEach(X),this.wn.length=0;var t=this.getLayers();for(var e in this.wn.push(H(t,nt,this.jn,this),H(t,rt,this.Sn,this)),this.bn)this.bn[e].forEach(X);O(this.bn);for(var n=t.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.kn(o),this.dispatchEvent(new Ha("addlayer",o))}this.changed()},e.prototype.kn=function(t){var n=[H(t,f,this.xn,this),H(t,D,this.xn,this)];t instanceof e&&n.push(H(t,"addlayer",this.Mn,this),H(t,"removelayer",this._n,this)),this.bn[a(t)]=n},e.prototype.Mn=function(t){this.dispatchEvent(new Ha("addlayer",t.layer))},e.prototype._n=function(t){this.dispatchEvent(new Ha("removelayer",t.layer))},e.prototype.jn=function(t){var e=t.element;this.kn(e),this.dispatchEvent(new Ha("addlayer",e)),this.changed()},e.prototype.Sn=function(t){var e=t.element,n=a(e);this.bn[n].forEach(X),delete this.bn[n],this.dispatchEvent(new Ha("removelayer",e)),this.changed()},e.prototype.getLayers=function(){return this.get(Ya)},e.prototype.setLayers=function(t){var e=this.getLayers();if(e)for(var n=e.getArray(),r=0,i=n.length;r<i;++r)this.dispatchEvent(new Ha("removelayer",n[r]));this.set(Ya,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var r=this.getLayerState(),i=r.zIndex;t||void 0!==r.zIndex||(i=0);for(var o=n,a=e.length;o<a;o++){var s=e[o];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),s.minZoom=Math.max(s.minZoom,r.minZoom),s.maxZoom=Math.min(s.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==s.extent?s.extent=Ge(s.extent,r.extent):s.extent=r.extent),void 0===s.zIndex&&(s.zIndex=i)}return e},e.prototype.getSourceState=function(){return ea},e}(Yo),Za=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ka=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==r?r:null,i}return Za(e,t),e}(p),Ja=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qa=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=r,a.On=null,a.Tn=null,a.dragging=void 0!==i&&i,a}return Ja(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.On||(this.On=this.map.getEventPixel(this.originalEvent)),this.On},set:function(t){this.On=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.Tn||(this.Tn=this.map.getCoordinateFromPixel(this.pixel)),this.Tn},set:function(t){this.Tn=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Ka),$a={SINGLECLICK:"singleclick",CLICK:z,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ts="pointermove",es="pointerdown",ns="pointerup",rs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),is=function(t){function e(e,n){var r=t.call(this,e)||this;r.vn=e,r.En,r.An=!1,r.Cn=!1,r.Rn=[],r.Pn=void 0===n?1:n,r.In=null;var i=r.vn.getViewport();return r.Nn=0,r.zn={},r.pn=i,r.Fn=H(i,es,r.Ln,r),r.Gn,r.Dn=H(i,ts,r.Un,r),r.qn=r.Bn.bind(r),r.pn.addEventListener(W,r.qn,!!Gt&&{passive:!1}),r}return rs(e,t),e.prototype.Wn=function(t){var e=new Qa($a.CLICK,this.vn,t);this.dispatchEvent(e),void 0!==this.En?(clearTimeout(this.En),this.En=void 0,e=new Qa($a.DBLCLICK,this.vn,t),this.dispatchEvent(e)):this.En=setTimeout(function(){this.En=void 0;var e=new Qa($a.SINGLECLICK,this.vn,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.Vn=function(t){var e=t;e.type==$a.POINTERUP||e.type==$a.POINTERCANCEL?delete this.zn[e.pointerId]:e.type==$a.POINTERDOWN&&(this.zn[e.pointerId]=!0),this.Nn=Object.keys(this.zn).length},e.prototype.Xn=function(t){this.Vn(t);var e=new Qa($a.POINTERUP,this.vn,t);this.dispatchEvent(e),this.An&&!e.defaultPrevented&&!this.Cn&&this.Hn(t)&&this.Wn(this.In),0===this.Nn&&(this.Rn.forEach(X),this.Rn.length=0,this.Cn=!1,this.In=null)},e.prototype.Hn=function(t){return 0===t.button},e.prototype.Ln=function(t){this.An=0===this.Nn,this.Vn(t);var e=new Qa($a.POINTERDOWN,this.vn,t);for(var n in this.dispatchEvent(e),this.In={},t){var r=t[n];this.In[n]="function"==typeof r?I:r}if(0===this.Rn.length){var i=this.vn.getOwnerDocument();this.Rn.push(H(i,$a.POINTERMOVE,this.Jn,this),H(i,$a.POINTERUP,this.Xn,this),H(this.pn,$a.POINTERCANCEL,this.Xn,this)),this.pn.getRootNode&&this.pn.getRootNode()!==i&&this.Rn.push(H(this.pn.getRootNode(),$a.POINTERUP,this.Xn,this))}},e.prototype.Jn=function(t){if(this.Kn(t)){this.Cn=!0;var e=new Qa($a.POINTERDRAG,this.vn,t,this.Cn);this.dispatchEvent(e)}},e.prototype.Un=function(t){this.Gn=t;var e=!(!this.In||!this.Kn(t));this.dispatchEvent(new Qa(t.type,this.vn,t,e))},e.prototype.Bn=function(t){var e=this.Gn;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.Kn=function(t){return this.Cn||Math.abs(t.clientX-this.In.clientX)>this.Pn||Math.abs(t.clientY-this.In.clientY)>this.Pn},e.prototype.disposeInternal=function(){this.Dn&&(X(this.Dn),this.Dn=null),this.pn.removeEventListener(W,this.qn),this.Fn&&(X(this.Fn),this.Fn=null),this.Rn.forEach(X),this.Rn.length=0,this.pn=null,t.prototype.disposeInternal.call(this)},e}(R),os="postrender",as="loadstart",ss="loadend",ls="layergroup",us="size",cs="target",hs="view",ps=1/0,fs=function(){function t(t,e){this.Yn=t,this.Zn=e,this.$n=[],this.Qn=[],this.ti={}}return t.prototype.clear=function(){this.$n.length=0,this.Qn.length=0,O(this.ti)},t.prototype.dequeue=function(){var t=this.$n,e=this.Qn,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.ni(0));var r=this.Zn(n);return delete this.ti[r],n},t.prototype.enqueue=function(t){yt(!(this.Zn(t)in this.ti),31);var e=this.Yn(t);return e!=ps&&(this.$n.push(t),this.Qn.push(e),this.ti[this.Zn(t)]=!0,this.ii(0,this.$n.length-1),!0)},t.prototype.getCount=function(){return this.$n.length},t.prototype.ri=function(t){return 2*t+1},t.prototype.ei=function(t){return 2*t+2},t.prototype.oi=function(t){return t-1>>1},t.prototype.si=function(){var t;for(t=(this.$n.length>>1)-1;t>=0;t--)this.ni(t)},t.prototype.isEmpty=function(){return 0===this.$n.length},t.prototype.isKeyQueued=function(t){return t in this.ti},t.prototype.isQueued=function(t){return this.isKeyQueued(this.Zn(t))},t.prototype.ni=function(t){for(var e=this.$n,n=this.Qn,r=e.length,i=e[t],o=n[t],a=t;t<r>>1;){var s=this.ri(t),l=this.ei(t),u=l<r&&n[l]<n[s]?l:s;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=o,this.ii(a,t)},t.prototype.ii=function(t,e){for(var n=this.$n,r=this.Qn,i=n[e],o=r[e];e>t;){var a=this.oi(e);if(!(r[a]>o))break;n[e]=n[a],r[e]=r[a],e=a}n[e]=i,r[e]=o},t.prototype.reprioritize=function(){var t,e,n,r=this.Yn,i=this.$n,o=this.Qn,a=0,s=i.length;for(e=0;e<s;++e)(n=r(t=i[e]))==ps?delete this.ti[this.Zn(t)]:(o[a]=n,i[a++]=t);i.length=a,o.length=a,this.si()},t}(),ds=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gs=function(t){function e(e,n){var r=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.ai=r.handleTileChange.bind(r),r.ui=n,r.ci=0,r.hi={},r}return ds(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(D,this.ai),n},e.prototype.getTilesLoading=function(){return this.ci},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(D,this.ai);var r=e.getKey();r in this.hi&&(delete this.hi[r],--this.ci),this.ui()}},e.prototype.loadMoreTiles=function(t,e){for(var n,r,i=0;this.ci<t&&i<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),0!==n.getState()||r in this.hi||(this.hi[r]=!0,++this.ci,++i,n.load())},e}(fs);function ys(t,e,n,r,i){if(!t||!(n in t.wantedTiles))return ps;if(!t.wantedTiles[n][e.getKey()])return ps;var o=t.viewState.center,a=r[0]-o[0],s=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}var ms={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},vs=256;function ws(t,e,n){return function(r,i,o,a,s){if(r){if(!i&&!e)return r;var l=e?0:o[0]*i,u=e?0:o[1]*i,c=s?s[0]:0,h=s?s[1]:0,p=t[0]+l/2+c,f=t[2]-l/2+c,d=t[1]+u/2+h,g=t[3]-u/2+h;p>f&&(f=p=(f+p)/2),d>g&&(g=d=(g+d)/2);var y=Qe(r[0],p,f),m=Qe(r[1],d,g);if(a&&n&&i){var v=30*i;y+=-v*Math.log(1+Math.max(0,p-r[0])/v)+v*Math.log(1+Math.max(0,r[0]-f)/v),m+=-v*Math.log(1+Math.max(0,d-r[1])/v)+v*Math.log(1+Math.max(0,r[1]-g)/v)}return[y,m]}}}function bs(t){return t}function xs(t,e,n,r){var i=qe(e)/n[0],o=ze(e)/n[1];return r?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function _s(t,e,n){var r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Qe(r,n/2,2*e)}function Es(t,e,n,r){return function(i,o,a,s){if(void 0!==i){var l=t[0],u=t[t.length-1],c=n?xs(l,n,a,r):l;if(s)return void 0===e||e?_s(i,c,u):Qe(i,u,c);var h=Math.min(c,i),p=Math.floor(v(t,h,o));return t[p]>c&&p<t.length-1?t[p+1]:t[p]}}}function Ss(t,e,n,r,i,o){return function(a,s,l,u){if(void 0!==a){var c=i?xs(e,i,l,o):e,h=void 0!==n?n:0;if(u)return void 0===r||r?_s(a,c,h):Qe(a,h,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),f=-s*(.5-1e-9)+.5,d=Math.min(c,a),g=Math.floor(Math.log(e/d)/Math.log(t)+f),y=Math.max(p,g);return Qe(e/Math.pow(t,y),h,c)}}}function Cs(t,e,n,r,i){return function(o,a,s,l){if(void 0!==o){var u=r?xs(t,r,s,i):t;return(void 0===n||n)&&l?_s(o,u,e):Qe(o,e,u)}}}function Ts(t){return void 0!==t?0:void 0}function Is(t){return void 0!==t?t:void 0}function As(t){var e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function Ps(t){var e=t||an(5);return function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}var ks=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Os(t,e){setTimeout((function(){t(e)}),0)}function Ms(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ws(t.extent,t.constrainOnlyCenter,e)}var n=dr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var r=n.getExtent().slice();return r[0]=-1/0,r[2]=1/0,ws(r,!1,!1)}return bs}function Ns(t){var e,n,r,i=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,u=void 0!==t.showFullExtent&&t.showFullExtent,c=dr(t.projection,"EPSG:3857"),h=c.getExtent(),p=t.constrainOnlyCenter,f=t.extent;if(s||f||!c.isGlobal()||(p=!1,f=h),void 0!==t.resolutions){var d=t.resolutions;n=d[i],r=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?Es(d,l,!p&&f,u):Cs(n,r,l,!p&&f,u)}else{var g=(h?Math.max(qe(h),ze(h)):360*At[kt.DEGREES]/c.getMetersPerUnit())/vs/Math.pow(2,0),y=g/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=g/Math.pow(a,i),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,o):g/Math.pow(a,o):y),o=i+Math.floor(Math.log(n/r)/Math.log(a)),r=n/Math.pow(a,o-i),e=t.constrainResolution?Ss(a,n,r,l,!p&&f,u):Cs(n,r,l,!p&&f,u)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:a}}function Ls(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Ps():!1===e?Is:"number"==typeof e?As(e):Is}return Ts}function Rs(t){return!(t.sourceCenter&&t.targetCenter&&!Wn(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Ds(t,e,n,r,i){var o=Math.cos(-i),a=Math.sin(-i),s=t[0]*o-t[1]*a,l=t[1]*o+t[0]*a;return[(s+=(e[0]/2-n[0])*r)*o-(l+=(n[1]-e[1]/2)*r)*(a=-a),l*o+s*a]}var Fs=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=k({},e);return n.fi=[0,0],n.li=[],n.vi,n.di=dr(r.projection,"EPSG:3857"),n.yi=[100,100],n.mi=null,n.wi,n.bi,n.gi=null,n.xi,n.ji,n.Si=void 0,r.projection&&or(),r.center&&(r.center=Ir(r.center,n.di)),r.extent&&(r.extent=Pr(r.extent,n.di)),n.ki(r),n}return ks(e,t),e.prototype.ki=function(t){var e=k({},t);for(var n in ms)delete e[n];this.setProperties(e,!0);var r=Ns(t);this.Mi=r.maxResolution,this._i=r.minResolution,this.Oi=r.zoomFactor,this.Ti=t.resolutions,this.Ei=t.padding,this.Ai=r.minZoom;var i=Ms(t),o=r.constraint,a=Ls(t);this.Ci={center:i,resolution:o,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.Ei},set:function(t){var e=this.Ei;this.Ei=t;var n=this.getCenter();if(n){var r=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),o=i/2*(r[3]-e[3]+e[1]-r[1]),a=i/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}},enumerable:!1,configurable:!0}),e.prototype.Ri=function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),k({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&((r=k({},r)).center=Ir(r.center,this.getProjection())),r.anchor&&((r=k({},r)).anchor=Ir(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var r=0;r<n&&!this.isDef();++r){var i=arguments[r];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(r!==n){for(var o=Date.now(),a=this.mi.slice(),s=this.wi,l=this.bi,u=[];r<n;++r){var c=arguments[r],h={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||ct,callback:e};if(c.center&&(h.sourceCenter=a,h.targetCenter=c.center.slice(),a=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=s,h.targetResolution=this.getResolutionForZoom(c.zoom),s=h.targetResolution):c.resolution&&(h.sourceResolution=s,h.targetResolution=c.resolution,s=h.targetResolution),void 0!==c.rotation){h.sourceRotation=l;var p=sn(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+p,l=h.targetRotation}Rs(h)?h.complete=!0:o+=h.duration,u.push(h)}this.li.push(u),this.setHint(0,1),this.Pi()}else e&&Os(e,!0)},e.prototype.getAnimating=function(){return this.fi[0]>0},e.prototype.getInteracting=function(){return this.fi[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.fi[0]);for(var e=0,n=this.li.length;e<n;++e){var r=this.li[e];if(r[0].callback&&Os(r[0].callback,!1),!t)for(var i=0,o=r.length;i<o;++i){var a=r[i];if(!a.complete){t=a.anchor;break}}}this.li.length=0,this.Si=t,this.gi=null,this.xi=NaN,this.ji=NaN},e.prototype.Pi=function(){if(void 0!==this.vi&&(cancelAnimationFrame(this.vi),this.vi=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.li.length-1;n>=0;--n){for(var r=this.li[n],i=!0,o=0,a=r.length;o<a;++o){var s=r[o];if(!s.complete){var l=t-s.start,u=s.duration>0?l/s.duration:1;u>=1?(s.complete=!0,u=1):i=!1;var c=s.easing(u);if(s.sourceCenter){var h=s.sourceCenter[0],p=s.sourceCenter[1],f=s.targetCenter[0],d=s.targetCenter[1];this.gi=s.targetCenter;var g=h+c*(f-h),y=p+c*(d-p);this.mi=[g,y]}if(s.sourceResolution&&s.targetResolution){var m=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var v=this.Ii(this.getRotation()),w=this.Ci.resolution(m,0,v,!0);this.mi=this.calculateCenterZoom(w,s.anchor)}this.xi=s.targetResolution,this.wi=m,this.Ni(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var b=1===c?sn(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var x=this.Ci.rotation(b,!0);this.mi=this.calculateCenterRotate(x,s.anchor)}this.ji=s.targetRotation,this.bi=b}if(this.Ni(!0),e=!0,!s.complete)break}}if(i){this.li[n]=null,this.setHint(0,-1),this.gi=null,this.xi=NaN,this.ji=NaN;var _=r[0].callback;_&&Os(_,!0)}}this.li=this.li.filter(Boolean),e&&void 0===this.vi&&(this.vi=requestAnimationFrame(this.Pi.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,r=this.getCenterInternal();return void 0!==r&&(Vn(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),zn(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenterInternal(),i=this.getResolution();return void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]),n},e.prototype.Ii=function(t){var e=this.yi;if(t){var n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.yi=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Tr(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(ms.CENTER)},e.prototype.getConstraints=function(){return this.Ci},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.fi[0],t[1]=this.fi[1],t):this.fi.slice()},e.prototype.calculateExtent=function(t){return Ar(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.zi(),n=this.getCenterInternal();yt(n,1);var r=this.getResolution();yt(void 0!==r,2);var i=this.getRotation();return yt(void 0!==i,3),je(n,r,i,e)},e.prototype.getMaxResolution=function(){return this.Mi},e.prototype.getMinResolution=function(){return this._i},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this._i)},e.prototype.setMaxZoom=function(t){this.ki(this.Ri({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.Mi)},e.prototype.setMinZoom=function(t){this.ki(this.Ri({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.ki(this.Ri({constrainResolution:t}))},e.prototype.getProjection=function(){return this.di},e.prototype.getResolution=function(){return this.get(ms.RESOLUTION)},e.prototype.getResolutions=function(){return this.Ti},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Pr(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.zi(),r=qe(t)/n[0],i=ze(t)/n[1];return Math.max(r,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.Mi),r=this._i,i=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(ms.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.Mi),r=this._i,i=Math.log(n/r)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.zi=function(t){var e=this.Ii(t),n=this.Ei;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),i=this.Ei;if(i){var o=this.zi();r=Ds(r,this.Ii(),[o[0]/2+i[3],o[1]/2+i[0]],e,n)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.gi,nextResolution:this.xi,nextRotation:this.ji,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,r=this.Ai||0;if(this.Ti){var i=v(this.Ti,t,1);r=i,e=this.Ti[i],n=i==this.Ti.length-1?2:e/this.Ti[i+1]}else e=this.Mi,n=this.Oi;return r+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.Ti){if(this.Ti.length<=1)return 0;var e=Qe(Math.floor(t),0,this.Ti.length-2),n=this.Ti[e]/this.Ti[e+1];return this.Ti[e]/Math.pow(n,Qe(t-e,0,1))}return this.Mi/Math.pow(this.Oi,t-this.Ai)},e.prototype.fit=function(t,e){var n;if(yt(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))yt(!Ve(t),25),n=Ui(r=Pr(t,this.getProjection()));else if(t.getType()===St.CIRCLE){var r;(n=Ui(r=Pr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),De(r))}else{var i=Cr();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride(),a=1/0,s=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=o){var p=i[c]*n-i[c+1]*r,f=i[c]*r+i[c+1]*n;a=Math.min(a,p),s=Math.min(s,f),l=Math.max(l,p),u=Math.max(u,f)}return[a,s,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},r=n.size;r||(r=this.zi());var i,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var s=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(s,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,a?0:1);var u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),p=De(s);p[0]+=(o[1]-o[3])/2*l,p[1]+=(o[0]-o[2])/2*l;var f=p[0]*h-p[1]*c,d=p[1]*h+p[0]*c,g=this.getConstrainedCenter([f,d],l),y=n.callback?n.callback:I;void 0!==n.duration?this.animateInternal({resolution:l,center:g,duration:n.duration,easing:n.easing},y):(this.wi=l,this.mi=g,this.Ni(!1,!0),Os(y,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Ir(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(Ds(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,r){var i,o=this.Ei;if(o&&t){var a=this.zi(-n),s=Ds(t,r,[a[0]/2+o[3],a[1]/2+o[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Tr(this.mi,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.mi;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Ir(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.Ii(this.getRotation()),i=this.Ci.resolution(this.wi*t,0,r,n);e&&(this.mi=this.calculateCenterZoom(i,e)),this.wi*=t,this.Ni()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.Oi,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Ir(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.Ci.rotation(this.bi+t,n);e&&(this.mi=this.calculateCenterRotate(r,e)),this.bi+=t,this.Ni()},e.prototype.setCenter=function(t){this.setCenterInternal(t?Ir(t,this.getProjection()):t)},e.prototype.setCenterInternal=function(t){this.mi=t,this.Ni()},e.prototype.setHint=function(t,e){return this.fi[t]+=e,this.changed(),this.fi[t]},e.prototype.setResolution=function(t){this.wi=t,this.Ni()},e.prototype.setRotation=function(t){this.bi=t,this.Ni()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.Ni=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.Ci.rotation(this.bi,n),i=this.Ii(r),o=this.Ci.resolution(this.wi,0,i,n),a=this.Ci.center(this.mi,o,i,n,this.calculateCenterShift(this.mi,o,r,i));this.get(ms.ROTATION)!==r&&this.set(ms.ROTATION,r),this.get(ms.RESOLUTION)!==o&&(this.set(ms.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(ms.CENTER)&&Wn(this.get(ms.CENTER),a)||this.set(ms.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.Si=void 0},e.prototype.resolveConstraints=function(t,e,n){var r=void 0!==t?t:200,i=e||0,o=this.Ci.rotation(this.bi),a=this.Ii(o),s=this.Ci.resolution(this.wi,i,a),l=this.Ci.center(this.mi,s,a,!1,this.calculateCenterShift(this.mi,s,o,a));if(0===r&&!this.Si)return this.wi=s,this.bi=o,this.mi=l,void this.Ni();var u=n||(0===r?this.Si:void 0);this.Si=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Wn(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:s,duration:r,easing:ut,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var r=n&&Ir(n,this.getProjection());this.endInteractionInternal(t,e,r)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.Ii(this.getRotation());return this.Ci.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,r=this.Ii(this.getRotation());return this.Ci.resolution(t,n,r)},e}(et);function js(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]+2*e,n[1]=t[1]+2*e,n}function zs(t){return t[0]>0&&t[1]>0}function Gs(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function Bs(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var Us=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function qs(t){t instanceof oa?t.setMapInternal(null):t instanceof Xa&&t.getLayers().forEach(qs)}function Ws(t,e){if(t instanceof oa)t.setMapInternal(e);else if(t instanceof Xa)for(var n=t.getLayers().getArray(),r=0,i=n.length;r<i;++r)Ws(n[r],e)}var Vs=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Xa({layers:t.layers});return o[ls]=a,o[cs]=t.target,o[hs]=t.view instanceof Fs?t.view:new Fs,void 0!==t.controls&&(Array.isArray(t.controls)?n=new st(t.controls.slice()):(yt("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new st(t.interactions.slice()):(yt("function"==typeof t.interactions.getArray,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new st(t.overlays.slice()):(yt("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new st,{controls:n,interactions:r,keyboardEventTarget:e,overlays:i,values:o}}(e);n.Fi,n.Li=!0,n.Gi=n.handleBrowserEvent.bind(n),n.Di=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.Rt=void 0!==e.pixelRatio?e.pixelRatio:Ft,n.Ui,n.qi,n.Bi=function(){this.qi=void 0,this.Wi(Date.now())}.bind(n),n.Vi=[1,0,0,1,0,0],n.Xi=[1,0,0,1,0,0],n.Hi=0,n.Ji=null,n.Ki=null,n.Yi=null,n.Zi=null,n.$i=null,n.Qi=document.createElement("div"),n.Qi.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.Qi.style.position="relative",n.Qi.style.overflow="hidden",n.Qi.style.width="100%",n.Qi.style.height="100%",n.tr=document.createElement("div"),n.tr.style.position="absolute",n.tr.style.zIndex="0",n.tr.style.width="100%",n.tr.style.height="100%",n.tr.style.pointerEvents="none",n.tr.className="ol-overlaycontainer",n.Qi.appendChild(n.tr),n.nr=document.createElement("div"),n.nr.style.position="absolute",n.nr.style.zIndex="0",n.nr.style.width="100%",n.nr.style.height="100%",n.nr.style.pointerEvents="none",n.nr.className="ol-overlaycontainer-stopevent",n.Qi.appendChild(n.nr),n.ir=null,n.Pn=e.moveTolerance,n.rr=r.keyboardEventTarget,n.er=null,n.controls=r.controls||new st,n.interactions=r.interactions||new st,n.sr=r.overlays,n.ar={},n.cn=null,n.ur=[],n.cr=new gs(n.getTilePriority.bind(n),n.hr.bind(n)),n.addChangeListener(ls,n.lr),n.addChangeListener(hs,n.vr),n.addChangeListener(us,n.dr),n.addChangeListener(cs,n.pr),n.setProperties(r.values);var i=n;return!e.view||e.view instanceof Fs||e.view.then((function(t){i.setView(new Fs(t))})),n.controls.addEventListener(nt,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(rt,function(t){t.element.setMap(null)}.bind(n)),n.interactions.addEventListener(nt,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(rt,function(t){t.element.setMap(null)}.bind(n)),n.sr.addEventListener(nt,function(t){this.yr(t.element)}.bind(n)),n.sr.addEventListener(rt,function(t){var e=t.element.getId();void 0!==e&&delete this.ar[e.toString()],t.element.setMap(null)}.bind(n)),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.sr.forEach(n.yr.bind(n)),n}return Us(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.mr=function(t){Ws(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.yr=function(t){var e=t.getId();void 0!==e&&(this.ar[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.Ji&&this.cn){var r=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:C,a=!1!==n.checkWrapped;return this.cn.forEachFeatureAtCoordinate(r,this.Ji,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.getAllLayers=function(){var t=[];return function e(n){n.forEach((function(n){n instanceof Xa?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.Ji&&this.cn){var r=n||{},i=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||C;return this.cn.forEachLayerAtPixel(t,this.Ji,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.Ji||!this.cn)return!1;var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:C,i=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.cn.hasFeatureAtCoordinate(n,this.Ji,i,o,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.Qi.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(cs)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Tr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.Ji;return e?Ht(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.sr},e.prototype.getOverlayById=function(t){var e=this.ar[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(ls)},e.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof st)e.setLayers(t);else{var n=e.getLayers();n.clear(),n.extend(t)}},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e];if(r.visible){var i=r.layer.getRenderer();if(i&&!i.ready)return!0;var o=r.layer.getSource();if(o&&o.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Ir(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.Ji;return e?Ht(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.cn},e.prototype.getSize=function(){return this.get(us)},e.prototype.getView=function(){return this.get(hs)},e.prototype.getViewport=function(){return this.Qi},e.prototype.getOverlayContainer=function(){return this.tr},e.prototype.getOverlayContainerStopEvent=function(){return this.nr},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,r){return ys(this.Ji,t,e,n,r)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new Qa(n,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.Ji){var e=t.originalEvent,n=e.type;if(n===es||n===V||n===B){var r=this.getOwnerDocument(),i=this.Qi.getRootNode?this.Qi.getRootNode():r,o=e.target;if(this.nr.contains(o)||!(i===r?r.documentElement:i).contains(o))return}if(t.frameState=this.Ji,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var l=a[s];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.Ji,e=this.cr;if(!e.isEmpty()){var n=this.Di,r=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var o=Date.now()-t.time>8;n=o?0:8,r=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}t&&this.cn&&!t.animate&&(!0===this.Fi?(this.hasListener(Qo)&&this.cn.dispatchRenderEvent(Qo,t),!1===this.Li&&(this.Li=!0,this.dispatchEvent(new Ka(ss,this,t)))):!0===this.Li&&(this.Li=!1,this.dispatchEvent(new Ka(as,this,t))));for(var a=this.ur,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.dr=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.pr=function(){if(this.ir){for(var t=0,e=this.er.length;t<e;++t)X(this.er[t]);this.er=null,this.Qi.removeEventListener(j,this.Gi),this.Qi.removeEventListener(V,this.Gi),this.ir.dispose(),this.ir=null,yo(this.Qi)}var n=this.getTargetElement();if(n){for(var r in n.appendChild(this.Qi),this.cn||(this.cn=this.createRenderer()),this.ir=new is(this,this.Pn),$a)this.ir.addEventListener($a[r],this.handleMapBrowserEvent.bind(this));this.Qi.addEventListener(j,this.Gi,!1),this.Qi.addEventListener(V,this.Gi,!!Gt&&{passive:!1});var i=this.getOwnerDocument().defaultView,o=this.rr?this.rr:n;this.er=[H(o,B,this.handleBrowserEvent,this),H(o,U,this.handleBrowserEvent,this),H(i,"resize",this.updateSize,this)]}else this.cn&&(clearTimeout(this.Ui),this.Ui=void 0,this.ur.length=0,this.cn.dispose(),this.cn=null),this.qi&&(cancelAnimationFrame(this.qi),this.qi=void 0);this.updateSize()},e.prototype.hr=function(){this.render()},e.prototype.wr=function(){this.render()},e.prototype.vr=function(){this.Yi&&(X(this.Yi),this.Yi=null),this.Zi&&(X(this.Zi),this.Zi=null);var t=this.getView();t&&(this.br(),this.Yi=H(t,f,this.wr,this),this.Zi=H(t,D,this.wr,this),t.resolveConstraints(0)),this.render()},e.prototype.lr=function(){this.$i&&(this.$i.forEach(X),this.$i=null);var t=this.getLayerGroup();t&&(this.mr(new Ha("addlayer",t)),this.$i=[H(t,f,this.render,this),H(t,D,this.render,this),H(t,"addlayer",this.mr,this),H(t,"removelayer",this.gr,this)]),this.render()},e.prototype.isRendered=function(){return!!this.Ji},e.prototype.renderSync=function(){this.qi&&cancelAnimationFrame(this.qi),this.Bi()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.cn&&void 0===this.qi&&(this.qi=requestAnimationFrame(this.Bi))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.gr=function(t){qs(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.Wi=function(t){var e=this,n=this.getSize(),r=this.getView(),i=this.Ji,o=null;if(void 0!==n&&zs(n)&&r&&r.isDef()){var s=r.getHints(this.Ji?this.Ji.viewHints:void 0),l=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.Vi,declutterTree:null,extent:je(l.center,l.resolution,l.rotation,n),index:this.Hi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.Rt,pixelToCoordinateTransform:this.Xi,postRenderFunctions:[],size:n,tileQueue:this.cr,time:t,usedTiles:{},viewState:l,viewHints:s,wantedTiles:{},mapId:a(this),renderTargets:{}},l.nextCenter&&l.nextResolution){var u=isNaN(l.nextRotation)?l.rotation:l.nextRotation;o.nextExtent=je(l.nextCenter,l.nextResolution,u,n)}}this.Ji=o,this.cn.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.ur,o.postRenderFunctions),i&&(!this.Ki||!Ve(this.Ki)&&!Se(o.extent,this.Ki))&&(this.dispatchEvent(new Ka("movestart",this,i)),this.Ki=xe(this.Ki)),this.Ki&&!o.viewHints[0]&&!o.viewHints[1]&&!Se(o.extent,this.Ki)&&(this.dispatchEvent(new Ka("moveend",this,o)),fe(o.extent,this.Ki))),this.dispatchEvent(new Ka(os,this,o)),this.Fi=this.hasListener(as)||this.hasListener(ss)||this.hasListener(Qo)?!this.cr.getTilesLoading()&&!this.cr.getCount()&&!this.getLoadingOrNotReady():void 0,this.Ui||(this.Ui=setTimeout((function(){e.Ui=void 0,e.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){var e=this.getLayerGroup();e&&this.gr(new Ha("removelayer",e)),this.set(ls,t)},e.prototype.setSize=function(t){this.set(us,t)},e.prototype.setTarget=function(t){this.set(cs,t)},e.prototype.setView=function(t){if(!t||t instanceof Fs)this.set(hs,t);else{this.set(hs,new Fs);var e=this;t.then((function(t){e.setView(new Fs(t))}))}},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),r=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(r)||isNaN(i)||!zs(e=[r,i])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.br()},e.prototype.br=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.Qi);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(et),Hs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ys=function(t){function e(e){var n=t.call(this)||this,r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),n.element=r||null,n.jr=null,n.vn=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return Hs(e,t),e.prototype.disposeInternal=function(){yo(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.vn},e.prototype.setMap=function(t){this.vn&&yo(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)X(this.listenerKeys[e]);this.listenerKeys.length=0,this.vn=t,t&&((this.jr?this.jr:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==I&&this.listenerKeys.push(H(t,os,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.jr="string"==typeof t?document.getElementById(t):t},e}(et),Xs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zs=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Sr=document.createElement("ul"),n.kr=void 0===r.collapsed||r.collapsed,n.Mr=n.kr,n._r=void 0!==r.collapsible,n.Tr=void 0===r.collapsible||r.collapsible,n.Tr||(n.kr=!1);var i=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.expandClassName?r.expandClassName:i+"-expand",s=void 0!==r.collapseLabel?r.collapseLabel:"›",l=void 0!==r.collapseClassName?r.collapseClassName:i+"-collapse";"string"==typeof s?(n.Er=document.createElement("span"),n.Er.textContent=s,n.Er.className=l):n.Er=s;var u=void 0!==r.label?r.label:"i";"string"==typeof u?(n.Ar=document.createElement("span"),n.Ar.textContent=u,n.Ar.className=a):n.Ar=u;var c=n.Tr&&!n.kr?n.Er:n.Ar;n.Cr=document.createElement("button"),n.Cr.setAttribute("type","button"),n.Cr.setAttribute("aria-expanded",String(!n.kr)),n.Cr.title=o,n.Cr.appendChild(c),n.Cr.addEventListener(z,n.Rr.bind(n),!1);var h=i+" ol-unselectable "+da+(n.kr&&n.Tr?" ol-collapsed":"")+(n.Tr?"":" ol-uncollapsible"),p=n.element;return p.className=h,p.appendChild(n.Cr),p.appendChild(n.Sr),n.Pr=[],n.mn=!0,n}return Xs(e,t),e.prototype.Ir=function(t){for(var e={},n=[],r=!0,i=t.layerStatesArray,o=0,a=i.length;o<a;++o){var s=i[o];if(ia(s,t.viewState)){var l=s.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(r=r&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this._r||this.setCollapsible(r),n},e.prototype.Nr=function(t){if(t){var e=this.Ir(t),n=e.length>0;if(this.mn!=n&&(this.element.style.display=n?"":"none",this.mn=n),!_(e,this.Pr)){mo(this.Sr);for(var r=0,i=e.length;r<i;++r){var o=document.createElement("li");o.innerHTML=e[r],this.Sr.appendChild(o)}this.Pr=e}}else this.mn&&(this.element.style.display="none",this.mn=!1)},e.prototype.Rr=function(t){t.preventDefault(),this.zr(),this.Mr=this.kr},e.prototype.zr=function(){this.element.classList.toggle(ga),this.kr?go(this.Er,this.Ar):go(this.Ar,this.Er),this.kr=!this.kr,this.Cr.setAttribute("aria-expanded",String(!this.kr))},e.prototype.getCollapsible=function(){return this.Tr},e.prototype.setCollapsible=function(t){this.Tr!==t&&(this.Tr=t,this.element.classList.toggle("ol-uncollapsible"),this.Mr&&this.zr())},e.prototype.setCollapsed=function(t){this.Mr=t,this.Tr&&this.kr!==t&&this.zr()},e.prototype.getCollapsed=function(){return this.kr},e.prototype.render=function(t){this.Nr(t.frameState)},e}(Ys),Ks=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Js=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var i=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",a=void 0!==r.compassClassName?r.compassClassName:"ol-compass";n.Ar=null,"string"==typeof o?(n.Ar=document.createElement("span"),n.Ar.className=a,n.Ar.textContent=o):(n.Ar=o,n.Ar.classList.add(a));var s=r.tipLabel?r.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(n.Ar),l.addEventListener(z,n.Rr.bind(n),!1);var u=i+" ol-unselectable "+da,c=n.element;return c.className=u,c.appendChild(l),n.Fr=r.resetNorth?r.resetNorth:void 0,n.Lr=void 0!==r.duration?r.duration:250,n.Gr=void 0===r.autoHide||r.autoHide,n.Dr=void 0,n.Gr&&n.element.classList.add(ha),n}return Ks(e,t),e.prototype.Rr=function(t){t.preventDefault(),void 0!==this.Fr?this.Fr():this.Ur()},e.prototype.Ur=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.Lr>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.Lr,easing:ut}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.Dr){var r="rotate("+n+"rad)";if(this.Gr){var i=this.element.classList.contains(ha);i||0!==n?i&&0!==n&&this.element.classList.remove(ha):this.element.classList.add(ha)}this.Ar.style.transform=r}this.Dr=n}},e}(Ys),Qs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$s=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),target:r.target})||this;var i=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,a=void 0!==r.zoomInClassName?r.zoomInClassName:i+"-in",s=void 0!==r.zoomOutClassName?r.zoomOutClassName:i+"-out",l=void 0!==r.zoomInLabel?r.zoomInLabel:"+",u=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",c=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",h=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=a,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(z,n.Rr.bind(n,o),!1);var f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=h,f.appendChild("string"==typeof u?document.createTextNode(u):u),f.addEventListener(z,n.Rr.bind(n,-o),!1);var d=i+" ol-unselectable "+da,g=n.element;return g.className=d,g.appendChild(p),g.appendChild(f),n.Lr=void 0!==r.duration?r.duration:250,n}return Qs(e,t),e.prototype.Rr=function(t,e){e.preventDefault(),this.qr(t)},e.prototype.qr=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var r=e.getConstrainedZoom(n+t);this.Lr>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.Lr,easing:ut})):e.setZoom(r)}}},e}(Ys);function tl(t){var e=t||{},n=new st;return(void 0===e.zoom||e.zoom)&&n.push(new $s(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Js(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Zs(e.attributionOptions)),n}var el="active",nl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function rl(t,e,n){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:ht,center:t.getConstrainedCenter(i)})}}function il(t,e,n,r){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==r?r:250,easing:ut})}}var ol=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.vn=null,n.setActive(!0),n}return nl(e,t),e.prototype.getActive=function(){return this.get(el)},e.prototype.getMap=function(){return this.vn},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(el,t)},e.prototype.setMap=function(t){this.vn=t},e}(et),al=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sl=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Br=r.delta?r.delta:1,n.Lr=void 0!==r.duration?r.duration:250,n}return al(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==$a.DBLCLICK){var n=t.originalEvent,r=t.map,i=t.coordinate,o=n.shiftKey?-this.Br:this.Br;il(r.getView(),o,i,this.Lr),n.preventDefault(),e=!0}return!e},e}(ol),ll=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ul(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}var cl=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.Wr={},n.targetPointers=[],n}return ll(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.Vr(t),this.handlingDownUpSequence){if(t.type==$a.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==$a.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==$a.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==$a.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.Vr=function(t){if(function(t){var e=t.type;return e===$a.POINTERDOWN||e===$a.POINTERDRAG||e===$a.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==$a.POINTERUP?delete this.Wr[n]:(t.type==$a.POINTERDOWN||n in this.Wr)&&(this.Wr[n]=e),this.targetPointers=M(this.Wr)}},e}(ol);function hl(t){var e=arguments;return function(t){for(var n=!0,r=0,i=e.length;r<i&&(n=n&&e[r](t));++r);return n}}var pl=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},fl=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},dl=function(t){var e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},gl=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||dl(t)},yl=C,ml=function(t){var e=t.originalEvent;return 0==e.button&&!(Rt&&Dt&&e.ctrlKey)},vl=T,wl=function(t){return t.type==$a.SINGLECLICK},bl=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},xl=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_l=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},El=function(t){var e=t.originalEvent;return yt(void 0!==e,56),"mouse"==e.pointerType},Sl=function(t){var e=t.originalEvent;return yt(void 0!==e,56),e.isPrimary&&0===e.button},Cl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tl=function(t){function e(e){var n=t.call(this,{stopDown:T})||this,r=e||{};n.Xr=r.kinetic,n.lastCentroid=null,n.Hr,n.Jr=!1;var i=r.condition?r.condition:hl(bl,Sl);return n.Kr=r.onFocusOnly?hl(gl,i):i,n.Yr=!1,n}return Cl(e,t),e.prototype.handleDragEvent=function(t){this.Jr||(this.Jr=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,n=ul(e);if(e.length==this.Hr){if(this.Xr&&this.Xr.update(n[0],n[1]),this.lastCentroid){var r=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();Hn(r,i.getResolution()),Vn(r,i.getRotation()),i.adjustCenterInternal(r)}}else this.Xr&&this.Xr.begin();this.lastCentroid=n,this.Hr=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.Yr&&this.Xr&&this.Xr.end()){var r=this.Xr.getDistance(),i=this.Xr.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(i),a[1]-r*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:ut})}return this.Jr&&(this.Jr=!1,n.endInteraction()),!1}return this.Xr&&this.Xr.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Kr(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.Xr&&this.Xr.begin(),this.Yr=this.targetPointers.length>1,!0}return!1},e}(cl),Il=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Al=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{stopDown:T})||this).Kr=r.condition?r.condition:fl,n.Zr=void 0,n.Lr=void 0!==r.duration?r.duration:250,n}return Il(e,t),e.prototype.handleDragEvent=function(t){if(El(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Ts){var r=e.getSize(),i=t.pixel,o=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.Zr){var a=o-this.Zr;n.adjustRotationInternal(-a)}this.Zr=o}}},e.prototype.handleUpEvent=function(t){return!El(t)||(t.map.getView().endInteraction(this.Lr),!1)},e.prototype.handleDownEvent=function(t){return!(!El(t)||!ml(t)||!this.Kr(t)||(t.map.getView().beginInteraction(),this.Zr=void 0,0))},e}(cl),Pl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kl=function(t){function e(e){var n=t.call(this)||this;return n.$r=null,n.pn=document.createElement("div"),n.pn.style.position="absolute",n.pn.style.pointerEvents="auto",n.pn.className="ol-box "+e,n.vn=null,n.Qr=null,n.te=null,n}return Pl(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.ne=function(){var t=this.Qr,e=this.te,n="px",r=this.pn.style;r.left=Math.min(t[0],e[0])+n,r.top=Math.min(t[1],e[1])+n,r.width=Math.abs(e[0]-t[0])+n,r.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.vn){this.vn.getOverlayContainer().removeChild(this.pn);var e=this.pn.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.vn=t,this.vn&&this.vn.getOverlayContainer().appendChild(this.pn)},e.prototype.setPixels=function(t,e){this.Qr=t,this.te=e,this.createOrUpdateGeometry(),this.ne()},e.prototype.createOrUpdateGeometry=function(){var t=this.Qr,e=this.te,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.vn.getCoordinateFromPixelInternal,this.vn);n[4]=n[0].slice(),this.$r?this.$r.setCoordinates([n]):this.$r=new Gi([n])},e.prototype.getGeometry=function(){return this.$r},e}(d),Ol=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ml=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=r,i}return Ol(e,t),e}(p),Nl=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=e||{};return n.ie=new kl(r.className||"ol-dragbox"),n.re=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(n.onBoxEnd=r.onBoxEnd),n.Qr=null,n.Kr=r.condition?r.condition:ml,n.ee=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return Ol(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],i=n[1]-e[1];return r*r+i*i>=this.re},e.prototype.getGeometry=function(){return this.ie.getGeometry()},e.prototype.handleDragEvent=function(t){this.ie.setPixels(this.Qr,t.pixel),this.dispatchEvent(new Ml("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.ie.setMap(null);var e=this.ee(t,this.Qr,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Ml(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.Kr(t)&&(this.Qr=t.pixel,this.ie.setMap(t.map),this.ie.setPixels(this.Qr,this.Qr),this.dispatchEvent(new Ml("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(cl),Ll=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rl=function(t){function e(e){var n=this,r=e||{},i=r.condition?r.condition:xl;return(n=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).Lr=void 0!==r.duration?r.duration:200,n.oe=void 0!==r.out&&r.out,n}return Ll(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.oe){var r=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(r),o=e.getResolution()/i;(n=n.clone()).scale(o*o)}e.fitInternal(n,{duration:this.Lr,easing:ut})},e}(Nl),Dl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fl=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.se=function(t){return bl(t)&&_l(t)},n.Kr=void 0!==r.condition?r.condition:n.se,n.Lr=void 0!==r.duration?r.duration:100,n.ae=void 0!==r.pixelDelta?r.pixelDelta:128,n}return Dl(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==B){var n=t.originalEvent,r=n.keyCode;if(this.Kr(t)&&(40==r||37==r||39==r||38==r)){var i=t.map.getView(),o=i.getResolution()*this.ae,a=0,s=0;40==r?s=-o:37==r?a=-o:39==r?a=o:s=o;var l=[a,s];Vn(l,i.getRotation()),rl(i,l,this.Lr),n.preventDefault(),e=!0}}return!e},e}(ol),jl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zl=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Kr=r.condition?r.condition:_l,n.Br=r.delta?r.delta:1,n.Lr=void 0!==r.duration?r.duration:100,n}return jl(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==B||t.type==U){var n=t.originalEvent,r=n.charCode;if(this.Kr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var i=t.map,o=r=="+".charCodeAt(0)?this.Br:-this.Br;il(i.getView(),o,void 0,this.Lr),n.preventDefault(),e=!0}}return!e},e}(ol),Gl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bl="trackpad",Ul=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,r)||this).ue=0,n.ce=0,n.wt=void 0!==r.maxDelta?r.maxDelta:1,n.Lr=void 0!==r.duration?r.duration:250,n.he=void 0!==r.timeout?r.timeout:80,n.fe=void 0===r.useAnchor||r.useAnchor,n.le=void 0!==r.constrainResolution&&r.constrainResolution;var i=r.condition?r.condition:yl;return n.Kr=r.onFocusOnly?hl(gl,i):i,n.ve=null,n.de=void 0,n.pe,n.ye=void 0,n.me=400,n.we,n.be=300,n}return Gl(e,t),e.prototype.ge=function(){this.we=void 0,this.getMap().getView().endInteraction(void 0,this.ce?this.ce>0?1:-1:0,this.ve)},e.prototype.handleEvent=function(t){if(!this.Kr(t))return!0;if(t.type!==V)return!0;var e,n=t.map,r=t.originalEvent;if(r.preventDefault(),this.fe&&(this.ve=t.coordinate),t.type==V&&(e=r.deltaY,Mt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Ft),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.ce=e;var i=Date.now();void 0===this.de&&(this.de=i),(!this.ye||i-this.de>this.me)&&(this.ye=Math.abs(e)<4?Bl:"wheel");var o=n.getView();if(this.ye===Bl&&!o.getConstrainResolution()&&!this.le)return this.we?clearTimeout(this.we):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.we=setTimeout(this.ge.bind(this),this.he),o.adjustZoom(-e/this.be,this.ve),this.de=i,!1;this.ue+=e;var a=Math.max(this.he-(i-this.de),0);return clearTimeout(this.pe),this.pe=setTimeout(this.xe.bind(this,n),a),!1},e.prototype.xe=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Qe(this.ue,-this.wt*this.be,this.wt*this.be)/this.be;(e.getConstrainResolution()||this.le)&&(n=n?n>0?1:-1:0),il(e,n,this.ve,this.Lr),this.ye=void 0,this.ue=0,this.ve=null,this.de=void 0,this.pe=void 0},e.prototype.setMouseAnchor=function(t){this.fe=t,t||(this.ve=null)},e}(ol),ql=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wl=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=T),(n=t.call(this,i)||this).je=null,n.Zr=void 0,n.Se=!1,n.ke=0,n.Me=void 0!==r.threshold?r.threshold:.3,n.Lr=void 0!==r.duration?r.duration:250,n}return ql(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.Zr){var o=i-this.Zr;this.ke+=o,!this.Se&&Math.abs(this.ke)>this.Me&&(this.Se=!0),e=o}this.Zr=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Ts){var l=a.getViewport().getBoundingClientRect(),u=ul(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.je=a.getCoordinateFromPixelInternal(u),this.Se&&(a.render(),s.adjustRotationInternal(e,this.je))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.Lr),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.je=null,this.Zr=void 0,this.Se=!1,this.ke=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(cl),Vl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hl=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=T),(n=t.call(this,i)||this).je=null,n.Lr=void 0!==r.duration?r.duration:400,n._e=void 0,n.Oe=1,n}return Vl(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],i=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(i*i+o*o);void 0!==this._e&&(e=this._e/a),this._e=a;var s=t.map,l=s.getView();1!=e&&(this.Oe=e);var u=s.getViewport().getBoundingClientRect(),c=ul(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.je=s.getCoordinateFromPixelInternal(c),s.render(),l.adjustResolutionInternal(e,this.je)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.Oe>1?1:-1;return e.endInteraction(this.Lr,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.je=null,this._e=void 0,this.Oe=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(cl);function Yl(t){var e=t||{},n=new st,r=new xo(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Al),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new sl({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Tl({onFocusOnly:e.onFocusOnly,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new Wl),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new Hl({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Fl),n.push(new zl({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new Ul({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Rl({duration:e.zoomDuration})),n}var Xl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zl=function(t){function e(e){return(e=k({},e)).controls||(e.controls=tl()),e.interactions||(e.interactions=Yl({onFocusOnly:!0})),t.call(this,e)||this}return Xl(e,t),e.prototype.createRenderer=function(){return new Wa(this)},e}(Vs),Kl="bottom-center",Jl="bottom-right",Ql="center-center",$l="center-right";function tu(t){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var eu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nu="element",ru="map",iu="offset",ou="position",au="positioning",su=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",n.element.style.position="absolute",n.element.style.pointerEvents="auto";var r=e.autoPan;return r&&"object"!==tu(r)&&(r={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=r||!1,n.rendered={_t:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(nu,n.handleElementChanged),n.addChangeListener(ru,n.handleMapChanged),n.addChangeListener(iu,n.handleOffsetChanged),n.addChangeListener(ou,n.handlePositionChanged),n.addChangeListener(au,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&n.setPosition(e.position),n}return eu(e,t),e.prototype.getElement=function(){return this.get(nu)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(ru)||null},e.prototype.getOffset=function(){return this.get(iu)},e.prototype.getPosition=function(){return this.get(ou)},e.prototype.getPositioning=function(){return this.get(au)},e.prototype.handleElementChanged=function(){mo(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(yo(this.element),X(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=H(t,os,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(nu,t)},e.prototype.setMap=function(t){this.set(ru,t)},e.prototype.setOffset=function(t){this.set(iu,t)},e.prototype.setPosition=function(t){this.set(ou,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(ou)){var n=this.getRect(e.getTargetElement(),e.getSize()),r=this.getElement(),i=this.getRect(r,[po(r),fo(r)]),o=t||{},a=void 0===o.margin?20:o.margin;if(!ye(n,i)){var s=i[0]-n[0],l=n[2]-i[2],u=i[1]-n[1],c=n[3]-i[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),u<0?h[1]=u-a:c<0&&(h[1]=Math.abs(c)+a),0!==h[0]||0!==h[1]){var p=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(p);if(!f)return;var d=[f[0]+h[0],f[1]+h[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),r=n.left+window.pageXOffset,i=n.top+window.pageYOffset;return[r,i,r+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(au,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(n,r)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,r=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px",s="0%",l="0%";i==Jl||i==$l||"top-right"==i?s="-100%":i!=Kl&&i!=Ql&&"top-center"!=i||(s="-50%"),"bottom-left"==i||i==Kl||i==Jl?l="-100%":"center-left"!=i&&i!=Ql&&i!=$l||(l="-50%");var u="translate(".concat(s,", ").concat(l,") translate(").concat(o,", ").concat(a,")");this.rendered._t!=u&&(this.rendered._t=u,n.transform=u,n.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(et),lu=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.Te=0,this.Ee={},this.Ae=null,this.Ce=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.Te=0,this.Ee={},this.Ae=null,this.Ce=null},t.prototype.containsKey=function(t){return this.Ee.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.Ae;e;)t(e.Re,e.Pe,this),e=e.newer},t.prototype.get=function(t,e){var n=this.Ee[t];return yt(void 0!==n,15),n===this.Ce||(n===this.Ae?(this.Ae=this.Ae.newer,this.Ae.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.Ce,this.Ce.newer=n,this.Ce=n),n.Re},t.prototype.remove=function(t){var e=this.Ee[t];return yt(void 0!==e,15),e===this.Ce?(this.Ce=e.older,this.Ce&&(this.Ce.newer=null)):e===this.Ae?(this.Ae=e.newer,this.Ae&&(this.Ae.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.Ee[t],--this.Te,e.Re},t.prototype.getCount=function(){return this.Te},t.prototype.getKeys=function(){var t,e=new Array(this.Te),n=0;for(t=this.Ce;t;t=t.older)e[n++]=t.Pe;return e},t.prototype.getValues=function(){var t,e=new Array(this.Te),n=0;for(t=this.Ce;t;t=t.older)e[n++]=t.Re;return e},t.prototype.peekLast=function(){return this.Ae.Re},t.prototype.peekLastKey=function(){return this.Ae.Pe},t.prototype.peekFirstKey=function(){return this.Ce.Pe},t.prototype.pop=function(){var t=this.Ae;return delete this.Ee[t.Pe],t.newer&&(t.newer.older=null),this.Ae=t.newer,this.Ae||(this.Ce=null),--this.Te,t.Re},t.prototype.replace=function(t,e){this.get(t),this.Ee[t].Re=e},t.prototype.set=function(t,e){yt(!(t in this.Ee),16);var n={Pe:t,newer:null,older:this.Ce,Re:e};this.Ce?this.Ce.newer=n:this.Ae=n,this.Ce=n,this.Ee[t]=n,++this.Te},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function uu(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function cu(t,e,n){return t+"/"+e+"/"+n}function hu(t){return cu(t[0],t[1],t[2])}function pu(t){var e=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return cu(e[0],e[1],e[2])}function fu(t){return t.split("/").map(Number)}function du(t){return(t[1]<<t[0])+t[2]}function gu(t,e){var n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o=e.getFullTileRange(n);return!o||o.containsXY(r,i)}var yu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yu(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=fu(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(hu(e.tileCoord)),e.release())}.bind(this))}},e}(lu),vu=function(){function t(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function wu(t,e,n,r,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new vu(t,e,n,r)}var bu=vu,xu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_u=[],Eu=function(t){function e(e,n,r,i){var o=t.call(this,e,n,{transition:0})||this;return o.Ne={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.ze={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.wrappedTileCoord=r,o}return xu(e,t),e.prototype.getContext=function(t){var e=a(t);return e in this.Ne||(this.Ne[e]=ho(1,1,_u)),this.Ne[e]},e.prototype.hasContext=function(t){return a(t)in this.Ne},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=a(t);return e in this.ze||(this.ze[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.ze[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.Ne)_u.push(this.Ne[e].canvas),delete this.Ne[e];t.prototype.release.call(this)},e}(ft),Su=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cu=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,a)||this;return s.extent=null,s.Fe=i,s.Le=null,s.q,s.projection=null,s.resolution,s.Wt=o,s.Ge=r,s.key=r,s}return Su(e,t),e.prototype.getFormat=function(){return this.Fe},e.prototype.getFeatures=function(){return this.Le},e.prototype.load=function(){0==this.state&&(this.setState(1),this.Wt(this,this.Ge),this.q&&this.q(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(3)},e.prototype.setFeatures=function(t){this.Le=t,this.setState(2)},e.prototype.setLoader=function(t){this.q=t},e}(ft);function Tu(t){return Array.isArray(t)?Po(t):t}var Iu="arraybuffer",Au="json",Pu="text",ku="xml",Ou=!1;function Mu(t,e,n,r,i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,r,i):t,!0),e.getType()==Iu&&(s.responseType="arraybuffer"),s.withCredentials=Ou,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r=e.getType(),l=void 0;r==Au||r==Pu?l=s.responseText:r==ku?(l=s.responseXML)||(l=(new DOMParser).parseFromString(s.responseText,"application/xml")):r==Iu&&(l=s.response),l?o(e.readFeatures(l,{extent:n,featureProjection:i}),e.readProjection(l)):a()}else a()},s.onerror=a,s.send()}function Nu(t,e){return function(n,r,i,o,a){var s=this;Mu(t,e,n,r,i,(function(t,e){s.addFeatures(t),void 0!==o&&o(t)}),a||I)}}function Lu(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Ru=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Du(t,e,n,r){var i=document.createElement("script"),o="olc_"+a(e);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+o;var l=setTimeout((function(){s(),n&&n()}),1e4);window[o]=function(t){clearTimeout(l),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}var Fu,ju=function(t){function e(e){var n=this,r="Unexpected response status: "+e.status;return(n=t.call(this,r)||this).name="ResponseError",n.response=e,n}return Ru(e,t),e}(Error),zu=function(t){function e(e){var n=t.call(this,"Failed to issue request")||this;return n.name="ClientError",n.client=e,n}return Ru(e,t),e}(Error);function Gu(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var i=void 0;try{i=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void n(new Error(o))}e(i)}else n(new ju(r))})),r.addEventListener("error",(function(t){n(new zu(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))}function Bu(t,e){return e.indexOf("://")>=0?e:new URL(e,t).href}var Uu=function(){function t(){}return t.prototype.drawCustom=function(t,e,n,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),qu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wu=function(t){function e(e,n,r,i,o,a,s){var l=t.call(this)||this;return l.Ne=e,l.Rt=n,l.st=r,l._t=i,l.De=o,l.Ue=a,l.qe=s,l.Be=null,l.We=null,l.Ve=null,l.Xe=null,l.He=null,l.Nt=null,l.Je=0,l.Ke=0,l.Ye=0,l.Ze=0,l.$e=0,l.Qe=0,l.no=!1,l.io=0,l.ro=[0,0],l.eo=0,l.oo="",l.so=0,l.ao=0,l.uo=!1,l.co=0,l.ho=[0,0],l.fo=null,l.lo=null,l.vo=null,l.do=[],l.po=[1,0,0,1,0,0],l}return qu(e,t),e.prototype.yo=function(t,e,n,r){if(this.Nt){var i=Lr(t,e,n,r,this._t,this.do),o=this.Ne,a=this.po,s=o.globalAlpha;1!=this.Ze&&(o.globalAlpha=s*this.Ze);var l=this.io;this.no&&(l+=this.De);for(var u=0,c=i.length;u<c;u+=2){var h=i[u]-this.Je,p=i[u+1]-this.Ke;if(0!==l||1!=this.ro[0]||1!=this.ro[1]){var f=h+this.Je,d=p+this.Ke;Jt(a,f,d,1,1,l,-f,-d),o.setTransform.apply(o,a),o.translate(f,d),o.scale(this.ro[0],this.ro[1]),o.drawImage(this.Nt,this.$e,this.Qe,this.eo,this.Ye,-this.Je,-this.Ke,this.eo,this.Ye),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.Nt,this.$e,this.Qe,this.eo,this.Ye,h,p,this.eo,this.Ye)}1!=this.Ze&&(o.globalAlpha=s)}},e.prototype.mo=function(t,e,n,r){if(this.vo&&""!==this.oo){this.fo&&this.wo(this.fo),this.lo&&this.bo(this.lo),this.xo(this.vo);var i=Lr(t,e,n,r,this._t,this.do),o=this.Ne,a=this.co;for(this.uo&&(a+=this.De);e<n;e+=r){var s=i[e]+this.so,l=i[e+1]+this.ao;if(0!==a||1!=this.ho[0]||1!=this.ho[1]){var u=Jt(this.po,s,l,1,1,a,-s,-l);o.setTransform.apply(o,u),o.translate(s,l),o.scale(this.ho[0],this.ho[1]),this.lo&&o.strokeText(this.oo,0,0),this.fo&&o.fillText(this.oo,0,0),o.setTransform(1,0,0,1,0,0)}else this.lo&&o.strokeText(this.oo,s,l),this.fo&&o.fillText(this.oo,s,l)}}},e.prototype.jo=function(t,e,n,r,i){var o=this.Ne,a=Lr(t,e,n,r,this._t,this.do);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return i&&o.closePath(),n},e.prototype.So=function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.jo(t,e,n[i],r,!0);return e},e.prototype.drawCircle=function(t){if(We(this.st,t.getExtent())){if(this.Xe||this.He){this.Xe&&this.wo(this.Xe),this.He&&this.bo(this.He);var e=qr(t,this._t,this.do),n=e[2]-e[0],r=e[3]-e[1],i=Math.sqrt(n*n+r*r),o=this.Ne;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.Xe&&o.fill(),this.He&&o.stroke()}""!==this.oo&&this.mo(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this._t=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case St.POINT:this.drawPoint(t);break;case St.LINE_STRING:this.drawLineString(t);break;case St.POLYGON:this.drawPolygon(t);break;case St.MULTI_POINT:this.drawMultiPoint(t);break;case St.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case St.MULTI_POLYGON:this.drawMultiPolygon(t);break;case St.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case St.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&We(this.st,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe));var e=t.getFlatCoordinates(),n=t.getStride();this.Nt&&this.yo(e,0,e.length,n),""!==this.oo&&this.mo(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe));var e=t.getFlatCoordinates(),n=t.getStride();this.Nt&&this.yo(e,0,e.length,n),""!==this.oo&&this.mo(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe)),We(this.st,t.getExtent())){if(this.He){this.bo(this.He);var e=this.Ne,n=t.getFlatCoordinates();e.beginPath(),this.jo(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.oo){var r=t.getFlatMidpoint();this.mo(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe));var e=t.getExtent();if(We(this.st,e)){if(this.He){this.bo(this.He);var n=this.Ne,r=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,l=o.length;s<l;++s)i=this.jo(r,i,o[s],a,!1);n.stroke()}if(""!==this.oo){var u=t.getFlatMidpoints();this.mo(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe)),We(this.st,t.getExtent())){if(this.He||this.Xe){this.Xe&&this.wo(this.Xe),this.He&&this.bo(this.He);var e=this.Ne;e.beginPath(),this.So(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.Xe&&e.fill(),this.He&&e.stroke()}if(""!==this.oo){var n=t.getFlatInteriorPoint();this.mo(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe)),We(this.st,t.getExtent())){if(this.He||this.Xe){this.Xe&&this.wo(this.Xe),this.He&&this.bo(this.He);var e=this.Ne,n=t.getOrientedFlatCoordinates(),r=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var l=i[a];r=this.So(n,r,l,o)}this.Xe&&e.fill(),this.He&&e.stroke()}if(""!==this.oo){var u=t.getFlatInteriorPoints();this.mo(u,0,u.length,2)}}},e.prototype.wo=function(t){var e=this.Ne,n=this.Be;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.Be={fillStyle:t.fillStyle})},e.prototype.bo=function(t){var e=this.Ne,n=this.We;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(_(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.We={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.xo=function(t){var e=this.Ne,n=this.Ve,r=t.textAlign?t.textAlign:Ia;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.Ve={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var n=this;if(t){var r=t.getColor();this.Xe={fillStyle:Tu(r||xa)}}else this.Xe=null;if(e){var i=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),l=e.getLineJoin(),u=e.getWidth(),c=e.getMiterLimit(),h=a||Ea;this.He={lineCap:void 0!==o?o:_a,lineDash:1===this.Rt?h:h.map((function(t){return t*n.Rt})),lineDashOffset:(s||0)*this.Rt,lineJoin:void 0!==l?l:Sa,lineWidth:(void 0!==u?u:1)*this.Rt,miterLimit:void 0!==c?c:Ca,strokeStyle:Tu(i||Ta)}}else this.He=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var n=t.getAnchor(),r=t.getOrigin();this.Nt=t.getImage(this.Rt),this.Je=n[0]*this.Rt,this.Ke=n[1]*this.Rt,this.Ye=e[1]*this.Rt,this.Ze=t.getOpacity(),this.$e=r[0],this.Qe=r[1],this.no=t.getRotateWithView(),this.io=t.getRotation(),this.ro=t.getScaleArray(),this.eo=e[0]*this.Rt}else this.Nt=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.fo={fillStyle:Tu(n||xa)}}else this.fo=null;var r=t.getStroke();if(r){var i=r.getColor(),o=r.getLineCap(),a=r.getLineDash(),s=r.getLineDashOffset(),l=r.getLineJoin(),u=r.getWidth(),c=r.getMiterLimit();this.lo={lineCap:void 0!==o?o:_a,lineDash:a||Ea,lineDashOffset:s||0,lineJoin:void 0!==l?l:Sa,lineWidth:void 0!==u?u:1,miterLimit:void 0!==c?c:Ca,strokeStyle:Tu(i||Ta)}}else this.lo=null;var h=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScaleArray(),m=t.getText(),v=t.getTextAlign(),w=t.getTextBaseline();this.vo={font:void 0!==h?h:ba,textAlign:void 0!==v?v:Ia,textBaseline:void 0!==w?w:Aa},this.oo=void 0!==m?Array.isArray(m)?m.reduce((function(t,e,n){return t+(n%2?" ":e)}),""):m:"",this.so=void 0!==p?this.Rt*p:0,this.ao=void 0!==f?this.Rt*f:0,this.uo=void 0!==d&&d,this.co=void 0!==g?g:0,this.ho=[this.Rt*y[0],this.Rt*y[1]]}else this.oo=""},e}(Uu),Vu="Circle",Hu="Default",Yu="Image",Xu="LineString",Zu="Polygon",Ku="Text",Ju={Point:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();if(i&&(t=i,o=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var l=t.getBuilder(n.getZIndex(),Yu);l.setImageStyle(a,o),l.drawPoint(e,r)}if(s&&s.getText()){var u=t.getBuilder(n.getZIndex(),Ku);u.setTextStyle(s,o),u.drawText(e,r)}},LineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),Xu);a.setFillStrokeStyle(null,o),a.drawLineString(e,r)}var s=n.getText();if(s&&s.getText()){var l=(i||t).getBuilder(n.getZIndex(),Ku);l.setTextStyle(s),l.drawText(e,r)}},Polygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),Zu);s.setFillStrokeStyle(o,a),s.drawPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),Ku);u.setTextStyle(l),u.drawText(e,r)}},MultiPoint:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();if(i&&(t=i,o=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var l=t.getBuilder(n.getZIndex(),Yu);l.setImageStyle(a,o),l.drawMultiPoint(e,r)}if(s&&s.getText()){var u=(i||t).getBuilder(n.getZIndex(),Ku);u.setTextStyle(s,o),u.drawText(e,r)}},MultiLineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),Xu);a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,r)}var s=n.getText();if(s&&s.getText()){var l=(i||t).getBuilder(n.getZIndex(),Ku);l.setTextStyle(s),l.drawText(e,r)}},MultiPolygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(a||o){var s=t.getBuilder(n.getZIndex(),Zu);s.setFillStrokeStyle(o,a),s.drawMultiPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),Ku);u.setTextStyle(l),u.drawText(e,r)}},GeometryCollection:function(t,e,n,r,i){var o,a,s=e.getGeometriesArray();for(o=0,a=s.length;o<a;++o)(0,Ju[s[o].getType()])(t,s[o],n,r,i)},Circle:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),Vu);s.setFillStrokeStyle(o,a),s.drawCircle(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),Ku);u.setTextStyle(l),u.drawText(e,r)}}};function Qu(t,e){return parseInt(a(t),10)-parseInt(a(e),10)}function $u(t,e){var n=tc(t,e);return n*n}function tc(t,e){return.5*t/e}function ec(t,e,n,r,i,o,a){var s=!1,l=n.getImage();if(l){var u=l.getImageState();2==u||3==u?l.unlistenImageChange(i):(0==u&&l.load(),u=l.getImageState(),l.listenImageChange(i),s=!0)}return function(t,e,n,r,i,o){var a=n.getGeometryFunction()(e);if(a){var s=a.simplifyTransformed(r,i);n.getRenderer()?nc(t,s,n,e):(0,Ju[s.getType()])(t,s,n,e,o)}}(t,e,n,r,o,a),s}function nc(t,e,n,r){if(e.getType()!=St.GEOMETRY_COLLECTION)t.getBuilder(n.getZIndex(),Hu).drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer());else for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)nc(t,i[o],n,r)}function rc(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var e,n=t.inversePixelTransform[0],r=t.frameState,i=qt(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=$u(r.viewState.resolution,n),a=Cr();return a&&(e=wr(a,r.viewState.projection)),new Wu(t.context,n,r.extent,i,r.viewState.rotation,o,e)}var ic,oc={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},ac={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};function sc(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function lc(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function uc(t,e,n,r){var i=xr(n,e,t),o=hr(e,r,n),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var l=t.getExtent();if(!l||ge(l,i)){var u=hr(t,o,i)/o;isFinite(u)&&u>0&&(o/=u)}return o}function cc(t,e,n,r){var i=De(n),o=uc(t,e,i,r);return(!isFinite(o)||o<=0)&&Me(n,(function(n){return o=uc(t,e,n,r),isFinite(o)&&o>0})),o}function hc(t,e,n,r,i,o,a,s,l,u,c,h){var p=ho(Math.round(n*t),Math.round(n*e));if(h||k(p,oc),0===l.length)return p.canvas;function f(t){return Math.round(t*n)/n}p.scale(n,n),p.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){Te(d,t.extent)}));var g=qe(d),y=ze(d),m=ho(Math.round(n*g/r),Math.round(n*y/r));h||k(m,oc);var v=n/r;l.forEach((function(t,e,n){var r=t.extent[0]-d[0],i=-(t.extent[3]-d[3]),o=qe(t.extent),a=ze(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,r*v,i*v,o*v,a*v)}));var w=Be(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,l=a[0][0],u=a[0][1],c=a[1][0],g=a[1][1],y=a[2][0],v=a[2][1],b=f((s[0][0]-w[0])/o),x=f(-(s[0][1]-w[1])/o),_=f((s[1][0]-w[0])/o),E=f(-(s[1][1]-w[1])/o),S=f((s[2][0]-w[0])/o),C=f(-(s[2][1]-w[1])/o),T=l,I=u;l=0,u=0;var A=rn([[c-=T,g-=I,0,0,_-b],[y-=T,v-=I,0,0,S-b],[0,0,c,g,E-x],[0,0,y,v,C-x]]);if(A){if(p.save(),p.beginPath(),function(){if(void 0===ic){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",sc(t,4,5,4,0),sc(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;ic=lc(e,0)||lc(e,4)||lc(e,8)}return ic}()||!h){p.moveTo(_,E);for(var P=b-_,k=x-E,O=0;O<4;O++)p.lineTo(_+f((O+1)*P/4),E+f(O*k/3)),3!=O&&p.lineTo(_+f((O+1)*P/4),E+f((O+1)*k/3));p.lineTo(S,C)}else p.moveTo(_,E),p.lineTo(b,x),p.lineTo(S,C);p.clip(),p.transform(A[0],A[2],A[1],A[3],b,x),p.translate(d[0]-T,d[3]-I),p.scale(r/n,-r/n),p.drawImage(m.canvas,0,0),p.restore()}})),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,s.getTriangles().forEach((function(t,e,n){var r=t.target,i=(r[0][0]-w[0])/o,a=-(r[0][1]-w[1])/o,s=(r[1][0]-w[0])/o,l=-(r[1][1]-w[1])/o,u=(r[2][0]-w[0])/o,c=-(r[2][1]-w[1])/o;p.beginPath(),p.moveTo(s,l),p.lineTo(i,a),p.lineTo(u,c),p.closePath(),p.stroke()})),p.restore()),p.canvas}var pc=[0,0,0],fc=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.Ti=t.resolutions,yt(S(this.Ti,(function(t,e){return e-t}),!0),17),!t.origins)for(var n=0,r=this.Ti.length-1;n<r;++n)if(e){if(this.Ti[n]/this.Ti[n+1]!==e){e=void 0;break}}else e=this.Ti[n]/this.Ti[n+1];this.Oi=e,this.maxZoom=this.Ti.length-1,this.ko=void 0!==t.origin?t.origin:null,this.Mo=null,void 0!==t.origins&&(this.Mo=t.origins,yt(this.Mo.length==this.Ti.length,20));var i=t.extent;void 0===i||this.ko||this.Mo||(this.ko=Be(i)),yt(!this.ko&&this.Mo||this.ko&&!this.Mo,18),this._o=null,void 0!==t.tileSizes&&(this._o=t.tileSizes,yt(this._o.length==this.Ti.length,19)),this.Oo=void 0!==t.tileSize?t.tileSize:this._o?null:vs,yt(!this.Oo&&this._o||this.Oo&&!this._o,22),this.st=void 0!==i?i:null,this.To=null,this.Eo=[0,0],this.Ao=[0,0,0,0],void 0!==t.sizes?this.To=t.sizes.map((function(t,e){var n=new bu(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){var r=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(r.minX,n.minX),n.maxX=Math.min(r.maxX,n.maxX),n.minY=Math.max(r.minY,n.minY),n.maxY=Math.min(r.maxY,n.maxY)}return n}),this):i&&this.Co(i)}return t.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var a=r.minY,s=r.maxY;a<=s;++a)n([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,r){var i,o,a=null,s=t[0]-1;for(2===this.Oi?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,r);s>=this.minZoom;){if(e(s,2===this.Oi?wu(i=Math.floor(i/2),i,o=Math.floor(o/2),o,n):this.getTileRangeForExtentAndZ(a,s,n)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.st},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.ko?this.ko:this.Mo[t]},t.prototype.getResolution=function(t){return this.Ti[t]},t.prototype.getResolutions=function(){return this.Ti},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.Oi){var r=2*t[1],i=2*t[2];return wu(r,r+1,i,i+1,e)}var o=this.getTileCoordExtent(t,n||this.Ao);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var r=t[0],i=t[1],o=t[2];if(e===r)return wu(i,o,i,o,n);if(this.Oi){var a=Math.pow(this.Oi,e-r),s=Math.floor(i*a),l=Math.floor(o*a);return e<r?wu(s,s,l,l,n):wu(s,Math.floor(a*(i+1))-1,l,Math.floor(a*(o+1))-1,n)}var u=this.getTileCoordExtent(t,this.Ao);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),i=this.getResolution(t),o=Bs(this.getTileSize(t),this.Eo),a=r[0]+e.minX*o[0]*i,s=r[0]+(e.maxX+1)*o[0]*i;return be(a,r[1]+e.minY*o[1]*i,s,r[1]+(e.maxY+1)*o[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=pc;this.Ro(t[0],t[3],e,!1,r);var i=r[1],o=r[2];return this.Ro(t[2],t[1],e,!0,r),wu(i,r[1],o,r[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Bs(this.getTileSize(t[0]),this.Eo);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=Bs(this.getTileSize(t[0]),this.Eo),o=n[0]+t[1]*i[0]*r,a=n[1]-(t[2]+1)*i[1]*r;return be(o,a,o+i[0]*r,a+i[1]*r,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.Po(t[0],t[1],e,!1,n)},t.prototype.Po=function(t,e,n,r,i){var o=this.getZForResolution(n),a=n/this.getResolution(o),s=this.getOrigin(o),l=Bs(this.getTileSize(o),this.Eo),u=a*(t-s[0])/n/l[0],c=a*(s[1]-e)/n/l[1];return r?(u=pn(u,5)-1,c=pn(c,5)-1):(u=hn(u,5),c=hn(c,5)),uu(o,u,c,i)},t.prototype.Ro=function(t,e,n,r,i){var o=this.getOrigin(n),a=this.getResolution(n),s=Bs(this.getTileSize(n),this.Eo),l=(t-o[0])/a/s[0],u=(o[1]-e)/a/s[1];return r?(l=pn(l,5)-1,u=pn(u,5)-1):(l=hn(l,5),u=hn(u,5)),uu(n,l,u,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.Ro(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.Ti[t[0]]},t.prototype.getTileSize=function(t){return this.Oo?this.Oo:this._o[t]},t.prototype.getFullTileRange=function(t){return this.To?this.To[t]:this.st?this.getTileRangeForExtentAndZ(this.st,t):null},t.prototype.getZForResolution=function(t,e){return Qe(v(this.Ti,t,e||0),this.minZoom,this.maxZoom)},t.prototype.Co=function(t){for(var e=this.Ti.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.To=n},t}();function dc(t){var e=t.getDefaultTileGrid();return e||(e=wc(t),t.setDefaultTileGrid(e)),e}function gc(t,e,n){var r=e[0],i=t.getTileCoordCenter(e),o=bc(n);if(ge(o,i))return e;var a=qe(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,r)}function yc(t,e,n,r){var i=void 0!==r?r:re,o=vc(t,e,n);return new fc({extent:t,origin:Fe(t,i),resolutions:o,tileSize:n})}function mc(t){var e=t||{},n=e.extent||cr("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:vc(n,e.maxZoom,e.tileSize,e.maxResolution)};return new fc(r)}function vc(t,e,n,r){for(var i=void 0!==e?e:42,o=ze(t),a=qe(t),s=Bs(void 0!==n?n:vs),l=r>0?r:Math.max(a/s[0],o/s[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function wc(t,e,n,r){return yc(bc(t),e,n,r)}function bc(t){var e=(t=cr(t)).getExtent();if(!e){var n=180*At[kt.DEGREES]/t.getMetersPerUnit();e=be(-n,-n,n,n)}return e}function xc(t,e){var n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){return a?t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],n=e.getFullTileRange(t);return yt(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function _c(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=xc(t[i],e);return Ec(r)}function Ec(t){return 1===t.length?t[0]:function(e,n,r){if(e){var i=sn(du(e),t.length);return t[i](e,n,r)}}}function Sc(t,e,n){}function Cc(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r=n[1].charCodeAt(0),i=n[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}function Tc(t,e){var n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));var r=n.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var Ic,Ac=34962,Pc=34963,kc=35044,Oc=35048,Mc=5126,Nc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Lc(t,e){for(var n=k({preserveDrawingBuffer:!0,antialias:!Lt},e),r=Nc.length,i=0;i<r;++i)try{var o=t.getContext(Nc[i],n);if(o)return o}catch(t){}return null}var Rc="http://www.w3.org/2001/XMLSchema-instance";function Dc(t,e){return ah().createElementNS(t,e)}function Fc(t,e){return jc(t,e,[]).join("")}function jc(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)jc(r,e,n)}return n}function zc(t){return"documentElement"in t}function Gc(t,e,n){return t.getAttributeNS(e,n)||""}function Bc(t){return(new DOMParser).parseFromString(t,"application/xml")}function Uc(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&b(r[r.length-1],i)}}function qc(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&r[r.length-1].push(i)}}function Wc(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&(r[r.length-1]=i)}}function Vc(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:r.localName,l=void 0;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function Hc(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);void 0!==o&&(i[i.length-1][void 0!==e?e:r.localName]=o)}}function Yc(t,e){return function(n,r,i){t.call(void 0!==e?e:this,n,r,i),i[i.length-1].node.appendChild(n)}}function Xc(t,e){var n,r;return function(e,i,o){if(void 0===n){n={};var a={};a[e.localName]=t,n[e.namespaceURI]=a,r=Zc(e.localName)}eh(n,r,i,o)}}function Zc(t,e){var n=t;return function(t,r,i){var o=r[r.length-1].node,a=n;return void 0===a&&(a=i),Dc(void 0!==e?e:o.namespaceURI,a)}}var Kc=Zc();function Jc(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=t[e[i]];return r}function Qc(t,e,n){var r,i,o=void 0!==n?n:{};for(r=0,i=t.length;r<i;++r)o[t[r]]=e;return o}function $c(t,e,n,r){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(r,i,n)}}}function th(t,e,n,r,i){return r.push(t),$c(e,n,r,i),r.pop()}function eh(t,e,n,r,i,o){for(var a,s,l=(void 0!==i?i:n).length,u=0;u<l;++u)void 0!==(a=n[u])&&void 0!==(s=e.call(void 0!==o?o:this,a,r,void 0!==i?i[u]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,r)}function nh(t,e,n,r,i,o,a){return i.push(t),eh(e,n,r,i,o,a),i.pop()}var rh=void 0;function ih(){return void 0===rh&&"undefined"!=typeof XMLSerializer&&(rh=new XMLSerializer),rh}var oh=void 0;function ah(){return void 0===oh&&"undefined"!=typeof document&&(oh=document.implementation.createDocument("","",null)),oh}function sh(t){switch(t){case Ac:return Float32Array;case Pc:return Uint32Array;default:return Float32Array}}var lh=function(){function t(t,e){this.array=null,this.type=t,yt(t===Ac||t===Pc,62),this.usage=void 0!==e?e:35044}return t.prototype.ofSize=function(t){this.array=new(sh(this.type))(t)},t.prototype.fromArray=function(t){var e=sh(this.type);this.array=e.from?e.from(t):new e(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(sh(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),uh="webglcontextlost",ch="webglcontextrestored",hh=function(){function t(t){this.Io=t.webGlContext;var e=this.Io;this.No=t.scaleRatio||1,this.zo=e.createTexture(),this.Fo=null,this.Lo=e.createFramebuffer();var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(n);var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(r),this.Go=e.createProgram(),e.attachShader(this.Go,n),e.attachShader(this.Go,r),e.linkProgram(this.Go),this.Do=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.Do),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.Uo=e.getAttribLocation(this.Go,"a_position"),this.qo=e.getUniformLocation(this.Go,"u_screenSize"),this.Bo=e.getUniformLocation(this.Go,"u_opacity"),this.Wo=e.getUniformLocation(this.Go,"u_image"),this.Vo=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(n){this.Vo.push({value:t.uniforms[n],location:e.getUniformLocation(this.Go,n)})}.bind(this))}return t.prototype.getGL=function(){return this.Io},t.prototype.init=function(t){var e=this.getGL(),n=[e.drawingBufferWidth*this.No,e.drawingBufferHeight*this.No];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,n[0],n[1]),!this.Fo||this.Fo[0]!==n[0]||this.Fo[1]!==n[1]){this.Fo=n;var r=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.zo),e.texImage2D(e.TEXTURE_2D,0,r,n[0],n[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.zo,0)}},t.prototype.apply=function(t,e,n,r){var i=this.getGL(),o=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.zo),!e){var s=a(i.canvas);if(!t.renderTargets[s]){var l=i.getContextAttributes();l&&l.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[s]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.Do),i.useProgram(this.Go),i.enableVertexAttribArray(this.Uo),i.vertexAttribPointer(this.Uo,2,i.FLOAT,!1,0,0),i.uniform2f(this.qo,o[0],o[1]),i.uniform1i(this.Wo,0);var u=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.Bo,u),this.applyUniforms(t),n&&n(i,t),i.drawArrays(i.TRIANGLES,0,6),r&&r(i,t)},t.prototype.getFrameBuffer=function(){return this.Lo},t.prototype.applyUniforms=function(t){var e,n=this.getGL(),r=1;this.Vo.forEach((function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(r)]),n.bindTexture(n.TEXTURE_2D,i.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),e instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,e.width,e.height,0,n.UNSIGNED_BYTE,new Uint8Array(e.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.uniform1i(i.location,r++);else if(Array.isArray(e))switch(e.length){case 2:return void n.uniform2f(i.location,e[0],e[1]);case 3:return void n.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void n.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&n.uniform1f(i.location,e)}))},t}();function ph(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var fh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dh={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:Mc},gh={};function yh(t){return"shared/"+t}var mh=0;function vh(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e+=r.size*wh(r.type)}return e}function wh(t){switch(t){case dh.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case dh.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case dh.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case dh.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var bh=function(t){function e(e){var n,r=t.call(this)||this,i=e||{};r.Xo=r.handleWebGLContextLost.bind(r),r.Ho=r.handleWebGLContextRestored.bind(r),r.Jo=i.canvasCacheKey?yh(i.canvasCacheKey):(n="unique/"+mh,mh+=1,n),r.Ut=function(t){var e=gh[t];if(!e){var n=document.createElement("canvas");n.style.position="absolute",n.style.left="0",e={users:0,canvas:n},gh[t]=e}return e.users+=1,e.canvas}(r.Jo),r.Io=Lc(r.Ut),r.Ko={},r.Yo={},r.Zo=null,r.Ut.addEventListener(uh,r.Xo),r.Ut.addEventListener(ch,r.Ho),r.$o=[1,0,0,1,0,0],r.Qo=[1,0,0,1,0,0],r.ts=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.ns={},r.rs={},r.Vo=[],i.uniforms&&r.setUniforms(i.uniforms);var o=r.getGL();return r.es=i.postProcesses?i.postProcesses.map((function(t){return new hh({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new hh({webGlContext:o})],r.os=null,r.de=Date.now(),r}return fh(e,t),e.prototype.setUniforms=function(t){for(var e in this.Vo=[],t)this.Vo.push({name:e,value:t[e]});this.ns={}},e.prototype.canvasCacheKeyMatches=function(t){return this.Jo===yh(t)},e.prototype.getExtension=function(t){if(t in this.Yo)return this.Yo[t];var e=this.Io.getExtension(t);return this.Yo[t]=e,e},e.prototype.bindBuffer=function(t){var e=this.getGL(),n=a(t),r=this.Ko[n];r||(r={buffer:t,webGlBuffer:e.createBuffer()},this.Ko[n]=r),e.bindBuffer(t.getType(),r.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),n=a(t),r=this.Ko[n];r&&!e.isContextLost()&&e.deleteBuffer(r.webGlBuffer),delete this.Ko[n]},e.prototype.disposeInternal=function(){this.Ut.removeEventListener(uh,this.Xo),this.Ut.removeEventListener(ch,this.Ho),function(t){var e=gh[t];if(e&&(e.users-=1,!(e.users>0))){var n=Lc(e.canvas).getExtension("WEBGL_lose_context");n&&n.loseContext(),delete gh[t]}}(this.Jo),delete this.Io,delete this.Ut},e.prototype.prepareDraw=function(t,e){var n=this.getGL(),r=this.getCanvas(),i=t.size,o=t.pixelRatio;r.width=i[0]*o,r.height=i[1]*o,r.style.width=i[0]+"px",r.style.height=i[1]+"px",n.useProgram(this.Zo);for(var a=this.es.length-1;a>=0;a--)this.es[a].init(t);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,e?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.Zo),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,n){var r=this.getGL(),i=e.getSize();r.bindFramebuffer(r.FRAMEBUFFER,e.getFramebuffer()),r.viewport(0,0,i[0],i[1]),r.bindTexture(r.TEXTURE_2D,e.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,n?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.Zo),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var n=this.getGL();this.getExtension("OES_element_index_uint");var r=n.UNSIGNED_INT,i=e-t,o=4*t;n.drawElements(n.TRIANGLES,i,r,o)},e.prototype.finalizeDraw=function(t,e,n){for(var r=0,i=this.es.length;r<i;r++)r===i-1?this.es[r].apply(t,null,e,n):this.es[r].apply(t,this.es[r+1])},e.prototype.getCanvas=function(){return this.Ut},e.prototype.getGL=function(){return this.Io},e.prototype.applyFrameState=function(t){var e=t.size,n=t.viewState.rotation,r=Ut(this.Qo);Xt(r,2/e[0],2/e[1]);var i=Ut(this.$o);0!==n&&Yt(i,-n),this.setUniformMatrixValue("u_offsetScaleMatrix",ph(this.ts,r)),this.setUniformMatrixValue("u_offsetRotateMatrix",ph(this.ts,i)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.de)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,n=this.getGL(),r=0;this.Vo.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(r)]),n.bindTexture(n.TEXTURE_2D,i.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e)),n.uniform1i(this.getUniformLocation(i.name),r++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,ph(this.ts,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void n.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void n.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void n.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&n.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.Zo&&(this.getGL().useProgram(t),this.Zo=t,this.ns={},this.rs={},!0)},e.prototype.compileShader=function(t,e){var n=this.getGL(),r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r},e.prototype.getProgram=function(t,e){var n=this.getGL(),r=this.compileShader(t,n.FRAGMENT_SHADER),i=this.compileShader(e,n.VERTEX_SHADER),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getShaderParameter(r,n.COMPILE_STATUS)){var a="Fragment shader compliation failed: ".concat(n.getShaderInfoLog(r));throw new Error(a)}if(n.deleteShader(r),!n.getShaderParameter(i,n.COMPILE_STATUS))throw a="Vertex shader compilation failed: ".concat(n.getShaderInfoLog(i)),new Error(a);if(n.deleteShader(i),!n.getProgramParameter(o,n.LINK_STATUS))throw a="GL program linking failed: ".concat(n.getShaderInfoLog(i)),new Error(a);return o},e.prototype.getUniformLocation=function(t){return void 0===this.ns[t]&&(this.ns[t]=this.getGL().getUniformLocation(this.Zo,t)),this.ns[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.rs[t]&&(this.rs[t]=this.getGL().getAttribLocation(this.Zo,t)),this.rs[t]},e.prototype.makeProjectionTransform=function(t,e){var n=t.size,r=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return Ut(e),Jt(e,0,0,2/(i*n[0]),2/(i*n[1]),-r,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformFloatVec4=function(t,e){this.getGL().uniform4fv(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.ss=function(t,e,n,r,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,n,!1,r,i))},e.prototype.enableAttributes=function(t){for(var e=vh(t),n=0,r=0;r<t.length;r++){var i=t[r];this.ss(i.name,i.size,i.type||Mc,e,n),n+=i.size*wh(i.type)}},e.prototype.handleWebGLContextLost=function(){O(this.Ko),this.Zo=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,n){var r=this.getGL(),i=n||r.createTexture(),o=r.RGBA,a=r.RGBA,s=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,i),e?r.texImage2D(r.TEXTURE_2D,0,o,a,s,e):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i},e}(d),xh=function(){function t(t,e){this.name=t,this.data=e,this.us=null}return t.prototype.getTexture=function(t){if(!this.us){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.us=e}return this.us},t}(),_h=new Uint8Array(4),Eh=function(){function t(t,e){this.cs=t;var n=t.getGL();this.us=n.createTexture(),this.hs=n.createFramebuffer(),this.fs=e||[1,1],this.B=new Uint8Array(0),this.ls=!0,this.vs()}return t.prototype.setSize=function(t){_(t,this.fs)||(this.fs[0]=t[0],this.fs[1]=t[1],this.vs())},t.prototype.getSize=function(){return this.fs},t.prototype.clearCachedData=function(){this.ls=!0},t.prototype.readAll=function(){if(this.ls){var t=this.fs,e=this.cs.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.hs),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.B),this.ls=!1}return this.B},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.fs[0]||e>=this.fs[1])return _h[0]=0,_h[1]=0,_h[2]=0,_h[3]=0,_h;this.readAll();var n=Math.floor(t)+(this.fs[1]-Math.floor(e)-1)*this.fs[0];return _h[0]=this.B[4*n],_h[1]=this.B[4*n+1],_h[2]=this.B[4*n+2],_h[3]=this.B[4*n+3],_h},t.prototype.getTexture=function(){return this.us},t.prototype.getFramebuffer=function(){return this.hs},t.prototype.vs=function(){var t=this.fs,e=this.cs.getGL();this.us=this.cs.createTexture(t,null,this.us),e.bindFramebuffer(e.FRAMEBUFFER,this.hs),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.us,0),this.B=new Uint8Array(t[0]*t[1]*4)},t}(),Sh=function(){function t(t,e,n,r,i,o){this.ds=t,this.ps=e;var a={},s=br(this.ps,this.ds);this.ys=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.ws=r,this.bs=i*i,this.gs=[],this.xs=!1,this.Ss=this.ds.canWrapX()&&!!r&&!!this.ds.getExtent()&&qe(r)==qe(this.ds.getExtent()),this.ks=this.ds.getExtent()?qe(this.ds.getExtent()):null,this.Ms=this.ps.getExtent()?qe(this.ps.getExtent()):null;var l=Be(n),u=Ue(n),c=Re(n),h=Le(n),p=this.ys(l),f=this.ys(u),d=this.ys(c),g=this.ys(h),y=10+(o?Math.max(0,Math.ceil(tn(Ne(n)/(o*o*256*256)))):0);if(this._s(l,u,c,h,p,f,d,g,y),this.xs){var m=1/0;this.gs.forEach((function(t,e,n){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])})),this.gs.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.ks/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-m>this.ks/2&&(e[0][0]-=this.ks),e[1][0]-m>this.ks/2&&(e[1][0]-=this.ks),e[2][0]-m>this.ks/2&&(e[2][0]-=this.ks);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.ks/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.Os=function(t,e,n,r,i,o){this.gs.push({source:[r,i,o],target:[t,e,n]})},t.prototype._s=function(t,e,n,r,i,o,a,s,l){var u=he([i,o,a,s]),c=this.ks?qe(u)/this.ks:null,h=this.ks,p=this.ds.canWrapX()&&c>.5&&c<1,f=!1;if(l>0&&(this.ps.isGlobal()&&this.Ms&&(f=qe(he([t,e,n,r]))/this.Ms>.25||f),!p&&this.ds.isGlobal()&&c&&(f=c>.25||f)),!(!f&&this.ws&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||We(u,this.ws)){var d=0;if(!(f||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(l>0)f=!0;else if(1!=(d=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(l>0){if(!f){var g,y=[(t[0]+n[0])/2,(t[1]+n[1])/2],m=this.ys(y);g=p?(sn(i[0],h)+sn(a[0],h))/2-sn(m[0],h):(i[0]+a[0])/2-m[0];var v=(i[1]+a[1])/2-m[1];f=g*g+v*v>this.bs}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var w=[(e[0]+n[0])/2,(e[1]+n[1])/2],b=this.ys(w),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],_=this.ys(x);this._s(t,e,w,x,i,o,b,_,l-1),this._s(x,w,n,r,_,b,a,s,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.ys(E),C=[(n[0]+r[0])/2,(n[1]+r[1])/2],T=this.ys(C);this._s(t,E,C,r,i,S,T,s,l-1),this._s(E,e,n,C,S,o,a,T,l-1)}return}}if(p){if(!this.Ss)return;this.xs=!0}0==(11&d)&&this.Os(t,n,r,i,a,s),0==(14&d)&&this.Os(t,n,e,i,a,o),d&&(0==(13&d)&&this.Os(e,r,t,o,s,i),0==(7&d)&&this.Os(e,r,n,o,s,a))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.gs.forEach((function(e,n,r){var i=e.source;Ie(t,i[0]),Ie(t,i[1]),Ie(t,i[2])})),t},t.prototype.getTriangles=function(){return this.gs},t}(),Ch=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Th=function(t){function e(e,n,r,i,o,a,s,l,u,c,h,p){var f=t.call(this,o,0,{interpolate:!!p})||this;f.Ts=void 0!==h&&h,f.Rt=s,f.Es=l,f.Ut=null,f.As=n,f.Cs=i,f.Rs=a||o,f.Ps=[],f.Is=null,f.Ns=0;var d=i.getTileCoordExtent(f.Rs),g=f.Cs.getExtent(),y=f.As.getExtent(),m=g?Ge(d,g):d;if(0===Ne(m))return f.state=4,f;var v=e.getExtent();v&&(y=y?Ge(y,v):v);var w=i.getResolution(f.Rs[0]),b=cc(e,r,m,w);if(!isFinite(b)||b<=0)return f.state=4,f;var x=void 0!==c?c:.5;if(f.zs=new Sh(e,r,m,y,b*x,w),0===f.zs.getTriangles().length)return f.state=4,f;f.Ns=n.getZForResolution(b);var _=f.zs.calculateSourceExtent();if(y&&(e.canWrapX()?(_[1]=Qe(_[1],y[1],y[3]),_[3]=Qe(_[3],y[1],y[3])):_=Ge(_,y)),Ne(_)){for(var E=n.getTileRangeForExtentAndZ(_,f.Ns),S=E.minX;S<=E.maxX;S++)for(var C=E.minY;C<=E.maxY;C++){var T=u(f.Ns,S,C,s);T&&f.Ps.push(T)}0===f.Ps.length&&(f.state=4)}else f.state=4;return f}return Ch(e,t),e.prototype.getImage=function(){return this.Ut},e.prototype.Fs=function(){var t=[];if(this.Ps.forEach(function(e,n,r){e&&2==e.getState()&&t.push({extent:this.As.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.Ps.length=0,0===t.length)this.state=3;else{var e=this.Rs[0],n=this.Cs.getTileSize(e),r="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],o=this.Cs.getResolution(e),a=this.As.getResolution(this.Ns),s=this.Cs.getTileCoordExtent(this.Rs);this.Ut=hc(r,i,this.Rt,a,this.As.getExtent(),o,s,this.zs,t,this.Es,this.Ts,this.interpolate),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.Is=[],this.Ps.forEach(function(e,n,r){var i=e.getState();if(0==i||1==i){t++;var o=H(e,D,(function(n){var r=e.getState();2!=r&&3!=r&&4!=r||(X(o),0==--t&&(this.Ls(),this.Fs()))}),this);this.Is.push(o)}}.bind(this)),0===t?setTimeout(this.Fs.bind(this),0):this.Ps.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.Ls=function(){this.Is.forEach(X),this.Is=null},e}(ft),Ih=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ah(t,e,n){var r=n?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function Ph(t,e,n,r,i,o){var a,s,l=t.getGL();n instanceof Float32Array?(a=l.FLOAT,t.getExtension("OES_texture_float"),s=null!==t.getExtension("OES_texture_float_linear")):(a=l.UNSIGNED_BYTE,s=!0),Ah(l,e,o&&s);var u,c=n.byteLength/r[1],h=1;switch(c%8==0?h=8:c%4==0?h=4:c%2==0&&(h=2),i){case 1:u=l.LUMINANCE;break;case 2:u=l.LUMINANCE_ALPHA;break;case 3:u=l.RGB;break;case 4:u=l.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(i))}var p=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,h),l.texImage2D(l.TEXTURE_2D,0,u,r[0],r[1],0,u,a,n),l.pixelStorei(l.UNPACK_ALIGNMENT,p)}var kh=null,Oh=function(t){function e(e){var n=t.call(this)||this;n.tile,n.textures=[],n.hr=n.hr.bind(n),n.size=Bs(e.grid.getTileSize(e.tile.tileCoord[0])),n.Gs=e.tilePixelRatio||1,n.Es=e.gutter||0,n.bandCount=NaN,n.cs=e.helper;var r=new lh(Ac,kc);return r.fromArray([0,1,1,1,1,0,0,0]),n.cs.flushBufferData(r),n.coords=r,n.setTile(e.tile),n}return Ih(e,t),e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(D,this.hr),this.tile=t,this.textures.length=0,this.loaded=2===t.getState(),this.loaded)this.Ds();else{if(t instanceof bo){var e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(D,this.hr)}},e.prototype.Ds=function(){var t=this.cs,e=t.getGL(),n=this.tile;if(n instanceof bo||n instanceof Th){var r=n.getImage();if(0!==this.Es){var i=this.Gs*this.Es,o=Math.round(r.width-2*i),a=Math.round(r.height-2*i),s=ho(o,a);n.interpolate||k(s,oc),s.drawImage(r,i,i,o,a,0,0,o,a),r=s.canvas}var l=e.createTexture();return this.textures.push(l),this.bandCount=4,void function(t,e,n,r){Ah(t,e,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}(e,l,r,n.interpolate)}var u=[this.size[0]*this.Gs,this.size[1]*this.Gs],c=n.getData(),h=c instanceof Float32Array,p=u[0]*u[1],f=h?Float32Array:Uint8Array,d=f.BYTES_PER_ELEMENT,g=c.byteLength/u[1];this.bandCount=Math.floor(g/d/u[0]);var y=Math.ceil(this.bandCount/4);if(1===y)return l=e.createTexture(),this.textures.push(l),void Ph(t,l,c,u,this.bandCount,n.interpolate);for(var m=new Array(y),v=0;v<y;++v){l=e.createTexture(),this.textures.push(l);var w=v<y-1?4:this.bandCount%4;m[v]=new f(p*w)}for(var b=0,x=0,_=u[0]*this.bandCount,E=0;E<u[1];++E){for(var S=0;S<_;++S){var C=c[x+S],T=Math.floor(b/this.bandCount),I=S%this.bandCount;(A=m[v=Math.floor(I/4)])[T*(w=A.length/p)+I%4]=C,++b}x+=g/d}for(v=0;v<y;++v){var A;Ph(t,l=this.textures[v],A=m[v],u,w=A.length/p,n.interpolate)}},e.prototype.hr=function(){2===this.tile.getState()&&(this.loaded=!0,this.Ds(),this.dispatchEvent(D))},e.prototype.disposeInternal=function(){var t=this.cs.getGL();this.cs.deleteBuffer(this.coords);for(var e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(D,this.hr)},e.prototype.getPixelData=function(t,e){if(!this.loaded)return null;if(t=Math.floor(this.Gs*t),e=Math.floor(this.Gs*e),this.tile instanceof gt){var n=this.tile.getData(),r=Math.floor(this.Gs*this.size[0]);if(n instanceof DataView){var i=n.byteLength/(this.size[0]*this.size[1]),o=e*r*i+t*i,a=n.buffer.slice(o,o+i);return new DataView(a)}var s=e*r*this.bandCount+t*this.bandCount;return n.slice(s,s+this.bandCount)}var l,u;kh||((l=document.createElement("canvas")).width=1,l.height=1,kh=l.getContext("2d")),kh.clearRect(0,0,1,1);var c=this.tile.getImage();try{kh.drawImage(c,t,e,1,1,0,0,1,1),u=kh.getImageData(0,0,1,1).data}catch(t){return null}return u},e}(R),Mh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nh=function(t){function e(e){var n=t.call(this)||this;return n.ready=!0,n.Us=n.qs.bind(n),n.Bs=e,n.declutterExecutorGroup=null,n}return Mh(e,t),e.prototype.getFeatures=function(t){return i()},e.prototype.getData=function(t){return null},e.prototype.prepareFrame=function(t){return i()},e.prototype.renderFrame=function(t,e){return i()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(r,i){var o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){},e.prototype.getDataAtPixel=function(t,e,n){return null},e.prototype.getLayer=function(){return this.Bs},e.prototype.handleFontsChanged=function(){},e.prototype.qs=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(D,this.Us),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ea&&t.changed()},e.prototype.disposeInternal=function(){delete this.Bs,t.prototype.disposeInternal.call(this)},e}(Q),Lh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rh="GENERATE_BUFFERS",Dh=function(t){function e(e,n){var r=t.call(this,e)||this,i=n||{};return r.Ws=[1,0,0,1,0,0],r.Vs=null,r.Xs=i.postProcesses,r.Vo=i.uniforms,r.helper,e.addChangeListener(Wo,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r}return Lh(e,t),e.prototype.dispatchPreComposeEvent=function(t,e){var n=this.getLayer();if(n.hasListener(Ko)){var r=new ca(Ko,void 0,e,t);n.dispatchEvent(r)}},e.prototype.dispatchPostComposeEvent=function(t,e){var n=this.getLayer();if(n.hasListener(Jo)){var r=new ca(Jo,void 0,e,t);n.dispatchEvent(r)}},e.prototype.reset=function(t){this.Vo=t.uniforms,this.helper&&this.helper.setUniforms(this.Vo)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var n=!0,r=-1,i=void 0,o=0,a=t.layerStatesArray.length;o<a;o++){var s=t.layerStatesArray[o].layer,l=s.getRenderer();if(l instanceof e){var u=s.getClassName();if((n||u!==i)&&(r+=1,n=!1),i=u,l===this)break}else n=!0}var c="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(c)||(this.removeHelper(),this.helper=new bh({postProcesses:this.Xs,uniforms:this.Vo,canvasCacheKey:c}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(t){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},e.prototype.Hs=function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){Jt(this.Ws,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);var i=new ca(t,this.Ws,n,e);r.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.Hs(Xo,t,e)},e.prototype.postRender=function(t,e){this.Hs(Zo,t,e)},e.prototype.getDataAtPixel=function(t,e,n){var r=Ht([e.pixelRatio,0,0,e.pixelRatio,0,0],t.slice()),i=this.helper.getGL();if(!i)return null;var o=this.getLayer().getExtent();if(o&&!ge(o,Ht(e.pixelToCoordinateTransform,t.slice())))return null;var a=i.getContextAttributes();if(!a||!a.preserveDrawingBuffer)return new Uint8Array;var s,l=Math.round(r[0]),u=Math.round(r[1]),c=this.Vs;if(!c){var h=document.createElement("canvas");h.width=1,h.height=1,c=h.getContext("2d"),this.Vs=c}c.clearRect(0,0,1,1);try{c.drawImage(i.canvas,l,u,1,1,0,0,1,1),s=c.getImageData(0,0,1,1).data}catch(t){return s}return 0===s[3]?null:s},e}(Nh),Fh=[],jh={vertexPosition:0,indexPosition:0};function zh(t,e,n,r,i){t[e+0]=n,t[e+1]=r,t[e+2]=i}function Gh(t,e){var n=e||[],r=256,i=255;return n[0]=Math.floor(t/r/r/r)/i,n[1]=Math.floor(t/r/r)%r/i,n[2]=Math.floor(t/r)%r/i,n[3]=t%r/i,n}function Bh(t){var e=0,n=256,r=255;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),(e+=Math.round(t[2]*n*r))+Math.round(t[3]*r)}var Uh=Dh,qh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wh={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},Vh={TEXTURE_COORD:"a_textureCoord"},Hh=[{name:Vh.TEXTURE_COORD,size:2,type:dh.FLOAT}],Yh={};function Xh(t){return 2*(1-1/(t+1))-1}function Zh(t,e,n){n in t||(t[n]=[]),t[n].push(e)}function Kh(t,e){var n=t.layerStatesArray[t.layerIndex];n.extent&&(e=Ge(e,Pr(n.extent,t.viewState.projection)));var r=n.layer.getRenderSource();if(!r.getWrapX()){var i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=Ge(e,i))}return e}function Jh(t,e){return"".concat(t.getKey(),",").concat(hu(e))}var Qh=function(t){function e(e,n){var r=t.call(this,e,{uniforms:n.uniforms})||this;r.renderComplete=!1,r.Js=[1,0,0,1,0,0],r.Ks=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Ys=new bu(0,0,0,0),r.Zs=uu(0,0,0),r.$s=[0,0],r.Qs,r.ta=n.vertexShader,r.na=n.fragmentShader,r.ia=new lh(Pc,kc),r.ia.fromArray([0,1,3,1,2,3]);var i=void 0!==n.cacheSize?n.cacheSize:512;return r.ra=new lu(i),r.ea=n.paletteTextures||[],r.Ji=null,r}return qh(e,t),e.prototype.reset=function(e){t.prototype.reset.call(this,{uniforms:e.uniforms}),this.ta=e.vertexShader,this.na=e.fragmentShader,this.ea=e.paletteTextures||[],this.helper&&(this.Qs=this.helper.getProgram(this.na,this.ta))},e.prototype.afterHelperCreated=function(){this.Qs=this.helper.getProgram(this.na,this.ta),this.helper.flushBufferData(this.ia)},e.prototype.oa=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!r},e.prototype.prepareFrameInternal=function(t){var e=this.getLayer().getRenderSource();return!!e&&!Ve(Kh(t,t.extent))&&e.getState()===ea},e.prototype.enqueueTiles=function(t,e,n,r){var i=t.viewState,o=this.getLayer(),s=o.getRenderSource(),l=s.getTileGridForProjection(i.projection),u=s.getTilePixelRatio(t.pixelRatio),c=s.getGutterForProjection(i.projection),h=a(s);h in t.wantedTiles||(t.wantedTiles[h]={});for(var p=t.wantedTiles[h],f=this.ra,d=Math.max(n-o.getPreload(),l.getMinZoom(),o.getMinZoom()),g=n;g>=d;--g)for(var y=l.getTileRangeForExtentAndZ(e,g,this.Ys),m=l.getResolution(g),v=y.minX;v<=y.maxX;++v)for(var w=y.minY;w<=y.maxY;++w){var b=uu(g,v,w,this.Zs),x=Jh(s,b),_=void 0,E=void 0;if(f.containsKey(x)&&(E=(_=f.get(x)).tile),!_||_.tile.key!==s.getKey())if(E=s.getTile(g,v,w,t.pixelRatio,i.projection),_)if(this.oa(E))_.setTile(E);else{var S=E.getInterimTile();_.setTile(S)}else _=new Oh({tile:E,grid:l,helper:this.helper,tilePixelRatio:u,gutter:c}),f.set(x,_);Zh(r,_,g);var C=E.getKey();p[C]=!0,0===E.getState()&&(t.tileQueue.isKeyQueued(C)||t.tileQueue.enqueue([E,h,l.getTileCoordCenter(b),m]))}},e.prototype.renderFrame=function(t){this.Ji=t,this.renderComplete=!0;var e=this.helper.getGL();this.preRender(e,t);var n=t.viewState,r=this.getLayer().getRenderSource(),i=r.getTileGridForProjection(n.projection),o=Kh(t,t.extent),s=i.getZForResolution(n.resolution,r.zDirection),l={};if(t.nextExtent){var u=i.getZForResolution(n.nextResolution,r.zDirection),c=Kh(t,t.nextExtent);this.enqueueTiles(t,c,u,l)}this.enqueueTiles(t,o,s,l);for(var h={},p=a(this),f=t.time,d=!1,g=l[s],m=0,v=g.length;m<v;++m){var w=(D=(Z=g[m]).tile).tileCoord;if(Z.loaded){if(1===(F=D.getAlpha(p,f))){D.endTransition(p);continue}d=!0,h[j=hu(w)]=F}if(this.renderComplete=!1,!this.sa(i,w,s+1,l))for(var b=i.getMinZoom(),x=s-1;x>=b&&!this.sa(i,w,x,l);--x);}this.helper.useProgram(this.Qs),this.helper.prepareDraw(t,!d);for(var _=Object.keys(l).map(Number).sort(y),E=n.center[0],S=n.center[1],C=0,T=_.length;C<T;++C){var I=_[C],A=i.getResolution(I),P=Bs(i.getTileSize(I),this.$s),k=i.getOrigin(I),O=(E-k[0])/(P[0]*A),M=(k[1]-S)/(P[1]*A),N=n.resolution/A,L=Xh(I),R=l[I];for(m=0,v=R.length;m<v;++m)if((Z=R[m]).loaded){var D,F,j=hu(w=(D=Z.tile).tileCoord),z=w[1],G=w[2];Jt(this.Js,0,0,2/(t.size[0]*N/P[0]),-2/(t.size[1]*N/P[1]),n.rotation,-(O-z),-(M-G)),this.helper.setUniformMatrixValue(Wh.TILE_TRANSFORM,ph(this.Ks,this.Js)),this.helper.bindBuffer(Z.coords),this.helper.bindBuffer(this.ia),this.helper.enableAttributes(Hh);for(var B=0;B<Z.textures.length;){var U="TEXTURE"+B,q="".concat(Wh.TILE_TEXTURE_ARRAY,"[").concat(B,"]");e.activeTexture(e[U]),e.bindTexture(e.TEXTURE_2D,Z.textures[B]),e.uniform1i(this.helper.getUniformLocation(q),B),++B}for(var W=0;W<this.ea.length;++W){var V=this.ea[W];e.activeTexture(e["TEXTURE"+B]);var H=V.getTexture(e);e.bindTexture(e.TEXTURE_2D,H),e.uniform1i(this.helper.getUniformLocation(V.name),B),++B}(F=j in h?h[j]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(Wh.TRANSITION_ALPHA,F),this.helper.setUniformFloatValue(Wh.DEPTH,L),this.helper.setUniformFloatValue(Wh.TEXTURE_PIXEL_WIDTH,P[0]),this.helper.setUniformFloatValue(Wh.TEXTURE_PIXEL_HEIGHT,P[1]),this.helper.setUniformFloatValue(Wh.TEXTURE_RESOLUTION,A),this.helper.setUniformFloatValue(Wh.TEXTURE_ORIGIN_X,k[0]+z*P[0]*A),this.helper.setUniformFloatValue(Wh.TEXTURE_ORIGIN_Y,k[1]-G*P[1]*A),this.helper.setUniformFloatVec4(Wh.RENDER_EXTENT,o),this.helper.setUniformFloatValue(Wh.RESOLUTION,n.resolution),this.helper.setUniformFloatValue(Wh.ZOOM,n.zoom),this.helper.drawElements(0,this.ia.getSize())}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Y=this.helper.getCanvas(),X=this.ra;X.canExpireCache();){var Z;(Z=X.pop()).dispose()}return t.postRenderFunctions.push((function(t,e){r.expireCache(e.viewState.projection,Yh)})),this.postRender(e,t),Y},e.prototype.getData=function(t){if(!this.helper.getGL())return null;var e=this.Ji;if(!e)return null;var n=this.getLayer(),r=Ht(e.pixelToCoordinateTransform,t.slice()),i=e.viewState,o=n.getExtent();if(o&&!ge(Pr(o,i.projection),r))return null;var a=n.getRenderSource(),s=a.getTileGridForProjection(i.projection);if(!a.getWrapX()){var l=s.getExtent();if(l&&!ge(l,r))return null}for(var u=this.ra,c=s.getZForResolution(i.resolution);c>=s.getMinZoom();--c){var h=s.getTileCoordForCoordAndZ(r,c),p=Jh(a,h);if(u.containsKey(p)){var f=u.get(p);if(f.loaded){var d=s.getOrigin(c),g=Bs(s.getTileSize(c)),y=s.getResolution(c),m=(r[0]-d[0])/y-h[1]*g[0],v=(d[1]-r[1])/y-h[2]*g[1];return f.getPixelData(m,v)}}}return null},e.prototype.sa=function(t,e,n,r){var i=t.getTileRangeForTileCoordAndZ(e,n,this.Ys);if(!i)return!1;for(var o=!0,a=this.ra,s=this.getLayer().getRenderSource(),l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u){var c=Jh(s,[n,l,u]),h=!1;if(a.containsKey(c)){var p=a.get(c);p.loaded&&(Zh(r,p,n),h=!0)}h||(o=!1)}return o},e.prototype.removeHelper=function(){if(this.helper){var e=this.ra;e.forEach((function(t){return t.dispose()})),e.clear()}t.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var e=this.helper;e&&(e.getGL().deleteProgram(this.Qs),delete this.Qs,e.deleteBuffer(this.ia)),t.prototype.disposeInternal.call(this),delete this.ia,delete this.ra,delete this.Ji},e}(Uh),$h=1,tp=2,ep=4,np=8,rp=16,ip=31,op={};function ap(t){if("number"==typeof t)return $h;if("boolean"==typeof t)return np;if("string"==typeof t)return ko(t)?ep|tp:tp;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var e=t;if(e.every((function(t){return"number"==typeof t})))return 3===e.length||4===e.length?ep|rp:rp;if("string"!=typeof e[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=op[e[0]];if(void 0===n)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function sp(t){return tn(t)%1==0}function lp(t){var e=t.toString();return-1===e.indexOf(".")?e+".0":e}function up(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(lp).join(", "),")")}function cp(t){var e=Io(t).slice();return e.length<4&&e.push(1),up(e.map((function(t,e){return e<3?t/255:t})))}function hp(t,e){return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function pp(t,e){return lp(hp(t,e))}function fp(t,e,n){if(Array.isArray(e)&&"string"==typeof e[0]){var r=op[e[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return r.toGlsl(t,e.slice(1),n)}var i=ap(e);if((i&$h)>0)return lp(e);if((i&np)>0)return e.toString();if((i&tp)>0&&(void 0===n||n==tp))return pp(t,e.toString());if((i&ep)>0&&(void 0===n||n==ep))return cp(e);if((i&rp)>0)return up(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(n,")"))}function dp(t){if(!(ap(t)&$h))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function gp(t){for(var e=0;e<t.length;e++)dp(t[e])}function yp(t){if(!(ap(t)&tp))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function mp(t){if(!(ap(t)&np))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function vp(t,e){if(t.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function wp(t,e){if(t.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function bp(t,e){if(t.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function xp(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function _p(t,e){if(!sp(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}function Ep(t){return"u_var_"+t}op.get={getReturnType:function(t){return ip},toGlsl:function(t,e){vp(e,1),yp(e[0]);var n=e[0].toString();return-1===t.attributes.indexOf(n)&&t.attributes.push(n),(t.inFragmentShader?"v_":"a_")+n}},op.var={getReturnType:function(t){return ip},toGlsl:function(t,e){vp(e,1),yp(e[0]);var n=e[0].toString();return-1===t.variables.indexOf(n)&&t.variables.push(n),Ep(n)}};var Sp="u_paletteTextures";op.palette={getReturnType:function(t){return ep},toGlsl:function(t,e){vp(e,2),dp(e[0]);var n=fp(t,e[0]),r=e[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");for(var i=r.length,o=new Uint8Array(4*i),a=0;a<i;a++){var s=r[a],l=void 0;if("string"==typeof s)l=To(s);else{if(!Array.isArray(s))throw new Error("The second argument of palette must be an array of strings or colors");var u=s.length;if(4===u)l=s;else{if(3!==u)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(u));l=[s[0],s[1],s[2],1]}}var c=4*a;o[c]=l[0],o[c+1]=l[1],o[c+2]=l[2],o[c+3]=255*l[3]}t.paletteTextures||(t.paletteTextures=[]);var h="".concat(Sp,"[").concat(t.paletteTextures.length,"]"),p=new xh(h,o);return t.paletteTextures.push(p),"texture2D(".concat(h,", vec2((").concat(n," + 0.5) / ").concat(i,".0, 0.5))")}};var Cp="getBandValue";function Tp(t){return{getReturnType:function(t){return np},toGlsl:function(e,n){vp(n,2);for(var r=ip,i=0;i<n.length;i++)r&=ap(n[i]);if(0===r)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(n)," instead"));return r&=~ep,"(".concat(fp(e,n[0],r)," ").concat(t," ").concat(fp(e,n[1],r),")")}}}function Ip(t){return{getReturnType:function(t){return np},toGlsl:function(e,n){wp(n,2);for(var r=0;r<n.length;r++)mp(n[r]);var i;return i=n.map((function(t){return fp(e,t)})).join(" ".concat(t," ")),"(".concat(i,")")}}}op.band={getReturnType:function(t){return $h},toGlsl:function(t,e){wp(e,1),bp(e,3);var n=e[0];if(!(Cp in t.functions)){for(var r="",i=t.bandCount||1,o=0;o<i;o++){var a=Math.floor(o/4),s=o%4;s===i-1&&1===s&&(s=3);var l="".concat(Wh.TILE_TEXTURE_ARRAY,"[").concat(a,"]");r+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(l,", v_textureCoord + vec2(dx, dy))[").concat(s,"];\n          }\n        ")}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(Wh.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(Wh.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(r,"\n        }\n      ")}var u=fp(t,n),c=fp(t,e[1]||0),h=fp(t,e[2]||0);return"".concat(Cp,"(").concat(u,", ").concat(c,", ").concat(h,")")}},op.time={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,0),"u_time"}},op.zoom={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,0),"u_zoom"}},op.resolution={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,0),"u_resolution"}},op["*"]={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," * ").concat(fp(t,e[1]),")")}},op["/"]={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," / ").concat(fp(t,e[1]),")")}},op["+"]={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," + ").concat(fp(t,e[1]),")")}},op["-"]={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," - ").concat(fp(t,e[1]),")")}},op.clamp={getReturnType:function(t){return $h},toGlsl:function(t,e){vp(e,3),gp(e);var n=fp(t,e[1]),r=fp(t,e[2]);return"clamp(".concat(fp(t,e[0]),", ").concat(n,", ").concat(r,")")}},op["%"]={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,2),gp(e),"mod(".concat(fp(t,e[0]),", ").concat(fp(t,e[1]),")")}},op["^"]={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,2),gp(e),"pow(".concat(fp(t,e[0]),", ").concat(fp(t,e[1]),")")}},op.abs={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,1),gp(e),"abs(".concat(fp(t,e[0]),")")}},op.floor={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,1),gp(e),"floor(".concat(fp(t,e[0]),")")}},op.round={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,1),gp(e),"floor(".concat(fp(t,e[0])," + 0.5)")}},op.ceil={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,1),gp(e),"ceil(".concat(fp(t,e[0]),")")}},op.sin={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,1),gp(e),"sin(".concat(fp(t,e[0]),")")}},op.cos={getReturnType:function(t){return $h},toGlsl:function(t,e){return vp(e,1),gp(e),"cos(".concat(fp(t,e[0]),")")}},op.atan={getReturnType:function(t){return $h},toGlsl:function(t,e){return wp(e,1),bp(e,2),gp(e),2===e.length?"atan(".concat(fp(t,e[0]),", ").concat(fp(t,e[1]),")"):"atan(".concat(fp(t,e[0]),")")}},op[">"]={getReturnType:function(t){return np},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," > ").concat(fp(t,e[1]),")")}},op[">="]={getReturnType:function(t){return np},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," >= ").concat(fp(t,e[1]),")")}},op["<"]={getReturnType:function(t){return np},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," < ").concat(fp(t,e[1]),")")}},op["<="]={getReturnType:function(t){return np},toGlsl:function(t,e){return vp(e,2),gp(e),"(".concat(fp(t,e[0])," <= ").concat(fp(t,e[1]),")")}},op["=="]=Tp("=="),op["!="]=Tp("!="),op["!"]={getReturnType:function(t){return np},toGlsl:function(t,e){return vp(e,1),mp(e[0]),"(!".concat(fp(t,e[0]),")")}},op.all=Ip("&&"),op.any=Ip("||"),op.between={getReturnType:function(t){return np},toGlsl:function(t,e){vp(e,3),gp(e);var n=fp(t,e[1]),r=fp(t,e[2]),i=fp(t,e[0]);return"(".concat(i," >= ").concat(n," && ").concat(i," <= ").concat(r,")")}},op.array={getReturnType:function(t){return rp},toGlsl:function(t,e){wp(e,2),bp(e,4),gp(e);var n=e.map((function(e){return fp(t,e,$h)}));return"vec".concat(e.length,"(").concat(n.join(", "),")")}},op.color={getReturnType:function(t){return ep},toGlsl:function(t,e){wp(e,3),bp(e,4),gp(e);var n=e;3===e.length&&n.push(1);var r=e.map((function(e,n){return fp(t,e,$h)+(n<3?" / 255.0":"")}));return"vec".concat(e.length,"(").concat(r.join(", "),")")}},op.interpolate={getReturnType:function(t){for(var e=ep|$h,n=3;n<t.length;n+=2)e&=ap(t[n]);return e},toGlsl:function(t,e,n){xp(e),wp(e,6);var r,i=e[0];switch(i[0]){case"linear":r=1;break;case"exponential":r=i[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(i)));var o=void 0!==n?n:ip,a=op.interpolate.getReturnType(e)&o;_p(e,a);for(var s=fp(t,e[1]),l=lp(r),u="",c=2;c<e.length-2;c+=2){var h=fp(t,e[c]),p=u||fp(t,e[c+1],a),f=fp(t,e[c+2]),d=fp(t,e[c+3],a);u="mix(".concat(p,", ").concat(d,", pow(clamp((").concat(s," - ").concat(h,") / (").concat(f," - ").concat(h,"), 0.0, 1.0), ").concat(l,"))")}return u}},op.match={getReturnType:function(t){for(var e=ip,n=2;n<t.length;n+=2)e&=ap(t[n]);return e&ap(t[t.length-1])},toGlsl:function(t,e,n){xp(e),wp(e,4);var r=void 0!==n?n:ip,i=op.match.getReturnType(e)&r;_p(e,i);for(var o=fp(t,e[0]),a=fp(t,e[e.length-1],i),s=null,l=e.length-3;l>=1;l-=2){var u=fp(t,e[l]),c=fp(t,e[l+1],i);s="(".concat(o," == ").concat(u," ? ").concat(c," : ").concat(s||a,")")}return s}},op.case={getReturnType:function(t){for(var e=ip,n=1;n<t.length;n+=2)e&=ap(t[n]);return e&ap(t[t.length-1])},toGlsl:function(t,e,n){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}(e),wp(e,3);var r=void 0!==n?n:ip,i=op.case.getReturnType(e)&r;_p(e,i);for(var o=0;o<e.length-1;o+=2)mp(e[o]);var a=fp(t,e[e.length-1],i),s=null;for(o=e.length-3;o>=0;o-=2){var l=fp(t,e[o]),u=fp(t,e[o+1],i);s="(".concat(l," ? ").concat(u," : ").concat(s||a,")")}return s}};var Ap=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return t.prototype.addUniform=function(t){return this.uniforms.push(t),this},t.prototype.addAttribute=function(t){return this.attributes.push(t),this},t.prototype.addVarying=function(t,e,n){return this.varyings.push({name:t,type:e,expression:n}),this},t.prototype.setSizeExpression=function(t){return this.sizeExpression=t,this},t.prototype.setRotationExpression=function(t){return this.rotationExpression=t,this},t.prototype.setSymbolOffsetExpression=function(t){return this.offsetExpression=t,this},t.prototype.setColorExpression=function(t){return this.colorExpression=t,this},t.prototype.setTextureCoordinateExpression=function(t){return this.texCoordExpression=t,this},t.prototype.setFragmentDiscardExpression=function(t){return this.discardExpression=t,this},t.prototype.setSymbolRotateWithView=function(t){return this.rotateWithView=t,this},t.prototype.getSizeExpression=function(){return this.sizeExpression},t.prototype.getOffsetExpression=function(){return this.offsetExpression},t.prototype.getColorExpression=function(){return this.colorExpression},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},t.prototype.getSymbolVertexShader=function(t){var e=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",n=this.attributes,r=this.varyings;return t&&(n=n.concat("vec4 a_hitColor"),r=r.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\n").concat(n.map((function(t){return"attribute "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(r.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(e,";\n  vec2 halfSize = ").concat(this.sizeExpression," * 0.5;\n  vec2 offset = ").concat(this.offsetExpression,";\n  float angle = ").concat(this.rotationExpression,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n").concat(r.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n"),"\n}")},t.prototype.getSymbolFragmentShader=function(t){var e=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",n=this.varyings;return t&&(n=n.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(n.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression,") { discard; }\n  gl_FragColor = ").concat(this.colorExpression,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n").concat(e,"\n}")},t}();function Pp(t){var e=t.symbol,n=void 0!==e.size?e.size:1,r=e.color||"white",i=e.textureCoord||[0,0,1,1],o=e.offset||[0,0],a=void 0!==e.opacity?e.opacity:1,s=void 0!==e.rotation?e.rotation:0,l={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},u=fp(l,n,rp|$h),c=fp(l,o,rp),h=fp(l,i,rp),p=fp(l,s,$h),f={inFragmentShader:!0,variables:l.variables,attributes:[],stringLiteralsMap:l.stringLiteralsMap,functions:{}},d=fp(f,r,ep),g=fp(f,a,$h),y="1.0",m="vec2(".concat(fp(f,n,rp|$h),").x");switch(e.symbolType){case"square":case"image":break;case"circle":y="(1.0-smoothstep(1.-4./".concat(m,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");break;case"triangle":var v="(v_quadCoord*2.-1.)",w="(atan(".concat(v,".x,").concat(v,".y))");y="(1.0-smoothstep(.5-3./".concat(m,",.5,cos(floor(.5+").concat(w,"/2.094395102)*2.094395102-").concat(w,")*length(").concat(v,")))");break;default:throw new Error("Unexpected symbol type: "+e.symbolType)}var b=(new Ap).setSizeExpression("vec2(".concat(u,")")).setRotationExpression(p).setSymbolOffsetExpression(c).setTextureCoordinateExpression(h).setSymbolRotateWithView(!!e.rotateWithView).setColorExpression("vec4(".concat(d,".rgb, ").concat(d,".a * ").concat(g," * ").concat(y,")"));if(t.filter){var x=fp(f,t.filter,np);b.setFragmentDiscardExpression("!".concat(x))}var _={};if(f.variables.forEach((function(e){var n=Ep(e);b.addUniform("float ".concat(n)),_[n]=function(){if(!t.variables||void 0===t.variables[e])throw new Error("The following variable is missing from the style: ".concat(e));var n=t.variables[e];return"string"==typeof n&&(n=hp(l,n)),void 0!==n?n:-9999999}})),"image"===e.symbolType&&e.src){var E=new Image;E.crossOrigin=void 0===e.crossOrigin?"anonymous":e.crossOrigin,E.src=e.src,b.addUniform("sampler2D u_texture").setColorExpression(b.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),_.u_texture=E}return f.attributes.forEach((function(t){-1===l.attributes.indexOf(t)&&l.attributes.push(t),b.addVarying("v_".concat(t),"float","a_".concat(t))})),l.attributes.forEach((function(t){b.addAttribute("float a_".concat(t))})),{builder:b,attributes:l.attributes.map((function(t){return{name:t,callback:function(e,n){var r=n[t];return"string"==typeof r&&(r=hp(l,r)),void 0!==r?r:-9999999}}})),uniforms:_}}var kp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Op=function(t){function e(e){var n=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return n.aa=e.matrixIds,n}return kp(e,t),e.prototype.getMatrixId=function(t){return this.aa[t]},e.prototype.getMatrixIds=function(){return this.aa},e}(fc),Mp=Op;function Np(t,e,n){var r=[],i=[],o=[],a=[],s=[],l=void 0!==n?n:[],u=cr(t.SupportedCRS),c=u.getMetersPerUnit(),h="ne"==u.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(l.length>0)||x(l,(function(n){return e.Identifier==n.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===n.TileMatrix}))){i.push(e.Identifier);var n=28e-5*e.ScaleDenominator/c,u=e.TileWidth,p=e.TileHeight;h?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),r.push(n),a.push(u==p?u:[u,p]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new Op({extent:e,origins:o,resolutions:r,matrixIds:i,tileSizes:a,sizes:s})}var Lp=function(){function t(t){this.ua=t.opacity,this.ca=t.rotateWithView,this.Dr=t.rotation,this.ha=t.scale,this.fa=Bs(t.scale),this.la=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.ua},t.prototype.getRotateWithView=function(){return this.ca},t.prototype.getRotation=function(){return this.Dr},t.prototype.getScale=function(){return this.ha},t.prototype.getScaleArray=function(){return this.fa},t.prototype.getDisplacement=function(){return this.la},t.prototype.getAnchor=function(){return i()},t.prototype.getImage=function(t){return i()},t.prototype.getHitDetectionImage=function(){return i()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return i()},t.prototype.getImageSize=function(){return i()},t.prototype.getOrigin=function(){return i()},t.prototype.getSize=function(){return i()},t.prototype.setDisplacement=function(t){this.la=t},t.prototype.setOpacity=function(t){this.ua=t},t.prototype.setRotateWithView=function(t){this.ca=t},t.prototype.setRotation=function(t){this.Dr=t},t.prototype.setScale=function(t){this.ha=t,this.fa=Bs(t)},t.prototype.listenImageChange=function(t){i()},t.prototype.load=function(){i()},t.prototype.unlistenImageChange=function(t){i()},t}(),Rp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dp=function(t){function e(e){var n=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return(n=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).Ut=void 0,n.va=null,n.da=void 0!==e.fill?e.fill:null,n.ko=[0,0],n.Jt=e.points,n.pa=void 0!==e.radius?e.radius:e.radius1,n.ya=e.radius2,n.Kt=void 0!==e.angle?e.angle:0,n.ma=void 0!==e.stroke?e.stroke:null,n.fs=null,n.wa=null,n.render(),n}return Rp(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var t=this.fs;if(!t)return null;var e=this.getDisplacement();return[t[0]/2-e[0],t[1]/2+e[1]]},e.prototype.getAngle=function(){return this.Kt},e.prototype.getFill=function(){return this.da},e.prototype.getHitDetectionImage=function(){return this.va||this.ba(this.wa),this.va},e.prototype.getImage=function(t){var e=this.Ut[t];if(!e){var n=this.wa,r=ho(n.size*t,n.size*t);this.ga(n,r,t),e=r.canvas,this.Ut[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.fs},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.ko},e.prototype.getPoints=function(){return this.Jt},e.prototype.getRadius=function(){return this.pa},e.prototype.getRadius2=function(){return this.ya},e.prototype.getSize=function(){return this.fs},e.prototype.getStroke=function(){return this.ma},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.xa=function(t,e,n){if(0===e||this.Jt===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.pa,i=void 0===this.ya?r:this.ya;if(r<i){var o=r;r=i,i=o}var a=void 0===this.ya?this.Jt:2*this.Jt,s=2*Math.PI/a,l=i*Math.sin(s),u=r-Math.sqrt(i*i-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if("miter"===t&&h<=n)return h*e;var p=e/2/h,f=e/2*(u/c),d=Math.sqrt((r+p)*(r+p)+f*f)-r;if(void 0===this.ya||"bevel"===t)return 2*d;var g=r*Math.sin(s),y=i-Math.sqrt(r*r-g*g),m=Math.sqrt(g*g+y*y)/g;if(m<=n){var v=m*e/2-i-r;return 2*Math.max(d,v)}return 2*d},e.prototype.createRenderOptions=function(){var t,e=Sa,n=0,r=null,i=0,o=0;this.ma&&(null===(t=this.ma.getColor())&&(t=Ta),t=Tu(t),void 0===(o=this.ma.getWidth())&&(o=1),r=this.ma.getLineDash(),i=this.ma.getLineDashOffset(),void 0===(e=this.ma.getLineJoin())&&(e=Sa),void 0===(n=this.ma.getMiterLimit())&&(n=Ca));var a=this.xa(e,o,n),s=Math.max(this.pa,this.ya||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*s+a),lineDash:r,lineDashOffset:i,lineJoin:e,miterLimit:n}},e.prototype.render=function(){this.wa=this.createRenderOptions();var t=this.wa.size;this.Ut={},this.fs=[t,t]},e.prototype.ga=function(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.ja(e),this.da){var r=this.da.getColor();null===r&&(r=xa),e.fillStyle=Tu(r),e.fill()}this.ma&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.ba=function(t){if(this.da){var e=this.da.getColor(),n=0;if("string"==typeof e&&(e=Io(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){var r=ho(t.size,t.size);this.va=r.canvas,this.Sa(t,r)}}this.va||(this.va=this.getImage(1))},e.prototype.ja=function(t){var e=this.Jt,n=this.pa;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{var r=void 0===this.ya?n:this.ya;void 0!==this.ya&&(e*=2);for(var i=this.Kt-Math.PI/2,o=2*Math.PI/e,a=0;a<e;a++){var s=i+a*o,l=a%2==0?n:r;t.lineTo(l*Math.cos(s),l*Math.sin(s))}t.closePath()}},e.prototype.Sa=function(t,e){e.translate(t.size/2,t.size/2),this.ja(e),e.fillStyle=xa,e.fill(),this.ma&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(Lp),Fp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jp=function(t){function e(e){var n=e||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:void 0!==n.scale?n.scale:1,rotation:void 0!==n.rotation?n.rotation:0,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this}return Fp(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.pa=t,this.render()},e}(Dp),zp=function(){function t(t){var e=t||{};this.ka=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.ka},t.prototype.setColor=function(t){this.ka=t},t}(),Gp="fraction",Bp="pixels",Up="bottom-left",qp="bottom-right",Wp="top-left",Vp="top-right",Hp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yp=null,Xp=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.Ma=null,s.Nt=e||new Image,null!==i&&(s.Nt.crossOrigin=i),s.Ut={},s.ka=a,s.zt=null,s._a=o,s.fs=r,s.Pt=n,s.Oa,s}return Hp(e,t),e.prototype.Ta=function(){if(void 0===this.Oa&&2===this._a){Yp||(Yp=ho(1,1)),Yp.drawImage(this.Nt,0,0);try{Yp.getImageData(0,0,1,1),this.Oa=!1}catch(t){Yp=null,this.Oa=!0}}return!0===this.Oa},e.prototype.Ea=function(){this.dispatchEvent(D)},e.prototype.Lt=function(){this._a=3,this.Gt(),this.Ea()},e.prototype.Dt=function(){this._a=2,this.fs?(this.Nt.width=this.fs[0],this.Nt.height=this.fs[1]):this.fs=[this.Nt.width,this.Nt.height],this.Gt(),this.Ea()},e.prototype.getImage=function(t){return this.Aa(t),this.Ut[t]?this.Ut[t]:this.Nt},e.prototype.getPixelRatio=function(t){return this.Aa(t),this.Ut[t]?t:1},e.prototype.getImageState=function(){return this._a},e.prototype.getHitDetectionImage=function(){if(!this.Ma)if(this.Ta()){var t=this.fs[0],e=this.fs[1],n=ho(t,e);n.fillRect(0,0,t,e),this.Ma=n.canvas}else this.Ma=this.Nt;return this.Ma},e.prototype.getSize=function(){return this.fs},e.prototype.getSrc=function(){return this.Pt},e.prototype.load=function(){if(0==this._a){this._a=1;try{this.Nt.src=this.Pt}catch(t){this.Lt()}this.zt=so(this.Nt,this.Dt.bind(this),this.Lt.bind(this))}},e.prototype.Aa=function(t){if(this.ka&&!this.Ut[t]&&2===this._a){var e=document.createElement("canvas");this.Ut[t]=e,e.width=Math.ceil(this.Nt.width*t),e.height=Math.ceil(this.Nt.height*t);var n=e.getContext("2d");if(n.scale(t,t),n.drawImage(this.Nt,0,0),n.globalCompositeOperation="multiply","multiply"===n.globalCompositeOperation||this.Ta())n.fillStyle=So(this.ka),n.fillRect(0,0,e.width/t,e.height/t),n.globalCompositeOperation="destination-in",n.drawImage(this.Nt,0,0);else{for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,o=this.ka[0]/255,a=this.ka[1]/255,s=this.ka[2]/255,l=this.ka[3],u=0,c=i.length;u<c;u+=4)i[u]*=o,i[u+1]*=a,i[u+2]*=s,i[u+3]*=l;n.putImageData(r,0,0)}}},e.prototype.Gt=function(){this.zt&&(this.zt(),this.zt=null)},e}(R);function Zp(t,e,n,r,i,o){var a=Lo.get(e,r,o);return a||(a=new Xp(t,e,n,r,i,o),Lo.set(e,r,o,a)),a}var Kp=Xp,Jp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qp=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.opacity?r.opacity:1,o=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,l=void 0!==r.rotateWithView&&r.rotateWithView;(n=t.call(this,{opacity:i,rotation:o,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:l})||this).je=void 0!==r.anchor?r.anchor:[.5,.5],n.Ca=null,n.Ra=void 0!==r.anchorOrigin?r.anchorOrigin:Wp,n.Pa=void 0!==r.anchorXUnits?r.anchorXUnits:Gp,n.Ia=void 0!==r.anchorYUnits?r.anchorYUnits:Gp,n.Bt=void 0!==r.crossOrigin?r.crossOrigin:null;var u=void 0!==r.img?r.img:null;n.Na=r.imgSize;var c=r.src;yt(!(void 0!==c&&u),4),yt(!u||u&&n.Na,5),void 0!==c&&0!==c.length||!u||(c=u.src||a(u)),yt(void 0!==c&&c.length>0,6);var h=void 0!==r.src?0:2;return n.ka=void 0!==r.color?Io(r.color):null,n.za=Zp(u,c,void 0!==n.Na?n.Na:null,n.Bt,h,n.ka),n.Fa=void 0!==r.offset?r.offset:[0,0],n.La=void 0!==r.offsetOrigin?r.offsetOrigin:Wp,n.ko=null,n.fs=void 0!==r.size?r.size:null,n}return Jp(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.je.slice(),anchorOrigin:this.Ra,anchorXUnits:this.Pa,anchorYUnits:this.Ia,color:this.ka&&this.ka.slice?this.ka.slice():this.ka||void 0,crossOrigin:this.Bt,imgSize:this.Na,offset:this.Fa.slice(),offsetOrigin:this.La,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.fs?this.fs.slice():void 0,src:this.getSrc()})},e.prototype.getAnchor=function(){var t=this.Ca;if(!t){t=this.je;var e=this.getSize();if(this.Pa==Gp||this.Ia==Gp){if(!e)return null;t=this.je.slice(),this.Pa==Gp&&(t[0]*=e[0]),this.Ia==Gp&&(t[1]*=e[1])}if(this.Ra!=Wp){if(!e)return null;t===this.je&&(t=this.je.slice()),this.Ra!=Vp&&this.Ra!=qp||(t[0]=-t[0]+e[0]),this.Ra!=Up&&this.Ra!=qp||(t[1]=-t[1]+e[1])}this.Ca=t}var n=this.getDisplacement();return[t[0]-n[0],t[1]+n[1]]},e.prototype.setAnchor=function(t){this.je=t,this.Ca=null},e.prototype.getColor=function(){return this.ka},e.prototype.getImage=function(t){return this.za.getImage(t)},e.prototype.getPixelRatio=function(t){return this.za.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.za.getSize()},e.prototype.getImageState=function(){return this.za.getImageState()},e.prototype.getHitDetectionImage=function(){return this.za.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.ko)return this.ko;var t=this.Fa;if(this.La!=Wp){var e=this.getSize(),n=this.za.getSize();if(!e||!n)return null;t=t.slice(),this.La!=Vp&&this.La!=qp||(t[0]=n[0]-e[0]-t[0]),this.La!=Up&&this.La!=qp||(t[1]=n[1]-e[1]-t[1])}return this.ko=t,this.ko},e.prototype.getSrc=function(){return this.za.getSrc()},e.prototype.getSize=function(){return this.fs?this.fs:this.za.getSize()},e.prototype.listenImageChange=function(t){this.za.addEventListener(D,t)},e.prototype.load=function(){this.za.load()},e.prototype.unlistenImageChange=function(t){this.za.removeEventListener(D,t)},e}(Lp),$p=function(){function t(t){var e=t||{};this.ka=void 0!==e.color?e.color:null,this.Ga=e.lineCap,this.Da=void 0!==e.lineDash?e.lineDash:null,this.Ua=e.lineDashOffset,this.qa=e.lineJoin,this.Ba=e.miterLimit,this.Wa=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.ka},t.prototype.getLineCap=function(){return this.Ga},t.prototype.getLineDash=function(){return this.Da},t.prototype.getLineDashOffset=function(){return this.Ua},t.prototype.getLineJoin=function(){return this.qa},t.prototype.getMiterLimit=function(){return this.Ba},t.prototype.getWidth=function(){return this.Wa},t.prototype.setColor=function(t){this.ka=t},t.prototype.setLineCap=function(t){this.Ga=t},t.prototype.setLineDash=function(t){this.Da=t},t.prototype.setLineDashOffset=function(t){this.Ua=t},t.prototype.setLineJoin=function(t){this.qa=t},t.prototype.setMiterLimit=function(t){this.Ba=t},t.prototype.setWidth=function(t){this.Wa=t},t}();function tf(t){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ef=function(){function t(t){var e=t||{};this.$r=null,this.Va=sf,void 0!==e.geometry&&this.setGeometry(e.geometry),this.da=void 0!==e.fill?e.fill:null,this.Nt=void 0!==e.image?e.image:null,this.cn=void 0!==e.renderer?e.renderer:null,this.Xa=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.ma=void 0!==e.stroke?e.stroke:null,this.oo=void 0!==e.text?e.text:null,this.Ha=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===tf(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.cn},t.prototype.setRenderer=function(t){this.cn=t},t.prototype.setHitDetectionRenderer=function(t){this.Xa=t},t.prototype.getHitDetectionRenderer=function(){return this.Xa},t.prototype.getGeometry=function(){return this.$r},t.prototype.getGeometryFunction=function(){return this.Va},t.prototype.getFill=function(){return this.da},t.prototype.setFill=function(t){this.da=t},t.prototype.getImage=function(){return this.Nt},t.prototype.setImage=function(t){this.Nt=t},t.prototype.getStroke=function(){return this.ma},t.prototype.setStroke=function(t){this.ma=t},t.prototype.getText=function(){return this.oo},t.prototype.setText=function(t){this.oo=t},t.prototype.getZIndex=function(){return this.Ha},t.prototype.setGeometry=function(t){"function"==typeof t?this.Va=t:"string"==typeof t?this.Va=function(e){return e.get(t)}:t?void 0!==t&&(this.Va=function(){return t}):this.Va=sf,this.$r=t},t.prototype.setZIndex=function(t){this.Ha=t},t}();function nf(t){var e,n;return"function"==typeof t?e=t:(Array.isArray(t)?n=t:(yt("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n}),e}var rf=null;function of(t,e){if(!rf){var n=new zp({color:"rgba(255,255,255,0.4)"}),r=new $p({color:"#3399CC",width:1.25});rf=[new ef({image:new jp({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return rf}function af(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t[St.POLYGON]=[new ef({fill:new zp({color:[255,255,255,.5]})})],t[St.MULTI_POLYGON]=t[St.POLYGON],t[St.LINE_STRING]=[new ef({stroke:new $p({color:e,width:5})}),new ef({stroke:new $p({color:n,width:3})})],t[St.MULTI_LINE_STRING]=t[St.LINE_STRING],t[St.CIRCLE]=t[St.POLYGON].concat(t[St.LINE_STRING]),t[St.POINT]=[new ef({image:new jp({radius:6,fill:new zp({color:n}),stroke:new $p({color:e,width:1.5})}),zIndex:1/0})],t[St.MULTI_POINT]=t[St.POINT],t[St.GEOMETRY_COLLECTION]=t[St.POLYGON].concat(t[St.LINE_STRING],t[St.POINT]),t}function sf(t){return t.getGeometry()}var lf=ef,uf=function(){function t(t){var e=t||{};this.Ja=e.font,this.Dr=e.rotation,this.ca=e.rotateWithView,this.ha=e.scale,this.fa=Bs(void 0!==e.scale?e.scale:1),this.oo=e.text,this.Ka=e.textAlign,this.Ya=e.textBaseline,this.da=void 0!==e.fill?e.fill:new zp({color:"#333"}),this.Za=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.$a=void 0!==e.placement?e.placement:"point",this.Qa=!!e.overflow,this.ma=void 0!==e.stroke?e.stroke:null,this.tu=void 0!==e.offsetX?e.offsetX:0,this.nu=void 0!==e.offsetY?e.offsetY:0,this.iu=e.backgroundFill?e.backgroundFill:null,this.ru=e.backgroundStroke?e.backgroundStroke:null,this.Ei=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.Qa},t.prototype.getFont=function(){return this.Ja},t.prototype.getMaxAngle=function(){return this.Za},t.prototype.getPlacement=function(){return this.$a},t.prototype.getOffsetX=function(){return this.tu},t.prototype.getOffsetY=function(){return this.nu},t.prototype.getFill=function(){return this.da},t.prototype.getRotateWithView=function(){return this.ca},t.prototype.getRotation=function(){return this.Dr},t.prototype.getScale=function(){return this.ha},t.prototype.getScaleArray=function(){return this.fa},t.prototype.getStroke=function(){return this.ma},t.prototype.getText=function(){return this.oo},t.prototype.getTextAlign=function(){return this.Ka},t.prototype.getTextBaseline=function(){return this.Ya},t.prototype.getBackgroundFill=function(){return this.iu},t.prototype.getBackgroundStroke=function(){return this.ru},t.prototype.getPadding=function(){return this.Ei},t.prototype.setOverflow=function(t){this.Qa=t},t.prototype.setFont=function(t){this.Ja=t},t.prototype.setMaxAngle=function(t){this.Za=t},t.prototype.setOffsetX=function(t){this.tu=t},t.prototype.setOffsetY=function(t){this.nu=t},t.prototype.setPlacement=function(t){this.$a=t},t.prototype.setRotateWithView=function(t){this.ca=t},t.prototype.setFill=function(t){this.da=t},t.prototype.setRotation=function(t){this.Dr=t},t.prototype.setScale=function(t){this.ha=t,this.fa=Bs(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.ma=t},t.prototype.setText=function(t){this.oo=t},t.prototype.setTextAlign=function(t){this.Ka=t},t.prototype.setTextBaseline=function(t){this.Ya=t},t.prototype.setBackgroundFill=function(t){this.iu=t},t.prototype.setBackgroundStroke=function(t){this.ru=t},t.prototype.setPadding=function(t){this.Ei=t},t}(),cf=function(){function t(t){this.eu,this.ou,this.su,this.au=void 0===t||t,this.uu=0}return t.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},n=this.su;if(n){var r=n.next;e.prev=n,e.next=r,n.next=e,r&&(r.prev=e),n===this.ou&&(this.ou=e)}else this.eu=e,this.ou=e,this.au&&(e.next=e,e.prev=e);this.su=e,this.uu++},t.prototype.removeItem=function(){var t=this.su;if(t){var e=t.next,n=t.prev;e&&(e.prev=n),n&&(n.next=e),this.su=e||n,this.eu===this.ou?(this.su=void 0,this.eu=void 0,this.ou=void 0):this.eu===t?this.eu=this.su:this.ou===t&&(this.ou=n?this.su.prev:this.su),this.uu--}},t.prototype.firstItem=function(){if(this.su=this.eu,this.su)return this.su.data},t.prototype.lastItem=function(){if(this.su=this.ou,this.su)return this.su.data},t.prototype.nextItem=function(){if(this.su&&this.su.next)return this.su=this.su.next,this.su.data},t.prototype.getNextItem=function(){if(this.su&&this.su.next)return this.su.next.data},t.prototype.prevItem=function(){if(this.su&&this.su.prev)return this.su=this.su.prev,this.su.data},t.prototype.getPrevItem=function(){if(this.su&&this.su.prev)return this.su.prev.data},t.prototype.getCurrItem=function(){if(this.su)return this.su.data},t.prototype.setFirstItem=function(){this.au&&this.su&&(this.eu=this.su,this.ou=this.su.prev)},t.prototype.concat=function(t){if(t.su){if(this.su){var e=this.su.next;this.su.next=t.eu,t.eu.prev=this.su,e.prev=t.ou,t.ou.next=e,this.uu+=t.uu}else this.su=t.su,this.eu=t.eu,this.ou=t.ou,this.uu=t.uu;t.su=void 0,t.eu=void 0,t.ou=void 0,t.uu=0}},t.prototype.getLength=function(){return this.uu},t}(),hf=r(72),pf=function(){function t(t){this.cu=new hf(t),this.hu={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.cu.insert(n),this.hu[a(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++){var o=t[r],s=e[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[r]=l,this.hu[a(s)]=l}this.cu.load(n)},t.prototype.remove=function(t){var e=a(t),n=this.hu[e];return delete this.hu[e],null!==this.cu.remove(n)},t.prototype.update=function(t,e){var n=this.hu[a(e)];Se([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.cu.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.cu.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.fu(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.fu(this.getInExtent(t),e)},t.prototype.fu=function(t,e){for(var n,r=0,i=t.length;r<i;r++)if(n=e(t[r]))return n;return n},t.prototype.isEmpty=function(){return N(this.hu)},t.prototype.clear=function(){this.cu.clear(),this.hu={}},t.prototype.getExtent=function(t){var e=this.cu.toJSON();return be(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.cu.load(t.cu.all()),t.hu)this.hu[e]=t.hu[e]},t}(),ff="tileloadstart",df="tileloadend",gf="tileloaderror",yf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function mf(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var vf=function(t){function e(e){var n=t.call(this)||this;n.projection=cr(e.projection),n.lu=mf(e.attributions),n.vu=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.rn=void 0!==e.state?e.state:ea,n.du=void 0!==e.wrapX&&e.wrapX,n.pu=!!e.interpolate,n.viewResolver=null,n.viewRejector=null;var r=n;return n.yu=new Promise((function(t,e){r.viewResolver=t,r.viewRejector=e})),n}return yf(e,t),e.prototype.getAttributions=function(){return this.lu},e.prototype.getAttributionsCollapsible=function(){return this.vu},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return i()},e.prototype.getView=function(){return this.yu},e.prototype.getState=function(){return this.rn},e.prototype.getWrapX=function(){return this.du},e.prototype.getInterpolate=function(){return this.pu},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.lu=mf(t),this.changed()},e.prototype.setState=function(t){this.rn=t,this.changed()},e}(et),wf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bf=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;return n.on,n.once,n.un,n.mu=void 0!==e.opaque&&e.opaque,n.Gs=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,n.tileGrid&&Bs(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),[256,256]),n.tileCache=new mu(e.cacheSize||0),n.tmpSize=[0,0],n.Pe=e.key||"",n.tileOptions={transition:e.transition,interpolate:e.interpolate},n.zDirection=e.zDirection?e.zDirection:0,n}return wf(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,r){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)a=cu(e,u,c),s=!1,i.containsKey(a)&&(s=2===(o=i.get(a)).getState())&&(s=!1!==r(o)),s||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.Pe},e.prototype.setKey=function(t){this.Pe!==t&&(this.Pe=t,this.changed())},e.prototype.getOpaque=function(t){return this.mu},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,e,n,r,o){return i()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:dc(t)},e.prototype.getTileCacheForProjection=function(t){return yt(vr(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.Gs},e.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=this.getTilePixelRatio(e),o=Bs(r.getTileSize(t),this.tmpSize);return 1==i?o:Gs(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=gc(r,t,n)),gu(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,r){},e}(vf),xf=function(t){function e(e,n){var r=t.call(this,e)||this;return r.tile=n,r}return wf(e,t),e}(p),_f=bf,Ef=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sf=function(t){function e(n){var r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return r.wu=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(r.tileUrlFunction=n.tileUrlFunction),r.urls=null,n.urls?r.setUrls(n.urls):n.url&&r.setUrl(n.url),r.bu={},r}return Ef(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,r=a(n),i=n.getState();1==i?(this.bu[r]=!0,e=ff):r in this.bu&&(delete this.bu[r],e=3==i?gf:2==i?df:void 0),null!=e&&this.dispatchEvent(new xf(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=Cc(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.wu?this.setTileUrlFunction(_c(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var r=cu(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(_f),Cf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Tf(t,e){t.getImage().src=e}var If=function(t){function e(e){var n=this,r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),(n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Tf,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:r,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:bo,n.tileCacheForProjection={},n.tileGridForProjection={},n.gu=e.reprojectionErrorThreshold,n.xu=!1,n}return Cf(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!vr(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var e=t.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!vr(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!vr(e,t)){var n=a(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=dc(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||vr(e,t))return this.tileCache;var n=a(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new mu(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.ju=function(t,e,n,r,i,o){var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,i),l=s?this.tileUrlFunction(s,r,i):void 0,u=new this.tileClass(a,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(D,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,r,i){var o=this.getProjection();if(o&&i&&!vr(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,n],l=void 0,u=hu(s);a.containsKey(u)&&(l=a.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(i),f=this.getTileCoordForTileUrlFunction(s,i),d=new Th(o,h,i,p,s,f,this.getTilePixelRatio(r),this.getGutter(),function(t,e,n,r){return this.getTileInternal(t,e,n,r,o)}.bind(this),this.gu,this.xu,this.getInterpolate());return d.key=c,l?(d.interimTile=l,d.refreshInterimChain(),a.replace(u,d)):a.set(u,d),d}return this.getTileInternal(t,e,n,r,o||i)},e.prototype.getTileInternal=function(t,e,n,r,i){var o=null,a=cu(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var l=o;o=this.ju(t,e,n,r,i,s),0==l.getState()?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.ju(t,e,n,r,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.xu!=t){for(var e in this.xu=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=cr(t);if(n){var r=a(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}},e}(Sf),Af=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Pf(t){var e,n,r=t[0],i=new Array(r),o=1<<r-1;for(e=0;e<r;++e)n=48,t[1]&o&&(n+=1),t[2]&o&&(n+=2),i[e]=String.fromCharCode(n),o>>=1;return i.join("")}for(var kf=function(t){function e(e){var n=this,r=void 0!==e.hidpi&&e.hidpi,i=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(i=e.interpolate),(n=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:i,opaque:!0,projection:cr("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ta,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).Su=r,n.ku=void 0!==e.culture?e.culture:"en-us",n.Mu=void 0!==e.maxZoom?e.maxZoom:-1,n._u=e.key,n.Ou=e.imagerySet,Du("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+n.Ou+"?uriScheme=https&include=ImageryProviders&key="+n._u+"&c="+n.ku,n.handleImageryMetadataResponse.bind(n),void 0,"jsonp"),n}return Af(e,t),e.prototype.getApiKey=function(){return this._u},e.prototype.getImagerySet=function(){return this.Ou},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],n=-1==this.Mu?e.zoomMax:this.Mu,r=bc(this.getProjection()),i=this.Su?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/i:[e.imageWidth/i,e.imageHeight/i],a=mc({extent:r,minZoom:e.zoomMin,maxZoom:n,tileSize:o});this.tileGrid=a;var s=this.ku,l=this.Su;if(this.tileUrlFunction=Ec(e.imageUrlSubdomains.map((function(t){var n=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,e,i){if(t){uu(t[0],t[1],t[2],n);var o=r;return l&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",Pf(n))}}}))),e.imageryProviders){var u=wr(cr("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var n=[],r=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(r.resolution,this.zDirection),a=i.getTileCoordForCoordAndZ(r.center,o)[0];return e.imageryProviders.map((function(e){for(var r=!1,i=e.coverageAreas,o=0,s=i.length;o<s;++o){var l=i[o];if(a>=l.zoomMin&&a<=l.zoomMax){var c=l.bbox;if(We(Ze([c[1],c[0],c[3],c[2]],u),t.extent)){r=!0;break}}}r&&n.push(e.attribution)})),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),n}.bind(this))}this.setState(ea)}else this.setState(na)},e}(If),Of=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mf=function(t){function e(e){var n=e||{},r=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(r=n.interpolate);var i=void 0!==n.projection?n.projection:"EPSG:3857",o=void 0!==n.tileGrid?n.tileGrid:mc({extent:bc(i),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return Of(e,t),e}(If),Nf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lf=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection})||this;return n.Tu=e.account,n.Eu=e.map||"",n.Au=e.config||{},n.Cu={},n.Ru(),n}return Nf(e,t),e.prototype.getConfig=function(){return this.Au},e.prototype.updateConfig=function(t){k(this.Au,t),this.Ru()},e.prototype.setConfig=function(t){this.Au=t||{},this.Ru()},e.prototype.Ru=function(){var t=JSON.stringify(this.Au);if(this.Cu[t])this.Pu(this.Cu[t]);else{var e="https://"+this.Tu+".carto.com/api/v1/map";this.Eu&&(e+="/named/"+this.Eu);var n=new XMLHttpRequest;n.addEventListener("load",this.Iu.bind(this,t)),n.addEventListener("error",this.Nu.bind(this)),n.open("POST",e),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.Au))}},e.prototype.Iu=function(t,e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var r=void 0;try{r=JSON.parse(n.responseText)}catch(t){return void this.setState(na)}this.Pu(r),this.Cu[t]=r,this.setState(ea)}else this.setState(na)},e.prototype.Nu=function(t){this.setState(na)},e.prototype.Pu=function(t){var e="https://"+t.cdn_url.https+"/"+this.Tu+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(Mf),Rf="addfeature",Df="changefeature",Ff="clear",jf="removefeature",zf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gf=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.feature=n,i.features=r,i}return zf(e,t),e}(p),Bf=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:ea,wrapX:void 0===r.wrapX||r.wrapX})||this).on,n.once,n.un,n.q=I,n.Fe=r.format,n.zu=void 0===r.overlaps||r.overlaps,n.Ge=r.url,void 0!==r.loader?n.q=r.loader:void 0!==n.Ge&&(yt(n.Fe,7),n.q=Nu(n.Ge,n.Fe)),n.Fu=void 0!==r.strategy?r.strategy:Lu;var i,o,a=void 0===r.useSpatialIndex||r.useSpatialIndex;return n.Lu=a?new pf:null,n.Gu=new pf,n.Du=0,n.Uu={},n.qu={},n.Bu={},n.Wu={},n.Vu=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(i=r.features).getArray()),a||void 0!==i||(i=new st(o)),void 0!==o&&n.addFeaturesInternal(o),void 0!==i&&n.Xu(i),n}return zf(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=a(t);if(this.Hu(e,t)){this.Ju(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();this.Lu&&this.Lu.insert(r,t)}else this.Uu[e]=t;this.dispatchEvent(new Gf(Rf,t))}else this.Vu&&this.Vu.remove(t)},e.prototype.Ju=function(t,e){this.Wu[t]=[H(e,D,this.Ku,this),H(e,f,this.Ku,this)]},e.prototype.Hu=function(t,e){var n=!0,r=e.getId();return void 0!==r&&(r.toString()in this.qu?n=!1:this.qu[r.toString()]=e),n&&(yt(!(t in this.Bu),30),this.Bu[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],r=[],i=0,o=t.length;i<o;i++){var s=a(u=t[i]);this.Hu(s,u)&&n.push(u)}i=0;for(var l=n.length;i<l;i++){var u;s=a(u=n[i]),this.Ju(s,u);var c=u.getGeometry();if(c){var h=c.getExtent();e.push(h),r.push(u)}else this.Uu[s]=u}if(this.Lu&&this.Lu.load(e,r),this.hasListener(Rf)){i=0;for(var p=n.length;i<p;i++)this.dispatchEvent(new Gf(Rf,n[i]))}},e.prototype.Xu=function(t){var e=!1;this.addEventListener(Rf,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(jf,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(nt,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(rt,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.Vu=t},e.prototype.clear=function(t){if(t){for(var e in this.Wu)this.Wu[e].forEach(X);this.Vu||(this.Wu={},this.qu={},this.Bu={})}else if(this.Lu){var n=function(t){this.removeFeatureInternal(t)}.bind(this);for(var r in this.Lu.forEach(n),this.Uu)this.removeFeatureInternal(this.Uu[r])}this.Vu&&this.Vu.clear(),this.Lu&&this.Lu.clear(),this.Uu={};var i=new Gf(Ff);this.dispatchEvent(i),this.changed()},e.prototype.forEachFeature=function(t){if(this.Lu)return this.Lu.forEach(t);this.Vu&&this.Vu.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.Lu)return this.Lu.forEachInExtent(t,e);this.Vu&&this.Vu.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var r=e(n);if(r)return r}}))},e.prototype.getFeaturesCollection=function(){return this.Vu},e.prototype.getFeatures=function(){var t;return this.Vu?t=this.Vu.getArray().slice(0):this.Lu&&(t=this.Lu.getAll(),N(this.Uu)||b(t,M(this.Uu))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.Lu?this.Lu.getInExtent(t):this.Vu?this.Vu.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],r=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||C;return this.Lu.forEachInExtent(s,(function(t){if(l(t)){var e=t.getGeometry(),u=a;if((a=e.closestPointXY(n,r,o,a))<u){i=t;var c=Math.sqrt(a);s[0]=n-c,s[1]=r-c,s[2]=n+c,s[3]=r+c}}})),i},e.prototype.getExtent=function(t){return this.Lu.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.qu[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.Bu[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.Fe},e.prototype.getOverlaps=function(){return this.zu},e.prototype.getUrl=function(){return this.Ge},e.prototype.Ku=function(t){var e=t.target,n=a(e),r=e.getGeometry();if(r){var i=r.getExtent();n in this.Uu?(delete this.Uu[n],this.Lu&&this.Lu.insert(i,e)):this.Lu&&this.Lu.update(i,e)}else n in this.Uu||(this.Lu&&this.Lu.remove(e),this.Uu[n]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.qu[s]!==e&&(this.Yu(e),this.qu[s]=e)}else this.Yu(e),this.Bu[n]=e;this.changed(),this.dispatchEvent(new Gf(Df,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.qu:a(t)in this.Bu},e.prototype.isEmpty=function(){return this.Lu?this.Lu.isEmpty()&&N(this.Uu):!this.Vu||0===this.Vu.getLength()},e.prototype.loadFeatures=function(t,e,n){for(var r=this.Gu,i=this.Fu(t,e,n),o=function(t,o){var s=i[t];r.forEachInExtent(s,(function(t){return ye(t.extent,s)}))||(++a.Du,a.dispatchEvent(new Gf("featuresloadstart")),a.q.call(a,s,e,n,function(t){--this.Du,this.dispatchEvent(new Gf("featuresloadend",void 0,t))}.bind(a),function(){--this.Du,this.dispatchEvent(new Gf("featuresloaderror"))}.bind(a)),r.insert(s,{extent:s.slice()}))},a=this,s=0,l=i.length;s<l;++s)o(s);this.loading=!(this.q.length<4)&&this.Du>0},e.prototype.refresh=function(){this.clear(!0),this.Gu.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.Gu;n.forEachInExtent(t,(function(n){if(Se(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){if(t){var e=a(t);e in this.Uu?delete this.Uu[e]:this.Lu&&this.Lu.remove(t),this.removeFeatureInternal(t)&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var e=a(t),n=this.Wu[e];if(n){n.forEach(X),delete this.Wu[e];var r=t.getId();return void 0!==r&&delete this.qu[r.toString()],delete this.Bu[e],this.dispatchEvent(new Gf(jf,t)),t}},e.prototype.Yu=function(t){var e=!1;for(var n in this.qu)if(this.qu[n]===t){delete this.qu[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.q=t},e.prototype.setUrl=function(t){yt(this.Fe,7),this.Ge=t,this.setLoader(Nu(t,this.Fe))},e}(vf),Uf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qf=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return n.resolution=void 0,n.distance=void 0!==e.distance?e.distance:20,n.minDistance=e.minDistance||0,n.interpolationRatio=0,n.features=[],n.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return yt(e.getType()==St.POINT,10),e},n.Zu=e.createCluster,n.source=null,n.$u=n.refresh.bind(n),n.updateDistance(n.distance,n.minDistance),n.setSource(e.source||null),n}return Uf(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,n){this.source.loadFeatures(t,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())},e.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},e.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},e.prototype.getMinDistance=function(){return this.minDistance},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(D,this.$u),this.source=t,t&&t.addEventListener(D,this.$u),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.updateDistance=function(t,e){var n=0===t?0:Math.min(e,t)/t,r=t!==this.distance||this.interpolationRatio!==n;this.distance=t,this.minDistance=e,this.interpolationRatio=n,r&&this.refresh()},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,n=this.source.getFeatures(),r={},i=0,o=n.length;i<o;i++){var s=n[i];if(!(a(s)in r)){var l=this.geometryFunction(s);if(l){_e(l.getCoordinates(),t),pe(t,e,t);var u=this.source.getFeaturesInExtent(t).filter((function(t){var e=a(t);return!(e in r)&&(r[e]=!0,!0)}));this.features.push(this.createCluster(u,t))}}}},e.prototype.createCluster=function(t,e){for(var n=[0,0],r=t.length-1;r>=0;--r){var i=this.geometryFunction(t[r]);i?zn(n,i.getCoordinates()):t.splice(r,1)}Hn(n,1/t.length);var o=De(e),a=this.interpolationRatio,s=new vi([n[0]*(1-a)+o[0]*a,n[1]*(1-a)+o[1]*a]);return this.Zu?this.Zu(s,t):new wt({geometry:s,features:t})},e}(Bf),Wf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vf=function(t){function e(e){var n=this,r=void 0===e.projection?"EPSG:3857":e.projection,i=e.tileGrid;return void 0===i&&r&&(i=mc({extent:bc(r),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),(n=t.call(this,{cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:r,tileGrid:i,opaque:e.opaque,state:e.state,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate})||this).bu={},n.q=e.loader,n.hr=n.hr.bind(n),n.bandCount=void 0===e.bandCount?4:e.bandCount,n}return Wf(e,t),e.prototype.setLoader=function(t){this.q=t},e.prototype.getTile=function(t,e,n,r,i){var o=cu(t,e,n);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=this.q,s=new gt(k({tileCoord:[t,e,n],loader:function(){return P((function(){return a(t,e,n)}))}},this.tileOptions));return s.key=this.getKey(),s.addEventListener(D,this.hr),this.tileCache.set(o,s),s},e.prototype.hr=function(t){var e,n=t.target,r=a(n),i=n.getState();1==i?(this.bu[r]=!0,e=ff):r in this.bu&&(delete this.bu[r],e=3==i?gf:2==i?df:void 0),e&&this.dispatchEvent(new xf(e,n))},e}(_f),Hf=new ArrayBuffer(4),Yf=new Float32Array(Hf),Xf=new Uint32Array(Hf),Zf=new Uint32Array(512),Kf=new Uint32Array(512),Jf=0;Jf<256;++Jf){var Qf=Jf-127;Qf<-27?(Zf[Jf]=0,Zf[256|Jf]=32768,Kf[Jf]=24,Kf[256|Jf]=24):Qf<-14?(Zf[Jf]=1024>>-Qf-14,Zf[256|Jf]=1024>>-Qf-14|32768,Kf[Jf]=-Qf-1,Kf[256|Jf]=-Qf-1):Qf<=15?(Zf[Jf]=Qf+15<<10,Zf[256|Jf]=Qf+15<<10|32768,Kf[Jf]=13,Kf[256|Jf]=13):Qf<128?(Zf[Jf]=31744,Zf[256|Jf]=64512,Kf[Jf]=24,Kf[256|Jf]=24):(Zf[Jf]=31744,Zf[256|Jf]=64512,Kf[Jf]=13,Kf[256|Jf]=13)}var $f=new Uint32Array(2048),td=new Uint32Array(64),ed=new Uint32Array(64);$f[0]=0;for(var nd=1;nd<1024;++nd){for(var rd=nd<<13,id=0;0==(8388608&rd);)id-=8388608,rd<<=1;rd&=-8388609,id+=947912704,$f[nd]=rd|id}for(var od=1024;od<2048;++od)$f[od]=939524096+(od-1024<<13);td[0]=0;for(var ad=1;ad<31;++ad)td[ad]=ad<<23;td[31]=1199570944,td[32]=2147483648;for(var sd=33;sd<63;++sd)td[sd]=2147483648+(sd-32<<23);td[63]=3347054592,ed[0]=0;for(var ld=1;ld<64;++ld)ed[ld]=32===ld?0:1024;var ud=Reflect.getPrototypeOf(Uint8Array).prototype,cd=Reflect.getOwnPropertyDescriptor(ud,Symbol.toStringTag).get;var hd=Object.prototype.toString;function pd(t){return!!ArrayBuffer.isView(t)&&!function(t){return void 0!==cd.call(t)}(t)&&"[object DataView]"===hd.call(t)}function fd(t,e){if(!pd(t))throw new TypeError("First argument to getFloat16 function must be a DataView");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return function(t){var e=t>>10;return Xf[0]=$f[ed[e]+(1023&t)]+td[e],Yf[0]}(t.getUint16.apply(t,[e].concat(r)))}var dd=r(802),gd=r(51),yd=r(150);function md(t,e){for(var n,r=t.width,i=t.height,o=new Uint8Array(r*i*3),a=0,s=0;a<t.length;++a,s+=3)n=256-t[a]/e*256,o[s]=n,o[s+1]=n,o[s+2]=n;return o}function vd(t,e){for(var n,r=t.width,i=t.height,o=new Uint8Array(r*i*3),a=0,s=0;a<t.length;++a,s+=3)n=t[a]/e*256,o[s]=n,o[s+1]=n,o[s+2]=n;return o}function wd(t,e){for(var n=t.width,r=t.height,i=new Uint8Array(n*r*3),o=e.length/3,a=e.length/3*2,s=0,l=0;s<t.length;++s,l+=3){var u=t[s];i[l]=e[u]/65536*256,i[l+1]=e[u+o]/65536*256,i[l+2]=e[u+a]/65536*256}return i}function bd(t){for(var e=t.width,n=t.height,r=new Uint8Array(e*n*3),i=0,o=0;i<t.length;i+=4,o+=3){var a=t[i],s=t[i+1],l=t[i+2],u=t[i+3];r[o]=(255-a)/256*255*((255-u)/256),r[o+1]=(255-s)/256*255*((255-u)/256),r[o+2]=(255-l)/256*255*((255-u)/256)}return r}function xd(t){for(var e=t.width,n=t.height,r=new Uint8ClampedArray(e*n*3),i=0,o=0;i<t.length;i+=3,o+=3){var a=t[i],s=t[i+1],l=t[i+2];r[o]=a+1.402*(l-128),r[o+1]=a-.34414*(s-128)-.71414*(l-128),r[o+2]=a+1.772*(s-128)}return r}function _d(t){for(var e=t.width,n=t.height,r=new Uint8Array(e*n*3),i=0,o=0;i<t.length;i+=3,o+=3){var a=(t[i+0]+16)/116,s=(t[i+1]<<24>>24)/500+a,l=a-(t[i+2]<<24>>24)/200,u=void 0,c=void 0,h=void 0;c=-.9689*(s=.95047*(s*s*s>.008856?s*s*s:(s-16/116)/7.787))+1.8758*(a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787))+.0415*(l=1.08883*(l*l*l>.008856?l*l*l:(l-16/116)/7.787)),h=.0557*s+-.204*a+1.057*l,u=(u=3.2406*s+-1.5372*a+-.4986*l)>.0031308?1.055*Math.pow(u,1/2.4)-.055:12.92*u,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:12.92*c,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,r[o]=255*Math.max(0,Math.min(1,u)),r[o+1]=255*Math.max(0,Math.min(1,c)),r[o+2]=255*Math.max(0,Math.min(1,h))}return r}function Ed(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Sd=new Map;function Cd(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(t){return Sd.set(t,e)}))}function Td(t){return Id.apply(this,arguments)}function Id(){return(Id=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Ed(o,r,i,a,s,"next",t)}function s(t){Ed(o,r,i,a,s,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Sd.get(e.Compression)){t.next=3;break}throw new Error("Unknown compression method identifier: ".concat(e.Compression));case 3:return t.next=5,n();case 5:return r=t.sent,t.abrupt("return",new r(e));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ad(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(t).constructor)(e*n*r)}function Pd(t,e,n){return(1-n)*t+n*e}function kd(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(o.toLowerCase()){case"nearest":return function(t,e,n,r,i){var o=e/r,a=n/i;return t.map((function(t){for(var s=Ad(t,r,i),l=0;l<i;++l)for(var u=Math.min(Math.round(a*l),n-1),c=0;c<r;++c){var h=Math.min(Math.round(o*c),e-1),p=t[u*e+h];s[l*r+c]=p}return s}))}(t,e,n,r,i);case"bilinear":case"linear":return function(t,e,n,r,i){var o=e/r,a=n/i;return t.map((function(t){for(var s=Ad(t,r,i),l=0;l<i;++l)for(var u=a*l,c=Math.floor(u),h=Math.min(Math.ceil(u),n-1),p=0;p<r;++p){var f=o*p,d=f%1,g=Math.floor(f),y=Math.min(Math.ceil(f),e-1),m=t[c*e+g],v=t[c*e+y],w=t[h*e+g],b=t[h*e+y],x=Pd(Pd(m,v,d),Pd(w,b,d),u%1);s[l*r+p]=x}return s}))}(t,e,n,r,i);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}}function Od(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(a.toLowerCase()){case"nearest":return function(t,e,n,r,i,o){for(var a=e/r,s=n/i,l=Ad(t,r,i,o),u=0;u<i;++u)for(var c=Math.min(Math.round(s*u),n-1),h=0;h<r;++h)for(var p=Math.min(Math.round(a*h),e-1),f=0;f<o;++f){var d=t[c*e*o+p*o+f];l[u*r*o+h*o+f]=d}return l}(t,e,n,r,i,o);case"bilinear":case"linear":return function(t,e,n,r,i,o){for(var a=e/r,s=n/i,l=Ad(t,r,i,o),u=0;u<i;++u)for(var c=s*u,h=Math.floor(c),p=Math.min(Math.ceil(c),n-1),f=0;f<r;++f)for(var d=a*f,g=d%1,y=Math.floor(d),m=Math.min(Math.ceil(d),e-1),v=0;v<o;++v){var w=t[h*e*o+y*o+v],b=t[h*e*o+m*o+v],x=t[p*e*o+y*o+v],_=t[p*e*o+m*o+v],E=Pd(Pd(w,b,g),Pd(x,_,g),c%1);l[u*r*o+f*o+v]=E}return l}(t,e,n,r,i,o);default:throw new Error("Unsupported resampling method: '".concat(a,"'"))}}function Md(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nd(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ld(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Nd(o,r,i,a,s,"next",t)}function s(t){Nd(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Rd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dd(t,e,n){for(var r=0,i=e;i<n;++i)r+=t[i];return r}function Fd(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n);if(e<=16)return new Uint16Array(n);if(e<=32)return new Uint32Array(n);break;case 2:if(8===e)return new Int8Array(n);if(16===e)return new Int16Array(n);if(32===e)return new Int32Array(n);break;case 3:switch(e){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}}throw Error("Unsupported data format/bitsPerSample")}function jd(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}function zd(t,e,n,r,i,o,a){var s=new DataView(t),l=2===n?1:r,u=Fd(e,i,2===n?a*o:a*o*r),c=parseInt("1".repeat(i),2);if(1===e){var h=o*(1===n?r*i:i);0!=(7&h)&&(h=h+7&-8);for(var p=0;p<a;++p)for(var f=p*h,d=0;d<o;++d)for(var g=f+d*l*i,y=0;y<l;++y){var m=g+y*i,v=(p*o+d)*l+y,w=Math.floor(m/8),b=m%8;if(b+i<=8)u[v]=s.getUint8(w)>>8-i-b&c;else if(b+i<=16)u[v]=s.getUint16(w)>>16-i-b&c;else if(b+i<=24){var x=s.getUint16(w)<<8|s.getUint8(w+2);u[v]=x>>24-i-b&c}else u[v]=s.getUint32(w)>>32-i-b&c}}return u.buffer}Cd([void 0,1],(function(){return r.e(226).then(r.bind(r,966)).then((function(t){return t.default}))})),Cd(5,(function(){return r.e(611).then(r.bind(r,611)).then((function(t){return t.default}))})),Cd(6,(function(){throw new Error("old style JPEG compression is not supported.")})),Cd(7,(function(){return r.e(382).then(r.bind(r,382)).then((function(t){return t.default}))})),Cd([8,32946],(function(){return Promise.all([r.e(247),r.e(356)]).then(r.bind(r,356)).then((function(t){return t.default}))})),Cd(32773,(function(){return r.e(395).then(r.bind(r,395)).then((function(t){return t.default}))})),Cd(34887,(function(){return Promise.all([r.e(247),r.e(54)]).then(r.bind(r,54)).then((function(t){return t.default}))})),Cd(50001,(function(){return r.e(629).then(r.bind(r,629)).then((function(t){return t.default}))}));var Gd=function(){function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileDirectory=e,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!e.StripOffsets;var s=e.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=a}var e,n,r,i,o,a;return e=t,(n=[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var t=0,e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}},{key:"getSampleByteSize",value:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(t," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}},{key:"getReaderForSample",value:function(t){var e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,n=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(t,e){return fd(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}},{key:"getBitsPerSample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[t]}},{key:"getArrayForSample",value:function(t,e){return Fd(this.getSampleFormat(t),this.getBitsPerSample(t),e)}},{key:"getTileOrStrip",value:(a=Ld(regeneratorRuntime.mark((function t(e,n,r,i,o){var a,s,l,u,c,h,p,f,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),u=this.tiles,1===this.planarConfiguration?l=n*a+e:2===this.planarConfiguration&&(l=r*a*s+n*a+e),this.isTiled?(c=this.fileDirectory.TileOffsets[l],h=this.fileDirectory.TileByteCounts[l]):(c=this.fileDirectory.StripOffsets[l],h=this.fileDirectory.StripByteCounts[l]),t.next=7,this.source.fetch([{offset:c,length:h}],o);case 7:return p=t.sent[0],null!==u&&u[l]?f=u[l]:(f=Ld(regeneratorRuntime.mark((function t(){var e,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.decode(d.fileDirectory,p);case 2:return e=t.sent,r=d.getSampleFormat(),o=d.getBitsPerSample(),jd(r,o)&&(e=zd(e,r,d.planarConfiguration,d.getSamplesPerPixel(),o,d.getTileWidth(),d.getBlockHeight(n))),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))(),null!==u&&(u[l]=f)),t.t0=e,t.t1=n,t.t2=r,t.next=14,f;case 14:return t.t3=t.sent,t.abrupt("return",{x:t.t0,y:t.t1,sample:t.t2,data:t.t3});case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,i){return a.apply(this,arguments)})},{key:"_readRaster",value:(o=Ld(regeneratorRuntime.mark((function t(e,n,r,i,o,a,s,l,u){var c,h,p,f,d,g,y,m,v,w,b,x,_,E,S,C,T,I,A,P,k=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c=this.getTileWidth(),h=this.getTileHeight(),p=this.getWidth(),f=this.getHeight(),d=Math.max(Math.floor(e[0]/c),0),g=Math.min(Math.ceil(e[2]/c),Math.ceil(p/c)),y=Math.max(Math.floor(e[1]/h),0),m=Math.min(Math.ceil(e[3]/h),Math.ceil(f/h)),v=e[2]-e[0],w=this.getBytesPerPixel(),b=[],x=[],_=0;_<n.length;++_)1===this.planarConfiguration?b.push(Dd(this.fileDirectory.BitsPerSample,0,n[_])/8):b.push(0),x.push(this.getReaderForSample(n[_]));for(E=[],S=this.littleEndian,C=y;C<m;++C)for(T=d;T<g;++T)for(I=function(t){var a=t,s=n[t];2===k.planarConfiguration&&(w=k.getSampleByteSize(t));var l=k.getTileOrStrip(T,C,s,o,u);E.push(l),l.then((function(t){for(var o=t.data,s=new DataView(o),l=k.getBlockHeight(t.y),u=t.y*h,d=t.x*c,g=u+l,y=(t.x+1)*c,m=x[a],_=Math.min(l,l-(g-e[3]),f-u),E=Math.min(c,c-(y-e[2]),p-d),C=Math.max(0,e[1]-u);C<_;++C)for(var T=Math.max(0,e[0]-d);T<E;++T){var I=(C*c+T)*w,A=m.call(s,I+b[a],S),P=void 0;i?(P=(C+u-e[1])*v*n.length+(T+d-e[0])*n.length+a,r[P]=A):(P=(C+u-e[1])*v+T+d-e[0],r[a][P]=A)}}))},A=0;A<n.length;++A)I(A);return t.next=18,Promise.all(E);case 18:if(!(a&&e[2]-e[0]!==a||s&&e[3]-e[1]!==s)){t.next=23;break}return(P=i?Od(r,e[2]-e[0],e[3]-e[1],a,s,n.length,l):kd(r,e[2]-e[0],e[3]-e[1],a,s,l)).width=a,P.height=s,t.abrupt("return",P);case 23:return r.width=a||e[2]-e[0],r.height=s||e[3]-e[1],t.abrupt("return",r);case 26:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,i,a,s,l,u){return o.apply(this,arguments)})},{key:"readRasters",value:(i=Ld(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u,c,h,p,f,d,g,y,m,v,w,b,x,_,E,S,C,T,I=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(e=I.length>0&&void 0!==I[0]?I[0]:{}).window,r=e.samples,i=void 0===r?[]:r,o=e.interleave,a=e.pool,s=void 0===a?null:a,l=e.width,u=e.height,c=e.resampleMethod,h=e.fillValue,p=e.signal,!((f=n||[0,0,this.getWidth(),this.getHeight()])[0]>f[2]||f[1]>f[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if(d=f[2]-f[0],g=f[3]-f[1],y=d*g,m=this.getSamplesPerPixel(),i&&i.length){t.next=12;break}for(v=0;v<m;++v)i.push(v);t.next=19;break;case 12:w=0;case 13:if(!(w<i.length)){t.next=19;break}if(!(i[w]>=m)){t.next=16;break}return t.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(i[w],"'."))));case 16:++w,t.next=13;break;case 19:if(o)x=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,_=Math.max.apply(null,this.fileDirectory.BitsPerSample),b=Fd(x,_,y*i.length),h&&b.fill(h);else for(b=[],E=0;E<i.length;++E)S=this.getArrayForSample(i[E],y),Array.isArray(h)&&E<h.length?S.fill(h[E]):h&&!Array.isArray(h)&&S.fill(h),b.push(S);if(t.t0=s,t.t0){t.next=25;break}return t.next=24,Td(this.fileDirectory);case 24:t.t0=t.sent;case 25:return C=t.t0,t.next=28,this._readRaster(f,i,b,o,C,l,u,c,p);case 28:return T=t.sent,t.abrupt("return",T);case 30:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"readRGB",value:(r=Ld(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u,c,h,p,f,d,g,y,m,v,w,b,x,_,E,S,C,T,I,A=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(e=A.length>0&&void 0!==A[0]?A[0]:{}).window,r=e.interleave,i=void 0===r||r,o=e.pool,a=void 0===o?null:o,s=e.width,l=e.height,u=e.resampleMethod,c=e.enableAlpha,h=void 0!==c&&c,p=e.signal,!((f=n||[0,0,this.getWidth(),this.getHeight()])[0]>f[2]||f[1]>f[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if((d=this.fileDirectory.PhotometricInterpretation)!==yd.Ie.RGB){t.next=9;break}if(g=[0,1,2],this.fileDirectory.ExtraSamples!==yd.pd.Unspecified&&h)for(g=[],y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)g.push(y);return t.abrupt("return",this.readRasters({window:n,interleave:i,samples:g,pool:a,width:s,height:l,resampleMethod:u,signal:p}));case 9:t.t0=d,t.next=t.t0===yd.Ie.WhiteIsZero||t.t0===yd.Ie.BlackIsZero||t.t0===yd.Ie.Palette?12:t.t0===yd.Ie.CMYK?14:t.t0===yd.Ie.YCbCr||t.t0===yd.Ie.CIELab?16:18;break;case 12:return m=[0],t.abrupt("break",19);case 14:return m=[0,1,2,3],t.abrupt("break",19);case 16:return m=[0,1,2],t.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return v={window:f,interleave:!0,samples:m,pool:a,width:s,height:l,resampleMethod:u,signal:p},w=this.fileDirectory,t.next=23,this.readRasters(v);case 23:b=t.sent,x=Math.pow(2,this.fileDirectory.BitsPerSample[0]),t.t1=d,t.next=t.t1===yd.Ie.WhiteIsZero?28:t.t1===yd.Ie.BlackIsZero?30:t.t1===yd.Ie.Palette?32:t.t1===yd.Ie.CMYK?34:t.t1===yd.Ie.YCbCr?36:t.t1===yd.Ie.CIELab?38:40;break;case 28:return _=md(b,x),t.abrupt("break",41);case 30:return _=vd(b,x),t.abrupt("break",41);case 32:return _=wd(b,w.ColorMap),t.abrupt("break",41);case 34:return _=bd(b),t.abrupt("break",41);case 36:return _=xd(b),t.abrupt("break",41);case 38:return _=_d(b),t.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!i){for(E=new Uint8Array(_.length/3),S=new Uint8Array(_.length/3),C=new Uint8Array(_.length/3),T=0,I=0;T<_.length;T+=3,++I)E[I]=_[T],S[I]=_[T+1],C[I]=_[T+2];_=[E,S,C]}return _.width=b.width,_.height=b.height,t.abrupt("return",_);case 45:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}},{key:"getGDALMetadata",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={};if(!this.fileDirectory.GDAL_METADATA)return null;var n=this.fileDirectory.GDAL_METADATA,r=gd(n,"Item");r=null===t?r.filter((function(t){return void 0===dd(t,"sample")})):r.filter((function(e){return Number(dd(e,"sample"))===t}));for(var i=0;i<r.length;++i){var o=r[i];e[dd(o,"name")]=o.inner}return e}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}},{key:"getOrigin",value:function(){var t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(n)return[n[0],n[5],n[10]];if(t){var r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Md(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Md(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.getResolution(),3),i=r[0],o=r[1],a=r[2];return[i*t.getWidth()/this.getWidth(),o*t.getHeight()/this.getHeight(),a*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var t=this.getOrigin(),e=this.getResolution(),n=t[0],r=t[1],i=n+e[0]*this.getWidth(),o=r+e[1]*this.getHeight();return[Math.min(n,i),Math.min(r,o),Math.max(n,i),Math.max(r,o)]}}])&&Rd(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ud=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(e)}var e,n;return e=t,(n=[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(t,e){var n,r=this.getUint32(t,e),i=this.getUint32(t+4,e);if(e){if(n=r+Math.pow(2,32)*i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}if(n=Math.pow(2,32)*r+i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}},{key:"getInt64",value:function(t,e){for(var n=0,r=(128&this._dataView.getUint8(t+(e?7:0)))>0,i=!0,o=0;o<8;o++){var a=this._dataView.getUint8(t+(e?o:7-o));r&&(i?0!==a&&(a=255&~(a-1),i=!1):a=255&~a),n+=a*Math.pow(256,o)}return r&&(n=-n),n}},{key:"getUint8",value:function(t,e){return this._dataView.getUint8(t,e)}},{key:"getInt8",value:function(t,e){return this._dataView.getInt8(t,e)}},{key:"getUint16",value:function(t,e){return this._dataView.getUint16(t,e)}},{key:"getInt16",value:function(t,e){return this._dataView.getInt16(t,e)}},{key:"getUint32",value:function(t,e){return this._dataView.getUint32(t,e)}},{key:"getInt32",value:function(t,e){return this._dataView.getInt32(t,e)}},{key:"getFloat16",value:function(t,e){return fd(this._dataView,t,e)}},{key:"getFloat32",value:function(t,e){return this._dataView.getFloat32(t,e)}},{key:"getFloat64",value:function(t,e){return this._dataView.getFloat64(t,e)}}])&&Bd(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Wd=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(e),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}var e,n;return e=t,(n=[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}},{key:"readUint8",value:function(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(t){var e,n=this.readUint32(t),r=this.readUint32(t+4);if(this._littleEndian){if(e=n+Math.pow(2,32)*r,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return e}if(e=Math.pow(2,32)*n+r,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return e}},{key:"readInt64",value:function(t){for(var e=0,n=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0,r=!0,i=0;i<8;i++){var o=this._dataView.getUint8(t+(this._littleEndian?i:7-i));n&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),e+=o*Math.pow(256,i)}return n&&(e=-e),e}},{key:"readOffset",value:function(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}])&&qd(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vd(t){return Xd(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Zd(t)||Yd()}function Hd(t,e){return Xd(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||Zd(t,e)||Yd()}function Yd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xd(t){if(Array.isArray(t))return t}function Zd(t,e){if(t){if("string"==typeof t)return Kd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kd(t,e):void 0}}function Kd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Jd="\r\n\r\n";function Qd(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);var e,n={},r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Zd(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(e=r.n()).done;){var i=Hd(e.value,2),o=i[0],a=i[1];n[o.toLowerCase()]=a}}catch(t){r.e(t)}finally{r.f()}return n}function $d(t){return Qd(t.split("\r\n").map((function(t){var e=t.split(":").map((function(t){return t.trim()}));return e[0]=e[0].toLowerCase(),e})))}function tg(t){var e,n,r;if(t){var i=Hd(t.match(/bytes (\d+)-(\d+)\/(\d+)/),4);e=i[1],n=i[2],r=i[3],e=parseInt(e,10),n=parseInt(n,10),r=parseInt(r,10)}return{start:e,end:n,total:r}}function eg(t,e){for(var n=null,r=new TextDecoder("ascii"),i=[],o="--".concat(e),a="".concat(o,"--"),s=0;s<10;++s)r.decode(new Uint8Array(t,s,o.length))===o&&(n=s);if(null===n)throw new Error("Could not find initial boundary");for(;n<t.byteLength;){var l=r.decode(new Uint8Array(t,n,Math.min(o.length+1024,t.byteLength-n)));if(0===l.length||l.startsWith(a))break;if(!l.startsWith(o))throw new Error("Part does not start with boundary");var u=l.substr(o.length+2);if(0===u.length)break;var c=u.indexOf(Jd),h=$d(u.substr(0,c)),p=tg(h["content-range"]),f=p.start,d=p.end,g=p.total,y=n+o.length+c+4,m=parseInt(d,10)+1-parseInt(f,10);i.push({headers:h,data:t.slice(y,y+m),offset:f,length:m,fileSize:g}),n=y+m+4}return i}function ng(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function rg(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ng(o,r,i,a,s,"next",t)}function s(t){ng(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ig(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var og=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,i,o;return e=t,(n=[{key:"fetch",value:(o=rg(regeneratorRuntime.mark((function t(e){var n,r=this,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:void 0,t.abrupt("return",Promise.all(e.map((function(t){return r.fetchSlice(t,n)}))));case 2:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"fetchSlice",value:(i=rg(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("fetching of slice ".concat(e," not possible, not implemented"));case 1:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(r=rg(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}])&&ig(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ag=r(875);function sg(t){return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ug(t,e,n){return e&&lg(t.prototype,e),n&&lg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hg(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mg(t,e)}function pg(t){var e=yg();return function(){var n,r=vg(t);if(e){var i=vg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===sg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fg(t)}(this,n)}}function fg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dg(t){var e="function"==typeof Map?new Map:void 0;return(dg=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return gg(t,arguments,vg(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),mg(r,t)})(t)}function gg(t,e,n){return(gg=yg()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&mg(i,n.prototype),i}).apply(null,arguments)}function yg(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function mg(t,e){return(mg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vg(t){return(vg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wg(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function bg(t){return xg.apply(this,arguments)}function xg(){return(xg=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){wg(o,r,i,a,s,"next",t)}function s(t){wg(o,r,i,a,s,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _g(t,e){var n=Array.isArray(t)?t:Array.from(t),r=Array.isArray(e)?e:Array.from(e);return n.map((function(t,e){return[t,r[e]]}))}var Eg=function(t){hg(n,t);var e=pg(n);function n(t){var r;return cg(this,n),r=e.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(fg(r),n),r.name="AbortError",r}return ug(n)}(dg(Error)),Sg=function(t){hg(n,t);var e=pg(n);function n(t,r){var i;return cg(this,n),(i=e.call(this,r)).errors=t,i.message=r,i.name="AggregateError",i}return ug(n)}(dg(Error));function Cg(t){return(Cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||Ag(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ig(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ag(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ag(t,e){if(t){if("string"==typeof t)return Pg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pg(t,e):void 0}}function Pg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kg(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Og(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kg(o,r,i,a,s,"next",t)}function s(t){kg(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Mg(t,e){return(Mg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ng(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lg(t);if(e){var i=Lg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Cg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Lg(t){return(Lg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fg(t,e,n){return e&&Dg(t.prototype,e),n&&Dg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var jg=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Rg(this,t),this.offset=e,this.length=n,this.data=r}return Fg(t,[{key:"top",get:function(){return this.offset+this.length}}]),t}(),zg=Fg((function t(e,n,r){Rg(this,t),this.offset=e,this.length=n,this.blockIds=r})),Gg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mg(t,e)}(r,t);var e,n=Ng(r);function r(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.blockSize,a=void 0===o?65536:o,s=i.cacheSize,l=void 0===s?100:s;return Rg(this,r),(e=n.call(this)).source=t,e.blockSize=a,e.blockCache=new ag({max:l}),e.blockRequests=new Map,e.blockIdsToFetch=new Set,e}return Fg(r,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:(e=Og(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,l,u,c,h,p,f,d,g,y,m,v,w,b,x,_,E,S,C,T,I,A,P,k,O,M,N,L,R,D,F,j,z,G;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new Map,i=new Map,o=new Set,a=Ig(e);try{for(a.s();!(s=a.n()).done;)for(l=s.value,u=l.offset,c=l.length,h=u+c,null!==(p=this.fileSize)&&(h=Math.min(h,p)),f=Math.floor(u/this.blockSize)*this.blockSize,d=f;d<h;d+=this.blockSize)g=Math.floor(d/this.blockSize),this.blockCache.has(g)?r.set(g,this.blockCache.get(g)):this.blockRequests.has(g)?i.set(g,this.blockRequests.get(g)):(this.blockIdsToFetch.has(g)||this.blockIdsToFetch.add(g),o.add(g))}catch(t){a.e(t)}finally{a.f()}return t.next=7,bg();case 7:this.fetchBlocks(n),y=Ig(o),t.prev=9,y.s();case 11:if((m=y.n()).done){t.next=26;break}if(v=m.value,w=this.blockRequests.get(v),b=this.blockCache.get(v),!w){t.next=19;break}i.set(v,w),t.next=24;break;case 19:if(!b){t.next=23;break}r.set(v,b),t.next=24;break;case 23:throw new Error("Block ".concat(v," is not in the block requests"));case 24:t.next=11;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(9),y.e(t.t0);case 31:return t.prev=31,y.f(),t.finish(31);case 34:return t.next=36,Promise.allSettled(Array.from(i.values()));case 36:if(!(x=t.sent).some((function(t){return"rejected"===t.status}))){t.next=65;break}_=new Set,E=Ig(_g(i.keys(),x));try{for(E.s();!(S=E.n()).done;)C=Tg(S.value,2),T=C[0],I=C[1],A=I.rejected,P=I.reason,A&&"AbortError"===P.name&&P.signal!==n&&(this.blockIdsToFetch.add(T),_.add(T))}catch(t){E.e(t)}finally{E.f()}if(!(this.blockIdsToFetch.length>0)){t.next=65;break}this.fetchBlocks(n),k=Ig(_),t.prev=44,k.s();case 46:if((O=k.n()).done){t.next=54;break}if(M=O.value,N=this.blockRequests.get(M)){t.next=51;break}throw new Error("Block ".concat(M," is not in the block requests"));case 51:i.set(M,N);case 52:t.next=46;break;case 54:t.next=59;break;case 56:t.prev=56,t.t1=t.catch(44),k.e(t.t1);case 59:return t.prev=59,k.f(),t.finish(59);case 62:return t.next=64,Promise.allSettled(Array.from(i.values()));case 64:x=t.sent;case 65:if(!x.some((function(t){return"rejected"===t.status}))){t.next=69;break}if(!n||!n.aborted){t.next=68;break}throw new Eg("Request was aborted");case 68:throw new Sg(x.filter((function(t){return"rejected"===t.status})).map((function(t){return t.reason})),"Request failed");case 69:L=x.map((function(t){return t.value})),R=new Map(_g(Array.from(i.keys()),L)),D=Ig(r);try{for(D.s();!(F=D.n()).done;)j=Tg(F.value,2),z=j[0],G=j[1],R.set(z,G)}catch(t){D.e(t)}finally{D.f()}return t.abrupt("return",this.readSliceData(e,R));case 74:case"end":return t.stop()}}),t,this,[[9,28,31,34],[44,56,59,62]])}))),function(t,n){return e.apply(this,arguments)})},{key:"fetchBlocks",value:function(t){var e=this;this.blockIdsToFetch.size>0&&function(){for(var n=e.groupBlocks(e.blockIdsToFetch),r=e.source.fetch(n,t),i=function(i){var o,a=Ig(n[i].blockIds);try{var s=function(){var n=o.value,a=Og(regeneratorRuntime.mark((function o(){var a,s,l,u,c,h;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r;case 3:return o.t0=i,a=o.sent[o.t0],s=n*e.blockSize,l=s-a.offset,u=Math.min(l+e.blockSize,a.data.byteLength),c=a.data.slice(l,u),h=new jg(s,c.byteLength,c),e.blockCache.set(n,h),o.abrupt("return",h);case 14:throw o.prev=14,o.t1=o.catch(0),"AbortError"===o.t1.name&&(o.t1.signal=t),o.t1;case 18:return o.prev=18,e.blockRequests.delete(n),o.finish(18);case 21:case"end":return o.stop()}}),o,null,[[0,14,18,21]])})))();e.blockRequests.set(n,a)};for(a.s();!(o=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}},o=0;o<n.length;++o)i(o);e.blockIdsToFetch.clear()}()}},{key:"groupBlocks",value:function(t){var e=Array.from(t).sort((function(t,e){return t-e}));if(0===e.length)return[];var n,r=[],i=null,o=[],a=Ig(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;null===i||i+1===s?(r.push(s),i=s):(o.push(new zg(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],i=s)}}catch(t){a.e(t)}finally{a.f()}return o.push(new zg(r[0]*this.blockSize,r.length*this.blockSize,r)),o}},{key:"readSliceData",value:function(t,e){var n=this;return t.map((function(t){for(var r=t.offset+t.length,i=Math.floor(t.offset/n.blockSize),o=Math.floor((t.offset+t.length)/n.blockSize),a=new ArrayBuffer(t.length),s=new Uint8Array(a),l=i;l<=o;++l){var u,c=e.get(l),h=c.offset-t.offset,p=0,f=0;h<0?p=-h:h>0&&(f=h),u=c.top-r<0?c.length-p:r-c.offset-p;var d=new Uint8Array(c.data,p,u);s.set(d,f)}return a}))}}]),r}(og);function Bg(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ug(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Bg(o,r,i,a,s,"next",t)}function s(t){Bg(o,r,i,a,s,"throw",t)}a(void 0)}))}}function qg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vg(t,e,n){return e&&Wg(t.prototype,e),n&&Wg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Hg=function(){function t(){qg(this,t)}var e;return Vg(t,[{key:"ok",get:function(){return this.status>=200&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(t){throw new Error("not implemented")}},{key:"getData",value:(e=Ug(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("not implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),t}(),Yg=function(){function t(e){qg(this,t),this.url=e}var e;return Vg(t,[{key:"request",value:(e=Ug(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw(e=n.length>0&&void 0!==n[0]?n[0]:{}).headers,e.credentials,e.signal,new Error("request is not implemented");case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),t}();function Xg(t){return(Xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zg(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Kg(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Zg(o,r,i,a,s,"next",t)}function s(t){Zg(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Jg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $g(t,e,n){return e&&Qg(t.prototype,e),n&&Qg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ty(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ey(t,e)}function ey(t,e){return(ey=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ny(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ry(t);if(e){var i=ry(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Xg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function ry(t){return(ry=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iy=function(t){ty(r,t);var e,n=ny(r);function r(t){var e;return Jg(this,r),(e=n.call(this)).response=t,e}return $g(r,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(t){return this.response.headers.get(t)}},{key:"getData",value:(e=Kg(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.response.arrayBuffer){t.next=6;break}return t.next=3,this.response.arrayBuffer();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.response.buffer();case 8:t.t0=t.sent.buffer;case 9:return e=t.t0,t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(Hg),oy=function(t){ty(r,t);var e,n=ny(r);function r(t,e){var i;return Jg(this,r),(i=n.call(this,t)).credentials=e,i}return $g(r,[{key:"request",value:(e=Kg(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=a.length>0&&void 0!==a[0]?a[0]:{}).headers,r=e.credentials,i=e.signal,t.next=3,fetch(this.url,{headers:n,credentials:r,signal:i});case 3:return o=t.sent,t.abrupt("return",new iy(o));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(Yg);function ay(t){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ly(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ly(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ly(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uy(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function cy(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){uy(o,r,i,a,s,"next",t)}function s(t){uy(o,r,i,a,s,"throw",t)}a(void 0)}))}}function hy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function py(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fy(t,e,n){return e&&py(t.prototype,e),n&&py(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dy(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gy(t,e)}function gy(t,e){return(gy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=my(t);if(e){var i=my(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ay(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function my(t){return(my=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vy=function(t){dy(r,t);var e,n=yy(r);function r(t,e){var i;return hy(this,r),(i=n.call(this)).xhr=t,i.data=e,i}return fy(r,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(t){return this.xhr.getResponseHeader(t)}},{key:"getData",value:(e=cy(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.data);case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(Hg),wy=function(t){dy(r,t);var e,n=yy(r);function r(){return hy(this,r),n.apply(this,arguments)}return fy(r,[{key:"constructRequest",value:function(t,e){var n=this;return new Promise((function(r,i){var o=new XMLHttpRequest;o.open("GET",n.url),o.responseType="arraybuffer";for(var a=0,s=Object.entries(t);a<s.length;a++){var l=sy(s[a],2),u=l[0],c=l[1];o.setRequestHeader(u,c)}o.onload=function(){var t=o.response;r(new vy(o,t))},o.onerror=i,o.onabort=function(){return i(new Eg("Request aborted"))},o.send(),e&&(e.aborted&&o.abort(),e.addEventListener("abort",(function(){return o.abort()})))}))}},{key:"request",value:(e=cy(regeneratorRuntime.mark((function t(){var e,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=o.length>0&&void 0!==o[0]?o[0]:{}).headers,r=e.signal,t.next=3,this.constructRequest(n,r);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(Yg),by=r(752),xy=r(640),_y=r(630);function Ey(t){return(Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Cy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sy(Object(n),!0).forEach((function(e){Ty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iy(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ay(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Iy(o,r,i,a,s,"next",t)}function s(t){Iy(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Py(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ky(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oy(t,e,n){return e&&ky(t.prototype,e),n&&ky(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function My(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ny(t,e)}function Ny(t,e){return(Ny=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ly(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ry(t);if(e){var i=Ry(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ey(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Ry(t){return(Ry=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dy=function(t){My(r,t);var e,n=Ly(r);function r(t,e){var i;return Py(this,r),(i=n.call(this)).response=t,i.dataPromise=e,i}return Oy(r,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(t){return this.response.headers[t]}},{key:"getData",value:(e=Ay(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dataPromise;case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(Hg),Fy=function(t){My(r,t);var e,n=Ly(r);function r(t){var e;return Py(this,r),(e=n.call(this,t)).parsedUrl=_y.parse(e.url),e.httpApi="http:"===e.parsedUrl.protocol?by:xy,e}return Oy(r,[{key:"constructRequest",value:function(t,e){var n=this;return new Promise((function(r,i){var o=n.httpApi.get(Cy(Cy({},n.parsedUrl),{},{headers:t}),(function(t){var e=new Promise((function(e){var n=[];t.on("data",(function(t){n.push(t)})),t.on("end",(function(){var t=Buffer.concat(n).buffer;e(t)})),t.on("error",i)}));r(new Dy(t,e))}));o.on("error",i),e&&(e.aborted&&o.destroy(new Eg("Request aborted")),e.addEventListener("abort",(function(){return o.destroy(new Eg("Request aborted"))})))}))}},{key:"request",value:(e=Ay(regeneratorRuntime.mark((function t(){var e,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=o.length>0&&void 0!==o[0]?o[0]:{}).headers,r=e.signal,t.next=3,this.constructRequest(n,r);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(Yg);function jy(t){return(jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zy=["headers","credentials","maxRanges","allowFullFile"],Gy=["headers","maxRanges","allowFullFile"],By=["headers","maxRanges","allowFullFile"],Uy=["forceXHR"];function qy(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wy(Object(n),!0).forEach((function(e){Hy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yy(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Xy(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Yy(o,r,i,a,s,"next",t)}function s(t){Yy(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Zy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ky(t,e){return(Ky=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qy(t);if(e){var i=Qy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===jy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Qy(t){return(Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ky(t,e)}(s,t);var e,n,r,i,o,a=Jy(s);function s(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(i=a.call(this)).client=t,i.headers=e,i.maxRanges=n,i.allowFullFile=r,i._fileSize=null,i}return e=s,(n=[{key:"fetch",value:(o=Xy(regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.maxRanges>=e.length)){t.next=4;break}return t.abrupt("return",this.fetchSlices(e,n));case 4:this.maxRanges>0&&e.length;case 5:return t.abrupt("return",Promise.all(e.map((function(t){return r.fetchSlice(t,n)}))));case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"fetchSlices",value:(i=Xy(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,l,u,c,h,p,f,d,g=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.request({headers:Vy(Vy({},this.headers),{},{Range:"bytes=".concat(e.map((function(t){var e=t.offset,n=t.length;return"".concat(e,"-").concat(e+n)})).join(","))}),signal:n});case 2:if((r=t.sent).ok){t.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==r.status){t.next=32;break}if(y=void 0,y=Vd(r.getHeader("content-type").split(";").map((function(t){return t.trim()}))),i={type:y[0],params:Qd(y.slice(1).map((function(t){return t.split("=")})))},o=i.params,"multipart/byteranges"!==i.type){t.next=18;break}return t.t0=eg,t.next=13,r.getData();case 13:return t.t1=t.sent,t.t2=o.boundary,a=(0,t.t0)(t.t1,t.t2),this._fileSize=a[0].fileSize||null,t.abrupt("return",a);case 18:return t.next=20,r.getData();case 20:if(s=t.sent,l=tg(r.getHeader("content-range")),u=l.start,c=l.end,h=l.total,this._fileSize=h||null,p=[{data:s,offset:u,length:c-u}],!(e.length>1)){t.next=29;break}return t.next=27,Promise.all(e.slice(1).map((function(t){return g.fetchSlice(t,n)})));case 27:return f=t.sent,t.abrupt("return",p.concat(f));case 29:return t.abrupt("return",p);case 32:if(this.allowFullFile){t.next=34;break}throw new Error("Server responded with full file");case 34:return t.next=36,r.getData();case 36:return d=t.sent,this._fileSize=d.byteLength,t.abrupt("return",[{data:d,offset:0,length:d.byteLength}]);case 39:case"end":return t.stop()}var y}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"fetchSlice",value:(r=Xy(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.offset,i=e.length,t.next=3,this.client.request({headers:Vy(Vy({},this.headers),{},{Range:"bytes=".concat(r,"-").concat(r+i)}),signal:n});case 3:if((o=t.sent).ok){t.next=8;break}throw new Error("Error fetching data.");case 8:if(206!==o.status){t.next=17;break}return t.next=11,o.getData();case 11:return a=t.sent,s=tg(o.getHeader("content-range")),l=s.total,this._fileSize=l||null,t.abrupt("return",{data:a,offset:r,length:i});case 17:if(this.allowFullFile){t.next=19;break}throw new Error("Server responded with full file");case 19:return t.next=21,o.getData();case 21:return u=t.sent,this._fileSize=u.byteLength,t.abrupt("return",{data:u,offset:0,length:u.byteLength});case 24:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"fileSize",get:function(){return this._fileSize}}])&&Zy(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(og);function tm(t,e){var n=e.blockSize,r=e.cacheSize;return null===n?t:new Gg(t,n,r)}function em(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.forceXHR,r=void 0!==n&&n,i=qy(e,Uy);return"function"!=typeof fetch||r?"undefined"!=typeof XMLHttpRequest?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=void 0===n?{}:n,i=e.maxRanges,o=void 0===i?0:i,a=e.allowFullFile,s=void 0!==a&&a,l=qy(e,Gy),u=new wy(t);return tm(new $y(u,r,o,s),l)}(t,i):function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=void 0===n?{}:n,i=e.maxRanges,o=void 0===i?0:i,a=e.allowFullFile,s=void 0!==a&&a,l=qy(e,By),u=new Fy(t);return tm(new $y(u,r,o,s),l)}(t,i):function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=void 0===n?{}:n,i=e.credentials,o=e.maxRanges,a=void 0===o?0:o,s=e.allowFullFile,l=void 0!==s&&s,u=qy(e,zy),c=new oy(t,i);return tm(new $y(c,r,a,l),u)}(t,i)}function nm(t){return(nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function im(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rm(Object(n),!0).forEach((function(e){om(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function om(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function am(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return sm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sm(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lm(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function um(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){lm(o,r,i,a,s,"next",t)}function s(t){lm(o,r,i,a,s,"throw",t)}a(void 0)}))}}function cm(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gm(t,e)}function hm(t){var e=dm();return function(){var n,r=ym(t);if(e){var i=ym(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===nm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function pm(t){var e="function"==typeof Map?new Map:void 0;return(pm=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return fm(t,arguments,ym(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),gm(r,t)})(t)}function fm(t,e,n){return(fm=dm()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&gm(i,n.prototype),i}).apply(null,arguments)}function dm(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function gm(t,e){return(gm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ym(t){return(ym=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vm(t,e,n){return e&&mm(t.prototype,e),n&&mm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bm(t){switch(t){case yd.sf.BYTE:case yd.sf.ASCII:case yd.sf.SBYTE:case yd.sf.UNDEFINED:return 1;case yd.sf.SHORT:case yd.sf.SSHORT:return 2;case yd.sf.LONG:case yd.sf.SLONG:case yd.sf.FLOAT:case yd.sf.IFD:return 4;case yd.sf.RATIONAL:case yd.sf.SRATIONAL:case yd.sf.DOUBLE:case yd.sf.LONG8:case yd.sf.SLONG8:case yd.sf.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(t))}}function xm(t){var e=t.GeoKeyDirectory;if(!e)return null;for(var n={},r=4;r<=4*e[3];r+=4){var i=yd.P1[e[r]],o=e[r+1]?yd.L[e[r+1]]:null,a=e[r+2],s=e[r+3],l=null;if(o){if(null==(l=t[o]))throw new Error("Could not get value of geoKey '".concat(i,"'."));"string"==typeof l?l=l.substring(s,s+a-1):l.subarray&&(l=l.subarray(s,s+a),1===a&&(l=l[0]))}else l=s;n[i]=l}return n}function _m(t,e,n,r){var i=null,o=null,a=bm(e);switch(e){case yd.sf.BYTE:case yd.sf.ASCII:case yd.sf.UNDEFINED:i=new Uint8Array(n),o=t.readUint8;break;case yd.sf.SBYTE:i=new Int8Array(n),o=t.readInt8;break;case yd.sf.SHORT:i=new Uint16Array(n),o=t.readUint16;break;case yd.sf.SSHORT:i=new Int16Array(n),o=t.readInt16;break;case yd.sf.LONG:case yd.sf.IFD:i=new Uint32Array(n),o=t.readUint32;break;case yd.sf.SLONG:i=new Int32Array(n),o=t.readInt32;break;case yd.sf.LONG8:case yd.sf.IFD8:i=new Array(n),o=t.readUint64;break;case yd.sf.SLONG8:i=new Array(n),o=t.readInt64;break;case yd.sf.RATIONAL:i=new Uint32Array(2*n),o=t.readUint32;break;case yd.sf.SRATIONAL:i=new Int32Array(2*n),o=t.readInt32;break;case yd.sf.FLOAT:i=new Float32Array(n),o=t.readFloat32;break;case yd.sf.DOUBLE:i=new Float64Array(n),o=t.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(e))}if(e!==yd.sf.RATIONAL&&e!==yd.sf.SRATIONAL)for(var s=0;s<n;++s)i[s]=o.call(t,r+s*a);else for(var l=0;l<n;l+=2)i[l]=o.call(t,r+l*a),i[l+1]=o.call(t,r+(l*a+4));return e===yd.sf.ASCII?new TextDecoder("utf-8").decode(i):i}var Em=vm((function t(e,n,r){wm(this,t),this.fileDirectory=e,this.geoKeyDirectory=n,this.nextIFDByteOffset=r})),Sm=function(t){cm(n,t);var e=hm(n);function n(t){var r;return wm(this,n),(r=e.call(this,"No image at index ".concat(t))).index=t,r}return vm(n)}(pm(Error)),Cm=function(){function t(){wm(this,t)}var e;return vm(t,[{key:"readRasters",value:(e=um(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u,c,h,p,f,d,g,y,m,v,w,b,x,_,E,S,C,T,I,A,P,k,O,M,N,L,R,D,F,j,z,G=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=G.length>0&&void 0!==G[0]?G[0]:{}).window,r=e.width,i=e.height,o=e.resX,a=e.resY,s=e.bbox,t.next=5,this.getImage();case 5:return l=t.sent,u=l,t.next=9,this.getImageCount();case 9:if(c=t.sent,h=l.getBoundingBox(),!n||!s){t.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!r&&!i){t.next=24;break}if(n&&(p=l.getOrigin(),f=am(p,2),d=f[0],g=f[1],y=l.getResolution(),m=am(y,2),v=m[0],w=m[1],s=[d+n[0]*v,g+n[1]*w,d+n[2]*v,g+n[3]*w]),b=s||h,!r){t.next=20;break}if(!o){t.next=19;break}throw new Error("Both width and resX passed");case 19:o=(b[2]-b[0])/r;case 20:if(!i){t.next=24;break}if(!a){t.next=23;break}throw new Error("Both width and resY passed");case 23:a=(b[3]-b[1])/i;case 24:if(!o&&!a){t.next=48;break}x=[],_=0;case 27:if(!(_<c)){t.next=36;break}return t.next=30,this.getImage(_);case 30:E=t.sent,S=E.fileDirectory,C=S.SubfileType,T=S.NewSubfileType,(0===_||2===C||1&T)&&x.push(E);case 33:++_,t.next=27;break;case 36:x.sort((function(t,e){return t.getWidth()-e.getWidth()})),I=0;case 38:if(!(I<x.length)){t.next=48;break}if(A=x[I],P=(h[2]-h[0])/A.getWidth(),k=(h[3]-h[1])/A.getHeight(),u=A,!(o&&o>P||a&&a>k)){t.next=45;break}return t.abrupt("break",48);case 45:++I,t.next=38;break;case 48:return O=n,s&&(M=l.getOrigin(),N=am(M,2),L=N[0],R=N[1],D=u.getResolution(l),F=am(D,2),j=F[0],z=F[1],O=[Math.round((s[0]-L)/j),Math.round((s[1]-R)/z),Math.round((s[2]-L)/j),Math.round((s[3]-R)/z)],O=[Math.min(O[0],O[2]),Math.min(O[1],O[3]),Math.max(O[0],O[2]),Math.max(O[1],O[3])]),t.abrupt("return",u.readRasters(im(im({},e),{},{window:O})));case 51:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Tm=function(t){cm(u,t);var e,n,r,i,o,a,s,l=hm(u);function u(t,e,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return wm(this,u),(i=l.call(this)).source=t,i.littleEndian=e,i.bigTiff=n,i.firstIFDOffset=r,i.cache=o.cache||!1,i.ifdRequests=[],i.ghostValues=null,i}return vm(u,[{key:"getSlice",value:(s=um(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.bigTiff?4048:1024,t.t0=Wd,t.next=4,this.source.fetch([{offset:e,length:void 0!==n?n:r}]);case 4:return t.t1=t.sent[0],t.t2=e,t.t3=this.littleEndian,t.t4=this.bigTiff,t.abrupt("return",new t.t0(t.t1,t.t2,t.t3,t.t4));case 9:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(a=um(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,l,u,c,h,p,f,d,g,y,m,v,w,b,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.bigTiff?20:12,r=this.bigTiff?8:2,t.next=4,this.getSlice(e);case 4:if(i=t.sent,o=this.bigTiff?i.readUint64(e):i.readUint16(e),a=o*n+(this.bigTiff?16:6),i.covers(e,a)){t.next=11;break}return t.next=10,this.getSlice(e,a);case 10:i=t.sent;case 11:s={},l=e+(this.bigTiff?8:2),u=0;case 14:if(!(u<o)){t.next=41;break}if(c=i.readUint16(l),h=i.readUint16(l+2),p=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4),f=void 0,d=void 0,g=bm(h),y=l+(this.bigTiff?12:8),!(g*p<=(this.bigTiff?8:4))){t.next=26;break}f=_m(i,h,p,y),t.next=36;break;case 26:if(m=i.readOffset(y),v=bm(h)*p,!i.covers(m,v)){t.next=32;break}f=_m(i,h,p,m),t.next=36;break;case 32:return t.next=34,this.getSlice(m,v);case 34:w=t.sent,f=_m(w,h,p,m);case 36:d=1===p&&-1===yd.It.indexOf(c)&&h!==yd.sf.RATIONAL&&h!==yd.sf.SRATIONAL?f[0]:f,s[yd.L[c]]=d;case 38:l+=n,++u,t.next=14;break;case 41:return b=xm(s),x=i.readOffset(e+r+n*o),t.abrupt("return",new Em(s,b,x));case 44:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"requestIFD",value:(o=um(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ifdRequests[e]){t.next=4;break}return t.abrupt("return",this.ifdRequests[e]);case 4:if(0!==e){t.next=9;break}return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),t.abrupt("return",this.ifdRequests[e]);case 9:if(this.ifdRequests[e-1]){t.next=19;break}t.prev=10,this.ifdRequests[e-1]=this.requestIFD(e-1),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(10),!(t.t0 instanceof Sm)){t.next=18;break}throw new Sm(e);case 18:throw t.t0;case 19:return this.ifdRequests[e]=um(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.ifdRequests[e-1];case 2:if(0!==(r=t.sent).nextIFDByteOffset){t.next=5;break}throw new Sm(e);case 5:return t.abrupt("return",n.parseFileDirectoryAt(r.nextIFDByteOffset));case 6:case"end":return t.stop()}}),t)})))(),t.abrupt("return",this.ifdRequests[e]);case 21:case"end":return t.stop()}}),t,this,[[10,14]])}))),function(t){return o.apply(this,arguments)})},{key:"getImage",value:(i=um(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,t.next=3,this.requestIFD(e);case 3:return n=t.sent,t.abrupt("return",new Gd(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getImageCount",value:(r=um(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0,n=!0;case 2:if(!n){t.next=18;break}return t.prev=3,t.next=6,this.requestIFD(e);case 6:++e,t.next=16;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(t.t0 instanceof Sm)){t.next=15;break}n=!1,t.next=16;break;case 15:throw t.t0;case 16:t.next=2;break;case 18:return t.abrupt("return",e);case 19:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(){return r.apply(this,arguments)})},{key:"getGhostValues",value:(n=um(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.bigTiff?16:8,!this.ghostValues){t.next=3;break}return t.abrupt("return",this.ghostValues);case 3:return r=(n="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,t.next=7,this.getSlice(e,r);case 7:if(i=t.sent,n!==_m(i,yd.sf.ASCII,n.length,e)){t.next=19;break}if(o=_m(i,yd.sf.ASCII,r,e),a=o.split("\n")[0],!((s=Number(a.split("=")[1].split(" ")[0])+a.length)>r)){t.next=16;break}return t.next=15,this.getSlice(e,s);case 15:i=t.sent;case 16:l=_m(i,yd.sf.ASCII,s,e),this.ghostValues={},l.split("\n").filter((function(t){return t.length>0})).map((function(t){return t.split("=")})).forEach((function(t){var e=am(t,2),n=e[0],r=e[1];u.ghostValues[n]=r}));case 19:return t.abrupt("return",this.ghostValues);case 20:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(e=um(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,l,c,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetch([{offset:0,length:1024}],r);case 2:if(i=t.sent[0],o=new Ud(i),18761!==(a=o.getUint16(0,0))){t.next=9;break}s=!0,t.next=14;break;case 9:if(19789!==a){t.next=13;break}s=!1,t.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(l=o.getUint16(2,s))){t.next=19;break}c=!1,t.next=27;break;case 19:if(43!==l){t.next=26;break}if(c=!0,8===o.getUint16(4,s)){t.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:t.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return h=c?o.getUint64(8,s):o.getUint32(4,s),t.abrupt("return",new u(e,s,c,h,n));case 29:case"end":return t.stop()}}),t)}))),function(t,n,r){return e.apply(this,arguments)})}]),u}(Cm),Im=function(t){cm(o,t);var e,n,r,i=hm(o);function o(t,e){var n;return wm(this,o),(n=i.call(this)).mainFile=t,n.overviewFiles=e,n.imageFiles=[t].concat(e),n.fileDirectoriesPerFile=null,n.fileDirectoriesPerFileParsing=null,n.imageCount=null,n}return vm(o,[{key:"parseFileDirectoriesPerFile",value:(r=um(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((function(t){return t.parseFileDirectoryAt(t.firstIFDOffset)}))),t.next=3,Promise.all(e);case 3:return this.fileDirectoriesPerFile=t.sent,t.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getImage",value:(n=um(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:0,t.next=3,this.getImageCount();case 3:return t.next=5,this.parseFileDirectoriesPerFile();case 5:n=0,r=0,i=0;case 8:if(!(i<this.imageFiles.length)){t.next=26;break}o=this.imageFiles[i],a=0;case 11:if(!(a<this.imageCounts[i])){t.next=22;break}if(e!==n){t.next=17;break}return t.next=15,o.requestIFD(r);case 15:return s=t.sent,t.abrupt("return",new Gd(s.fileDirectory,s.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source));case 17:n++,r++;case 19:a++,t.next=11;break;case 22:r=0;case 23:i++,t.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getImageCount",value:(e=um(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this.imageCount){t.next=2;break}return t.abrupt("return",this.imageCount);case 2:return e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((function(t){return t.getImageCount()}))),t.next=5,Promise.all(e);case 5:return this.imageCounts=t.sent,this.imageCount=this.imageCounts.reduce((function(t,e){return t+e}),0),t.abrupt("return",this.imageCount);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),o}(Cm);function Am(){return(Am=um(regeneratorRuntime.mark((function t(e){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2?i[2]:void 0,t.abrupt("return",Tm.fromSource(em(e,n),r));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pm(){return(Pm=um(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:[],r=s.length>2&&void 0!==s[2]?s[2]:{},i=s.length>3?s[3]:void 0,t.next=5,Tm.fromSource(em(e,r),i);case 5:return o=t.sent,t.next=8,Promise.all(n.map((function(t){return Tm.fromSource(em(t,r))})));case 8:return a=t.sent,t.abrupt("return",new Im(o,a));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function km(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Om(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mm,Nm="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,Lm=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm,i=arguments.length>1?arguments[1]:void 0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.workers=null,this._awaitingDecoder=null,this.size=n,this.messageId=0,n&&(this._awaitingDecoder=i?Promise.resolve(i):new Promise((function(t){r.e(231).then(r.bind(r,231)).then((function(e){t(e.create)}))})),this._awaitingDecoder.then((function(t){e._awaitingDecoder=null,e.workers=[];for(var r=0;r<n;r++)e.workers.push({worker:t(),idle:!0})})))}var e,n,i,o;return e=t,(n=[{key:"decode",value:(i=regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._awaitingDecoder){t.next=3;break}return t.next=3,this._awaitingDecoder;case 3:return t.abrupt("return",0===this.size?Td(e).then((function(t){return t.decode(e,n)})):new Promise((function(t){var i=r.workers.find((function(t){return t.idle}))||r.workers[Math.floor(Math.random()*r.size)];i.idle=!1;var o=r.messageId++;i.worker.addEventListener("message",(function e(n){n.data.id===o&&(i.idle=!0,t(n.data.decoded),i.worker.removeEventListener("message",e))})),i.worker.postMessage({fileDirectory:e,buffer:n,id:o},[n])})));case 4:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){km(o,n,r,a,s,"next",t)}function s(t){km(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t,e){return o.apply(this,arguments)})},{key:"destroy",value:function(){this.workers&&(this.workers.forEach((function(t){t.worker.terminate()})),this.workers=null)}}])&&Om(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Rm=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Dm(t){try{return t.getBoundingBox()}catch(n){var e=t.fileDirectory;return[0,0,e.ImageWidth,e.ImageLength]}}function Fm(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.fileDirectory.ImageLength]}}function jm(t,e){try{return t.getResolution(e)[0]}catch(n){return e.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth}}function zm(t){var e,n,r,i=t.geoKeys;return i?i.ProjectedCSTypeGeoKey?((n=cr(e="EPSG:"+i.ProjectedCSTypeGeoKey))||(r=It(i.ProjLinearUnitsGeoKey))&&(n=new Je({code:e,units:r})),n):i.GeographicTypeGeoKey?((n=cr(e="EPSG:"+i.GeographicTypeGeoKey))||(r=It(i.GeogAngularUnitsGeoKey))&&(n=new Je({code:e,units:r})),n):null:null}function Gm(t){return t.getImageCount().then((function(e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t.getImage(r);return Promise.all(n)}))}function Bm(t,e){return(t.overviews?function(t){return Pm.apply(this,arguments)}(t.url,t.overviews,e):function(t){return Am.apply(this,arguments)}(t.url,e)).then(Gm)}function Um(t,e,n,r,i){if(Array.isArray(t)){var o=t.length;if(!Array.isArray(e)||o!=e.length){var a=new Error(r);throw i(a),a}for(var s=0;s<o;++s)Um(t[s],e[s],n,r,i)}else if(Math.abs(t-e)>n*t)throw new Error(r)}function qm(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function Wm(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}var Vm=function(t){function e(e){var n=t.call(this,{state:ta,tileGrid:null,projection:null,opaque:e.opaque,transition:e.transition,interpolate:!1!==e.interpolate,wrapX:e.wrapX})||this;n.Qu=e.sources;var r=n.Qu.length;n.tc=e.sourceOptions,n.ic=new Array(r),n.rc=new Array(r),n.ec,n.oc,n.sc,n.ac=!1!==e.normalize,n.uc=!1,n.W=null,n.cc=e.convertToRGB?"readRGB":"readRasters",n.setKey(n.Qu.map((function(t){return t.url})).join(","));for(var i=n,o=new Array(r),a=0;a<r;++a)o[a]=Bm(n.Qu[a],n.tc);return Promise.all(o).then((function(t){i.hc(t)})).catch((function(t){console.error(t),i.W=t,i.setState(na)})),n}return Rm(e,t),e.prototype.getError=function(){return this.W},e.prototype.hc=function(t){for(var e,n,r,i,o=new Array(t.length),a=new Array(t.length),s=new Array(t.length),l=0,u=t.length,c=function(u){var c=t[u],p=c.length,f=void 0,d=void 0,g=new Array(p),y=new Array(p);a[u]=new Array(p),s[u]=new Array(p);for(var m=0;m<p;++m){var v=c[m],w=v.getGDALNoData();s[u][m]=v.getGDALMetadata(0),a[u][m]=null===w?NaN:w;var b=h.Qu[u].bands;o[u]=b?b.length:v.getSamplesPerPixel();var x=p-(m+1);f||(f=Dm(v)),d||(d=Fm(v)),y[x]=jm(v,c[0]),g[x]=[v.getTileWidth(),v.getTileHeight()]}if(e?Ge(e,f,e):e=f,n){var _="Origin mismatch for source ".concat(u,", got [").concat(d,"] but expected [").concat(n,"]");Um(n,d,0,_,h.viewRejector)}else n=d;if(i){i.length-l>y.length&&(l=i.length-y.length);var E=i[i.length-1]/y[y.length-1];h.rc[u]=E;var S=y.map((function(t){return t*E}));_="Resolution mismatch for source ".concat(u,", got [").concat(S,"] but expected [").concat(i,"]"),Um(i.slice(l,i.length),S,.02,_,h.viewRejector)}else i=y,h.rc[u]=1;r?Um(r.slice(l,r.length),g,0,"Tile size mismatch for source ".concat(u),h.viewRejector):r=g,h.ic[u]=c.reverse()},h=this,p=0;p<u;++p)c(p);for(var f=0,d=this.ic.length;f<d;++f)for(var g=this.ic[f];g.length<i.length;)g.unshift(void 0);if(!this.getProjection()){var y=t[0];for(f=y.length-1;f>=0;--f){var m=zm(y[f]);if(m){this.projection=m;break}}}this.ec=o,this.oc=a,this.sc=s;t:for(p=0;p<u;++p){if(void 0!==this.Qu[p].nodata){this.uc=!0;break}var v=a[p],w=this.Qu[p].bands;if(w){for(f=0;f<w.length;++f)if(!isNaN(v[w[f]-1])){this.uc=!0;break t}}else for(var b=0;b<v.length;++b)if(!isNaN(v[b])){this.uc=!0;break t}}var x=this.uc?1:0;this.bandCount=o.reduce((function(t,e){return t+e}),0)+x;var _=new fc({extent:e,minZoom:l,origin:n,resolutions:i,tileSizes:r});this.tileGrid=_,this.setLoader(this.fc.bind(this)),this.setState(ea),this.viewResolver({projection:this.projection,resolutions:i,center:Tr(De(e),this.projection),extent:Ar(e,this.projection),zoom:0})},e.prototype.fc=function(t,e,n){for(var r=Bs(this.tileGrid.getTileSize(t)),i=this.ic.length,o=new Array(i),a=this.uc,s=this.bandCount,l=this.ec,u=this.oc,c=this.Qu,h=function(i){var a=c[i],s=p.rc[i],l=[Math.round(e*(r[0]*s)),Math.round(n*(r[1]*s)),Math.round((e+1)*(r[0]*s)),Math.round((n+1)*(r[1]*s))],h=p.ic[i][t],f=void 0;a.bands&&(f=a.bands.map((function(t){return t-1})));var d;d=isNaN(a.nodata)?f?f.map((function(t){return u[i][t]})):u[i]:a.nodata,o[i]=h[p.cc]({window:l,width:r[0],height:r[1],samples:f,fillValue:d,pool:(Mm||(Mm=new Lm),Mm),interleave:!1})},p=this,f=0;f<i;++f)h(f);var d=r[0]*r[1],g=d*s,y=this.ac,m=this.sc;return Promise.all(o).then((function(t){var e;e=y?new Uint8Array(g):new Float32Array(g);for(var n=0,r=0;r<d;++r){for(var o=a,s=0;s<i;++s){var h=c[s],p=h.min,f=h.max,v=void 0,w=void 0;if(y){var b=m[s][0];void 0===p&&(p=b&&"STATISTICS_MINIMUM"in b?parseFloat(b.STATISTICS_MINIMUM):qm(t[s][0])),void 0===f&&(f=b&&"STATISTICS_MAXIMUM"in b?parseFloat(b.STATISTICS_MAXIMUM):Wm(t[s][0])),w=-p*(v=255/(f-p))}for(var x=0;x<l[s];++x){var _,E=t[s][x][r];if(_=y?Qe(v*E+w,0,255):E,a){var S=h.nodata;if(void 0===S){var C;C=h.bands?h.bands[x]-1:x,S=u[s][C]}E!==S&&(o=!1,e[n]=_)}else e[n]=_;n++}}a&&(o||(e[n]=255),n++)}return e}))},e}(Vf);Vm.prototype.getView;var Hm=Vm,Ym=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xm="default",Zm=function(t){function e(e,n,r,i,o,a,s){var l=t.call(this,n,r,i,o,a,s)||this;return l.lc=null,l.Oo=e,l}return Ym(e,t),e.prototype.getImage=function(){if(this.lc)return this.lc;var e=t.prototype.getImage.call(this);if(2==this.state){var n=this.Oo;if(e.width==n[0]&&e.height==n[1])return this.lc=e,e;var r=ho(n[0],n[1]);return r.drawImage(e,0,0),this.lc=r.canvas,r.canvas}return e},e}(bo),Km=function(t){function e(e){var n=this,r=e,i=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(i=r.interpolate);var o=r.size,a=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:Xm,s=r.tilePixelRatio||1,l=o[0],u=o[1],c=[],h=r.tileSize||vs,p=h*s;switch(a){case Xm:for(;l>p||u>p;)c.push([Math.ceil(l/p),Math.ceil(u/p)]),p+=p;break;case"truncated":for(var f=l,d=u;f>p||d>p;)c.push([Math.ceil(f/p),Math.ceil(d/p)]),f>>=1,d>>=1;break;default:yt(!1,53)}c.push([1,1]),c.reverse();for(var g=[s],y=[0],m=1,v=c.length;m<v;m++)g.push(s<<m),y.push(c[m-1][0]*c[m-1][1]+y[m-1]);g.reverse();var w=new fc({tileSize:h,extent:r.extent||[0,-u,l,0],resolutions:g}),b=r.url;b&&-1==b.indexOf("{TileGroup}")&&-1==b.indexOf("{tileIndex}")&&(b+="{TileGroup}/{z}-{x}-{y}.jpg");var x=Cc(b),_=h*s,E=Ec(x.map((function(t){return function(e,n,r){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*c[i][0],l={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+y[i])/_|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return l[e]}))}}}))),S=Zm.bind(null,Bs(h*s));(n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:i,projection:r.projection,tilePixelRatio:s,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:S,tileGrid:w,tileUrlFunction:E,transition:r.transition})||this).zDirection=r.zDirection;var C=E(w.getTileCoordForCoordAndResolution(De(w.getExtent()),g[g.length-1]),1,null),T=new Image;return T.addEventListener("error",function(){_=h,this.changed()}.bind(n)),T.src=C,n}return Ym(e,t),e}(If),Jm=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Qm="version1",$m="version2",tv="version3",ev={};ev[Qm]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},ev[$m]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},ev[tv]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},ev.none={none:{supports:[],formats:[],qualities:[]}};var nv=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,rv=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,iv=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/,ov={};ov[Qm]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=ev[Qm].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:Jm(Jm([],e.formats,!0),[void 0===t.imageInfo.formats?[]:t.imageInfo.formats],!1),qualities:Jm(Jm([],e.qualities,!0),[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],!1),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},ov[$m]=function(t){var e=t.getComplianceLevelSupportedFeatures(),n=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,r=n&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=n&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=n&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:Jm(Jm([],e.supports,!0),r,!0),formats:Jm(Jm([],e.formats,!0),i,!0),qualities:Jm(Jm([],e.qualities,!0),o,!0)}},ov[tv]=function(t){var e=t.getComplianceLevelSupportedFeatures(),n=void 0===t.imageInfo.extraFormats?e.formats:Jm(Jm([],e.formats,!0),t.imageInfo.extraFormats,!0),r=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return m(["jpg","png","gif"],t)})).reduce((function(t,e){return void 0===t&&m(n,e)?e:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:Jm(Jm([],e.supports,!0),t.imageInfo.extraFeatures,!0),formats:n,qualities:void 0===t.imageInfo.extraQualities?e.qualities:Jm(Jm([],e.qualities,!0),t.imageInfo.extraQualities,!0),preferredFormat:r}};var av=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Qm;case"http://iiif.io/api/image/2/context.json":return $m;case"http://iiif.io/api/image/3/context.json":return tv;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Qm)&&this.imageInfo.identifier)return Qm}yt(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case Qm:if(nv.test(this.imageInfo.profile))return this.imageInfo.profile;break;case tv:if(iv.test(this.imageInfo.profile))return this.imageInfo.profile;break;case $m:if("string"==typeof this.imageInfo.profile&&rv.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&rv.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var n=e.match(/level[0-2](?:\.json)?$/g);return Array.isArray(n)?n[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?ev.none.none:ev[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},n=this.getImageApiVersion();if(void 0!==n){var r=void 0===n?void 0:ov[n](this);if(void 0!==r)return{url:r.url,version:n,size:[this.imageInfo.width,this.imageInfo.height],sizes:r.sizes,format:void 0!==e.format&&m(r.formats,e.format)?e.format:void 0!==r.preferredFormat?r.preferredFormat:"jpg",supports:r.supports,quality:e.quality&&m(r.qualities,e.quality)?e.quality:m(r.qualities,"native")?"native":"default",resolutions:Array.isArray(r.resolutions)?r.resolutions.sort((function(t,e){return e-t})):void 0,tileSize:r.tileSize}}},t}(),sv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function lv(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var uv=function(t){function e(e){var n=this,r=e||{},i=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(i=r.interpolate);var o=r.url||"";o+=o.lastIndexOf("/")===o.length-1||""===o?"":"/";var a=r.version||$m,s=r.sizes||[],l=r.size;yt(null!=l&&Array.isArray(l)&&2==l.length&&!isNaN(l[0])&&l[0]>0&&!isNaN(l[1])&&l[1]>0,60);var u,c,h,p=l[0],f=l[1],d=r.tileSize,g=r.tilePixelRatio||1,y=r.format||"jpg",v=r.quality||(r.version==Qm?"native":"default"),w=r.resolutions||[],b=r.supports||[],x=r.extent||[0,-f,p,0],_=null!=s&&Array.isArray(s)&&s.length>0,E=void 0!==d&&("number"==typeof d&&Number.isInteger(d)&&d>0||Array.isArray(d)&&d.length>0),S=null!=b&&Array.isArray(b)&&(m(b,"regionByPx")||m(b,"regionByPct"))&&(m(b,"sizeByWh")||m(b,"sizeByH")||m(b,"sizeByW")||m(b,"sizeByPct"));if(w.sort((function(t,e){return e-t})),E||S)if(null!=d&&("number"==typeof d&&Number.isInteger(d)&&d>0?(u=d,c=d):Array.isArray(d)&&d.length>0&&((1==d.length||null==d[1]&&Number.isInteger(d[0]))&&(u=d[0],c=d[0]),2==d.length&&(Number.isInteger(d[0])&&Number.isInteger(d[1])?(u=d[0],c=d[1]):null==d[0]&&Number.isInteger(d[1])&&(u=d[1],c=d[1])))),void 0!==u&&void 0!==c||(u=vs,c=vs),0==w.length)for(var C=h=Math.max(Math.ceil(Math.log(p/u)/Math.LN2),Math.ceil(Math.log(f/c)/Math.LN2));C>=0;C--)w.push(Math.pow(2,C));else{var T=Math.max.apply(Math,w);h=Math.round(Math.log(T)/Math.LN2)}else if(u=p,c=f,w=[],_){s.sort((function(t,e){return t[0]-e[0]})),h=-1;var I=[];for(C=0;C<s.length;C++){var A=p/s[C][0];w.length>0&&w[w.length-1]==A?I.push(C):(w.push(A),h++)}if(I.length>0)for(C=0;C<I.length;C++)s.splice(I[C]-C,1)}else w.push(1),s.push([p,f]),h=0;var P=new fc({tileSize:[u,c],extent:x,origin:Be(x),resolutions:w}),k=Zm.bind(null,Bs(d||256).map((function(t){return t*g})));return(n=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:i,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:r.state,tileClass:k,tileGrid:P,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:function(t,e,n){var r,i,l=t[0];if(!(l>h)){var d=t[1],g=t[2],x=w[l];if(!(void 0===d||void 0===g||void 0===x||d<0||Math.ceil(p/x/u)<=d||g<0||Math.ceil(f/x/c)<=g)){if(S||E){var C=d*u*x,T=g*c*x,I=u*x,A=c*x,P=u,k=c;C+I>p&&(I=p-C),T+A>f&&(A=f-T),C+u*x>p&&(P=Math.floor((p-C+x-1)/x)),T+c*x>f&&(k=Math.floor((f-T+x-1)/x)),0==C&&I==p&&0==T&&A==f?r="full":!S||m(b,"regionByPx")?r=C+","+T+","+I+","+A:m(b,"regionByPct")&&(r="pct:"+lv(C/p*100)+","+lv(T/f*100)+","+lv(I/p*100)+","+lv(A/f*100)),a!=tv||S&&!m(b,"sizeByWh")?!S||m(b,"sizeByW")?i=P+",":m(b,"sizeByH")?i=","+k:m(b,"sizeByWh")?i=P+","+k:m(b,"sizeByPct")&&(i="pct:"+lv(100/x)):i=P+","+k}else if(r="full",_){var O=s[l][0],M=s[l][1];i=a==tv?O==p&&M==f?"max":O+","+M:O==p?"full":O+","}else i=a==tv?"max":"full";return o+r+"/"+i+"/0/"+v+"."+y}}},transition:r.transition})||this).zDirection=r.zDirection,n}return sv(e,t),e}(If),cv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hv=function(t){function e(e,n,r,i,o,a,s){var l=this,u=e.getExtent(),c=n.getExtent(),h=c?Ge(r,c):r,p=uc(e,n,De(h),i),f=new Sh(e,n,h,u,.5*p,i),d=a(f.calculateSourceExtent(),p,o),g=d?0:4,y=d?d.getPixelRatio():1;return(l=t.call(this,r,i,y,g)||this).ps=n,l.ws=u,l.zs=f,l.wi=i,l.vc=r,l.dc=d,l.yc=y,l.pu=s,l.Ut=null,l.mc=null,l}return cv(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.wc(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.Ut},e.prototype.getProjection=function(){return this.ps},e.prototype.Fs=function(){var t=this.dc.getState();if(2==t){var e=qe(this.vc)/this.wi,n=ze(this.vc)/this.wi;this.Ut=hc(e,n,this.yc,this.dc.getResolution(),this.ws,this.wi,this.vc,this.zs,[{extent:this.dc.getExtent(),image:this.dc.getImage()}],0,void 0,this.pu)}this.state=t,this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.dc.getState();2==t||3==t?this.Fs():(this.mc=H(this.dc,D,(function(t){var e=this.dc.getState();2!=e&&3!=e||(this.wc(),this.Fs())}),this),this.dc.load())}},e.prototype.wc=function(){X(this.mc),this.mc=null},e}(oo),pv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fv=function(t){function e(e,n){var r=t.call(this,e)||this;return r.image=n,r}return pv(e,t),e}(p);function dv(t,e){t.getImage().src=e}var gv=function(t){function e(e){var n=this,r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),(n=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:r})||this).on,n.once,n.un,n.Ti=void 0!==e.resolutions?e.resolutions:null,n.bc=null,n.gc=0,n}return pv(e,t),e.prototype.getResolutions=function(){return this.Ti},e.prototype.findNearestResolution=function(t){if(this.Ti){var e=v(this.Ti,t,0);t=this.Ti[e]}return t},e.prototype.getImage=function(t,e,n,r){var i=this.getProjection();if(i&&r&&!vr(i,r)){if(this.bc){if(this.gc==this.getRevision()&&vr(this.bc.getProjection(),r)&&this.bc.getResolution()==e&&Se(this.bc.getExtent(),t))return this.bc;this.bc.dispose(),this.bc=null}return this.bc=new hv(i,r,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,i)}.bind(this),this.getInterpolate()),this.gc=this.getRevision(),this.bc}return i&&(r=i),this.getImageInternal(t,e,n,r)},e.prototype.getImageInternal=function(t,e,n,r){return i()},e.prototype.handleImageChange=function(t){var e,n=t.target;switch(n.getState()){case 1:this.loading=!0,e="imageloadstart";break;case 2:this.loading=!1,e="imageloadend";break;case 3:this.loading=!1,e="imageloaderror";break;default:return}this.hasListener(e)&&this.dispatchEvent(new fv(e,n))},e}(vf),yv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mv=function(t){function e(e){var n=this,r=e||{},i=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(i=r.interpolate),(n=t.call(this,{attributions:r.attributions,interpolate:i,projection:r.projection,resolutions:r.resolutions})||this).Bt=void 0!==r.crossOrigin?r.crossOrigin:null,n.Su=void 0===r.hidpi||r.hidpi,n.Ge=r.url,n.Ft=void 0!==r.imageLoadFunction?r.imageLoadFunction:dv,n.xc=r.params||{},n.Nt=null,n.jc=[0,0],n.Sc=0,n.kc=void 0!==r.ratio?r.ratio:1.5,n}return yv(e,t),e.prototype.getParams=function(){return this.xc},e.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.Ge)return null;e=this.findNearestResolution(e),n=this.Su?n:1;var i=this.Nt;if(i&&this.Sc==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&ye(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};k(o,this.xc);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.kc){var l=this.kc*qe(t)/2,u=this.kc*ze(t)/2;t[0]=a-l,t[1]=s-u,t[2]=a+l,t[3]=s+u}var c=e/n,h=Math.ceil(qe(t)/c),p=Math.ceil(ze(t)/c);t[0]=a-c*h/2,t[2]=a+c*h/2,t[1]=s-c*p/2,t[3]=s+c*p/2,this.jc[0]=h,this.jc[1]=p;var f=this.Mc(t,this.jc,n,r,o);return this.Nt=new lo(t,e,n,f,this.Bt,this.Ft),this.Sc=this.getRevision(),this.Nt.addEventListener(D,this.handleImageChange.bind(this)),this.Nt},e.prototype.getImageLoadFunction=function(){return this.Ft},e.prototype.Mc=function(t,e,n,r,i){var o=r.getCode().split(/:(?=\d+$)/).pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*n);var a=this.Ge,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&yt(!1,50),Tc(s,i)},e.prototype.getUrl=function(){return this.Ge},e.prototype.setImageLoadFunction=function(t){this.Nt=null,this.Ft=t,this.changed()},e.prototype.setUrl=function(t){t!=this.Ge&&(this.Ge=t,this.Nt=null,this.changed())},e.prototype.updateParams=function(t){k(this.xc,t),this.Nt=null,this.changed()},e}(gv),vv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wv=function(t){function e(e){var n=this,r=e||{},i=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(i=r.interpolate),(n=t.call(this,{attributions:r.attributions,interpolate:i,projection:r.projection,resolutions:r.resolutions,state:r.state})||this)._c=r.canvasFunction,n.Ut=null,n.Sc=0,n.kc=void 0!==r.ratio?r.ratio:1.5,n}return vv(e,t),e.prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e);var i=this.Ut;if(i&&this.Sc==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&ye(i.getExtent(),t))return i;Ye(t=t.slice(),this.kc);var o=[qe(t)/e*n,ze(t)/e*n],a=this._c.call(this,t,e,n,o,r);return a&&(i=new co(t,e,n,a)),this.Ut=i,this.Sc=this.getRevision(),i},e}(gv),bv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xv=function(t){function e(e){var n=this,r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),(n=t.call(this,{interpolate:r,projection:e.projection,resolutions:e.resolutions})||this).Bt=void 0!==e.crossOrigin?e.crossOrigin:null,n.Oc=void 0!==e.displayDpi?e.displayDpi:96,n.xc=e.params||{},n.Ge=e.url,n.Ft=void 0!==e.imageLoadFunction?e.imageLoadFunction:dv,n.Su=void 0===e.hidpi||e.hidpi,n.dt=void 0!==e.metersPerUnit?e.metersPerUnit:1,n.kc=void 0!==e.ratio?e.ratio:1,n.Tc=void 0!==e.useOverlay&&e.useOverlay,n.Nt=null,n.Sc=0,n}return bv(e,t),e.prototype.getParams=function(){return this.xc},e.prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e),n=this.Su?n:1;var i=this.Nt;if(i&&this.Sc==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&ye(i.getExtent(),t))return i;1!=this.kc&&Ye(t=t.slice(),this.kc);var o=[qe(t)/e*n,ze(t)/e*n];if(void 0!==this.Ge){var a=this.getUrl(this.Ge,this.xc,t,o,r);(i=new lo(t,e,n,a,this.Bt,this.Ft)).addEventListener(D,this.handleImageChange.bind(this))}else i=null;return this.Nt=i,this.Sc=this.getRevision(),i},e.prototype.getImageLoadFunction=function(){return this.Ft},e.prototype.updateParams=function(t){k(this.xc,t),this.changed()},e.prototype.getUrl=function(t,e,n,r,i){var o=function(t,e,n,r){var i=qe(t),o=ze(t),a=e[0],s=e[1],l=.0254/r;return s*i>a*o?i*n/(a*l):o*n/(s*l)}(n,r,this.dt,this.Oc),a=De(n),s={OPERATION:this.Tc?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.Oc,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return k(s,e),Tc(t,s)},e.prototype.setImageLoadFunction=function(t){this.Nt=null,this.Ft=t,this.changed()},e}(gv),_v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ev=function(t){function e(e){var n=this,r=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:dv,o=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(o=e.interpolate),(n=t.call(this,{attributions:e.attributions,interpolate:o,projection:cr(e.projection)})||this).Ge=e.url,n.Ec=e.imageExtent,n.Nt=new lo(n.Ec,void 0,1,n.Ge,r,i),n.jc=e.imageSize?e.imageSize:null,n.Nt.addEventListener(D,n.handleImageChange.bind(n)),n}return _v(e,t),e.prototype.getImageExtent=function(){return this.Ec},e.prototype.getImageInternal=function(t,e,n,r){return We(t,this.Nt.getExtent())?this.Nt:null},e.prototype.getUrl=function(){return this.Ge},e.prototype.handleImageChange=function(e){if(2==this.Nt.getState()){var n=this.Nt.getExtent(),r=this.Nt.getImage(),i=void 0,o=void 0;this.jc?(i=this.jc[0],o=this.jc[1]):(i=r.width,o=r.height);var a=qe(n),s=ze(n),l=a/i,u=s/o,c=i,h=o;if(l>u?c=Math.round(a/u):h=Math.round(s/l),c!==i||h!==o){var p=ho(c,h);this.getInterpolate()||k(p,oc);var f=p.canvas;p.drawImage(r,0,0,i,o,0,0,f.width,f.height),this.Nt.setImage(f)}}t.prototype.handleImageChange.call(this,e)},e}(gv),Sv="1.3.0",Cv="carmentaserver",Tv="geoserver",Iv="mapserver",Av="qgis",Pv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kv=[101,101],Ov=function(t){function e(e){var n=this,r=e||{},i=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(i=r.interpolate),(n=t.call(this,{attributions:r.attributions,interpolate:i,projection:r.projection,resolutions:r.resolutions})||this).Bt=void 0!==r.crossOrigin?r.crossOrigin:null,n.Ge=r.url,n.Ft=void 0!==r.imageLoadFunction?r.imageLoadFunction:dv,n.xc=r.params||{},n.Ac=!0,n.Cc(),n.Rc=r.serverType,n.Su=void 0===r.hidpi||r.hidpi,n.Nt=null,n.jc=[0,0],n.Sc=0,n.kc=void 0!==r.ratio?r.ratio:1.5,n}return Pv(e,t),e.prototype.getFeatureInfoUrl=function(t,e,n,r){if(void 0!==this.Ge){var i=cr(n),o=this.getProjection();o&&o!==i&&(e=uc(o,i,t,e),t=xr(t,i,o));var a=je(t,e,0,kv),s={SERVICE:"WMS",VERSION:Sv,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.xc.LAYERS};k(s,this.xc,r);var l=hn((t[0]-a[0])/e,4),u=hn((a[3]-t[1])/e,4);return s[this.Ac?"I":"X"]=l,s[this.Ac?"J":"Y"]=u,this.Mc(a,kv,1,o||i,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.Ge){var n={SERVICE:"WMS",VERSION:Sv,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var r=this.xc.LAYERS;if(Array.isArray(r)&&1!==r.length)return;n.LAYER=r}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*i/28e-5}return k(n,e),Tc(this.Ge,n)}},e.prototype.getParams=function(){return this.xc},e.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.Ge)return null;e=this.findNearestResolution(e),1==n||this.Su&&void 0!==this.Rc||(n=1);var i=e/n,o=De(t),a=je(o,i,0,[pn(qe(t)/i,4),pn(ze(t)/i,4)]),s=je(o,i,0,[pn(this.kc*qe(t)/i,4),pn(this.kc*ze(t)/i,4)]),l=this.Nt;if(l&&this.Sc==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==n&&ye(l.getExtent(),a))return l;var u={SERVICE:"WMS",VERSION:Sv,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};k(u,this.xc),this.jc[0]=cn(qe(s)/i,4),this.jc[1]=cn(ze(s)/i,4);var c=this.Mc(s,this.jc,n,r,u);return this.Nt=new lo(s,e,n,c,this.Bt,this.Ft),this.Sc=this.getRevision(),this.Nt.addEventListener(D,this.handleImageChange.bind(this)),this.Nt},e.prototype.getImageLoadFunction=function(){return this.Ft},e.prototype.Mc=function(t,e,n,r,i){if(yt(void 0!==this.Ge,9),i[this.Ac?"CRS":"SRS"]=r.getCode(),"STYLES"in this.xc||(i.STYLES=""),1!=n)switch(this.Rc){case Tv:var o=90*n+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case Iv:i.MAP_RESOLUTION=90*n;break;case Cv:case Av:i.DPI=90*n;break;default:yt(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=r.getAxisOrientation();return a=this.Ac&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),Tc(this.Ge,i)},e.prototype.getUrl=function(){return this.Ge},e.prototype.setImageLoadFunction=function(t){this.Nt=null,this.Ft=t,this.changed()},e.prototype.setUrl=function(t){t!=this.Ge&&(this.Ge=t,this.Nt=null,this.changed())},e.prototype.updateParams=function(t){k(this.xc,t),this.Cc(),this.Nt=null,this.changed()},e.prototype.Cc=function(){var t=this.xc.VERSION||Sv;this.Ac=jn(t,"1.3")>=0},e}(gv),Mv={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},Nv={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function Lv(t,e){for(var n,r,i=0;i<t.length;++i){var o=t[i];if("item"===o.rel){if(o.type===e){n=o.href;break}Mv[o.type]?r=o.href:r||0!==o.type.indexOf("image/")||(r=o.href)}}if(!n){if(!r)throw new Error('Could not find "item" link');n=r}return n}function Rv(t,e,n){for(var r,i,o={},a=0;a<t.length;++a){var s=t[a];if(o[s.type]=s.href,"item"===s.rel){if(s.type===e){r=s.href;break}Nv[s.type]&&(i=s.href)}}if(!r&&n)for(a=0;a<n.length;++a){var l=n[a];if(o[l]){r=o[l];break}}if(!r){if(!i)throw new Error('Could not find "item" link');r=i}return r}function Dv(t,e,n,r){var i=t.projection;if(!i&&!(i=cr(e.crs)))throw new Error("Unsupported CRS: ".concat(e.crs));for(var o="en"!==i.getAxisOrientation().substr(0,2),a=e.tileMatrices,s={},l=0;l<a.length;++l){var u=a[l];s[u.id]=u}var c={},h=[];if(r)for(l=0;l<r.length;++l){var p=(w=r[l]).tileMatrix;h.push(p),c[p]=w}else for(l=0;l<a.length;++l)p=a[l].id,h.push(p);var f=h.length,d=new Array(f),g=new Array(f),y=new Array(f),m=new Array(f),v=[-1/0,-1/0,1/0,1/0];for(l=0;l<f;++l){p=h[l];var w,b=(u=s[p]).pointOfOrigin;if(d[l]=o?[b[1],b[0]]:b,g[l]=u.cellSize,y[l]=[u.matrixWidth,u.matrixHeight],m[l]=[u.tileWidth,u.tileHeight],w=c[p]){var x=u.cellSize*u.tileWidth,_=d[l][0]+w.minTileCol*x,E=d[l][0]+(w.maxTileCol+1)*x,S=u.cellSize*u.tileHeight,C=void 0,T=void 0;"bottomLeft"===u.cornerOfOrigin?(C=d[l][1]+w.minTileRow*S,T=d[l][1]+(w.maxTileRow+1)*S):(C=d[l][1]-(w.maxTileRow+1)*S,T=d[l][1]-w.minTileRow*S),Ge(v,[_,C,E,T],v)}}var I=new fc({origins:d,resolutions:g,sizes:y,tileSizes:m,extent:r?v:void 0}),A=t.context,P=t.url;return{grid:I,urlTemplate:n,urlFunction:function(t,e,i){if(t){var o=h[t[0]],a=s[o],l="bottomLeft"===a.cornerOfOrigin,u={tileMatrix:o,tileCol:t[1],tileRow:l?-t[2]-1:t[2]};if(r){var p=c[a.id];if(u.tileCol<p.minTileCol||u.tileCol>p.maxTileCol||u.tileRow<p.minTileRow||u.tileRow>p.maxTileRow)return}k(u,A);var f=n.replace(/\{(\w+?)\}/g,(function(t,e){return u[e]}));return Bu(P,f)}}}}function Fv(t){return Gu(t.url).then((function(e){return function(t,e){var n,r=e.tileMatrixSetLimits;if("map"===e.dataType)n=Lv(e.links,t.mediaType);else{if("vector"!==e.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');n=Rv(e.links,t.mediaType,t.supportedMediaTypes)}if(e.tileMatrixSet)return Dv(t,e.tileMatrixSet,n,r);var i=e.links.find((function(t){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel}));if(!i)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=i.href;return Gu(Bu(t.url,o)).then((function(e){return Dv(t,e,n,r)}))}(t,e)}))}var jv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zv=function(t){function e(e){var n=this,r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ta,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this,Fv({url:e.url,projection:n.getProjection(),mediaType:e.mediaType,context:e.context||null}).then(n.Pc.bind(n)).catch(n.Ic.bind(n)),n}return jv(e,t),e.prototype.Pc=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(ea)},e.prototype.Ic=function(t){console.error(t),this.setState(na)},e}(If),Gv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bv=function(t){function e(e){var n=this,r=e.projection||"EPSG:3857",i=e.extent||bc(r),o=e.tileGrid||mc({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:r,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Uv,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).Fe=e.format?e.format:null,n.sourceTileCache=new mu(n.tileCache.highWaterMark),n.zu=null==e.overlaps||e.overlaps,n.tileClass=e.tileClass?e.tileClass:Cu,n.Nc={},n}return Gv(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],n=this.tileCache;if(0===n.getCount())return e;var r=fu(n.peekFirstKey())[0],i=this.tileGrid;return n.forEach((function(n){if(n.tileCoord[0]===r&&2===n.getState())for(var o=n.getSourceTiles(),a=0,s=o.length;a<s;++a){var l=o[a],u=l.tileCoord;if(We(t,i.getTileCoordExtent(u))){var c=l.getFeatures();if(c)for(var h=0,p=c.length;h<p;++h){var f=c[h],d=f.getGeometry();We(t,d.getExtent())&&e.push(f)}}}})),e},e.prototype.getOverlaps=function(){return this.zu},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e),i=Object.keys(n).reduce((function(t,e){var n=pu(e);if(r.containsKey(n))for(var i=r.get(n).sourceTiles,o=0,a=i.length;o<a;++o)t[i[o].getKey()]=!0;return t}),{});t.prototype.expireCache.call(this,e,n),this.sourceTileCache.expireCache(i)},e.prototype.getSourceTiles=function(t,e,n){var r=this;if(0===n.getState()){n.setState(1);var i=n.wrappedTileCoord,o=this.getTileGridForProjection(e),a=o.getTileCoordExtent(i),s=i[0],l=o.getResolution(s);pe(a,-l,a);var u=this.tileGrid,c=u.getExtent();c&&Ge(a,c,a);var h=u.getZForResolution(l,1);u.forEachTileCoord(a,h,(function(i){var o=r.tileUrlFunction(i,t,e),a=r.sourceTileCache.containsKey(o)?r.sourceTileCache.get(o):new r.tileClass(i,o?0:4,o,r.Fe,r.tileLoadFunction);n.sourceTiles.push(a);var s=a.getState();s<2&&(a.addEventListener(D,(function t(e){r.handleTileChange(e);var i=a.getState();if(2===i||3===i){var o=a.getKey();o in n.errorTileKeys?2===a.getState()&&delete n.errorTileKeys[o]:n.loadingSourceTiles--,3===i?n.errorTileKeys[o]=!0:a.removeEventListener(D,t),0===n.loadingSourceTiles&&n.setState(N(n.errorTileKeys)?2:3)}})),n.loadingSourceTiles++),0===s&&(a.extent=u.getTileCoordExtent(i),a.projection=e,a.resolution=u.getResolution(i[0]),r.sourceTileCache.set(o,a),a.load())})),n.loadingSourceTiles||n.setState(n.sourceTiles.some((function(t){return 3===t.getState()}))?3:2)}return n.sourceTiles},e.prototype.getTile=function(t,e,n,r,i){var o,a=cu(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var l=[t,e,n],u=this.getTileCoordForTileUrlFunction(l,i),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(u&&c){var p=h.getTileCoordExtent(u);pe(p,-h.getResolution(t),p),We(c,p)||(u=null)}var f=!0;if(null!==u){var d=this.tileGrid,g=h.getResolution(t),y=d.getZForResolution(g,1),m=h.getTileCoordExtent(u);pe(m,-g,m),d.forEachTileCoord(m,y,function(t){f=f&&!this.tileUrlFunction(t,r,i)}.bind(this))}var v=new Eu(l,f?4:0,u,this.getSourceTiles.bind(this,r,i));return v.key=s,o?(v.interimTile=o,v.refreshInterimChain(),this.tileCache.replace(a,v)):this.tileCache.set(a,v),v},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),n=this.Nc[e];if(!n){var r=this.tileGrid;n=wc(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0),this.Nc[e]=n}return n},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,n){var r=Bs(this.getTileGridForProjection(n).getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]},e.prototype.updateCacheSize=function(e,n){t.prototype.updateCacheSize.call(this,2*e,n),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(n).highWaterMark},e}(Sf);function Uv(t,e){t.setLoader((function(n,r,i){Mu(e,t.getFormat(),n,r,i,t.onLoad.bind(t),t.onError.bind(t))}))}var qv,Wv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vv=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:ta})||this;return Fv({url:e.url,projection:n.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null}).then(n.Pc.bind(n)).catch(n.Ic.bind(n)),n}return Wv(e,t),e.prototype.Pc=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(ea)},e.prototype.Ic=function(t){console.error(t),this.setState(na)},e}(Bv),Hv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yv='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Xv=function(t){function e(e){var n,r=e||{},i=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(i=r.interpolate),n=void 0!==r.attributions?r.attributions:[Yv];var o=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",a=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:n,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:o,interpolate:i,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:a,wrapX:r.wrapX,zDirection:r.zDirection})||this}return Hv(e,t),e}(Mf),Zv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kv=function(t){function e(e){var n=e||{};return t.call(this,n)||this}return Zv(e,t),e}(oa),Jv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qv=null,$v=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.Vs=null,n.frameState=null,n}return Jv(e,t),e.prototype.getImageData=function(t,e,n){var r,i;Qv||((r=document.createElement("canvas")).width=1,r.height=1,Qv=r.getContext("2d")),Qv.clearRect(0,0,1,1);try{Qv.drawImage(t,e,n,1,1,0,0,1,1),i=Qv.getImageData(0,0,1,1).data}catch(t){return null}return i},e.prototype.getBackground=function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0},e.prototype.useContainer=function(t,e,n,r){var i,o,a=this.getLayer().getClassName();if(t&&t.className===a&&""===t.style.opacity&&1===n&&(!r||t.style.backgroundColor&&_(Io(t.style.backgroundColor),Io(r)))&&(l=t.firstElementChild)instanceof HTMLCanvasElement&&(o=l.getContext("2d")),o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(i=document.createElement("div")).className=a;var s=i.style;s.position="absolute",s.width="100%",s.height="100%",r&&(s.backgroundColor=r);var l=(o=ho()).canvas;i.appendChild(l),(s=l.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=i,this.context=o}},e.prototype.clipUnrotated=function(t,e,n){var r=Be(n),i=Ue(n),o=Re(n),a=Le(n);Ht(e.coordinateToPixelTransform,r),Ht(e.coordinateToPixelTransform,i),Ht(e.coordinateToPixelTransform,o),Ht(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;Ht(s,r),Ht(s,i),Ht(s,o),Ht(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.Hs=function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){var i=new ca(t,this.inversePixelTransform,n,e);r.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.frameState=e,this.Hs(Xo,t,e)},e.prototype.postRender=function(t,e){this.Hs(Zo,t,e)},e.prototype.getRenderTransform=function(t,e,n,r,i,o,a){var s=i/2,l=o/2,u=r/e,c=-u,h=-t[0]+a,p=-t[1];return Jt(this.tempTransform,s,l,u,c,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var r=Ht(this.inversePixelTransform,t.slice()),i=this.context,o=this.getLayer().getExtent();if(o&&!ge(o,Ht(e.pixelToCoordinateTransform,t.slice())))return null;var a,s=Math.round(r[0]),l=Math.round(r[1]),u=this.Vs;if(!u){var c=document.createElement("canvas");c.width=1,c.height=1,u=c.getContext("2d"),this.Vs=u}u.clearRect(0,0,1,1);try{u.drawImage(i.canvas,s,l,1,1,0,0,1,1),a=u.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.Vs=null,new Uint8Array):a}return 0===a[3]?null:a},e.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},e}(Nh),tw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ew=function(t){function e(e){var n=t.call(this,e)||this;return n.Nt=null,n}return tw(e,t),e.prototype.getImage=function(){return this.Nt?this.Nt.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,r=t.viewState,i=r.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=Ge(s,Pr(e.extent,r.projection))),!a[0]&&!a[1]&&!Ve(s))if(o){var l=r.projection,u=o.getImage(s,i,n,l);u&&(this.loadImage(u)?this.Nt=u:4===u.getState()&&(this.Nt=null))}else this.Nt=null;return!!this.Nt},e.prototype.getData=function(t){var e=this.frameState;if(!e)return null;var n=this.getLayer(),r=Ht(e.pixelToCoordinateTransform,t.slice()),i=n.getExtent();if(i&&!ge(i,r))return null;var o=this.Nt.getExtent(),a=this.Nt.getImage(),s=qe(o),l=Math.floor(a.width*((r[0]-o[0])/s));if(l<0||l>=a.width)return null;var u=ze(o),c=Math.floor(a.height*((o[3]-r[1])/u));return c<0||c>=a.height?null:this.getImageData(a,l,c)},e.prototype.renderFrame=function(t,e){var n=this.Nt,r=n.getExtent(),i=n.getResolution(),o=n.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,l=t.viewState,u=l.center,c=l.resolution,h=t.size,p=s*i/(c*o),f=Math.round(h[0]*s),d=Math.round(h[1]*s),g=l.rotation;if(g){var y=Math.round(Math.sqrt(f*f+d*d));f=y,d=y}Jt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,g,-f/2,-d/2),Qt(this.inversePixelTransform,this.pixelTransform);var m=te(this.pixelTransform);this.useContainer(e,m,a.opacity,this.getBackground(t));var v=this.context,w=v.canvas;w.width!=f||w.height!=d?(w.width=f,w.height=d):this.containerReused||v.clearRect(0,0,f,d);var b=!1,x=!0;if(a.extent){var _=Pr(a.extent,l.projection);(b=(x=We(_,t.extent))&&!ye(_,t.extent))&&this.clipUnrotated(v,t,_)}var E=n.getImage(),S=Jt(this.tempTransform,f/2,d/2,p,p,0,o*(r[0]-u[0])/i,o*(u[1]-r[3])/i);this.renderedResolution=i*s/o;var C=E.width*S[0],T=E.height*S[3];if(this.getLayer().getSource().getInterpolate()||k(v,oc),this.preRender(v,t),x&&C>=.5&&T>=.5){var I=S[4],A=S[5],P=a.opacity,O=void 0;1!==P&&(O=v.globalAlpha,v.globalAlpha=P),v.drawImage(E,0,0,+E.width,+E.height,Math.round(I),Math.round(A),Math.round(C),Math.round(T)),1!==P&&(v.globalAlpha=O)}return this.postRender(v,t),b&&v.restore(),k(v,ac),m!==w.style.transform&&(w.style.transform=m),this.container},e}($v),nw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rw=function(t){function e(e){return t.call(this,e)||this}return nw(e,t),e.prototype.createRenderer=function(){return new ew(this)},e.prototype.getData=function(e){return t.prototype.getData.call(this,e)},e}(Kv),iw="preload",ow="useInterimTilesOnError",aw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sw=function(t){function e(e){var n=this,r=e||{},i=k({},r);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return aw(e,t),e.prototype.getPreload=function(){return this.get(iw)},e.prototype.setPreload=function(t){this.set(iw,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(ow)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ow,t)},e.prototype.getData=function(e){return t.prototype.getData.call(this,e)},e}(oa),lw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uw=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.zc=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.Fc=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.Lc=new bu(0,0,0,0),n}return lw(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!r},e.prototype.getTile=function(t,e,n,r){var i=r.pixelRatio,o=r.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,n,i,o);return 3==s.getState()&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.Fc=!0):s.setState(2)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.getData=function(t){var e=this.frameState;if(!e)return null;var n=this.getLayer(),r=Ht(e.pixelToCoordinateTransform,t.slice()),i=n.getExtent();if(i&&!ge(i,r))return null;for(var o=e.pixelRatio,a=e.viewState.projection,s=e.viewState,l=n.getRenderSource(),u=l.getTileGridForProjection(s.projection),c=l.getTilePixelRatio(e.pixelRatio),h=u.getZForResolution(s.resolution);h>=u.getMinZoom();--h){var p=u.getTileCoordForCoordAndZ(r,h),f=l.getTile(h,p[1],p[2],o,a);if(!(f instanceof bo||f instanceof Th))return null;if(2===f.getState()){var d=u.getOrigin(h),g=Bs(u.getTileSize(h)),y=u.getResolution(h),m=Math.floor(c*((r[0]-d[0])/y-p[1]*g[0])),v=Math.floor(c*((d[1]-r[1])/y-p[2]*g[1]));return this.getImageData(f.getImage(),m,v)}}return null},e.prototype.loadedTileCallback=function(e,n,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,e,n,r)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],r=t.viewState,i=r.projection,o=r.resolution,s=r.center,l=r.rotation,u=t.pixelRatio,c=this.getLayer(),h=c.getSource(),p=h.getRevision(),f=h.getTileGridForProjection(i),d=f.getZForResolution(o,h.zDirection),g=f.getResolution(d),m=t.extent,v=n.extent&&Pr(n.extent,i);v&&(m=Ge(m,Pr(n.extent,i)));var w=h.getTilePixelRatio(u),b=Math.round(t.size[0]*w),x=Math.round(t.size[1]*w);if(l){var _=Math.round(Math.sqrt(b*b+x*x));b=_,x=_}var E=g*b/2/w,S=g*x/2/w,C=[s[0]-E,s[1]-S,s[0]+E,s[1]+S],T=f.getTileRangeForExtentAndZ(m,d),I={};I[d]={};var A=this.createLoadedTileFinder(h,i,I),P=this.tmpExtent,O=this.Lc;this.Fc=!1;for(var M=T.minX;M<=T.maxX;++M)for(var N=T.minY;N<=T.maxY;++N){var L=this.getTile(d,M,N,t);if(this.isDrawableTile(L)){var R=a(this);if(2==L.getState()){I[d][L.tileCoord.toString()]=L;var D=L.inTransition(R);this.Fc||!D&&-1!==this.renderedTiles.indexOf(L)||(this.Fc=!0)}if(1===L.getAlpha(R,t.time))continue}var F=f.getTileCoordChildTileRange(L.tileCoord,O,P),j=!1;F&&(j=A(d+1,F)),j||f.forEachTileCoordParentTileRange(L.tileCoord,A,O,P)}var z=g/o;Jt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/w,1/w,l,-b/2,-x/2);var G=te(this.pixelTransform);this.useContainer(e,G,n.opacity,this.getBackground(t));var B=this.context,U=B.canvas;Qt(this.inversePixelTransform,this.pixelTransform),Jt(this.tempTransform,b/2,x/2,z,z,0,-b/2,-x/2),U.width!=b||U.height!=x?(U.width=b,U.height=x):this.containerReused||B.clearRect(0,0,b,x),v&&this.clipUnrotated(B,t,v),h.getInterpolate()||k(B,oc),this.preRender(B,t),this.renderedTiles.length=0;var q,W,V,H=Object.keys(I).map(Number);H.sort(y),1!==n.opacity||this.containerReused&&!h.getOpaque(t.viewState.projection)?(q=[],W=[]):H=H.reverse();for(var Y=H.length-1;Y>=0;--Y){var X=H[Y],Z=h.getTilePixelSize(X,u,i),K=f.getResolution(X)/g,J=Z[0]*K*z,Q=Z[1]*K*z,$=f.getTileCoordForCoordAndZ(Be(C),X),tt=f.getTileCoordExtent($),et=Ht(this.tempTransform,[w*(tt[0]-C[0])/g,w*(C[3]-tt[3])/g]),nt=w*h.getGutterForProjection(i),rt=I[X];for(var it in rt){var ot=(L=rt[it]).tileCoord,at=$[1]-ot[1],st=Math.round(et[0]-(at-1)*J),lt=$[2]-ot[2],ut=Math.round(et[1]-(lt-1)*Q),ct=st-(M=Math.round(et[0]-at*J)),ht=ut-(N=Math.round(et[1]-lt*Q)),pt=d===X,ft=!1;if(!(D=pt&&1!==L.getAlpha(a(this),t.time)))if(q){V=[M,N,M+ct,N,M+ct,N+ht,M,N+ht];for(var dt=0,gt=q.length;dt<gt;++dt)if(d!==X&&X<W[dt]){var yt=q[dt];We([M,N,M+ct,N+ht],[yt[0],yt[3],yt[4],yt[7]])&&(ft||(B.save(),ft=!0),B.beginPath(),B.moveTo(V[0],V[1]),B.lineTo(V[2],V[3]),B.lineTo(V[4],V[5]),B.lineTo(V[6],V[7]),B.moveTo(yt[6],yt[7]),B.lineTo(yt[4],yt[5]),B.lineTo(yt[2],yt[3]),B.lineTo(yt[0],yt[1]),B.clip())}q.push(V),W.push(X)}else B.clearRect(M,N,ct,ht);this.drawTileImage(L,t,M,N,ct,ht,nt,pt),q&&!D?(ft&&B.restore(),this.renderedTiles.unshift(L)):this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,h,L)}}this.renderedRevision=p,this.renderedResolution=g,this.extentChanged=!this.zc||!Se(this.zc,C),this.zc=C,this.renderedPixelRatio=u,this.renderedProjection=i,this.manageTilePyramid(t,h,f,u,i,m,d,c.getPreload()),this.scheduleExpireCache(t,h),this.postRender(B,t),n.extent&&B.restore(),k(B,ac),G!==U.style.transform&&(U.style.transform=G);var mt=wa(n.opacity),vt=this.container;return mt!==vt.style.opacity&&(vt.style.opacity=mt),this.container},e.prototype.drawTileImage=function(t,e,n,r,i,o,s,l){var u=this.getTileImage(t);if(u){var c=a(this),h=l?t.getAlpha(c,e.time):1,p=h!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,n,r,i,o),p&&this.context.restore(),1!==h?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=a(t);r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var r=a(e);r in t||(t[r]={}),t[r][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,r,i,o,s,l,u){var c=a(e);c in t.wantedTiles||(t.wantedTiles[c]={});var h,p,f,d,g,y,m=t.wantedTiles[c],v=t.tileQueue,w=0;for(y=n.getMinZoom();y<=s;++y)for(p=n.getTileRangeForExtentAndZ(o,y,p),f=n.getResolution(y),d=p.minX;d<=p.maxX;++d)for(g=p.minY;g<=p.maxY;++g)s-y<=l?(++w,0==(h=e.getTile(y,d,g,r,i)).getState()&&(m[h.getKey()]=!0,v.isKeyQueued(h.getKey())||v.enqueue([h,c,n.getTileCoordCenter(h.tileCoord),f])),void 0!==u&&u(h)):e.useTile(y,d,g,i);e.updateCacheSize(w,i)},e}($v),cw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hw=function(t){function e(e){return t.call(this,e)||this}return cw(e,t),e.prototype.createRenderer=function(){return new uw(this)},e}(sw),pw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fw=!0;try{new ImageData(10,10)}catch(t){fw=!1}function dw(t,e,n){if(fw)return new ImageData(t,e,n);qv||(qv=document.createElement("canvas").getContext("2d"));var r=qv.createImageData(e,n);return r.data.set(t),r}function gw(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function n(t,n,r){return e?new ImageData(t,n,r):{data:t,width:n,height:r}}return function(e){var r=e.buffers,i=e.meta,o=e.imageOps,a=e.width,s=e.height,l=r.length,u=r[0].byteLength;if(o){for(var c=new Array(l),h=0;h<l;++h)c[h]=n(new Uint8ClampedArray(r[h]),a,s);return t(c,i).data.buffer}var p=new Uint8ClampedArray(u),f=new Array(l),d=new Array(l);for(h=0;h<l;++h)f[h]=new Uint8ClampedArray(r[h]),d[h]=[0,0,0,0];for(var g=0;g<u;g+=4){for(var y=0;y<l;++y){var m=f[y];d[y][0]=m[g],d[y][1]=m[g+1],d[y][2]=m[g+2],d[y][3]=m[g+3]}var v=t(d,i);p[g]=v[0],p[g+1]=v[1],p[g+2]=v[2],p[g+3]=v[3]}return p.buffer}}function yw(t,e){var n=Object.keys(t.lib||{}).map((function(e){return"var "+e+" = "+t.lib[e].toString()+";"})).concat(["var __minion__ = ("+gw.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(n.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return r.addEventListener("message",e),r}var mw=function(t){function e(e){var n,r=t.call(this)||this;r._imageOps=!!e.imageOps,n=0===e.threads?0:r._imageOps?1:e.threads||1;var i=new Array(n);if(n)for(var o=0;o<n;++o)i[o]=yw(e,r._onWorkerMessage.bind(r,o));else i[0]=function(t,e){var n=gw(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||e({data:{buffer:n(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(e,r._onWorkerMessage.bind(r,0));return r._workers=i,r._queue=[],r._maxQueueLength=e.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return pw(e,t),e.prototype.process=function(t,e,n){this._enqueue({inputs:t,meta:e,callback:n}),this._dispatch()},e.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},e.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var e=t.inputs[0].width,n=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),i=this._workers.length;if(this._running=i,1!==i)for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var l=s*a,u=[],c=0,h=r.length;c<h;++c)u.push(r[c].slice(l,l+a));this._workers[s].postMessage({buffers:u,meta:t.meta,imageOps:this._imageOps,width:e,height:n},u)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:e,height:n},r)}},e.prototype._onWorkerMessage=function(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},e.prototype._resolveJob=function(){var t,e,n=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var i=n.inputs[0].data.length;t=new Uint8ClampedArray(i),e=new Array(r);for(var o=4*Math.ceil(i/4/r),a=0;a<r;++a){var s=this._dataLookup[a].buffer,l=a*o;t.set(new Uint8ClampedArray(s),l),e[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},n.callback(null,dw(t,n.inputs[0].width,n.inputs[0].height),e),this._dispatch()},e.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},e}(d),vw=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.extent=n.extent,i.resolution=n.viewState.resolution/n.pixelRatio,i.data=r,i}return pw(e,t),e}(p),ww=function(t){function e(e){var n=t.call(this,{projection:null})||this;n.on,n.once,n.un,n.Gc=null,n.Dc=void 0!==e.operationType?e.operationType:"pixel",n.Uc=void 0!==e.threads?e.threads:1,n.qc=function(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=_w(t[r]);return n}(e.sources);for(var r,i=n.changed.bind(n),o=0,s=n.qc.length;o<s;++o)n.qc[o].addEventListener(D,i);return n.cr=new gs((function(){return 1}),n.changed.bind(n)),n.Bc,n.Wc=null,n.Sc,n.Ji={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=n.qc,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:n.cr,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:a(n),renderTargets:{}},n.setAttributions((function(t){for(var n=[],r=0,i=e.sources.length;r<i;++r){var o=e.sources[r],a=(o instanceof vf?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);n.push.apply(n,s)}}return 0!==n.length?n:null})),void 0!==e.operation&&n.setOperation(e.operation,e.lib),n}return pw(e,t),e.prototype.setOperation=function(t,e){this.Gc&&this.Gc.dispose(),this.Gc=new mw({operation:t,imageOps:"image"===this.Dc,queue:1,lib:e,threads:this.Uc}),this.changed()},e.prototype.Vc=function(t,e,n){var r=k({},this.Ji);r.viewState=k({},r.viewState);var i=De(t);r.extent=t.slice(),r.size[0]=Math.round(qe(t)/e),r.size[1]=Math.round(ze(t)/e),r.time=Date.now();var o=r.viewState;return o.center=i,o.projection=n,o.resolution=e,r},e.prototype.Xc=function(){for(var t=!0,e=0,n=this.qc.length;e<n;++e)if(this.qc[e].getSource().getState()!==ea){t=!1;break}return t},e.prototype.getImage=function(t,e,n,r){if(!this.Xc())return null;var i=this.Vc(t,e,r);if(this.Bc=i,this.Wc){var o=this.Wc.getResolution(),a=this.Wc.getExtent();e===o&&Se(t,a)||(this.Wc=null)}return this.Wc&&this.getRevision()===this.Sc||this.Hc(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.Wc},e.prototype.Hc=function(){for(var t=this.Bc,e=this.qc.length,n=new Array(e),r=0;r<e;++r){t.layerIndex=r;var i=xw(this.qc[r],t);if(!i)return;n[r]=i}var o={};this.dispatchEvent(new vw("beforeoperations",t,o)),this.Gc.process(n,o,this.Jc.bind(this,t))},e.prototype.Jc=function(t,e,n,r){if(!e&&n){var i,o=t.extent,a=t.viewState.resolution;a===this.Bc.viewState.resolution&&Se(o,this.Bc.extent)&&(this.Wc?i=this.Wc.getImage().getContext("2d"):(i=ho(Math.round(qe(o)/a),Math.round(ze(o)/a)),this.Wc=new co(o,a,1,i.canvas)),i.putImageData(n,0,0),this.changed(),this.Sc=this.getRevision(),this.dispatchEvent(new vw("afteroperations",t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this)))}},e.prototype.disposeInternal=function(){this.Gc&&this.Gc.dispose(),t.prototype.disposeInternal.call(this)},e}(gv);ww.prototype.dispose;var bw=null;function xw(t,e){var n=t.getRenderer();if(!n)throw new Error("Unsupported layer type: "+t);if(!n.prepareFrame(e))return null;var r=e.size[0],i=e.size[1];if(0===r||0===i)return null;var o,a=n.renderFrame(e,null);if(a instanceof HTMLCanvasElement)o=a;else{if(a&&(o=a.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===i)return o.getContext("2d").getImageData(0,0,r,i)}if(bw){var s=bw.canvas;s.width!==r||s.height!==i?bw=ho(r,i):bw.clearRect(0,0,r,i)}else bw=ho(r,i);return bw.drawImage(o,0,0,r,i),bw.getImageData(0,0,r,i)}function _w(t){var e;return t instanceof vf?t instanceof _f?e=new hw({source:t}):t instanceof gv&&(e=new rw({source:t})):e=t,e}var Ew=ww,Sw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cw=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Yv],Tw={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},Iw={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},Aw=function(t){function e(e){var n=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(n=e.interpolate);var r=e.layer.indexOf("-"),i=-1==r?e.layer:e.layer.slice(0,r),o=Iw[i],a=Tw[e.layer],s=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+a.extension;return t.call(this,{attributions:Cw,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:n,maxZoom:null!=e.maxZoom?e.maxZoom:o.maxZoom,minZoom:null!=e.minZoom?e.minZoom:o.minZoom,opaque:a.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})||this}return Sw(e,t),e}(Mf),Pw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kw=function(t){function e(e){var n=this,r=e||{},i=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(i=r.interpolate),(n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:i,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).xc=r.params||{},n.Su=void 0===r.hidpi||r.hidpi,n.Ao=[1/0,1/0,-1/0,-1/0],n.setKey(n.Kc()),n}return Pw(e,t),e.prototype.Kc=function(){var t=0,e=[];for(var n in this.xc)e[t++]=n+"-"+this.xc[n];return e.join("/")},e.prototype.getParams=function(){return this.xc},e.prototype.Mc=function(t,e,n,r,i,o){var a=this.urls;if(a){var s=i.getCode().split(/:(?=\d+$)/).pop();return o.SIZE=e[0]+","+e[1],o.BBOX=n.join(","),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),Tc((1==a.length?a[0]:a[sn(du(t),a.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.Su?t:1},e.prototype.updateParams=function(t){k(this.xc,t),this.setKey(this.Kc())},e.prototype.tileUrlFunction=function(t,e,n){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),!(r.getResolutions().length<=t[0])){1==e||this.Su||(e=1);var i=r.getTileCoordExtent(t,this.Ao),o=Bs(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=Gs(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return k(a,this.xc),this.Mc(t,o,i,e,n,a)}},e}(If),Ow=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mw=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,e){var r=t.getTileCoord()[0],i=Bs(n.tileGrid.getTileSize(r)),o=ho(i[0],i[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,i[0]+.5,i[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(e,i[0]/2,i[1]/2,i[0]),o.fillText(e,i[0]/2,i[1]/2,i[0]),t.setImage(o.canvas)}})||this}return Ow(e,t),e}(Mf),Nw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lw=function(t){function e(e){var n=this,r=void 0===e.imageSmoothing||e.imageSmoothing;if(void 0!==e.interpolate&&(r=e.interpolate),(n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:r,projection:cr("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ta,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).Yc=null,n.Oo=e.tileSize,e.url)if(e.jsonp)Du(e.url,n.handleTileJSONResponse.bind(n),n.handleTileJSONError.bind(n));else{var i=new XMLHttpRequest;i.addEventListener("load",n.Zc.bind(n)),i.addEventListener("error",n.$c.bind(n)),i.open("GET",e.url),i.send()}else e.tileJSON?n.handleTileJSONResponse(e.tileJSON):yt(!1,51);return n}return Nw(e,t),e.prototype.Zc=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n=void 0;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},e.prototype.$c=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.Yc},e.prototype.handleTileJSONResponse=function(t){var e,n=cr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var i=wr(n,r);e=Ze(t.bounds,i)}var o=bc(r),a=t.minzoom||0,s=mc({extent:o,maxZoom:t.maxzoom||22,minZoom:a,tileSize:this.Oo});if(this.tileGrid=s,this.tileUrlFunction=_c(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var l=void 0!==e?e:o;this.setAttributions((function(e){return We(l,e.extent)?[t.attribution]:null}))}this.Yc=t,this.setState(ea)},e.prototype.handleTileJSONError=function(){this.setState(na)},e}(If),Rw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dw=function(t){function e(e){var n=this,r=e||{},i=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(i=r.interpolate);var o=r.params||{},a=!("TRANSPARENT"in o)||o.TRANSPARENT;return(n=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:i,opaque:!a,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).Es=void 0!==r.gutter?r.gutter:0,n.xc=o,n.Ac=!0,n.Rc=r.serverType,n.Su=void 0===r.hidpi||r.hidpi,n.Ao=[1/0,1/0,-1/0,-1/0],n.Cc(),n.setKey(n.Kc()),n}return Rw(e,t),e.prototype.getFeatureInfoUrl=function(t,e,n,r){var i=cr(n),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),l=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=l[0])){var u=a.getResolution(l[0]),c=a.getTileCoordExtent(l,this.Ao),h=Bs(a.getTileSize(l[0]),this.tmpSize),p=this.Es;0!==p&&(h=js(h,p,this.tmpSize),c=pe(c,u*p,c)),o&&o!==i&&(u=uc(o,i,t,u),c=_r(c,i,o),t=xr(t,i,o));var f={SERVICE:"WMS",VERSION:Sv,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.xc.LAYERS};k(f,this.xc,r);var d=Math.floor((t[0]-c[0])/u),g=Math.floor((c[3]-t[1])/u);return f[this.Ac?"I":"X"]=d,f[this.Ac?"J":"Y"]=g,this.Mc(l,h,c,1,o||i,f)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var n={SERVICE:"WMS",VERSION:Sv,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var r=this.xc.LAYERS;if(Array.isArray(r)&&1!==r.length)return;n.LAYER=r}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*i/28e-5}return k(n,e),Tc(this.urls[0],n)}},e.prototype.getGutter=function(){return this.Es},e.prototype.getParams=function(){return this.xc},e.prototype.Mc=function(t,e,n,r,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.Ac?"CRS":"SRS"]=i.getCode(),"STYLES"in this.xc||(o.STYLES=""),1!=r)switch(this.Rc){case Tv:var s=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case Iv:o.MAP_RESOLUTION=90*r;break;case Cv:case Av:o.DPI=90*r;break;default:yt(!1,52)}var l=i.getAxisOrientation(),u=n;if(this.Ac&&"ne"==l.substr(0,2)){var c=void 0;c=n[0],u[0]=n[1],u[1]=c,c=n[2],u[2]=n[3],u[3]=c}return o.BBOX=u.join(","),Tc(1==a.length?a[0]:a[sn(du(t),a.length)],o)}},e.prototype.getTilePixelRatio=function(t){return this.Su&&void 0!==this.Rc?t:1},e.prototype.Kc=function(){var t=0,e=[];for(var n in this.xc)e[t++]=n+"-"+this.xc[n];return e.join("/")},e.prototype.updateParams=function(t){k(this.xc,t),this.Cc(),this.setKey(this.Kc())},e.prototype.Cc=function(){var t=this.xc.VERSION||Sv;this.Ac=jn(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,e,n){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),!(r.getResolutions().length<=t[0])){1==e||this.Su&&void 0!==this.Rc||(e=1);var i=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.Ao),a=Bs(r.getTileSize(t[0]),this.tmpSize),s=this.Es;0!==s&&(a=js(a,s,this.tmpSize),o=pe(o,i*s,o)),1!=e&&(a=Gs(a,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:Sv,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return k(l,this.xc),this.Mc(t,a,o,e,n,l)}},e}(If),Fw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jw=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n)||this;return s.Pt=r,s.st=i,s.Qc=o,s.th=null,s.nh=null,s.B=null,s.ih=a,s}return Fw(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.th||!this.nh)return null;var e=(t[0]-this.st[0])/(this.st[2]-this.st[0]),n=(t[1]-this.st[1])/(this.st[3]-this.st[1]),r=this.th[Math.floor((1-n)*this.th.length)];if("string"!=typeof r)return null;var i=r.charCodeAt(Math.floor(e*r.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.nh){var a=this.nh[i];o=this.B&&a in this.B?this.B[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,n){4==this.state&&!0===n?(this.state=0,Y(this,D,(function(n){e(this.getData(t))}),this),this.rh()):!0===n?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.Pt},e.prototype.Ic=function(){this.state=3,this.changed()},e.prototype.qt=function(t){this.th=t.grid,this.nh=t.keys,this.B=t.data,this.state=2,this.changed()},e.prototype.rh=function(){if(0==this.state)if(this.state=1,this.ih)Du(this.Pt,this.qt.bind(this),this.Ic.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.Zc.bind(this)),t.addEventListener("error",this.$c.bind(this)),t.open("GET",this.Pt),t.send()}},e.prototype.Zc=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n=void 0;try{n=JSON.parse(e.responseText)}catch(t){return void this.Ic()}this.qt(n)}else this.Ic()},e.prototype.$c=function(t){this.Ic()},e.prototype.load=function(){this.Qc?this.rh():this.setState(4)},e}(ft),zw=function(t){function e(e){var n=t.call(this,{projection:cr("EPSG:3857"),state:ta,zDirection:e.zDirection})||this;if(n.Qc=void 0===e.preemptive||e.preemptive,n.eh=Sc,n.oh=void 0,n.ih=e.jsonp||!1,e.url)if(n.ih)Du(e.url,n.handleTileJSONResponse.bind(n),n.handleTileJSONError.bind(n));else{var r=new XMLHttpRequest;r.addEventListener("load",n.Zc.bind(n)),r.addEventListener("error",n.$c.bind(n)),r.open("GET",e.url),r.send()}else e.tileJSON?n.handleTileJSONResponse(e.tileJSON):yt(!1,51);return n}return Fw(e,t),e.prototype.Zc=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n=void 0;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},e.prototype.$c=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.oh},e.prototype.forDataAtCoordinateAndResolution=function(t,e,n,r){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,n,r)}else!0===r?setTimeout((function(){n(null)}),0):n(null)},e.prototype.handleTileJSONError=function(){this.setState(na)},e.prototype.handleTileJSONResponse=function(t){var e,n=cr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var i=wr(n,r);e=Ze(t.bounds,i)}var o=bc(r),a=t.minzoom||0,s=mc({extent:o,maxZoom:t.maxzoom||22,minZoom:a});this.tileGrid=s,this.oh=t.template;var l=t.grids;if(l){if(this.eh=_c(l,s),void 0!==t.attribution){var u=void 0!==e?e:o;this.setAttributions((function(e){return We(u,e.extent)?[t.attribution]:null}))}this.setState(ea)}else this.setState(na)},e.prototype.getTile=function(t,e,n,r,i){var o=cu(t,e,n);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,i),l=this.eh(s,r,i),u=new jw(a,void 0!==l?0:4,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(a),this.Qc,this.ih);return this.tileCache.set(o,u),u},e.prototype.useTile=function(t,e,n){var r=cu(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(_f),Gw="KVP",Bw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uw=function(t){function e(e){var n=this,r=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(r=e.interpolate);var i=void 0!==e.requestEncoding?e.requestEncoding:Gw,o=e.tileGrid,a=e.urls;return void 0===a&&void 0!==e.url&&(a=Cc(e.url)),(n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:a,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).sh=void 0!==e.version?e.version:"1.0.0",n.Fe=void 0!==e.format?e.format:"image/jpeg",n.ah=void 0!==e.dimensions?e.dimensions:{},n.Bs=e.layer,n.uh=e.matrixSet,n.K=e.style,n.hh=i,n.setKey(n.fh()),a&&a.length>0&&(n.tileUrlFunction=Ec(a.map(n.createFromWMTSTemplate.bind(n)))),n}return Bw(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Ec(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.ah},e.prototype.getFormat=function(){return this.Fe},e.prototype.getLayer=function(){return this.Bs},e.prototype.getMatrixSet=function(){return this.uh},e.prototype.getRequestEncoding=function(){return this.hh},e.prototype.getStyle=function(){return this.K},e.prototype.getVersion=function(){return this.sh},e.prototype.fh=function(){var t=0,e=[];for(var n in this.ah)e[t++]=n+"-"+this.ah[n];return e.join("/")},e.prototype.updateDimensions=function(t){k(this.ah,t),this.setKey(this.fh())},e.prototype.createFromWMTSTemplate=function(t){var e=this.hh,n={layer:this.Bs,style:this.K,tilematrixset:this.uh};e==Gw&&k(n,{Service:"WMTS",Request:"GetTile",Version:this.sh,Format:this.Fe}),t=e==Gw?Tc(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}));var r=this.tileGrid,i=this.ah;return function(n,o,a){if(n){var s={TileMatrix:r.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};k(s,i);var l=t;return e==Gw?Tc(l,s):l.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}},e}(If),qw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ww="renderOrder",Vw=function(t){function e(e){var n=this,r=e||{},i=k({},r);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(n=t.call(this,i)||this).lh=void 0!==r.declutter&&r.declutter,n.dh=void 0!==r.renderBuffer?r.renderBuffer:100,n.K=null,n.tt=void 0,n.setStyle(r.style),n.ph=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.yh=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return qw(e,t),e.prototype.getDeclutter=function(){return this.lh},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.dh},e.prototype.getRenderOrder=function(){return this.get(Ww)},e.prototype.getStyle=function(){return this.K},e.prototype.getStyleFunction=function(){return this.tt},e.prototype.getUpdateWhileAnimating=function(){return this.ph},e.prototype.getUpdateWhileInteracting=function(){return this.yh},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new hf(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(Ww,t)},e.prototype.setStyle=function(t){this.K=void 0!==t?t:of,this.tt=null===t?void 0:nf(this.K),this.changed()},e}(oa),Hw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yw=function(t){function e(e,n){var r=this,i=n.uniforms||{},o=[1,0,0,1,0,0];i.u_projectionMatrix=o,(r=t.call(this,e,{uniforms:i,postProcesses:n.postProcesses})||this).ready=!1,r.mh=-1,r.wh=new lh(Ac,Oc),r.bh=new lh(Ac,Oc),r.gh=new lh(Pc,Oc),r.ta=n.vertexShader,r.na=n.fragmentShader,r.Qs,r.xh=!(!n.hitFragmentShader||!n.hitVertexShader),r.jh=n.hitVertexShader,r.Sh=n.hitFragmentShader,r.kh;var s=n.attributes?n.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:dh.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:dh.FLOAT},{name:"a_index",size:1,type:dh.FLOAT}].concat(s),r.hitDetectionAttributes=[{name:"a_position",size:2,type:dh.FLOAT},{name:"a_index",size:1,type:dh.FLOAT},{name:"a_hitColor",size:4,type:dh.FLOAT},{name:"a_featureUid",size:1,type:dh.FLOAT}].concat(s),r.customAttributes=n.attributes?n.attributes:[],r.Ki=[1/0,1/0,-1/0,-1/0],r.Mh=o,r._h=[1,0,0,1,0,0],r.Oh=[1,0,0,1,0,0],r.Th=new Float32Array(0),r.Eh=new Float32Array(0),r.Ah,r.Ch=0,r.Rh=function(){var t='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o,s=r.customAttributesCount,a=2+s,u=new Float32Array(r.renderInstructions),l=u.length/a,v=4*l*(s+3),c=new Uint32Array(6*l),g=new Float32Array(v),b=0;b<u.length;b+=a)o=i(u,b,g,c,s,o);var h=e({vertexBuffer:g.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[g.buffer,c.buffer,u.buffer])}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),r.Rh.addEventListener("message",function(t){var e=t.data;if(e.type===Rh){var n=e.projectionTransform;e.hitDetection?(this.bh.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.bh)):(this.wh.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.wh)),this.gh.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.gh),this._h=n,Qt(this.Oh,this._h),e.hitDetection?this.Eh=new Float32Array(t.data.renderInstructions):(this.Th=new Float32Array(t.data.renderInstructions),e.generateBuffersRun===this.Ch&&(this.ready=!0)),this.getLayer().changed()}}.bind(r)),r.Ph={},r.Ih=0;var l=r.getLayer().getSource();return r.Nh=[H(l,Rf,r.zh,r),H(l,Df,r.Fh,r),H(l,jf,r.Lh,r),H(l,Ff,r.Gh,r)],l.forEachFeature(function(t){this.Ph[a(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.Ih++}.bind(r)),r}return Hw(e,t),e.prototype.afterHelperCreated=function(){this.Qs=this.helper.getProgram(this.na,this.ta),this.xh&&(this.kh=this.helper.getProgram(this.Sh,this.jh),this.Ah=new Eh(this.helper))},e.prototype.zh=function(t){var e=t.feature;this.Ph[a(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.Ih++},e.prototype.Fh=function(t){var e=t.feature;this.Ph[a(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.Lh=function(t){var e=t.feature;delete this.Ph[a(e)],this.Ih--},e.prototype.Gh=function(){this.Ph={},this.Ih=0},e.prototype.renderFrame=function(t){var e=this.helper.getGL();this.preRender(e,t);var n=this.gh.getSize();this.helper.drawElements(0,n),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var r=this.helper.getCanvas();return this.xh&&(this.renderHitDetection(t),this.Ah.clearCachedData()),this.postRender(e,t),r},e.prototype.prepareFrameInternal=function(t){var e=this.getLayer(),n=e.getSource(),r=t.viewState,i=!t.viewHints[0]&&!t.viewHints[1],o=!Se(this.Ki,t.extent),a=this.mh<n.getRevision();if(a&&(this.mh=n.getRevision()),i&&(o||a)){var s=r.projection,l=r.resolution,u=e instanceof Vw?e.getRenderBuffer():0,c=pe(t.extent,u*l);n.loadFeatures(c,l,s),this.Dh(t),this.Ki=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.Mh),qt(this.Mh,this.Oh),this.helper.useProgram(this.Qs),this.helper.prepareDraw(t),this.helper.bindBuffer(this.wh),this.helper.bindBuffer(this.gh),this.helper.enableAttributes(this.attributes),!0},e.prototype.Dh=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var n,r,i=(2+this.customAttributes.length)*this.Ih;if(this.Th&&this.Th.length===i||(this.Th=new Float32Array(i)),this.xh){var o=(7+this.customAttributes.length)*this.Ih;this.Eh&&this.Eh.length===o||(this.Eh=new Float32Array(o))}var a,s=[],l=[],u=0,c=0;for(var h in this.Ph)if((r=(n=this.Ph[h]).geometry)&&r.getType()===St.POINT){s[0]=r.getFlatCoordinates()[0],s[1]=r.getFlatCoordinates()[1],Ht(e,s),a=Gh(c+6,l),this.Th[u++]=s[0],this.Th[u++]=s[1],this.xh&&(this.Eh[c++]=s[0],this.Eh[c++]=s[1],this.Eh[c++]=a[0],this.Eh[c++]=a[1],this.Eh[c++]=a[2],this.Eh[c++]=a[3],this.Eh[c++]=Number(h));for(var p=void 0,f=0;f<this.customAttributes.length;f++)p=this.customAttributes[f].callback(n.feature,n.properties),this.Th[u++]=p,this.xh&&(this.Eh[c++]=p)}var d={type:Rh,renderInstructions:this.Th.buffer,customAttributesCount:this.customAttributes.length};if(d.projectionTransform=e,d.generateBuffersRun=++this.Ch,this.ready=!1,this.Rh.postMessage(d,[this.Th.buffer]),this.Th=null,this.xh){var g={type:Rh,renderInstructions:this.Eh.buffer,customAttributesCount:5+this.customAttributes.length};g.projectionTransform=e,g.hitDetection=!0,this.Rh.postMessage(g,[this.Eh.buffer]),this.Eh=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){if(yt(this.xh,66),this.Eh){var o=Ht(e.coordinateToPixelTransform,t.slice()),a=this.Ah.readPixel(o[0]/2,o[1]/2),s=Bh([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),l=this.Eh[s],u=Math.floor(l).toString(),c=this.getLayer().getSource().getFeatureByUid(u);return c?r(c,this.getLayer(),null):void 0}},e.prototype.renderHitDetection=function(t){if(this.bh.getSize()){this.Ah.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.kh),this.helper.prepareDrawToRenderTarget(t,this.Ah,!0),this.helper.bindBuffer(this.bh),this.helper.bindBuffer(this.gh),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.gh.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.Rh.terminate(),this.Bs=null,this.Nh.forEach((function(t){X(t)})),this.Nh=null,t.prototype.disposeInternal.call(this)},e}(Uh),Xw={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Zw=[Xw.FILL],Kw=[Xw.STROKE],Jw=[Xw.BEGIN_PATH],Qw=[Xw.CLOSE_PATH],$w=Xw,tb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eb=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=n,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=r,o.Uh=null,o.qh=null,o.Bh=null,o.instructions=[],o.coordinates=[],o.Wh=[],o.hitDetectionInstructions=[],o.state={},o}return tb(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var n=this.getBufferedMaxExtent(),r=this.Wh,i=this.coordinates,o=i.length,a=0,s=t.length;a<s;a+=e)r[0]=t[a],r[1]=t[a+1],ge(n,r)&&(i[o++]=r[0],i[o++]=r[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,n,r,i,o){var a=this.coordinates,s=a.length,l=this.getBufferedMaxExtent();o&&(e+=r);var u,c,h,p=t[e],f=t[e+1],d=this.Wh,g=!0;for(u=e+r;u<n;u+=r)d[0]=t[u],d[1]=t[u+1],(h=ve(l,d))!==c?(g&&(a[s++]=p,a[s++]=f,g=!1),a[s++]=d[0],a[s++]=d[1]):h===ae?(a[s++]=d[0],a[s++]=d[1],g=!1):g=!0,p=d[0],f=d[1],c=h;return(i&&g||u===e+r)&&(a[s++]=p,a[s++]=f),s},e.prototype.Vh=function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o],l=this.appendFlatLineCoordinates(t,e,s,r,!1,!1);i.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,n,r){this.beginGeometry(t,e);var i,o,a,s,l,u=t.getType(),c=t.getStride(),h=this.coordinates.length;switch(u){case St.MULTI_POLYGON:i=t.getOrientedFlatCoordinates(),s=[];var p=t.getEndss();l=0;for(var f=0,d=p.length;f<d;++f){var g=[];l=this.Vh(i,l,p[f],c,g),s.push(g)}this.instructions.push([$w.CUSTOM,h,s,t,n,hi]),this.hitDetectionInstructions.push([$w.CUSTOM,h,s,t,r||n,hi]);break;case St.POLYGON:case St.MULTI_LINE_STRING:a=[],i=u==St.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),l=this.Vh(i,0,t.getEnds(),c,a),this.instructions.push([$w.CUSTOM,h,a,t,n,ci]),this.hitDetectionInstructions.push([$w.CUSTOM,h,a,t,r||n,ci]);break;case St.LINE_STRING:case St.CIRCLE:i=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(i,0,i.length,c,!1,!1),this.instructions.push([$w.CUSTOM,h,o,t,n,ui]),this.hitDetectionInstructions.push([$w.CUSTOM,h,o,t,r||n,ui]);break;case St.MULTI_POINT:i=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(i,c))>h&&(this.instructions.push([$w.CUSTOM,h,o,t,n,ui]),this.hitDetectionInstructions.push([$w.CUSTOM,h,o,t,r||n,ui]));break;case St.POINT:i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),o=this.coordinates.length,this.instructions.push([$w.CUSTOM,h,o,t,n]),this.hitDetectionInstructions.push([$w.CUSTOM,h,o,t,r||n])}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.Uh=[$w.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.Uh),this.qh=[$w.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.qh)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,r,i=e.length,o=-1;for(t=0;t<i;++t)(r=(n=e[t])[0])==$w.END_GEOMETRY?o=t:r==$w.BEGIN_GEOMETRY&&(n[2]=t,w(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=Tu(r||xa)}else n.fillStyle=void 0;if(e){var i=e.getColor();n.strokeStyle=Tu(i||Ta);var o=e.getLineCap();n.lineCap=void 0!==o?o:_a;var a=e.getLineDash();n.lineDash=a?a.slice():Ea;var s=e.getLineDashOffset();n.lineDashOffset=s||0;var l=e.getLineJoin();n.lineJoin=void 0!==l?l:Sa;var u=e.getWidth();n.lineWidth=void 0!==u?u:1;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:Ca,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.Bh=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,n=[$w.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[$w.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,r=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||i!=t.currentLineDash&&!_(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.Uh[2]=this.instructions.length,this.Uh=null,this.qh[2]=this.hitDetectionInstructions.length,this.qh=null;var e=[$w.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.Bh&&(this.Bh=fe(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;pe(this.Bh,t,this.Bh)}return this.Bh},e}(Uu),nb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rb=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.Ma=null,o.Nt=null,o.Xh=void 0,o.Hh=void 0,o.Jh=void 0,o.Kh=void 0,o.ua=void 0,o.Yh=void 0,o.Zh=void 0,o.ca=void 0,o.Dr=void 0,o.ha=void 0,o.Wa=void 0,o.$h=void 0,o}return nb(e,t),e.prototype.drawPoint=function(t,e){if(this.Nt){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([$w.DRAW_IMAGE,i,o,this.Nt,this.Hh*this.Xh,this.Jh*this.Xh,Math.ceil(this.Kh*this.Xh),this.ua,this.Yh,this.Zh,this.ca,this.Dr,[this.ha[0]*this.pixelRatio/this.Xh,this.ha[1]*this.pixelRatio/this.Xh],Math.ceil(this.Wa*this.Xh),this.$h]),this.hitDetectionInstructions.push([$w.DRAW_IMAGE,i,o,this.Ma,this.Hh,this.Jh,this.Kh,this.ua,this.Yh,this.Zh,this.ca,this.Dr,this.ha,this.Wa,this.$h]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.Nt){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([$w.DRAW_IMAGE,i,o,this.Nt,this.Hh*this.Xh,this.Jh*this.Xh,Math.ceil(this.Kh*this.Xh),this.ua,this.Yh,this.Zh,this.ca,this.Dr,[this.ha[0]*this.pixelRatio/this.Xh,this.ha[1]*this.pixelRatio/this.Xh],Math.ceil(this.Wa*this.Xh),this.$h]),this.hitDetectionInstructions.push([$w.DRAW_IMAGE,i,o,this.Ma,this.Hh,this.Jh,this.Kh,this.ua,this.Yh,this.Zh,this.ca,this.Dr,this.ha,this.Wa,this.$h]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Hh=void 0,this.Jh=void 0,this.Ma=null,this.Nt=null,this.Xh=void 0,this.Kh=void 0,this.ha=void 0,this.ua=void 0,this.Yh=void 0,this.Zh=void 0,this.ca=void 0,this.Dr=void 0,this.Wa=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),r=t.getSize(),i=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),a=t.getOrigin();this.Xh=t.getPixelRatio(this.pixelRatio),this.Hh=n[0],this.Jh=n[1],this.Ma=i,this.Nt=o,this.Kh=r[1],this.ua=t.getOpacity(),this.Yh=a[0]*this.Xh,this.Zh=a[1]*this.Xh,this.ca=t.getRotateWithView(),this.Dr=t.getRotation(),this.ha=t.getScaleArray(),this.Wa=r[0],this.$h=e},e}(eb),ib=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ob=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return ib(e,t),e.prototype.Qh=function(t,e,n,r){var i=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,r,!1,!1),a=[$w.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n},e.prototype.drawLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([$w.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ea,0],Jw);var o=t.getFlatCoordinates(),a=t.getStride();this.Qh(o,0,o.length,a),this.hitDetectionInstructions.push(Kw),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([$w.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Jw);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.Qh(a,l,o[u],s);this.hitDetectionInstructions.push(Kw),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Kw),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Kw),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Jw)},e}(eb),ab=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sb=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return ab(e,t),e.prototype.tf=function(t,e,n,r){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=n.length;this.instructions.push(Jw),this.hitDetectionInstructions.push(Jw);for(var l=0;l<s;++l){var u=n[l],c=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,u,r,!0,!a),p=[$w.MOVE_TO_LINE_TO,c,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(Qw),this.hitDetectionInstructions.push(Qw)),e=u}return o&&(this.instructions.push(Zw),this.hitDetectionInstructions.push(Zw)),a&&(this.instructions.push(Kw),this.hitDetectionInstructions.push(Kw)),e},e.prototype.drawCircle=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.nf(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([$w.SET_FILL_STYLE,xa]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([$w.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);var l=[$w.CIRCLE,s];this.instructions.push(Jw,l),this.hitDetectionInstructions.push(Jw,l),void 0!==n.fillStyle&&(this.instructions.push(Zw),this.hitDetectionInstructions.push(Zw)),void 0!==n.strokeStyle&&(this.instructions.push(Kw),this.hitDetectionInstructions.push(Kw)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.nf(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([$w.SET_FILL_STYLE,xa]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([$w.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.tf(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.nf(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([$w.SET_FILL_STYLE,xa]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([$w.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.tf(a,l,o[u],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var n=this.coordinates,r=0,i=n.length;r<i;++r)n[r]=oi(n[r],e);return t.prototype.finish.call(this)},e.prototype.nf=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(eb);function lb(t,e,n,r,i){var o,a,s,l,u,c,h,p,f,d=n,g=n,y=0,m=0,v=n;for(o=n;o<r;o+=i){var w=e[o],b=e[o+1];void 0!==l&&(p=w-l,f=b-u,s=Math.sqrt(p*p+f*f),void 0!==c&&(m+=a,Math.acos((c*p+h*f)/(a*s))>t&&(m>y&&(y=m,d=v,g=o),m=0,v=o-i)),a=s,c=p,h=f),l=w,u=b}return(m+=s)>y?[v,o]:[d,g]}var ub=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cb={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},hb=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.if=null,o.oo="",o.so=0,o.ao=0,o.uo=void 0,o.co=0,o.fo=null,o.fillStates={},o.lo=null,o.strokeStates={},o.vo={},o.textStates={},o.rf="",o.ef="",o.af="",o.$h=void 0,o}return ub(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var n=this.fo,r=this.lo,i=this.vo;if(""!==this.oo&&i&&(n||r)){var o=this.coordinates,a=o.length,s=t.getType(),l=null,u=t.getStride();if("line"!==i.placement||s!=St.LINE_STRING&&s!=St.MULTI_LINE_STRING&&s!=St.POLYGON&&s!=St.MULTI_POLYGON){var c=i.overflow?null:[];switch(s){case St.POINT:case St.MULTI_POINT:l=t.getFlatCoordinates();break;case St.LINE_STRING:l=t.getFlatMidpoint();break;case St.CIRCLE:l=t.getCenter();break;case St.MULTI_LINE_STRING:l=t.getFlatMidpoints(),u=2;break;case St.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||c.push(l[2]/this.resolution),u=3;break;case St.MULTI_POLYGON:var h=t.getFlatInteriorPoints();for(l=[],_=0,E=h.length;_<E;_+=3)i.overflow||c.push(h[_+2]/this.resolution),l.push(h[_],h[_+1]);if(0===l.length)return;u=2}if((k=this.appendFlatPointCoordinates(l,u))===a)return;if(c&&(k-a)/2!=l.length/u){var p=a/2;c=c.filter((function(t,e){var n=o[2*(p+e)]===l[e*u]&&o[2*(p+e)+1]===l[e*u+1];return n||--p,n}))}this.uf(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var f=i.padding;if(f!=Pa&&(i.scale[0]<0||i.scale[1]<0)){var d=i.padding[0],g=i.padding[1],y=i.padding[2],m=i.padding[3];i.scale[0]<0&&(g=-g,m=-m),i.scale[1]<0&&(d=-d,y=-y),f=[d,g,y,m]}var v=this.pixelRatio;this.instructions.push([$w.DRAW_IMAGE,a,k,null,NaN,NaN,NaN,1,0,0,this.uo,this.co,[1,1],NaN,this.$h,f==Pa?Pa:f.map((function(t){return t*v})),!!i.backgroundFill,!!i.backgroundStroke,this.oo,this.rf,this.af,this.ef,this.so,this.ao,c]);var w=1/v;this.hitDetectionInstructions.push([$w.DRAW_IMAGE,a,k,null,NaN,NaN,NaN,1,0,0,this.uo,this.co,[w,w],NaN,this.$h,f,!!i.backgroundFill,!!i.backgroundStroke,this.oo,this.rf,this.af,this.ef,this.so,this.ao,c]),this.endGeometry(e)}else{if(!We(this.getBufferedMaxExtent(),t.getExtent()))return;var b=void 0;if(l=t.getFlatCoordinates(),s==St.LINE_STRING)b=[l.length];else if(s==St.MULTI_LINE_STRING)b=t.getEnds();else if(s==St.POLYGON)b=t.getEnds().slice(0,1);else if(s==St.MULTI_POLYGON){var x=t.getEndss();b=[];for(var _=0,E=x.length;_<E;++_)b.push(x[_][0])}this.beginGeometry(t,e);for(var S=i.textAlign,C=0,T=void 0,I=0,A=b.length;I<A;++I){if(null==S){var P=lb(i.maxAngle,l,C,b[I],u);C=P[0],T=P[1]}else T=b[I];for(_=C;_<T;_+=u)o.push(l[_],l[_+1]);var k=o.length;C=b[I],this.cf(a,k),a=k}this.endGeometry(e)}}},e.prototype.uf=function(){var t=this.lo,e=this.vo,n=this.fo,r=this.af;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.rf;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||Ia,textBaseline:e.textBaseline||Aa,scale:e.scale});var o=this.ef;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))},e.prototype.cf=function(t,e){var n=this.lo,r=this.vo,i=this.af,o=this.rf,a=this.ef;this.uf();var s=this.pixelRatio,l=cb[r.textBaseline],u=this.ao*s,c=this.oo,h=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([$w.DRAW_CHARS,t,e,l,r.overflow,a,r.maxAngle,s,u,i,h*s,c,o,1]),this.hitDetectionInstructions.push([$w.DRAW_CHARS,t,e,l,r.overflow,a,r.maxAngle,1,u,i,h,c,o,1/s])},e.prototype.setTextStyle=function(t,e){var n,r,i;if(t){var o=t.getFill();o?((r=this.fo)||(r={},this.fo=r),r.fillStyle=Tu(o.getColor()||xa)):(r=null,this.fo=r);var s=t.getStroke();if(s){(i=this.lo)||(i={},this.lo=i);var l=s.getLineDash(),u=s.getLineDashOffset(),c=s.getWidth(),h=s.getMiterLimit();i.lineCap=s.getLineCap()||_a,i.lineDash=l?l.slice():Ea,i.lineDashOffset=void 0===u?0:u,i.lineJoin=s.getLineJoin()||Sa,i.lineWidth=void 0===c?1:c,i.miterLimit=void 0===h?Ca:h,i.strokeStyle=Tu(s.getColor()||Ta)}else i=null,this.lo=i;n=this.vo;var p=t.getFont()||ba;Da(p);var f=t.getScaleArray();n.overflow=t.getOverflow(),n.font=p,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||Aa,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Pa,n.scale=void 0===f?[1,1]:f;var d=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),m=t.getRotation();this.oo=t.getText()||"",this.so=void 0===d?0:d,this.ao=void 0===g?0:g,this.uo=void 0!==y&&y,this.co=void 0===m?0:m,this.af=i?("string"==typeof i.strokeStyle?i.strokeStyle:a(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.rf=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.ef=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+a(r.fillStyle):""}else this.oo="";this.$h=e},e}(eb),pb={Circle:sb,Default:eb,Image:rb,LineString:ob,Polygon:sb,Text:hb},fb=function(){function t(t,e,n,r){this.hf=t,this.ff=e,this.Rt=r,this.lf=n,this.vf={}}return t.prototype.finish=function(){var t={};for(var e in this.vf){t[e]=t[e]||{};var n=this.vf[e];for(var r in n){var i=n[r].finish();t[e][r]=i}}return t},t.prototype.getBuilder=function(t,e){var n=void 0!==t?t.toString():"0",r=this.vf[n];void 0===r&&(r={},this.vf[n]=r);var i=r[e];return void 0===i&&(i=new(0,pb[e])(this.hf,this.ff,this.lf,this.Rt),r[e]=i),i},t}();function db(t,e,n,r,i,o,a,s,l,u,c,h){var p=t[e],f=t[e+1],d=0,g=0,y=0,m=0;function v(){d=p,g=f,p=t[e+=r],f=t[e+1],m+=y,y=Math.sqrt((p-d)*(p-d)+(f-g)*(f-g))}do{v()}while(e<n-r&&m+y<o);for(var w=0===y?0:(o-m)/y,b=ln(d,p,w),x=ln(g,f,w),_=e-r,E=m,S=o+s*l(u,i,c);e<n-r&&m+y<S;)v();var C,T=ln(d,p,w=0===y?0:(S-m)/y),I=ln(g,f,w);if(h){var A=[b,x,T,I];Rr(A,0,4,2,h,A,A),C=A[0]>A[2]}else C=b>T;var P,k=Math.PI,O=[],M=_+r===e;if(y=0,m=E,p=t[e=_],f=t[e+1],M){v(),P=Math.atan2(f-g,p-d),C&&(P+=P>0?-k:k);var N=(T+b)/2,L=(I+x)/2;return O[0]=[N,L,(S-o)/2,P,i],O}for(var R=0,D=i.length;R<D;){v();var F=Math.atan2(f-g,p-d);if(C&&(F+=F>0?-k:k),void 0!==P){var j=F-P;if(j+=j>k?-2*k:j<-k?2*k:0,Math.abs(j)>a)return null}P=F;for(var z=R,G=0;R<D;++R){var B=s*l(u,i[C?D-R-1:R],c);if(e+r<n&&m+y<o+G+B/2)break;G+=B}if(R!==z){var U=C?i.substring(D-z,D-R):i.substring(z,R);N=ln(d,p,w=0===y?0:(o+G/2-m)/y),L=ln(g,f,w),O.push([N,L,G/2,F,U]),o+=G}}return O}function gb(t,e,n,r){for(var i=t[e],o=t[e+1],a=0,s=e+r;s<n;s+=r){var l=t[s],u=t[s+1];a+=Math.sqrt((l-i)*(l-i)+(u-o)*(u-o)),i=l,o=u}return a}var yb=[1/0,1/0,-1/0,-1/0],mb=[],vb=[],wb=[],bb=[];function xb(t){return t[3].declutterBox}var _b=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Eb(t,e){return"start"!==e&&"end"!==e||_b.test(t)||(e="start"===e?"left":"right"),cb[e]}function Sb(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}var Cb=function(){function t(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.df,this.instructions=r.instructions,this.coordinates=r.coordinates,this.pf={},this.yf=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.do=null,this.De=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.mf={},this.if={}}return t.prototype.createLabel=function(t,e,n,r){var i=t+e+n+r;if(this.if[i])return this.if[i];var o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,s=this.textStates[e],l=this.pixelRatio,u=[s.scale[0]*l,s.scale[1]*l],c=Array.isArray(t),h=Eb(c?t[0]:t,s.textAlign||Ia),p=r&&o.lineWidth?o.lineWidth:0,f=c?t:t.split("\n").reduce(Sb,[]),d=Ba(s,f),g=d.width,y=d.height,m=d.widths,v=d.heights,w=d.lineWidths,b=g+p,x=[],_=(b+2)*u[0],E=(y+p)*u[1],S={width:_<0?Math.floor(_):Math.ceil(_),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:x};1==u[0]&&1==u[1]||x.push("scale",u),r&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",p),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),(jt?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset))),n&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");for(var C,T=.5-h,I=h*b+T*p,A=[],P=[],k=0,O=0,M=0,N=0,L=0,R=f.length;L<R;L+=2){var D=f[L];if("\n"!==D){var F=f[L+1]||s.font;F!==C&&(r&&A.push("font",F),n&&P.push("font",F),C=F),k=Math.max(k,v[M]);var j=[D,I+T*m[M]+h*(m[M]-w[N]),.5*(p+k)+O];I+=m[M],r&&A.push("strokeText",j),n&&P.push("fillText",j),++M}else O+=k,k=0,I=h*b+T*p,++N}return Array.prototype.push.apply(x,A),Array.prototype.push.apply(x,P),this.if[i]=S,S},t.prototype.wf=function(t,e,n,r,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.df=o[2],this.da(t)),a&&(this.bf(t,a),t.stroke())},t.prototype.gf=function(t,e,n,r,i,o,a,s,l,u,c,h,p,f,d,g){var y,m=n-(a*=h[0]),v=r-(s*=h[1]),w=i+l>t?t-l:i,b=o+u>e?e-u:o,x=f[3]+w*h[0]+f[1],_=f[0]+b*h[1]+f[2],E=m-f[3],S=v-f[0];return(d||0!==c)&&(mb[0]=E,bb[0]=E,mb[1]=S,vb[1]=S,vb[0]=E+x,wb[0]=vb[0],wb[1]=S+_,bb[1]=wb[1]),0!==c?(Ht(y=Jt([1,0,0,1,0,0],n,r,1,1,c,-n,-r),mb),Ht(y,vb),Ht(y,wb),Ht(y,bb),be(Math.min(mb[0],vb[0],wb[0],bb[0]),Math.min(mb[1],vb[1],wb[1],bb[1]),Math.max(mb[0],vb[0],wb[0],bb[0]),Math.max(mb[1],vb[1],wb[1],bb[1]),yb)):be(Math.min(E,E+x),Math.min(S,S+_),Math.max(E,E+x),Math.max(S,S+_),yb),p&&(m=Math.round(m),v=Math.round(v)),{drawImageX:m,drawImageY:v,drawImageW:w,drawImageH:b,originX:l,originY:u,declutterBox:{minX:yb[0],minY:yb[1],maxX:yb[2],maxY:yb[3],value:g},canvasTransform:y,scale:h}},t.prototype.xf=function(t,e,n,r,i,o,a){var s=!(!o&&!a),l=r.declutterBox,u=t.canvas,c=a?a[2]*r.scale[0]/2:0;return l.minX-c<=u.width/e&&l.maxX+c>=0&&l.minY-c<=u.height/e&&l.maxY+c>=0&&(s&&this.wf(t,mb,vb,wb,bb,o,a),Ua(t,r.canvasTransform,i,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.da=function(t){if(this.df){var e=Ht(this.yf,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.De)}t.fill(),this.df&&t.restore()},t.prototype.bf=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.jf=function(t,e,n,r){var i=this.textStates[e],o=this.createLabel(t,e,r,n),a=this.strokeStates[n],s=this.pixelRatio,l=Eb(Array.isArray(t)?t[0]:t,i.textAlign||Ia),u=cb[i.textBaseline||Aa],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/s-2*i.scale[0])+2*(.5-l)*c,anchorY:u*o.height/s+2*(.5-u)*c}},t.prototype.Sf=function(t,e,n,r,i,o,a,s){var l;this.do&&_(n,this.yf)?l=this.do:(this.do||(this.do=[]),l=Lr(this.coordinates,0,this.coordinates.length,2,n,this.do),Vt(this.yf,n));for(var u,c,h,p,f,d,g,y,m,v,w,b,x,E,S,C,T=0,I=r.length,A=0,P=0,k=0,O=null,M=null,N=this.pf,L=this.De,R=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},F=this.instructions!=r||this.overlaps?0:200;T<I;){var j=r[T];switch(j[0]){case $w.BEGIN_GEOMETRY:x=j[1],C=j[3],x.getGeometry()?void 0===a||We(a,C.getExtent())?++T:T=j[2]+1:T=j[2];break;case $w.BEGIN_PATH:P>F&&(this.da(t),P=0),k>F&&(t.stroke(),k=0),P||k||(t.beginPath(),p=NaN,f=NaN),++T;break;case $w.CIRCLE:var z=l[A=j[1]],G=l[A+1],B=l[A+2]-z,U=l[A+3]-G,q=Math.sqrt(B*B+U*U);t.moveTo(z+q,G),t.arc(z,G,q,0,2*Math.PI,!0),++T;break;case $w.CLOSE_PATH:t.closePath(),++T;break;case $w.CUSTOM:A=j[1],u=j[2];var W=j[3],V=j[4],H=6==j.length?j[5]:void 0;D.geometry=W,D.feature=x,T in N||(N[T]=[]);var Y=N[T];H?H(l,A,u,2,Y):(Y[0]=l[A],Y[1]=l[A+1],Y.length=2),V(Y,D),++T;break;case $w.DRAW_IMAGE:A=j[1],u=j[2],y=j[3],c=j[4],h=j[5];var X=j[6],Z=j[7],K=j[8],J=j[9],Q=j[10],$=j[11],tt=j[12],et=j[13],nt=j[14];if(!y&&j.length>=19){m=j[18],v=j[19],w=j[20],b=j[21];var rt=this.jf(m,v,w,b);y=rt.label,j[3]=y;var it=j[22];c=(rt.anchorX-it)*this.pixelRatio,j[4]=c;var ot=j[23];h=(rt.anchorY-ot)*this.pixelRatio,j[5]=h,X=y.height,j[6]=X,et=y.width,j[13]=et}var at=void 0;j.length>24&&(at=j[24]);var st=void 0,lt=void 0,ut=void 0;j.length>16?(st=j[15],lt=j[16],ut=j[17]):(st=Pa,lt=!1,ut=!1),Q&&R?$+=L:Q||R||($-=L);for(var ct=0;A<u;A+=2)if(!(at&&at[ct++]<et/this.pixelRatio)){var ht=[t,e,y,jt=this.gf(y.width,y.height,l[A],l[A+1],et,X,c,h,K,J,$,tt,i,st,lt||ut,x),Z,lt?O:null,ut?M:null],pt=void 0,ft=void 0;if(s&&nt){var dt=u-A;if(!nt[dt]){nt[dt]=ht;continue}if(pt=nt[dt],delete nt[dt],ft=xb(pt),s.collides(ft))continue}s&&s.collides(jt.declutterBox)||(pt&&(s&&s.insert(ft),this.xf.apply(this,pt)),s&&s.insert(jt.declutterBox),this.xf.apply(this,ht))}++T;break;case $w.DRAW_CHARS:var gt=j[1],yt=j[2],mt=j[3],vt=j[4];b=j[5];var wt=j[6],bt=j[7],xt=j[8];w=j[9];var _t=j[10];m=j[11],v=j[12];var Et=[j[13],j[13]],St=this.textStates[v],Ct=St.font,Tt=[St.scale[0]*bt,St.scale[1]*bt],It=void 0;Ct in this.mf?It=this.mf[Ct]:(It={},this.mf[Ct]=It);var At=gb(l,gt,yt,2),Pt=Math.abs(Tt[0])*Ga(Ct,m,It);if(vt||Pt<=At){var kt=this.textStates[v].textAlign,Ot=db(l,gt,yt,2,m,(At-Pt)*cb[kt],wt,Math.abs(Tt[0]),Ga,Ct,It,R?0:this.De);t:if(Ot){var Mt=[],Nt=void 0,Lt=void 0,Rt=void 0,Dt=void 0,Ft=void 0;if(w)for(Nt=0,Lt=Ot.length;Nt<Lt;++Nt){Rt=(Ft=Ot[Nt])[4],Dt=this.createLabel(Rt,v,"",w),c=Ft[2]+(Tt[0]<0?-_t:_t),h=mt*Dt.height+2*(.5-mt)*_t*Tt[1]/Tt[0]-xt;var jt=this.gf(Dt.width,Dt.height,Ft[0],Ft[1],Dt.width,Dt.height,c,h,0,0,Ft[3],Et,!1,Pa,!1,x);if(s&&s.collides(jt.declutterBox))break t;Mt.push([t,e,Dt,jt,1,null,null])}if(b)for(Nt=0,Lt=Ot.length;Nt<Lt;++Nt){if(Rt=(Ft=Ot[Nt])[4],Dt=this.createLabel(Rt,v,b,""),c=Ft[2],h=mt*Dt.height-xt,jt=this.gf(Dt.width,Dt.height,Ft[0],Ft[1],Dt.width,Dt.height,c,h,0,0,Ft[3],Et,!1,Pa,!1,x),s&&s.collides(jt.declutterBox))break t;Mt.push([t,e,Dt,jt,1,null,null])}s&&s.load(Mt.map(xb));for(var zt=0,Gt=Mt.length;zt<Gt;++zt)this.xf.apply(this,Mt[zt])}}++T;break;case $w.END_GEOMETRY:if(void 0!==o){var Bt=o(x=j[1],C);if(Bt)return Bt}++T;break;case $w.FILL:F?P++:this.da(t),++T;break;case $w.MOVE_TO_LINE_TO:for(A=j[1],u=j[2],E=l[A],g=(S=l[A+1])+.5|0,(d=E+.5|0)===p&&g===f||(t.moveTo(E,S),p=d,f=g),A+=2;A<u;A+=2)d=(E=l[A])+.5|0,g=(S=l[A+1])+.5|0,A!=u-2&&d===p&&g===f||(t.lineTo(E,S),p=d,f=g);++T;break;case $w.SET_FILL_STYLE:O=j,this.df=j[2],P&&(this.da(t),P=0,k&&(t.stroke(),k=0)),t.fillStyle=j[1],++T;break;case $w.SET_STROKE_STYLE:M=j,k&&(t.stroke(),k=0),this.bf(t,j),++T;break;case $w.STROKE:F?k++:t.stroke(),++T;break;default:++T}}P&&this.da(t),k&&t.stroke()},t.prototype.execute=function(t,e,n,r,i,o){this.De=r,this.Sf(t,e,n,this.instructions,i,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,n,r,i){return this.De=n,this.Sf(t,1,e,this.hitDetectionInstructions,!0,r,i)},t}(),Tb=[Zu,Vu,Xu,Yu,Ku,Hu],Ib=function(){function t(t,e,n,r,i,o){this.ff=t,this.zu=r,this.Rt=n,this.lf=e,this.dh=o,this.kf={},this.Mf=null,this._f=[1,0,0,1,0,0],this.Of(i)}return t.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},t.prototype.Of=function(t){for(var e in t){var n=this.kf[e];void 0===n&&(n={},this.kf[e]=n);var r=t[e];for(var i in r){var o=r[i];n[i]=new Cb(this.lf,this.Rt,this.zu,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.kf)for(var n=this.kf[e],r=0,i=t.length;r<i;++r)if(t[r]in n)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o){var a=2*(r=Math.round(r))+1,s=Jt(this._f,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.Mf;l&&(this.Mf=ho(a,a));var u,c=this.Mf;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):l||c.clearRect(0,0,a,a),void 0!==this.dh&&(Ie(u=[1/0,1/0,-1/0,-1/0],t),pe(u,e*(this.dh+r),u));var h,p=Pb(r);function f(t,e){for(var n=c.getImageData(0,0,a,a).data,s=0,l=p.length;s<l;s++)if(n[p[s]]>0){if(!o||h!==Yu&&h!==Ku||-1!==o.indexOf(t)){var u=(p[s]-3)/4,f=r-u%a,d=r-(u/a|0),g=i(t,e,f*f+d*d);if(g)return g}c.clearRect(0,0,a,a);break}}var d,g,m,v,w,b=Object.keys(this.kf).map(Number);for(b.sort(y),d=b.length-1;d>=0;--d){var x=b[d].toString();for(m=this.kf[x],g=Tb.length-1;g>=0;--g)if(void 0!==(v=m[h=Tb[g]])&&(w=v.executeHitDetection(c,s,n,f,u)))return w}},t.prototype.getClipCoords=function(t){var e=this.ff;if(!e)return null;var n=e[0],r=e[1],i=e[2],o=e[3],a=[n,r,n,o,i,o,i,r];return Lr(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return N(this.kf)},t.prototype.execute=function(t,e,n,r,i,o,a){var s=Object.keys(this.kf).map(Number);s.sort(y),this.ff&&(t.save(),this.clip(t,n));var l,u,c,h,p,f,d=o||Tb;for(a&&s.reverse(),l=0,u=s.length;l<u;++l){var g=s[l].toString();for(p=this.kf[g],c=0,h=d.length;c<h;++c)void 0!==(f=p[d[c]])&&f.execute(t,e,n,r,i,a)}this.ff&&t.restore()},t}(),Ab={};function Pb(t){if(void 0!==Ab[t])return Ab[t];for(var e=2*t+1,n=t*t,r=new Array(n+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var a=i*i+o*o;if(a>n)break;var s=r[a];s||(s=[],r[a]=s),s.push(4*((t+i)*e+(t+o))+3),i>0&&s.push(4*((t-i)*e+(t+o))+3),o>0&&(s.push(4*((t+i)*e+(t-o))+3),i>0&&s.push(4*((t-i)*e+(t-o))+3))}for(var l=[],u=(i=0,r.length);i<u;++i)r[i]&&l.push.apply(l,r[i]);return Ab[t]=l,l}var kb=Ib,Ob=.5;function Mb(t,e,n,r,i,o,a){var s=ho(t[0]*Ob,t[1]*Ob);s.imageSmoothingEnabled=!1;for(var l=s.canvas,u=new Wu(s,Ob,i,null,a),c=n.length,h=Math.floor(16777215/c),p={},f=1;f<=c;++f){var d=n[f-1],g=d.getStyleFunction()||r;if(r){var m=g(d,o);if(m){Array.isArray(m)||(m=[m]);for(var v="#"+("000000"+(f*h).toString(16)).slice(-6),w=0,b=m.length;w<b;++w){var x=m[w],_=x.getGeometryFunction()(d);if(_&&We(i,_.getExtent())){var E=x.clone(),S=E.getFill();S&&S.setColor(v);var C=E.getStroke();C&&(C.setColor(v),C.setLineDash(null)),E.setText(void 0);var T=x.getImage();if(T&&0!==T.getOpacity()){var I=T.getImageSize();if(!I)continue;var A=ho(I[0],I[1],void 0,{alpha:!1}),P=A.canvas;A.fillStyle=v,A.fillRect(0,0,P.width,P.height),E.setImage(new Qp({img:P,imgSize:I,anchor:T.getAnchor(),anchorXUnits:Bp,anchorYUnits:Bp,offset:T.getOrigin(),opacity:1,size:T.getSize(),scale:T.getScale(),rotation:T.getRotation(),rotateWithView:T.getRotateWithView()}))}var k=E.getZIndex()||0;(N=p[k])||(N={},p[k]=N,N[St.POLYGON]=[],N[St.CIRCLE]=[],N[St.LINE_STRING]=[],N[St.POINT]=[]),N[_.getType().replace("Multi","")].push(_,E)}}}}}for(var O=Object.keys(p).map(Number).sort(y),M=(f=0,O.length);f<M;++f){var N=p[O[f]];for(var L in N){var R=N[L];for(w=0,b=R.length;w<b;w+=2){u.setStyle(R[w+1]);for(var D=0,F=e.length;D<F;++D)u.setTransform(e[D]),u.drawGeometry(R[w])}}}return s.getImageData(0,0,l.width,l.height)}function Nb(t,e,n){var r=[];if(n){var i=Math.floor(Math.round(t[0])*Ob),o=Math.floor(Math.round(t[1])*Ob),a=4*(Qe(i,0,n.width-1)+Qe(o,0,n.height-1)*n.width),s=n.data[a],l=n.data[a+1],u=n.data[a+2]+256*(l+256*s),c=Math.floor(16777215/e.length);u&&u%c==0&&r.push(e[u/c-1])}return r}var Lb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rb=function(t){function e(e){var n=t.call(this,e)||this;return n.Tf=n.Ef.bind(n),n.Af,n.Cf=!1,n.Rf=null,n.Pf=null,n.Sc=-1,n.If=NaN,n.zc=[1/0,1/0,-1/0,-1/0],n.Nf=[1/0,1/0,-1/0,-1/0],n.zf,n.Ff=null,n.Lf=null,n.Gf=null,n.Df=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return Lb(e,t),e.prototype.renderWorlds=function(t,e,n){var r=e.extent,i=e.viewState,o=i.center,a=i.resolution,s=i.projection,l=i.rotation,u=s.getExtent(),c=this.getLayer().getSource(),h=e.pixelRatio,p=e.viewHints,f=!(p[0]||p[1]),d=this.context,g=Math.round(e.size[0]*h),y=Math.round(e.size[1]*h),m=c.getWrapX()&&s.canWrapX(),v=m?qe(u):null,w=m?Math.ceil((r[2]-u[2])/v)+1:1,b=m?Math.floor((r[0]-u[0])/v):0;do{var x=this.getRenderTransform(o,a,l,h,g,y,b*v);t.execute(d,1,x,l,f,void 0,n)}while(++b<w)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var n=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];Zt(this.pixelTransform,1/n,1/n),Qt(this.inversePixelTransform,this.pixelTransform);var i=te(this.pixelTransform);this.useContainer(e,i,r.opacity,this.getBackground(t));var o=this.context,a=o.canvas,s=this.Df,l=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!l||l.isEmpty()))return null;var u=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);a.width!=u||a.height!=c?(a.width=u,a.height=c,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,u,c),this.preRender(o,t);var h=t.viewState,p=h.projection,f=!1,d=!0;if(r.extent&&this.clipping){var g=Pr(r.extent,p);(f=(d=We(g,t.extent))&&!ye(g,t.extent))&&this.clipUnrotated(o,t,g)}d&&this.renderWorlds(s,t),f&&o.restore(),this.postRender(o,t);var y=wa(r.opacity),m=this.container;return y!==m.style.opacity&&(m.style.opacity=y),this.zf!==h.rotation&&(this.zf=h.rotation,this.Rf=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.Rf&&!this.Af){var n=[this.context.canvas.width,this.context.canvas.height];Ht(this.pixelTransform,n);var r=this.Ff,i=this.If,o=this.zf,a=this.Lf,s=this.Nf,l=this.getLayer(),u=[],c=n[0]*Ob,h=n[1]*Ob;u.push(this.getRenderTransform(r,i,o,Ob,c,h,0).slice());var p=l.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!ye(f,s)){for(var d=s[0],g=qe(f),y=0,m=void 0;d<f[0];)m=g*--y,u.push(this.getRenderTransform(r,i,o,Ob,c,h,m).slice()),d+=g;for(y=0,d=s[2];d>f[2];)m=g*++y,u.push(this.getRenderTransform(r,i,o,Ob,c,h,m).slice()),d-=g}this.Rf=Mb(n,u,this.Pf,l.getStyleFunction(),s,i,o)}e(Nb(t,this.Pf,this.Rf))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=this;if(this.Df){var s,l=e.viewState.resolution,u=e.viewState.rotation,c=this.getLayer(),h={},p=function(t,e,n){var o=a(t),s=h[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return h[o]=!0,i.splice(i.lastIndexOf(s),1),r(t,c,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return h[o]=!0,r(t,c,e);i.push(h[o]={feature:t,layer:c,geometry:e,distanceSq:n,callback:r})}},f=[this.Df];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some((function(r){return s=r.forEachFeatureAtCoordinate(t,l,u,n,p,r===o.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),s}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.Df&&t.changed()},e.prototype.Ef=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource();if(!n)return!1;var r=t.viewHints[0],i=t.viewHints[1],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.Cf&&!o&&r||!a&&i)return this.Af=!0,!0;this.Af=!1;var s=t.extent,l=t.viewState,u=l.projection,c=l.resolution,h=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=Qu);var g=l.center.slice(),y=pe(s,f*c),m=y.slice(),v=[y.slice()],w=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!ye(w,t.extent)){var b=qe(w),x=Math.max(qe(y)/2,b);y[0]=w[0]-x,y[2]=w[2]+x,Jn(g,u);var E=Ke(v[0],u);E[0]<w[0]&&E[2]<w[2]?v.push([E[0]+b,E[1],E[2]+b,E[3]]):E[0]>w[0]&&E[2]>w[2]&&v.push([E[0]-b,E[1],E[2]-b,E[3]])}if(!this.Cf&&this.If==c&&this.Sc==p&&this.Gf==d&&ye(this.Nf,y))return _(this.zc,m)||(this.Rf=null,this.zc=m),this.Ff=g,this.replayGroupChanged=!1,!0;this.Df=null,this.Cf=!1;var S,C=new fb(tc(c,h),y,c,h);this.getLayer().getDeclutter()&&(S=new fb(tc(c,h),y,c,h));var T,I=Cr();if(I){for(var A=0,P=v.length;A<P;++A){var k=Ar(v[A],u);n.loadFeatures(k,kr(c,u),I)}T=wr(I,u)}else for(A=0,P=v.length;A<P;++A)n.loadFeatures(v[A],c,u);var O=$u(c,h),M=function(t){var n,r=t.getStyleFunction()||e.getStyleFunction();if(r&&(n=r(t,c)),n){var i=this.renderFeature(t,O,n,C,T,S);this.Cf=this.Cf||i}}.bind(this),N=Ar(y,u),L=n.getFeaturesInExtent(N);for(d&&L.sort(d),A=0,P=L.length;A<P;++A)M(L[A]);this.Pf=L;var R=C.finish(),D=new kb(y,c,h,n.getOverlaps(),R,e.getRenderBuffer());return S&&(this.declutterExecutorGroup=new kb(y,c,h,n.getOverlaps(),S.finish(),e.getRenderBuffer())),this.If=c,this.Sc=p,this.Gf=d,this.zc=m,this.Nf=y,this.Ff=g,this.Lf=u,this.Df=D,this.Rf=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,r,i,o){if(!n)return!1;var a=!1;if(Array.isArray(n))for(var s=0,l=n.length;s<l;++s)a=ec(r,t,n[s],e,this.Tf,i,o)||a;else a=ec(r,t,n,e,this.Tf,i,o);return a},e}($v),Db=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fb=function(t){function e(e){var n=t.call(this,e)||this;return n.Uf=new Rb(e),n.qf=e.getImageRatio(),n.Bf=[1,0,0,1,0,0],n.Wf=null,n}return Db(e,t),e.prototype.disposeInternal=function(){this.Uf.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(!this.Uf)return new Promise((function(t){return t([])}));var e=Ht(this.Bf,Ht(this.Wf,t.slice()));return this.Uf.getFeatures(e)},e.prototype.handleFontsChanged=function(){this.Uf.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,n=t.viewState,r=n.resolution,i=t.viewHints,o=this.Uf,a=t.extent;1!==this.qf&&Ye(a=a.slice(0),this.qf);var s=qe(a)/r,l=ze(a)/r;if(!i[0]&&!i[1]&&!Ve(a)){o.useContainer(null,null,1);var u=o.context,c=k({},t,{declutterTree:new hf(9),extent:a,size:[s,l],viewState:k({},t.viewState,{rotation:0})}),h=!0,p=new co(a,r,e,u.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(c,null)&&(o.renderDeclutter(c),h=!1),t())}));p.addEventListener(D,function(){if(2===p.getState()){this.Nt=h?null:p;var t=p.getResolution(),r=p.getPixelRatio(),i=t*e/r;this.renderedResolution=i,this.Bf=Jt(this.Bf,s/2,l/2,1/i,-1/i,0,-n.center[0],-n.center[1])}}.bind(this)),p.load()}return this.Nt&&(this.Wf=t.pixelToCoordinateTransform.slice()),!!this.Nt},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.renderDeclutter=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,n,r,i,o){return this.Uf?this.Uf.forEachFeatureAtCoordinate(e,n,r,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,n,r,i,o)},e}(ew),jb="hybrid",zb="vector",Gb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bb={image:[Zu,Vu,Xu,Yu,Ku],hybrid:[Zu,Xu],vector:[]},Ub={hybrid:[Yu,Ku,Hu],vector:[Zu,Vu,Xu,Yu,Ku,Hu]},qb=function(t){function e(e){var n=t.call(this,e)||this;return n.Tf=n.Ef.bind(n),n.Cf=!1,n.Vf,n.Wf=null,n.zf,n.Xf=[1,0,0,1,0,0],n}return Gb(e,t),e.prototype.prepareTile=function(t,e,n){var r,i=t.getState();return 2!==i&&3!==i||(this.Hf(t,e,n),this.Jf(t)&&(r=!0)),r},e.prototype.getTile=function(e,n,r,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,l=a.projection,u=this.getLayer(),c=u.getSource().getTile(e,n,r,o,l),h=i.viewHints,p=!(h[0]||h[1]);return!p&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,o,l)&&(p||Date.now()-i.time<8)&&u.getRenderMode()!==zb&&this.Kf(c,i),t.prototype.getTile.call(this,e,n,r,i)},e.prototype.isDrawableTile=function(e){var n=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&(n.getRenderMode()===zb?a(n)in e.executorGroups:e.hasContext(n))},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var n=this.getLayer().getRevision();return this.Vf!=n&&(this.renderedTiles.length=0),this.Vf=n,t.prototype.prepareFrame.call(this,e)},e.prototype.Hf=function(t,e,n){var r=this.getLayer(),i=r.getRevision(),o=r.getRenderOrder()||null,s=t.wantedResolution,l=t.getReplayState(r);if(l.dirty||l.renderedResolution!==s||l.renderedRevision!=i||l.renderedRenderOrder!=o){var u=r.getSource(),c=r.getDeclutter(),h=u.getTileGrid(),p=u.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),f=u.getSourceTiles(e,n,t),d=a(r);delete t.hitDetectionImageData[d],t.executorGroups[d]=[],c&&(t.declutterExecutorGroups[d]=[]);for(var g=function(n,i){var a=f[n];if(2!=a.getState())return"continue";var g=a.tileCoord,m=h.getTileCoordExtent(g),v=Ge(p,m),w=pe(v,r.getRenderBuffer()*s,y.tmpExtent),b=Se(m,v)?null:w;l.dirty=!1;var x=new fb(0,w,s,e),_=c?new fb(0,v,s,e):void 0,E=$u(s,e),S=function(t){var e,n=t.getStyleFunction()||r.getStyleFunction();if(n&&(e=n(t,s)),e){var i=this.renderFeature(t,E,e,x,_);this.Cf=this.Cf||i,l.dirty=l.dirty||i}},C=a.getFeatures();o&&o!==l.renderedRenderOrder&&C.sort(o);for(var T=0,I=C.length;T<I;++T){var A=C[T];b&&!We(b,A.getGeometry().getExtent())||S.call(y,A)}var P=x.finish(),k=r.getRenderMode()!==zb&&c&&1===f.length?null:v,O=new kb(k,s,e,u.getOverlaps(),P,r.getRenderBuffer());if(t.executorGroups[d].push(O),_){var M=new kb(null,s,e,u.getOverlaps(),_.finish(),r.getRenderBuffer());t.declutterExecutorGroups[d].push(M)}},y=this,m=0,v=f.length;m<v;++m)g(m);l.renderedRevision=i,l.renderedRenderOrder=o,l.renderedResolution=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=e.viewState.resolution,s=e.viewState.rotation;n=null==n?0:n;var l=this.getLayer(),u=l.getSource().getTileGridForProjection(e.viewState.projection),c=he([t]);pe(c,o*n,c);for(var h,p={},f=function(t,e,n){var o=t.getId();void 0===o&&(o=a(t));var s=p[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return p[o]=!0,i.splice(i.lastIndexOf(s),1),r(t,l,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return p[o]=!0,r(t,l,e);i.push(p[o]={feature:t,layer:l,geometry:e,distanceSq:n,callback:r})}},d=this.renderedTiles,g=function(r,i){var p=d[r];if(!We(u.getTileCoordExtent(p.wrappedTileCoord),c))return"continue";var g=a(l),y=[p.executorGroups[g]],m=p.declutterExecutorGroups[g];m&&y.push(m),y.some((function(r){for(var i=r===m?e.declutterTree.all().map((function(t){return t.value})):null,a=0,l=r.length;a<l;++a){var u=r[a];if(h=u.forEachFeatureAtCoordinate(t,o,s,n,f,i))return!0}}))},y=0,m=d.length;!h&&y<m;++y)g(y);return h},e.prototype.getFeatures=function(t){return new Promise(function(e,n){for(var r,i=this.getLayer(),o=a(i),s=i.getSource(),l=this.renderedProjection,u=l.getExtent(),c=this.renderedResolution,h=s.getTileGridForProjection(l),p=Ht(this.Wf,t.slice()),f=h.getTileCoordForCoordAndResolution(p,c),d=0,g=this.renderedTiles.length;d<g;++d)if(f.toString()===this.renderedTiles[d].tileCoord.toString()){if(2===(r=this.renderedTiles[d]).getState()){var y=h.getTileCoordExtent(r.tileCoord);s.getWrapX()&&l.canWrapX()&&!ye(u,y)&&Jn(p,l);break}r=void 0}if(!r||r.loadingSourceTiles>0)e([]);else{var m=Be(h.getTileCoordExtent(r.wrappedTileCoord)),v=[(p[0]-m[0])/c,(m[1]-p[1])/c],w=r.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),b=r.hitDetectionImageData[o];if(!b&&!this.Af){var x=Bs(h.getTileSize(h.getZForResolution(c))),_=this.zf;b=Mb(x,[this.getRenderTransform(h.getTileCoordCenter(r.wrappedTileCoord),c,0,Ob,x[0]*Ob,x[1]*Ob,0)],w,i.getStyleFunction(),h.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(i).renderedResolution,_),r.hitDetectionImageData[o]=b}e(Nb(v,w,b))}}.bind(this))},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.Vf&&t.changed()},e.prototype.Ef=function(t){this.renderIfReadyAndVisible()},e.prototype.renderDeclutter=function(t){var e=this.context,n=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();for(var r=t.viewHints,i=!(r[0]||r[1]),o=this.renderedTiles,s=0,l=o.length;s<l;++s){var u=o[s],c=u.declutterExecutorGroups[a(this.getLayer())];if(c)for(var h=c.length-1;h>=0;--h)c[h].execute(this.context,1,this.getTileRenderTransform(u,t),t.viewState.rotation,i,void 0,t.declutterTree)}e.globalAlpha=n},e.prototype.getTileRenderTransform=function(t,e){var n=e.pixelRatio,r=e.viewState,i=r.center,o=r.resolution,a=r.rotation,s=e.size,l=Math.round(s[0]*n),u=Math.round(s[1]*n),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),h=t.tileCoord,p=c.getTileCoordExtent(t.wrappedTileCoord),f=c.getTileCoordExtent(h,this.tmpExtent)[0]-p[0];return qt(Xt(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(i,o,a,n,l,u,f))},e.prototype.renderFrame=function(e,n){var r=e.viewHints,i=!(r[0]||r[1]);t.prototype.renderFrame.call(this,e,n),this.Wf=e.pixelToCoordinateTransform.slice(),this.zf=e.viewState.rotation;var o=this.getLayer(),s=o.getRenderMode(),l=this.context,u=l.globalAlpha;l.globalAlpha=o.getOpacity();for(var c=Ub[s],h=e.viewState,p=h.rotation,f=o.getSource(),d=f.getTileGridForProjection(h.projection).getZForResolution(h.resolution,f.zDirection),g=this.renderedTiles,y=[],m=[],v=g.length-1;v>=0;--v){var w=g[v],b=w.executorGroups[a(o)].filter((function(t){return t.hasExecutors(c)}));if(0!==b.length){for(var x=this.getTileRenderTransform(w,e),_=w.tileCoord[0],E=!1,S=b[0].getClipCoords(x),C=0,T=y.length;C<T;++C)if(d!==_&&_<m[C]){var I=y[C];We([S[0],S[3],S[4],S[7]],[I[0],I[3],I[4],I[7]])&&(E||(l.save(),E=!0),l.beginPath(),l.moveTo(S[0],S[1]),l.lineTo(S[2],S[3]),l.lineTo(S[4],S[5]),l.lineTo(S[6],S[7]),l.moveTo(I[6],I[7]),l.lineTo(I[4],I[5]),l.lineTo(I[2],I[3]),l.lineTo(I[0],I[1]),l.clip())}y.push(S),m.push(_);for(var A=0,P=b.length;A<P;++A)b[A].execute(l,1,x,p,i,c);E&&l.restore()}}return l.globalAlpha=u,this.container},e.prototype.renderFeature=function(t,e,n,r,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)o=ec(r,t,n[a],e,this.Tf,void 0,i)||o;else o=ec(r,t,n,e,this.Tf,void 0,i);return o},e.prototype.Jf=function(t){var e=this.getLayer();if(e.getRenderMode()===zb)return!1;var n=t.getReplayState(e),r=e.getRevision(),i=t.wantedResolution;return n.renderedTileResolution!==i||n.renderedTileRevision!==r},e.prototype.Kf=function(t,e){var n=this.getLayer(),r=t.getReplayState(n),i=n.getRevision(),o=t.executorGroups[a(n)];r.renderedTileRevision=i;var s=t.wrappedTileCoord,l=s[0],u=n.getSource(),c=e.pixelRatio,h=e.viewState.projection,p=u.getTileGridForProjection(h),f=p.getResolution(t.tileCoord[0]),d=e.pixelRatio/t.wantedResolution*f,g=p.getResolution(l),y=t.getContext(n);c=Math.round(Math.max(c,d/c));var m=u.getTilePixelSize(l,c,h);y.canvas.width=m[0],y.canvas.height=m[1];var v=c/d;if(1!==v){var w=Ut(this.Xf);Xt(w,v,v),y.setTransform.apply(y,w)}var b=p.getTileCoordExtent(s,this.tmpExtent),x=d/g,_=Ut(this.Xf);Xt(_,x,-x),Kt(_,-b[0],-b[3]);for(var E=0,S=o.length;E<S;++E)o[E].execute(y,v,_,0,!0,Bb[n.getRenderMode()]);r.renderedTileResolution=t.wantedResolution},e}(uw),Wb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vb=function(t){function e(e,n){var r=t.call(this)||this;return n&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return Wb(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<de(this.getExtent(),t,e))return r;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var l=nn(t,e,i[a],i[a+1]);if(l<r){r=l;for(var u=0;u<o;++u)n[u]=i[a+u];n.length=o}}return r},e.prototype.getCoordinates=function(){return ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new vi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,o=t.length;i<o;i+=n){var a=new vi(t.slice(i,i+n),e);r.push(a)}return r},e.prototype.getType=function(){return St.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,r=0,i=e.length;r<i;r+=n)if(me(t,e[r],e[r+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Wr);function Hb(t,e,n,r,i,o,a){var s,l,u=(n-e)/r;if(1===u)s=e;else if(2===u)s=e,l=i;else if(0!==u){for(var c=t[e],h=t[e+1],p=0,f=[0],d=e+r;d<n;d+=r){var y=t[d],m=t[d+1];p+=Math.sqrt((y-c)*(y-c)+(m-h)*(m-h)),f.push(p),c=y,h=m}var v=i*p,w=g(f,v);w<0?(l=(v-f[-w-2])/(f[-w-1]-f[-w-2]),s=e+(-w-2)*r):s=e+w*r}var b=a>1?a:2,x=o||new Array(b);for(d=0;d<b;++d)x[d]=void 0===s?NaN:void 0===l?t[s+d]:ln(t[s+d],t[s+r+d],l);return x}function Yb(t,e,n,r,i,o){if(n==e)return null;var a;if(i<t[e+r-1])return o?((a=t.slice(e,e+r))[r-1]=i,a):null;if(t[n-1]<i)return o?((a=t.slice(n-r,n))[r-1]=i,a):null;if(i==t[e+r-1])return t.slice(e,e+r);for(var s=e/r,l=n/r;s<l;){var u=s+l>>1;i<t[(u+1)*r-1]?l=u:s=u+1}var c=t[s*r-1];if(i==c)return t.slice((s-1)*r,(s-1)*r+r);var h=(i-c)/(t[(s+1)*r-1]-c);a=[];for(var p=0;p<r-1;++p)a.push(ln(t[(s-1)*r+p],t[s*r+p],h));return a.push(i),a}function Xb(t,e,n,r,i,o,a){if(a)return Yb(t,e,n[n.length-1],r,i,o);var s;if(i<t[r-1])return o?((s=t.slice(0,r))[r-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-r))[r-1]=i,s):null;for(var l=0,u=n.length;l<u;++l){var c=n[l];if(e!=c){if(i<t[e+r-1])return null;if(i<=t[c-1])return Yb(t,e,c,r,i,!1);e=c}}return null}var Zb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kb=function(t){function e(e,n){var r=t.call(this)||this;return r.Yf=null,r.Zf=-1,r.wt=-1,r.bt=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return Zb(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?b(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(Hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.bt=this.getRevision()),Zr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!1,t,e,n,r))},e.prototype.forEachSegment=function(t){return Ci(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=_t&&this.layout!=Et)return null;var n=void 0!==e&&e;return Yb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Hb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return gb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.Zf!=this.getRevision()&&(this.Yf=this.getCoordinateAt(.5,this.Yf),this.Zf=this.getRevision()),this.Yf},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=ni(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,bt)},e.prototype.getType=function(){return St.LINE_STRING},e.prototype.intersectsExtent=function(t){return Ti(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Wr),Jb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qb=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.gt=[],i.wt=-1,i.bt=-1,Array.isArray(e[0]))i.setCoordinates(e,n);else if(void 0!==n&&r)i.setFlatCoordinates(n,e),i.gt=r;else{for(var o=i.getLayout(),a=e,s=[],l=[],u=0,c=a.length;u<c;++u){var h=a[u];0===u&&(o=h.getLayout()),b(s,h.getFlatCoordinates()),l.push(s.length)}i.setFlatCoordinates(o,s),i.gt=l}return i}return Jb(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.gt.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.gt.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(Yr(this.flatCoordinates,0,this.gt,this.stride,0)),this.bt=this.getRevision()),Kr(this.flatCoordinates,0,this.gt,this.stride,this.wt,!1,t,e,n,r))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=_t&&this.layout!=Et||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,i=void 0!==n&&n;return Xb(this.flatCoordinates,0,this.gt,this.stride,t,r,i)},e.prototype.getCoordinates=function(){return ci(this.flatCoordinates,0,this.gt,this.stride)},e.prototype.getEnds=function(){return this.gt},e.prototype.getLineString=function(t){return t<0||this.gt.length<=t?null:new Kb(this.flatCoordinates.slice(0===t?0:this.gt[t-1],this.gt[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.gt,n=this.layout,r=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],l=new Kb(t.slice(i,s),n);r.push(l),i=s}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.gt,i=this.stride,o=0,a=r.length;o<a;++o){var s=r[o];b(t,Hb(e,n,s,i,.5)),n=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=ri(this.flatCoordinates,0,this.gt,this.stride,t,n,0,r),new e(n,bt,r)},e.prototype.getType=function(){return St.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Ii(this.flatCoordinates,0,this.gt,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=ti(this.flatCoordinates,0,t,this.stride,this.gt);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(Wr);function $b(t,e,n,r){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=n.length;a<s;++a){var l=n[a];o=Ee(t,e,l[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return i}var tx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ex=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.$f=[],i.Qf=-1,i.tl=null,i.wt=-1,i.bt=-1,i.St=-1,i.kt=null,!r&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],l=[],u=0,c=a.length;u<c;++u){var h=a[u];0===u&&(o=h.getLayout());for(var p=s.length,f=h.getEnds(),d=0,g=f.length;d<g;++d)f[d]+=p;b(s,h.getFlatCoordinates()),l.push(f)}n=o,e=s,r=l}return void 0!==n&&r?(i.setFlatCoordinates(n,e),i.$f=r):i.setCoordinates(e,n),i}return tx(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;b(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,i=(e=t.getEnds().slice()).length;r<i;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.$f.push();this.$f.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.$f.length,n=new Array(t),r=0;r<t;++r)n[r]=this.$f[r].slice();var i=new e(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i},e.prototype.closestPointXY=function(t,e,n,r){return r<de(this.getExtent(),t,e)?r:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(Xr(this.flatCoordinates,0,this.$f,this.stride,0)),this.bt=this.getRevision()),Jr(this.getOrientedFlatCoordinates(),0,this.$f,this.stride,this.wt,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return _i(this.getOrientedFlatCoordinates(),0,this.$f,this.stride,t,e)},e.prototype.getArea=function(){return di(this.getOrientedFlatCoordinates(),0,this.$f,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Di(e=this.getOrientedFlatCoordinates().slice(),0,this.$f,this.stride,t):e=this.flatCoordinates,hi(e,0,this.$f,this.stride)},e.prototype.getEndss=function(){return this.$f},e.prototype.getFlatInteriorPoints=function(){if(this.Qf!=this.getRevision()){var t=$b(this.flatCoordinates,0,this.$f,this.stride);this.tl=Si(this.getOrientedFlatCoordinates(),0,this.$f,this.stride,t),this.Qf=this.getRevision()}return this.tl},e.prototype.getInteriorPoints=function(){return new Vb(this.getFlatInteriorPoints().slice(),_t)},e.prototype.getOrientedFlatCoordinates=function(){if(this.St!=this.getRevision()){var t=this.flatCoordinates;Li(t,0,this.$f,this.stride)?this.kt=t:(this.kt=t.slice(),this.kt.length=Di(this.kt,0,this.$f,this.stride)),this.St=this.getRevision()}return this.kt},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=li(this.flatCoordinates,0,this.$f,this.stride,Math.sqrt(t),n,0,r),new e(n,bt,r)},e.prototype.getPolygon=function(t){if(t<0||this.$f.length<=t)return null;var e;if(0===t)e=0;else{var n=this.$f[t-1];e=n[n.length-1]}var r=this.$f[t].slice(),i=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new Gi(this.flatCoordinates.slice(e,i),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.$f,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o].slice(),l=s[s.length-1];if(0!==i)for(var u=0,c=s.length;u<c;++u)s[u]-=i;var h=new Gi(e.slice(i,l),t,s);r.push(h),i=l}return r},e.prototype.getType=function(){return St.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return ki(this.getOrientedFlatCoordinates(),0,this.$f,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=ei(this.flatCoordinates,0,t,this.stride,this.$f);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(Wr),nx=[1,0,0,1,0,0],rx=function(){function t(t,e,n,r,i){this.styleFunction,this.st,this.V=i,this.nl=t,this.il=e,this.tl=null,this.rl=null,this.gt=n,this.el=r}return t.prototype.get=function(t){return this.el[t]},t.prototype.getExtent=function(){return this.st||(this.st=this.nl===St.POINT?_e(this.il):Ee(this.il,0,this.il.length,2)),this.st},t.prototype.getFlatInteriorPoint=function(){if(!this.tl){var t=De(this.getExtent());this.tl=Ei(this.il,0,this.gt,2,t,0)}return this.tl},t.prototype.getFlatInteriorPoints=function(){if(!this.tl){var t=$b(this.il,0,this.gt,2);this.tl=Si(this.il,0,this.gt,2,t)}return this.tl},t.prototype.getFlatMidpoint=function(){return this.rl||(this.rl=Hb(this.il,0,this.il.length,2,.5)),this.rl},t.prototype.getFlatMidpoints=function(){if(!this.rl){this.rl=[];for(var t=this.il,e=0,n=this.gt,r=0,i=n.length;r<i;++r){var o=n[r],a=Hb(t,e,o,2,.5);b(this.rl,a),e=o}}return this.rl},t.prototype.getId=function(){return this.V},t.prototype.getOrientedFlatCoordinates=function(){return this.il},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.el},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.nl},t.prototype.transform=function(t){var e=(t=cr(t)).getExtent(),n=t.getWorldExtent();if(e&&n){var r=ze(n)/ze(e);Jt(nx,n[0],n[3],r,-r,0,0,0),Lr(this.il,0,this.il.length,2,nx,this.il)}},t.prototype.getEnds=function(){return this.gt},t}();function ix(t){var e=t.getType();switch(e){case St.POINT:return new vi(t.getFlatCoordinates());case St.MULTI_POINT:return new Vb(t.getFlatCoordinates(),bt);case St.LINE_STRING:return new Kb(t.getFlatCoordinates(),bt);case St.MULTI_LINE_STRING:return new Qb(t.getFlatCoordinates(),bt,t.getEnds());case St.POLYGON:var n=t.getFlatCoordinates(),r=t.getEnds(),i=Fi(n,r);return i.length>1?new ex(n,bt,i):new Gi(n,bt,r);default:throw new Error("Invalid geometry type:"+e)}}rx.prototype.getEndss=rx.prototype.getEnds,rx.prototype.getFlatCoordinates=rx.prototype.getOrientedFlatCoordinates;var ox=rx,ax=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sx=function(t){function e(e){return t.call(this,e)||this}return ax(e,t),e.prototype.createRenderer=function(){return new Rb(this)},e}(Vw);function lx(t,e,n){for(var r,i,o,a,s,l,u=[],c=t(0),h=t(1),p=e(c),f=e(h),d=[h,c],g=[f,p],y=[1,0],m={},v=1e5;--v>0&&y.length>0;)o=y.pop(),c=d.pop(),p=g.pop(),(l=o.toString())in m||(u.push(p[0],p[1]),m[l]=!0),a=y.pop(),h=d.pop(),f=g.pop(),en((i=e(r=t(s=(o+a)/2)))[0],i[1],p[0],p[1],f[0],f[1])<n?(u.push(f[0],f[1]),m[l=a.toString()]=!0):(y.push(a,s,s,o),g.push(f,i,i,p),d.push(h,r,r,c));return u}function ux(t,e,n,r,i){return lx((function(r){return[t,e+(n-e)*r]}),br(cr("EPSG:4326"),r),i)}function cx(t,e,n,r,i){return lx((function(r){return[e+(n-e)*r,t]}),br(cr("EPSG:4326"),r),i)}var hx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),px=new $p({color:"rgba(0,0,0,0.2)"}),fx=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],dx=function(t){function e(e){var n=this,r=e||{},i=k({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,(n=t.call(this,i)||this).di=null,n.sl=1/0,n.al=1/0,n.ul=-1/0,n.cl=-1/0,n.hl=1/0,n.fl=1/0,n.ll=-1/0,n.vl=-1/0,n.dl=void 0!==r.targetSize?r.targetSize:100,n.pl=void 0!==r.maxLines?r.maxLines:100,n.yl=[],n.ml=[],n.wl=void 0!==r.strokeStyle?r.strokeStyle:px,n.bl=void 0,n.gl=void 0,n.xl=null,n.jl=null,n.Sl=null,n.kl=null,n.Ml=null,n._l=null,n.Ol=null,r.showLabels&&(n.Tl=null==r.lonLabelFormatter?Un.bind(n,"EW"):r.lonLabelFormatter,n.El=null==r.latLabelFormatter?Un.bind(n,"NS"):r.latLabelFormatter,n.Al=null==r.lonLabelPosition?0:r.lonLabelPosition,n.Cl=null==r.latLabelPosition?1:r.latLabelPosition,n.Rl=new lf({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new uf({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new zp({color:"rgba(0,0,0,1)"}),stroke:new $p({color:"rgba(255,255,255,1)",width:3})})}),n.Pl=function(t){var e=t.get("graticule_label");return this.Rl.getText().setText(e),this.Rl}.bind(n),n.Il=new lf({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new uf({font:"12px Calibri,sans-serif",textAlign:"right",fill:new zp({color:"rgba(0,0,0,1)"}),stroke:new $p({color:"rgba(255,255,255,1)",width:3})})}),n.Nl=function(t){var e=t.get("graticule_label");return this.Il.getText().setText(e),this.Il}.bind(n),n._l=[],n.Ol=[],n.addEventListener(Zo,n.zl.bind(n))),n.Fl=void 0!==r.intervals?r.intervals:fx,n.setSource(new Bf({loader:n.loaderFunction.bind(n),strategy:n.strategyFunction.bind(n),features:new st,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),n.Ll=[],n.Gl=new lf({stroke:n.wl}),n.Dl=null,n.zc=null,n.If=null,n.setRenderOrder(null),n}return hx(e,t),e.prototype.strategyFunction=function(t,e){var n=t.slice();return this.di&&this.getSource().getWrapX()&&Ke(n,this.di),this.Dl&&(Ce(this.Dl,n,e)?n=this.Dl.slice():this.getSource().removeLoadedExtent(this.Dl)),[n]},e.prototype.loaderFunction=function(t,e,n){this.Dl=t;var r=this.getSource(),i=Ge(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.zc&&Se(this.zc,i)&&this.If===e||(this.zc=i,this.If=e,Ve(i)))){var o=De(i),a=e*e/4;(!this.di||!vr(this.di,n))&&this.Ul(n),this.ql(i,o,e,a);var s,l=this.yl.length+this.ml.length;for(this._l&&(l+=this.yl.length),this.Ol&&(l+=this.ml.length);l>this.Ll.length;)s=new wt,this.Ll.push(s);var u=r.getFeaturesCollection();u.clear();var c,h,p=0;for(c=0,h=this.yl.length;c<h;++c)(s=this.Ll[p++]).setGeometry(this.yl[c]),s.setStyle(this.Gl),u.push(s);for(c=0,h=this.ml.length;c<h;++c)(s=this.Ll[p++]).setGeometry(this.ml[c]),s.setStyle(this.Gl),u.push(s)}},e.prototype.Bl=function(t,e,n,r,i,o){var a=this.Wl(t,e,n,r,o);if(We(a.getExtent(),i)){if(this._l){var s=this.Tl(t);o in this._l?this._l[o].text=s:this._l[o]={geom:new vi([]),text:s}}this.yl[o++]=a}return o},e.prototype.Vl=function(t,e,n,r,i,o){var a=this.Xl(t,e,n,r,o);if(We(a.getExtent(),i)){if(this.Ol){var s=this.El(t);o in this.Ol?this.Ol[o].text=s:this.Ol[o]={geom:new vi([]),text:s}}this.ml[o++]=a}return o},e.prototype.zl=function(t){var e=t.frameState.viewState.rotation,n=t.frameState.viewState.resolution,r=t.frameState.size,i=t.frameState.extent,o=De(i),a=i;if(e){var s=r[0]*n,l=r[1]*n;a=[o[0]-s/2,o[1]-l/2,o[0]+s/2,o[1]+l/2]}var u=0,c=0,h=this.Cl<.5,p=this.di.getExtent(),f=qe(p);this.getSource().getWrapX()&&this.di.canWrapX()&&!ye(p,i)&&(u=Math.floor((i[0]-p[0])/f),c=Math.ceil((i[2]-p[2])/f),h=h!==Math.abs(e)>Math.PI/2);for(var d=rc(t),g=u;g<=c;++g){var y=this.yl.length+this.ml.length,m=void 0,v=void 0,w=void 0,b=void 0;if(this._l)for(v=0,w=this._l.length;v<w;++v){var x=this.yl[v];e||0!==g?((_=x.clone()).translate(g*f,0),_.rotate(-e,o),(b=this.Hl(_,a,v)).rotate(e,o)):b=this.Hl(x,i,v),(m=this.Ll[y++]).setGeometry(b),m.set("graticule_label",this._l[v].text),d.drawFeature(m,this.Pl(m))}if(this.Ol&&(g===u&&h||g===c&&!h))for(v=0,w=this.ml.length;v<w;++v){var _;x=this.ml[v],e||0!==g?((_=x.clone()).translate(g*f,0),_.rotate(-e,o),(b=this.Jl(_,a,v)).rotate(e,o)):b=this.Jl(x,i,v),(m=this.Ll[y++]).setGeometry(b),m.set("graticule_label",this.Ol[v].text),d.drawFeature(m,this.Nl(m))}}},e.prototype.ql=function(t,e,n,r){var i=this.Kl(n);if(-1==i)return this.yl.length=0,this.ml.length=0,this._l&&(this._l.length=0),void(this.Ol&&(this.Ol.length=0));var o=!1,a=this.di.getExtent(),s=qe(a);this.getSource().getWrapX()&&this.di.canWrapX()&&!ye(a,t)&&(qe(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var l=[Qe(e[0],this.ll,this.hl),Qe(e[1],this.vl,this.fl)],u=this.gl(l);isNaN(u[1])&&(u[1]=Math.abs(this.sl)>=Math.abs(this.ul)?this.sl:this.ul);var c,h,p,f,d=Qe(u[0],this.cl,this.al),g=Qe(u[1],this.ul,this.sl),y=this.pl,m=t;o||(m=[Qe(t[0],this.ll,this.hl),Qe(t[1],this.vl,this.fl),Qe(t[2],this.ll,this.hl),Qe(t[3],this.vl,this.fl)]);var v=Ze(m,this.gl,void 0,8),w=v[3],b=v[2],x=v[1],_=v[0];if(o||(ge(m,this.jl)&&(_=this.cl,x=this.ul),ge(m,this.Sl)&&(b=this.al,x=this.ul),ge(m,this.kl)&&(_=this.cl,w=this.sl),ge(m,this.Ml)&&(b=this.al,w=this.sl),w=Qe(w,g,this.sl),b=Qe(b,d,this.al),x=Qe(x,this.ul,g),_=Qe(_,this.cl,d)),f=Qe(d=Math.floor(d/i)*i,this.cl,this.al),h=this.Bl(f,x,w,r,t,0),c=0,o)for(;(f-=i)>=_&&c++<y;)h=this.Bl(f,x,w,r,t,h);else for(;f!=this.cl&&c++<y;)f=Math.max(f-i,this.cl),h=this.Bl(f,x,w,r,t,h);if(f=Qe(d,this.cl,this.al),c=0,o)for(;(f+=i)<=b&&c++<y;)h=this.Bl(f,x,w,r,t,h);else for(;f!=this.al&&c++<y;)f=Math.min(f+i,this.al),h=this.Bl(f,x,w,r,t,h);for(this.yl.length=h,this._l&&(this._l.length=h),p=Qe(g=Math.floor(g/i)*i,this.ul,this.sl),h=this.Vl(p,_,b,r,t,0),c=0;p!=this.ul&&c++<y;)p=Math.max(p-i,this.ul),h=this.Vl(p,_,b,r,t,h);for(p=Qe(g,this.ul,this.sl),c=0;p!=this.sl&&c++<y;)p=Math.min(p+i,this.sl),h=this.Vl(p,_,b,r,t,h);this.ml.length=h,this.Ol&&(this.Ol.length=h)},e.prototype.Kl=function(t){for(var e=this.xl[0],n=this.xl[1],r=-1,i=Math.pow(this.dl*t,2),o=[],a=[],s=0,l=this.Fl.length;s<l;++s){var u=Qe(this.Fl[s]/2,0,90),c=Qe(n,-90+u,90-u);if(o[0]=e-u,o[1]=c-u,a[0]=e+u,a[1]=c+u,this.bl(o,o),this.bl(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;r=this.Fl[s]}return r},e.prototype.Wl=function(t,e,n,r,i){var o=ux(t,e,n,this.di,r),a=this.yl[i];return a?(a.setFlatCoordinates(bt,o),a.changed()):(a=new Kb(o,bt),this.yl[i]=a),a},e.prototype.Hl=function(t,e,n){var r=t.getFlatCoordinates(),i=1,o=r.length-1;r[i]>r[o]&&(i=o,o=1);var a=Math.max(e[1],r[i]),s=Math.min(e[3],r[o]),l=Qe(e[1]+Math.abs(e[1]-e[3])*this.Al,a,s),u=[r[i-1]+(r[o-1]-r[i-1])*(l-r[i])/(r[o]-r[i]),l],c=this._l[n].geom;return c.setCoordinates(u),c},e.prototype.getMeridians=function(){return this.yl},e.prototype.Xl=function(t,e,n,r,i){var o=cx(t,e,n,this.di,r),a=this.ml[i];return a?(a.setFlatCoordinates(bt,o),a.changed()):a=new Kb(o,bt),a},e.prototype.Jl=function(t,e,n){var r=t.getFlatCoordinates(),i=0,o=r.length-2;r[i]>r[o]&&(i=o,o=0);var a=Math.max(e[0],r[i]),s=Math.min(e[2],r[o]),l=Qe(e[0]+Math.abs(e[0]-e[2])*this.Cl,a,s),u=[l,r[i+1]+(r[o+1]-r[i+1])*(l-r[i])/(r[o]-r[i])],c=this.Ol[n].geom;return c.setCoordinates(u),c},e.prototype.getParallels=function(){return this.ml},e.prototype.Ul=function(t){var e=cr("EPSG:4326"),n=t.getWorldExtent();this.sl=n[3],this.al=n[2],this.ul=n[1],this.cl=n[0];var r=br(t,e);if(this.cl<this.al)this.gl=r;else{var i=this.cl+this.al/2;this.al+=360,this.gl=function(t,e,n){for(var o=n||2,a=r(t,e,o),s=0,l=a.length;s<l;s+=o)a[s]<i&&(a[s]+=360);return a}}this.bl=br(e,t);var o=Ze([this.cl,this.ul,this.al,this.sl],this.bl,void 0,8);this.ll=o[0],this.hl=o[2],this.vl=o[1],this.fl=o[3],this.jl=this.bl([this.cl,this.ul]),this.Sl=this.bl([this.al,this.ul]),this.kl=this.bl([this.cl,this.sl]),this.Ml=this.bl([this.al,this.sl]),this.xl=this.gl(De(t.getExtent())),isNaN(this.xl[1])&&(this.xl[1]=Math.abs(this.sl)>=Math.abs(this.ul)?this.sl:this.ul),this.di=t},e}(sx),gx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yx="blur",mx="gradient",vx="radius",wx=["#00f","#0ff","#0f0","#ff0","#f00"],bx=function(t){function e(e){var n=this,r=e||{},i=k({},r);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(n=t.call(this,i)||this).Yl=null,n.addChangeListener(mx,n.Zl),n.setGradient(r.gradient?r.gradient:wx),n.setBlur(void 0!==r.blur?r.blur:15),n.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return n.$l="string"==typeof o?function(t){return t.get(o)}:o,n.setRenderOrder(null),n}return gx(e,t),e.prototype.getBlur=function(){return this.get(yx)},e.prototype.getGradient=function(){return this.get(mx)},e.prototype.getRadius=function(){return this.get(vx)},e.prototype.Zl=function(){this.Yl=function(t){for(var e=ho(1,256),n=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),i=0,o=t.length;i<o;++i)n.addColorStop(i*r,t[i]);return e.fillStyle=n,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(yx,t)},e.prototype.setGradient=function(t){this.set(mx,t)},e.prototype.setRadius=function(t){this.set(vx,t)},e.prototype.createRenderer=function(){return new Yw(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var e=this.$l(t);return void 0!==e?Qe(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(vx)+this.get(yx))}.bind(this),u_blurSlope:function(){return this.get(vx)/Math.max(1,this.get(yx))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.Yl}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},e.prototype.renderDeclutter=function(){},e}(Vw),xx=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var n;if(e){var r=e.dataProjection?cr(e.dataProjection):this.readProjection(t);e.extent&&r&&r.getUnits()===kt.TILE_PIXELS&&(r=cr(r)).setWorldExtent(e.extent),n={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(n)},t.prototype.adaptOptions=function(t){return k({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return i()},t.prototype.readFeature=function(t,e){return i()},t.prototype.readFeatures=function(t,e){return i()},t.prototype.readGeometry=function(t,e){return i()},t.prototype.readProjection=function(t){return i()},t.prototype.writeFeature=function(t,e){return i()},t.prototype.writeFeatures=function(t,e){return i()},t.prototype.writeGeometry=function(t,e){return i()},t}();function _x(t,e,n){var r,i=n?cr(n.featureProjection):null,o=n?cr(n.dataProjection):null;if(r=i&&o&&!vr(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&n&&void 0!==n.decimals){var a=Math.pow(10,n.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return r}function Ex(t,e){var n=e?cr(e.featureProjection):null,r=e?cr(e.dataProjection):null;return n&&r&&!vr(n,r)?_r(t,r,n):t}var Sx=r(98),Cx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Tx(t,e,n){if(3===t){var r={keys:[],values:[],features:[]},i=n.readVarint()+n.pos;n.readFields(Ix,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Ix(t,e,n){if(15===t)e.version=n.readVarint();else if(1===t)e.name=n.readString();else if(5===t)e.extent=n.readVarint();else if(2===t)e.features.push(n.pos);else if(3===t)e.keys.push(n.readString());else if(4===t){for(var r=null,i=n.readVarint()+n.pos;n.pos<i;)r=1==(t=n.readVarint()>>3)?n.readString():2===t?n.readFloat():3===t?n.readDouble():4===t?n.readVarint64():5===t?n.readVarint():6===t?n.readSVarint():7===t?n.readBoolean():null;e.values.push(r)}}function Ax(t,e,n){if(1==t)e.id=n.readVarint();else if(2==t)for(var r=n.readVarint()+n.pos;n.pos<r;){var i=e.layer.keys[n.readVarint()],o=e.layer.values[n.readVarint()];e.properties[i]=o}else 3==t?e.type=n.readVarint():4==t&&(e.geometry=n.pos)}function Px(t,e,n){t.pos=e.features[n];var r=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(Ax,i,r),i}var kx=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=new Je({code:"",units:kt.TILE_PIXELS}),n.Ql=r.featureClass?r.featureClass:ox,n.H=r.geometryName,n.tv=r.layerName?r.layerName:"layer",n.qc=r.layers?r.layers:null,n.nv=r.idProperty,n.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],n}return Cx(e,t),e.prototype.iv=function(t,e,n,r){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,l=0,u=0,c=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),l+=t.readSVarint(),1===o&&u>c&&(r.push(u),c=u),n.push(s,l),u+=2):7===o?u>c&&(n.push(n[c],n[c+1]),u+=2):yt(!1,59)}u>c&&(r.push(u),c=u)},e.prototype.rv=function(t,e,n){var r,i=e.type;if(0===i)return null;var o,a=e.properties;this.nv?(o=a[this.nv],delete a[this.nv]):o=e.id,a[this.tv]=e.layer.name;var s=[],l=[];this.iv(t,e,s,l);var u=function(t,e){var n;return 1===t?n=1===e?St.POINT:St.MULTI_POINT:2===t?n=1===e?St.LINE_STRING:St.MULTI_LINE_STRING:3===t&&(n=St.POLYGON),n}(i,l.length);if(this.Ql===ox)(r=new this.Ql(u,s,l,a,o)).transform(n.dataProjection);else{var c=void 0;if(u==St.POLYGON){var h=Fi(s,l);c=h.length>1?new ex(s,bt,h):new Gi(s,bt,l)}else c=u===St.POINT?new vi(s,bt):u===St.LINE_STRING?new Kb(s,bt):u===St.POLYGON?new Gi(s,bt,l):u===St.MULTI_POINT?new Vb(s,bt):u===St.MULTI_LINE_STRING?new Qb(s,bt,l):null;r=new(0,this.Ql),this.H&&r.setGeometryName(this.H);var p=_x(c,!1,n);r.setGeometry(p),void 0!==o&&r.setId(o),r.setProperties(a,!0)}return r},e.prototype.getType=function(){return Iu},e.prototype.readFeatures=function(t,e){var n=this.qc,r=this.adaptOptions(e),i=cr(r.dataProjection);i.setWorldExtent(r.extent),r.dataProjection=i;var o=new Sx(t),a=o.readFields(Tx,{}),s=[];for(var l in a)if(!n||-1!=n.indexOf(l)){var u=a[l],c=u?[0,0,u.extent,u.extent]:null;i.setExtent(c);for(var h=0,p=u.length;h<p;++h){var f=Px(o,u,h),d=this.rv(o,f,r);null!==d&&s.push(d)}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.qc=t},e}(xx),Ox=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mx=function(t){function e(e){var n=this,r=e||{},i=k({},r);delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,"image"===r.renderMode&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),r.renderMode=void 0);var o=r.renderMode||jb;return yt(o==jb||o==zb,28),n.ev=o,n.setPreload(r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n.getBackground,n.setBackground,n}return Ox(e,t),e.prototype.createRenderer=function(){return new qb(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.ev},e.prototype.getPreload=function(){return this.get(iw)},e.prototype.getUseInterimTilesOnError=function(){return this.get(ow)},e.prototype.setPreload=function(t){this.set(iw,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ow,t)},e}(Vw),Nx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Lx(t){for(var e=[],n=0,r=t.length;n<r;++n)e.push(t[n].clone());return e}var Rx=function(t){function e(e){var n=t.call(this)||this;return n.ov=e||null,n.sv=[],n.av(),n}return Nx(e,t),e.prototype.uv=function(){this.sv.forEach(X),this.sv.length=0},e.prototype.av=function(){if(this.ov)for(var t=0,e=this.ov.length;t<e;++t)this.sv.push(H(this.ov[t],D,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.ov),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<de(this.getExtent(),t,e))return r;for(var i=this.ov,o=0,a=i.length;o<a;++o)r=i[o].closestPointXY(t,e,n,r);return r},e.prototype.containsXY=function(t,e){for(var n=this.ov,r=0,i=n.length;r<i;++r)if(n[r].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){xe(t);for(var e=this.ov,n=0,r=e.length;n<r;++n)Te(t,e[n].getExtent());return t},e.prototype.getGeometries=function(){return Lx(this.ov)},e.prototype.getGeometriesArray=function(){return this.ov},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.ov,n=0,r=e.length;n<r;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],r=this.ov,i=!1,o=0,a=r.length;o<a;++o){var s=r[o],l=s.getSimplifiedGeometry(t);n.push(l),l!==s&&(i=!0)}if(i){var u=new e(null);return u.setGeometriesArray(n),u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return St.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.ov,n=0,r=e.length;n<r;++n)if(e[n].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.ov.length},e.prototype.rotate=function(t,e){for(var n=this.ov,r=0,i=n.length;r<i;++r)n[r].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var r=n;r||(r=De(this.getExtent()));for(var i=this.ov,o=0,a=i.length;o<a;++o)i[o].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Lx(t))},e.prototype.setGeometriesArray=function(t){this.uv(),this.ov=t,this.av(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.ov,n=0,r=e.length;n<r;++n)e[n].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.ov,r=0,i=n.length;r<i;++r)n[r].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.uv(),t.prototype.disposeInternal.call(this)},e}(Gr),Dx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Fx(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var jx=function(t){function e(){return t.call(this)||this}return Dx(e,t),e.prototype.getType=function(){return Au},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(Fx(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(Fx(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return i()},e.prototype.readFeaturesFromObject=function(t,e){return i()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(Fx(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return i()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Fx(t))},e.prototype.readProjectionFromObject=function(t){return i()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return i()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return i()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return i()},e}(xx),zx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Gx(t,e){if(!t)return null;var n;switch(t.type){case St.POINT:n=function(t){return new vi(t.coordinates)}(t);break;case St.LINE_STRING:n=function(t){return new Kb(t.coordinates)}(t);break;case St.POLYGON:n=function(t){return new Gi(t.coordinates)}(t);break;case St.MULTI_POINT:n=function(t){return new Vb(t.coordinates)}(t);break;case St.MULTI_LINE_STRING:n=function(t){return new Qb(t.coordinates)}(t);break;case St.MULTI_POLYGON:n=function(t){return new ex(t.coordinates)}(t);break;case St.GEOMETRY_COLLECTION:n=function(t,e){var n=t.geometries.map((function(t){return Gx(t,undefined)}));return new Rx(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return _x(n,!1,e)}function Bx(t,e){var n,r=(t=_x(t,!0,e)).getType();switch(r){case St.POINT:n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case St.LINE_STRING:n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case St.POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case St.MULTI_POINT:n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case St.MULTI_LINE_STRING:n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case St.MULTI_POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case St.GEOMETRY_COLLECTION:n=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var n=k({},e);return delete n.featureProjection,Bx(t,n)}))}}(t,e);break;case St.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return n}var Ux=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this)||this).dataProjection=cr(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(n.defaultFeatureProjection=cr(r.featureProjection)),n.H=r.geometryName,n.cv=r.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return zx(e,t),e.prototype.readFeatureFromObject=function(t,e){var n,r=Gx((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new wt;return this.H?i.setGeometryName(this.H):this.cv&&"geometry_name"in n!==void 0&&i.setGeometryName(n.geometry_name),i.setGeometry(r),"id"in n&&i.setId(n.id),n.properties&&i.setProperties(n.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var r=t.features,i=0,o=r.length;i<o;++i)n.push(this.readFeatureFromObject(r[i],e))}else n=[this.readFeatureFromObject(t,e)];return n},e.prototype.readGeometryFromObject=function(t,e){return Gx(t,e)},e.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=cr(n.properties.name):"EPSG"===n.type?e=cr("EPSG:"+n.properties.code):yt(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(n.id=r),!t.hasProperties())return n;var i=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=Bx(o,e),delete i[t.getGeometryName()]),N(i)||(n.properties=i),n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return Bx(t,this.adaptOptions(e))},e}(jx),qx=r(63);function Wx(t){return function(t){if(Array.isArray(t))return o_(t)}(t)||Vx(t)||i_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vx(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Hx(t,e){return Xx(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||i_(t,e)||Yx()}function Yx(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xx(t){if(Array.isArray(t))return t}function Zx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kx(t,e,n){return e&&Zx(t.prototype,e),n&&Zx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qx(t){var e="function"==typeof Map?new Map:void 0;return(Qx=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return $x(t,arguments,n_(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e_(r,t)})(t)}function $x(t,e,n){return($x=t_()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&e_(i,n.prototype),i}).apply(null,arguments)}function t_(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function e_(t,e){return(e_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n_(t){return(n_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r_(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i_(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function i_(t,e){if(t){if("string"==typeof t)return o_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o_(t,e):void 0}}function o_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a_(t){return(a_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s_={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0° is directly above, at zenith, and 90° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0° is directly above, at zenith, and 90° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},l_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function u_(t){var e={exports:{}};return t(e,e.exports),e.exports}var c_=u_((function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==a_(l_)&&l_;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,l=2147483647,u=36,c=/^xn--/,h=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function y(t){throw RangeError(f[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function v(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(p,".")).split("."),e).join(".")}function w(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return m(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+g(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function _(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=u)t=d(t/35);return d(r+36*t/(t+38))}function E(t){var e,n,r,i,o,a,s,c,h,p,f,g=[],m=t.length,v=0,w=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,a=1,s=u;i>=m&&y("invalid-input"),((c=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u)>=u||c>d((l-v)/a))&&y("overflow"),v+=c*a,!(c<(h=s<=x?1:s>=x+26?26:s-x));s+=u)a>d(l/(p=u-h))&&y("overflow"),a*=p;x=_(v-o,e=g.length+1,0==o),d(v/e)>l-w&&y("overflow"),w+=d(v/e),v%=e,g.splice(v++,0,w)}return b(g)}function S(t){var e,n,r,i,o,a,s,c,h,p,f,m,v,b,E,S=[];for(m=(t=w(t)).length,e=128,n=0,o=72,a=0;a<m;++a)(f=t[a])<128&&S.push(g(f));for(r=i=S.length,i&&S.push("-");r<m;){for(s=l,a=0;a<m;++a)(f=t[a])>=e&&f<s&&(s=f);for(s-e>d((l-n)/(v=r+1))&&y("overflow"),n+=(s-e)*v,e=s,a=0;a<m;++a)if((f=t[a])<e&&++n>l&&y("overflow"),f==e){for(c=n,h=u;!(c<(p=h<=o?1:h>=o+26?26:h-o));h+=u)E=c-p,b=u-p,S.push(g(x(p+E%b,0))),c=d(E/b);S.push(g(x(c,0))),o=_(n,v,r==i),n=0,++r}++n,++e}return S.join("")}if(a={version:"1.3.2",ucs2:{decode:w,encode:b},decode:E,encode:S,toASCII:function(t){return v(t,(function(t){return h.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return v(t,(function(t){return c.test(t)?E(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(l_)})),h_=function(t){return"string"==typeof t},p_=function(t){return"object"===a_(t)&&null!==t},f_=function(t){return null===t};function d_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var g_=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var u,c,h,p,f=t[l].replace(o,"%20"),d=f.indexOf(n);d>=0?(u=f.substr(0,d),c=f.substr(d+1)):(u=f,c=""),h=decodeURIComponent(u),p=decodeURIComponent(c),d_(i,h)?Array.isArray(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i},y_=function(t){switch(a_(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},m_=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===a_(t)?Object.keys(t).map((function(r){var i=encodeURIComponent(y_(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return i+encodeURIComponent(y_(t))})).join(e):i+encodeURIComponent(y_(t[r]))})).join(e):r?encodeURIComponent(y_(r))+n+encodeURIComponent(y_(t)):""},v_=u_((function(t,e){e.decode=e.parse=g_,e.encode=e.stringify=m_}));function w_(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var b_=/^([a-z0-9.+-]+:)/i,x_=/:[0-9]*$/,__=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,E_=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),S_=["'"].concat(E_),C_=["%","/","?",";","#"].concat(S_),T_=["/","?","#"],I_=/^[+a-z0-9A-Z_-]{0,63}$/,A_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P_={javascript:!0,"javascript:":!0},k_={javascript:!0,"javascript:":!0},O_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function M_(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)t[s]=a[s]}return t}w_.prototype.parse=function(t,e,n){if(!h_(t))throw new TypeError("Parameter 'url' must be a string, not "+a_(t));var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!n&&1===t.split("#").length){var s=__.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?v_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=b_.exec(a);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,a=a.substr(l.length)}if(n||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||l&&k_[l]||(a=a.substr(2),this.slashes=!0)}if(!k_[l]&&(c||l&&!O_[l])){for(var h,p,f=-1,d=0;d<T_.length;d++)-1!==(g=a.indexOf(T_[d]))&&(-1===f||g<f)&&(f=g);for(-1!==(p=-1===f?a.lastIndexOf("@"):a.lastIndexOf("@",f))&&(h=a.slice(0,p),a=a.slice(p+1),this.auth=decodeURIComponent(h)),f=-1,d=0;d<C_.length;d++){var g;-1!==(g=a.indexOf(C_[d]))&&(-1===f||g<f)&&(f=g)}-1===f&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var m=this.hostname.split(/\./),v=(d=0,m.length);d<v;d++){var w=m[d];if(w&&!w.match(I_)){for(var b="",x=0,_=w.length;x<_;x++)w.charCodeAt(x)>127?b+="x":b+=w[x];if(!b.match(I_)){var E=m.slice(0,d),S=m.slice(d+1),C=w.match(A_);C&&(E.push(C[1]),S.unshift(C[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=c_.toASCII(this.hostname));var T=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+T,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!P_[u])for(d=0,v=S_.length;d<v;d++){var A=S_[d];if(-1!==a.indexOf(A)){var P=encodeURIComponent(A);P===A&&(P=escape(A)),a=a.split(A).join(P)}}var k=a.indexOf("#");-1!==k&&(this.hash=a.substr(k),a=a.slice(0,k));var O=a.indexOf("?");if(-1!==O?(this.search=a.substr(O),this.query=a.substr(O+1),e&&(this.query=v_.parse(this.query)),a=a.slice(0,O)):e&&(this.search="",this.query={}),a&&(this.pathname=a),O_[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var M=this.search||"";this.path=T+M}return this.href=this.format(),this},w_.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&p_(this.query)&&Object.keys(this.query).length&&(o=v_.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||O_[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},w_.prototype.resolve=function(t){return this.resolveObject(function(t,e,n){if(t&&p_(t)&&t instanceof w_)return t;var r=new w_;return r.parse(t,e,n),r}(t,!1,!0)).format()},w_.prototype.resolveObject=function(t){if(h_(t)){var e=new w_;e.parse(t,!1,!0),t=e}for(var n=new w_,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(n[l]=t[l])}return O_[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!O_[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||k_[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",d=n.search||"";n.path=f+d}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=y||g||n.host&&t.pathname,v=m,w=n.pathname&&n.pathname.split("/")||[],b=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!O_[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),m=m&&(""===p[0]||""===w[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=t.search,n.query=t.query;else if(!function(t){return null==t}(t.search))return b&&(n.hostname=n.host=w.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),n.search=t.search,n.query=t.query,f_(n.pathname)&&f_(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=w.slice(-1)[0],_=(n.host||t.host||w.length>1)&&("."===x||".."===x)||""===x,E=0,S=w.length;S>=0;S--)"."===(x=w[S])?w.splice(S,1):".."===x?(w.splice(S,1),E++):E&&(w.splice(S,1),E--);if(!m&&!v)for(;E--;E)w.unshift("..");!m||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),_&&"/"!==w.join("/").substr(-1)&&w.push("");var C,T=""===w[0]||w[0]&&"/"===w[0].charAt(0);return b&&(n.hostname=n.host=T?"":w.length?w.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),(m=m||n.host&&w.length)&&!T&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),f_(n.pathname)&&f_(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},w_.prototype.parseHost=function(){var t=this.host,e=x_.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var N_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e_(t,e)}(i,t);var e,n,r=(e=i,n=t_(),function(){var t,r=n_(e);if(n){var i=n_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return function(t,e){if(e&&("object"===a_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return Jx(this,i),(n=r.call(this,e)).message=e,n.key=t,n}return Kx(i)}(Qx(Error)),L_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Jx(this,t),this.parent=e,this.bindings={};var r,i=r_(n);try{for(i.s();!(r=i.n()).done;){var o=Hx(r.value,2),a=o[0],s=o[1];this.bindings[a]=s}}catch(t){i.e(t)}finally{i.f()}}return Kx(t,[{key:"concat",value:function(e){return new t(this,e)}},{key:"get",value:function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}},{key:"has",value:function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}]),t}(),R_={kind:"null"},D_={kind:"number"},F_={kind:"string"},j_={kind:"boolean"},z_={kind:"color"},G_={kind:"object"},B_={kind:"value"},U_={kind:"collator"},q_={kind:"formatted"},W_={kind:"resolvedImage"};function V_(t,e){return{kind:"array",itemType:t,N:e}}function H_(t){if("array"===t.kind){var e=H_(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}var Y_=[R_,D_,F_,j_,z_,q_,G_,V_(B_),W_];function X_(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!X_(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind){var n,r=r_(Y_);try{for(r.s();!(n=r.n()).done;)if(!X_(n.value,e))return null}catch(t){r.e(t)}finally{r.f()}}}return"Expected ".concat(H_(t)," but found ").concat(H_(e)," instead.")}function Z_(t,e){return e.some((function(e){return e.kind===t.kind}))}function K_(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"===a_(t):e===a_(t)}))}var J_=u_((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),h=i.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),p];case"hsla":if(4!==h.length)return null;p=a(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),g=a(h[2]),y=g<=.5?g*(d+1):g+d-g*d,m=2*g-y;return[r(255*s(m,y,f+1/3)),r(255*s(m,y,f)),r(255*s(m,y,f-1/3)),p];default:return null}}return null}}catch(t){}})),Q_=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Jx(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return Kx(t,[{key:"toString",value:function(){var t=Hx(this.toArray(),4),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba(".concat(Math.round(e),",").concat(Math.round(n),",").concat(Math.round(r),",").concat(i,")")}},{key:"toArray",value:function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}],[{key:"parse",value:function(e){if(e){if(e instanceof t)return e;if("string"==typeof e){var n=J_.parseCSSColor(e);if(n)return new t(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}}}}]),t}();Q_.black=new Q_(0,0,0,1),Q_.white=new Q_(1,1,1,1),Q_.transparent=new Q_(0,0,0,0),Q_.red=new Q_(1,0,0,1),Q_.blue=new Q_(0,0,1,1);var $_=function(){function t(e,n,r){Jx(this,t),this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return Kx(t,[{key:"compare",value:function(t,e){return this.collator.compare(t,e)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),t}(),tE=Kx((function t(e,n,r,i,o){Jx(this,t),this.text=e,this.image=n,this.scale=r,this.fontStack=i,this.textColor=o})),eE=function(){function t(e){Jx(this,t),this.sections=e}return Kx(t,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")}},{key:"serialize",value:function(){var t,e=["format"],n=r_(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}}}catch(t){n.e(t)}finally{n.f()}return e}}],[{key:"fromString",value:function(e){return new t([new tE(e,null,null,null,null)])}},{key:"factory",value:function(e){return e instanceof t?e:t.fromString(e)}}]),t}(),nE=function(){function t(e){Jx(this,t),this.name=e.name,this.available=e.available}return Kx(t,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(e){return e?new t({name:e,available:!1}):null}}]),t}();function rE(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([t,e,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function iE(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Q_)return!0;if(t instanceof $_)return!0;if(t instanceof eE)return!0;if(t instanceof nE)return!0;if(Array.isArray(t)){var e,n=r_(t);try{for(n.s();!(e=n.n()).done;)if(!iE(e.value))return!1}catch(t){n.e(t)}finally{n.f()}return!0}if("object"===a_(t)){for(var r in t)if(!iE(t[r]))return!1;return!0}return!1}function oE(t){if(null===t)return R_;if("string"==typeof t)return F_;if("boolean"==typeof t)return j_;if("number"==typeof t)return D_;if(t instanceof Q_)return z_;if(t instanceof $_)return U_;if(t instanceof eE)return q_;if(t instanceof nE)return W_;if(Array.isArray(t)){var e,n,r=t.length,i=r_(t);try{for(i.s();!(n=i.n()).done;){var o=oE(n.value);if(e){if(e===o)continue;e=B_;break}e=o}}catch(t){i.e(t)}finally{i.f()}return V_(e||B_,r)}return G_}function aE(t){var e=a_(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Q_||t instanceof eE||t instanceof nE?t.toString():JSON.stringify(t)}var sE=function(){function t(e,n){Jx(this,t),this.type=e,this.value=n}return Kx(t,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Q_?["rgba"].concat(this.value.toArray()):this.value instanceof eE?this.value.serialize():this.value}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!iE(e[1]))return n.error("invalid value");var r=e[1],i=oE(r),o=n.expectedType;return"array"!==i.kind||0!==i.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(i=o),new t(i,r)}}]),t}(),lE=function(){function t(e){Jx(this,t),this.name="ExpressionEvaluationError",this.message=e}return Kx(t,[{key:"toJSON",value:function(){return this.message}}]),t}(),uE={string:F_,number:D_,boolean:j_,object:G_},cE=function(){function t(e,n){Jx(this,t),this.type=e,this.args=n}return Kx(t,[{key:"evaluate",value:function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!X_(this.type,oE(n)))return n;if(e===this.args.length-1)throw new lE("Expected value to be of type ".concat(H_(this.type),", but found ").concat(H_(oE(n))," instead."))}return null}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r,i=1,o=e[0];if("array"===o){var a,s;if(e.length>2){var l=e[1];if("string"!=typeof l||!(l in uE)||"object"===l)return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=uE[l],i++}else a=B_;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=e[2],i++}r=V_(a,s)}else r=uE[o];for(var u=[];i<e.length;i++){var c=n.parse(e[i],i,B_);if(!c)return null;u.push(c)}return new t(r,u)}}]),t}(),hE=function(){function t(e){Jx(this,t),this.type=q_,this.sections=e}return Kx(t,[{key:"evaluate",value:function(t){return new eE(this.sections.map((function(e){var n=e.content.evaluate(t);return oE(n)===W_?new tE("",n,null,null,null):new tE(aE(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}},{key:"eachChild",value:function(t){var e,n=r_(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t,e=["format"],n=r_(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}}catch(t){n.e(t)}finally{n.f()}return e}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"===a_(r))return n.error("First argument must be an image or text section.");for(var i=[],o=!1,a=1;a<=e.length-1;++a){var s=e[a];if(o&&"object"===a_(s)&&!Array.isArray(s)){o=!1;var l=null;if(s["font-scale"]&&!(l=n.parse(s["font-scale"],1,D_)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,V_(F_))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,z_)))return null;var h=i[i.length-1];h.scale=l,h.font=u,h.textColor=c}else{var p=n.parse(e[a],1,B_);if(!p)return null;var f=p.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:p,scale:null,font:null,textColor:null})}}return new t(i)}}]),t}(),pE=function(){function t(e){Jx(this,t),this.type=W_,this.input=e}return Kx(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=nE.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,F_);return r?new t(r):n.error("No image name provided.")}}]),t}(),fE={"to-boolean":j_,"to-color":z_,"to-number":D_,"to-string":F_},dE=function(){function t(e,n){Jx(this,t),this.type=e,this.args=n}return Kx(t,[{key:"evaluate",value:function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){var e,n,r,i=r_(this.args);try{for(i.s();!(r=i.n()).done;){if(e=r.value.evaluate(t),n=null,e instanceof Q_)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):rE(e[0],e[1],e[2],e[3])))return new Q_(e[0]/255,e[1]/255,e[2]/255,e[3])}}catch(t){i.e(t)}finally{i.f()}throw new lE(n||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){var a,s=null,l=r_(this.args);try{for(l.s();!(a=l.n()).done;){if(null===(s=a.value.evaluate(t)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(t){l.e(t)}finally{l.f()}throw new lE("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?eE.fromString(aE(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?nE.fromString(aE(this.args[0].evaluate(t))):aE(this.args[0].evaluate(t))}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new hE([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new pE(this.args[0]).serialize();var t=["to-".concat(this.type.kind)];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return n.error("Expected one argument.");for(var i=fE[r],o=[],a=1;a<e.length;a++){var s=n.parse(e[a],a,B_);if(!s)return null;o.push(s)}return new t(i,o)}}]),t}(),gE=["Unknown","Point","LineString","Polygon"],yE=function(){function t(){Jx(this,t),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return Kx(t,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?gE[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Q_.parse(t)),e}}]),t}(),mE=function(){function t(e,n,r,i){Jx(this,t),this.name=e,this.type=n,this._evaluate=r,this.args=i}return Kx(t,[{key:"evaluate",value:function(t){return this._evaluate(t,this.args)}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){var r=e[0],i=t.definitions[r];if(!i)return n.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,a=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,l=s.filter((function(t){var n=Hx(t,1)[0];return!Array.isArray(n)||n.length===e.length-1})),u=null,c=r_(l);try{for(c.s();!(o=c.n()).done;){var h=Hx(o.value,2),p=h[0],f=h[1];u=new BE(n.registry,n.path,null,n.scope);for(var d=[],g=!1,y=1;y<e.length;y++){var m=e[y],v=Array.isArray(p)?p[y-1]:p.type,w=u.parse(m,1+d.length,v);if(!w){g=!0;break}d.push(w)}if(!g)if(Array.isArray(p)&&p.length!==d.length)u.error("Expected ".concat(p.length," arguments, but found ").concat(d.length," instead."));else{for(var b=0;b<d.length;b++){var x=Array.isArray(p)?p[b]:p.type,_=d[b];u.concat(b+1).checkSubtype(x,_.type)}if(0===u.errors.length)return new t(r,a,f,d)}}}catch(t){c.e(t)}finally{c.f()}if(1===l.length){var E;(E=n.errors).push.apply(E,Wx(u.errors))}else{for(var S=(l.length?l:s).map((function(t){var e;return e=Hx(t,1)[0],Array.isArray(e)?"(".concat(e.map(H_).join(", "),")"):"(".concat(H_(e.type),"...)")})).join(" | "),C=[],T=1;T<e.length;T++){var I=n.parse(e[T],1+C.length);if(!I)return null;C.push(H_(I.type))}n.error("Expected arguments of type ".concat(S,", but found (").concat(C.join(", "),") instead."))}return null}},{key:"register",value:function(e,n){for(var r in t.definitions=n,n)e[r]=t}}]),t}(),vE=function(){function t(e,n,r){Jx(this,t),this.type=U_,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=n}return Kx(t,[{key:"evaluate",value:function(t){return new $_(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}},{key:"eachChild",value:function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected one argument.");var r=e[1];if("object"!==a_(r)||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,j_);if(!i)return null;var o=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,j_);if(!o)return null;var a=null;return r.locale&&!(a=n.parse(r.locale,1,F_))?null:new t(i,o,a)}}]),t}(),wE=8192;function bE(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function xE(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function _E(t,e){var n,r=(180+t[0])/360,i=(n=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360),o=Math.pow(2,e.z);return[Math.round(r*o*wE),Math.round(i*o*wE)]}function EE(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function SE(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function CE(t,e){for(var n=!1,r=0,i=e.length;r<i;r++)for(var o=e[r],a=0,s=o.length;a<s-1;a++){if(EE(t,o[a],o[a+1]))return!1;SE(t,o[a],o[a+1])&&(n=!n)}return n}function TE(t,e){for(var n=0;n<e.length;n++)if(CE(t,e[n]))return!0;return!1}function IE(t,e,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=e[0]-n[0],s=e[1]-n[1],l=r[0]-n[0],u=r[1]-n[1],c=i*u-l*o,h=a*u-l*s;return c>0&&h<0||c<0&&h>0}function AE(t,e,n){var r,i,o,a,s,l,u,c,h=r_(n);try{for(h.s();!(r=h.n()).done;)for(var p=r.value,f=0;f<p.length-1;++f)if(i=t,o=e,a=p[f],s=p[f+1],void 0,void 0,void 0,c=[o[0]-i[0],o[1]-i[1]],0!=(l=[s[0]-a[0],s[1]-a[1]])[0]*(u=c)[1]-l[1]*u[0]&&IE(i,o,a,s)&&IE(a,s,i,o))return!0}catch(t){h.e(t)}finally{h.f()}return!1}function PE(t,e){for(var n=0;n<t.length;++n)if(!CE(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(AE(t[r],t[r+1],e))return!1;return!0}function kE(t,e){for(var n=0;n<e.length;n++)if(PE(t,e[n]))return!0;return!1}function OE(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=_E(t[i][a],n);bE(e,s),o.push(s)}r.push(o)}return r}function ME(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=OE(t[i],e,n);r.push(o)}return r}function NE(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}bE(e,t)}function LE(t,e,n,r){var i,o=Math.pow(2,r.z)*wE,a=[r.x*wE,r.y*wE],s=[],l=r_(t);try{for(l.s();!(i=l.n()).done;){var u,c=r_(i.value);try{for(c.s();!(u=c.n()).done;){var h=u.value,p=[h.x+a[0],h.y+a[1]];NE(p,e,n,o),s.push(p)}}catch(t){c.e(t)}finally{c.f()}}}catch(t){l.e(t)}finally{l.f()}return s}function RE(t,e,n,r){var i,o=Math.pow(2,r.z)*wE,a=[r.x*wE,r.y*wE],s=[],l=r_(t);try{for(l.s();!(i=l.n()).done;){var u,c=i.value,h=[],p=r_(c);try{for(p.s();!(u=p.n()).done;){var f=u.value,d=[f.x+a[0],f.y+a[1]];bE(e,d),h.push(d)}}catch(t){p.e(t)}finally{p.f()}s.push(h)}}catch(t){l.e(t)}finally{l.f()}if(e[2]-e[0]<=o/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}(e);var g,y=r_(s);try{for(y.s();!(g=y.n()).done;){var m,v=r_(g.value);try{for(v.s();!(m=v.n()).done;)NE(m.value,e,n,o)}catch(t){v.e(t)}finally{v.f()}}}catch(t){y.e(t)}finally{y.f()}}return s}var DE=function(){function t(e,n){Jx(this,t),this.type=j_,this.geojson=e,this.geometries=n}return Kx(t,[{key:"evaluate",value:function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=OE(e.coordinates,r,i),a=LE(t.geometry(),n,r,i);if(!xE(n,r))return!1;var s,l=r_(a);try{for(l.s();!(s=l.n()).done;)if(!CE(s.value,o))return!1}catch(t){l.e(t)}finally{l.f()}}if("MultiPolygon"===e.type){var u=ME(e.coordinates,r,i),c=LE(t.geometry(),n,r,i);if(!xE(n,r))return!1;var h,p=r_(c);try{for(p.s();!(h=p.n()).done;)if(!TE(h.value,u))return!1}catch(t){p.e(t)}finally{p.f()}}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=OE(e.coordinates,r,i),a=RE(t.geometry(),n,r,i);if(!xE(n,r))return!1;var s,l=r_(a);try{for(l.s();!(s=l.n()).done;)if(!PE(s.value,o))return!1}catch(t){l.e(t)}finally{l.f()}}if("MultiPolygon"===e.type){var u=ME(e.coordinates,r,i),c=RE(t.geometry(),n,r,i);if(!xE(n,r))return!1;var h,p=r_(c);try{for(p.s();!(h=p.n()).done;)if(!kE(h.value,u))return!1}catch(t){p.e(t)}finally{p.f()}}return!0}(t,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(iE(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var o=r.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new t(r,r.features[i].geometry)}else if("Feature"===r.type){var a=r.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new t(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new t(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),t}();function FE(t){if(t instanceof mE){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof DE)return!1;var e=!0;return t.eachChild((function(t){e&&!FE(t)&&(e=!1)})),e}function jE(t){if(t instanceof mE&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!jE(t)&&(e=!1)})),e}function zE(t,e){if(t instanceof mE&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!zE(t,e)&&(n=!1)})),n}var GE=function(){function t(e,n){Jx(this,t),this.type=n.type,this.name=e,this.boundExpression=n}return Kx(t,[{key:"evaluate",value:function(t){return this.boundExpression.evaluate(t)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");var r=e[1];return n.scope.has(r)?new t(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),t}(),BE=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new L_,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];Jx(this,t),this.registry=e,this.path=n,this.key=n.map((function(t){return"[".concat(t,"]")})).join(""),this.scope=i,this.errors=o,this.expectedType=r}return Kx(t,[{key:"parse",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}},{key:"_parse",value:function(t,e){function n(t,e,n){return"assert"===n?new cE(e,[t]):"coerce"===n?new dE(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(a_(r),' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof sE)&&"resolvedImage"!==o.type.kind&&UE(o)){var l=new yE;try{o=new sE(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"===a_(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found ".concat(a_(t)," instead."))}},{key:"concat",value:function(e,n,r){var i="number"==typeof e?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new t(this.registry,i,n||null,o,this.errors)}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(t){return"[".concat(t,"]")})).join(""));this.errors.push(new N_(i,t))}},{key:"checkSubtype",value:function(t,e){var n=X_(t,e);return n&&this.error(n),n}}]),t}();function UE(t){if(t instanceof GE)return UE(t.boundExpression);if(t instanceof mE&&"error"===t.name)return!1;if(t instanceof vE)return!1;if(t instanceof DE)return!1;var e=t instanceof dE||t instanceof cE,n=!0;return t.eachChild((function(t){n=e?n&&UE(t):n&&t instanceof sE})),!!n&&FE(t)&&zE(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function qE(t,e){for(var n,r,i=t.length-1,o=0,a=i,s=0;o<=a;)if(n=t[s=Math.floor((o+a)/2)],r=t[s+1],n<=e){if(s===i||e<r)return s;o=s+1}else{if(!(n>e))throw new lE("Input is not a number.");a=s-1}return 0}var WE=function(){function t(e,n,r){Jx(this,t),this.type=e,this.input=n,this.labels=[],this.outputs=[];var i,o=r_(r);try{for(o.s();!(i=o.n()).done;){var a=Hx(i.value,2),s=a[0],l=a[1];this.labels.push(s),this.outputs.push(l)}}catch(t){o.e(t)}finally{o.f()}}return Kx(t,[{key:"evaluate",value:function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[qE(e,r)].evaluate(t)}},{key:"eachChild",value:function(t){t(this.input);var e,n=r_(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}],[{key:"parse",value:function(e,n){if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(e[1],1,D_);if(!r)return null;var i=[],o=null;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);for(var a=1;a<e.length;a+=2){var s=1===a?-1/0:e[a],l=e[a+1],u=a,c=a+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(l,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new t(o,r,i)}}]),t}(),VE=HE;function HE(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function YE(t,e,n){return t*(1-n)+e*n}HE.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},HE.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},HE.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},HE.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},HE.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var XE=Object.freeze({__proto__:null,number:YE,color:function(t,e,n){return new Q_(YE(t.r,e.r,n),YE(t.g,e.g,n),YE(t.b,e.b,n),YE(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,r){return YE(t,e[r],n)}))}}),ZE=.95047,KE=1.08883,JE=4/29,QE=6/29,$E=3*QE*QE,tS=Math.PI/180,eS=180/Math.PI;function nS(t){return t>.008856451679035631?Math.pow(t,1/3):t/$E+JE}function rS(t){return t>QE?t*t*t:$E*(t-JE)}function iS(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function oS(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function aS(t){var e=oS(t.r),n=oS(t.g),r=oS(t.b),i=nS((.4124564*e+.3575761*n+.1804375*r)/ZE),o=nS((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-nS((.0193339*e+.119192*n+.9503041*r)/KE)),alpha:t.a}}function sS(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*rS(e),n=ZE*rS(n),r=KE*rS(r),new Q_(iS(3.2404542*n-1.5371385*e-.4985314*r),iS(-.969266*n+1.8760108*e+.041556*r),iS(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function lS(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var uS={forward:aS,reverse:sS,interpolate:function(t,e,n){return{l:YE(t.l,e.l,n),a:YE(t.a,e.a,n),b:YE(t.b,e.b,n),alpha:YE(t.alpha,e.alpha,n)}}},cS=function(t){var e=aS(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*eS;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},hS=function(t){var e=t.h*tS,n=t.c;return sS({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},pS=function(t,e,n){return{h:lS(t.h,e.h,n),c:YE(t.c,e.c,n),l:YE(t.l,e.l,n),alpha:YE(t.alpha,e.alpha,n)}},fS=function(){function t(e,n,r,i,o){Jx(this,t),this.type=e,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var a,s=r_(o);try{for(s.s();!(a=s.n()).done;){var l=Hx(a.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(t){s.e(t)}finally{s.f()}}return Kx(t,[{key:"evaluate",value:function(e){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(e);var i=this.input.evaluate(e);if(i<=n[0])return r[0].evaluate(e);var o=n.length;if(i>=n[o-1])return r[o-1].evaluate(e);var a=qE(n,i),s=n[a],l=n[a+1],u=t.interpolationFactor(this.interpolation,i,s,l),c=r[a].evaluate(e),h=r[a+1].evaluate(e);return"interpolate"===this.operator?XE[this.type.kind.toLowerCase()](c,h,u):"interpolate-hcl"===this.operator?hS(pS(cS(c),cS(h),u)):uS.reverse(uS.interpolate(uS.forward(c),uS.forward(h),u))}},{key:"eachChild",value:function(t){t(this.input);var e,n=r_(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}],[{key:"interpolationFactor",value:function(t,e,n,r){var i=0;if("exponential"===t.name)i=dS(e,t.base,n,r);else if("linear"===t.name)i=dS(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new VE(o[0],o[1],o[2],o[3]).solve(dS(e,1,n,r))}return i}},{key:"parse",value:function(e,n){var r,i=Xx(r=e)||Vx(r)||i_(r)||Yx(),o=i[0],a=i[1],s=i[2],l=i.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var u=a[1];if("number"!=typeof u)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:u}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(s=n.parse(s,2,D_)))return null;var h=[],p=null;"interpolate-hcl"===o||"interpolate-lab"===o?p=z_:n.expectedType&&"value"!==n.expectedType.kind&&(p=n.expectedType);for(var f=0;f<l.length;f+=2){var d=l[f],g=l[f+1],y=f+3,m=f+4;if("number"!=typeof d)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(h.length&&h[h.length-1][0]>=d)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',y);var v=n.parse(g,m,p);if(!v)return null;p=p||v.type,h.push([d,v])}return"number"===p.kind||"color"===p.kind||"array"===p.kind&&"number"===p.itemType.kind&&"number"==typeof p.N?new t(p,o,a,s,h):n.error("Type ".concat(H_(p)," is not interpolatable."))}}]),t}();function dS(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var gS=function(){function t(e,n){Jx(this,t),this.type=e,this.args=n}return Kx(t,[{key:"evaluate",value:function(t){var e,n,r=null,i=0,o=r_(this.args);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(i++,(r=a.evaluate(t))&&r instanceof nE&&!r.available&&(e||(e=r.name),r=null,i===this.args.length&&(r=e)),null!==r)break}}catch(t){o.e(t)}finally{o.f()}return r}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var o,a=[],s=r_(e.slice(1));try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n.parse(l,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,a.push(u)}}catch(t){s.e(t)}finally{s.f()}return new t(i&&a.some((function(t){return X_(i,t.type)}))?B_:r,a)}}]),t}(),yS=function(){function t(e,n){Jx(this,t),this.type=n.type,this.bindings=[].concat(e),this.result=n}return Kx(t,[{key:"evaluate",value:function(t){return this.result.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=r_(this.bindings);try{for(n.s();!(e=n.n()).done;)t(e.value[1])}catch(t){n.e(t)}finally{n.f()}t(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var t,e=["let"],n=r_(this.bindings);try{for(n.s();!(t=n.n()).done;){var r=Hx(t.value,2),i=r[0],o=r[1];e.push(i,o.serialize())}}catch(t){n.e(t)}finally{n.f()}return e.push(this.result.serialize()),e}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));for(var r=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return n.error("Expected string, but found ".concat(a_(o)," instead."),i);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=n.parse(e[i+1],i+1);if(!a)return null;r.push([o,a])}var s=n.parse(e[e.length-1],e.length-1,n.expectedType,r);return s?new t(r,s):null}}]),t}(),mS=function(){function t(e,n,r){Jx(this,t),this.type=e,this.index=n,this.input=r}return Kx(t,[{key:"evaluate",value:function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new lE("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new lE("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new lE("Array index must be an integer, but found ".concat(e," instead."));return n[e]}},{key:"eachChild",value:function(t){t(this.index),t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,D_),i=n.parse(e[2],2,V_(n.expectedType||B_));return r&&i?new t(i.type.itemType,r,i):null}}]),t}(),vS=function(){function t(e,n){Jx(this,t),this.type=j_,this.needle=e,this.haystack=n}return Kx(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!K_(e,["boolean","string","number","null"]))throw new lE("Expected first argument to be of type boolean, string, number or null, but found ".concat(H_(oE(e))," instead."));if(!K_(n,["string","array"]))throw new lE("Expected second argument to be of type array or string, but found ".concat(H_(oE(n))," instead."));return n.indexOf(e)>=0}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,B_),i=n.parse(e[2],2,B_);return r&&i?Z_(r.type,[j_,F_,D_,R_,B_])?new t(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(H_(r.type)," instead")):null}}]),t}(),wS=function(){function t(e,n,r){Jx(this,t),this.type=D_,this.needle=e,this.haystack=n,this.fromIndex=r}return Kx(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!K_(e,["boolean","string","number","null"]))throw new lE("Expected first argument to be of type boolean, string, number or null, but found ".concat(H_(oE(e))," instead."));if(!K_(n,["string","array"]))throw new lE("Expected second argument to be of type array or string, but found ".concat(H_(oE(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,B_),i=n.parse(e[2],2,B_);if(!r||!i)return null;if(!Z_(r.type,[j_,F_,D_,R_,B_]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(H_(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,D_);return o?new t(r,i,o):null}return new t(r,i)}}]),t}(),bS=function(){function t(e,n,r,i,o,a){Jx(this,t),this.inputType=e,this.type=n,this.input=r,this.cases=i,this.outputs=o,this.otherwise=a}return Kx(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);return(oE(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}},{key:"eachChild",value:function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t,e=this,n=["match",this.input.serialize()],r=[],i={},o=r_(Object.keys(this.cases).sort());try{for(o.s();!(t=o.n()).done;){var a=t.value,s=i[this.cases[a]];void 0===s?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[s][1].push(a)}}catch(t){o.e(t)}finally{o.f()}for(var l=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,c=r;u<c.length;u++){var h=Hx(c[u],2),p=h[0],f=h[1];1===f.length?n.push(l(f[0])):n.push(f.map(l)),n.push(this.outputs[p].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(e,n){if(e.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var o={},a=[],s=2;s<e.length-1;s+=2){var l=e[s],u=e[s+1];Array.isArray(l)||(l=[l]);var c=n.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,p=r_(l);try{for(p.s();!(h=p.n()).done;){var f=h.value;if("number"!=typeof f&&"string"!=typeof f)return c.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof f&&Math.floor(f)!==f)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,oE(f)))return null}else r=oE(f);if(void 0!==o[String(f)])return c.error("Branch labels must be unique.");o[String(f)]=a.length}}catch(t){p.e(t)}finally{p.f()}var d=n.parse(u,s,i);if(!d)return null;i=i||d.type,a.push(d)}var g=n.parse(e[1],1,B_);if(!g)return null;var y=n.parse(e[e.length-1],e.length-1,i);return y?"value"!==g.type.kind&&n.concat(1).checkSubtype(r,g.type)?null:new t(r,i,g,o,a,y):null}}]),t}(),xS=function(){function t(e,n,r){Jx(this,t),this.type=e,this.branches=n,this.otherwise=r}return Kx(t,[{key:"evaluate",value:function(t){var e,n=r_(this.branches);try{for(n.s();!(e=n.n()).done;){var r=Hx(e.value,2),i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}}catch(t){n.e(t)}finally{n.f()}return this.otherwise.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=r_(this.branches);try{for(n.s();!(e=n.n()).done;){var r=Hx(e.value,2),i=r[0],o=r[1];t(i),t(o)}}catch(t){n.e(t)}finally{n.f()}t(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(t){var e=Hx(t,2);return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],o=1;o<e.length-1;o+=2){var a=n.parse(e[o],o,j_);if(!a)return null;var s=n.parse(e[o+1],o+1,r);if(!s)return null;i.push([a,s]),r=r||s.type}var l=n.parse(e[e.length-1],e.length-1,r);return l?new t(r,i,l):null}}]),t}(),_S=function(){function t(e,n,r,i){Jx(this,t),this.type=e,this.input=n,this.beginIndex=r,this.endIndex=i}return Kx(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!K_(e,["string","array"]))throw new lE("Expected first argument to be of type array or string, but found ".concat(H_(oE(e))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}},{key:"eachChild",value:function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,B_),i=n.parse(e[2],2,D_);if(!r||!i)return null;if(!Z_(r.type,[V_(B_),F_,B_]))return n.error("Expected first argument to be of type array or string, but found ".concat(H_(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,D_);return o?new t(r.type,r,i,o):null}return new t(r.type,r,i)}}]),t}();function ES(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function SS(t,e,n,r){return 0===r.compare(e,n)}function CS(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){Jx(this,i),this.type=j_,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return Kx(i,[{key:"evaluate",value:function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=oE(o),l=oE(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new lE('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var u=oE(o),c=oE(a);if("string"!==u.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}},{key:"eachChild",value:function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,B_);if(!o)return null;if(!ES(n,o.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(H_(o.type),"'."));var a=e.parse(t[2],2,B_);if(!a)return null;if(!ES(n,a.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(H_(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(H_(o.type),"' and '").concat(H_(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new cE(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new cE(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,U_)))return null}return new i(o,a,s)}}]),i}()}var TS=CS("==",(function(t,e,n){return e===n}),SS),IS=CS("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!SS(0,e,n,r)})),AS=CS("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),PS=CS(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),kS=CS("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),OS=CS(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),MS=function(){function t(e,n,r,i,o){Jx(this,t),this.type=F_,this.number=e,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=o}return Kx(t,[{key:"evaluate",value:function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}},{key:"eachChild",value:function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,D_);if(!r)return null;var i=e[2];if("object"!==a_(i)||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=n.parse(i.locale,1,F_)))return null;var a=null;if(i.currency&&!(a=n.parse(i.currency,1,F_)))return null;var s=null;if(i["min-fraction-digits"]&&!(s=n.parse(i["min-fraction-digits"],1,D_)))return null;var l=null;return i["max-fraction-digits"]&&!(l=n.parse(i["max-fraction-digits"],1,D_))?null:new t(r,o,a,s,l)}}]),t}(),NS={"==":TS,"!=":IS,">":PS,"<":AS,">=":OS,"<=":kS,array:cE,at:mS,boolean:cE,case:xS,coalesce:gS,collator:vE,format:hE,image:pE,in:vS,"index-of":wS,interpolate:fS,"interpolate-hcl":fS,"interpolate-lab":fS,length:function(){function t(e){Jx(this,t),this.type=D_,this.input=e}return Kx(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new lE("Expected value to be of type string or array, but found ".concat(H_(oE(e))," instead."))}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected 1 argument, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(H_(r.type)," instead.")):new t(r):null}}]),t}(),let:yS,literal:sE,match:bS,number:cE,"number-format":MS,object:cE,slice:_S,step:WE,string:cE,"to-boolean":dE,"to-color":dE,"to-number":dE,"to-string":dE,var:GE,within:DE};function LS(t,e){var n=Hx(e,4),r=n[0],i=n[1],o=n[2],a=n[3];r=r.evaluate(t),i=i.evaluate(t),o=o.evaluate(t);var s=a?a.evaluate(t):1,l=rE(r,i,o,s);if(l)throw new lE(l);return new Q_(r/255*s,i/255*s,o/255*s,s)}function RS(t,e){return t in e}function DS(t,e){var n=e[t];return void 0===n?null:n}function FS(t){return{type:t}}function jS(t){return{result:"success",value:t}}function zS(t){return{result:"error",value:t}}function GS(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function BS(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function US(t){return!!t.expression&&t.expression.interpolated}function qS(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":a_(t)}function WS(t){return"object"===a_(t)&&null!==t&&!Array.isArray(t)}mE.register(NS,{error:[{kind:"error"},[F_],function(t,e){var n=Hx(e,1)[0];throw new lE(n.evaluate(t))}],typeof:[F_,[B_],function(t,e){return H_(oE(Hx(e,1)[0].evaluate(t)))}],"to-rgba":[V_(D_,4),[z_],function(t,e){return Hx(e,1)[0].evaluate(t).toArray()}],rgb:[z_,[D_,D_,D_],LS],rgba:[z_,[D_,D_,D_,D_],LS],has:{type:j_,overloads:[[[F_],function(t,e){return RS(Hx(e,1)[0].evaluate(t),t.properties())}],[[F_,G_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return RS(r.evaluate(t),i.evaluate(t))}]]},get:{type:B_,overloads:[[[F_],function(t,e){return DS(Hx(e,1)[0].evaluate(t),t.properties())}],[[F_,G_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return DS(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[B_,[F_],function(t,e){return DS(Hx(e,1)[0].evaluate(t),t.featureState||{})}],properties:[G_,[],function(t){return t.properties()}],"geometry-type":[F_,[],function(t){return t.geometryType()}],id:[B_,[],function(t){return t.id()}],zoom:[D_,[],function(t){return t.globals.zoom}],"heatmap-density":[D_,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[D_,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[D_,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[B_,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[D_,FS(D_),function(t,e){var n,r=0,i=r_(e);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return r}],"*":[D_,FS(D_),function(t,e){var n,r=1,i=r_(e);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return r}],"-":{type:D_,overloads:[[[D_,D_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return r.evaluate(t)-i.evaluate(t)}],[[D_],function(t,e){return-Hx(e,1)[0].evaluate(t)}]]},"/":[D_,[D_,D_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return r.evaluate(t)/i.evaluate(t)}],"%":[D_,[D_,D_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[D_,[],function(){return Math.LN2}],pi:[D_,[],function(){return Math.PI}],e:[D_,[],function(){return Math.E}],"^":[D_,[D_,D_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.sqrt(n.evaluate(t))}],log10:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.log(n.evaluate(t))}],log2:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.sin(n.evaluate(t))}],cos:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.cos(n.evaluate(t))}],tan:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.tan(n.evaluate(t))}],asin:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.asin(n.evaluate(t))}],acos:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.acos(n.evaluate(t))}],atan:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.atan(n.evaluate(t))}],min:[D_,FS(D_),function(t,e){return Math.min.apply(Math,Wx(e.map((function(e){return e.evaluate(t)}))))}],max:[D_,FS(D_),function(t,e){return Math.max.apply(Math,Wx(e.map((function(e){return e.evaluate(t)}))))}],abs:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.abs(n.evaluate(t))}],round:[D_,[D_],function(t,e){var n=Hx(e,1)[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.floor(n.evaluate(t))}],ceil:[D_,[D_],function(t,e){var n=Hx(e,1)[0];return Math.ceil(n.evaluate(t))}],"filter-==":[j_,[F_,B_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return t.properties()[r.value]===i.value}],"filter-id-==":[j_,[B_],function(t,e){var n=Hx(e,1)[0];return t.id()===n.value}],"filter-type-==":[j_,[F_],function(t,e){var n=Hx(e,1)[0];return t.geometryType()===n.value}],"filter-<":[j_,[F_,B_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return a_(o)===a_(a)&&o<a}],"filter-id-<":[j_,[B_],function(t,e){var n=Hx(e,1)[0],r=t.id(),i=n.value;return a_(r)===a_(i)&&r<i}],"filter->":[j_,[F_,B_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return a_(o)===a_(a)&&o>a}],"filter-id->":[j_,[B_],function(t,e){var n=Hx(e,1)[0],r=t.id(),i=n.value;return a_(r)===a_(i)&&r>i}],"filter-<=":[j_,[F_,B_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return a_(o)===a_(a)&&o<=a}],"filter-id-<=":[j_,[B_],function(t,e){var n=Hx(e,1)[0],r=t.id(),i=n.value;return a_(r)===a_(i)&&r<=i}],"filter->=":[j_,[F_,B_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return a_(o)===a_(a)&&o>=a}],"filter-id->=":[j_,[B_],function(t,e){var n=Hx(e,1)[0],r=t.id(),i=n.value;return a_(r)===a_(i)&&r>=i}],"filter-has":[j_,[B_],function(t,e){return Hx(e,1)[0].value in t.properties()}],"filter-has-id":[j_,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[j_,[V_(F_)],function(t,e){return Hx(e,1)[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[j_,[V_(B_)],function(t,e){return Hx(e,1)[0].value.indexOf(t.id())>=0}],"filter-in-small":[j_,[F_,V_(B_)],function(t,e){var n=Hx(e,2),r=n[0];return n[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[j_,[F_,V_(B_)],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:j_,overloads:[[[j_,j_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return r.evaluate(t)&&i.evaluate(t)}],[FS(j_),function(t,e){var n,r=r_(e);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(t))return!1}catch(t){r.e(t)}finally{r.f()}return!0}]]},any:{type:j_,overloads:[[[j_,j_],function(t,e){var n=Hx(e,2),r=n[0],i=n[1];return r.evaluate(t)||i.evaluate(t)}],[FS(j_),function(t,e){var n,r=r_(e);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(t))return!0}catch(t){r.e(t)}finally{r.f()}return!1}]]},"!":[j_,[j_],function(t,e){return!Hx(e,1)[0].evaluate(t)}],"is-supported-script":[j_,[F_],function(t,e){var n=Hx(e,1)[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[F_,[F_],function(t,e){return Hx(e,1)[0].evaluate(t).toUpperCase()}],downcase:[F_,[F_],function(t,e){return Hx(e,1)[0].evaluate(t).toLowerCase()}],concat:[F_,FS(B_),function(t,e){return e.map((function(e){return aE(e.evaluate(t))})).join("")}],"resolved-locale":[F_,[U_],function(t,e){return Hx(e,1)[0].evaluate(t).resolvedLocale()}]});var VS=function(){function t(e,n){var r;Jx(this,t),this.expression=e,this._warningHistory={},this._evaluator=new yE,this._defaultValue=n?"color"===(r=n).type&&WS(r.default)?new Q_(0,0,0,0):"color"===r.type?Q_.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=n&&"enum"===n.type?n.values:null}return Kx(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new lE("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", "),", but found ").concat(JSON.stringify(a)," instead."));return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}]),t}();function HS(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in NS}function YS(t,e){var n=new BE(NS,[],e?function(t){var e={color:z_,string:F_,number:D_,enum:F_,boolean:j_,formatted:q_,resolvedImage:W_};return"array"===t.type?V_(e[t.value]||B_,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?jS(new VS(r,e)):zS(n.errors)}var XS=function(){function t(e,n){Jx(this,t),this.kind=e,this._styleExpression=n,this.isStateDependent="constant"!==e&&!jE(n.expression)}return Kx(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}]),t}(),ZS=function(){function t(e,n,r,i){Jx(this,t),this.kind=e,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==e&&!jE(n.expression),this.interpolationType=i}return Kx(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}},{key:"interpolationFactor",value:function(t,e,n){return this.interpolationType?fS.interpolationFactor(this.interpolationType,t,e,n):0}}]),t}();function KS(t,e){if("error"===(t=YS(t,e)).result)return t;var n=t.value.expression,r=FE(n);if(!r&&!GS(e))return zS([new N_("","data expressions not supported")]);var i=zE(n,["zoom"]);if(!i&&!BS(e))return zS([new N_("","zoom expressions not supported")]);var o=JS(n);if(!o&&!i)return zS([new N_("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof N_)return zS([o]);if(o instanceof fS&&!US(e))return zS([new N_("",'"interpolate" expressions cannot be used with this property')]);if(!o)return jS(new XS(r?"constant":"source",t.value));var a=o instanceof fS?o.interpolation:void 0;return jS(new ZS(r?"camera":"composite",t.value,o.labels,a))}function JS(t){var e=null;if(t instanceof yS)e=JS(t.result);else if(t instanceof gS){var n,r=r_(t.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e=JS(i))break}}catch(t){r.e(t)}finally{r.f()}}else(t instanceof WE||t instanceof fS)&&t.input instanceof mE&&"zoom"===t.input.name&&(e=t);return e instanceof N_||t.eachChild((function(t){var n=JS(t);n instanceof N_?e=n:!e&&n?e=new N_("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new N_("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function QS(t){return"object"===a_(t)?["literal",t]:t}function $S(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function tC(t,e){var n,r,i=QS((n=t.default,r=e.default,void 0!==n?n:void 0!==r?r:void 0));return void 0===i&&"resolvedImage"===e.type?"":i}function eC(t,e,n){var r=iC(t,e),i=["get",t.property];if("categorical"===r&&"boolean"==typeof n[0][0]){var o,a=["case"],s=r_(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;a.push(["==",i,l[0]],l[1])}}catch(t){s.e(t)}finally{s.f()}return a.push(tC(t,e)),a}if("categorical"===r){var u,c=["match",i],h=r_(n);try{for(h.s();!(u=h.n()).done;){var p=u.value;rC(c,p[0],p[1],!1)}}catch(t){h.e(t)}finally{h.f()}return c.push(tC(t,e)),c}if("interval"===r){var f,d=["step",["number",i]],g=r_(n);try{for(g.s();!(f=g.n()).done;){var y=f.value;rC(d,y[0],y[1],!0)}}catch(t){g.e(t)}finally{g.f()}return nC(d),void 0===t.default?d:["case",["==",["typeof",i],"number"],d,QS(t.default)]}if("exponential"===r){var m,v=void 0!==t.base?t.base:1,w=[$S(t),1===v?["linear"]:["exponential",v],["number",i]],b=r_(n);try{for(b.s();!(m=b.n()).done;){var x=m.value;rC(w,x[0],x[1],!1)}}catch(t){b.e(t)}finally{b.f()}return void 0===t.default?w:["case",["==",["typeof",i],"number"],w,QS(t.default)]}throw new Error("Unknown property function type ".concat(r))}function nC(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function rC(t,e,n,r){t.length>3&&e===t[t.length-2]||(r&&2===t.length||t.push(e),t.push(n))}function iC(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function oC(t){for(var e=["concat"],n=/{([^{}]+)}/g,r=0,i=n.exec(t);null!==i;i=n.exec(t)){var o=t.slice(r,n.lastIndex-i[0].length);r=n.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(r<t.length)e.push(t.slice(r));else if(2===e.length)return["to-string",e[1]];return e}function aC(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":var e,n=r_(t.slice(1));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!aC(r)&&"boolean"!=typeof r)return!1}}catch(t){n.e(t)}finally{n.f()}return!0;default:return!0}}var sC={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function lC(t,e){return t<e?-1:t>e?1:0}function uC(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if(uC(t[e]))return!0;return!1}function cC(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?hC(t[1],t[2],"=="):"!="===n?dC(hC(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?hC(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(cC))):"all"===n?["all"].concat(t.slice(1).map(cC)):"none"===n?["all"].concat(t.slice(1).map(cC).map(dC)):"in"===n?pC(t[1],t.slice(2)):"!in"===n?dC(pC(t[1],t.slice(2))):"has"===n?fC(t[1]):"!has"===n?dC(fC(t[1])):"within"!==n||t}function hC(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function pC(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return a_(t)!==a_(e[0])}))?["filter-in-large",t,["literal",e.sort(lC)]]:["filter-in-small",t,["literal",e]]}}function fC(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function dC(t){return["!",t]}var gC=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function yC(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return gC.forEach((function(t){t in e&&(n[t]=e[t])})),n}var mC=Kx((function t(e,n,r,i){Jx(this,t),this.message=(e?"".concat(e,": "):"")+r,i&&(this.identifier=i),null!=n&&n.hv&&(this.line=n.hv)})),vC=Kx((function t(e){Jx(this,t),this.error=e,this.message=e.message;var n=e.message.match(/line (\d+)/);this.line=n?parseInt(n[1],10):0}));function wC(t){var e=t.key,n=t.value;return n?[new mC(e,n,"constants have been deprecated as of v8")]:[]}function bC(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function xC(t){if(Array.isArray(t))return t.map(xC);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=xC(t[n]);return e}return bC(t)}function _C(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=qS(n);if("object"!==l)return[new mC(e,n,"object expected, ".concat(l," found"))];for(var u in n){var c=u.split(".")[0],h=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=BC;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new mC(e,n[u],'unknown property "'.concat(u,'"')));continue}p=BC}s=s.concat(p({key:(e?"".concat(e,"."):e)+u,value:n[u],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:u},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new mC(e,n,'missing required property "'.concat(f,'"')));return s}function EC(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||BC;if("array"!==qS(e))return[new mC(o,e,"array expected, ".concat(qS(e)," found"))];if(n.length&&e.length!==n.length)return[new mC(o,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new mC(o,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};i.$version<7&&(s.function=n.function),"object"===qS(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:"".concat(o,"[").concat(u,"]")}));return l}function SC(t){var e=t.key,n=t.value,r=t.valueSpec,i=qS(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new mC(e,n,"number expected, ".concat(i," found"))];if("minimum"in r){var o=r.minimum;if("array"===qS(r.minimum)){var a=t.arrayIndex;o=r.minimum[a]}if(n<o)return[new mC(e,n,"".concat(n," is less than the minimum value ").concat(o))]}if("maximum"in r){var s=r.maximum;if("array"===qS(r.maximum)){var l=t.arrayIndex;s=r.maximum[l]}if(n>s)return[new mC(e,n,"".concat(n," is greater than the maximum value ").concat(s))]}return[]}function CC(t){var e,n,r,i=t.valueSpec,o=bC(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,u="array"===qS(t.value.stops)&&"array"===qS(t.value.stops[0])&&"object"===qS(t.value.stops[0][0]),c=_C({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new mC(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(EC({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===qS(n)&&0===n.length&&e.push(new mC(t.key,n,"array must have at least one stop")),e},default:function(t){return BC({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new mC(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new mC(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!US(t.valueSpec)&&c.push(new mC(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!GS(t.valueSpec)?c.push(new mC(t.key,t.value,"property functions not supported")):s&&!BS(t.valueSpec)&&c.push(new mC(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new mC(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,s=t.key;if("array"!==qS(o))return[new mC(s,o,"array expected, ".concat(qS(o)," found"))];if(2!==o.length)return[new mC(s,o,"array length 2 expected, length ".concat(o.length," found"))];if(u){if("object"!==qS(o[0]))return[new mC(s,o,"object expected, ".concat(qS(o[0])," found"))];if(void 0===o[0].zoom)return[new mC(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new mC(s,o,"object stop key must have value")];if(r&&r>bC(o[0].zoom))return[new mC(s,o[0].zoom,"stop zoom values must appear in ascending order")];bC(o[0].zoom)!==r&&(r=bC(o[0].zoom),n=void 0,a={}),e=e.concat(_C({key:"".concat(s,"[0]"),value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:SC,value:p}}))}else e=e.concat(p({key:"".concat(s,"[0]"),value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return HS(xC(o[1]))?e.concat([new mC("".concat(s,"[1]"),o[1],"expressions are not allowed in function stops.")]):e.concat(BC({key:"".concat(s,"[1]"),value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function p(t,r){var s=qS(t.value),l=bC(t.value),u=null!==t.value?t.value:r;if(e){if(s!==e)return[new mC(t.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(e))]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new mC(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, ".concat(s," found");return GS(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mC(t.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==n&&l<n?[new mC(t.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new mC(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new mC(t.key,u,"integer expected, found ".concat(l))]}}function TC(t){var e=("property"===t.expressionContext?KS:YS)(xC(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new mC("".concat(t.key).concat(e.key),t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new mC(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!jE(n))return[new mC(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!jE(n))return[new mC(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!zE(n,["zoom","feature-state"]))return[new mC(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!FE(n))return[new mC(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function IC(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(bC(n))&&i.push(new mC(e,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(bC(n))&&i.push(new mC(e,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function AC(t){return aC(xC(t.value))?TC(M_({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):PC(t)}function PC(t){var e=t.value,n=t.key;if("array"!==qS(e))return[new mC(n,e,"array expected, ".concat(qS(e)," found"))];var r,i=t.styleSpec,o=[];if(e.length<1)return[new mC(n,e,"filter array must have at least 1 element")];switch(o=o.concat(IC({key:"".concat(n,"[0]"),value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),bC(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===bC(e[1])&&o.push(new mC(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&o.push(new mC(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&"string"!==(r=qS(e[1]))&&o.push(new mC("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));for(var a=2;a<e.length;a++)r=qS(e[a]),"$type"===bC(e[1])?o=o.concat(IC({key:"".concat(n,"[").concat(a,"]"),value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new mC("".concat(n,"[").concat(a,"]"),e[a],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<e.length;s++)o=o.concat(PC({key:"".concat(n,"[").concat(s,"]"),value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=qS(e[1]),2!==e.length?o.push(new mC(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new mC("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=qS(e[1]),2!==e.length?o.push(new mC(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&o.push(new mC("".concat(n,"[1]"),e[1],"object expected, ".concat(r," found")))}return o}function kC(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i["".concat(e,"_").concat(t.layerType)];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return BC({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new mC(n,o,'unknown property "'.concat(a,'"'))];if("string"===qS(o)&&GS(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new mC(n,o,'"'.concat(a,'" does not support interpolation syntax\n')+'Use an identity property function instead: `{ "type": "identity", "property": '.concat(JSON.stringify(u[1])," }`."))];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new mC(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&WS(xC(o))&&"identity"===bC(o.type)&&h.push(new mC(n,o,'"text-font" does not support identity functions'))),h.concat(BC({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function OC(t){return kC(t,"paint")}function MC(t){return kC(t,"layout")}function NC(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new mC(r,n,'either "type" or "ref" is required'));var a,s=bC(n.type),l=bC(n.ref);if(n.id)for(var u=bC(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];bC(h.id)===u&&e.push(new mC(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.hv)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new mC(r,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),i.layers.forEach((function(t){bC(t.id)===l&&(a=t)})),a?a.ref?e.push(new mC(r,n.ref,"ref cannot reference another ref layer")):s=bC(a.type):e.push(new mC(r,n.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var p=i.sources&&i.sources[n.source],f=p&&bC(p.type);p?"vector"===f&&"raster"===s?e.push(new mC(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===f&&"raster"!==s?e.push(new mC(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new mC(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&p.lineMetrics||e.push(new mC(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new mC(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new mC(r,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new mC(r,n,'missing required property "source"'));return e=e.concat(_C({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return BC({key:"".concat(r,".type"),value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:AC,layout:function(t){return _C({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return MC(M_({layerType:s},t))}}})},paint:function(t){return _C({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return OC(M_({layerType:s},t))}}})}}}))}function LC(t){var e=t.value,n=t.key,r=qS(e);return"string"!==r?[new mC(n,e,"string expected, ".concat(r," found"))]:[]}var RC={promoteId:function(t){var e=t.key,n=t.value;if("string"===qS(n))return LC({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,Wx(LC({key:"".concat(e,".").concat(i),value:n[i]})));return r}};function DC(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new mC(n,e,'"type" is required')];var o,a=bC(e.type);switch(a){case"vector":case"raster":case"raster-dem":return _C({key:n,value:e,valueSpec:r["source_".concat(a.replace("-","_"))],style:t.style,styleSpec:r,objectElementValidators:RC});case"geojson":if(o=_C({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:RC}),e.cluster)for(var s in e.clusterProperties){var l,u,c=Hx(e.clusterProperties[s],2),h=c[0],p=c[1],f="string"==typeof h?[h,["accumulated"],["get",s]]:h;(l=o).push.apply(l,Wx(TC({key:"".concat(n,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(u=o).push.apply(u,Wx(TC({key:"".concat(n,".").concat(s,".reduce"),value:f,expressionContext:"cluster-reduce"})))}return o;case"video":return _C({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return _C({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new mC(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return IC({key:"".concat(n,".type"),value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function FC(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=qS(e);if(void 0===e)return o;if("object"!==a)return o.concat([new mC("light",e,"object expected, ".concat(a," found"))]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&r[l[1]]&&r[l[1]].transition?o.concat(BC({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(BC({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new mC(s,e[s],'unknown property "'.concat(s,'"'))])}return o}function jC(t){var e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain,a=[],s=qS(e);if(void 0===e)return a;if("object"!==s)return a.concat([new mC("terrain",e,"object expected, ".concat(s," found"))]);for(var l in e){var u=l.match(/^(.*)-transition$/);a=u&&o[u[1]]&&o[u[1]].transition?a.concat(BC({key:l,value:e[l],valueSpec:i.transition,style:r,styleSpec:i})):o[l]?a.concat(BC({key:l,value:e[l],valueSpec:o[l],style:r,styleSpec:i})):a.concat([new mC(l,e[l],'unknown property "'.concat(l,'"'))])}if(e.source){var c=r.sources&&r.sources[e.source],h=c&&bC(c.type);c?"raster-dem"!==h&&a.push(new mC(n,e.source,"terrain cannot be used with a source of type ".concat(h,', it only be used with a "raster-dem" source type'))):a.push(new mC(n,e.source,'source "'.concat(e.source,'" not found')))}else a.push(new mC(n,e,'terrain is missing required property "source"'));return a}function zC(t){var e=t.value,n=t.style,r=t.styleSpec,i=r.fog,o=[],a=qS(e);if(void 0===e)return o;if("object"!==a)return o.concat([new mC("fog",e,"object expected, ".concat(a," found"))]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&i[l[1]]&&i[l[1]].transition?o.concat(BC({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r})):i[s]?o.concat(BC({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r})):o.concat([new mC(s,e[s],'unknown property "'.concat(s,'"'))])}return o}var GC={"*":function(){return[]},array:EC,boolean:function(t){var e=t.value,n=t.key,r=qS(e);return"boolean"!==r?[new mC(n,e,"boolean expected, ".concat(r," found"))]:[]},number:SC,color:function(t){var e=t.key,n=t.value,r=qS(n);return"string"!==r?[new mC(e,n,"color expected, ".concat(r," found"))]:null===J_.parseCSSColor(n)?[new mC(e,n,'color expected, "'.concat(n,'" found'))]:[]},constants:wC,enum:IC,filter:AC,function:CC,layer:NC,object:_C,source:DC,light:FC,terrain:jC,fog:zC,string:LC,formatted:function(t){return 0===LC(t).length?[]:TC(t)},resolvedImage:function(t){return 0===LC(t).length?[]:TC(t)}};function BC(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&WS(bC(e))?CC(t):n.expression&&HS(xC(e))?TC(t):n.type&&GC[n.type]?GC[n.type](t):_C(M_({},t,{valueSpec:n.type?r[n.type]:n}))}function UC(t){var e=t.value,n=t.key,r=LC(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new mC(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new mC(n,e,'"glyphs" url must include a "{range}" token'))),r}function qC(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s_,n=[];return n=n.concat(BC({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:UC,"*":function(){return[]}}})),t.constants&&(n=n.concat(wC({key:"constants",value:t.constants,style:t,styleSpec:e}))),WC(n)}function WC(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function VC(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return WC(t.apply(this,n))}}qC.source=VC(DC),qC.light=VC(FC),qC.terrain=VC(jC),qC.fog=VC(zC),qC.layer=VC(NC),qC.filter=VC(AC),qC.paintProperty=VC(OC),qC.layoutProperty=VC(MC);var HC=u_((function(t,e){var n=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,12],n=[1,13],r=[1,9],i=[1,10],o=[1,11],a=[1,14],s=[1,15],l=[14,18,22,24],u=[18,22],c=[22,24],h={trace:function(){},yy:{},fv:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},lv:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},vv:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,r,i,o,a){var s=o.length-1;switch(i){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.hv=this._$.first_line;break;case 2:this.$=new Number(t),this.$.hv=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.hv=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.hv=this._$.first_line;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"hv",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"hv",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"hv",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:30,15:7,16:8,17:a,23:s},t(l,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:31,15:7,16:8,17:a,23:s},t(u,[2,17]),t(u,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,l=0,u=i.slice.call(arguments,1),c=Object.create(this.lexer),h={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(h.yy[p]=this.yy[p]);c.setInput(t,h.yy),h.yy.lexer=c,h.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var f=c.yylloc;i.push(f);var d=c.options&&c.options.ranges;function g(){var t;return"number"!=typeof(t=c.lex()||1)&&(t=e.fv[t]||t),t}"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,m,v,w,b,x,_,E,S={};;){if(m=n[n.length-1],this.defaultActions[m]?v=this.defaultActions[m]:(null==y&&(y=g()),v=o[m]&&o[m][y]),void 0===v||!v.length||!v[0]){var C;for(b in E=[],o[m])this.lv[b]&&b>2&&E.push("'"+this.lv[b]+"'");C=c.showPosition?"Parse error on line "+(s+1)+":\n"+c.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.lv[y]||y)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==y?"end of input":"'"+(this.lv[y]||y)+"'"),this.parseError(C,{text:c.match,token:this.lv[y]||y,line:c.yylineno,loc:f,expected:E})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+y);switch(v[0]){case 1:n.push(y),r.push(c.yytext),i.push(c.yylloc),n.push(v[1]),y=null,l=c.yyleng,a=c.yytext,s=c.yylineno,f=c.yylloc;break;case 2:if(x=this.vv[v[1]][1],S.$=r[r.length-x],S._$={first_line:i[i.length-(x||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(x||1)].first_column,last_column:i[i.length-1].last_column},d&&(S._$.range=[i[i.length-(x||1)].range[0],i[i.length-1].range[1]]),void 0!==(w=this.performAction.apply(S,[a,l,s,h.yy,v[1],r,i].concat(u))))return w;x&&(n=n.slice(0,-1*x*2),r=r.slice(0,-1*x),i=i.slice(0,-1*x)),n.push(this.vv[v[1]][0]),r.push(S.$),i.push(S._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},p={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function f(){this.yy={}}return h.lexer=p,f.prototype=h,h.Parser=f,new f}();e.parser=n,e.Parser=n.Parser,e.parse=function(){return n.parse.apply(n,arguments)}}));function YC(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s_,n=t;try{n=function(t){if(t instanceof String||"string"==typeof t||t instanceof Buffer)try{return HC.parse(t.toString())}catch(t){throw new vC(t)}return t}(n)}catch(t){return[t]}return qC(n,e)}new Set(["vector","raster","raster-dem"]);var XC=HS,ZC=KS,KC=function(t,e){var n=t.stops;if(!n)return function(t,e){var n=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",n]:n;if("enum"===e.type)return["match",n,Object.keys(e.values),n,t.default];var r=["color"===e.type?"to-color":e.type,n,QS(t.default)];return"array"===e.type&&r.splice(1,0,e.value,e.length||null),r}(t,e);var r=n&&"object"===a_(n[0][0]),i=r||void 0!==t.property,o=r||!i;return n=n.map((function(t){return!i&&e.tokens&&"string"==typeof t[1]?[t[0],oC(t[1])]:[t[0],QS(t[1])]})),r?function(t,e,n){for(var r={},i={},o=[],a=0;a<n.length;a++){var s=n[a],l=s[0].zoom;void 0===r[l]&&(r[l]={zoom:l,type:t.type,property:t.property,default:t.default},i[l]=[],o.push(l)),i[l].push([s[0].value,s[1]])}if("exponential"===iC({},e)){var u,c=[$S(t),["linear"],["zoom"]],h=r_(o);try{for(h.s();!(u=h.n()).done;){var p=u.value;rC(c,p,eC(r[p],e,i[p]),!1)}}catch(t){h.e(t)}finally{h.f()}return c}var f,d=["step",["zoom"]],g=r_(o);try{for(g.s();!(f=g.n()).done;){var y=f.value;rC(d,y,eC(r[y],e,i[y]),!0)}}catch(t){g.e(t)}finally{g.f()}return nC(d),d}(t,e,n):o?function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["zoom"],o=iC(t,e),a=!1;if("interval"===o)r=["step",i],a=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'.concat(o,'"'));var s=void 0!==t.base?t.base:1;r=[$S(t),1===s?["linear"]:["exponential",s],i]}var l,u=r_(n);try{for(u.s();!(l=u.n()).done;){var c=l.value;rC(r,c[0],c[1],a)}}catch(t){u.e(t)}finally{u.f()}return nC(r),r}(t,e,n):eC(t,e,n)},JC=WS;YC.parsed=YC,YC.latest=YC;var QC="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function $C(t){return t*Math.PI/180}var tT=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function eT(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var n=document.createElement("canvas");return n.width=t,n.height=e,n}var nT,rT=Array(256).join(" ");function iT(t,e){if(e>=.05){for(var n="",r=t.split("\n"),i=rT.slice(0,Math.round(e/.1)),o=0,a=r.length;o<a;++o)o>0&&(n+="\n"),n+=r[o].split("").join(i);return n}return t}function oT(){return nT||(nT=eT(1,1).getContext("2d")),nT}function aT(t,e){return oT().measureText(t).width+(t.length-1)*e}var sT={};function lT(t,e,n,r){if(-1!==t.indexOf("\n")){for(var i=t.split("\n"),o=[],a=0,s=i.length;a<s;++a)o.push(lT(i[a],e,n,r));return o.join("\n")}var l=n+","+e+","+t+","+r,u=sT[l];if(!u){var c=t.split(" ");if(c.length>1){var h=oT();h.font=e;var p=h.measureText("M").width*n,f="";for(o=[],a=0,s=c.length;a<s;++a){var d=c[a],g=f+(f?" ":"")+d;aT(g,r)<=p?f=g:(f&&o.push(f),f=d)}for(f&&o.push(f),a=0,s=o.length;a<s&&s>1;++a){var y=o[a];if(aT(y,r)<.35*p){var m=a>0?aT(o[a-1],r):1/0,v=a<s-1?aT(o[a+1],r):1/0;o.splice(a,1),s-=1,m<v?(o[a-1]+=" "+y,a-=1):o[a]=y+" "+o[a]}}for(a=0,s=o.length-1;a<s;++a){var w=o[a],b=o[a+1];if(aT(w,r)>.7*p&&aT(b,r)<.6*p){var x=w.split(" "),_=x.pop();aT(_,r)<.2*p&&(o[a]=x.join(" "),o[a+1]=_+" "+b),s-=1}}u=o.join("\n")}else u=t;u=iT(u,r),sT[l]=u}return u}function uT(t){return(uT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Oa&&H(Oa,"clear",(function(){sT={}}));var cT,hT,pT=JC,fT=KC,dT=XC,gT=ZC,yT={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},mT={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},vT={},wT={zoom:0};function bT(t,e,n,r,i,o){var a=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[a]||(o[a]={});var s=o[a];if(!s[n]){var l=(t[e]||vT)[n],u=s_["".concat(e,"_").concat(t.type)][n];void 0===l&&(l=u.default);var c=dT(l);if(!c&&pT(l)&&(l=fT(l,u),c=!0),c){var h=function(t,e){var n=gT(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return n.value}(l,u);s[n]=h.evaluate.bind(h)}else"color"==u.type&&(l=Q_.parse(l)),s[n]=function(){return l}}return wT.zoom=r,s[n](wT,i)}var xT=!1;function _T(t,e){if(t){if(!xT&&(0===t.a||0===e))return;var n=t.a;return e=void 0===e?1:e,0===n?"transparent":"rgba("+Math.round(255*t.r/n)+","+Math.round(255*t.g/n)+","+Math.round(255*t.b/n)+","+n*e+")"}return t}var ET=/^([^]*)\{(.*)\}([^]*)$/;function ST(t,e){var n;do{if(n=t.match(ET)){var r=e[n[2]]||"";t=n[1]+r+n[3]}}while(n);return t}var CT=!1;function TT(t,e,n,r,i,o,a){if(void 0===r&&(r=tT),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");var s,l;if(o)if("undefined"!=typeof Image){var u=new Image;u.crossOrigin="anonymous",u.onload=function(){s=u,l=[u.width,u.height],t.changed(),u.onload=null},u.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var c=self;c.postMessage({action:"loadImage",src:o}),c.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(s=t.data.image,l=[s.width,s.height])}))}for(var h,p=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=yC(t[r],e[t[r].ref]));return t}(e.layers),f={},d=[],g={},y={},m={},v={},w=0,b=p.length;w<b;++w){var x=p[w],_=x.id;if("string"==typeof n&&x.source==n||-1!==n.indexOf(_)){var E=x["source-layer"];if(!h){h=x.source;var S=e.sources[h];if(!S)throw new Error('Source "'.concat(h,'" is not defined'));var C=S.type;if("vector"!==C&&"geojson"!==C)throw new Error('Source "'.concat(h,'" is not of type "vector" or "geojson", but "').concat(C,'"'))}var T=f[E];T||(T=[],f[E]=T),T.push({layer:x,index:w}),d.push(_)}}var I=new $p,A=new zp,P=[],k=function(t,e){var n=t.getProperties(),o=f[n.layer];if(o){var u=r.indexOf(e);-1==u&&(u=function(t,e){for(var n=0,r=e.length;n<r;++n)if(e[n]<t&&n+1<r){var i=e[n]/e[n+1];return n+Math.log(e[n]/t)/Math.log(i)}return r-1}(e,r));for(var c,h=yT[t.getGeometry().getType()],p={properties:n,type:h},d=-1,w=function(r,f){var w=o[r],b=w.layer,x=b.id,_=b.layout||vT,E=b.paint||vT;if("none"===_.visibility||"minzoom"in b&&u<b.minzoom||"maxzoom"in b&&u>=b.maxzoom)return"continue";var S=b.filter;if(!S||function(t,e,n,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),t in i||(i[t]=function(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};aC(t)||(t=cC(t));var e=YS(t,sC);if("error"===e.result)throw new Error(e.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:uC(t)}}(e).filter),wT.zoom=r,i[t](wT,n)}(x,S,p,u,v)){c=b;var C=void 0,T=void 0,k=void 0,O=void 0,M=void 0,N=void 0,L=w.index;if(3==h&&("fill"==b.type||"fill-extrusion"==b.type))if(T=bT(b,"paint",b.type+"-opacity",u,p,m),b.type+"-pattern"in E){var R=bT(b,"paint",b.type+"-pattern",u,p,m);if(R){var D="string"==typeof R?ST(R,n):R.toString();if(s&&i&&i[D]){++d,(N=P[d])&&N.getFill()&&!N.getStroke()&&!N.getText()||(N=new lf({fill:new zp}),P[d]=N),k=N.getFill(),N.setZIndex(L);var F=y[dt=D+"."+T];if(!F){var j=i[D],z=eT(j.width,j.height),G=z.getContext("2d");G.globalAlpha=T,G.drawImage(s,j.x,j.y,j.width,j.height,0,0,j.width,j.height),F=G.createPattern(z,"repeat"),y[dt]=F}k.setColor(F)}}}else C=_T(bT(b,"paint",b.type+"-color",u,p,m),T),b.type+"-outline-color"in E&&(M=_T(bT(b,"paint",b.type+"-outline-color",u,p,m),T)),M||(M=C),(C||M)&&(++d,(!(N=P[d])||C&&!N.getFill()||!C&&N.getFill()||M&&!N.getStroke()||!M&&N.getStroke()||N.getText())&&(N=new lf({fill:C?new zp:void 0,stroke:M?new $p:void 0}),P[d]=N),C&&(k=N.getFill()).setColor(C),M&&((O=N.getStroke()).setColor(M),O.setWidth(.5)),N.setZIndex(L));if(1!=h&&"line"==b.type){C=!("line-pattern"in E)&&"line-color"in E?_T(bT(b,"paint","line-color",u,p,m),bT(b,"paint","line-opacity",u,p,m)):void 0;var B=bT(b,"paint","line-width",u,p,m);C&&B>0&&(++d,(N=P[d])&&N.getStroke()&&!N.getFill()&&!N.getText()||(N=new lf({stroke:new $p}),P[d]=N),(O=N.getStroke()).setLineCap(bT(b,"layout","line-cap",u,p,m)),O.setLineJoin(bT(b,"layout","line-join",u,p,m)),O.setMiterLimit(bT(b,"layout","line-miter-limit",u,p,m)),O.setColor(C),O.setWidth(B),O.setLineDash(E["line-dasharray"]?bT(b,"paint","line-dasharray",u,p,m).map((function(t){return t*B})):null),N.setZIndex(L))}var U=!1,q=null,W=0,V=void 0,H=void 0,Y=void 0;if((1==h||2==h)&&"icon-image"in _){var X=bT(b,"layout","icon-image",u,p,m);if(X){V="string"==typeof X?ST(X,n):X.toString();var Z=void 0;if(s&&i&&i[V]){var K=bT(b,"layout","icon-rotation-alignment",u,p,m);if(2==h){var J=t.getGeometry();if(J.getFlatMidpoint||J.getFlatMidpoints){var Q=J.getExtent();if(Math.sqrt(Math.max(Math.pow((Q[2]-Q[0])/e,2),Math.pow((Q[3]-Q[1])/e,2)))>150){var $="MultiLineString"===J.getType()?J.getFlatMidpoints():J.getFlatMidpoint();if(hT||(hT=new ox("Point",cT=[NaN,NaN],[],{},null)),Z=hT,cT[0]=$[0],cT[1]=$[1],"line"===(Mt=bT(b,"layout","symbol-placement",u,p,m))&&"map"===K)for(var tt=J.getStride(),et=J.getFlatCoordinates(),nt=0,rt=et.length-tt;nt<rt;nt+=tt){var it=et[nt],ot=et[nt+1],at=et[nt+tt],st=et[nt+tt+1],lt=Math.min(it,at),ut=Math.min(ot,st),ct=Math.max(it,at),ht=Math.max(ot,st);if($[0]>=lt&&$[0]<=ct&&$[1]>=ut&&$[1]<=ht){W=Math.atan2(ot-st,at-it);break}}}}}if(2!==h||Z){var pt=bT(b,"layout","icon-size",u,p,m),ft=void 0!==E["icon-color"]?bT(b,"paint","icon-color",u,p,m):null;if(!ft||0!==ft.a){var dt=V+"."+pt;if(null!==ft&&(dt+="."+ft),!(H=g[dt])){var gt=i[V];H=new Qp({color:ft?[255*ft.r,255*ft.g,255*ft.b,ft.a]:void 0,img:s,imgSize:l,size:[gt.width,gt.height],offset:[gt.x,gt.y],rotateWithView:"map"===K,scale:pt/gt.pixelRatio,displacement:"icon-offset"in _?bT(b,"layout","icon-offset",u,p,m).map((function(t){return-t*gt.pixelRatio})):void 0}),g[dt]=H}}H&&(++d,(N=P[d])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=new lf,P[d]=N),N.setGeometry(Z),H.setRotation(W+$C(bT(b,"layout","icon-rotate",u,p,m))),H.setOpacity(bT(b,"paint","icon-opacity",u,p,m)),H.setAnchor(mT[bT(b,"layout","icon-anchor",u,p,m)]),N.setImage(H),q=N.getText(),N.setText(void 0),N.setZIndex(L),U=!0,Y=!1)}else Y=!0}}}if(1==h&&"circle"===b.type){++d,(N=P[d])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=new lf,P[d]=N);var yt="circle-radius"in E?bT(b,"paint","circle-radius",u,p,m):5,mt=_T(bT(b,"paint","circle-stroke-color",u,p,m),bT(b,"paint","circle-stroke-opacity",u,p,m)),vt=_T(bT(b,"paint","circle-color",u,p,m),bT(b,"paint","circle-opacity",u,p,m)),wt=bT(b,"paint","circle-stroke-width",u,p,m),bt=yt+"."+mt+"."+vt+"."+wt;(H=g[bt])||(H=new jp({radius:yt,stroke:mt&&wt>0?new $p({width:wt,color:mt}):void 0,fill:vt?new zp({color:vt}):void 0}),g[bt]=H),N.setImage(H),q=N.getText(),N.setText(void 0),N.setGeometry(void 0),N.setZIndex(L),U=!0}var xt,_t,Et,St,Ct=void 0,Tt=void 0;if("text-field"in _){_t=Math.round(bT(b,"layout","text-size",u,p,m));var It=bT(b,"layout","text-font",u,p,m);xt=bT(b,"layout","text-line-height",u,p,m),Tt=qx(a?a(It):It,_t,xt),Et=bT(b,"layout","text-letter-spacing",u,p,m),St=bT(b,"layout","text-max-width",u,p,m);var At=bT(b,"layout","text-field",u,p,m);Ct="object"===uT(At)&&At.sections?1===At.sections.length?At.toString():At.sections.reduce((function(t,e,n){var r=e.fontStack?e.fontStack.split(","):It,i=qx(a?a(r):r,_t*(e.scale||1),xt),o=e.text;if("\n"===o)return t.push("\n",""),t;if(2!=h){for(var s=0,l=(o=lT(o,i,St,Et).split("\n")).length;s<l;++s)s>0&&t.push("\n",""),t.push(o[s],i);return t}t.push(iT(o,Et),i)}),[]):ST(At,n).trim(),T=bT(b,"paint","text-opacity",u,p,m)}if(Ct&&T&&!Y){U||(++d,(N=P[d])&&N.getText()&&!N.getFill()&&!N.getStroke()||(N=new lf,P[d]=N),N.setImage(void 0),N.setGeometry(void 0)),N.getText()||N.setText(q||new uf({padding:[2,2,2,2]})),q=N.getText();var Pt=_["text-transform"];"uppercase"==Pt?Ct=Array.isArray(Ct)?Ct.map((function(t,e){return e%2?t:t.toUpperCase()})):Ct.toUpperCase():"lowercase"==Pt&&(Ct=Array.isArray(Ct)?Ct.map((function(t,e){return e%2?t:t.toLowerCase()})):Ct.toLowerCase());var kt=Array.isArray(Ct)?Ct:2==h?iT(Ct,Et):lT(Ct,Tt,St,Et);q.setText(kt),q.setFont(Tt),q.setRotation($C(bT(b,"layout","text-rotate",u,p,m)));var Ot=bT(b,"layout","text-anchor",u,p,m),Mt=U||1==h?"point":bT(b,"layout","symbol-placement",u,p,m);q.setPlacement(Mt),q.setOverflow("point"===Mt);var Nt=bT(b,"paint","text-halo-width",u,p,m),Lt=bT(b,"layout","text-offset",u,p,m),Rt=bT(b,"paint","text-translate",u,p,m),Dt=0,Ft=0;if("point"==Mt){var jt="center";-1!==Ot.indexOf("left")?(jt="left",Ft=Nt):-1!==Ot.indexOf("right")&&(jt="right",Ft=-Nt),q.setTextAlign(jt);var zt=bT(b,"layout","text-rotation-alignment",u,p,m);q.setRotateWithView("map"==zt)}else q.setMaxAngle($C(bT(b,"layout","text-max-angle",u,p,m))*Ct.length/kt.length),q.setTextAlign(),q.setRotateWithView(!1);var Gt="middle";0==Ot.indexOf("bottom")?(Gt="bottom",Dt=-Nt-.5*(xt-1)*_t):0==Ot.indexOf("top")&&(Gt="top",Dt=Nt+.5*(xt-1)*_t),q.setTextBaseline(Gt),q.setOffsetX(Lt[0]*_t+Ft+Rt[0]),q.setOffsetY(Lt[1]*_t+Dt+Rt[1]),A.setColor(_T(bT(b,"paint","text-color",u,p,m),T)),q.setFill(A);var Bt=_T(bT(b,"paint","text-halo-color",u,p,m),T);if(Bt){I.setColor(Bt),Nt*=2;var Ut=.5*_t;I.setWidth(Nt<=Ut?Nt:Ut),q.setStroke(I)}else q.setStroke(void 0);var qt=bT(b,"layout","text-padding",u,p,m),Wt=q.getPadding();qt!==Wt[0]&&(Wt[0]=qt,Wt[1]=qt,Wt[2]=qt,Wt[3]=qt),N.setZIndex(L)}}},b=0,x=o.length;b<x;++b)w(b);return d>-1?(P.length=d+1,CT&&("function"==typeof t.set?t.set("mapbox-layer",c):t.getProperties()["mapbox-layer"]=c),P):void 0}};return t.setStyle(k),t.set("mapbox-source",h),t.set("mapbox-layers",d),k}var IT=r(338);function AT(t){return(AT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var PT,kT={},OT=/font-family: ?([^;]*);/,MT=/("|')/g;function NT(t){if(!PT){PT={};for(var e=document.styleSheets,n=0,r=e.length;n<r;++n){var i=e[n];try{var o=i.rules||i.cssRules;if(o)for(var a=0,s=o.length;a<s;++a){var l=o[a];if(5==l.type){var u=l.cssText.match(OT);PT[u[1].replace(MT,"")]=!0}}}catch(t){}}}return t in PT}var LT={},RT=IT.getNames();function DT(t){var e=t.toString();if(e in LT)return t;for(var n=t.map((function(t){var e=qx(t,1).split(" ");return[e.slice(3).join(" ").replace(/"/g,""),e[1]+e[0]]})),r=0,i=n.length;r<i;++r){var o=n[r],a=o[0];if(!NT(a)&&-1!==RT.indexOf(a)){var s="https://fonts.googleapis.com/css?family="+a.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+s+'"]')){var l=document.createElement("link");l.href=s,l.rel="stylesheet",document.head.appendChild(l)}}}return LT[e]=!0,t}var FT=/^(.*)(\?.*)$/;function jT(t,e,n){var r=(t=function(t,e){return e&&0===t.indexOf(".")&&(t=e+t),t}(t,e)).match(FT);return r?r[1]+n+(r.length>2?r[2]:""):t+n}function zT(t,e,n,r,i){return new Promise((function(o,a){if("object"!=AT(e)&&(e=JSON.parse(e)),8!=e.version)return a(new Error("glStyle version 8 required."));if(!(t instanceof sx||t instanceof Mx))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var s,l,u;function c(){u||e.sprite&&!s?u?(t.setStyle(u),o()):a(new Error("Something went wrong trying to apply style.")):(u=TT(t,e,n,i,s,l,DT),t.getStyle()?o():a(new Error("Nothing to show for source [".concat(n,"]"))))}if(e.sprite){var h=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",p=jT(e.sprite,r,h+".json");fetch(p,{credentials:"same-origin"}).then((function(t){return t.ok||""===h?t:(p=jT(e.sprite,r,".json"),fetch(p,{credentials:"same-origin"}))})).then((function(t){if(t.ok)return t.json();a(new Error("Problem fetching sprite from ".concat(p,": ").concat(t.statusText)))})).then((function(t){if(void 0===t)return a(new Error("No sprites found."));s=t,l=jT(e.sprite,r,h+".png"),c()})).catch((function(t){a(new Error("Sprites cannot be loaded: ".concat(p,": ").concat(t.message)))}))}else c()}))}var GT={};function BT(t,e){t=QC({},t);var n=[e,JSON.stringify(t)].toString(),r=kT[n];return r||(r=new Lw({url:t.tiles?void 0:e,tileJSON:t.tiles?t:void 0}),kT[n]=r),new Promise((function(t){var n=r.on("change",(function(){var i=r.getState();if("ready"===i){var o=r.getTileJSON(),a=Array.isArray(o.tiles)?o.tiles:[o.tiles];if(e)for(var s=0,l=a.length;s<l;++s)a[s]=decodeURI(new URL(a[s],e).href);var u=r.getTileGrid(),c=function(t){var e=t.bounds;if(e){var n=mr([e[0],e[1]]),r=mr([e[2],e[3]]);return[n[0],n[1],r[0],r[1]]}}(o),h=o.minzoom||0,p=o.maxzoom||22,f=r.get("ol-source");void 0===f&&(f=new Bv({attributions:r.getAttributions(),format:new kx,tileGrid:new fc({origin:u.getOrigin(0),extent:c||u.getExtent(),minZoom:h,resolutions:tT.slice(0,p+1),tileSize:512}),urls:a}),r.set("ol-source",f)),J(n),t(f)}else"error"===i&&(r.set("ol-source",null),J(n),t(void 0))}));"ready"===r.getState()&&r.changed()}))}new Ux;var UT=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qT="https://api.mapbox.com";function WT(t){var e="mapbox://";return 0!==t.indexOf(e)?"":t.slice(9)}function VT(t,e,n){var r=WT(t);if(!r)return decodeURI(new URL(t,n).href);var i="sprites/";if(0!==r.indexOf(i))throw new Error("unexpected sprites url: ".concat(t));var o=r.slice(8);return"".concat(qT,"/styles/v1/").concat(o,"/sprite?access_token=").concat(e)}function HT(t,e,n){var r=WT(t);if(!r)return decodeURI(new URL(t,n).href);var i="fonts/";if(0!==r.indexOf(i))throw new Error("unexpected fonts url: ".concat(t));var o=r.slice(6);return"".concat(qT,"/fonts/v1/").concat(o,"/0-255.pbf?access_token=").concat(e)}function YT(t,e){var n=WT(t);if(!n)return decodeURI(new URL(t,location.href).href);var r="styles/";if(0!==n.indexOf(r))throw new Error("unexpected style url: ".concat(t));var i=n.slice(7);return"".concat(qT,"/styles/v1/").concat(i,"?&access_token=").concat(e)}function XT(t,e,n,r){var i=new URL(t,r),o=WT(t);return o?"https://{a-d}.tiles.mapbox.com/v4/".concat(o,"/{z}/{x}/{y}.vector.pbf?access_token=").concat(e):e?(i.searchParams.set(n,e),decodeURI(i.href)):decodeURI(i.href)}var ZT=function(t){function e(e){var n=t.call(this,F)||this;return n.error=e,n}return UT(e,t),e}(p),KT=function(t){function e(e){var n=this,r=!("declutter"in e)||e.declutter,i=new Bv({state:ta,format:new kx});return(n=t.call(this,{source:i,background:e.background,declutter:r,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties})||this).dv=void 0===e.maxResolution&&void 0===e.minZoom,n.sourceId=e.source,n.layers=e.layers,e.accessToken?n.accessToken=e.accessToken:new URL(e.styleUrl,location.href).searchParams.forEach((function(t,e){n.accessToken=t,n.pv=e})),n.fetchStyle(e.styleUrl),n}return UT(e,t),e.prototype.fetchStyle=function(t){var e=this,n=YT(t,this.accessToken);fetch(n).then((function(t){if(!t.ok)throw new Error("unexpected response when fetching style: ".concat(t.status));return t.json()})).then((function(t){e.onStyleLoad(t,n.startsWith("data:")?location.href:n)})).catch((function(t){e.handleError(t)}))},e.prototype.onStyleLoad=function(t,e){var n,r,i=this;if(this.layers){for(var o={},a=0;a<t.layers.length;++a){var s=t.layers[a];s.source&&(o[s.id]=s.source)}var l=void 0;for(a=0;a<this.layers.length;++a){var u=o[this.layers[a]];if(!u)return void this.handleError(new Error("could not find source for ".concat(this.layers[a])));if(l){if(l!==u)return void this.handleError(new Error("layers can only use a single source, found ".concat(l," and ").concat(u)))}else l=u}n=l,r=this.layers}else n=this.sourceId,r=n;r||(n=Object.keys(t.sources)[0],r=n),t.sprite&&(t.sprite=VT(t.sprite,this.accessToken,e)),t.glyphs&&(t.glyphs=HT(t.glyphs,this.accessToken,e));var c=t.sources[n];if("vector"===c.type){var h=this.getSource();c.url&&0===c.url.indexOf("mapbox://")?(h.setUrl(XT(c.url,this.accessToken,this.pv,e)),zT(this,t,r).then((function(){i.configureSource(h,t)})).catch((function(t){i.handleError(t)}))):(c.tiles&&(c.tiles=c.tiles.map((function(t){return XT(t,i.accessToken,i.pv,e)}))),BT(c,c.url?XT(c.url,this.accessToken,this.pv,e):void 0).then((function(e){zT(i,t,r).then((function(){i.configureSource(e,t)})).catch((function(n){i.configureSource(e,t),i.handleError(n)}))})))}else this.handleError(new Error("only works for vector sources, found ".concat(c.type)))},e.prototype.configureSource=function(t,e){var n,r=this.getSource();if(t!==r&&(r.setAttributions(t.getAttributions()),r.setTileUrlFunction(t.getTileUrlFunction()),r.setTileLoadFunction(t.getTileLoadFunction()),r.tileGrid=t.tileGrid),void 0===this.getBackground()&&(n=this,e.layers.some((function(t){if("background"==t.type)return function(t,e){var n={id:e.id,type:e.type},r={};function i(i){var o=e.layout||{},a=e.paint||{};n.paint=a;var s,l,u="function"==typeof t.getSource?t.getSource().getTileGrid().getZForResolution(i):t.getView().getZoom(),c="function"==typeof t.getTargetElement?t.getTargetElement():void 0;if(void 0!==a["background-color"]&&(s=bT(n,"paint","background-color",u,GT,r),c&&(c.style.background=Q_.parse(s).toString())),void 0!==a["background-opacity"]&&(l=bT(n,"paint","background-opacity",u,GT,r),c&&(c.style.opacity=l)),"none"!=o.visibility)return _T(s,l);c&&(c.style.backgroundColor="",c.style.opacity="")}if("function"==typeof t.getTargetElement)t.getTargetElement()&&i(),t.on(["change:resolution","change:target"],i);else{if("function"!=typeof t.setBackground)throw new Error("Unable to apply background.");t.setBackground(i)}}(n,t),!0}))),this.dv){var i=r.getTileGrid();this.setMaxResolution(i.getResolution(i.getMinZoom()))}r.setState(ea)},e.prototype.handleError=function(t){this.dispatchEvent(new ZT(t)),this.getSource().setState(na)},e}(Mx),JT=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QT=function(t){function e(e){var n=this,r=e||{},i=k({},r);return delete i.imageRatio,(n=t.call(this,i)||this).yv=void 0!==r.imageRatio?r.imageRatio:1,n}return JT(e,t),e.prototype.getImageRatio=function(){return this.yv},e.prototype.createRenderer=function(){return new Fb(this)},e}(Vw),$T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tI=function(t){function e(e){var n=this,r=k({},e);return(n=t.call(this,r)||this).mv=Pp(e.style),n.wv=e.style.variables||{},n.bv=!!e.disableHitDetection,n}return $T(e,t),e.prototype.createRenderer=function(){return new Yw(this,{vertexShader:this.mv.builder.getSymbolVertexShader(),fragmentShader:this.mv.builder.getSymbolFragmentShader(),hitVertexShader:!this.bv&&this.mv.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.bv&&this.mv.builder.getSymbolFragmentShader(!0),uniforms:this.mv.uniforms,attributes:this.mv.attributes})},e.prototype.updateStyleVariables=function(t){k(this.wv,t),this.changed()},e}(oa),eI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function nI(t,e){var n="\n    attribute vec2 ".concat(Vh.TEXTURE_COORD,";\n    uniform mat4 ").concat(Wh.TILE_TRANSFORM,";\n    uniform float ").concat(Wh.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Wh.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Wh.TEXTURE_RESOLUTION,";\n    uniform float ").concat(Wh.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(Wh.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(Wh.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(Vh.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(Wh.TEXTURE_ORIGIN_X," + ").concat(Wh.TEXTURE_RESOLUTION," * ").concat(Wh.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(Wh.TEXTURE_ORIGIN_Y," - ").concat(Wh.TEXTURE_RESOLUTION," * ").concat(Wh.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(Wh.TILE_TRANSFORM," * vec4(").concat(Vh.TEXTURE_COORD,", ").concat(Wh.DEPTH,", 1.0);\n    }\n  "),r={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(void 0!==t.color){var o=fp(r,t.color,ep);i.push("color = ".concat(o,";"))}if(void 0!==t.contrast){var a=fp(r,t.contrast,$h);i.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.exposure){var s=fp(r,t.exposure,$h);i.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.saturation){var l=fp(r,t.saturation,$h);i.push("\n      float saturation = ".concat(l," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==t.gamma){var u=fp(r,t.gamma,$h);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(u,"));"))}if(void 0!==t.brightness){var c=fp(r,t.brightness,$h);i.push("color.rgb = clamp(color.rgb + ".concat(c,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var h={},p=r.variables.length;if(p>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(r.variables,")"));for(var f=function(e){var n=r.variables[e];if(!(n in t.variables))throw new Error("Missing '".concat(n,"' in style variables"));var i=Ep(n);h[i]=function(){var e=t.variables[n];return"string"==typeof e&&(e=hp(r,e)),void 0!==e?e:-9999999}},d=0;d<p;++d)f(d);var g=Object.keys(h).map((function(t){return"uniform float ".concat(t,";")})),y=Math.ceil(e/4);g.push("uniform sampler2D ".concat(Wh.TILE_TEXTURE_ARRAY,"[").concat(y,"];")),r.paletteTextures&&g.push("uniform sampler2D ".concat(Sp,"[").concat(r.paletteTextures.length,"];"));var m=Object.keys(r.functions).map((function(t){return r.functions[t]}));return{vertexShader:n,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(Wh.RENDER_EXTENT,";\n    uniform float ").concat(Wh.TRANSITION_ALPHA,";\n    uniform float ").concat(Wh.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Wh.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Wh.RESOLUTION,";\n    uniform float ").concat(Wh.ZOOM,";\n\n    ").concat(g.join("\n"),"\n\n    ").concat(m.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(Wh.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(Wh.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(Wh.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(Wh.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(Wh.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(i.join("\n"),"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(Wh.TRANSITION_ALPHA,";\n    }"),uniforms:h,paletteTextures:r.paletteTextures}}var rI=function(t){function e(e){var n=this,r=e?k({},e):{},i=r.style||{};delete r.style;var o=r.cacheSize;return delete r.cacheSize,(n=t.call(this,r)||this).gv=r.sources,n.xv=null,n.If=NaN,n.K=i,n.$t=o,n.wv=n.K.variables||{},n.addChangeListener(qo,n.jv),n}return eI(e,t),e.prototype.getSources=function(t,e){var n=this.getSource();return this.gv?"function"==typeof this.gv?this.gv(t,e):this.gv:n?[n]:[]},e.prototype.getRenderSource=function(){return this.xv||this.getSource()},e.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():$o},e.prototype.jv=function(){this.getSource()&&this.setStyle(this.K)},e.prototype.Sv=function(){var t=this.getSource();return t&&"bandCount"in t?t.bandCount:4},e.prototype.createRenderer=function(){var t=nI(this.K,this.Sv());return new Qh(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.$t,paletteTextures:t.paletteTextures})},e.prototype.renderSources=function(t,e){for(var n,r=this.getRenderer(),i=0,o=e.length;i<o;++i)this.xv=e[i],r.prepareFrame(t)&&(n=r.renderFrame(t));return n},e.prototype.render=function(t,e){var n=this;this.rendered=!0;for(var r=t.viewState,i=this.getSources(t.extent,r.resolution),o=!0,a=function(t,e){var r=i[t],a=r.getState();a==ta&&r.addEventListener("change",(function t(){r.getState()==ea&&(r.removeEventListener("change",t),n.changed())})),o=o&&a==ea},s=0,l=i.length;s<l;++s)a(s);var u=this.renderSources(t,i);if(this.getRenderer().renderComplete&&o)return this.If=r.resolution,u;if(this.If>.5*r.resolution){var c=this.getSources(t.extent,this.If).filter((function(t){return!i.includes(t)}));if(c.length>0)return this.renderSources(t,c)}return u},e.prototype.setStyle=function(t){this.wv=t.variables||{},this.K=t;var e=nI(this.K,this.Sv());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(t){k(this.wv,t),this.changed()},e}(sw);rI.prototype.dispose;var iI=rI,oI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aI=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.features=r,o.file=n,o.projection=i,o}return oI(e,t),e}(p),sI=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{handleEvent:C})||this).on,n.once,n.un,n.kv=!1,n.Mv=[];for(var i=r.formatConstructors?r.formatConstructors:[],o=0,a=i.length;o<a;++o){var s=i[o];"function"==typeof s&&(s=new s),n.Mv.push(s),n.kv=n.kv||s.getType()===Iu}return n.di=r.projection?cr(r.projection):null,n._v=null,n.Ov=r.source||null,n.target=r.target?r.target:null,n}return oI(e,t),e.prototype.Tv=function(t,e){var n,r=e.target.result,i=this.getMap(),o=this.di;o||(o=i.getView().getProjection());for(var a=this.Mv,s=0,l=a.length;s<l;++s){var u=a[s],c=r;this.kv&&u.getType()!==Iu&&(void 0===n&&(n=(new TextDecoder).decode(r)),c=n);var h=this.Ev(u,c,{featureProjection:o});if(h&&h.length>0){this.Ov&&(this.Ov.clear(),this.Ov.addFeatures(h)),this.dispatchEvent(new aI("addfeatures",t,h,o));break}}},e.prototype.Av=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this._v=[H(e,G,this.handleDrop,this),H(e,"dragenter",this.handleStop,this),H(e,"dragover",this.handleStop,this),H(e,G,this.handleStop,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.Av(),this.getActive()&&!e&&this.Cv(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.Cv(),t.prototype.setMap.call(this,e),this.getActive()&&this.Av()},e.prototype.Ev=function(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}},e.prototype.Cv=function(){this._v&&(this._v.forEach(X),this._v=null)},e.prototype.handleDrop=function(t){for(var e=t.dataTransfer.files,n=0,r=e.length;n<r;++n){var i=e.item(n),o=new FileReader;o.addEventListener(q,this.Tv.bind(this,i)),this.kv?o.readAsArrayBuffer(i):o.readAsText(i)}},e.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},e}(ol),lI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uI=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).Kr=r.condition?r.condition:xl,n.Zr=void 0,n.Rv=void 0,n.Oe=0,n.Lr=void 0!==r.duration?r.duration:400,n}return lI(e,t),e.prototype.handleDragEvent=function(t){if(El(t)){var e=t.map,n=e.getSize(),r=t.pixel,i=r[0]-n[0]/2,o=n[1]/2-r[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),l=e.getView();if(void 0!==this.Zr){var u=this.Zr-a;l.adjustRotationInternal(u)}this.Zr=a,void 0!==this.Rv&&l.adjustResolutionInternal(this.Rv/s),void 0!==this.Rv&&(this.Oe=this.Rv/s),this.Rv=s}},e.prototype.handleUpEvent=function(t){if(!El(t))return!0;var e=t.map.getView(),n=this.Oe>1?1:-1;return e.endInteraction(this.Lr,n),this.Oe=0,!1},e.prototype.handleDownEvent=function(t){return!!El(t)&&!!this.Kr(t)&&(t.map.getView().beginInteraction(),this.Zr=void 0,this.Rv=void 0,!0)},e}(cl),cI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hI=function(t){function e(e,n,r){var i=t.call(this)||this;if(void 0!==r&&void 0===n)i.setFlatCoordinates(r,e);else{var o=n||0;i.setCenterAndRadius(e,o,r)}return i}return cI(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<r){if(0===s)for(var l=0;l<this.stride;++l)n[l]=i[l];else{var u=this.getRadius()/Math.sqrt(s);for(n[0]=i[0]+u*o,n[1]=i[1]+u*a,l=2;l<this.stride;++l)n[l]=i[l]}return n.length=this.stride,s}return r},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,r=t-n[0],i=e-n[1];return r*r+i*i<=this.Pv()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return be(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.Pv())},e.prototype.Pv=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return St.CIRCLE},e.prototype.intersectsExtent=function(t){if(We(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Me(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+n;for(var i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,i=Qr(r,0,t,this.stride);r[i++]=r[0]+e;for(var o=1,a=this.stride;o<a;++o)r[i++]=r[o];r.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Rr(n,0,n.length,r,t,e,n)),this.changed()},e.prototype.translate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Fr(n,0,n.length,r,t,e,n)),this.changed()},e}(Wr);hI.prototype.transform;var pI=hI,fI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dI="Point",gI="LineString",yI="Polygon",mI="Circle",vI="drawstart",wI=function(t){function e(e,n){var r=t.call(this,e)||this;return r.feature=n,r}return fI(e,t),e}(p),bI=function(t){function e(e){var n=this,r=e;r.stopDown||(r.stopDown=T),(n=t.call(this,r)||this).on,n.once,n.un,n.Iv=!1,n.Nv=null,n.zv,n.Fv,n.Lv,n.Gv=!1,n.Ov=e.source?e.source:null,n.Le=e.features?e.features:null,n.Dv=e.snapTolerance?e.snapTolerance:12,n.nl=e.type,n.ye=function(t){switch(t){case St.POINT:case St.MULTI_POINT:return dI;case St.LINE_STRING:case St.MULTI_LINE_STRING:return gI;case St.POLYGON:case St.MULTI_POLYGON:return yI;case St.CIRCLE:return mI;default:throw new Error("Invalid type: "+t)}}(n.nl),n.Uv=!!e.stopClick,n.qv=e.minPoints?e.minPoints:n.ye===yI?3:2,n.Bv=n.ye===mI?2:e.maxPoints?e.maxPoints:1/0,n.Wv=e.finishCondition?e.finishCondition:C;var i,o=e.geometryFunction;if(!o){var a,s=n.ye;s===mI?o=function(t,e,n){var r=e||new pI([NaN,NaN]),i=Ir(t[0],n),o=Yn(i,Ir(t[t.length-1],n));r.setCenterAndRadius(i,Math.sqrt(o));var a=Cr();return a&&r.transform(n,a),r}:(s===dI?a=vi:s===gI?a=Kb:s===yI&&(a=Gi),o=function(t,e,n){return e?s===yI?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])]):e.setCoordinates([]):e.setCoordinates(t):e=new a(t),e})}return n.Va=o,n.Vv=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,n.Xv=null,n.Hv=null,n.Jv=null,n.Kv=null,n.Yv=null,n.Zv=null,n.$v=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,n.Qv=new sx({source:new Bf({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=af(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),n.H=e.geometryName,n.Kr=e.condition?e.condition:bl,n.td,e.freehand?n.td=yl:n.td=e.freehandCondition?e.freehandCondition:xl,n.addChangeListener(el,n.rd),n}return fI(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.rd()},e.prototype.getOverlay=function(){return this.Qv},e.prototype.handleEvent=function(e){e.originalEvent.type===j&&e.originalEvent.preventDefault(),this.Gv=this.ye!==dI&&this.td(e);var n=e.type===$a.POINTERMOVE,r=!0;return!this.Gv&&this.Fv&&e.type===$a.POINTERDRAG&&(Date.now()-this.Fv>=this.Vv?(this.Nv=e.pixel,this.Iv=!this.Gv,n=!0):this.Fv=void 0,this.Iv&&void 0!==this.zv&&(clearTimeout(this.zv),this.zv=void 0)),this.Gv&&e.type===$a.POINTERDRAG&&null!==this.Hv?(this.ed(e.coordinate),r=!1):this.Gv&&e.type===$a.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===$a.POINTERMOVE)&&this.Gv?(this.Jn(e),this.Iv&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===$a.POINTERDRAG&&void 0===this.zv)&&this.Jn(e):e.type===$a.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,e)&&r},e.prototype.handleDownEvent=function(t){return this.Iv=!this.Gv,this.Gv?(this.Nv=t.pixel,this.Xv||this.od(t.coordinate),!0):this.Kr(t)?(this.Fv=Date.now(),this.zv=setTimeout(function(){this.Jn(new Qa($a.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.Vv),this.Nv=t.pixel,!0):(this.Fv=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.zv&&(clearTimeout(this.zv),this.zv=void 0),this.Jn(t),this.Iv){var n=!this.Xv;n&&this.od(t.coordinate),!n&&this.Gv?this.finishDrawing():this.Gv||n&&this.ye!==dI||(this.sd(t.pixel)?this.Wv(t)&&this.finishDrawing():this.ed(t.coordinate)),e=!1}else this.Gv&&this.abortDrawing();return!e&&this.Uv&&t.preventDefault(),e},e.prototype.Jn=function(t){if(this.Lv=t.originalEvent.pointerType,this.Nv&&(!this.Gv&&this.Iv||this.Gv&&!this.Iv)){var e=this.Nv,n=t.pixel,r=e[0]-n[0],i=e[1]-n[1],o=r*r+i*i;if(this.Iv=this.Gv?o>this.$v:o<=this.$v,!this.Iv)return}this.Xv?this.ad(t.coordinate):this.ud(t.coordinate.slice())},e.prototype.sd=function(t){var e=!1;if(this.Hv){var n=!1,r=[this.Xv],i=this.ye;if(i===dI)e=!0;else if(i===mI)e=2===this.Kv.length;else if(i===gI)n=this.Kv.length>this.qv;else if(i===yI){var o=this.Kv;n=o[0].length>this.qv,r=[o[0][0],o[0][o[0].length-2]]}if(n)for(var a=this.getMap(),s=0,l=r.length;s<l;s++){var u=r[s],c=a.getPixelFromCoordinate(u),h=t[0]-c[0],p=t[1]-c[1],f=this.Gv?1:this.Dv;if(e=Math.sqrt(h*h+p*p)<=f){this.Xv=u;break}}}return e},e.prototype.ud=function(t){this.Jv?this.Jv.getGeometry().setCoordinates(t):(this.Jv=new wt(new vi(t)),this.hd())},e.prototype.fd=function(t){this.Yv||(this.Yv=new wt);var e=t.getLinearRing(0),n=this.Yv.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new Kb(e.getFlatCoordinates(),e.getLayout()),this.Yv.setGeometry(n))},e.prototype.od=function(t){var e=this.getMap().getView().getProjection();this.Xv=t,this.ye===dI?this.Kv=t.slice():this.ye===yI?(this.Kv=[[t.slice(),t.slice()]],this.Zv=this.Kv[0]):this.Kv=[t.slice(),t.slice()],this.Zv&&(this.Yv=new wt(new Kb(this.Zv)));var n=this.Va(this.Kv,void 0,e);this.Hv=new wt,this.H&&this.Hv.setGeometryName(this.H),this.Hv.setGeometry(n),this.hd(),this.dispatchEvent(new wI(vI,this.Hv))},e.prototype.ad=function(t){var e,n,r=this.getMap(),i=this.Hv.getGeometry(),o=r.getView().getProjection();this.ye===dI?n=this.Kv:this.ye===yI?(n=(e=this.Kv[0])[e.length-1],this.sd(r.getPixelFromCoordinate(t))&&(t=this.Xv.slice())):n=(e=this.Kv)[e.length-1],n[0]=t[0],n[1]=t[1],this.Va(this.Kv,i,o),this.Jv&&this.Jv.getGeometry().setCoordinates(t),i.getType()===St.POLYGON&&this.ye!==yI?this.fd(i):this.Zv&&this.Yv.getGeometry().setCoordinates(this.Zv),this.hd()},e.prototype.ed=function(t){var e,n,r=this.Hv.getGeometry(),i=this.getMap().getView().getProjection(),o=this.ye;o===gI||o===mI?(this.Xv=t.slice(),(n=this.Kv).length>=this.Bv&&(this.Gv?n.pop():e=!0),n.push(t.slice()),this.Va(n,r,i)):o===yI&&((n=this.Kv[0]).length>=this.Bv&&(this.Gv?n.pop():e=!0),n.push(t.slice()),e&&(this.Xv=n[0]),this.Va(this.Kv,r,i)),this.ud(t.slice()),this.hd(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.Hv){var t,e=this.Hv.getGeometry(),n=this.getMap().getView().getProjection(),r=this.ye;if(r===gI||r===mI){if((t=this.Kv).splice(-2,1),t.length>=2){this.Xv=t[t.length-2].slice();var i=this.Xv.slice();t[t.length-1]=i,this.ud(i)}this.Va(t,e,n),e.getType()===St.POLYGON&&this.Yv&&this.fd(e)}else if(r===yI){(t=this.Kv[0]).splice(-2,1);var o=this.Yv.getGeometry();t.length>=2&&(i=t[t.length-2].slice(),t[t.length-1]=i,this.ud(i)),o.setCoordinates(t),this.Va(this.Kv,e,n)}1===t.length&&this.abortDrawing(),this.hd()}},e.prototype.finishDrawing=function(){var t=this.ld();if(t){var e=this.Kv,n=t.getGeometry(),r=this.getMap().getView().getProjection();this.ye===gI?(e.pop(),this.Va(e,n,r)):this.ye===yI&&(e[0].pop(),this.Va(e,n,r),e=n.getCoordinates()),this.nl===St.MULTI_POINT?t.setGeometry(new Vb([e])):this.nl===St.MULTI_LINE_STRING?t.setGeometry(new Qb([e])):this.nl===St.MULTI_POLYGON&&t.setGeometry(new ex([e])),this.dispatchEvent(new wI("drawend",t)),this.Le&&this.Le.push(t),this.Ov&&this.Ov.addFeature(t)}},e.prototype.ld=function(){this.Xv=null;var t=this.Hv;return this.Hv=null,this.Jv=null,this.Yv=null,this.Qv.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.ld();t&&this.dispatchEvent(new wI("drawabort",t))},e.prototype.appendCoordinates=function(t){var e,n=this.ye,r=!this.Hv;if(r&&this.od(t[0]),n===gI||n===mI)e=this.Kv;else{if(n!==yI)return;e=this.Kv&&this.Kv.length?this.Kv[0]:[]}r&&e.shift(),e.pop();for(var i=0;i<t.length;i++)this.ed(t[i]);var o=t[t.length-1];this.ed(o),this.ad(o)},e.prototype.extend=function(t){var e=t.getGeometry();this.Hv=t,this.Kv=e.getCoordinates();var n=this.Kv[this.Kv.length-1];this.Xv=n.slice(),this.Kv.push(n.slice()),this.Jv=new wt(new vi(n)),this.hd(),this.dispatchEvent(new wI(vI,this.Hv))},e.prototype.hd=function(){var t=[];this.Hv&&t.push(this.Hv),this.Yv&&t.push(this.Yv),this.Jv&&t.push(this.Jv);var e=this.Qv.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.rd=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.Qv.setMap(e?t:null)},e}(cl),xI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_I=function(t){function e(e){var n=t.call(this,"extentchanged")||this;return n.extent=e,n}return xI(e,t),e}(p);function EI(){var t=af();return function(e,n){return t[St.POINT]}}function SI(t){return function(e){return he([t,e])}}function CI(t,e){return t[0]==e[0]?function(n){return he([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return he([t,[e[0],n[1]]])}:null}var TI=function(t){function e(e){var n,r=this,i=e||{};return(r=t.call(this,i)||this).on,r.once,r.un,r.Kr=i.condition?i.condition:yl,r.st=null,r.vd=null,r.dd=void 0!==i.pixelTolerance?i.pixelTolerance:10,r.yd=!1,r.md=null,r.wd=null,e||(e={}),r.bd=new sx({source:new Bf({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(n=af(),function(t,e){return n[St.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.gd=new sx({source:new Bf({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:EI(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&r.setExtent(e.extent),r}return xI(e,t),e.prototype.xd=function(t,e){var n=e.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);i.sort((function(t,e){return Zn(n,t)-Zn(n,e)}));var o=i[0],a=Bn(n,o),s=e.getPixelFromCoordinateInternal(a);if(Xn(t,s)<=this.dd){var l=e.getPixelFromCoordinateInternal(o[0]),u=e.getPixelFromCoordinateInternal(o[1]),c=Yn(s,l),h=Yn(s,u),p=Math.sqrt(Math.min(c,h));return this.yd=p<=this.dd,this.yd&&(a=c>h?o[1]:o[0]),a}}return null},e.prototype.Jn=function(t){var e=t.pixel,n=t.map,r=this.xd(e,n);r||(r=n.getCoordinateFromPixelInternal(e)),this.jd(r)},e.prototype.Sd=function(t){var e=this.md;return e?t?e.setGeometry(Ui(t)):e.setGeometry(void 0):(e=new wt(t?Ui(t):{}),this.md=e,this.bd.getSource().addFeature(e)),e},e.prototype.jd=function(t){var e=this.wd;return e?e.getGeometry().setCoordinates(t):(e=new wt(new vi(t)),this.wd=e,this.gd.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.originalEvent||!this.Kr(e)||(e.type!=$a.POINTERMOVE||this.handlingDownUpSequence||this.Jn(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,n=t.map,r=this.getExtentInternal(),i=this.xd(e,n),o=function(t){var e=null,n=null;return t[0]==r[0]?e=r[2]:t[0]==r[2]&&(e=r[0]),t[1]==r[1]?n=r[3]:t[1]==r[3]&&(n=r[1]),null!==e&&null!==n?[e,n]:null};if(i&&r){var a=i[0]==r[0]||i[0]==r[2]?i[0]:null,s=i[1]==r[1]||i[1]==r[3]?i[1]:null;null!==a&&null!==s?this.vd=SI(o(i)):null!==a?this.vd=CI(o([a,r[1]]),o([a,r[3]])):null!==s&&(this.vd=CI(o([r[0],s]),o([r[2],s])))}else i=n.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.vd=SI(i);return!0},e.prototype.handleDragEvent=function(t){if(this.vd){var e=t.coordinate;this.setExtent(this.vd(e)),this.jd(e)}},e.prototype.handleUpEvent=function(t){this.vd=null;var e=this.getExtentInternal();return e&&0!==Ne(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.bd.setMap(e),this.gd.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return Ar(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.st},e.prototype.setExtent=function(t){this.st=t||null,this.Sd(t),this.dispatchEvent(new _I(this.st))},e}(cl);function II(t){return(II="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var AI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),PI=[0,0,0,0],kI=[],OI="modifyend",MI=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.features=n,i.mapBrowserEvent=r,i}return AI(e,t),e}(p);function NI(t,e){return t.index-e.index}function LI(t,e,n){var r=e.geometry;if(r.getType()===St.CIRCLE){var i=r;if(1===e.index){var o=Cr();o&&(i=i.clone().transform(o,n));var a=Yn(i.getCenter(),Ir(t,n)),s=Math.sqrt(a)-i.getRadius();return s*s}}var l=Ir(t,n);return kI[0]=Ir(e.segment[0],n),kI[1]=Ir(e.segment[1],n),Zn(l,kI)}function RI(t,e,n){var r=e.geometry;if(r.getType()===St.CIRCLE&&1===e.index){var i=r,o=Cr();return o&&(i=i.clone().transform(o,n)),Tr(i.getClosestPoint(Ir(t,n)),n)}var a=Ir(t,n);return kI[0]=Ir(e.segment[0],n),kI[1]=Ir(e.segment[1],n),Tr(Bn(a,kI),n)}var DI=function(t){function e(e){var n,r,i=t.call(this,e)||this;if(i.on,i.once,i.un,i.kd=i.Ku.bind(i),i.Kr=e.condition?e.condition:Sl,i.Md=function(t){return pl(t)&&wl(t)},i._d=e.deleteCondition?e.deleteCondition:i.Md,i.Od=e.insertVertexCondition?e.insertVertexCondition:yl,i.wd=null,i.Td=null,i.Ed=[0,0],i.Ad=!1,i.Cd=null,i.Rd=new pf,i.dd=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.yd=!1,i.Pd=!1,i.Id=[],i.Qv=new sx({source:new Bf({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(n=af(),function(t,e){return n[St.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.Nd={Point:i.zd.bind(i),LineString:i.Fd.bind(i),LinearRing:i.Fd.bind(i),Polygon:i.Ld.bind(i),MultiPoint:i.Gd.bind(i),MultiLineString:i.Dd.bind(i),MultiPolygon:i.Ud.bind(i),Circle:i.qd.bind(i),GeometryCollection:i.Bd.bind(i)},i.Ov=null,i.Wd=null,e.features?r=e.features:e.source&&(i.Ov=e.source,r=new st(i.Ov.getFeatures()),i.Ov.addEventListener(Rf,i.Vd.bind(i)),i.Ov.addEventListener(jf,i.Xd.bind(i))),!r)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(i.Wd=e.hitDetection),i.Le=r,i.Le.forEach(i.Hd.bind(i)),i.Le.addEventListener(nt,i.Jd.bind(i)),i.Le.addEventListener(rt,i.Kd.bind(i)),i.Yd=null,i.Br=[0,0],i.Zd=void 0===e.snapToPointer?!i.Wd:e.snapToPointer,i}return AI(e,t),e.prototype.Hd=function(t){var e=t.getGeometry();if(e){var n=this.Nd[e.getType()];n&&n(t,e)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.$d(this.Ed,r),t.addEventListener(D,this.kd)},e.prototype.Qd=function(t,e){if(!this.Cd){this.Cd=new st;for(var n=this.Cd.getArray(),r=0,i=e.length;r<i;++r)for(var o=e[r],a=0,s=o.length;a<s;++a){var l=o[a].feature;l&&-1===n.indexOf(l)&&this.Cd.push(l)}0===this.Cd.getLength()?this.Cd=null:this.dispatchEvent(new MI("modifystart",this.Cd,t))}},e.prototype.tp=function(t){this.np(t),this.wd&&0===this.Le.getLength()&&(this.Qv.getSource().removeFeature(this.wd),this.wd=null),t.removeEventListener(D,this.kd)},e.prototype.np=function(t){var e=this.Rd,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(var r=n.length-1;r>=0;--r){for(var i=n[r],o=this.Id.length-1;o>=0;--o)this.Id[o][0]===i&&this.Id.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.wd&&!e&&(this.Qv.getSource().removeFeature(this.wd),this.wd=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.Qv.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.Qv},e.prototype.Vd=function(t){t.feature&&this.Le.push(t.feature)},e.prototype.Xd=function(t){t.feature&&this.Le.remove(t.feature)},e.prototype.Jd=function(t){this.Hd(t.element)},e.prototype.Ku=function(t){if(!this.Pd){var e=t.target;this.tp(e),this.Hd(e)}},e.prototype.Kd=function(t){var e=t.element;this.tp(e)},e.prototype.zd=function(t,e){var n=e.getCoordinates(),r={feature:t,geometry:e,segment:[n,n]};this.Rd.insert(e.getExtent(),r)},e.prototype.Gd=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r){var o=n[r],a={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this.Rd.insert(e.getExtent(),a)}},e.prototype.Fd=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length-1;r<i;++r){var o=n.slice(r,r+2),a={feature:t,geometry:e,index:r,segment:o};this.Rd.insert(he(o),a)}},e.prototype.Dd=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[r],index:a,segment:l};this.Rd.insert(he(l),u)}},e.prototype.Ld=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[r],index:a,segment:l};this.Rd.insert(he(l),u)}},e.prototype.Ud=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u){var h=l.slice(u,u+2),p={feature:t,geometry:e,depth:[a,r],index:u,segment:h};this.Rd.insert(he(h),p)}},e.prototype.qd=function(t,e){var n=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[n,n]},i={feature:t,geometry:e,index:1,segment:[n,n]},o=[r,i];r.featureSegments=o,i.featureSegments=o,this.Rd.insert(_e(n),r);var a=e,s=Cr();if(s&&this.getMap()){var l=this.getMap().getView().getProjection();a=qi(a=a.clone().transform(s,l)).transform(l,s)}this.Rd.insert(a.getExtent(),i)},e.prototype.Bd=function(t,e){for(var n=e.getGeometriesArray(),r=0;r<n.length;++r){var i=n[r];(0,this.Nd[i.getType()])(t,i)}},e.prototype.ip=function(t,e,n){var r=this.wd;return r?r.getGeometry().setCoordinates(t):(r=new wt(new vi(t)),this.wd=r,this.Qv.getSource().addFeature(r)),r.set("features",e),r.set("geometries",n),r},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.Yd=e,e.map.getView().getInteracting()||e.type!=$a.POINTERMOVE||this.handlingDownUpSequence||this.Jn(e),this.wd&&this._d(e)&&(n=!(e.type!=$a.SINGLECLICK||!this.Ad)||this.removePoint()),e.type==$a.SINGLECLICK&&(this.Ad=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.Ad=!1,this.Qd(t,this.Id);for(var e=[t.coordinate[0]+this.Br[0],t.coordinate[1]+this.Br[1]],n=[],r=[],i=0,o=this.Id.length;i<o;++i){var a=this.Id[i],s=a[0],l=s.feature;-1===n.indexOf(l)&&n.push(l);var u=s.geometry;-1===r.indexOf(u)&&r.push(u);for(var c=s.depth,h=void 0,p=s.segment,f=a[1];e.length<u.getStride();)e.push(p[f][e.length]);switch(u.getType()){case St.POINT:h=e,p[0]=e,p[1]=e;break;case St.MULTI_POINT:(h=u.getCoordinates())[s.index]=e,p[0]=e,p[1]=e;break;case St.LINE_STRING:(h=u.getCoordinates())[s.index+f]=e,p[f]=e;break;case St.MULTI_LINE_STRING:case St.POLYGON:(h=u.getCoordinates())[c[0]][s.index+f]=e,p[f]=e;break;case St.MULTI_POLYGON:(h=u.getCoordinates())[c[1]][c[0]][s.index+f]=e,p[f]=e;break;case St.CIRCLE:if(p[0]=e,p[1]=e,0===s.index)this.Pd=!0,u.setCenter(e),this.Pd=!1;else{this.Pd=!0;var d=t.map.getView().getProjection(),g=Xn(Ir(u.getCenter(),d),Ir(e,d)),y=Cr();if(y){var m=u.clone().transform(y,d);m.setRadius(g),g=m.transform(d,y).getRadius()}u.setRadius(g),this.Pd=!1}}h&&this.rp(u,h)}this.ip(e,n,r)},e.prototype.handleDownEvent=function(t){if(!this.Kr(t))return!1;var e=t.coordinate;this.$d(t.pixel,t.map,e),this.Id.length=0,this.Cd=null;var n=this.wd;if(n){var r=t.map.getView().getProjection(),i=[],o=n.getGeometry().getCoordinates(),s=he([o]),l=this.Rd.getInExtent(s),u={};l.sort(NI);for(var c=0,h=l.length;c<h;++c){var p=l[c],f=p.segment,d=a(p.geometry),g=p.depth;if(g&&(d+="-"+g.join("-")),u[d]||(u[d]=new Array(2)),p.geometry.getType()!==St.CIRCLE||1!==p.index)if(!Wn(f[0],o)||u[d][0])if(!Wn(f[1],o)||u[d][1])a(f)in this.Td&&!u[d][0]&&!u[d][1]&&this.Od(t)&&i.push(p);else{if((p.geometry.getType()===St.LINE_STRING||p.geometry.getType()===St.MULTI_LINE_STRING)&&u[d][0]&&0===u[d][0].index)continue;this.Id.push([p,1]),u[d][1]=p}else this.Id.push([p,0]),u[d][0]=p;else Wn(RI(e,p,r),o)&&!u[d][0]&&(this.Id.push([p,0]),u[d][0]=p)}i.length&&this.Qd(t,[i]);for(var y=i.length-1;y>=0;--y)this.ep(i[y],o)}return!!this.wd},e.prototype.handleUpEvent=function(t){for(var e=this.Id.length-1;e>=0;--e){var n=this.Id[e][0],r=n.geometry;if(r.getType()===St.CIRCLE){var i=r.getCenter(),o=n.featureSegments[0],a=n.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.Rd.update(_e(i),o);var s=r,l=Cr();if(l){var u=t.map.getView().getProjection();s=qi(s=s.clone().transform(l,u)).transform(u,l)}this.Rd.update(s.getExtent(),a)}else this.Rd.update(he(n.segment),n)}return this.Cd&&(this.dispatchEvent(new MI(OI,this.Cd,t)),this.Cd=null),!1},e.prototype.Jn=function(t){this.Ed=t.pixel,this.$d(t.pixel,t.map,t.coordinate)},e.prototype.$d=function(t,e,n){var r,i,o=this,s=n||e.getCoordinateFromPixel(t),l=e.getView().getProjection();if(this.Wd){var u="object"===II(this.Wd)?function(t){return t===o.Wd}:void 0;e.forEachFeatureAtPixel(t,(function(t,e,n){if((n=n||t.getGeometry()).getType()===St.POINT&&m(o.Le.getArray(),t)){i=n;var a=n.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:n,segment:[a,a]}]}return!0}),{layerFilter:u})}if(!r){var c=Ar(pe(Pr(_e(s,PI),l),e.getView().getResolution()*this.dd,PI),l);r=this.Rd.getInExtent(c)}if(r&&r.length>0){var h=r.sort((function(t,e){return LI(s,t,l)-LI(s,e,l)}))[0],p=h.segment,f=RI(s,h,l),d=e.getPixelFromCoordinate(f),g=Xn(t,d);if(i||g<=this.dd){var y={};if(y[a(p)]=!0,this.Zd||(this.Br[0]=f[0]-s[0],this.Br[1]=f[1]-s[1]),h.geometry.getType()===St.CIRCLE&&1===h.index)this.yd=!0,this.ip(f,[h.feature],[h.geometry]);else{var v=e.getPixelFromCoordinate(p[0]),w=e.getPixelFromCoordinate(p[1]),b=Yn(d,v),x=Yn(d,w);g=Math.sqrt(Math.min(b,x)),this.yd=g<=this.dd,this.yd&&(f=b>x?p[1]:p[0]),this.ip(f,[h.feature],[h.geometry]);var _={};_[a(h.geometry)]=!0;for(var E=1,S=r.length;E<S;++E){var C=r[E].segment;if(!(Wn(p[0],C[0])&&Wn(p[1],C[1])||Wn(p[0],C[1])&&Wn(p[1],C[0])))break;var T=a(r[E].geometry);T in _||(_[T]=!0,y[a(C)]=!0)}}return void(this.Td=y)}}this.wd&&(this.Qv.getSource().removeFeature(this.wd),this.wd=null)},e.prototype.ep=function(t,e){for(var n,r=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case St.MULTI_LINE_STRING:case St.POLYGON:(n=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case St.MULTI_POLYGON:(n=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case St.LINE_STRING:(n=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.rp(o,n);var l=this.Rd;l.remove(t),this.op(o,s,a,1);var u={segment:[r[0],e],feature:i,geometry:o,depth:a,index:s};l.insert(he(u.segment),u),this.Id.push([u,1]);var c={segment:[e,r[1]],feature:i,geometry:o,depth:a,index:s+1};l.insert(he(c.segment),c),this.Id.push([c,0]),this.Ad=!0},e.prototype.removePoint=function(){if(this.Yd&&this.Yd.type!=$a.POINTERDRAG){var t=this.Yd;this.Qd(t,this.Id);var e=this.sp();return this.Cd&&this.dispatchEvent(new MI(OI,this.Cd,t)),this.Cd=null,e}return!1},e.prototype.sp=function(){var t,e,n,r,i,o,s,l,u,c,h,p=this.Id,f={},d=!1;for(i=p.length-1;i>=0;--i)h=a((c=(n=p[i])[0]).feature),c.depth&&(h+="-"+c.depth.join("-")),h in f||(f[h]={}),0===n[1]?(f[h].right=c,f[h].index=c.index):1==n[1]&&(f[h].left=c,f[h].index=c.index+1);for(h in f){switch(u=f[h].right,s=f[h].left,(l=(o=f[h].index)-1)<0&&(l=0),t=e=(r=(c=void 0!==s?s:u).geometry).getCoordinates(),d=!1,r.getType()){case St.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(o,1),d=!0);break;case St.LINE_STRING:e.length>2&&(e.splice(o,1),d=!0);break;case St.MULTI_POLYGON:t=t[c.depth[1]];case St.POLYGON:(t=t[c.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),d=!0,0===o&&(t.pop(),t.push(t[0]),l=t.length-1))}if(d){this.rp(r,e);var g=[];if(void 0!==s&&(this.Rd.remove(s),g.push(s.segment[0])),void 0!==u&&(this.Rd.remove(u),g.push(u.segment[1])),void 0!==s&&void 0!==u){var y={depth:c.depth,feature:c.feature,geometry:c.geometry,index:l,segment:g};this.Rd.insert(he(y.segment),y)}this.op(r,o,c.depth,-1),this.wd&&(this.Qv.getSource().removeFeature(this.wd),this.wd=null),p.length=0}}return d},e.prototype.rp=function(t,e){this.Pd=!0,t.setCoordinates(e),this.Pd=!1},e.prototype.op=function(t,e,n,r){this.Rd.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===n||void 0===i.depth||_(i.depth,n))&&i.index>e&&(i.index+=r)}))},e}(cl),FI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jI=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.selected=n,o.deselected=r,o.mapBrowserEvent=i,o}return FI(e,t),e}(p),zI={},GI=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r,i,o=e||{};if(n.ap=n.Hd.bind(n),n.up=n.tp.bind(n),n.Kr=o.condition?o.condition:wl,n.cp=o.addCondition?o.addCondition:vl,n.hp=o.removeCondition?o.removeCondition:vl,n.fp=o.toggleCondition?o.toggleCondition:xl,n.lp=!!o.multi&&o.multi,n.vp=o.filter?o.filter:C,n.dp=o.hitTolerance?o.hitTolerance:0,n.K=void 0!==o.style?o.style:(b((r=af())[St.POLYGON],r[St.LINE_STRING]),b(r[St.GEOMETRY_COLLECTION],r[St.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),n.Le=o.features||new st,o.layers)if("function"==typeof o.layers)i=o.layers;else{var a=o.layers;i=function(t){return m(a,t)}}else i=C;return n.pp=i,n.yp={},n}return FI(e,t),e.prototype.mp=function(t,e){this.yp[a(t)]=e},e.prototype.getFeatures=function(){return this.Le},e.prototype.getHitTolerance=function(){return this.dp},e.prototype.getLayer=function(t){return this.yp[a(t)]},e.prototype.setHitTolerance=function(t){this.dp=t},e.prototype.setMap=function(e){this.getMap()&&this.K&&this.Le.forEach(this.wp.bind(this)),t.prototype.setMap.call(this,e),e?(this.Le.addEventListener(nt,this.ap),this.Le.addEventListener(rt,this.up),this.K&&this.Le.forEach(this.bp.bind(this))):(this.Le.removeEventListener(nt,this.ap),this.Le.removeEventListener(rt,this.up))},e.prototype.Hd=function(t){var e=t.element;if(this.K&&this.bp(e),!this.getLayer(e)){var n=this.getMap().getAllLayers().find((function(t){if(t instanceof sx&&t.getSource()&&t.getSource().hasFeature(e))return t}));n&&this.mp(e,n)}},e.prototype.tp=function(t){var e=t.element;this.K&&this.wp(e)},e.prototype.getStyle=function(){return this.K},e.prototype.bp=function(t){var e=a(t);e in zI||(zI[e]=t.getStyle()),t.setStyle(this.K)},e.prototype.wp=function(t){for(var n=this.getMap().getInteractions().getArray(),r=n.length-1;r>=0;--r){var i=n[r];if(i!==this&&i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}var o=a(t);t.setStyle(zI[o]),delete zI[o]},e.prototype.gp=function(t){delete this.yp[a(t)]},e.prototype.handleEvent=function(t){if(!this.Kr(t))return!0;var e=this.cp(t),n=this.hp(t),r=this.fp(t),i=!e&&!n&&!r,o=t.map,a=this.getFeatures(),s=[],l=[];if(i){O(this.yp),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.vp(t,e))return this.mp(t,e),l.push(t),!this.lp}.bind(this),{layerFilter:this.pp,hitTolerance:this.dp});for(var u=a.getLength()-1;u>=0;--u){var c=a.item(u),h=l.indexOf(c);h>-1?l.splice(h,1):(a.remove(c),s.push(c))}0!==l.length&&a.extend(l)}else{o.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.vp(t,i))return!e&&!r||m(a.getArray(),t)?(n||r)&&m(a.getArray(),t)&&(s.push(t),this.gp(t)):(this.mp(t,i),l.push(t)),!this.lp}.bind(this),{layerFilter:this.pp,hitTolerance:this.dp});for(var p=s.length-1;p>=0;--p)a.remove(s[p]);a.extend(l)}return(l.length>0||s.length>0)&&this.dispatchEvent(new jI("select",l,s,t)),!0},e}(ol),BI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function UI(t){return t.feature?t.feature:t.element?t.element:void 0}var qI=[],WI=function(t){function e(e){var n=this,r=e||{},i=r;return i.handleDownEvent||(i.handleDownEvent=C),i.stopDown||(i.stopDown=T),(n=t.call(this,i)||this).Ov=r.source?r.source:null,n.xp=void 0===r.vertex||r.vertex,n.jp=void 0===r.edge||r.edge,n.Le=r.features?r.features:null,n.Sp=[],n.kp={},n.Mp={},n._p={},n.dd=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.Rd=new pf,n.Op={Point:n.Tp.bind(n),LineString:n.Ep.bind(n),LinearRing:n.Ep.bind(n),Polygon:n.Ap.bind(n),MultiPoint:n.Cp.bind(n),MultiLineString:n.Rp.bind(n),MultiPolygon:n.Pp.bind(n),GeometryCollection:n.Ip.bind(n),Circle:n.Np.bind(n)},n}return BI(e,t),e.prototype.addFeature=function(t,e){var n=void 0===e||e,r=a(t),i=t.getGeometry();if(i){var o=this.Op[i.getType()];if(o){this.Mp[r]=i.getExtent([1/0,1/0,-1/0,-1/0]);var s=[];if(o(s,i),1===s.length)this.Rd.insert(he(s[0]),{feature:t,segment:s[0]});else if(s.length>1){var l=s.map((function(t){return he(t)})),u=s.map((function(e){return{feature:t,segment:e}}));this.Rd.load(l,u)}}}n&&(this.kp[r]=H(t,D,this.Ku,this))},e.prototype.zp=function(t){this.addFeature(t)},e.prototype.Fp=function(t){this.removeFeature(t)},e.prototype.Lp=function(){var t;return this.Le?t=this.Le:this.Ov&&(t=this.Ov.getFeatures()),t},e.prototype.handleEvent=function(e){var n=this.snapTo(e.pixel,e.coordinate,e.map);return n&&(e.coordinate=n.vertex.slice(0,2),e.pixel=n.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.Jd=function(t){var e=UI(t);this.addFeature(e)},e.prototype.Kd=function(t){var e=UI(t);this.removeFeature(e)},e.prototype.Ku=function(t){var e=t.target;if(this.handlingDownUpSequence){var n=a(e);n in this._p||(this._p[n]=e)}else this.Gp(e)},e.prototype.handleUpEvent=function(t){var e=M(this._p);return e.length&&(e.forEach(this.Gp.bind(this)),this._p={}),!1},e.prototype.removeFeature=function(t,e){var n=void 0===e||e,r=a(t),i=this.Mp[r];if(i){var o=this.Rd,s=[];o.forEachInExtent(i,(function(e){t===e.feature&&s.push(e)}));for(var l=s.length-1;l>=0;--l)o.remove(s[l])}n&&(X(this.kp[r]),delete this.kp[r])},e.prototype.setMap=function(e){var n=this.getMap(),r=this.Sp,i=this.Lp();n&&(r.forEach(X),r.length=0,i.forEach(this.Fp.bind(this))),t.prototype.setMap.call(this,e),e&&(this.Le?r.push(H(this.Le,nt,this.Jd,this),H(this.Le,rt,this.Kd,this)):this.Ov&&r.push(H(this.Ov,Rf,this.Jd,this),H(this.Ov,jf,this.Kd,this)),i.forEach(this.zp.bind(this)))},e.prototype.snapTo=function(t,e,n){var r=he([n.getCoordinateFromPixel([t[0]-this.dd,t[1]+this.dd]),n.getCoordinateFromPixel([t[0]+this.dd,t[1]-this.dd])]),i=this.Rd.getInExtent(r),o=i.length;if(0===o)return null;var a,s=n.getView().getProjection(),l=Ir(e,s),u=1/0,c=this.dd*this.dd,h=function(){if(a){var e=n.getPixelFromCoordinate(a);if(Yn(t,e)<=c)return{vertex:a,vertexPixel:[Math.round(e[0]),Math.round(e[1])]}}return null};if(this.xp){for(var p=0;p<o;++p)(f=i[p]).feature.getGeometry().getType()!==St.CIRCLE&&f.segment.forEach((function(t){var e=Ir(t,s),n=Yn(l,e);n<u&&(a=t,u=n)}));if(x=h())return x}if(this.jp){for(p=0;p<o;++p){var f,d=null;if((f=i[p]).feature.getGeometry().getType()===St.CIRCLE){var g=f.feature.getGeometry(),y=Cr();y&&(g=g.clone().transform(y,s)),d=Tr(Gn(l,g),s)}else{var m=f.segment,v=m[0],w=m[1];w&&(qI[0]=Ir(v,s),qI[1]=Ir(w,s),d=Bn(l,qI))}if(d){var b=Yn(l,d);b<u&&(a=d,u=b)}}var x;if(x=h())return x}return null},e.prototype.Gp=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.Np=function(t,e){var n=this.getMap().getView().getProjection(),r=e,i=Cr();i&&(r=r.clone().transform(i,n));var o=qi(r);i&&o.transform(n,i);for(var a=o.getCoordinates()[0],s=0,l=a.length-1;s<l;++s)t.push(a.slice(s,s+2))},e.prototype.Ip=function(t,e){for(var n=e.getGeometriesArray(),r=0;r<n.length;++r){var i=this.Op[n[r].getType()];i&&i(t,n[r])}},e.prototype.Ep=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length-1;r<i;++r)t.push(n.slice(r,r+2))},e.prototype.Rp=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a)t.push(o.slice(a,a+2))},e.prototype.Cp=function(t,e){e.getCoordinates().forEach((function(e){t.push([e])}))},e.prototype.Pp=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u)t.push(l.slice(u,u+2))},e.prototype.Tp=function(t,e){t.push([e.getCoordinates()])},e.prototype.Ap=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a)t.push(o.slice(a,a+2))},e}(cl),VI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HI=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.features=n,a.coordinate=r,a.startCoordinate=i,a.mapBrowserEvent=o,a}return VI(e,t),e}(p),YI=function(t){function e(e){var n,r=this,i=e||{};if((r=t.call(this,i)||this).on,r.once,r.un,r.Dp=null,r.Up=null,r.Le=void 0!==i.features?i.features:null,i.layers&&!r.Le)if("function"==typeof i.layers)n=i.layers;else{var o=i.layers;n=function(t){return m(o,t)}}else n=C;return r.pp=n,r.vp=i.filter&&!r.Le?i.filter:C,r.dp=i.hitTolerance?i.hitTolerance:0,r.Kr=i.condition?i.condition:yl,r.qp=null,r.addChangeListener(el,r.Bp),r}return VI(e,t),e.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Kr(t))return!1;if(this.qp=this.Wp(t.pixel,t.map),!this.Dp&&this.qp){this.Up=t.coordinate,this.Dp=t.coordinate,this.handleMoveEvent(t);var e=this.Le||new st([this.qp]);return this.dispatchEvent(new HI("translatestart",e,t.coordinate,this.Up,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.Dp){this.Dp=null,this.handleMoveEvent(t);var e=this.Le||new st([this.qp]);return this.dispatchEvent(new HI("translateend",e,t.coordinate,this.Up,t)),this.Up=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.Dp){var e=t.coordinate,n=e[0]-this.Dp[0],r=e[1]-this.Dp[1],i=this.Le||new st([this.qp]);i.forEach((function(t){var e=t.getGeometry();e.translate(n,r),t.setGeometry(e)})),this.Dp=e,this.dispatchEvent(new HI("translating",i,e,this.Up,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.Wp(t.pixel,t.map)?(e.classList.remove(this.Dp?"ol-grab":"ol-grabbing"),e.classList.add(this.Dp?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.Wp=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.vp(t,e)&&(!this.Le||m(this.Le.getArray(),t)))return t}.bind(this),{layerFilter:this.pp,hitTolerance:this.dp})},e.prototype.getHitTolerance=function(){return this.dp},e.prototype.setHitTolerance=function(t){this.dp=t},e.prototype.setMap=function(e){var n=this.getMap();t.prototype.setMap.call(this,e),this.rd(n)},e.prototype.Bp=function(){this.rd(null)},e.prototype.rd=function(t){var e=this.getMap(),n=this.getActive();e&&n||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(cl);function XI(t,e,n,r,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);for(var l=e;l<n;){var u=t[l++];a[s++]=t[l++],a[s++]=u;for(var c=2;c<r;++c)a[s++]=t[l++]}return a.length=s,a}var ZI=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KI={};KI[St.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new vi([t.x,t.y,t.z,t.m],Et):void 0!==t.z?new vi([t.x,t.y,t.z],xt):void 0!==t.m?new vi([t.x,t.y,t.m],_t):new vi([t.x,t.y])},KI[St.LINE_STRING]=function(t){var e=$I(t);return new Kb(t.paths[0],e)},KI[St.POLYGON]=function(t){var e=$I(t);return new Gi(t.rings,e)},KI[St.MULTI_POINT]=function(t){var e=$I(t);return new Vb(t.points,e)},KI[St.MULTI_LINE_STRING]=function(t){var e=$I(t);return new Qb(t.paths,e)},KI[St.MULTI_POLYGON]=function(t){var e=$I(t);return new ex(t.rings,e)};var JI={};function QI(t,e){var n,r,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=St.POINT;else if(t.points)i=St.MULTI_POINT;else if(t.paths)i=1===t.paths.length?St.LINE_STRING:St.MULTI_LINE_STRING;else if(t.rings){var o=t,a=$I(o),s=function(t,e){var n,r,i=[],o=[],a=[];for(n=0,r=t.length;n<r;++n)i.length=0,$r(i,0,t[n],e.length),Mi(i,0,i.length,e.length)?o.push([t[n]]):a.push(t[n]);for(;a.length;){var s=a.shift(),l=!1;for(n=o.length-1;n>=0;n--){var u=o[n][0];if(ye(new yi(u).getExtent(),new yi(s).getExtent())){o[n].push(s),l=!0;break}}l||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(i=St.POLYGON,t=k({},t,((n={}).rings=s[0],n))):(i=St.MULTI_POLYGON,t=k({},t,((r={}).rings=s,r)))}return _x((0,KI[i])(t),!1,e)}function $I(t){var e=bt;return!0===t.hasZ&&!0===t.hasM?e=Et:!0===t.hasZ?e=xt:!0===t.hasM&&(e=_t),e}function tA(t){var e=t.getLayout();return{hasZ:e===xt||e===Et,hasM:e===_t||e===Et}}function eA(t,e){return(0,JI[t.getType()])(_x(t,!0,e),e)}JI[St.POINT]=function(t,e){var n,r=t.getCoordinates(),i=t.getLayout();return i===xt?n={x:r[0],y:r[1],z:r[2]}:i===_t?n={x:r[0],y:r[1],m:r[2]}:i===Et?n={x:r[0],y:r[1],z:r[2],m:r[3]}:i===bt?n={x:r[0],y:r[1]}:yt(!1,34),n},JI[St.LINE_STRING]=function(t,e){var n=tA(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:[t.getCoordinates()]}},JI[St.POLYGON]=function(t,e){var n=tA(t);return{hasZ:n.hasZ,hasM:n.hasM,rings:t.getCoordinates(!1)}},JI[St.MULTI_POINT]=function(t,e){var n=tA(t);return{hasZ:n.hasZ,hasM:n.hasM,points:t.getCoordinates()}},JI[St.MULTI_LINE_STRING]=function(t,e){var n=tA(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:t.getCoordinates()}},JI[St.MULTI_POLYGON]=function(t,e){for(var n=tA(t),r=t.getCoordinates(!1),i=[],o=0;o<r.length;o++)for(var a=r[o].length-1;a>=0;a--)i.push(r[o][a]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}};var nA=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this)||this).H=r.geometryName,n}return ZI(e,t),e.prototype.readFeatureFromObject=function(t,e,n){var r=t,i=QI(r.geometry,e),o=new wt;if(this.H&&o.setGeometryName(this.H),o.setGeometry(i),r.attributes){o.setProperties(r.attributes,!0);var a=r.attributes[n];void 0!==a&&o.setId(a)}return o},e.prototype.readFeaturesFromObject=function(t,e){var n=e||{};if(t.features){for(var r=[],i=t.features,o=0,a=i.length;o<a;++o)r.push(this.readFeatureFromObject(i[o],n,t.objectIdFieldName));return r}return[this.readFeatureFromObject(t,n)]},e.prototype.readGeometryFromObject=function(t,e){return QI(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?cr("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return eA(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={};if(!t.hasProperties())return n.attributes={},n;var r=t.getProperties(),i=t.getGeometry();if(i){n.geometry=eA(i,e);var o=e&&(e.dataProjection||e.featureProjection);o&&(n.geometry.spatialReference={wkid:Number(cr(o).getCode().split(":").pop())}),delete r[t.getGeometryName()]}return N(r)?n.attributes={}:n.attributes=r,n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(this.writeFeatureObject(t[r],e));return{features:n}},e}(jx),rA=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iA=function(t){function e(){var e=t.call(this)||this;return e.Vp=ih(),e}return rA(e,t),e.prototype.getType=function(){return ku},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var n=Bc(t);return this.readFeatureFromDocument(n,e)}return zc(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var n=this.readFeaturesFromDocument(t,e);return n.length>0?n[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var n=Bc(t);return this.readFeaturesFromDocument(n,e)}return zc(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var n=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&b(n,this.readFeaturesFromNode(r,e));return n},e.prototype.readFeaturesFromNode=function(t,e){return i()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var n=Bc(t);return this.readGeometryFromDocument(n,e)}return zc(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Bc(t);return this.readProjectionFromDocument(e)}return zc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var n=this.writeFeatureNode(t,e);return this.Vp.serializeToString(n)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var n=this.writeFeaturesNode(t,e);return this.Vp.serializeToString(n)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var n=this.writeGeometryNode(t,e);return this.Vp.serializeToString(n)},e.prototype.writeGeometryNode=function(t,e){return null},e}(xx),oA=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aA="http://www.opengis.net/gml",sA=/^[\s\xa0]*$/,lA=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.featureType=r.featureType,n.featureNS=r.featureNS,n.srsName=r.srsName,n.schemaLocation="",n.FEATURE_COLLECTION_PARSERS={},n.FEATURE_COLLECTION_PARSERS[n.namespace]={featureMember:qc(n.readFeaturesInternal),featureMembers:Wc(n.readFeaturesInternal)},n.supportedMediaTypes=["application/gml+xml"],n}return oA(e,t),e.prototype.readFeaturesInternal=function(t,e){var n=t.localName,r=null;if("FeatureCollection"==n)r=th([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==n||"featureMember"==n||"member"==n){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,l=t.childNodes.length;s<l;++s){var u=t.childNodes[s];if(1===u.nodeType){var c=u.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",p=0,f=u.namespaceURI;for(var d in a){if(a[d]===f){h=d;break}++p}h||(a[h="p"+p]=f),o.push(h+":"+c)}}}"featureMember"!=n&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var y={},m=Array.isArray(o)?o:[o];for(var v in a){var w={};for(s=0,l=m.length;s<l;++s)(-1===m[s].indexOf(":")?"p0":m[s].split(":")[0])===v&&(w[m[s].split(":").pop()]="featureMembers"==n?qc(this.readFeatureElement,this):Wc(this.readFeatureElement,this));y[a[v]]=w}r=th("featureMember"==n||"member"==n?void 0:[],y,t,e)}return null===r&&(r=[]),r},e.prototype.readGeometryOrExtent=function(t,e){var n=e[0];return n.srsName=t.firstElementChild.getAttribute("srsName"),n.srsDimension=t.firstElementChild.getAttribute("srsDimension"),th(null,this.GEOMETRY_PARSERS,t,e,this)},e.prototype.readExtentElement=function(t,e){var n=e[0],r=this.readGeometryOrExtent(t,e);return r?Ex(r,n):void 0},e.prototype.readGeometryElement=function(t,e){var n=e[0],r=this.readGeometryOrExtent(t,e);return r?_x(r,!1,n):void 0},e.prototype.readFeatureElementInternal=function(t,e,n){for(var r,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=Fc(o,!1),sA.test(a)&&(a=void 0)):(n&&(a="boundedBy"===s?this.readExtentElement(o,e):this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(r=s):a=this.readFeatureElementInternal(o,e,!1)),i[s]?(i[s]instanceof Array||(i[s]=[i[s]]),i[s].push(a)):i[s]=a;var l=o.attributes.length;if(l>0){i[s]={Xp:i[s]};for(var u=0;u<l;u++){var c=o.attributes[u].name;i[s][c]=o.attributes[u].value}}}if(n){var h=new wt(i);r&&h.setGeometryName(r);var p=t.getAttribute("fid")||Gc(t,this.namespace,"id");return p&&h.setId(p),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);if(n)return new vi(n,xt)},e.prototype.readMultiPoint=function(t,e){var n=th([],this.MULTIPOINT_PARSERS,t,e,this);return n?new Vb(n):void 0},e.prototype.readMultiLineString=function(t,e){var n=th([],this.MULTILINESTRING_PARSERS,t,e,this);if(n)return new Qb(n)},e.prototype.readMultiPolygon=function(t,e){var n=th([],this.MULTIPOLYGON_PARSERS,t,e,this);if(n)return new ex(n)},e.prototype.pointMemberParser=function(t,e){$c(this.POINTMEMBER_PARSERS,t,e,this)},e.prototype.lineStringMemberParser=function(t,e){$c(this.LINESTRINGMEMBER_PARSERS,t,e,this)},e.prototype.polygonMemberParser=function(t,e){$c(this.POLYGONMEMBER_PARSERS,t,e,this)},e.prototype.readLineString=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);return n?new Kb(n,xt):void 0},e.prototype.readFlatLinearRing=function(t,e){return th(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);if(n)return new yi(n,xt)},e.prototype.readPolygon=function(t,e){var n=th([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(n&&n[0]){var r,i=n[0],o=[i.length],a=void 0;for(a=1,r=n.length;a<r;++a)b(i,n[a]),o.push(i.length);return new Gi(i,xt,o)}},e.prototype.readFlatCoordinatesFromNode=function(t,e){return th(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var n={featureType:this.featureType,featureNS:this.featureNS};return e&&k(n,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[n])||[]},e.prototype.readProjectionFromNode=function(t){return cr(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(iA);lA.prototype.namespace=aA,lA.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},lA.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},lA.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},lA.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:qc(lA.prototype.pointMemberParser),pointMembers:qc(lA.prototype.pointMemberParser)}},lA.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:qc(lA.prototype.lineStringMemberParser),lineStringMembers:qc(lA.prototype.lineStringMemberParser)}},lA.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:qc(lA.prototype.polygonMemberParser),polygonMembers:qc(lA.prototype.polygonMemberParser)}},lA.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:qc(lA.prototype.readFlatCoordinatesFromNode)}},lA.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:qc(lA.prototype.readLineString)}},lA.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:qc(lA.prototype.readPolygon)}},lA.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Wc(lA.prototype.readFlatLinearRing)}};var uA=lA;function cA(t){return hA(Fc(t,!1))}function hA(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function pA(t){var e=Fc(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function fA(t){return dA(Fc(t,!1))}function dA(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function gA(t){return yA(Fc(t,!1))}function yA(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function mA(t){return Fc(t,!1).trim()}function vA(t,e){EA(t,e?"1":"0")}function wA(t,e){t.appendChild(ah().createCDATASection(e))}function bA(t,e){var n=new Date(1e3*e),r=n.getUTCFullYear()+"-"+Fn(n.getUTCMonth()+1,2)+"-"+Fn(n.getUTCDate(),2)+"T"+Fn(n.getUTCHours(),2)+":"+Fn(n.getUTCMinutes(),2)+":"+Fn(n.getUTCSeconds(),2)+"Z";t.appendChild(ah().createTextNode(r))}function xA(t,e){var n=e.toPrecision();t.appendChild(ah().createTextNode(n))}function _A(t,e){var n=e.toString();t.appendChild(ah().createTextNode(n))}function EA(t,e){t.appendChild(ah().createTextNode(e))}var SA=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CA={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},TA=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[aA].featureMember=qc(n.readFeaturesInternal),n.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",n}return SA(e,t),e.prototype.readFlatCoordinates=function(t,e){var n=Fc(t,!1).replace(/^\s*|\s*$/g,""),r=e[0].srsName,i="enu";if(r){var o=cr(r);o&&(i=o.getAxisOrientation())}for(var a=n.trim().split(/\s+/),s=[],l=0,u=a.length;l<u;l++){var c=a[l].split(/,+/),h=parseFloat(c[0]),p=parseFloat(c[1]),f=3===c.length?parseFloat(c[2]):0;"en"===i.substr(0,2)?s.push(h,p,f):s.push(p,h,f)}return s},e.prototype.readBox=function(t,e){var n=th([null],this.Hp,t,e,this);return be(n[1][0],n[1][1],n[1][3],n[1][4])},e.prototype.innerBoundaryIsParser=function(t,e){var n=th(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)},e.prototype.outerBoundaryIsParser=function(t,e){var n=th(void 0,this.RING_PARSERS,t,e,this);n&&(e[e.length-1][0]=n)},e.prototype.Jp=function(t,e,n){var r,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"MultiLineString"===r&&!0===s&&(r="MultiCurve"),Dc("http://www.opengis.net/gml",r)},e.prototype.writeFeatureElement=function(t,e,n){var r=e.getId();r&&t.setAttribute("fid",r);var i=n[n.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(s.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=Yc(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=Yc(EA)))}}var p=k({},i);p.node=t,nh(p,i.serializers,Zc(void 0,o),l,n,s)},e.prototype.writeCurveOrLineString=function(t,e,n){var r=n[n.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.Kp(t.namespaceURI);t.appendChild(i),this.Yp(i,e,n)}else if("Curve"===t.nodeName){var o=Dc(t.namespaceURI,"segments");t.appendChild(o),this.Zp(o,e,n)}},e.prototype.writeLineStringOrCurveMember=function(t,e,n){var r=this.Jp(e,n);r&&(t.appendChild(r),this.writeCurveOrLineString(r,e,n))},e.prototype.writeMultiCurveOrLineString=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();nh({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.$p,s,n,void 0,this)},e.prototype.writeGeometryElement=function(t,e,n){var r,i=n[n.length-1],o=k({},i);o.node=t,r=Array.isArray(e)?Ex(e,i):_x(e,!0,i),nh(o,this.GEOMETRY_SERIALIZERS,this.Jp,[r],n,void 0,this)},e.prototype.Kp=function(t){var e=Dc(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.Yp=function(t,e,n){for(var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=e.getCoordinates(),s=a.length,l=new Array(s),u=0;u<s;++u){var c=a[u];l[u]=this.Qp(c,o,i)}EA(t,l.join(" "))},e.prototype.Zp=function(t,e,n){var r=Dc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,e,n)},e.prototype.writeSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();nh({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.ty,a,n,void 0,this)}else if("Surface"===t.nodeName){var s=Dc(t.namespaceURI,"patches");t.appendChild(s),this.ny(s,e,n)}},e.prototype.ty=function(t,e,n){var r=e[e.length-1],i=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Dc(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.ny=function(t,e,n){var r=Dc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n)},e.prototype.writeRing=function(t,e,n){var r=Dc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,e,n)},e.prototype.Qp=function(t,e,n){var r="enu";e&&(r=cr(e).getAxisOrientation());var i="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return n&&(i+=","+(t[2]||0)),i},e.prototype.writePoint=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var a=this.Kp(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();EA(a,this.Qp(s,o,i))},e.prototype.writeMultiPoint=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();nh({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS,Zc("pointMember"),a,n,void 0,this)},e.prototype.writePointMember=function(t,e,n){var r=Dc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,e,n)},e.prototype.writeLinearRing=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=this.Kp(t.namespaceURI);t.appendChild(i),this.Yp(i,e,n)},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();nh({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.$p,s,n,void 0,this)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,n){var r=this.Jp(e,n);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n))},e.prototype.writeEnvelope=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];nh({node:t},this.ENVELOPE_SERIALIZERS,Kc,i,n,["lowerCorner","upperCorner"],this)},e.prototype.$p=function(t,e,n){var r=e[e.length-1].node;return Dc("http://www.opengis.net/gml",CA[r.nodeName])},e}(uA);TA.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Wc(TA.prototype.readFlatCoordinates)}},TA.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:TA.prototype.innerBoundaryIsParser,outerBoundaryIs:TA.prototype.outerBoundaryIsParser}},TA.prototype.Hp={"http://www.opengis.net/gml":{coordinates:qc(TA.prototype.readFlatCoordinates)}},TA.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Wc(uA.prototype.readPoint),MultiPoint:Wc(uA.prototype.readMultiPoint),LineString:Wc(uA.prototype.readLineString),MultiLineString:Wc(uA.prototype.readMultiLineString),LinearRing:Wc(uA.prototype.readLinearRing),Polygon:Wc(uA.prototype.readPolygon),MultiPolygon:Wc(uA.prototype.readMultiPolygon),Box:Wc(TA.prototype.readBox)}},TA.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Yc(TA.prototype.writeCurveOrLineString),MultiCurve:Yc(TA.prototype.writeMultiCurveOrLineString),Point:Yc(TA.prototype.writePoint),MultiPoint:Yc(TA.prototype.writeMultiPoint),LineString:Yc(TA.prototype.writeCurveOrLineString),MultiLineString:Yc(TA.prototype.writeMultiCurveOrLineString),LinearRing:Yc(TA.prototype.writeLinearRing),Polygon:Yc(TA.prototype.writeSurfaceOrPolygon),MultiPolygon:Yc(TA.prototype.writeMultiSurfaceOrPolygon),Surface:Yc(TA.prototype.writeSurfaceOrPolygon),MultiSurface:Yc(TA.prototype.writeMultiSurfaceOrPolygon),Envelope:Yc(TA.prototype.writeEnvelope)}},TA.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Yc(TA.prototype.writeLineStringOrCurveMember),curveMember:Yc(TA.prototype.writeLineStringOrCurveMember)}},TA.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Yc(TA.prototype.writeRing),innerBoundaryIs:Yc(TA.prototype.writeRing)}},TA.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Yc(TA.prototype.writePointMember)}},TA.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Yc(TA.prototype.writeSurfaceOrPolygonMember),polygonMember:Yc(TA.prototype.writeSurfaceOrPolygonMember)}},TA.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Yc(EA),upperCorner:Yc(EA)}};var IA=TA,AA=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),PA={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},kA=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).iy=void 0!==r.surface&&r.surface,n.ey=void 0!==r.curve&&r.curve,n.oy=void 0===r.multiCurve||r.multiCurve,n.sy=void 0===r.multiSurface||r.multiSurface,n.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",n.hasZ=void 0!==r.hasZ&&r.hasZ,n}return AA(e,t),e.prototype.readMultiCurve=function(t,e){var n=th([],this.MULTICURVE_PARSERS,t,e,this);return n?new Qb(n):void 0},e.prototype.readMultiSurface=function(t,e){var n=th([],this.MULTISURFACE_PARSERS,t,e,this);if(n)return new ex(n)},e.prototype.curveMemberParser=function(t,e){$c(this.CURVEMEMBER_PARSERS,t,e,this)},e.prototype.surfaceMemberParser=function(t,e){$c(this.SURFACEMEMBER_PARSERS,t,e,this)},e.prototype.readPatch=function(t,e){return th([null],this.PATCHES_PARSERS,t,e,this)},e.prototype.readSegment=function(t,e){return th([null],this.SEGMENTS_PARSERS,t,e,this)},e.prototype.readPolygonPatch=function(t,e){return th([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment=function(t,e){return th([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser=function(t,e){var n=th(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)},e.prototype.exteriorParser=function(t,e){var n=th(void 0,this.RING_PARSERS,t,e,this);n&&(e[e.length-1][0]=n)},e.prototype.readSurface=function(t,e){var n=th([null],this.SURFACE_PARSERS,t,e,this);if(n&&n[0]){var r,i=n[0],o=[i.length],a=void 0;for(a=1,r=n.length;a<r;++a)b(i,n[a]),o.push(i.length);return new Gi(i,xt,o)}},e.prototype.readCurve=function(t,e){var n=th([null],this.CURVE_PARSERS,t,e,this);return n?new Kb(n,xt):void 0},e.prototype.readEnvelope=function(t,e){var n=th([null],this.ENVELOPE_PARSERS,t,e,this);return be(n[1][0],n[1][1],n[2][0],n[2][1])},e.prototype.readFlatPos=function(t,e){for(var n,r=Fc(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];n=i.exec(r);)o.push(parseFloat(n[1])),r=r.substr(n[0].length);if(""===r){var a=e[0].srsName,s="enu";if(a&&(s=cr(a).getAxisOrientation()),"neu"===s){var l,u=void 0;for(u=0,l=o.length;u<l;u+=3){var c=o[u],h=o[u+1];o[u]=h,o[u+1]=c}}var p=o.length;if(2==p&&o.push(0),0!==p)return o}},e.prototype.readFlatPosList=function(t,e){var n=Fc(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],i=r.srsName,o=r.srsDimension,a="enu";i&&(a=cr(i).getAxisOrientation());var s,l,u,c=n.split(/\s+/),h=2;t.getAttribute("srsDimension")?h=yA(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=yA(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=yA(t.parentNode.getAttribute("srsDimension")):o&&(h=yA(o));for(var p=[],f=0,d=c.length;f<d;f+=h)s=parseFloat(c[f]),l=parseFloat(c[f+1]),u=3===h?parseFloat(c[f+2]):0,"en"===a.substr(0,2)?p.push(s,l,u):p.push(l,s,u);return p},e.prototype.uy=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var a=r.srsName,s="enu";a&&(s=cr(a).getAxisOrientation());var l,u=e.getCoordinates();l="en"===s.substr(0,2)?u[0]+" "+u[1]:u[1]+" "+u[0],i&&(l+=" "+(u[2]||0)),EA(t,l)},e.prototype.Qp=function(t,e,n){var r="enu";e&&(r=cr(e).getAxisOrientation());var i="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return n&&(i+=" "+(t[2]||0)),i},e.prototype.hy=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,s=r.srsName,l=e.getCoordinates(),u=l.length,c=new Array(u),h=0;h<u;++h)a=l[h],c[h]=this.Qp(a,s,i);EA(t,c.join(" "))},e.prototype.writePoint=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=Dc(t.namespaceURI,"pos");t.appendChild(i),this.uy(i,e,n)},e.prototype.writeEnvelope=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];nh({node:t},this.ENVELOPE_SERIALIZERS,Kc,i,n,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=Dc(t.namespaceURI,"posList");t.appendChild(i),this.hy(i,e,n)},e.prototype.ty=function(t,e,n){var r=e[e.length-1],i=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Dc(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();nh({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.ty,a,n,void 0,this)}else if("Surface"===t.nodeName){var s=Dc(t.namespaceURI,"patches");t.appendChild(s),this.ny(s,e,n)}},e.prototype.writeCurveOrLineString=function(t,e,n){var r=n[n.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=Dc(t.namespaceURI,"posList");t.appendChild(i),this.hy(i,e,n)}else if("Curve"===t.nodeName){var o=Dc(t.namespaceURI,"segments");t.appendChild(o),this.Zp(o,e,n)}},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();nh({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.$p,s,n,void 0,this)},e.prototype.writeMultiPoint=function(t,e,n){var r=n[n.length-1],i=r.srsName,o=r.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();nh({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,Zc("pointMember"),a,n,void 0,this)},e.prototype.writeMultiCurveOrLineString=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();nh({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.$p,s,n,void 0,this)},e.prototype.writeRing=function(t,e,n){var r=Dc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,e,n)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,n){var r=this.Jp(e,n);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n))},e.prototype.writePointMember=function(t,e,n){var r=Dc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,e,n)},e.prototype.writeLineStringOrCurveMember=function(t,e,n){var r=this.Jp(e,n);r&&(t.appendChild(r),this.writeCurveOrLineString(r,e,n))},e.prototype.ny=function(t,e,n){var r=Dc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n)},e.prototype.Zp=function(t,e,n){var r=Dc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,e,n)},e.prototype.writeGeometryElement=function(t,e,n){var r,i=n[n.length-1],o=k({},i);o.node=t,r=Array.isArray(e)?Ex(e,i):_x(e,!0,i),nh(o,this.GEOMETRY_SERIALIZERS,this.Jp,[r],n,void 0,this)},e.prototype.writeFeatureElement=function(t,e,n){var r=e.getId();r&&t.setAttribute("fid",r);var i=n[n.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(s.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=Yc(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=Yc(EA)))}}var p=k({},i);p.node=t,nh(p,i.serializers,Zc(void 0,o),l,n,s)},e.prototype.ly=function(t,e,n){var r=n[n.length-1],i=r.featureType,o=r.featureNS,a={};a[o]={},a[o][i]=Yc(this.writeFeatureElement,this);var s=k({},r);s.node=t,nh(s,a,Zc(i,o),e,n)},e.prototype.$p=function(t,e,n){var r=e[e.length-1].node;return Dc(this.namespace,PA[r.nodeName])},e.prototype.Jp=function(t,e,n){var r,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,l=i.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"LineString"===r&&!0===s?r="Curve":"MultiLineString"===r&&!0===l&&(r="MultiCurve"),Dc(this.namespace,r)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var n=Dc(this.namespace,"geom"),r={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.ey,surface:this.iy,multiSurface:this.sy,multiCurve:this.oy};return e&&k(r,e),this.writeGeometryElement(n,t,[r]),n},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Dc(this.namespace,"featureMembers");n.setAttributeNS(Rc,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.ey,surface:this.iy,multiSurface:this.sy,multiCurve:this.oy,featureNS:this.featureNS,featureType:this.featureType};return e&&k(r,e),this.ly(n,t,[r]),n},e}(uA);kA.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Wc(kA.prototype.readFlatPos),posList:Wc(kA.prototype.readFlatPosList),coordinates:Wc(IA.prototype.readFlatCoordinates)}},kA.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:kA.prototype.interiorParser,exterior:kA.prototype.exteriorParser}},kA.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Wc(uA.prototype.readPoint),MultiPoint:Wc(uA.prototype.readMultiPoint),LineString:Wc(uA.prototype.readLineString),MultiLineString:Wc(uA.prototype.readMultiLineString),LinearRing:Wc(uA.prototype.readLinearRing),Polygon:Wc(uA.prototype.readPolygon),MultiPolygon:Wc(uA.prototype.readMultiPolygon),Surface:Wc(kA.prototype.readSurface),MultiSurface:Wc(kA.prototype.readMultiSurface),Curve:Wc(kA.prototype.readCurve),MultiCurve:Wc(kA.prototype.readMultiCurve),Envelope:Wc(kA.prototype.readEnvelope)}},kA.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:qc(kA.prototype.curveMemberParser),curveMembers:qc(kA.prototype.curveMemberParser)}},kA.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:qc(kA.prototype.surfaceMemberParser),surfaceMembers:qc(kA.prototype.surfaceMemberParser)}},kA.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:qc(uA.prototype.readLineString),Curve:qc(kA.prototype.readCurve)}},kA.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:qc(uA.prototype.readPolygon),Surface:qc(kA.prototype.readSurface)}},kA.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Wc(kA.prototype.readPatch)}},kA.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Wc(kA.prototype.readSegment)}},kA.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:qc(kA.prototype.readFlatPosList),upperCorner:qc(kA.prototype.readFlatPosList)}},kA.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Wc(kA.prototype.readPolygonPatch)}},kA.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Wc(kA.prototype.readLineStringSegment)}},kA.prototype.writeFeatures,kA.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Yc(kA.prototype.writeRing),interior:Yc(kA.prototype.writeRing)}},kA.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Yc(EA),upperCorner:Yc(EA)}},kA.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Yc(kA.prototype.writeSurfaceOrPolygonMember),polygonMember:Yc(kA.prototype.writeSurfaceOrPolygonMember)}},kA.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Yc(kA.prototype.writePointMember)}},kA.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Yc(kA.prototype.writeLineStringOrCurveMember),curveMember:Yc(kA.prototype.writeLineStringOrCurveMember)}},kA.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Yc(kA.prototype.writeCurveOrLineString),MultiCurve:Yc(kA.prototype.writeMultiCurveOrLineString),Point:Yc(kA.prototype.writePoint),MultiPoint:Yc(kA.prototype.writeMultiPoint),LineString:Yc(kA.prototype.writeCurveOrLineString),MultiLineString:Yc(kA.prototype.writeMultiCurveOrLineString),LinearRing:Yc(kA.prototype.writeLinearRing),Polygon:Yc(kA.prototype.writeSurfaceOrPolygon),MultiPolygon:Yc(kA.prototype.writeMultiSurfaceOrPolygon),Surface:Yc(kA.prototype.writeSurfaceOrPolygon),MultiSurface:Yc(kA.prototype.writeMultiSurfaceOrPolygon),Envelope:Yc(kA.prototype.writeEnvelope)}};var OA=kA,MA=OA;MA.prototype.writeFeatures,MA.prototype.writeFeaturesNode;var NA=MA,LA=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RA=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:n.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",n}return LA(e,t),e}(OA);RA.prototype.namespace="http://www.opengis.net/gml/3.2",RA.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Wc(OA.prototype.readFlatPos),posList:Wc(OA.prototype.readFlatPosList),coordinates:Wc(IA.prototype.readFlatCoordinates)}},RA.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:OA.prototype.interiorParser,exterior:OA.prototype.exteriorParser}},RA.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Wc(uA.prototype.readPoint),MultiPoint:Wc(uA.prototype.readMultiPoint),LineString:Wc(uA.prototype.readLineString),MultiLineString:Wc(uA.prototype.readMultiLineString),LinearRing:Wc(uA.prototype.readLinearRing),Polygon:Wc(uA.prototype.readPolygon),MultiPolygon:Wc(uA.prototype.readMultiPolygon),Surface:Wc(RA.prototype.readSurface),MultiSurface:Wc(OA.prototype.readMultiSurface),Curve:Wc(RA.prototype.readCurve),MultiCurve:Wc(OA.prototype.readMultiCurve),Envelope:Wc(RA.prototype.readEnvelope)}},RA.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:qc(OA.prototype.curveMemberParser),curveMembers:qc(OA.prototype.curveMemberParser)}},RA.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:qc(OA.prototype.surfaceMemberParser),surfaceMembers:qc(OA.prototype.surfaceMemberParser)}},RA.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:qc(uA.prototype.readLineString),Curve:qc(OA.prototype.readCurve)}},RA.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:qc(uA.prototype.readPolygon),Surface:qc(OA.prototype.readSurface)}},RA.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Wc(OA.prototype.readPatch)}},RA.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Wc(OA.prototype.readSegment)}},RA.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:qc(OA.prototype.readFlatPosList),upperCorner:qc(OA.prototype.readFlatPosList)}},RA.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Wc(OA.prototype.readPolygonPatch)}},RA.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Wc(OA.prototype.readLineStringSegment)}},RA.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:qc(uA.prototype.pointMemberParser),pointMembers:qc(uA.prototype.pointMemberParser)}},RA.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:qc(uA.prototype.lineStringMemberParser),lineStringMembers:qc(uA.prototype.lineStringMemberParser)}},RA.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:qc(uA.prototype.polygonMemberParser),polygonMembers:qc(uA.prototype.polygonMemberParser)}},RA.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:qc(uA.prototype.readFlatCoordinatesFromNode)}},RA.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:qc(uA.prototype.readLineString)}},RA.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:qc(uA.prototype.readPolygon)}},RA.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Wc(uA.prototype.readFlatLinearRing)}},RA.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Yc(OA.prototype.writeRing),interior:Yc(OA.prototype.writeRing)}},RA.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Yc(EA),upperCorner:Yc(EA)}},RA.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Yc(OA.prototype.writeSurfaceOrPolygonMember),polygonMember:Yc(OA.prototype.writeSurfaceOrPolygonMember)}},RA.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Yc(OA.prototype.writePointMember)}},RA.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Yc(OA.prototype.writeLineStringOrCurveMember),curveMember:Yc(OA.prototype.writeLineStringOrCurveMember)}},RA.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Yc(OA.prototype.writeCurveOrLineString),MultiCurve:Yc(OA.prototype.writeMultiCurveOrLineString),Point:Yc(RA.prototype.writePoint),MultiPoint:Yc(OA.prototype.writeMultiPoint),LineString:Yc(OA.prototype.writeCurveOrLineString),MultiLineString:Yc(OA.prototype.writeMultiCurveOrLineString),LinearRing:Yc(OA.prototype.writeLinearRing),Polygon:Yc(OA.prototype.writeSurfaceOrPolygon),MultiPolygon:Yc(OA.prototype.writeMultiSurfaceOrPolygon),Surface:Yc(OA.prototype.writeSurfaceOrPolygon),MultiSurface:Yc(OA.prototype.writeMultiSurfaceOrPolygon),Envelope:Yc(OA.prototype.writeEnvelope)}};var DA=RA,FA=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jA=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],zA={rte:fP,trk:dP,wpt:gP},GA=Qc(jA,{rte:qc(fP),trk:qc(dP),wpt:qc(gP)}),BA=Qc(jA,{text:Hc(mA,"linkText"),type:Hc(mA,"linkType")}),UA=Qc(jA,{rte:Yc((function(t,e,n){var r=n[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==St.LINE_STRING){var s=_x(a,!0,r);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var l=n[n.length-1].node,u=QA[l.namespaceURI],c=Jc(i,u);nh(o,$A,Kc,c,n,u)})),trk:Yc((function(t,e,n){var r=n[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==St.MULTI_LINE_STRING){var s=_x(a,!0,r);i.trkseg=s.getLineStrings()}var l=n[n.length-1].node,u=eP[l.namespaceURI],c=Jc(i,u);nh(o,nP,Kc,c,n,u)})),wpt:Yc((function(t,e,n){var r=n[0],i=n[n.length-1];i.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==St.POINT){var a=_x(o,!0,r);i.geometryLayout=a.getLayout(),mP(t,a.getCoordinates(),n)}}))}),qA=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=cr("EPSG:4326"),n.vy=r.readExtensions,n}return FA(e,t),e.prototype.py=function(t){t||(t=[]);for(var e=0,n=t.length;e<n;++e){var r=t[e];if(this.vy){var i=r.get("extensionsNode_")||null;this.vy(r,i)}r.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!m(jA,t.namespaceURI))return null;var n=zA[t.localName];if(!n)return null;var r=n(t,[this.getReadOptions(t,e)]);return r?(this.py([r]),r):null},e.prototype.readFeaturesFromNode=function(t,e){if(!m(jA,t.namespaceURI))return[];if("gpx"==t.localName){var n=th([],GA,t,[this.getReadOptions(t,e)]);return n?(this.py(n),n):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Dc("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Rc),n.setAttributeNS(Rc,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),nh({node:n},UA,lP,t,[e]),n},e}(iA),WA=Qc(jA,{name:Hc(mA),cmt:Hc(mA),desc:Hc(mA),src:Hc(mA),link:hP,number:Hc(gA),extensions:pP,type:Hc(mA),rtept:function(t,e){var n=th({},VA,t,e);if(n){var r=e[e.length-1];uP(r.flatCoordinates,r.layoutOptions,t,n)}}}),VA=Qc(jA,{ele:Hc(fA),time:Hc(pA)}),HA=Qc(jA,{name:Hc(mA),cmt:Hc(mA),desc:Hc(mA),src:Hc(mA),link:hP,number:Hc(gA),type:Hc(mA),extensions:pP,trkseg:function(t,e){var n=e[e.length-1];$c(YA,t,e);var r=n.flatCoordinates;n.ends.push(r.length)}}),YA=Qc(jA,{trkpt:function(t,e){var n=th({},XA,t,e);if(n){var r=e[e.length-1];uP(r.flatCoordinates,r.layoutOptions,t,n)}}}),XA=Qc(jA,{ele:Hc(fA),time:Hc(pA)}),ZA=Qc(jA,{ele:Hc(fA),time:Hc(pA),magvar:Hc(fA),geoidheight:Hc(fA),name:Hc(mA),cmt:Hc(mA),desc:Hc(mA),src:Hc(mA),link:hP,sym:Hc(mA),type:Hc(mA),fix:Hc(mA),sat:Hc(gA),hdop:Hc(fA),vdop:Hc(fA),pdop:Hc(fA),ageofdgpsdata:Hc(fA),dgpsid:Hc(gA),extensions:pP}),KA=["text","type"],JA=Qc(jA,{text:Yc(EA),type:Yc(EA)}),QA=Qc(jA,["name","cmt","desc","src","link","number","type","rtept"]),$A=Qc(jA,{name:Yc(EA),cmt:Yc(EA),desc:Yc(EA),src:Yc(EA),link:Yc(yP),number:Yc(_A),type:Yc(EA),rtept:Xc(Yc(mP))}),tP=Qc(jA,["ele","time"]),eP=Qc(jA,["name","cmt","desc","src","link","number","type","trkseg"]),nP=Qc(jA,{name:Yc(EA),cmt:Yc(EA),desc:Yc(EA),src:Yc(EA),link:Yc(yP),number:Yc(_A),type:Yc(EA),trkseg:Xc(Yc((function(t,e,n){var r={node:t};r.geometryLayout=e.getLayout(),r.properties={},nh(r,iP,rP,e.getCoordinates(),n)})))}),rP=Zc("trkpt"),iP=Qc(jA,{trkpt:Yc(mP)}),oP=Qc(jA,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),aP=Qc(jA,{ele:Yc(xA),time:Yc(bA),magvar:Yc(xA),geoidheight:Yc(xA),name:Yc(EA),cmt:Yc(EA),desc:Yc(EA),src:Yc(EA),link:Yc(yP),sym:Yc(EA),type:Yc(EA),fix:Yc(EA),sat:Yc(_A),hdop:Yc(xA),vdop:Yc(xA),pdop:Yc(xA),ageofdgpsdata:Yc(xA),dgpsid:Yc(_A)}),sP={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function lP(t,e,n){var r=t.getGeometry();if(r){var i=sP[r.getType()];if(i)return Dc(e[e.length-1].node.namespaceURI,i)}}function uP(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function cP(t,e,n){var r=bt,i=2;if(t.hasZ&&t.hasM?(r=Et,i=4):t.hasZ?(r=xt,i=3):t.hasM&&(r=_t,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,n)for(o=0,a=n.length;o<a;o++)n[o]=n[o]/4*i}return r}function hP(t,e){var n=e[e.length-1],r=t.getAttribute("href");null!==r&&(n.link=r),$c(BA,t,e)}function pP(t,e){e[e.length-1].my=t}function fP(t,e){var n=e[0],r=th({flatCoordinates:[],layoutOptions:{}},WA,t,e);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var a=cP(o,i),s=new Kb(i,a);_x(s,!1,n);var l=new wt(s);return l.setProperties(r,!0),l}}function dP(t,e){var n=e[0],r=th({flatCoordinates:[],ends:[],layoutOptions:{}},HA,t,e);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var a=r.layoutOptions;delete r.layoutOptions;var s=cP(a,i,o),l=new Qb(i,s,o);_x(l,!1,n);var u=new wt(l);return u.setProperties(r,!0),u}}function gP(t,e){var n=e[0],r=th({},ZA,t,e);if(r){var i={},o=uP([],i,t,r),a=cP(i,o),s=new vi(o,a);_x(s,!1,n);var l=new wt(s);return l.setProperties(r,!0),l}}function yP(t,e,n){t.setAttribute("href",e);var r=n[n.length-1].properties,i=[r.linkText,r.linkType];nh({node:t},JA,Kc,i,n,KA)}function mP(t,e,n){var r=n[n.length-1],i=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case Et:0!==e[3]&&(o.time=e[3]);case xt:0!==e[2]&&(o.ele=e[2]);break;case _t:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?tP[i]:oP[i],s=Jc(o,a);nh({node:t,properties:o},aP,Kc,s,n,a)}var vP=qA,wP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function bP(t){return"string"==typeof t?t:""}var xP=function(t){function e(){return t.call(this)||this}return wP(e,t),e.prototype.getType=function(){return Pu},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(bP(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return i()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(bP(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return i()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(bP(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return i()},e.prototype.readProjection=function(t){return this.readProjectionFromText(bP(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return i()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return i()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return i()},e}(xx),_P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),EP="none",SP=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,CP=/^H.([A-Z]{3}).*?:(.*)/,TP=/^HFDTE(\d{2})(\d{2})(\d{2})/,IP=/\r\n|\r|\n/,AP=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=cr("EPSG:4326"),n.wy=r.altitudeMode?r.altitudeMode:EP,n}return _P(e,t),e.prototype.readFeatureFromText=function(t,e){var n,r,i=this.wy,o=t.split(IP),a={},s=[],l=2e3,u=0,c=1,h=-1;for(n=0,r=o.length;n<r;++n){var p=o[n],f=void 0;if("B"==p.charAt(0)){if(f=SP.exec(p)){var d=parseInt(f[1],10),g=parseInt(f[2],10),y=parseInt(f[3],10),m=parseInt(f[4],10)+parseInt(f[5],10)/6e4;"S"==f[6]&&(m=-m);var v=parseInt(f[7],10)+parseInt(f[8],10)/6e4;if("W"==f[9]&&(v=-v),s.push(v,m),i!=EP){var w;w="gps"==i?parseInt(f[11],10):"barometric"==i?parseInt(f[12],10):0,s.push(w)}var b=Date.UTC(l,u,c,d,g,y);b<h&&(b=Date.UTC(l,u,c+1,d,g,y)),s.push(b/1e3),h=b}}else"H"==p.charAt(0)&&((f=TP.exec(p))?(c=parseInt(f[1],10),u=parseInt(f[2],10)-1,l=2e3+parseInt(f[3],10)):(f=CP.exec(p))&&(a[f[1]]=f[2].trim()))}if(0===s.length)return null;var x=new Kb(s,i==EP?_t:Et),_=new wt(_x(x,!1,e));return _.setProperties(a,!0),_},e.prototype.readFeaturesFromText=function(t,e){var n=this.readFeatureFromText(t,e);return n?[n]:[]},e}(xP);function PP(t){return(PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var kP,OP,MP,NP,LP,RP,DP,FP,jP,zP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),GP=["http://www.google.com/kml/ext/2.2"],BP=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],UP={fraction:Gp,pixels:Bp,insetPixels:Bp},qP=Qc(BP,{ExtendedData:Fk,Region:jk,MultiGeometry:Hc(Ak,"geometry"),LineString:Hc(Ck,"geometry"),LinearRing:Hc(Tk,"geometry"),Point:Hc(Pk,"geometry"),Polygon:Hc(Ok,"geometry"),Style:Hc(Nk),StyleMap:function(t,e){var n=hk.call(this,t,e);if(n){var r=e[e.length-1];Array.isArray(n)?r.Style=n:"string"==typeof n?r.styleUrl=n:yt(!1,38)}},address:Hc(mA),description:Hc(mA),name:Hc(mA),open:Hc(cA),phoneNumber:Hc(mA),styleUrl:Hc(lk),visibility:Hc(cA)},Qc(GP,{MultiTrack:Hc((function(t,e){var n=th([],vk,t,e);if(n)return new Qb(n)}),"geometry"),Track:Hc(bk,"geometry")})),WP=Qc(BP,{ExtendedData:Fk,Region:jk,Link:function(t,e){$c(VP,t,e)},address:Hc(mA),description:Hc(mA),name:Hc(mA),open:Hc(cA),phoneNumber:Hc(mA),visibility:Hc(cA)}),VP=Qc(BP,{href:Hc(sk)}),HP=Qc(BP,{LatLonAltBox:function(t,e){var n=th({},Bk,t,e);if(n){var r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}},Lod:function(t,e){var n=th({},Uk,t,e);if(n){var r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}}}),YP=Qc(BP,["Document","Placemark"]),XP=Qc(BP,{Document:Yc((function(t,e,n){nh({node:t},Yk,Xk,e,n,void 0,this)})),Placemark:Yc(vO)}),ZP=null,KP=null,JP=null,QP=null,$P=null,tk=null;function ek(t){return 32/Math.min(t[0],t[1])}function nk(t){return t}var rk=function(t){function e(e){var n=t.call(this)||this,r=e||{};return tk||(ZP=new zp({color:kP=[255,255,255,1]}),RP="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",KP=new Qp({anchor:OP=[20,2],anchorOrigin:Up,anchorXUnits:MP=Bp,anchorYUnits:NP=Bp,crossOrigin:"anonymous",rotation:0,scale:ek(LP=[64,64]),size:LP,src:RP}),DP="NO_IMAGE",JP=new $p({color:kP,width:1}),FP=new $p({color:[51,51,51,1],width:2}),QP=new uf({font:"bold 16px Helvetica",fill:ZP,stroke:FP,scale:.8}),$P=new lf({fill:ZP,image:KP,text:QP,stroke:JP,zIndex:0}),tk=[$P]),n.dataProjection=cr("EPSG:4326"),n.gy=r.defaultStyle?r.defaultStyle:tk,n.xy=void 0===r.extractStyles||r.extractStyles,n.jy=void 0===r.writeStyles||r.writeStyles,n.Sy={},n.ky=void 0===r.showPointNames||r.showPointNames,n.Bt=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",n.My=r.iconUrlFunction?r.iconUrlFunction:nk,n.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],n}return zP(e,t),e.prototype._y=function(t,e){return th([],Qc(BP,{Document:Uc(this._y,this),Folder:Uc(this._y,this),Placemark:qc(this.Oy,this),Style:this.Ty.bind(this),StyleMap:this.Ey.bind(this)}),t,e,this)||void 0},e.prototype.Oy=function(t,e){var n=th({geometry:null},qP,t,e,this);if(n){var r=new wt,i=t.getAttribute("id");null!==i&&r.setId(i);var o=e[0],a=n.geometry;if(a&&_x(a,!1,o),r.setGeometry(a),delete n.geometry,this.xy){var s=function(t,e,n,r,i){return function(o,a){var s=i,l="",u=[];if(s){var c=o.getGeometry();if(c)if(c instanceof Rx)s=(u=c.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===St.POINT||e===St.MULTI_POINT}))).length>0;else{var h=c.getType();s=h===St.POINT||h===St.MULTI_POINT}}s&&(l=o.get("name"),(s=s&&!!l)&&l.search(/&[^&]+;/)>-1&&(jP||(jP=document.createElement("textarea")),jP.innerHTML=l,l=jP.value));var p=n;if(t?p=t:e&&(p=ik(e,n,r)),s){var f=function(t,e){var n=[0,0],r="start",i=t.getImage();if(i){var o=i.getSize();if(o&&2==o.length){var a=i.getScaleArray(),s=i.getAnchor();n[0]=a[0]*(o[0]-s[0]),n[1]=a[1]*(o[1]/2-s[1]),r="left"}}var l=t.getText();return l?((l=l.clone()).setFont(l.getFont()||QP.getFont()),l.setScale(l.getScale()||QP.getScale()),l.setFill(l.getFill()||QP.getFill()),l.setStroke(l.getStroke()||FP)):l=QP.clone(),l.setText(e),l.setOffsetX(n[0]),l.setOffsetY(n[1]),l.setTextAlign(r),new lf({image:i,text:l})}(p[0],l);return u.length>0?(f.setGeometry(new Rx(u)),[f,new lf({geometry:p[0].getGeometry(),image:null,fill:p[0].getFill(),stroke:p[0].getStroke(),text:null})].concat(p.slice(1))):f}return p}}(n.Style,n.styleUrl,this.gy,this.Sy,this.ky);r.setStyle(s)}return delete n.Style,r.setProperties(n,!0),r}},e.prototype.Ty=function(t,e){var n=t.getAttribute("id");if(null!==n){var r=Nk.call(this,t,e);if(r){var i,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+n,o).href:"#"+n,this.Sy[i]=r}}},e.prototype.Ey=function(t,e){var n=t.getAttribute("id");if(null!==n){var r=hk.call(this,t,e);if(r){var i,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+n,o).href:"#"+n,this.Sy[i]=r}}},e.prototype.readFeatureFromNode=function(t,e){return m(BP,t.namespaceURI)&&this.Oy(t,[this.getReadOptions(t,e)])||null},e.prototype.readFeaturesFromNode=function(t,e){if(!m(BP,t.namespaceURI))return[];var n,r=t.localName;if("Document"==r||"Folder"==r)return(n=this._y(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==r){var i=this.Oy(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==r){n=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&b(n,a)}return n}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Bc(t);return this.readNameFromDocument(e)}return zc(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var n=this.readNameFromNode(e);if(n)return n}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(m(BP,e.namespaceURI)&&"name"==e.localName)return mA(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var n=e.localName;if(m(BP,e.namespaceURI)&&("Document"==n||"Folder"==n||"Placemark"==n||"kml"==n)){var r=this.readNameFromNode(e);if(r)return r}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var n=Bc(t);b(e,this.readNetworkLinksFromDocument(n))}else zc(t)?b(e,this.readNetworkLinksFromDocument(t)):b(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&b(e,this.readNetworkLinksFromNode(n));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],n=t.firstElementChild;n;n=n.nextElementSibling)if(m(BP,n.namespaceURI)&&"NetworkLink"==n.localName){var r=th({},WP,n,[]);e.push(r)}for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;!m(BP,n.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||b(e,this.readNetworkLinksFromNode(n))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var n=Bc(t);b(e,this.readRegionFromDocument(n))}else zc(t)?b(e,this.readRegionFromDocument(t)):b(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&b(e,this.readRegionFromNode(n));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],n=t.firstElementChild;n;n=n.nextElementSibling)if(m(BP,n.namespaceURI)&&"Region"==n.localName){var r=th({},HP,n,[]);e.push(r)}for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;!m(BP,n.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||b(e,this.readRegionFromNode(n))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Dc(BP[4],"kml"),r="http://www.w3.org/2000/xmlns/";n.setAttributeNS(r,"xmlns:gx",GP[0]),n.setAttributeNS(r,"xmlns:xsi",Rc),n.setAttributeNS(Rc,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:n},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=YP[n.namespaceURI],s=Jc(o,a);return nh(i,XP,Kc,s,[e],a,this),n},e}(iA);function ik(t,e,n){return Array.isArray(t)?t:"string"==typeof t?ik(n[t],e,n):e}function ok(t){var e=Fc(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){var r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function ak(t){var e=Fc(t,!1),n=[];e=e.replace(/\s*,\s*/g,",");for(var r,i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=i.exec(e);){var o=parseFloat(r[1]),a=parseFloat(r[2]),s=r[3]?parseFloat(r[3]):0;n.push(o,a,s),e=e.substr(r[0].length)}if(""===e)return n}function sk(t){var e=Fc(t,!1).trim(),n=t.baseURI;return n&&"about:blank"!=n||(n=window.location.href),n?new URL(e,n).href:e}function lk(t){var e=Fc(t,!1).trim().replace(/^(?!.*#)/,"#"),n=t.baseURI;return n&&"about:blank"!=n||(n=window.location.href),n?new URL(e,n).href:e}function uk(t){return fA(t)}var ck=Qc(BP,{Pair:function(t,e){var n=th({},zk,t,e,this);if(n){var r=n.key;if(r&&"normal"==r){var i=n.styleUrl;i&&(e[e.length-1]=i);var o=n.Style;o&&(e[e.length-1]=o)}}}});function hk(t,e){return th(void 0,ck,t,e,this)}var pk=Qc(BP,{Icon:Hc((function(t,e){return th({},xk,t,e)||null})),color:Hc(ok),heading:Hc(fA),hotSpot:Hc((function(t){var e,n=t.getAttribute("xunits"),r=t.getAttribute("yunits");return e="insetPixels"!==n?"insetPixels"!==r?Up:Wp:"insetPixels"!==r?qp:Vp,{x:parseFloat(t.getAttribute("x")),xunits:UP[n],y:parseFloat(t.getAttribute("y")),yunits:UP[r],origin:e}})),scale:Hc(uk)}),fk=Qc(BP,{color:Hc(ok),scale:Hc(uk)}),dk=Qc(BP,{color:Hc(ok),width:Hc(fA)}),gk=Qc(BP,{color:Hc(ok),fill:Hc(cA),outline:Hc(cA)}),yk=Qc(BP,{coordinates:Wc(ak)});function mk(t,e){return th(null,yk,t,e)}var vk=Qc(GP,{Track:qc(bk)}),wk=Qc(BP,{when:function(t,e){var n=e[e.length-1].whens,r=Fc(t,!1),i=Date.parse(r);n.push(isNaN(i)?0:i)}},Qc(GP,{coord:function(t,e){var n=e[e.length-1].coordinates,r=Fc(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);n.push([o,a,s])}else n.push([])}}));function bk(t,e){var n=th({coordinates:[],whens:[]},wk,t,e);if(n){for(var r=[],i=n.coordinates,o=n.whens,a=0,s=Math.min(i.length,o.length);a<s;++a)3==i[a].length&&r.push(i[a][0],i[a][1],i[a][2],o[a]);return new Kb(r,Et)}}var xk=Qc(BP,{href:Hc(sk)},Qc(GP,{x:Hc(fA),y:Hc(fA),w:Hc(fA),h:Hc(fA)})),_k=Qc(BP,{coordinates:Wc(ak)});function Ek(t,e){return th(null,_k,t,e)}var Sk=Qc(BP,{extrude:Hc(cA),tessellate:Hc(cA),altitudeMode:Hc(mA)});function Ck(t,e){var n=th({},Sk,t,e),r=Ek(t,e);if(r){var i=new Kb(r,xt);return i.setProperties(n,!0),i}}function Tk(t,e){var n=th({},Sk,t,e),r=Ek(t,e);if(r){var i=new Gi(r,xt,[r.length]);return i.setProperties(n,!0),i}}var Ik=Qc(BP,{LineString:qc(Ck),LinearRing:qc(Tk),MultiGeometry:qc(Ak),Point:qc(Pk),Polygon:qc(Ok)});function Ak(t,e){var n,r=th([],Ik,t,e);if(!r)return null;if(0===r.length)return new Rx(r);for(var i=!0,o=r[0].getType(),a=1,s=r.length;a<s;++a)if(r[a].getType()!=o){i=!1;break}if(i){var l=void 0,u=void 0;if(o==St.POINT){var c=r[0];for(l=c.getLayout(),u=c.getFlatCoordinates(),a=1,s=r.length;a<s;++a)b(u,r[a].getFlatCoordinates());Lk(n=new Vb(u,l),r)}else o==St.LINE_STRING?Lk(n=new Qb(r),r):o==St.POLYGON?Lk(n=new ex(r),r):o==St.GEOMETRY_COLLECTION?n=new Rx(r):yt(!1,37)}else n=new Rx(r);return n}function Pk(t,e){var n=th({},Sk,t,e),r=Ek(t,e);if(r){var i=new vi(r,xt);return i.setProperties(n,!0),i}}var kk=Qc(BP,{innerBoundaryIs:function(t,e){var n=th([],qk,t,e);if(n.length>0){var r=e[e.length-1];r.push.apply(r,n)}},outerBoundaryIs:function(t,e){var n=th(void 0,Wk,t,e);n&&(e[e.length-1][0]=n)}});function Ok(t,e){var n=th({},Sk,t,e),r=th([null],kk,t,e);if(r&&r[0]){for(var i=r[0],o=[i.length],a=1,s=r.length;a<s;++a)b(i,r[a]),o.push(i.length);var l=new Gi(i,xt,o);return l.setProperties(n,!0),l}}var Mk=Qc(BP,{IconStyle:function(t,e){var n=th({},pk,t,e);if(n){var r,i,o,a,s=e[e.length-1],l="Icon"in n?n.Icon:{},u=!("Icon"in n)||Object.keys(l).length>0,c=l.href;c?r=c:u&&(r=RP);var h,p=Up,f=n.hotSpot;f?(i=[f.x,f.y],o=f.xunits,a=f.yunits,p=f.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(i=OP,o=MP,a=NP):/arrow-reverse/.test(r)?(i=[54,42],o=MP,a=NP):/paddle/.test(r)&&(i=[32,1],o=MP,a=NP));var d,g=l.x,y=l.y;void 0!==g&&void 0!==y&&(h=[g,y]);var m,v=l.w,w=l.h;void 0!==v&&void 0!==w&&(d=[v,w]);var b=n.heading;void 0!==b&&(m=an(b));var x=n.scale,_=n.color;if(u){r==RP&&(d=LP);var E=new Qp({anchor:i,anchorOrigin:p,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.Bt,offset:h,offsetOrigin:Up,rotation:m,scale:x,size:d,src:this.My(r),color:_}),S=E.getScaleArray()[0],C=E.getSize();if(null===C){var T=E.getImageState();0!==T&&1!==T||(E.listenImageChange((function t(){var e=E.getImageState();if(0!==e&&1!==e){var n=E.getSize();if(n&&2==n.length){var r=ek(n);E.setScale(S*r)}E.unlistenImageChange(t)}})),0===T&&E.load())}else if(2==C.length){var I=ek(C);E.setScale(S*I)}s.imageStyle=E}else s.imageStyle=DP}},LabelStyle:function(t,e){var n=th({},fk,t,e);if(n){var r=e[e.length-1],i=new uf({fill:new zp({color:"color"in n?n.color:kP}),scale:n.scale});r.textStyle=i}},LineStyle:function(t,e){var n=th({},dk,t,e);if(n){var r=e[e.length-1],i=new $p({color:"color"in n?n.color:kP,width:"width"in n?n.width:1});r.strokeStyle=i}},PolyStyle:function(t,e){var n=th({},gk,t,e);if(n){var r=e[e.length-1],i=new zp({color:"color"in n?n.color:kP});r.fillStyle=i;var o=n.fill;void 0!==o&&(r.fill=o);var a=n.outline;void 0!==a&&(r.outline=a)}}});function Nk(t,e){var n=th({},Mk,t,e,this);if(!n)return null;var r,i="fillStyle"in n?n.fillStyle:ZP,o=n.fill;void 0===o||o||(i=null),"imageStyle"in n?n.imageStyle!=DP&&(r=n.imageStyle):r=KP;var a="textStyle"in n?n.textStyle:QP,s="strokeStyle"in n?n.strokeStyle:JP,l=n.outline;return void 0===l||l?[new lf({fill:i,image:r,stroke:s,text:a,zIndex:void 0})]:[new lf({geometry:function(t){var e=t.getGeometry(),n=e.getType();return n===St.GEOMETRY_COLLECTION?new Rx(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e!==St.POLYGON&&e!==St.MULTI_POLYGON}))):n!==St.POLYGON&&n!==St.MULTI_POLYGON?e:void 0},fill:i,image:r,stroke:s,text:a,zIndex:void 0}),new lf({geometry:function(t){var e=t.getGeometry(),n=e.getType();return n===St.GEOMETRY_COLLECTION?new Rx(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===St.POLYGON||e===St.MULTI_POLYGON}))):n===St.POLYGON||n===St.MULTI_POLYGON?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function Lk(t,e){var n,r,i,o=e.length,a=new Array(e.length),s=new Array(e.length),l=new Array(e.length);n=!1,r=!1,i=!1;for(var u=0;u<o;++u){var c=e[u];a[u]=c.get("extrude"),s[u]=c.get("tessellate"),l[u]=c.get("altitudeMode"),n=n||void 0!==a[u],r=r||void 0!==s[u],i=i||l[u]}n&&t.set("extrude",a),r&&t.set("tessellate",s),i&&t.set("altitudeMode",l)}var Rk=Qc(BP,{displayName:Hc(mA),value:Hc(mA)}),Dk=Qc(BP,{Data:function(t,e){var n=t.getAttribute("name");$c(Rk,t,e);var r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==n?r[n]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,e){$c(Gk,t,e)}});function Fk(t,e){$c(Dk,t,e)}function jk(t,e){$c(HP,t,e)}var zk=Qc(BP,{Style:Hc(Nk),key:Hc(mA),styleUrl:Hc(lk)}),Gk=Qc(BP,{SimpleData:function(t,e){var n=t.getAttribute("name");if(null!==n){var r=mA(t);e[e.length-1][n]=r}}}),Bk=Qc(BP,{altitudeMode:Hc(mA),minAltitude:Hc(fA),maxAltitude:Hc(fA),north:Hc(fA),south:Hc(fA),east:Hc(fA),west:Hc(fA)}),Uk=Qc(BP,{minLodPixels:Hc(fA),maxLodPixels:Hc(fA),minFadeExtent:Hc(fA),maxFadeExtent:Hc(fA)}),qk=Qc(BP,{LinearRing:qc(mk)}),Wk=Qc(BP,{LinearRing:Wc(mk)});function Vk(t,e){for(var n=Io(e),r=[255*(4==n.length?n[3]:1),n[2],n[1],n[0]],i=0;i<4;++i){var o=Math.floor(r[i]).toString(16);r[i]=1==o.length?"0"+o:o}EA(t,r.join(""))}var Hk=Qc(BP,{Data:Yc((function(t,e,n){t.setAttribute("name",e.name);var r={node:t},i=e.value;"object"==PP(i)?(null!==i&&i.displayName&&nh(r,Hk,Kc,[i.displayName],n,["displayName"]),null!==i&&i.value&&nh(r,Hk,Kc,[i.value],n,["value"])):nh(r,Hk,Kc,[i],n,["value"])})),value:Yc((function(t,e){EA(t,e)})),displayName:Yc((function(t,e){wA(t,e)}))}),Yk=Qc(BP,{Placemark:Yc(vO)}),Xk=function(t,e,n){return Dc(e[e.length-1].node.namespaceURI,"Placemark")},Zk=Zc("Data"),Kk=Qc(BP,["href"],Qc(GP,["x","y","w","h"])),Jk=Qc(BP,{href:Yc(EA)},Qc(GP,{x:Yc(xA),y:Yc(xA),w:Yc(xA),h:Yc(xA)})),Qk=function(t,e,n){return Dc(GP[0],"gx:"+n)},$k=Qc(BP,["scale","heading","Icon","color","hotSpot"]),tO=Qc(BP,{Icon:Yc((function(t,e,n){var r={node:t},i=n[n.length-1].node,o=Kk[i.namespaceURI],a=Jc(e,o);nh(r,Jk,Kc,a,n,o),a=Jc(e,o=Kk[GP[0]]),nh(r,Jk,Qk,a,n,o)})),color:Yc(Vk),heading:Yc(xA),hotSpot:Yc((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:Yc(AO)}),eO=Qc(BP,["color","scale"]),nO=Qc(BP,{color:Yc(Vk),scale:Yc(AO)}),rO=Qc(BP,["color","width"]),iO=Qc(BP,{color:Yc(Vk),width:Yc(xA)}),oO={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},aO=function(t,e,n){if(t)return Dc(e[e.length-1].node.namespaceURI,oO[t.getType()])},sO=Zc("Point"),lO=Zc("LineString"),uO=Zc("LinearRing"),cO=Zc("Polygon"),hO=Qc(BP,{LineString:Yc(xO),Point:Yc(xO),Polygon:Yc(TO),GeometryCollection:Yc(pO)});function pO(t,e,n){var r,i={node:t},o=e.getType(),a=[];o===St.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach((function(t){var e=t.getType();e===St.MULTI_POINT?a=a.concat(t.getPoints()):e===St.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===St.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===St.POINT||e===St.LINE_STRING||e===St.POLYGON?a.push(t):yt(!1,39)})),r=aO):o===St.MULTI_POINT?(a=e.getPoints(),r=sO):o===St.MULTI_LINE_STRING?(a=e.getLineStrings(),r=lO):o===St.MULTI_POLYGON?(a=e.getPolygons(),r=cO):yt(!1,39),nh(i,hO,r,a,n)}var fO=Qc(BP,{LinearRing:Yc(xO)});function dO(t,e,n){nh({node:t},fO,uO,[e],n)}var gO=Qc(BP,{ExtendedData:Yc((function(t,e,n){for(var r={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)nh(r,Hk,Zk,[{name:i[s],value:o[s]}],n)})),MultiGeometry:Yc(pO),LineString:Yc(xO),LinearRing:Yc(xO),Point:Yc(xO),Polygon:Yc(TO),Style:Yc((function(t,e,n){var r,i={node:t},o={};if(e.pointStyles.length){var a=e.pointStyles[0].getText();a&&(o.LabelStyle=a);var s=e.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(o.IconStyle=s)}e.lineStyles.length&&(r=e.lineStyles[0].getStroke())&&(o.LineStyle=r),e.polyStyles.length&&((r=e.polyStyles[0].getStroke())&&!o.LineStyle&&(o.LineStyle=r),o.PolyStyle=e.polyStyles[0]);var l=n[n.length-1].node,u=PO[l.namespaceURI],c=Jc(o,u);nh(i,kO,Kc,c,n,u)})),address:Yc(EA),description:Yc(EA),name:Yc(EA),open:Yc(vA),phoneNumber:Yc(EA),styleUrl:Yc(EA),visibility:Yc(vA)}),yO=Qc(BP,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),mO=Zc("ExtendedData");function vO(t,e,n){var r={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter((function(t){return!o[t]})),s=e.getStyleFunction();if(s){var l=s(e,0);if(l){var u=Array.isArray(l)?l:[l],c=u;if(e.getGeometry()&&(c=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===St.GEOMETRY_COLLECTION?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===St.POINT||e===St.MULTI_POINT})).length:r===St.POINT||r===St.MULTI_POINT}}))),this.jy){var h=u,p=u;e.getGeometry()&&(h=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===St.GEOMETRY_COLLECTION?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===St.LINE_STRING||e===St.MULTI_LINE_STRING})).length:r===St.LINE_STRING||r===St.MULTI_LINE_STRING}})),p=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===St.GEOMETRY_COLLECTION?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===St.POLYGON||e===St.MULTI_POLYGON})).length:r===St.POLYGON||r===St.MULTI_POLYGON}}))),i.Style={pointStyles:c,lineStyles:h,polyStyles:p}}if(c.length&&void 0===i.name){var f=c[0].getText();f&&(i.name=f.getText())}}}var d=n[n.length-1].node,g=yO[d.namespaceURI],y=Jc(i,g);if(nh(r,gO,Kc,y,n,g),a.length>0){var m=Jc(i,a);nh(r,gO,mO,[{names:a,values:m}],n)}var v=n[0],w=e.getGeometry();w&&(w=_x(w,!0,v)),nh(r,gO,aO,[w],n)}var wO=Qc(BP,["extrude","tessellate","altitudeMode","coordinates"]),bO=Qc(BP,{extrude:Yc(vA),tessellate:Yc(vA),altitudeMode:Yc(EA),coordinates:Yc((function(t,e,n){var r,i=n[n.length-1],o=i.layout,a=i.stride;o==bt||o==_t?r=2:o==xt||o==Et?r=3:yt(!1,34);var s=e.length,l="";if(s>0){l+=e[0];for(var u=1;u<r;++u)l+=","+e[u];for(var c=a;c<s;c+=a)for(l+=" "+e[c],u=1;u<r;++u)l+=","+e[c+u]}EA(t,l)}))});function xO(t,e,n){var r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=r;var a=n[n.length-1].node,s=wO[a.namespaceURI],l=Jc(o,s);nh(i,bO,Kc,l,n,s)}var _O=Qc(BP,["color","fill","outline"]),EO=Qc(BP,{outerBoundaryIs:Yc(dO),innerBoundaryIs:Yc(dO)}),SO=Zc("innerBoundaryIs"),CO=Zc("outerBoundaryIs");function TO(t,e,n){var r=e.getLinearRings(),i=r.shift(),o={node:t};nh(o,EO,SO,r,n),nh(o,EO,CO,[i],n)}var IO=Qc(BP,{color:Yc(Vk),fill:Yc(vA),outline:Yc(vA)});function AO(t,e){xA(t,Math.round(1e6*e)/1e6)}var PO=Qc(BP,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),kO=Qc(BP,{IconStyle:Yc((function(t,e,n){var r={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var u=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(l.x=c[0],l.y=s[1]-(c[1]+a[1])),u&&(u[0]!==a[0]/2||u[1]!==a[1]/2)){var h={x:u[0],xunits:Bp,y:a[1]-u[1],yunits:Bp};i.hotSpot=h}}i.Icon=l;var p=e.getScaleArray()[0],f=a;null===f&&(f=LP),2==f.length&&(p/=ek(f)),1!==p&&(i.scale=p);var d=e.getRotation();0!==d&&(i.heading=d);var g=e.getColor();g&&(i.color=g);var y=n[n.length-1].node,m=$k[y.namespaceURI],v=Jc(i,m);nh(r,tO,Kc,v,n,m)})),LabelStyle:Yc((function(t,e,n){var r={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=n[n.length-1].node,l=eO[s.namespaceURI],u=Jc(i,l);nh(r,nO,Kc,u,n,l)})),LineStyle:Yc((function(t,e,n){var r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=n[n.length-1].node,a=rO[o.namespaceURI],s=Jc(i,a);nh(r,iO,Kc,s,n,a)})),PolyStyle:Yc((function(t,e,n){var r={node:t},i=e.getFill(),o=e.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=n[n.length-1].node,l=_O[s.namespaceURI],u=Jc(a,l);nh(r,IO,Kc,u,n,l)}))}),OO=rk,MO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NO=[null],LO=Qc(NO,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:jO}),RO=Qc(NO,{node:function(t,e){var n=e[0],r=e[e.length-1],i=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[i]=o;var a=th({tags:{}},FO,t,e);if(!N(a.tags)){var s=new vi(o);_x(s,!1,n);var l=new wt(s);void 0!==i&&l.setId(i),l.setProperties(a.tags,!0),r.features.push(l)}},way:function(t,e){var n=th({id:t.getAttribute("id"),ndrefs:[],tags:{}},LO,t,e);e[e.length-1].ways.push(n)}}),DO=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=cr("EPSG:4326"),e}return MO(e,t),e.prototype.readFeaturesFromNode=function(t,e){var n=this.getReadOptions(t,e);if("osm"==t.localName){for(var r=th({nodes:{},ways:[],features:[]},RO,t,[n]),i=0;i<r.ways.length;i++){for(var o=r.ways[i],a=[],s=0,l=o.ndrefs.length;s<l;s++)b(a,r.nodes[o.ndrefs[s]]);var u;_x(u=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Gi(a,bt,[a.length]):new Kb(a,bt),!1,n);var c=new wt(u);void 0!==o.id&&c.setId(o.id),c.setProperties(o.tags,!0),r.features.push(c)}if(r.features)return r.features}return[]},e}(iA),FO=Qc(NO,{tag:jO});function jO(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var zO=DO,GO=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=Bc(t);return this.readFromDocument(e)}return zc(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},t.prototype.readFromNode=function(t){},t}();function BO(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var UO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qO=[null,"http://www.opengis.net/ows/1.1"],WO=Qc(qO,{ServiceIdentification:Hc((function(t,e){return th({},rM,t,e)})),ServiceProvider:Hc((function(t,e){return th({},iM,t,e)})),OperationsMetadata:Hc((function(t,e){return th({},$O,t,e)}))}),VO=function(t){function e(){return t.call(this)||this}return UO(e,t),e.prototype.readFromNode=function(t){return th({},WO,t,[])||null},e}(GO),HO=Qc(qO,{DeliveryPoint:Hc(mA),City:Hc(mA),AdministrativeArea:Hc(mA),PostalCode:Hc(mA),Country:Hc(mA),ElectronicMailAddress:Hc(mA)}),YO=Qc(qO,{Value:Vc((function(t,e){return mA(t)}))}),XO=Qc(qO,{AllowedValues:Hc((function(t,e){return th({},YO,t,e)}))}),ZO=Qc(qO,{Phone:Hc((function(t,e){return th({},tM,t,e)})),Address:Hc((function(t,e){return th({},HO,t,e)}))}),KO=Qc(qO,{HTTP:Hc((function(t,e){return th({},JO,t,e)}))}),JO=Qc(qO,{Get:Vc((function(t,e){var n=BO(t);if(n)return th({href:n},eM,t,e)})),Post:void 0}),QO=Qc(qO,{DCP:Hc((function(t,e){return th({},KO,t,e)}))}),$O=Qc(qO,{Operation:function(t,e){var n=t.getAttribute("name"),r=th({},QO,t,e);r&&(e[e.length-1][n]=r)}}),tM=Qc(qO,{Voice:Hc(mA),Facsimile:Hc(mA)}),eM=Qc(qO,{Constraint:Vc((function(t,e){var n=t.getAttribute("name");if(n)return th({name:n},XO,t,e)}))}),nM=Qc(qO,{IndividualName:Hc(mA),PositionName:Hc(mA),ContactInfo:Hc((function(t,e){return th({},ZO,t,e)}))}),rM=Qc(qO,{Abstract:Hc(mA),AccessConstraints:Hc(mA),Fees:Hc(mA),Title:Hc(mA),ServiceTypeVersion:Hc(mA),ServiceType:Hc(mA)}),iM=Qc(qO,{ProviderName:Hc(mA),ProviderSite:Hc(BO),ServiceContact:Hc((function(t,e){return th({},nM,t,e)}))}),oM=VO,aM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function sM(t,e,n){var r,i=n||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var a=0,s=t.length;a<s;)for(r=0;r<e;++r,++a){var l=t[a],u=l-o[r];o[r]=l,t[a]=u}return uM(t,i)}function lM(t,e,n){var r,i=n||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var a=cM(t,i),s=0,l=a.length;s<l;)for(r=0;r<e;++r,++s)o[r]+=a[s],a[s]=o[r];return a}function uM(t,e){for(var n=e||1e5,r=0,i=t.length;r<i;++r)t[r]=Math.round(t[r]*n);return hM(t)}function cM(t,e){for(var n=e||1e5,r=pM(t),i=0,o=r.length;i<o;++i)r[i]/=n;return r}function hM(t){for(var e=0,n=t.length;e<n;++e){var r=t[e];t[e]=r<0?~(r<<1):r<<1}return fM(t)}function pM(t){for(var e=dM(t),n=0,r=e.length;n<r;++n){var i=e[n];e[n]=1&i?~(i>>1):i>>1}return e}function fM(t){for(var e="",n=0,r=t.length;n<r;++n)e+=gM(t[n]);return e}function dM(t){for(var e=[],n=0,r=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;n|=(31&a)<<r,a<32?(e.push(n),n=0,r=0):r+=5}return e}function gM(t){for(var e,n="";t>=32;)e=63+(32|31&t),n+=String.fromCharCode(e),t>>=5;return e=t+63,n+String.fromCharCode(e)}var yM=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=cr("EPSG:4326"),n.Ay=r.factor?r.factor:1e5,n.Cy=r.geometryLayout?r.geometryLayout:bt,n}return aM(e,t),e.prototype.readFeatureFromText=function(t,e){var n=this.readGeometryFromText(t,e);return new wt(n)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var n=Ur(this.Cy),r=lM(t,n,this.Ay);XI(r,0,r.length,n,r);var i=ui(r,0,r.length,n);return _x(new Kb(i,this.Cy),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var n=t.getGeometry();return n?this.writeGeometryText(n,e):(yt(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var n=(t=_x(t,!0,this.adaptOptions(e))).getFlatCoordinates(),r=t.getStride();return XI(n,0,n.length,r,n),sM(n,r,this.Ay)},e}(xP),mM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vM=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.tv=r.layerName,n.qc=r.layers?r.layers:null,n.dataProjection=cr(r.dataProjection?r.dataProjection:"EPSG:4326"),n}return mM(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var n=t,r=void 0,i=null,o=null;n.transform&&(i=(r=n.transform).scale,o=r.translate);var a=n.arcs;r&&function(t,e,n){for(var r=0,i=t.length;r<i;++r)EM(t[r],e,n)}(a,i,o);var s=[],l=n.objects,u=this.tv,c=void 0;for(var h in l)this.qc&&-1==this.qc.indexOf(h)||("GeometryCollection"===l[h].type?(c=l[h],s.push.apply(s,xM(c,a,i,o,u,h,e))):(c=l[h],s.push(_M(c,a,i,o,u,h,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(jx),wM={Point:function(t,e,n){var r=t.coordinates;return e&&n&&SM(r,e,n),new vi(r)},LineString:function(t,e){var n=bM(t.arcs,e);return new Kb(n)},Polygon:function(t,e){for(var n=[],r=0,i=t.arcs.length;r<i;++r)n[r]=bM(t.arcs[r],e);return new Gi(n)},MultiPoint:function(t,e,n){var r=t.coordinates;if(e&&n)for(var i=0,o=r.length;i<o;++i)SM(r[i],e,n);return new Vb(r)},MultiLineString:function(t,e){for(var n=[],r=0,i=t.arcs.length;r<i;++r)n[r]=bM(t.arcs[r],e);return new Qb(n)},MultiPolygon:function(t,e){for(var n=[],r=0,i=t.arcs.length;r<i;++r){for(var o=t.arcs[r],a=[],s=0,l=o.length;s<l;++s)a[s]=bM(o[s],e);n[r]=a}return new ex(n)}};function bM(t,e){for(var n,r=[],i=0,o=t.length;i<o;++i)if(n=t[i],i>0&&r.pop(),n>=0)for(var a=0,s=(l=e[n]).length;a<s;++a)r.push(l[a].slice(0));else{var l;for(a=(l=e[~n]).length-1;a>=0;--a)r.push(l[a].slice(0))}return r}function xM(t,e,n,r,i,o,a){for(var s=t.geometries,l=[],u=0,c=s.length;u<c;++u)l[u]=_M(s[u],e,n,r,i,o,a);return l}function _M(t,e,n,r,i,o,a){var s=null,l=t.type;if(l){var u=wM[l];s=_x(s="Point"===l||"MultiPoint"===l?u(t,n,r):u(t,e),!1,a)}var c=new wt({geometry:s});void 0!==t.id&&c.setId(t.id);var h=t.properties;return i&&(h||(h={}),h[i]=o),h&&c.setProperties(h,!0),c}function EM(t,e,n){for(var r=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];r+=s[0],i+=s[1],s[0]=r,s[1]=i,SM(s,e,n)}}function SM(t,e,n){t[0]=t[0]*e[0]+n[0],t[1]=t[1]*e[1]+n[1]}var CM=vM,TM=function(){function t(t){this.Ry=t}return t.prototype.getTagName=function(){return this.Ry},t}(),IM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AM=function(t){function e(e,n){var r=t.call(this,e)||this;return r.conditions=n,yt(r.conditions.length>=2,57),r}return IM(e,t),e}(TM),PM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kM=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return PM(e,t),e}(AM),OM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MM=function(t){function e(e,n,r){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=n,4!==n.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=r,i}return OM(e,t),e}(TM),NM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LM=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.geometryName=n||"the_geom",o.geometry=r,o.srsName=i,o}return NM(e,t),e}(TM),RM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DM=function(t){function e(e,n,r){return t.call(this,"Contains",e,n,r)||this}return RM(e,t),e}(LM),FM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jM=function(t){function e(e,n,r,i,o){var a=t.call(this,"DWithin",e,n,o)||this;return a.distance=r,a.unit=i,a}return FM(e,t),e}(LM),zM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),GM=function(t){function e(e,n,r){return t.call(this,"Disjoint",e,n,r)||this}return zM(e,t),e}(LM),BM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UM=function(t){function e(e,n){var r=t.call(this,e)||this;return r.propertyName=n,r}return BM(e,t),e}(TM),qM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),WM=function(t){function e(e,n,r){var i=t.call(this,"During",e)||this;return i.begin=n,i.end=r,i}return qM(e,t),e}(UM),VM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HM=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.expression=r,o.matchCase=i,o}return VM(e,t),e}(UM),YM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XM=function(t){function e(e,n,r){return t.call(this,"PropertyIsEqualTo",e,n,r)||this}return YM(e,t),e}(HM),ZM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KM=function(t){function e(e,n){return t.call(this,"PropertyIsGreaterThan",e,n)||this}return ZM(e,t),e}(HM),JM=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QM=function(t){function e(e,n){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,n)||this}return JM(e,t),e}(HM),$M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tN=function(t){function e(e,n,r){return t.call(this,"Intersects",e,n,r)||this}return $M(e,t),e}(LM),eN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nN=function(t){function e(e,n,r){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=n,i.upperBoundary=r,i}return eN(e,t),e}(UM),rN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iN=function(t){function e(e,n,r,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=n,s.wildCard=void 0!==r?r:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return rN(e,t),e}(UM),oN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aN=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return oN(e,t),e}(UM),sN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lN=function(t){function e(e,n){return t.call(this,"PropertyIsLessThan",e,n)||this}return sN(e,t),e}(HM),uN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cN=function(t){function e(e,n){return t.call(this,"PropertyIsLessThanOrEqualTo",e,n)||this}return uN(e,t),e}(HM),hN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pN=function(t){function e(e){var n=t.call(this,"Not")||this;return n.condition=e,n}return hN(e,t),e}(TM),fN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dN=function(t){function e(e,n,r){return t.call(this,"PropertyIsNotEqualTo",e,n,r)||this}return fN(e,t),e}(HM),gN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yN=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return gN(e,t),e}(AM),mN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vN=function(t){function e(e){var n=t.call(this,"ResourceId")||this;return n.rid=e,n}return mN(e,t),e}(TM),wN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bN=function(t){function e(e,n,r){return t.call(this,"Within",e,n,r)||this}return wN(e,t),e}(LM);function xN(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(kM,e))}function _N(t,e,n){return new MM(t,e,n)}var EN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SN={"http://www.opengis.net/gml":{boundedBy:Hc(uA.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:qc(uA.prototype.readFeaturesInternal)}},CN={"http://www.opengis.net/wfs":{totalInserted:Hc(gA),totalUpdated:Hc(gA),totalDeleted:Hc(gA)},"http://www.opengis.net/wfs/2.0":{totalInserted:Hc(gA),totalUpdated:Hc(gA),totalDeleted:Hc(gA)}},TN={"http://www.opengis.net/wfs":{TransactionSummary:Hc(jN,"transactionSummary"),InsertResults:Hc(UN,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Hc(jN,"transactionSummary"),InsertResults:Hc(UN,"insertIds")}},IN={"http://www.opengis.net/wfs":{PropertyName:Yc(EA)},"http://www.opengis.net/wfs/2.0":{PropertyName:Yc(EA)}},AN={"http://www.opengis.net/wfs":{Insert:Yc(qN),Update:Yc(YN),Delete:Yc(HN),Property:Yc(XN),Native:Yc(ZN)},"http://www.opengis.net/wfs/2.0":{Insert:Yc(qN),Update:Yc(YN),Delete:Yc(HN),Property:Yc(XN),Native:Yc(ZN)}},PN="feature",kN="http://www.w3.org/2000/xmlns/",ON={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},MN={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},NN={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},LN={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},RN={"2.0.0":DA,"1.1.0":OA,"1.0.0":IA},DN=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.sh=r.version?r.version:"1.1.0",n.Py=r.featureType,n.Iy=r.featureNS,n.Ny=r.gmlFormat?r.gmlFormat:new RN[n.sh],n.zy=r.schemaLocation?r.schemaLocation:LN[n.sh],n}return EN(e,t),e.prototype.getFeatureType=function(){return this.Py},e.prototype.setFeatureType=function(t){this.Py=t},e.prototype.readFeaturesFromNode=function(t,e){var n={node:t};k(n,{featureType:this.Py,featureNS:this.Iy}),k(n,this.getReadOptions(t,e||{}));var r=[n],i=th([],"2.0.0"===this.sh?SN:this.Ny.FEATURE_COLLECTION_PARSERS,t,r,this.Ny);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Bc(t);return this.readTransactionResponseFromDocument(e)}return zc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Bc(t);return this.readFeatureCollectionMetadataFromDocument(e)}return zc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},n=yA(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=n,th(e,SN,t,[],this.Ny)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return th({},TN,t,[])},e.prototype.writeGetFeature=function(t){var e=this,n=Dc(MN[this.sh],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.sh),t.handle&&n.setAttribute("handle",t.handle),t.outputFormat&&n.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&n.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&n.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&n.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&n.setAttribute("count",String(t.count)),void 0!==t.viewParams&&n.setAttribute("viewParams",t.viewParams),n.setAttributeNS(Rc,"xsi:schemaLocation",this.zy);var r={node:n};if(k(r,{version:this.sh,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.Iy,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),yt(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var i=t.filter;t.bbox&&(yt(t.geometryName,12),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),k(r,{geometryName:t.geometryName,filter:i}),fL(n,t.featureTypes,[r])}else t.featureTypes.forEach((function(i){var o=e.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);k(r,{geometryName:i.geometryName,filter:o}),fL(n,[i.name],[r])}));return n},e.prototype.combineBboxAndFilter=function(t,e,n,r){var i=_N(t,e,n);return r?xN(r,i):i},e.prototype.writeTransaction=function(t,e,n,r){var i,o=[],a=r.version?r.version:this.sh,s=Dc(MN[a],"Transaction");s.setAttribute("service","WFS"),s.setAttribute("version",a),r&&(i=r.gmlOptions?r.gmlOptions:{},r.handle&&s.setAttribute("handle",r.handle)),s.setAttributeNS(Rc,"xsi:schemaLocation",LN[a]);var l=function(t,e,n,r){var i,o=r.featurePrefix?r.featurePrefix:PN;return"1.0.0"===n?i=2:"1.1.0"===n?i=3:"2.0.0"===n&&(i=3.2),k({node:t},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:i,hasZ:r.hasZ,srsName:r.srsName},e)}(s,i,a,r);return t&&FN("Insert",t,o,l),e&&FN("Update",e,o,l),n&&FN("Delete",n,o,l),r.nativeElements&&FN("Native",r.nativeElements,o,l),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var n=[{}];return this.Ny.readGeometryElement(e,n),cr(n.pop().srsName)}return null},e}(iA);function FN(t,e,n,r){nh(r,AN,Zc(t),e,n)}function jN(t,e){return th({},CN,t,e)}var zN={"http://www.opengis.net/ogc":{FeatureId:qc((function(t,e){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:qc((function(t,e){return t.getAttribute("fid")}))}};function GN(t,e){$c(zN,t,e)}var BN={"http://www.opengis.net/wfs":{Feature:GN},"http://www.opengis.net/wfs/2.0":{Feature:GN}};function UN(t,e){return th([],BN,t,e)}function qN(t,e,n){var r=n[n.length-1],i=r.featureType,o=r.featureNS,a=r.gmlVersion,s=Dc(o,i);t.appendChild(s),2===a?IA.prototype.writeFeatureElement(s,e,n):3===a?OA.prototype.writeFeatureElement(s,e,n):DA.prototype.writeFeatureElement(s,e,n)}function WN(t,e,n){var r=n[n.length-1].version,i=ON[r],o=Dc(i,"Filter"),a=Dc(i,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),t.appendChild(o)}function VN(t,e){var n=(t=t||PN)+":";return 0===e.indexOf(n)?e:n+e}function HN(t,e,n){var r=n[n.length-1];yt(void 0!==e.getId(),26);var i=r.featureType,o=r.featurePrefix,a=r.featureNS,s=VN(o,i);t.setAttribute("typeName",s),t.setAttributeNS(kN,"xmlns:"+o,a);var l=e.getId();void 0!==l&&WN(t,l,n)}function YN(t,e,n){var r=n[n.length-1];yt(void 0!==e.getId(),27);var i=r.version,o=r.featureType,a=r.featurePrefix,s=r.featureNS,l=VN(a,o),u=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(kN,"xmlns:"+a,s);var c=e.getId();if(void 0!==c){for(var h=e.getKeys(),p=[],f=0,d=h.length;f<d;f++){var g=e.get(h[f]);if(void 0!==g){var y=h[f];g&&"function"==typeof g.getSimplifiedGeometry&&(y=u),p.push({name:y,value:g})}}nh({version:i,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},AN,Zc("Property"),p,n),WN(t,c,n)}}function XN(t,e,n){var r=n[n.length-1],i=r.version,o=MN[i],a=Dc(o,"Name"),s=r.gmlVersion;if(t.appendChild(a),EA(a,e.name),void 0!==e.value&&null!==e.value){var l=Dc(o,"Value");t.appendChild(l),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===s?IA.prototype.writeGeometryElement(l,e.value,n):3===s?OA.prototype.writeGeometryElement(l,e.value,n):DA.prototype.writeGeometryElement(l,e.value,n):EA(l,e.value)}}function ZN(t,e,n){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&EA(t,e.value)}var KN={"http://www.opengis.net/wfs":{Query:Yc(JN)},"http://www.opengis.net/wfs/2.0":{Query:Yc(JN)},"http://www.opengis.net/ogc":{During:Yc(nL),And:Yc(rL),Or:Yc(rL),Not:Yc(iL),BBOX:Yc($N),Contains:Yc(tL),Intersects:Yc(tL),Within:Yc(tL),DWithin:Yc(eL),PropertyIsEqualTo:Yc(oL),PropertyIsNotEqualTo:Yc(oL),PropertyIsLessThan:Yc(oL),PropertyIsLessThanOrEqualTo:Yc(oL),PropertyIsGreaterThan:Yc(oL),PropertyIsGreaterThanOrEqualTo:Yc(oL),PropertyIsNull:Yc(aL),PropertyIsBetween:Yc(sL),PropertyIsLike:Yc(lL)},"http://www.opengis.net/fes/2.0":{During:Yc(nL),And:Yc(rL),Or:Yc(rL),Not:Yc(iL),BBOX:Yc($N),Contains:Yc(tL),Disjoint:Yc(tL),Intersects:Yc(tL),ResourceId:Yc((function(t,e,n){t.setAttribute("rid",e.rid)})),Within:Yc(tL),DWithin:Yc(eL),PropertyIsEqualTo:Yc(oL),PropertyIsNotEqualTo:Yc(oL),PropertyIsLessThan:Yc(oL),PropertyIsLessThanOrEqualTo:Yc(oL),PropertyIsGreaterThan:Yc(oL),PropertyIsGreaterThanOrEqualTo:Yc(oL),PropertyIsNull:Yc(aL),PropertyIsBetween:Yc(sL),PropertyIsLike:Yc(lL)}};function JN(t,e,n){var r,i,o=n[n.length-1],a=o.version,s=o.featurePrefix,l=o.featureNS,u=o.propertyNames,c=o.srsName;r=s?VN(s,e):e,i="2.0.0"===a?"typeNames":"typeName",t.setAttribute(i,r),c&&t.setAttribute("srsName",c),l&&t.setAttributeNS(kN,"xmlns:"+s,l);var h=k({},o);h.node=t,nh(h,IN,Zc("PropertyName"),u,n);var p=o.filter;if(p){var f=Dc(dL(a),"Filter");t.appendChild(f),QN(f,p,n)}}function QN(t,e,n){var r=n[n.length-1],i={node:t};k(i,{context:r}),nh(i,KN,Zc(e.getTagName()),[e],n)}function $N(t,e,n){var r=n[n.length-1],i=r.context.version;r.srsName=e.srsName;var o=RN[i];hL(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.extent,n)}function tL(t,e,n){var r=n[n.length-1],i=r.context.version;r.srsName=e.srsName;var o=RN[i];hL(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.geometry,n)}function eL(t,e,n){var r=n[n.length-1].context.version;tL(t,e,n);var i=Dc(dL(r),"Distance");EA(i,e.distance.toString()),"2.0.0"===r?i.setAttribute("uom",e.unit):i.setAttribute("units",e.unit),t.appendChild(i)}function nL(t,e,n){var r=n[n.length-1].context.version;uL(NN[r],"ValueReference",t,e.propertyName);var i=Dc(aA,"TimePeriod");t.appendChild(i);var o=Dc(aA,"begin");i.appendChild(o),pL(o,e.begin);var a=Dc(aA,"end");i.appendChild(a),pL(a,e.end)}function rL(t,e,n){var r=n[n.length-1].context,i={node:t};k(i,{context:r});for(var o=e.conditions,a=0,s=o.length;a<s;++a){var l=o[a];nh(i,KN,Zc(l.getTagName()),[l],n)}}function iL(t,e,n){var r=n[n.length-1].context,i={node:t};k(i,{context:r});var o=e.condition;nh(i,KN,Zc(o.getTagName()),[o],n)}function oL(t,e,n){var r=n[n.length-1].context.version;void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),hL(r,t,e.propertyName),cL(r,t,""+e.expression)}function aL(t,e,n){hL(n[n.length-1].context.version,t,e.propertyName)}function sL(t,e,n){var r=n[n.length-1].context.version,i=dL(r);hL(r,t,e.propertyName);var o=Dc(i,"LowerBoundary");t.appendChild(o),cL(r,o,""+e.lowerBoundary);var a=Dc(i,"UpperBoundary");t.appendChild(a),cL(r,a,""+e.upperBoundary)}function lL(t,e,n){var r=n[n.length-1].context.version;t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),hL(r,t,e.propertyName),cL(r,t,""+e.pattern)}function uL(t,e,n,r){var i=Dc(t,e);EA(i,r),n.appendChild(i)}function cL(t,e,n){uL(dL(t),"Literal",e,n)}function hL(t,e,n){"2.0.0"===t?uL(NN[t],"ValueReference",e,n):uL(ON[t],"PropertyName",e,n)}function pL(t,e){var n=Dc(aA,"TimeInstant");t.appendChild(n);var r=Dc(aA,"timePosition");n.appendChild(r),EA(r,e)}function fL(t,e,n){var r=n[n.length-1],i=k({},r);i.node=t,nh(i,KN,Zc("Query"),e,n)}function dL(t){return"2.0.0"===t?NN[t]:ON[t]}var gL=DN,yL=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mL=function(){function t(t){this.Fy=t,this.Ly=0,this.Gy=!1,this.Dy=!1,this.Uy=!1,this.qy=!1,this.By=null,this.Wy=bt}return t.prototype.readUint8=function(){return this.Fy.getUint8(this.Ly++)},t.prototype.readUint32=function(t){return this.Fy.getUint32((this.Ly+=4)-4,void 0!==t?t:this.Dy)},t.prototype.readDouble=function(t){return this.Fy.getFloat64((this.Ly+=8)-8,void 0!==t?t:this.Dy)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.Uy&&t.push(this.readDouble()),this.qy&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),e=[],n=0;n<t;n++)e.push(this.readPoint());return e},t.prototype.readPolygon=function(){for(var t=this.readUint32(),e=[],n=0;n<t;n++)e.push(this.readLineString());return e},t.prototype.readWkbHeader=function(t){var e=this.readUint8()>0,n=this.readUint32(e),r=Math.floor((268435455&n)/1e3),i=Boolean(2147483648&n)||1===r||3===r,o=Boolean(1073741824&n)||2===r||3===r,a=Boolean(536870912&n),s=(268435455&n)%1e3,l=["XY",i?"Z":"",o?"M":""].join(""),u=a?this.readUint32(e):null;if(void 0!==t&&t!==s)throw new Error("Unexpected WKB geometry type "+s);if(this.Gy){if(this.Dy!==e)throw new Error("Inconsistent endian");if(this.Wy!==l)throw new Error("Inconsistent geometry layout");if(u&&this.By!==u)throw new Error("Inconsistent coordinate system (SRID)")}else this.Dy=e,this.Uy=i,this.qy=o,this.Wy=l,this.By=u,this.Gy=!0;return s},t.prototype.readWkbPayload=function(t){switch(t){case 1:return this.readPoint();case 2:return this.readLineString();case 3:case 17:return this.readPolygon();case 4:return this.readMultiPoint();case 5:return this.readMultiLineString();case 6:case 15:case 16:return this.readMultiPolygon();case 7:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,e){for(var n=this.readUint32(),r=[],i=0;i<n;i++){var o=t.call(this,e);o&&r.push(o)}return r},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,1)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,2)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,3)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),e=this.readWkbPayload(t);switch(t){case 1:return new vi(e,this.Wy);case 2:return new Kb(e,this.Wy);case 3:case 17:return new Gi(e,this.Wy);case 4:return new Vb(e,this.Wy);case 5:return new Qb(e,this.Wy);case 6:case 15:case 16:return new ex(e,this.Wy);case 7:return new Rx(e);default:return null}},t.prototype.getSrid=function(){return this.By},t}(),vL=function(){function t(t){t=t||{},this.Wy=t.layout,this.Dy=!1!==t.littleEndian,this.Vy=!1!==t.ewkb,this.Xy=[],this.Hy=k({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.Xy.push([1,t])},t.prototype.writeUint32=function(t){this.Xy.push([4,t])},t.prototype.writeDouble=function(t){this.Xy.push([8,t])},t.prototype.writePoint=function(t,e){for(var n=k.apply(null,e.split("").map((function(e,n){var r;return(r={})[e]=t[n],r}))),r=0,i=this.Wy;r<i.length;r++){var o=i[r];this.writeDouble(o in n?n[o]:this.Hy[o])}},t.prototype.writeLineString=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writePoint(t[n],e)},t.prototype.writePolygon=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeLineString(t[n],e)},t.prototype.writeWkbHeader=function(t,e){t%=1e3,this.Wy.indexOf("Z")>=0&&(t+=this.Vy?2147483648:1e3),this.Wy.indexOf("M")>=0&&(t+=this.Vy?1073741824:2e3),this.Vy&&Number.isInteger(e)&&(t|=536870912),this.writeUint8(this.Dy?1:0),this.writeUint32(t),this.Vy&&Number.isInteger(e)&&this.writeUint32(e)},t.prototype.writeMultiPoint=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeWkbHeader(1),this.writePoint(t[n],e)},t.prototype.writeMultiLineString=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeWkbHeader(2),this.writeLineString(t[n],e)},t.prototype.writeMultiPolygon=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeWkbHeader(3),this.writePolygon(t[n],e)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var e=0;e<t.length;e++)this.writeGeometry(t[e])},t.prototype.findMinimumLayout=function(t,e){var n,r;if(void 0===e&&(e=Et),t instanceof Wr)return(n=t.getLayout())===(r=e)?n:n===Et?r:r===Et?n:bt;if(t instanceof Rx)for(var i=t.getGeometriesArray(),o=0;o<i.length&&e!==bt;o++)e=this.findMinimumLayout(i[o],e);return e},t.prototype.writeGeometry=function(t,e){var n,r,i=((n={})[St.POINT]=1,n[St.LINE_STRING]=2,n[St.POLYGON]=3,n[St.MULTI_POINT]=4,n[St.MULTI_LINE_STRING]=5,n[St.MULTI_POLYGON]=6,n[St.GEOMETRY_COLLECTION]=7,n),o=t.getType(),a=i[o];if(!a)throw new Error("GeometryType "+o+" is not supported");this.Wy||(this.Wy=this.findMinimumLayout(t)),this.writeWkbHeader(a,e),t instanceof Wr?((r={})[St.POINT]=this.writePoint,r[St.LINE_STRING]=this.writeLineString,r[St.POLYGON]=this.writePolygon,r[St.MULTI_POINT]=this.writeMultiPoint,r[St.MULTI_LINE_STRING]=this.writeMultiLineString,r[St.MULTI_POLYGON]=this.writeMultiPolygon,r)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof Rx&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,e=this.Xy.reduce((function(t,e){return t+e[0]}),0),n=new ArrayBuffer(e),r=new DataView(n),i=0;return this.Xy.forEach((function(e){switch(e[0]){case 1:r.setUint8(i,e[1]);break;case 4:r.setUint32(i,e[1],t.Dy);break;case 8:r.setFloat64(i,e[1],t.Dy)}i+=e[0]})),n},t}();function wL(t){return"string"==typeof t?function(t){for(var e=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)e[n]=parseInt(t.substr(2*n,2),16);return new DataView(e.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var bL=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.splitCollection=Boolean(r.splitCollection),n.Jy=null,n.Ky=!1!==r.hex,n.Yy=!1!==r.littleEndian,n.Zy=!1!==r.ewkb,n.Wy=r.geometryLayout,n.$y=r.nodataZ||0,n.Qy=r.nodataM||0,n.By=r.srid,n}return yL(e,t),e.prototype.getType=function(){return this.Ky?Pu:Iu},e.prototype.readFeature=function(t,e){return new wt({geometry:this.readGeometry(t,e)})},e.prototype.readFeatures=function(t,e){var n=this.readGeometry(t,e);return(this.splitCollection&&n instanceof Rx?n.getGeometriesArray():[n]).map((function(t){return new wt({geometry:t})}))},e.prototype.readGeometry=function(t,e){var n=wL(t);if(!n)return null;var r=new mL(n).readGeometry();this.Jy=n;var i=this.getReadOptions(t,e);return this.Jy=null,_x(r,!1,i)},e.prototype.readProjection=function(t){var e=this.Jy||wL(t);if(e){var n=new mL(e);return n.readWkbHeader(),n.getSrid()&&cr("EPSG:"+n.getSrid())||void 0}},e.prototype.writeFeature=function(t,e){return this.writeGeometry(t.getGeometry(),e)},e.prototype.writeFeatures=function(t,e){return this.writeGeometry(new Rx(t.map((function(t){return t.getGeometry()}))),e)},e.prototype.writeGeometry=function(t,e){var n=this.adaptOptions(e),r=new vL({layout:this.Wy,littleEndian:this.Yy,ewkb:this.Zy,nodata:{Z:this.$y,M:this.Qy}}),i=Number.isInteger(this.By)?Number(this.By):null;if(!1!==this.By&&!Number.isInteger(this.By)){var o=n.dataProjection&&cr(n.dataProjection);if(o){var a=o.getCode();0===a.indexOf("EPSG:")&&(i=Number(a.substring(5)))}}r.writeGeometry(_x(t,!0,n),i);var s=r.getBuffer();return this.Ky?function(t){var e=new Uint8Array(t);return Array.from(e.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(s):s},e}(xx),xL=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_L={POINT:vi,LINESTRING:Kb,POLYGON:Gi,MULTIPOINT:Vb,MULTILINESTRING:Qb,MULTIPOLYGON:ex},EL="EMPTY",SL={};for(var CL in St)SL[CL]=St[CL].toUpperCase();var TL=function(){function t(t){this.wkt=t,this.tm=-1}return t.prototype.nm=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.im=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.rm=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.om=function(){return this.wkt.charAt(++this.tm)},t.prototype.nextToken=function(){var t,e=this.om(),n=this.tm,r=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.im(e)||"-"==e)t=4,r=this.sm();else if(this.nm(e))t=1,r=this.am();else{if(this.rm(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:n,value:r,type:t}},t.prototype.sm=function(){var t,e=this.tm,n=!1,r=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(r=!0),t=this.om()}while(this.im(t,n)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.tm--))},t.prototype.am=function(){var t,e=this.tm;do{t=this.om()}while(this.nm(t));return this.wkt.substring(e,this.tm--).toUpperCase()},t}(),IL=function(){function t(t){this.um=t,this.hm={position:0,type:0},this.Wy=bt}return t.prototype.fm=function(){this.hm=this.um.nextToken()},t.prototype.isTokenType=function(t){return this.hm.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.fm(),e},t.prototype.parse=function(){return this.fm(),this.lm()},t.prototype.vm=function(){var t=bt,e=this.hm;if(this.isTokenType(1)){var n=e.value;"Z"===n?t=xt:"M"===n?t=_t:"ZM"===n&&(t=Et),t!==bt&&this.fm()}return t},t.prototype.dm=function(){if(this.match(2)){var t=[];do{t.push(this.lm())}while(this.match(5));if(this.match(3))return t}throw new Error(this.pm())},t.prototype.ym=function(){if(this.match(2)){var t=this.wm();if(this.match(3))return t}throw new Error(this.pm())},t.prototype.bm=function(){if(this.match(2)){var t=this.gm();if(this.match(3))return t}throw new Error(this.pm())},t.prototype.xm=function(){if(this.match(2)){var t=this.jm();if(this.match(3))return t}throw new Error(this.pm())},t.prototype.Sm=function(){if(this.match(2)){var t;if(t=2==this.hm.type?this.km():this.gm(),this.match(3))return t}throw new Error(this.pm())},t.prototype.Mm=function(){if(this.match(2)){var t=this.jm();if(this.match(3))return t}throw new Error(this.pm())},t.prototype._m=function(){if(this.match(2)){var t=this.Om();if(this.match(3))return t}throw new Error(this.pm())},t.prototype.wm=function(){for(var t=[],e=this.Wy.length,n=0;n<e;++n){var r=this.hm;if(!this.match(4))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.pm())},t.prototype.gm=function(){for(var t=[this.wm()];this.match(5);)t.push(this.wm());return t},t.prototype.km=function(){for(var t=[this.ym()];this.match(5);)t.push(this.ym());return t},t.prototype.jm=function(){for(var t=[this.bm()];this.match(5);)t.push(this.bm());return t},t.prototype.Om=function(){for(var t=[this.xm()];this.match(5);)t.push(this.xm());return t},t.prototype.Tm=function(){var t=this.isTokenType(1)&&this.hm.value==EL;return t&&this.fm(),t},t.prototype.pm=function(){return"Unexpected `"+this.hm.value+"` at position "+this.hm.position+" in `"+this.um.wkt+"`"},t.prototype.lm=function(){var t=this.hm;if(this.match(1)){var e=t.value;this.Wy=this.vm();var n=this.Tm();if("GEOMETRYCOLLECTION"==e){if(n)return new Rx([]);var r=this.dm();return new Rx(r)}var i=_L[e];if(!i)throw new Error("Invalid geometry type: "+e);var o=void 0;if(n)o="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":o=this.ym();break;case"LINESTRING":o=this.bm();break;case"POLYGON":o=this.xm();break;case"MULTIPOINT":o=this.Sm();break;case"MULTILINESTRING":o=this.Mm();break;case"MULTIPOLYGON":o=this._m()}return new i(o,this.Wy)}throw new Error(this.pm())},t}(),AL=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Em=void 0!==r.splitCollection&&r.splitCollection,n}return xL(e,t),e.prototype.Am=function(t){var e=new TL(t);return new IL(e).parse()},e.prototype.readFeatureFromText=function(t,e){var n=this.readGeometryFromText(t,e),r=new wt;return r.setGeometry(n),r},e.prototype.readFeaturesFromText=function(t,e){for(var n,r=this.readGeometryFromText(t,e),i=[],o=0,a=(n=this.Em&&r.getType()==St.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<a;++o){var s=new wt;s.setGeometry(n[o]),i.push(s)}return i},e.prototype.readGeometryFromText=function(t,e){return _x(this.Am(t),!1,e)},e.prototype.writeFeatureText=function(t,e){var n=t.getGeometry();return n?this.writeGeometryText(n,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(t[r].getGeometry());var o=new Rx(n);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return NL(_x(t,!0,e))},e}(xP);function PL(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function kL(t){for(var e=t.getCoordinates(),n=[],r=0,i=e.length;r<i;++r)n.push(e[r].join(" "));return n.join(",")}function OL(t){for(var e=[],n=t.getLinearRings(),r=0,i=n.length;r<i;++r)e.push("("+kL(n[r])+")");return e.join(",")}var ML={Point:PL,LineString:kL,Polygon:OL,MultiPoint:function(t){for(var e=[],n=t.getPoints(),r=0,i=n.length;r<i;++r)e.push("("+PL(n[r])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],n=t.getLineStrings(),r=0,i=n.length;r<i;++r)e.push("("+kL(n[r])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],n=t.getPolygons(),r=0,i=n.length;r<i;++r)e.push("("+OL(n[r])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],n=t.getGeometries(),r=0,i=n.length;r<i;++r)e.push(NL(n[r]));return e.join(",")}};function NL(t){var e=t.getType(),n=(0,ML[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var e=t.getLayout(),n="";return e!==xt&&e!==Et||(n+="Z"),e!==_t&&e!==Et||(n+="M"),n}(t);r.length>0&&(e+=" "+r)}return 0===n.length?e+" "+EL:e+"("+n+")"}var LL=AL,RL=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DL=[null,"http://www.opengis.net/wms"],FL=Qc(DL,{Service:Hc((function(t,e){return th({},GL,t,e)})),Capability:Hc((function(t,e){return th({},jL,t,e)}))}),jL=Qc(DL,{Request:Hc((function(t,e){return th({},XL,t,e)})),Exception:Hc((function(t,e){return th([],WL,t,e)})),Layer:Hc((function(t,e){var n=th({},VL,t,e);return void 0===n.Layer?Object.assign(n,eR(t,e)):n}))}),zL=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return RL(e,t),e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),th({version:this.version},FL,t,[])||null},e}(GO),GL=Qc(DL,{Name:Hc(mA),Title:Hc(mA),Abstract:Hc(mA),KeywordList:Hc(oR),OnlineResource:Hc(BO),ContactInformation:Hc((function(t,e){return th({},BL,t,e)})),Fees:Hc(mA),AccessConstraints:Hc(mA),LayerLimit:Hc(gA),MaxWidth:Hc(gA),MaxHeight:Hc(gA)}),BL=Qc(DL,{ContactPersonPrimary:Hc((function(t,e){return th({},UL,t,e)})),ContactPosition:Hc(mA),ContactAddress:Hc((function(t,e){return th({},qL,t,e)})),ContactVoiceTelephone:Hc(mA),ContactFacsimileTelephone:Hc(mA),ContactElectronicMailAddress:Hc(mA)}),UL=Qc(DL,{ContactPerson:Hc(mA),ContactOrganization:Hc(mA)}),qL=Qc(DL,{AddressType:Hc(mA),Address:Hc(mA),City:Hc(mA),StateOrProvince:Hc(mA),PostCode:Hc(mA),Country:Hc(mA)}),WL=Qc(DL,{Format:qc(mA)}),VL=Qc(DL,{Name:Hc(mA),Title:Hc(mA),Abstract:Hc(mA),KeywordList:Hc(oR),CRS:Vc(mA),EX_GeographicBoundingBox:Hc((function(t,e){var n=th({},YL,t,e);if(n){var r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,a=n.northBoundLatitude;if(void 0!==r&&void 0!==i&&void 0!==o&&void 0!==a)return[r,i,o,a]}})),BoundingBox:Vc((function(t,e){var n=[dA(t.getAttribute("minx")),dA(t.getAttribute("miny")),dA(t.getAttribute("maxx")),dA(t.getAttribute("maxy"))],r=[dA(t.getAttribute("resx")),dA(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:r}})),Dimension:Vc((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:hA(t.getAttribute("multipleValues")),nearestValue:hA(t.getAttribute("nearestValue")),current:hA(t.getAttribute("current")),values:mA(t)}})),Attribution:Hc((function(t,e){return th({},HL,t,e)})),AuthorityURL:Vc((function(t,e){var n=nR(t,e);if(n)return n.name=t.getAttribute("name"),n})),Identifier:Vc(mA),MetadataURL:Vc((function(t,e){var n=nR(t,e);if(n)return n.type=t.getAttribute("type"),n})),DataURL:Vc(nR),FeatureListURL:Vc(nR),Style:Vc((function(t,e){return th({},QL,t,e)})),MinScaleDenominator:Hc(fA),MaxScaleDenominator:Hc(fA),Layer:Vc(eR)}),HL=Qc(DL,{Title:Hc(mA),OnlineResource:Hc(BO),LogoURL:Hc(iR)}),YL=Qc(DL,{westBoundLongitude:Hc(fA),eastBoundLongitude:Hc(fA),southBoundLatitude:Hc(fA),northBoundLatitude:Hc(fA)}),XL=Qc(DL,{GetCapabilities:Hc(rR),GetMap:Hc(rR),GetFeatureInfo:Hc(rR)}),ZL=Qc(DL,{Format:Vc(mA),DCPType:Vc((function(t,e){return th({},KL,t,e)}))}),KL=Qc(DL,{HTTP:Hc((function(t,e){return th({},JL,t,e)}))}),JL=Qc(DL,{Get:Hc(nR),Post:Hc(nR)}),QL=Qc(DL,{Name:Hc(mA),Title:Hc(mA),Abstract:Hc(mA),LegendURL:Vc(iR),StyleSheetURL:Hc(nR),StyleURL:Hc(nR)}),$L=Qc(DL,{Format:Hc(mA),OnlineResource:Hc(BO)}),tR=Qc(DL,{Keyword:qc(mA)});function eR(t,e){var n=e[e.length-1],r=th({},VL,t,e);if(r){var i=hA(t.getAttribute("queryable"));void 0===i&&(i=n.queryable),r.queryable=void 0!==i&&i;var o=yA(t.getAttribute("cascaded"));void 0===o&&(o=n.cascaded),r.cascaded=o;var a=hA(t.getAttribute("opaque"));void 0===a&&(a=n.opaque),r.opaque=void 0!==a&&a;var s=hA(t.getAttribute("noSubsets"));void 0===s&&(s=n.noSubsets),r.noSubsets=void 0!==s&&s;var l=dA(t.getAttribute("fixedWidth"));l||(l=n.fixedWidth),r.fixedWidth=l;var u=dA(t.getAttribute("fixedHeight"));return u||(u=n.fixedHeight),r.fixedHeight=u,["Style","CRS","AuthorityURL"].forEach((function(t){if(t in n){var e=r[t]||[];r[t]=e.concat(n[t])}})),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in r)){var e=n[t];r[t]=e}})),r}}function nR(t,e){return th({},$L,t,e)}function rR(t,e){return th({},ZL,t,e)}function iR(t,e){var n=nR(t,e);if(n){var r=[yA(t.getAttribute("width")),yA(t.getAttribute("height"))];return n.size=r,n}}function oR(t,e){return th([],tR,t,e)}var aR=zL,sR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lR=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Iy="http://mapserver.gis.umn.edu/mapserver",n.Ny=new IA,n.qc=r.layers?r.layers:null,n}return sR(e,t),e.prototype.getLayers=function(){return this.qc},e.prototype.setLayers=function(t){this.qc=t},e.prototype.Cm=function(t,e){t.setAttribute("namespaceURI",this.Iy);var n=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==n)for(var i=0,o=t.childNodes.length;i<o;i++){var a=t.childNodes[i];if(a.nodeType===Node.ELEMENT_NODE){var s=a,l=e[0],u=s.localName.replace("_layer","");if(!this.qc||m(this.qc,u)){var c=u+"_feature";l.featureType=c,l.featureNS=this.Iy;var h={};h[c]=qc(this.Ny.readFeatureElement,this.Ny);var p=Qc([l.featureNS,null],h);s.setAttribute("namespaceURI",this.Iy);var f=th([],p,s,e,this.Ny);f&&b(r,f)}}}if("FeatureCollection"==n){var d=th([],this.Ny.FEATURE_COLLECTION_PARSERS,t,[{}],this.Ny);d&&(r=d)}return r},e.prototype.readFeaturesFromNode=function(t,e){var n={};return e&&k(n,this.getReadOptions(t,e)),this.Cm(t,[n])},e}(iA),uR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cR=[null,"http://www.opengis.net/wmts/1.0"],hR=[null,"http://www.opengis.net/ows/1.1"],pR=Qc(cR,{Contents:Hc((function(t,e){return th({},dR,t,e)}))}),fR=function(t){function e(){var e=t.call(this)||this;return e.Rm=new oM,e}return uR(e,t),e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var n=this.Rm.readFromNode(t);return n?(n.version=e,(n=th(n,pR,t,[]))||null):null},e}(GO),dR=Qc(cR,{Layer:Vc((function(t,e){return th({},gR,t,e)})),TileMatrixSet:Vc((function(t,e){return th({},_R,t,e)}))}),gR=Qc(cR,{Style:Vc((function(t,e){var n=th({},yR,t,e);if(n){var r="true"===t.getAttribute("isDefault");return n.isDefault=r,n}})),Format:Vc(mA),TileMatrixSetLink:Vc((function(t,e){return th({},mR,t,e)})),Dimension:Vc((function(t,e){return th({},bR,t,e)})),ResourceURL:Vc((function(t,e){var n=t.getAttribute("format"),r=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};return n&&(o.format=n),r&&(o.template=r),i&&(o.resourceType=i),o}))},Qc(hR,{Title:Hc(mA),Abstract:Hc(mA),WGS84BoundingBox:Hc(SR),Identifier:Hc(mA)})),yR=Qc(cR,{LegendURL:Vc((function(t,e){var n={};return n.format=t.getAttribute("format"),n.href=BO(t),n}))},Qc(hR,{Title:Hc(mA),Identifier:Hc(mA)})),mR=Qc(cR,{TileMatrixSet:Hc(mA),TileMatrixSetLimits:Hc((function(t,e){return th([],vR,t,e)}))}),vR=Qc(cR,{TileMatrixLimits:qc((function(t,e){return th({},wR,t,e)}))}),wR=Qc(cR,{TileMatrix:Hc(mA),MinTileRow:Hc(gA),MaxTileRow:Hc(gA),MinTileCol:Hc(gA),MaxTileCol:Hc(gA)}),bR=Qc(cR,{Default:Hc(mA),Value:Vc(mA)},Qc(hR,{Identifier:Hc(mA)})),xR=Qc(hR,{LowerCorner:qc(CR),UpperCorner:qc(CR)}),_R=Qc(cR,{WellKnownScaleSet:Hc(mA),TileMatrix:Vc((function(t,e){return th({},ER,t,e)}))},Qc(hR,{SupportedCRS:Hc(mA),Identifier:Hc(mA),BoundingBox:Hc(SR)})),ER=Qc(cR,{TopLeftCorner:Hc(CR),ScaleDenominator:Hc(fA),TileWidth:Hc(gA),TileHeight:Hc(gA),MatrixWidth:Hc(gA),MatrixHeight:Hc(gA)},Qc(hR,{Identifier:Hc(mA)}));function SR(t,e){var n=th([],xR,t,e);if(2==n.length)return he(n)}function CR(t,e){var n=mA(t).split(/\s+/);if(n&&2==n.length){var r=+n[0],i=+n[1];if(!isNaN(r)&&!isNaN(i))return[r,i]}}var TR=fR,IR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AR=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function PR(t){var e=t.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&t.msFullscreenEnabled||e.requestFullscreen&&t.fullscreenEnabled)}function kR(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function OR(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var MR=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,n.once,n.un,n.nh=void 0!==r.keys&&r.keys,n.Ov=r.source,n.Pm=!1,n.Im=n.Nm.bind(n),n.zm=void 0!==r.className?r.className:"ol-full-screen",n.Fm=[],n.Lm=void 0!==r.activeClassName?r.activeClassName.split(" "):[n.zm+"-true"],n.Gm=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[n.zm+"-false"];var i=void 0!==r.label?r.label:"⤢";n.Dm="string"==typeof i?document.createTextNode(i):i;var o=void 0!==r.labelActive?r.labelActive:"×";n.Um="string"==typeof o?document.createTextNode(o):o;var a=r.tipLabel?r.tipLabel:"Toggle full-screen";return n.qm=document.createElement("button"),n.qm.title=a,n.qm.setAttribute("type","button"),n.qm.appendChild(n.Dm),n.qm.addEventListener(z,n.Rr.bind(n),!1),n.Bm(n.qm,n.Pm),n.element.className="".concat(n.zm," ").concat(pa," ").concat(da),n.element.appendChild(n.qm),n}return IR(e,t),e.prototype.Rr=function(t){t.preventDefault(),this.Wm()},e.prototype.Wm=function(){var t=this.getMap();if(t){var e=t.getOwnerDocument();if(PR(e))if(kR(e))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(e);else{var n;n=this.Ov?"string"==typeof this.Ov?e.getElementById(this.Ov):this.Ov:t.getTargetElement(),this.nh?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():OR(t)}(n):OR(n)}}},e.prototype.Vm=function(){var t=this.getMap();if(t){var e=this.Pm;this.Pm=kR(t.getOwnerDocument()),e!==this.Pm&&(this.Bm(this.qm,this.Pm),this.Pm?(go(this.Um,this.Dm),this.dispatchEvent("enterfullscreen")):(go(this.Dm,this.Um),this.dispatchEvent("leavefullscreen")),t.updateSize())}},e.prototype.Bm=function(t,e){var n,r,i,o;e?((n=t.classList).remove.apply(n,this.Gm),(r=t.classList).add.apply(r,this.Lm)):((i=t.classList).remove.apply(i,this.Lm),(o=t.classList).add.apply(o,this.Gm))},e.prototype.setMap=function(e){var n=this.getMap();n&&n.removeChangeListener(cs,this.Im),t.prototype.setMap.call(this,e),this.Nm(),e&&e.addChangeListener(cs,this.Im)},e.prototype.Nm=function(){for(var t=this.Fm,e=0,n=t.length;e<n;++e)X(t[e]);t.length=0;var r=this.getMap();if(r){var i=r.getOwnerDocument();for(PR(i)?this.element.classList.remove(fa):this.element.classList.add(fa),e=0,n=AR.length;e<n;++e)t.push(H(i,AR[e],this.Vm,this));this.Vm()}},e}(Ys),NR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LR="projection",RR="coordinateFormat",DR=function(t){function e(e){var n=this,r=e||{},i=document.createElement("div");i.className=void 0!==r.className?r.className:"ol-mouse-position",(n=t.call(this,{element:i,render:r.render,target:r.target})||this).on,n.once,n.un,n.addChangeListener(LR,n.Tt),r.coordinateFormat&&n.setCoordinateFormat(r.coordinateFormat),r.projection&&n.setProjection(r.projection);var o=!0,a="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(a=r.undefinedHTML),o=!!a):"placeholder"in r&&(!1===r.placeholder?o=!1:a=String(r.placeholder)),n.Xm=a,n.Hm=o,n.Jm=i.innerHTML,n.Km=null,n._t=null,n}return NR(e,t),e.prototype.Tt=function(){this._t=null},e.prototype.getCoordinateFormat=function(){return this.get(RR)},e.prototype.getProjection=function(){return this.get(LR)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.Ym(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.Ym(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(H(n,ts,this.handleMouseMove,this)),this.Hm&&this.listenerKeys.push(H(n,"pointerout",this.handleMouseOut,this)),this.Ym(null)}},e.prototype.setCoordinateFormat=function(t){this.set(RR,t)},e.prototype.setProjection=function(t){this.set(LR,cr(t))},e.prototype.Ym=function(t){var e=this.Xm;if(t&&this.Km){if(!this._t){var n=this.getProjection();this._t=n?wr(this.Km,n):sr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var i=Cr();i&&(this._t=wr(this.Km,i)),this._t(r,r);var o=this.getCoordinateFormat();e=o?o(r):r.toString()}}this.Jm&&e===this.Jm||(this.element.innerHTML=e,this.Jm=e)},e.prototype.render=function(t){var e=t.frameState;e?this.Km!=e.viewState.projection&&(this.Km=e.viewState.projection,this._t=null):this.Km=null},e}(Ys),FR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return FR(e,t),e.prototype.createRenderer=function(){return new Wa(this)},e}(Vs),zR=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Zm=n.$m.bind(n),n.kr=void 0===r.collapsed||r.collapsed,n.Tr=void 0===r.collapsible||r.collapsible,n.Tr||(n.kr=!1),n.ca=void 0!==r.rotateWithView&&r.rotateWithView,n.Qm=void 0;var i=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",a=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof a?(n.Er=document.createElement("span"),n.Er.textContent=a):n.Er=a;var s=void 0!==r.label?r.label:"›";"string"==typeof s?(n.Ar=document.createElement("span"),n.Ar.textContent=s):n.Ar=s;var l=n.Tr&&!n.kr?n.Er:n.Ar,u=document.createElement("button");u.setAttribute("type","button"),u.title=o,u.appendChild(l),u.addEventListener(z,n.Rr.bind(n),!1),n.tw=document.createElement("div"),n.tw.className="ol-overviewmap-map",n.Fy=r.view,n.nw=new jR({view:r.view});var c=n.nw;r.layers&&r.layers.forEach((function(t){c.addLayer(t)}));var h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",n.iw=new su({position:[0,0],positioning:Ql,element:h}),n.nw.addOverlay(n.iw);var p=i+" ol-unselectable "+da+(n.kr&&n.Tr?" ol-collapsed":"")+(n.Tr?"":" ol-uncollapsible"),f=n.element;f.className=p,f.appendChild(n.tw),f.appendChild(u);var d=n,g=n.iw,y=n.iw.getElement(),m=function(t){var e,n={clientX:(e=t).clientX,clientY:e.clientY},r=c.getEventCoordinateInternal(n);g.setPosition(r)},v=function t(e){var n=c.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(n),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",t)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",v)})),n}return FR(e,t),e.prototype.setMap=function(e){var n=this.getMap();if(e!==n){if(n){var r=n.getView();r&&this.rw(r),this.nw.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.nw.setTarget(this.tw),this.listenerKeys.push(H(e,f,this.ew,this));var i=e.getView();i&&(this.ow(i),i.isDef()&&(this.nw.updateSize(),this.sw())),this.nw.isRendered()||this.aw()}}},e.prototype.ew=function(t){if(t.key===hs){var e=t.oldValue;e&&this.rw(e);var n=this.getMap().getView();this.ow(n)}else this.nw.isRendered()||t.key!==cs&&t.key!==us||this.nw.updateSize()},e.prototype.ow=function(t){if(!this.Fy){var e=new Fs({projection:t.getProjection()});this.nw.setView(e)}t.addChangeListener(ms.ROTATION,this.Zm),this.$m()},e.prototype.rw=function(t){t.removeChangeListener(ms.ROTATION,this.Zm)},e.prototype.$m=function(){this.ca&&this.nw.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.uw=function(){var t=this.getMap(),e=this.nw;if(t.isRendered()&&e.isRendered()){var n=t.getSize(),r=t.getView().calculateExtentInternal(n);if(!this.Qm||!Se(r,this.Qm)){this.Qm=r;var i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=e.getPixelFromCoordinateInternal(Be(r)),s=e.getPixelFromCoordinateInternal(Re(r)),l=Math.abs(a[0]-s[0]),u=Math.abs(a[1]-s[1]),c=i[0],h=i[1];l<.1*c||u<.1*h||l>.75*c||u>.75*h?this.sw():ye(o,r)||this.cw()}}},e.prototype.sw=function(){var t=this.getMap(),e=this.nw,n=t.getSize(),r=t.getView().calculateExtentInternal(n),i=e.getView(),o=Math.log(7.5)/Math.LN2;Ye(r,1/(.1*Math.pow(2,o/2))),i.fitInternal(Ui(r))},e.prototype.cw=function(){var t=this.getMap(),e=this.nw,n=t.getView();e.getView().setCenterInternal(n.getCenterInternal())},e.prototype.hw=function(){var t=this.getMap(),e=this.nw;if(t.isRendered()&&e.isRendered()){var n=t.getSize(),r=t.getView(),i=e.getView(),o=this.ca?0:-r.getRotation(),a=this.iw,s=this.iw.getElement(),l=r.getCenterInternal(),u=r.getResolution(),c=i.getResolution(),h=n[0]*u/c,p=n[1]*u/c;if(a.setPosition(l),s){s.style.width=h+"px",s.style.height=p+"px";var f="rotate("+o+"rad)";s.style.transform=f}}},e.prototype.aw=function(){this.fw||(this.fw=Y(this.nw,os,(function(t){delete this.fw,this.hw()}),this))},e.prototype.Rr=function(t){t.preventDefault(),this.zr()},e.prototype.zr=function(){this.element.classList.toggle(ga),this.kr?go(this.Er,this.Ar):go(this.Ar,this.Er),this.kr=!this.kr;var t=this.nw;if(!this.kr){if(t.isRendered())return this.Qm=void 0,void t.render();t.updateSize(),this.sw(),this.aw()}},e.prototype.getCollapsible=function(){return this.Tr},e.prototype.setCollapsible=function(t){this.Tr!==t&&(this.Tr=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.kr&&this.zr())},e.prototype.setCollapsed=function(t){this.Tr&&this.kr!==t&&this.zr()},e.prototype.getCollapsed=function(){return this.kr},e.prototype.getRotateWithView=function(){return this.ca},e.prototype.setRotateWithView=function(t){this.ca!==t&&(this.ca=t,0!==this.getMap().getView().getRotation()&&(this.ca?this.$m():this.nw.getView().setRotation(0),this.Qm=void 0,this.uw(),this.hw()))},e.prototype.getOverviewMap=function(){return this.nw},e.prototype.render=function(t){this.uw(),this.hw()},e}(Ys),GR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),BR="units",UR="degrees",qR="metric",WR=[1,2,5],VR=25.4/.28,HR=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,n.once,n.un,n.lw=document.createElement("div"),n.lw.className=i+"-inner",n.element.className=i+" "+pa,n.element.appendChild(n.lw),n.dw=null,n.pw=void 0!==r.minWidth?r.minWidth:64,n.mn=!1,n.yw=void 0,n.Jm="",n.addChangeListener(BR,n.mw),n.setUnits(r.units||qR),n.ww=r.bar||!1,n.bw=r.steps||4,n.gw=r.text||!1,n.xw=r.dpi||void 0,n}return GR(e,t),e.prototype.getUnits=function(){return this.get(BR)},e.prototype.mw=function(){this.Nr()},e.prototype.setUnits=function(t){this.set(BR,t)},e.prototype.setDpi=function(t){this.xw=t},e.prototype.Nr=function(){var t=this.dw;if(t){var e=t.center,n=t.projection,r=this.getUnits(),i=r==UR?kt.DEGREES:kt.METERS,o=hr(n,t.resolution,e,i),a=this.pw*(this.xw||VR)/VR,s=a*o,l="";if(r==UR){var u=At[kt.DEGREES];(s*=u)<u/60?(l="″",o*=3600):s<u?(l="′",o*=60):l="°"}else"imperial"==r?s<.9144?(l="in",o/=.0254):s<1609.344?(l="ft",o/=.3048):(l="mi",o/=1609.344):"nautical"==r?(o/=1852,l="nm"):r==qR?s<.001?(l="μm",o*=1e6):s<1?(l="mm",o*=1e3):s<1e3?l="m":(l="km",o/=1e3):"us"==r?s<.9144?(l="in",o*=39.37):s<1609.344?(l="ft",o/=.30480061):(l="mi",o/=1609.3472):yt(!1,33);for(var c,h,p,f,d=3*Math.floor(Math.log(a*o)/Math.log(10));;){p=Math.floor(d/3);var g=Math.pow(10,p);if(c=WR[(d%3+3)%3]*g,h=Math.round(c/o),isNaN(h))return this.element.style.display="none",void(this.mn=!1);if(h>=a)break;++d}f=this.ww?this.createScaleBar(h,c,l):c.toFixed(p<0?-p:0)+" "+l,this.Jm!=f&&(this.lw.innerHTML=f,this.Jm=f),this.yw!=h&&(this.lw.style.width=h+"px",this.yw=h),this.mn||(this.element.style.display="",this.mn=!0)}else this.mn&&(this.element.style.display="none",this.mn=!1)},e.prototype.createScaleBar=function(t,e,n){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.bw,a="#ffffff",s=0;s<this.bw;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.bw?this.createStepText(s,t,!1,e,n):"")+"</div>"),s===this.bw-1&&i.push(this.createStepText(s+1,t,!0,e,n)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.gw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,n,r,i){var o=(0===t?0:Math.round(r/this.bw*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.bw*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.bw*2)+"px;left: "+(n?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=hr(this.dw.projection,this.dw.resolution,this.dw.center,kt.METERS),e=this.xw||VR;return parseFloat(t.toString())*(1e3/25.4)*e},e.prototype.render=function(t){var e=t.frameState;this.dw=e?e.viewState:null,this.Nr()},e}(Ys),YR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XR=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render})||this).Rn=[],n.jw=void 0,n.Sw=0,n.Cn,n.kw=0,n.Mw=0,n._w,n.Ow,n.Tw=null,n.Ew=!1,n.Lr=void 0!==r.duration?r.duration:200;var i=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=i+"-thumb "+pa;var a=n.element;return a.className=i+" ol-unselectable "+da,a.appendChild(o),a.addEventListener(es,n.Aw.bind(n),!1),a.addEventListener(ts,n.Cw.bind(n),!1),a.addEventListener(ns,n.Rw.bind(n),!1),a.addEventListener(z,n.Pw.bind(n),!1),o.addEventListener(z,h,!1),n}return YR(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.Iw=function(){var t=this.element,e=t.offsetWidth,n=t.offsetHeight;if(0===e&&0===n)return this.Ew=!1;var r=getComputedStyle(t);e-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var i=t.firstElementChild,o=getComputedStyle(i),a=i.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=i.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.Tw=[a,s],e>n?(this.Sw=1,this.Mw=e-a):(this.Sw=0,this.kw=n-s),this.Ew=!0},e.prototype.Pw=function(t){var e=this.getMap().getView(),n=this.Nw(t.offsetX-this.Tw[0]/2,t.offsetY-this.Tw[1]/2),r=this.zw(n),i=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:i,duration:this.Lr,easing:ut})},e.prototype.Aw=function(t){if(!this.Cn&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this._w=t.clientX-parseFloat(e.style.left),this.Ow=t.clientY-parseFloat(e.style.top),this.Cn=!0,0===this.Rn.length){var n=this.Cw,r=this.Rw,i=this.getMap().getOwnerDocument();this.Rn.push(H(i,ts,n,this),H(i,ns,r,this))}}},e.prototype.Cw=function(t){if(this.Cn){var e=t.clientX-this._w,n=t.clientY-this.Ow,r=this.Nw(e,n);this.jw=this.zw(r),this.getMap().getView().setResolution(this.jw)}},e.prototype.Rw=function(t){this.Cn&&(this.getMap().getView().endInteraction(),this.Cn=!1,this._w=void 0,this.Ow=void 0,this.Rn.forEach(X),this.Rn.length=0)},e.prototype.Fw=function(t){var e=this.Lw(t),n=this.element.firstElementChild;1==this.Sw?n.style.left=this.Mw*e+"px":n.style.top=this.kw*e+"px"},e.prototype.Nw=function(t,e){return Qe(1===this.Sw?t/this.Mw:e/this.kw,0,1)},e.prototype.zw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.Lw=function(t){return Qe(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e.prototype.render=function(t){if(t.frameState&&(this.Ew||this.Iw())){var e=t.frameState.viewState.resolution;this.jw=e,this.Fw(e)}},e}(Ys),ZR=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KR=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var i=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",a=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(z,n.Rr.bind(n),!1);var l=i+" ol-unselectable "+da,u=n.element;return u.className=l,u.appendChild(s),n}return ZR(e,t),e.prototype.Rr=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Ui(e))},e}(Ys),JR={};JR.AssertionError=c,JR.Collection=st,JR.Collection.CollectionEvent=at,JR.DataTile=gt,JR.Disposable=d,JR.Feature=wt,JR.Feature.createStyleFunction=vt,JR.Geolocation=ro,JR.Image=lo,JR.Image.listenImage=so,JR.ImageBase=oo,JR.ImageCanvas=co,JR.ImageTile=bo,JR.Kinetic=xo,JR.Map=Zl,JR.MapBrowserEvent=Qa,JR.MapBrowserEventHandler=is,JR.MapEvent=Ka,JR.Object=et,JR.Object.ObjectEvent=tt,JR.Observable=Q,JR.Observable.unByKey=J,JR.Overlay=su,JR.PluggableMap=Vs,JR.Tile=ft,JR.TileCache=mu,JR.TileQueue=gs,JR.TileQueue.getTilePriority=ys,JR.TileRange=bu,JR.TileRange.createOrUpdate=wu,JR.VectorRenderTile=Eu,JR.VectorTile=Cu,JR.View=Fs,JR.View.createCenterConstraint=Ms,JR.View.createResolutionConstraint=Ns,JR.View.createRotationConstraint=Ls,JR.View.isNoopAnimation=Rs,JR.array={},JR.array.binarySearch=g,JR.array.equals=_,JR.array.extend=b,JR.array.find=x,JR.array.findIndex=E,JR.array.includes=m,JR.array.isSorted=S,JR.array.linearFindNearest=v,JR.array.numberSafeCompareFunction=y,JR.array.remove=function(t,e){var n=t.indexOf(e),r=n>-1;return r&&t.splice(n,1),r},JR.array.reverseSubArray=w,JR.array.stableSort=function(t,e){var n,r=t.length,i=Array(t.length);for(n=0;n<r;n++)i[n]={index:n,value:t[n]};for(i.sort((function(t,n){return e(t.value,n.value)||t.index-n.index})),n=0;n<t.length;n++)t[n]=i[n].value},JR.asserts={},JR.asserts.assert=yt,JR.centerconstraint={},JR.centerconstraint.createExtent=ws,JR.centerconstraint.none=bs,JR.color={},JR.color.asArray=Io,JR.color.asString=So,JR.color.fromString=To,JR.color.isStringColor=ko,JR.color.normalize=Ao,JR.color.toString=Po,JR.colorlike={},JR.colorlike.asColorLike=Tu,JR.control={},JR.control.Attribution=Zs,JR.control.Control=Ys,JR.control.FullScreen=MR,JR.control.MousePosition=DR,JR.control.OverviewMap=zR,JR.control.Rotate=Js,JR.control.ScaleLine=HR,JR.control.Zoom=$s,JR.control.ZoomSlider=XR,JR.control.ZoomToExtent=KR,JR.control.defaults=tl,JR.coordinate={},JR.coordinate.add=zn,JR.coordinate.closestOnCircle=Gn,JR.coordinate.closestOnSegment=Bn,JR.coordinate.createStringXY=function(t){return function(e){return Kn(e,t)}},JR.coordinate.degreesToStringHDMS=Un,JR.coordinate.distance=Xn,JR.coordinate.equals=Wn,JR.coordinate.format=qn,JR.coordinate.getWorldsAway=Qn,JR.coordinate.rotate=Vn,JR.coordinate.scale=Hn,JR.coordinate.squaredDistance=Yn,JR.coordinate.squaredDistanceToSegment=Zn,JR.coordinate.toStringHDMS=function(t,e){return t?Un("NS",t[1],e)+" "+Un("EW",t[0],e):""},JR.coordinate.toStringXY=Kn,JR.coordinate.wrapX=Jn,JR.css={},JR.css.CLASS_COLLAPSED=ga,JR.css.CLASS_CONTROL=da,JR.css.CLASS_HIDDEN=ha,JR.css.CLASS_SELECTABLE="ol-selectable",JR.css.CLASS_UNSELECTABLE=pa,JR.css.CLASS_UNSUPPORTED=fa,JR.css.cssOpacity=wa,JR.css.getFontParameters=va,JR.dom={},JR.dom.createCanvasContext2D=ho,JR.dom.outerHeight=fo,JR.dom.outerWidth=po,JR.dom.removeChildren=mo,JR.dom.removeNode=yo,JR.dom.replaceChildren=vo,JR.dom.replaceNode=go,JR.easing={},JR.easing.easeIn=lt,JR.easing.easeOut=ut,JR.easing.inAndOut=ct,JR.easing.linear=ht,JR.easing.upAndDown=function(t){return t<.5?ct(2*t):1-ct(2*(t-.5))},JR.events={},JR.events.Event=p,JR.events.Event.preventDefault=function(t){t.preventDefault()},JR.events.Event.stopPropagation=h,JR.events.Target=R,JR.events.condition={},JR.events.condition.all=hl,JR.events.condition.altKeyOnly=pl,JR.events.condition.altShiftKeysOnly=fl,JR.events.condition.always=yl,JR.events.condition.click=function(t){return t.type==$a.CLICK},JR.events.condition.doubleClick=function(t){return t.type==$a.DBLCLICK},JR.events.condition.focus=dl,JR.events.condition.focusWithTabindex=gl,JR.events.condition.mouseActionButton=ml,JR.events.condition.mouseOnly=El,JR.events.condition.never=vl,JR.events.condition.noModifierKeys=bl,JR.events.condition.penOnly=function(t){var e=t.originalEvent;return yt(void 0!==e,56),"pen"===e.pointerType},JR.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(Dt?e.metaKey:e.ctrlKey)&&!e.shiftKey},JR.events.condition.pointerMove=function(t){return"pointermove"==t.type},JR.events.condition.primaryAction=Sl,JR.events.condition.shiftKeyOnly=xl,JR.events.condition.singleClick=wl,JR.events.condition.targetNotEditable=_l,JR.events.condition.touchOnly=function(t){var e=t.originalEvent;return yt(void 0!==e,56),"touch"===e.pointerType},JR.events.listen=H,JR.events.listenOnce=Y,JR.events.unlistenByKey=X,JR.extent={},JR.extent.applyTransform=Ze,JR.extent.approximatelyEquals=Ce,JR.extent.boundingExtent=he,JR.extent.buffer=pe,JR.extent.clone=fe,JR.extent.closestSquaredDistanceXY=de,JR.extent.containsCoordinate=ge,JR.extent.containsExtent=ye,JR.extent.containsXY=me,JR.extent.coordinateRelationship=ve,JR.extent.createEmpty=we,JR.extent.createOrUpdate=be,JR.extent.createOrUpdateEmpty=xe,JR.extent.createOrUpdateFromCoordinate=_e,JR.extent.createOrUpdateFromCoordinates=function(t,e){return Ae(xe(e),t)},JR.extent.createOrUpdateFromFlatCoordinates=Ee,JR.extent.createOrUpdateFromRings=function(t,e){return ke(xe(e),t)},JR.extent.equals=Se,JR.extent.extend=Te,JR.extent.extendCoordinate=Ie,JR.extent.extendCoordinates=Ae,JR.extent.extendFlatCoordinates=Pe,JR.extent.extendRings=ke,JR.extent.extendXY=Oe,JR.extent.forEachCorner=Me,JR.extent.getArea=Ne,JR.extent.getBottomLeft=Le,JR.extent.getBottomRight=Re,JR.extent.getCenter=De,JR.extent.getCorner=Fe,JR.extent.getEnlargedArea=function(t,e){var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-r)},JR.extent.getForViewAndSize=je,JR.extent.getHeight=ze,JR.extent.getIntersection=Ge,JR.extent.getIntersectionArea=function(t,e){return Ne(Ge(t,e))},JR.extent.getMargin=function(t){return qe(t)+ze(t)},JR.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},JR.extent.getTopLeft=Be,JR.extent.getTopRight=Ue,JR.extent.getWidth=qe,JR.extent.intersects=We,JR.extent.intersectsSegment=Xe,JR.extent.isEmpty=Ve,JR.extent.returnOrUpdate=He,JR.extent.scaleFromCenter=Ye,JR.extent.wrapX=Ke,JR.featureloader={},JR.featureloader.loadFeaturesXhr=Mu,JR.featureloader.setWithCredentials=function(t){Ou=t},JR.featureloader.xhr=Nu,JR.format={},JR.format.EsriJSON=nA,JR.format.Feature=xx,JR.format.Feature.transformExtentWithOptions=Ex,JR.format.Feature.transformGeometryWithOptions=_x,JR.format.GML=NA,JR.format.GML2=IA,JR.format.GML3=OA,JR.format.GML32=DA,JR.format.GMLBase=uA,JR.format.GMLBase.GMLNS=aA,JR.format.GPX=vP,JR.format.GeoJSON=Ux,JR.format.IGC=AP,JR.format.IIIFInfo=av,JR.format.JSONFeature=jx,JR.format.KML=OO,JR.format.KML.getDefaultFillStyle=function(){return ZP},JR.format.KML.getDefaultImageStyle=function(){return KP},JR.format.KML.getDefaultStrokeStyle=function(){return JP},JR.format.KML.getDefaultStyle=function(){return $P},JR.format.KML.getDefaultStyleArray=function(){return tk},JR.format.KML.getDefaultTextStyle=function(){return QP},JR.format.KML.readFlatCoordinates=ak,JR.format.MVT=kx,JR.format.OSMXML=zO,JR.format.OWS=oM,JR.format.Polyline=yM,JR.format.Polyline.decodeDeltas=lM,JR.format.Polyline.decodeFloats=cM,JR.format.Polyline.decodeSignedIntegers=pM,JR.format.Polyline.decodeUnsignedIntegers=dM,JR.format.Polyline.encodeDeltas=sM,JR.format.Polyline.encodeFloats=uM,JR.format.Polyline.encodeSignedIntegers=hM,JR.format.Polyline.encodeUnsignedInteger=gM,JR.format.Polyline.encodeUnsignedIntegers=fM,JR.format.TextFeature=xP,JR.format.TopoJSON=CM,JR.format.WFS=gL,JR.format.WFS.writeFilter=function(t,e){var n=e||"1.1.0",r=Dc(dL(n),"Filter"),i={node:r};return k(i,{version:n,filter:t}),QN(r,t,[i]),r},JR.format.WKB=bL,JR.format.WKT=LL,JR.format.WMSCapabilities=aR,JR.format.WMSGetFeatureInfo=lR,JR.format.WMTSCapabilities=TR,JR.format.XML=GO,JR.format.XMLFeature=iA,JR.format.filter={},JR.format.filter.And=kM,JR.format.filter.Bbox=MM,JR.format.filter.Comparison=UM,JR.format.filter.ComparisonBinary=HM,JR.format.filter.Contains=DM,JR.format.filter.DWithin=jM,JR.format.filter.Disjoint=GM,JR.format.filter.During=WM,JR.format.filter.EqualTo=XM,JR.format.filter.Filter=TM,JR.format.filter.GreaterThan=KM,JR.format.filter.GreaterThanOrEqualTo=QM,JR.format.filter.Intersects=tN,JR.format.filter.IsBetween=nN,JR.format.filter.IsLike=iN,JR.format.filter.IsNull=aN,JR.format.filter.LessThan=lN,JR.format.filter.LessThanOrEqualTo=cN,JR.format.filter.LogicalNary=AM,JR.format.filter.Not=pN,JR.format.filter.NotEqualTo=dN,JR.format.filter.Or=yN,JR.format.filter.ResourceId=vN,JR.format.filter.Spatial=LM,JR.format.filter.Within=bN,JR.format.filter.and=xN,JR.format.filter.bbox=_N,JR.format.filter.between=function(t,e,n){return new nN(t,e,n)},JR.format.filter.contains=function(t,e,n){return new DM(t,e,n)},JR.format.filter.disjoint=function(t,e,n){return new GM(t,e,n)},JR.format.filter.during=function(t,e,n){return new WM(t,e,n)},JR.format.filter.dwithin=function(t,e,n,r,i){return new jM(t,e,n,r,i)},JR.format.filter.equalTo=function(t,e,n){return new XM(t,e,n)},JR.format.filter.greaterThan=function(t,e){return new KM(t,e)},JR.format.filter.greaterThanOrEqualTo=function(t,e){return new QM(t,e)},JR.format.filter.intersects=function(t,e,n){return new tN(t,e,n)},JR.format.filter.isNull=function(t){return new aN(t)},JR.format.filter.lessThan=function(t,e){return new lN(t,e)},JR.format.filter.lessThanOrEqualTo=function(t,e){return new cN(t,e)},JR.format.filter.like=function(t,e,n,r,i,o){return new iN(t,e,n,r,i,o)},JR.format.filter.not=function(t){return new pN(t)},JR.format.filter.notEqualTo=function(t,e,n){return new dN(t,e,n)},JR.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(yN,e))},JR.format.filter.resourceId=function(t){return new vN(t)},JR.format.filter.within=function(t,e,n){return new bN(t,e,n)},JR.format.xlink={},JR.format.xlink.readHref=BO,JR.format.xsd={},JR.format.xsd.readBoolean=cA,JR.format.xsd.readBooleanString=hA,JR.format.xsd.readDateTime=pA,JR.format.xsd.readDecimal=fA,JR.format.xsd.readDecimalString=dA,JR.format.xsd.readNonNegativeIntegerString=yA,JR.format.xsd.readPositiveInteger=gA,JR.format.xsd.readString=mA,JR.format.xsd.writeBooleanTextNode=vA,JR.format.xsd.writeCDATASection=wA,JR.format.xsd.writeDateTimeTextNode=bA,JR.format.xsd.writeDecimalTextNode=xA,JR.format.xsd.writeNonNegativeIntegerTextNode=_A,JR.format.xsd.writeStringTextNode=EA,JR.functions={},JR.functions.FALSE=T,JR.functions.TRUE=C,JR.functions.VOID=I,JR.functions.memoizeOne=A,JR.functions.toPromise=P,JR.geom={},JR.geom.Circle=pI,JR.geom.Geometry=Gr,JR.geom.GeometryCollection=Rx,JR.geom.LineString=Kb,JR.geom.LinearRing=yi,JR.geom.MultiLineString=Qb,JR.geom.MultiPoint=Vb,JR.geom.MultiPolygon=ex,JR.geom.Point=vi,JR.geom.Polygon=Gi,JR.geom.Polygon.circular=Bi,JR.geom.Polygon.fromCircle=qi,JR.geom.Polygon.fromExtent=Ui,JR.geom.Polygon.makeRegular=Wi,JR.geom.SimpleGeometry=Wr,JR.geom.SimpleGeometry.getStrideForLayout=Ur,JR.geom.SimpleGeometry.transformGeom2D=qr,JR.geom.flat={},JR.geom.flat.area={},JR.geom.flat.area.linearRing=pi,JR.geom.flat.area.linearRings=fi,JR.geom.flat.area.linearRingss=di,JR.geom.flat.center={},JR.geom.flat.center.linearRingss=$b,JR.geom.flat.closest={},JR.geom.flat.closest.arrayMaxSquaredDelta=Yr,JR.geom.flat.closest.assignClosestArrayPoint=Kr,JR.geom.flat.closest.assignClosestMultiArrayPoint=Jr,JR.geom.flat.closest.assignClosestPoint=Zr,JR.geom.flat.closest.maxSquaredDelta=Hr,JR.geom.flat.closest.multiArrayMaxSquaredDelta=Xr,JR.geom.flat.contains={},JR.geom.flat.contains.linearRingContainsExtent=wi,JR.geom.flat.contains.linearRingContainsXY=bi,JR.geom.flat.contains.linearRingsContainsXY=xi,JR.geom.flat.contains.linearRingssContainsXY=_i,JR.geom.flat.deflate={},JR.geom.flat.deflate.deflateCoordinate=Qr,JR.geom.flat.deflate.deflateCoordinates=$r,JR.geom.flat.deflate.deflateCoordinatesArray=ti,JR.geom.flat.deflate.deflateMultiCoordinatesArray=ei,JR.geom.flat.flip={},JR.geom.flat.flip.flipXY=XI,JR.geom.flat.geodesic={},JR.geom.flat.geodesic.greatCircleArc=function(t,e,n,r,i,o){var a=cr("EPSG:4326"),s=Math.cos(an(e)),l=Math.sin(an(e)),u=Math.cos(an(r)),c=Math.sin(an(r)),h=Math.cos(an(n-t)),p=Math.sin(an(n-t)),f=l*c+s*u*h;return lx((function(e){if(1<=f)return[n,r];var i=e*Math.acos(f),o=Math.cos(i),a=Math.sin(i),d=p*u,g=s*c-l*u*h,y=Math.atan2(d,g),m=Math.asin(l*o+s*a*Math.cos(y));return[on(an(t)+Math.atan2(Math.sin(y)*a*s,o-l*Math.sin(m))),on(m)]}),br(a,i),o)},JR.geom.flat.geodesic.meridian=ux,JR.geom.flat.geodesic.parallel=cx,JR.geom.flat.inflate={},JR.geom.flat.inflate.inflateCoordinates=ui,JR.geom.flat.inflate.inflateCoordinatesArray=ci,JR.geom.flat.inflate.inflateMultiCoordinatesArray=hi,JR.geom.flat.interiorpoint={},JR.geom.flat.interiorpoint.getInteriorPointOfArray=Ei,JR.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=Si,JR.geom.flat.interpolate={},JR.geom.flat.interpolate.interpolatePoint=Hb,JR.geom.flat.interpolate.lineStringCoordinateAtM=Yb,JR.geom.flat.interpolate.lineStringsCoordinateAtM=Xb,JR.geom.flat.intersectsextent={},JR.geom.flat.intersectsextent.intersectsLineString=Ti,JR.geom.flat.intersectsextent.intersectsLineStringArray=Ii,JR.geom.flat.intersectsextent.intersectsLinearRing=Ai,JR.geom.flat.intersectsextent.intersectsLinearRingArray=Pi,JR.geom.flat.intersectsextent.intersectsLinearRingMultiArray=ki,JR.geom.flat.length={},JR.geom.flat.length.lineStringLength=gb,JR.geom.flat.length.linearRingLength=function(t,e,n,r){var i=gb(t,e,n,r),o=t[n-r]-t[e],a=t[n-r+1]-t[e+1];return i+Math.sqrt(o*o+a*a)},JR.geom.flat.orient={},JR.geom.flat.orient.inflateEnds=Fi,JR.geom.flat.orient.linearRingIsClockwise=Mi,JR.geom.flat.orient.linearRingsAreOriented=Ni,JR.geom.flat.orient.linearRingssAreOriented=Li,JR.geom.flat.orient.orientLinearRings=Ri,JR.geom.flat.orient.orientLinearRingsArray=Di,JR.geom.flat.reverse={},JR.geom.flat.reverse.coordinates=Oi,JR.geom.flat.segments={},JR.geom.flat.segments.forEach=Ci,JR.geom.flat.simplify={},JR.geom.flat.simplify.douglasPeucker=ni,JR.geom.flat.simplify.douglasPeuckerArray=ri,JR.geom.flat.simplify.douglasPeuckerMultiArray=function(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l],h=[];a=ri(t,e,c,r,i,o,a,h),s.push(h),e=c[c.length-1]}return a},JR.geom.flat.simplify.quantize=ai,JR.geom.flat.simplify.quantizeArray=si,JR.geom.flat.simplify.quantizeMultiArray=li,JR.geom.flat.simplify.radialDistance=ii,JR.geom.flat.simplify.simplifyLineString=function(t,e,n,r,i,o,a){var s=void 0!==a?a:[];return o||(n=ii(t,e,n,r,i,s,0),t=s,e=0,r=2),s.length=ni(t,e,n,r,i,s,0),s},JR.geom.flat.simplify.snap=oi,JR.geom.flat.straightchunk={},JR.geom.flat.straightchunk.matchingChunk=lb,JR.geom.flat.textpath={},JR.geom.flat.textpath.drawTextOnPath=db,JR.geom.flat.topology={},JR.geom.flat.topology.lineStringIsClosed=function(t,e,n,r){var i=n-r;return t[e]===t[i]&&t[e+1]===t[i+1]&&(n-e)/r>3&&!!pi(t,e,n,r)},JR.geom.flat.transform={},JR.geom.flat.transform.rotate=Rr,JR.geom.flat.transform.scale=Dr,JR.geom.flat.transform.transform2D=Lr,JR.geom.flat.transform.translate=Fr,JR.has={},JR.has.DEVICE_PIXEL_RATIO=Ft,JR.has.FIREFOX=Mt,JR.has.IMAGE_DECODE=zt,JR.has.MAC=Dt,JR.has.PASSIVE_EVENT_LISTENERS=Gt,JR.has.SAFARI=Nt,JR.has.SAFARI_BUG_237906=Lt,JR.has.WEBKIT=Rt,JR.has.WORKER_OFFSCREEN_CANVAS=jt,JR.interaction={},JR.interaction.DoubleClickZoom=sl,JR.interaction.DragAndDrop=sI,JR.interaction.DragAndDrop.DragAndDropEvent=aI,JR.interaction.DragBox=Nl,JR.interaction.DragBox.DragBoxEvent=Ml,JR.interaction.DragPan=Tl,JR.interaction.DragRotate=Al,JR.interaction.DragRotateAndZoom=uI,JR.interaction.DragZoom=Rl,JR.interaction.Draw=bI,JR.interaction.Draw.DrawEvent=wI,JR.interaction.Draw.createBox=function(){return function(t,e,n){var r=he([t[0],t[t.length-1]].map((function(t){return Ir(t,n)}))),i=[[Le(r),Re(r),Ue(r),Be(r),Le(r)]],o=e;o?o.setCoordinates(i):o=new Gi(i);var a=Cr();return a&&o.transform(n,a),o}},JR.interaction.Draw.createRegularPolygon=function(t,e){return function(n,r,i){var o=Ir(n[0],i),a=Ir(n[n.length-1],i),s=Math.sqrt(Yn(o,a)),l=r||qi(new pI(o),t),u=e;if(!e&&0!==e){var c=a[0]-o[0],h=a[1]-o[1];u=Math.atan2(h,c)}Wi(l,o,s,u);var p=Cr();return p&&l.transform(i,p),l}},JR.interaction.Extent=TI,JR.interaction.Extent.ExtentEvent=_I,JR.interaction.Interaction=ol,JR.interaction.Interaction.pan=rl,JR.interaction.Interaction.zoomByDelta=il,JR.interaction.KeyboardPan=Fl,JR.interaction.KeyboardZoom=zl,JR.interaction.Modify=DI,JR.interaction.Modify.ModifyEvent=MI,JR.interaction.MouseWheelZoom=Ul,JR.interaction.PinchRotate=Wl,JR.interaction.PinchZoom=Hl,JR.interaction.Pointer=cl,JR.interaction.Pointer.centroid=ul,JR.interaction.Select=GI,JR.interaction.Select.SelectEvent=jI,JR.interaction.Snap=WI,JR.interaction.Translate=YI,JR.interaction.Translate.TranslateEvent=HI,JR.interaction.defaults=Yl,JR.layer={},JR.layer.Base=Yo,JR.layer.BaseImage=Kv,JR.layer.BaseTile=sw,JR.layer.BaseVector=Vw,JR.layer.Graticule=dx,JR.layer.Group=Xa,JR.layer.Group.GroupEvent=Ha,JR.layer.Heatmap=bx,JR.layer.Image=rw,JR.layer.Layer=oa,JR.layer.Layer.inView=ia,JR.layer.MapboxVector=KT,JR.layer.MapboxVector.getMapboxPath=WT,JR.layer.MapboxVector.normalizeGlyphsUrl=HT,JR.layer.MapboxVector.normalizeSourceUrl=XT,JR.layer.MapboxVector.normalizeSpriteUrl=VT,JR.layer.MapboxVector.normalizeStyleUrl=YT,JR.layer.Tile=hw,JR.layer.Vector=sx,JR.layer.VectorImage=QT,JR.layer.VectorTile=Mx,JR.layer.WebGLPoints=tI,JR.layer.WebGLTile=iI,JR.loadingstrategy={},JR.loadingstrategy.all=Lu,JR.loadingstrategy.bbox=function(t,e){return[t]},JR.loadingstrategy.tile=function(t){return function(e,n,r){var i=t.getZForResolution(Or(n,r)),o=t.getTileRangeForExtentAndZ(Pr(e,r),i),a=[],s=[i,0,0];for(s[1]=o.minX;s[1]<=o.maxX;++s[1])for(s[2]=o.minY;s[2]<=o.maxY;++s[2])a.push(Ar(t.getTileCoordExtent(s),r));return a}},JR.math={},JR.math.ceil=pn,JR.math.clamp=Qe,JR.math.cosh=$e,JR.math.floor=hn,JR.math.lerp=ln,JR.math.log2=tn,JR.math.modulo=sn,JR.math.round=cn,JR.math.solveLinearSystem=rn,JR.math.squaredDistance=nn,JR.math.squaredSegmentDistance=en,JR.math.toDegrees=on,JR.math.toFixed=un,JR.math.toRadians=an,JR.net={},JR.net.ClientError=zu,JR.net.ResponseError=ju,JR.net.getJSON=Gu,JR.net.jsonp=Du,JR.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(Fu=XMLHttpRequest),n.g.XMLHttpRequest=t},JR.net.resolveUrl=Bu,JR.net.restoreXHR=function(){n.g.XMLHttpRequest=Fu},JR.obj={},JR.obj.assign=k,JR.obj.clear=O,JR.obj.getValues=M,JR.obj.isEmpty=N,JR.proj={},JR.proj.Projection=Je,JR.proj.Units={},JR.proj.Units.METERS_PER_UNIT=At,JR.proj.Units.fromCode=It,JR.proj.addCommon=Nr,JR.proj.addCoordinateTransforms=yr,JR.proj.addEquivalentProjections=pr,JR.proj.addEquivalentTransforms=fr,JR.proj.addProjection=lr,JR.proj.addProjections=ur,JR.proj.clearAllProjections=function(){kn(),Ln()},JR.proj.clearUserProjection=function(){Er=null},JR.proj.cloneTransform=ar,JR.proj.createProjection=dr,JR.proj.createSafeCoordinateTransform=Mr,JR.proj.createTransformFromCoordinateTransform=gr,JR.proj.disableCoordinateWarning=or,JR.proj.epsg3857={},JR.proj.epsg3857.EXTENT=yn,JR.proj.epsg3857.HALF_SIZE=gn,JR.proj.epsg3857.MAX_SAFE_Y=vn,JR.proj.epsg3857.PROJECTIONS=bn,JR.proj.epsg3857.RADIUS=dn,JR.proj.epsg3857.WORLD_EXTENT=mn,JR.proj.epsg3857.fromEPSG4326=xn,JR.proj.epsg3857.toEPSG4326=_n,JR.proj.epsg4326={},JR.proj.epsg4326.EXTENT=Cn,JR.proj.epsg4326.METERS_PER_UNIT=Tn,JR.proj.epsg4326.PROJECTIONS=An,JR.proj.epsg4326.RADIUS=Sn,JR.proj.equivalent=vr,JR.proj.fromLonLat=mr,JR.proj.fromUserCoordinate=Ir,JR.proj.fromUserExtent=Pr,JR.proj.fromUserResolution=Or,JR.proj.get=cr,JR.proj.getPointResolution=hr,JR.proj.getTransform=br,JR.proj.getTransformFromProjections=wr,JR.proj.getUserProjection=Cr,JR.proj.identityTransform=sr,JR.proj.proj4={},JR.proj.proj4.register=function(t){var e,n,r=Object.keys(t.defs),i=r.length;for(e=0;e<i;++e){var o=r[e];if(!cr(o)){var a=t.defs(o),s=a.units;s||"longlat"!==a.projName||(s=kt.DEGREES),lr(new Je({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:s}))}}for(e=0;e<i;++e){var l=r[e],u=cr(l);for(n=0;n<i;++n){var c=r[n],h=cr(c);if(!Dn(l,c))if(t.defs[l]===t.defs[c])pr([u,h]);else{var p=t(l,c);yr(u,h,Mr(u,h,p.forward),Mr(h,u,p.inverse))}}}},JR.proj.projections={},JR.proj.projections.add=Mn,JR.proj.projections.clear=kn,JR.proj.projections.get=On,JR.proj.setUserProjection=Sr,JR.proj.toLonLat=function(t,e){var n=xr(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=sn(r+180,360)-180),n},JR.proj.toUserCoordinate=Tr,JR.proj.toUserExtent=Ar,JR.proj.toUserResolution=kr,JR.proj.transform=xr,JR.proj.transformExtent=_r,JR.proj.transformWithProjections=function(t,e,n){return wr(e,n)(t)},JR.proj.transforms={},JR.proj.transforms.add=Rn,JR.proj.transforms.clear=Ln,JR.proj.transforms.get=Dn,JR.proj.transforms.remove=function(t,e){var n=t.getCode(),r=e.getCode(),i=Nn[n][r];return delete Nn[n][r],N(Nn[n])&&delete Nn[n],i},JR.proj.useGeographic=function(){Sr("EPSG:4326")},JR.render={},JR.render.Box=kl,JR.render.Event=ca,JR.render.Feature=ox,JR.render.Feature.toFeature=function(t,e){var n=t.getId(),r=ix(t),i=t.getProperties(),o=new wt;return void 0!==e&&o.setGeometryName(e),o.setGeometry(r),void 0!==n&&o.setId(n),o.setProperties(i,!0),o},JR.render.Feature.toGeometry=ix,JR.render.VectorContext=Uu,JR.render.canvas={},JR.render.canvas.Builder=eb,JR.render.canvas.BuilderGroup=fb,JR.render.canvas.Executor=Cb,JR.render.canvas.ExecutorGroup=kb,JR.render.canvas.ExecutorGroup.getPixelIndexArray=Pb,JR.render.canvas.ImageBuilder=rb,JR.render.canvas.Immediate=Wu,JR.render.canvas.Instruction={},JR.render.canvas.Instruction.beginPathInstruction=Jw,JR.render.canvas.Instruction.closePathInstruction=Qw,JR.render.canvas.Instruction.fillInstruction=Zw,JR.render.canvas.Instruction.strokeInstruction=Kw,JR.render.canvas.LineStringBuilder=ob,JR.render.canvas.PolygonBuilder=sb,JR.render.canvas.TextBuilder=hb,JR.render.canvas.checkedFonts=ka,JR.render.canvas.defaultFillStyle=xa,JR.render.canvas.defaultFont=ba,JR.render.canvas.defaultLineCap=_a,JR.render.canvas.defaultLineDash=Ea,JR.render.canvas.defaultLineDashOffset=0,JR.render.canvas.defaultLineJoin=Sa,JR.render.canvas.defaultLineWidth=1,JR.render.canvas.defaultMiterLimit=Ca,JR.render.canvas.defaultPadding=Pa,JR.render.canvas.defaultStrokeStyle=Ta,JR.render.canvas.defaultTextAlign=Ia,JR.render.canvas.defaultTextBaseline=Aa,JR.render.canvas.drawImageOrLabel=Ua,JR.render.canvas.getTextDimensions=Ba,JR.render.canvas.hitdetect={},JR.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=Ob,JR.render.canvas.hitdetect.createHitDetectionImageData=Mb,JR.render.canvas.hitdetect.hitDetect=Nb,JR.render.canvas.labelCache=Oa,JR.render.canvas.measureAndCacheTextWidth=Ga,JR.render.canvas.measureTextHeight=Fa,JR.render.canvas.measureTextWidth=za,JR.render.canvas.registerFont=Da,JR.render.canvas.rotateAtOffset=function(t,e,n,r){0!==e&&(t.translate(n,r),t.rotate(e),t.translate(-n,-r))},JR.render.canvas.textHeights=Ra,JR.render.getRenderPixel=function(t,e){return Ht(t.inversePixelTransform,e.slice(0))},JR.render.getVectorContext=rc,JR.render.toContext=function(t,e){var n=t.canvas,r=e||{},i=r.pixelRatio||Ft,o=r.size;o&&(n.width=o[0]*i,n.height=o[1]*i,n.style.width=o[0]+"px",n.style.height=o[1]+"px");var a=[0,0,n.width,n.height],s=Xt([1,0,0,1,0,0],i,i);return new Wu(t,i,a,s,0)},JR.renderer={},JR.renderer.Composite=Wa,JR.renderer.Layer=Nh,JR.renderer.Map=la,JR.renderer.canvas={},JR.renderer.canvas.ImageLayer=ew,JR.renderer.canvas.Layer=$v,JR.renderer.canvas.TileLayer=uw,JR.renderer.canvas.VectorImageLayer=Fb,JR.renderer.canvas.VectorLayer=Rb,JR.renderer.canvas.VectorTileLayer=qb,JR.renderer.canvas.common={},JR.renderer.canvas.common.IMAGE_SMOOTHING_DISABLED=oc,JR.renderer.canvas.common.IMAGE_SMOOTHING_ENABLED=ac,JR.renderer.vector={},JR.renderer.vector.defaultOrder=Qu,JR.renderer.vector.getSquaredTolerance=$u,JR.renderer.vector.getTolerance=tc,JR.renderer.vector.renderFeature=ec,JR.renderer.webgl={},JR.renderer.webgl.Layer=Uh,JR.renderer.webgl.Layer.colorDecodeId=Bh,JR.renderer.webgl.Layer.colorEncodeId=Gh,JR.renderer.webgl.Layer.getBlankImageData=function(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t},JR.renderer.webgl.Layer.writePointFeatureToBuffers=function(t,e,n,r,i,o){var a=3+i,s=t[e+0],l=t[e+1],u=Fh;u.length=i;for(var c=0;c<u.length;c++)u[c]=t[e+2+c];var h=o?o.vertexPosition:0,p=o?o.indexPosition:0,f=h/a;return zh(n,h,s,l,0),u.length&&n.set(u,h+3),zh(n,h+=a,s,l,1),u.length&&n.set(u,h+3),zh(n,h+=a,s,l,2),u.length&&n.set(u,h+3),zh(n,h+=a,s,l,3),u.length&&n.set(u,h+3),h+=a,r[p++]=f,r[p++]=f+1,r[p++]=f+3,r[p++]=f+1,r[p++]=f+2,r[p++]=f+3,jh.vertexPosition=h,jh.indexPosition=p,jh},JR.renderer.webgl.PointsLayer=Yw,JR.renderer.webgl.TileLayer=Qh,JR.renderer.webgl.TileLayer.Attributes=Vh,JR.renderer.webgl.TileLayer.Uniforms=Wh,JR.reproj={},JR.reproj.Image=hv,JR.reproj.Tile=Th,JR.reproj.Triangulation=Sh,JR.reproj.calculateSourceExtentResolution=cc,JR.reproj.calculateSourceResolution=uc,JR.reproj.common={},JR.reproj.common.ENABLE_RASTER_REPROJECTION=!0,JR.reproj.common.ERROR_THRESHOLD=.5,JR.reproj.render=hc,JR.resolutionconstraint={},JR.resolutionconstraint.createMinMaxResolution=Cs,JR.resolutionconstraint.createSnapToPower=Ss,JR.resolutionconstraint.createSnapToResolutions=Es,JR.rotationconstraint={},JR.rotationconstraint.createSnapToN=As,JR.rotationconstraint.createSnapToZero=Ps,JR.rotationconstraint.disable=Ts,JR.rotationconstraint.none=Is,JR.size={},JR.size.buffer=js,JR.size.hasArea=zs,JR.size.scale=Gs,JR.size.toSize=Bs,JR.source={},JR.source.BingMaps=kf,JR.source.BingMaps.quadKey=Pf,JR.source.CartoDB=Lf,JR.source.Cluster=qf,JR.source.DataTile=Vf,JR.source.GeoTIFF=Hm,JR.source.IIIF=uv,JR.source.Image=gv,JR.source.Image.ImageSourceEvent=fv,JR.source.Image.defaultImageLoadFunction=dv,JR.source.ImageArcGISRest=mv,JR.source.ImageCanvas=wv,JR.source.ImageMapGuide=xv,JR.source.ImageStatic=Ev,JR.source.ImageWMS=Ov,JR.source.OGCMapTile=zv,JR.source.OGCVectorTile=Vv,JR.source.OSM=Xv,JR.source.OSM.ATTRIBUTION=Yv,JR.source.Raster=Ew,JR.source.Raster.Processor=mw,JR.source.Raster.RasterSourceEvent=vw,JR.source.Raster.newImageData=dw,JR.source.Source=vf,JR.source.Stamen=Aw,JR.source.Tile=_f,JR.source.Tile.TileSourceEvent=xf,JR.source.TileArcGISRest=kw,JR.source.TileDebug=Mw,JR.source.TileImage=If,JR.source.TileJSON=Lw,JR.source.TileWMS=Dw,JR.source.UTFGrid=zw,JR.source.UTFGrid.CustomTile=jw,JR.source.UrlTile=Sf,JR.source.Vector=Bf,JR.source.Vector.VectorSourceEvent=Gf,JR.source.VectorTile=Bv,JR.source.VectorTile.defaultLoadFunction=Uv,JR.source.WMTS=Uw,JR.source.WMTS.optionsFromCapabilities=function(t,e){var n=x(t.Contents.Layer,(function(t,n,r){return t.Identifier==e.layer}));if(null===n)return null;var r,i=t.Contents.TileMatrixSet;(r=n.TileMatrixSetLink.length>1?E(n.TileMatrixSetLink,"projection"in e?function(t,n,r){var o=x(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=cr(o),s=cr(e.projection);return a&&s?vr(a,s):o==e.projection}:function(t,n,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(r=0);var o=n.TileMatrixSetLink[r].TileMatrixSet,a=n.TileMatrixSetLink[r].TileMatrixSetLimits,s=n.Format[0];"format"in e&&(s=e.format),(r=E(n.Style,(function(t,n,r){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(r=0);var l=n.Style[r].Identifier,u={};"Dimension"in n&&n.Dimension.forEach((function(t,e,n){var r=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),u[r]=i}));var c,h=x(t.Contents.TileMatrixSet,(function(t,e,n){return t.Identifier==o})),p=h.SupportedCRS;if(p&&(c=cr(p)),"projection"in e){var f=cr(e.projection);f&&(c&&!vr(f,c)||(c=f))}var d=!1,g="ne"==c.getAxisOrientation().substr(0,2),y=h.TileMatrix[0],v={MinTileCol:0,MinTileRow:0,MaxTileCol:y.MatrixWidth-1,MaxTileRow:y.MatrixHeight-1};if(a){v=a[a.length-1];var w=x(h.TileMatrix,(function(t){return t.Identifier===v.TileMatrix||h.Identifier+":"+t.Identifier===v.TileMatrix}));w&&(y=w)}var b=28e-5*y.ScaleDenominator/c.getMetersPerUnit(),_=g?[y.TopLeftCorner[1],y.TopLeftCorner[0]]:y.TopLeftCorner,S=y.TileWidth*b,C=y.TileHeight*b,T=h.BoundingBox,I=[_[0]+S*v.MinTileCol,_[1]-C*(1+v.MaxTileRow),_[0]+S*(1+v.MaxTileCol),_[1]-C*v.MinTileRow];if(void 0!==T&&!ye(T,I)){var A=n.WGS84BoundingBox,P=cr("EPSG:4326").getExtent();if(I=T,A)d=A[0]===P[0]&&A[2]===P[2];else{var k=_r(T,h.SupportedCRS,"EPSG:4326");d=k[0]-1e-10<=P[0]&&k[2]+1e-10>=P[2]}}var O=Np(h,I,a),M=[],N=e.requestEncoding;if(N=void 0!==N?N:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var L=t.OperationsMetadata.GetTile.DCP.HTTP.Get,R=0,D=L.length;R<D;++R)if(L[R].Constraint){var F=x(L[R].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===N&&(N=F[0]),N!==Gw)break;m(F,Gw)&&M.push(L[R].href)}else L[R].href&&(N=Gw,M.push(L[R].href));return 0===M.length&&(N="REST",n.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,M.push(t.template))}))),{urls:M,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:N,tileGrid:O,style:l,dimensions:u,wrapX:d,crossOrigin:e.crossOrigin}},JR.source.XYZ=Mf,JR.source.Zoomify=Km,JR.source.Zoomify.CustomTile=Zm,JR.source.common={},JR.source.common.DEFAULT_WMS_VERSION=Sv,JR.source.ogcTileUtil={},JR.source.ogcTileUtil.getMapTileUrlTemplate=Lv,JR.source.ogcTileUtil.getTileSetInfo=Fv,JR.source.ogcTileUtil.getVectorTileUrlTemplate=Rv,JR.source.sourcesFromTileGrid=function(t,e){var n=new lu(32),r=t.getExtent();return function(i,o){n.expireCache(),r&&(i=Ge(r,i));var a=t.getZForResolution(o),s=[];return t.forEachTileCoord(i,a,(function(t){var r=t.toString();if(!n.containsKey(r)){var i=e(t);n.set(r,i)}s.push(n.get(r))})),s}},JR.sphere={},JR.sphere.DEFAULT_RADIUS=$n,JR.sphere.getArea=function t(e,n){var r=n||{},i=r.radius||$n,o=r.projection||"EPSG:3857",a=e.getType();a!==St.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,u,c,h,p,f=0;switch(a){case St.POINT:case St.MULTI_POINT:case St.LINE_STRING:case St.MULTI_LINE_STRING:case St.LINEAR_RING:break;case St.POLYGON:for(s=e.getCoordinates(),f=Math.abs(nr(s[0],i)),u=1,c=s.length;u<c;++u)f-=Math.abs(nr(s[u],i));break;case St.MULTI_POLYGON:for(u=0,c=(s=e.getCoordinates()).length;u<c;++u)for(l=s[u],f+=Math.abs(nr(l[0],i)),h=1,p=l.length;h<p;++h)f-=Math.abs(nr(l[h],i));break;case St.GEOMETRY_COLLECTION:var d=e.getGeometries();for(u=0,c=d.length;u<c;++u)f+=t(d[u],n);break;default:throw new Error("Unsupported geometry type: "+a)}return f},JR.sphere.getDistance=tr,JR.sphere.getLength=function t(e,n){var r=n||{},i=r.radius||$n,o=r.projection||"EPSG:3857",a=e.getType();a!==St.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,u,c,h,p,f=0;switch(a){case St.POINT:case St.MULTI_POINT:break;case St.LINE_STRING:case St.LINEAR_RING:f=er(s=e.getCoordinates(),i);break;case St.MULTI_LINE_STRING:case St.POLYGON:for(u=0,c=(s=e.getCoordinates()).length;u<c;++u)f+=er(s[u],i);break;case St.MULTI_POLYGON:for(u=0,c=(s=e.getCoordinates()).length;u<c;++u)for(h=0,p=(l=s[u]).length;h<p;++h)f+=er(l[h],i);break;case St.GEOMETRY_COLLECTION:var d=e.getGeometries();for(u=0,c=d.length;u<c;++u)f+=t(d[u],n);break;default:throw new Error("Unsupported geometry type: "+a)}return f},JR.sphere.offset=rr,JR.string={},JR.string.compareVersions=jn,JR.string.padNumber=Fn,JR.structs={},JR.structs.LRUCache=lu,JR.structs.LinkedList=cf,JR.structs.PriorityQueue=fs,JR.structs.PriorityQueue.DROP=ps,JR.structs.RBush=pf,JR.style={},JR.style.Circle=jp,JR.style.Fill=zp,JR.style.Icon=Qp,JR.style.IconImage=Kp,JR.style.IconImage.get=Zp,JR.style.IconImageCache=No,JR.style.IconImageCache.shared=Lo,JR.style.Image=Lp,JR.style.RegularShape=Dp,JR.style.Stroke=$p,JR.style.Style=lf,JR.style.Style.createDefaultStyle=of,JR.style.Style.createEditingStyle=af,JR.style.Style.toFunction=nf,JR.style.Text=uf,JR.style.expressions={},JR.style.expressions.Operators=op,JR.style.expressions.PALETTE_TEXTURE_ARRAY=Sp,JR.style.expressions.arrayToGlsl=up,JR.style.expressions.colorToGlsl=cp,JR.style.expressions.expressionToGlsl=fp,JR.style.expressions.getStringNumberEquivalent=hp,JR.style.expressions.getValueType=ap,JR.style.expressions.isTypeUnique=sp,JR.style.expressions.numberToGlsl=lp,JR.style.expressions.stringToGlsl=pp,JR.style.expressions.uniformNameForVariable=Ep,JR.tilecoord={},JR.tilecoord.createOrUpdate=uu,JR.tilecoord.fromKey=fu,JR.tilecoord.getCacheKeyForTileKey=pu,JR.tilecoord.getKey=hu,JR.tilecoord.getKeyZXY=cu,JR.tilecoord.hash=du,JR.tilecoord.withinExtentAndZ=gu,JR.tilegrid={},JR.tilegrid.TileGrid=fc,JR.tilegrid.WMTS=Mp,JR.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Np,JR.tilegrid.common={},JR.tilegrid.common.DEFAULT_MAX_ZOOM=42,JR.tilegrid.common.DEFAULT_TILE_SIZE=vs,JR.tilegrid.createForExtent=yc,JR.tilegrid.createForProjection=wc,JR.tilegrid.createXYZ=mc,JR.tilegrid.extentFromProjection=bc,JR.tilegrid.getForProjection=dc,JR.tilegrid.wrapX=gc,JR.tileurlfunction={},JR.tileurlfunction.createFromTemplate=xc,JR.tileurlfunction.createFromTemplates=_c;JR.tileurlfunction.createFromTileUrlFunctions=Ec,JR.tileurlfunction.expandUrl=Cc,JR.tileurlfunction.nullTileUrlFunction=Sc,JR.transform={},JR.transform.apply=Ht,JR.transform.compose=Jt,JR.transform.composeCssTransform=function(t,e,n,r,i,o,a){return te(Jt([1,0,0,1,0,0],t,e,n,r,i,o,a))},JR.transform.create=function(){return[1,0,0,1,0,0]},JR.transform.determinant=$t,JR.transform.invert=function(t){return Qt(t,t)},JR.transform.makeInverse=Qt,JR.transform.makeScale=Zt,JR.transform.multiply=qt,JR.transform.reset=Ut,JR.transform.rotate=Yt,JR.transform.scale=Xt,JR.transform.set=Wt,JR.transform.setFromArray=Vt,JR.transform.toString=te,JR.transform.translate=Kt,JR.uri={},JR.uri.appendParams=Tc,JR.util={},JR.util.VERSION=l,JR.util.abstract=i,JR.util.getUid=a,JR.vec={},JR.vec.mat4={},JR.vec.mat4.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},JR.vec.mat4.fromTransform=ph,JR.webgl={},JR.webgl.ARRAY_BUFFER=Ac,JR.webgl.Buffer=lh,JR.webgl.Buffer.getArrayClassForType=sh,JR.webgl.DYNAMIC_DRAW=Oc,JR.webgl.ELEMENT_ARRAY_BUFFER=Pc,JR.webgl.FLOAT=Mc,JR.webgl.Helper=bh,JR.webgl.Helper.computeAttributesStride=vh,JR.webgl.PaletteTexture=xh,JR.webgl.PostProcessingPass=hh,JR.webgl.RenderTarget=Eh,JR.webgl.STATIC_DRAW=kc,JR.webgl.STREAM_DRAW=35040,JR.webgl.ShaderBuilder={},JR.webgl.ShaderBuilder.ShaderBuilder=Ap,JR.webgl.ShaderBuilder.parseLiteralStyle=Pp,JR.webgl.TileTexture=Oh,JR.webgl.UNSIGNED_BYTE=5121,JR.webgl.UNSIGNED_INT=5125,JR.webgl.UNSIGNED_SHORT=5123,JR.webgl.getContext=Lc,JR.webgl.getSupportedExtensions=function(){if(!Ic){var t=Lc(document.createElement("canvas"));t&&(Ic=t.getSupportedExtensions())}return Ic},JR.xml={},JR.xml.OBJECT_PROPERTY_NODE_FACTORY=Kc,JR.xml.XML_SCHEMA_INSTANCE_URI=Rc,JR.xml.createElementNS=Dc,JR.xml.getAllTextContent=Fc,JR.xml.Gw=jc,JR.xml.getAttributeNS=Gc,JR.xml.getDocument=ah,JR.xml.getXMLSerializer=ih,JR.xml.isDocument=zc,JR.xml.makeArrayExtender=Uc,JR.xml.makeArrayPusher=qc,JR.xml.makeArraySerializer=Xc,JR.xml.makeChildAppender=Yc,JR.xml.makeObjectPropertyPusher=Vc,JR.xml.makeObjectPropertySetter=Hc,JR.xml.makeReplacer=Wc,JR.xml.makeSequence=Jc,JR.xml.makeSimpleNodeFactory=Zc,JR.xml.makeStructureNS=Qc,JR.xml.parse=Bc,JR.xml.parseNode=$c,JR.xml.pushParseAndPop=th,JR.xml.pushSerializeAndPop=nh,JR.xml.registerDocument=function(t){oh=t},JR.xml.registerXMLSerializer=function(t){rh=t},JR.xml.serialize=eh;var QR=JR},150:function(t,e,n){"use strict";n.d(e,{Ie:function(){return c},It:function(){return a},L:function(){return r},L5:function(){return p},P1:function(){return d},Qb:function(){return f},pd:function(){return h},sf:function(){return l}});var r={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=parseInt(o,10));var a=[i.BitsPerSample,i.ExtraSamples,i.SampleFormat,i.StripByteCounts,i.StripOffsets,i.StripRowCounts,i.TileByteCounts,i.TileOffsets,i.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},l={};for(var u in s)s.hasOwnProperty(u)&&(l[s[u]]=parseInt(u,10));var c={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},p={Version:0,AddCompression:1},f={None:0,Deflate:1},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},g={};for(var y in d)d.hasOwnProperty(y)&&(g[d[y]]=parseInt(y,10))}},r={};function i(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}return i.m=e,i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,n){return i.f[n](t,e),e}),[]))},i.u=function(t){return t+".ol.js"},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t={},i.l=function(e,n,r,o){if(t[e])t[e].push(n);else{var a,s;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")=="ol:"+r){a=c;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack","ol:"+r),a.src=e),t[e]=[n];var h=function(n,r){a.onerror=a.onload=null,clearTimeout(p);var i=t[e];if(delete t[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(t){return t(r)})),n)return n(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),s&&document.head.appendChild(a)}},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t}(),function(){var t={179:0};i.f.j=function(e,n){var r=i.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,i){r=t[e]=[n,i]}));n.push(r[2]=o);var a=i.p+i.u(e),s=new Error;i.l(a,(function(n){if(i.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,r[1](s)}}),"chunk-"+e,e)}};var e=function(e,n){var r,o,a=n[0],s=n[1],l=n[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);l&&l(i)}for(e&&e(n);u<a.length;u++)o=a[u],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunkol=self.webpackChunkol||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}(),i(760),i(920).default}()},9942:t=>{t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return i(e[a][1][t]||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r=t("strxml"),i=r.tag,o=r.encode;function a(t,e){return function(n){if(!n.properties||!s.valid(n.geometry))return"";var r=s.any(n.geometry);if(!r)return"";var a="",l="";if(t.simplestyle){var h=function(t){var e="";return t["marker-symbol"]&&(e=e+"ms"+t["marker-symbol"]),t["marker-color"]&&(e=e+"mc"+t["marker-color"].replace("#","")),t["marker-size"]&&(e=e+"ms"+t["marker-size"]),t.stroke&&(e=e+"s"+t.stroke.replace("#","")),t["stroke-width"]&&(e=e+"sw"+t["stroke-width"].toString().replace(".","")),t["stroke-opacity"]&&(e=e+"mo"+t["stroke-opacity"].toString().replace(".","")),t.fill&&(e=e+"f"+t.fill.replace("#","")),t["fill-opacity"]&&(e=e+"fo"+t["fill-opacity"].toString().replace(".","")),e}(n.properties);h&&(s.isPoint(n.geometry)&&function(t){return!!(t["marker-size"]||t["marker-symbol"]||t["marker-color"])}(n.properties)?(-1===e.indexOf(h)&&(a=function(t,e){return i("Style",i("IconStyle",i("Icon",i("href",function(t){var e=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",r=(t["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+e.charAt(0)+n+"+"+r+".png"}(t))))+i("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]]),[["id",e]])}(n.properties,h),e.push(h)),l=i("styleUrl","#"+h)):(s.isPolygon(n.geometry)||s.isLine(n.geometry))&&function(t){for(var e in t)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[e])return!0}(n.properties)&&(-1===e.indexOf(h)&&(a=function(t,e){var n=i("LineStyle",[i("color",c(t.stroke,t["stroke-opacity"])||"ff555555")+i("width",void 0===t["stroke-width"]?2:t["stroke-width"])]),r="";return(t.fill||t["fill-opacity"])&&(r=i("PolyStyle",[i("color",c(t.fill,t["fill-opacity"])||"88555555")])),i("Style",n+r,[["id",e]])}(n.properties,h),e.push(h)),l=i("styleUrl","#"+h)))}return a+i("Placemark",function(t,e){return t[e.name]?i("name",o(t[e.name])):""}(n.properties,t)+function(t,e){return t[e.description]?i("description",o(t[e.description])):""}(n.properties,t)+function(t){return i("ExtendedData",function(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}(t).map(u).join(""))}(n.properties)+function(t,e){return t[e.timestamp]?i("TimeStamp",i("when",o(t[e.timestamp]))):""}(n.properties,t)+r+l)}}e.exports=function(t,e){return'<?xml version="1.0" encoding="UTF-8"?>'+i("kml",i("Document",function(t){return void 0!==t.documentName?i("name",t.documentName):""}(e=e||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"})+function(t){return void 0!==t.documentDescription?i("description",t.documentDescription):""}(e)+function(t,e){if(!t.type)return"";var n=[];switch(t.type){case"FeatureCollection":return t.features?t.features.map(a(e,n)).join(""):"";case"Feature":return a(e,n)(t);default:return a(e,n)({type:"Feature",geometry:t,properties:{}})}}(t,e)),[["xmlns","http://www.opengis.net/kml/2.2"]])};var s={Point:function(t){return i("Point",i("coordinates",t.coordinates.join(",")))},LineString:function(t){return i("LineString",i("coordinates",l(t.coordinates)))},Polygon:function(t){if(!t.coordinates.length)return"";var e=t.coordinates[0],n=t.coordinates.slice(1),r=i("outerBoundaryIs",i("LinearRing",i("coordinates",l(e)))),o=n.map((function(t){return i("innerBoundaryIs",i("LinearRing",i("coordinates",l(t))))})).join("");return i("Polygon",r+o)},MultiPoint:function(t){return t.coordinates.length?i("MultiGeometry",t.coordinates.map((function(t){return s.Point({coordinates:t})})).join("")):""},MultiPolygon:function(t){return t.coordinates.length?i("MultiGeometry",t.coordinates.map((function(t){return s.Polygon({coordinates:t})})).join("")):""},MultiLineString:function(t){return t.coordinates.length?i("MultiGeometry",t.coordinates.map((function(t){return s.LineString({coordinates:t})})).join("")):""},GeometryCollection:function(t){return i("MultiGeometry",t.geometries.map(s.any).join(""))},valid:function(t){return t&&t.type&&(t.coordinates||"GeometryCollection"===t.type&&t.geometries&&t.geometries.every(s.valid))},any:function(t){return s[t.type]?s[t.type](t):""},isPoint:function(t){return"Point"===t.type||"MultiPoint"===t.type},isPolygon:function(t){return"Polygon"===t.type||"MultiPolygon"===t.type},isLine:function(t){return"LineString"===t.type||"MultiLineString"===t.type}};function l(t){return t.map((function(t){return t.join(",")})).join(" ")}function u(t){return i("Data",i("value",o(t[1])),[["name",o(t[0])]])}function c(t,e){if("string"!=typeof t)return"";if(3===(t=t.replace("#","").toLowerCase()).length)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!==t.length)return"";var n=t[0]+t[1],r=t[2]+t[3],i=t[4]+t[5],o="ff";return"number"==typeof e&&e>=0&&e<=1&&((o=(255*e).toString(16)).indexOf(".")>-1&&(o=o.substr(0,o.indexOf("."))),o.length<2&&(o="0"+o)),o+i+r+n}},{strxml:2}],2:[function(t,e,n){function r(t){return t&&t.length?" "+t.map((function(t){return t[0]+'="'+t[1]+'"'})).join(" "):""}e.exports.attr=r,e.exports.tagClose=function(t,e){return"<"+t+r(e)+"/>"},e.exports.tag=function(t,e,n){return"<"+t+r(n)+">"+e+"</"+t+">"},e.exports.encode=function(t){return(null===t?"":t.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},{}]},{},[1])(1)},2350:(t,e,n)=>{function r(t){this.options=t||{locator:{}}}function i(){this.cdata=!1}function o(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function a(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function s(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function l(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}r.prototype.parseFromString=function(t,e){var n=this.options,r=new h,o=n.domBuilder||new i,s=n.errorHandler,l=n.locator,c=n.xmlns||{},p=/\/x?html?$/.test(e),f=p?u.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&o.setDocumentLocator(l),r.errorHandler=function(t,e,n){if(!t){if(e instanceof i)return e;t=e}var r={},o=t instanceof Function;function s(e){var i=t[e];!i&&o&&(i=2==t.length?function(n){t(e,n)}:t),r[e]=i&&function(t){i("[xmldom "+e+"]\t"+t+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,o,l),r.domBuilder=n.domBuilder||o,p&&(c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",t&&"string"==typeof t?r.parse(t,c,f):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,a=i.createElementNS(t,n||e),s=r.length;l(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var u=0;u<s;u++){t=r.getURI(u);var c=r.getValue(u),h=(n=r.getQName(u),i.createAttributeNS(t,n));this.locator&&o(r.getLocator(u),h),h.value=h.nodeValue=c,a.setAttributeNode(h)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&o(this.locator,n),l(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=s.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&o(this.locator,r),l(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&o(this.locator,i),l(this,i)}},warning:function(t){console.warn("[xmldom warning]\t"+t,a(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,a(this.locator))},fatalError:function(t){throw new p(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){i.prototype[t]=function(){return null}}));var u=n(9493),c=n(1834),h=c.XMLReader,p=c.ParseError,f=n(2484).DOMImplementation;n(2484),e.a=r},2484:(t,e)=>{function n(t,e){for(var n in t)e[n]=t[n]}function r(t,e){var r=t.prototype;if(!(r instanceof e)){function i(){}i.prototype=e.prototype,n(r,i=new i),t.prototype=r=i}r.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),r.constructor=t)}var i="http://www.w3.org/1999/xhtml",o={},a=o.ELEMENT_NODE=1,s=o.ATTRIBUTE_NODE=2,l=o.TEXT_NODE=3,u=o.CDATA_SECTION_NODE=4,c=o.ENTITY_REFERENCE_NODE=5,h=o.ENTITY_NODE=6,p=o.PROCESSING_INSTRUCTION_NODE=7,f=o.COMMENT_NODE=8,d=o.DOCUMENT_NODE=9,g=o.DOCUMENT_TYPE_NODE=10,y=o.DOCUMENT_FRAGMENT_NODE=11,m=o.NOTATION_NODE=12,v={},w={},b=(v.INDEX_SIZE_ERR=(w[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),x=(v.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),v.NOT_FOUND_ERR=(w[8]="Not found",8)),_=(v.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));function E(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,w[t]),this.message=w[t],Error.captureStackTrace&&Error.captureStackTrace(this,E);return n.code=t,e&&(this.message=this.message+": "+e),n}function S(){}function C(t,e){this._node=t,this._refresh=e,T(this)}function T(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);rt(t,"length",r.length),n(r,t),t._inc=e}}function I(){}function A(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function P(t,e,n,r){if(r?e[A(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&D(i,t,r),function(t,e,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(i,t,n))}}function k(t,e,n){var r=A(e,n);if(!(r>=0))throw E(x,new Error(t.tagName+"@"+n));for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var o=t.ownerDocument;o&&(D(o,t,n),n.ownerElement=null)}}function O(t){if(this._features={},t)for(var e in t)this._features=t[e]}function M(){}function N(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function L(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(L(t,e))return!0}while(t=t.nextSibling)}function R(){}function D(t,e,n,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete e._nsMap[n.prefix?n.localName:""]}function F(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function j(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,F(t.ownerDocument,t),e}function z(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===y){var i=e.firstChild;if(null==i)return e;var o=e.lastChild}else i=o=e;var a=n?n.previousSibling:t.lastChild;i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:t.firstChild=i,null==n?t.lastChild=o:n.previousSibling=o;do{i.parentNode=t}while(i!==o&&(i=i.nextSibling));return F(t.ownerDocument||t,t),e.nodeType==y&&(e.firstChild=e.lastChild=null),e}function G(){this._nsMap={}}function B(){}function U(){}function q(){}function W(){}function V(){}function H(){}function Y(){}function X(){}function Z(){}function K(){}function J(){}function Q(t,e){var n=[],r=9==this.nodeType&&this.documentElement||this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return tt(this,n,t,e,a),n.join("")}function $(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return!0}function tt(t,e,n,r,o){if(r){if(!(t=r(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case a:o||(o=[]),o.length;var h=t.attributes,m=h.length,v=t.firstChild,w=t.tagName;n=i===t.namespaceURI||n,e.push("<",w);for(var b=0;b<m;b++)"xmlns"==(x=h.item(b)).prefix?o.push({prefix:x.localName,namespace:x.value}):"xmlns"==x.nodeName&&o.push({prefix:"",namespace:x.value});for(b=0;b<m;b++){var x;if($(x=h.item(b),0,o)){var _=x.prefix||"",E=x.namespaceURI,S=_?" xmlns:"+_:" xmlns";e.push(S,'="',E,'"'),o.push({prefix:_,namespace:E})}tt(x,e,n,r,o)}if($(t,0,o)&&(_=t.prefix||"",(E=t.namespaceURI)&&(S=_?" xmlns:"+_:" xmlns",e.push(S,'="',E,'"'),o.push({prefix:_,namespace:E}))),v||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(w)){if(e.push(">"),n&&/^script$/i.test(w))for(;v;)v.data?e.push(v.data):tt(v,e,n,r,o),v=v.nextSibling;else for(;v;)tt(v,e,n,r,o),v=v.nextSibling;e.push("</",w,">")}else e.push("/>");return;case d:case y:for(v=t.firstChild;v;)tt(v,e,n,r,o),v=v.nextSibling;return;case s:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,N),'"');case l:return e.push(t.data.replace(/[<&]/g,N).replace(/]]>/g,"]]&gt;"));case u:return e.push("<![CDATA[",t.data,"]]>");case f:return e.push("\x3c!--",t.data,"--\x3e");case g:var C=t.publicId,T=t.systemId;if(e.push("<!DOCTYPE ",t.name),C)e.push(" PUBLIC ",C),T&&"."!=T&&e.push(" ",T),e.push(">");else if(T&&"."!=T)e.push(" SYSTEM ",T,">");else{var I=t.internalSubset;I&&e.push(" [",I,"]"),e.push(">")}return;case p:return e.push("<?",t.target," ",t.data,"?>");case c:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function et(t,e,n){var r;switch(e.nodeType){case a:(r=e.cloneNode(!1)).ownerDocument=t;case y:break;case s:n=!0}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var i=e.firstChild;i;)r.appendChild(et(t,i,n)),i=i.nextSibling;return r}function nt(t,e,n){var r=new e.constructor;for(var i in e){var o=e[i];"object"!=typeof o&&o!=r[i]&&(r[i]=o)}switch(e.childNodes&&(r.childNodes=new S),r.ownerDocument=t,r.nodeType){case a:var l=e.attributes,u=r.attributes=new I,c=l.length;u._ownerElement=r;for(var h=0;h<c;h++)r.setAttributeNode(nt(t,l.item(h),!0));break;case s:n=!0}if(n)for(var p=e.firstChild;p;)r.appendChild(nt(t,p,n)),p=p.nextSibling;return r}function rt(t,e,n){t[e]=n}v.INVALID_STATE_ERR=(w[11]="Invalid state",11),v.SYNTAX_ERR=(w[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),v.NAMESPACE_ERR=(w[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(w[15]="Invalid access",15),E.prototype=Error.prototype,n(v,E),S.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)tt(this[r],n,t,e);return n.join("")}},C.prototype.item=function(t){return T(this),this[t]},r(C,S),I.prototype={length:0,item:S.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new E(_);var n=this.getNamedItem(t.nodeName);return P(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new E(_);return e=this.getNamedItemNS(t.namespaceURI,t.localName),P(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return k(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return k(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}},O.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!(!n||e&&!(e in n))},createDocument:function(t,e,n){var r=new R;if(r.implementation=this,r.childNodes=new S,r.doctype=n,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new H;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return z(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return j(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return nt(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==l&&t.nodeType==l?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var r in n)if(n[r]==t)return r;e=e.nodeType==s?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==s?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},n(o,M),n(o,M.prototype),R.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==y){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return null==this.documentElement&&t.nodeType==a&&(this.documentElement=t),z(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),j(this,t)},importNode:function(t,e){return et(this,t,e)},getElementById:function(t){var e=null;return L(this.documentElement,(function(n){if(n.nodeType==a&&n.getAttribute("id")==t)return e=n,!0})),e},getElementsByClassName:function(t){var e=new RegExp("(^|\\s)"+t+"(\\s|$)");return new C(this,(function(t){var n=[];return L(t.documentElement,(function(r){r!==t&&r.nodeType==a&&e.test(r.getAttribute("class"))&&n.push(r)})),n}))},createElement:function(t){var e=new G;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new S,(e.attributes=new I)._ownerElement=e,e},createDocumentFragment:function(){var t=new K;return t.ownerDocument=this,t.childNodes=new S,t},createTextNode:function(t){var e=new q;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new W;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new V;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new J;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new B;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Z;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new G,r=e.split(":"),i=n.attributes=new I;return n.childNodes=new S,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new B,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}},r(R,M),G.prototype={nodeType:a,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===y?this.insertBefore(t,null):function(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e),r=t.lastChild}return r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,F(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new C(this,(function(e){var n=[];return L(e,(function(r){r===e||r.nodeType!=a||"*"!==t&&r.tagName!=t||n.push(r)})),n}))},getElementsByTagNameNS:function(t,e){return new C(this,(function(n){var r=[];return L(n,(function(i){i===n||i.nodeType!==a||"*"!==t&&i.namespaceURI!==t||"*"!==e&&i.localName!=e||r.push(i)})),r}))}},R.prototype.getElementsByTagName=G.prototype.getElementsByTagName,R.prototype.getElementsByTagNameNS=G.prototype.getElementsByTagNameNS,r(G,M),B.prototype.nodeType=s,r(B,M),U.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(w[b])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},r(U,M),q.prototype={nodeName:"#text",nodeType:l,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(q,U),W.prototype={nodeName:"#comment",nodeType:f},r(W,U),V.prototype={nodeName:"#cdata-section",nodeType:u},r(V,U),H.prototype.nodeType=g,r(H,M),Y.prototype.nodeType=m,r(Y,M),X.prototype.nodeType=h,r(X,M),Z.prototype.nodeType=c,r(Z,M),K.prototype.nodeName="#document-fragment",K.prototype.nodeType=y,r(K,M),J.prototype.nodeType=p,r(J,M),M.prototype.toString=Q;try{if(Object.defineProperty){function it(t){switch(t.nodeType){case a:case y:var e=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&e.push(it(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}}Object.defineProperty(C.prototype,"length",{get:function(){return T(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return it(this)},set:function(t){switch(this.nodeType){case a:case y:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),rt=function(t,e,n){t["$$"+e]=n}}}catch(ot){}e.DOMImplementation=O},9493:(t,e)=>{e.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}},1834:(t,e)=>{var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function o(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function a(){}function s(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function l(t,e,n,r,i,o){function a(t,e,r){t in n.attributeNames&&o.fatalError("Attribute "+t+" redefined"),n.addValue(t,e,r)}for(var s,l=++e,u=0;;){var c=t.charAt(l);switch(c){case"=":if(1===u)s=t.slice(e,l),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(o.warning('attribute value must after "="'),s=t.slice(e,l)),e=l+1,!((l=t.indexOf(c,e))>0))throw new Error("attribute value no end '"+c+"' match");a(s,h=t.slice(e,l).replace(/&#?\w+;/g,i),e-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');a(s,h=t.slice(e,l).replace(/&#?\w+;/g,i),e),o.warning('attribute "'+s+'" missed start quot('+c+")!!"),e=l+1,u=5}break;case"/":switch(u){case 0:n.setTagName(t.slice(e,l));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==u&&n.setTagName(t.slice(e,l)),l;case">":switch(u){case 0:n.setTagName(t.slice(e,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=t.slice(e,l)).slice(-1)&&(n.closed=!0,h=h.slice(0,-1));case 2:2===u&&(h=s),4==u?(o.warning('attribute "'+h+'" missed quot(")!'),a(s,h.replace(/&#?\w+;/g,i),e)):("http://www.w3.org/1999/xhtml"===r[""]&&h.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),a(h,h,e));break;case 3:throw new Error("attribute value missed!!")}return l;case"":c=" ";default:if(c<=" ")switch(u){case 0:n.setTagName(t.slice(e,l)),u=6;break;case 1:s=t.slice(e,l),u=2;break;case 4:var h=t.slice(e,l).replace(/&#?\w+;/g,i);o.warning('attribute "'+h+'" missed quot(")!!'),a(s,h,e);case 5:u=6}else switch(u){case 2:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&s.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),a(s,s,e),e=l,u=1;break;case 5:o.warning('attribute space is required"'+s+'"!!');case 6:u=1,e=l;break;case 3:u=4,e=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function u(t,e,n){for(var r=t.tagName,i=null,o=t.length;o--;){var a=t[o],s=a.qName,l=a.value;if((f=s.indexOf(":"))>0)var u=a.prefix=s.slice(0,f),c=s.slice(f+1),h="xmlns"===u&&c;else c=s,u=null,h="xmlns"===s&&"";a.localName=c,!1!==h&&(null==i&&(i={},p(n,n={})),n[h]=i[h]=l,a.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(h,l))}for(o=t.length;o--;)(u=(a=t[o]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=n[u||""]));var f;(f=r.indexOf(":"))>0?(u=t.prefix=r.slice(0,f),c=t.localName=r.slice(f+1)):(u=null,c=t.localName=r);var d=t.uri=n[u||""];if(e.startElement(d,c,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=i,!0;if(e.endElement(d,c,r),i)for(u in i)e.endPrefixMapping(u)}function c(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=t.indexOf("</"+n+">",e),a=t.substring(e+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return e+1}function h(t,e,n,r){var i=r[n];return null==i&&((i=t.lastIndexOf("</"+n+">"))<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function p(t,e){for(var n in t)e[n]=t[n]}function f(t,e,n,r){if("-"===t.charAt(e+2))return"-"===t.charAt(e+3)?(i=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,i-e-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==t.substr(e+3,6)){var i=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,i-e-9),n.endCDATA(),i+3}var o=function(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(r.push(n),n[1])return r}(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],l=!1,u=!1;a>3&&(/^public$/i.test(o[2][0])?(l=o[3][0],u=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var c=o[a-1];return n.startDTD(s,l,u),n.endDTD(),c.index+c[0].length}return-1}function d(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function g(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,a.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),p(e,e={}),function(t,e,n,r,i){function a(t){var e=t.slice(1,-1);return e in n?n[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(i.error("entity not found:"+t),t)}function p(e){if(e>E){var n=t.substring(E,e).replace(/&#?\w+;/g,a);b&&y(E),r.characters(n,0,e-E),E=e}}function y(e,n){for(;e>=v&&(n=w.exec(t));)m=n.index,v=m+n[0].length,b.lineNumber++;b.columnNumber=e-m+1}for(var m=0,v=0,w=/.*(?:\r\n?|\n)|.*$/g,b=r.locator,x=[{currentNSMap:e}],_={},E=0;;){try{var S=t.indexOf("<",E);if(S<0){if(!t.substr(E).match(/^\s*$/)){var C=r.doc,T=C.createTextNode(t.substr(E));C.appendChild(T),r.currentElement=T}return}switch(S>E&&p(S),t.charAt(S+1)){case"/":var I=t.indexOf(">",S+3),A=t.substring(S+2,I),P=x.pop();I<0?(A=t.substring(S+2).replace(/[\s<].*/,""),i.error("end tag name: "+A+" is not complete:"+P.tagName),I=S+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),i.error("end tag name: "+A+" maybe not complete"),I=S+1+A.length);var k=P.localNSMap,O=P.tagName==A;if(O||P.tagName&&P.tagName.toLowerCase()==A.toLowerCase()){if(r.endElement(P.uri,P.localName,A),k)for(var M in k)r.endPrefixMapping(M);O||i.fatalError("end tag name: "+A+" is not match the current start tagName:"+P.tagName)}else x.push(P);I++;break;case"?":b&&y(S),I=d(t,S,r);break;case"!":b&&y(S),I=f(t,S,r,i);break;default:b&&y(S);var N=new g,L=x[x.length-1].currentNSMap,R=(I=l(t,S,N,L,a,i),N.length);if(!N.closed&&h(t,I,N.tagName,_)&&(N.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),b&&R){for(var D=s(b,{}),F=0;F<R;F++){var j=N[F];y(j.offset),j.locator=s(b,{})}r.locator=D,u(N,r,L)&&x.push(N),r.locator=b}else u(N,r,L)&&x.push(N);"http://www.w3.org/1999/xhtml"!==N.uri||N.closed?I++:I=c(t,I,N.tagName,a,r)}}catch(t){if(t instanceof o)throw t;i.error("element parse error: "+t),I=-1}I>E?E=I:p(Math.max(S,E)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},g.prototype={setTagName:function(t){if(!i.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!i.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=a,e.ParseError=o},8951:()=>{!function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nodeClasses:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{isParent:"isParent",children:"children",name:"name",title:"",url:"url",icon:"icon"},render:{name:null,title:null},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",headers:{},xhrFields:{},url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(t){var e=data.getRoot(t);e||(e={},data.setRoot(t,e)),data.nodeChildren(t,e,[]),e.expandTriggerFlag=!1,e.curSelectedList=[],e.noSelection=!0,e.createdNodes=[],e.zId=0,e._ver=(new Date).getTime()},_initCache=function(t){var e=data.getCache(t);e||(e={},data.setCache(t,e)),e.nodes=[],e.doms=[]},_bindEvent=function(t){var e=t.treeObj,n=consts.event;e.bind(n.NODECREATED,(function(e,n,r){tools.apply(t.callback.onNodeCreated,[e,n,r])})),e.bind(n.CLICK,(function(e,n,r,i,o){tools.apply(t.callback.onClick,[n,r,i,o])})),e.bind(n.EXPAND,(function(e,n,r){tools.apply(t.callback.onExpand,[e,n,r])})),e.bind(n.COLLAPSE,(function(e,n,r){tools.apply(t.callback.onCollapse,[e,n,r])})),e.bind(n.ASYNC_SUCCESS,(function(e,n,r,i){tools.apply(t.callback.onAsyncSuccess,[e,n,r,i])})),e.bind(n.ASYNC_ERROR,(function(e,n,r,i,o,a){tools.apply(t.callback.onAsyncError,[e,n,r,i,o,a])})),e.bind(n.REMOVE,(function(e,n,r){tools.apply(t.callback.onRemove,[e,n,r])})),e.bind(n.SELECTED,(function(e,n,r){tools.apply(t.callback.onSelected,[n,r])})),e.bind(n.UNSELECTED,(function(e,n,r){tools.apply(t.callback.onUnSelected,[n,r])}))},_unbindEvent=function(t){var e=t.treeObj,n=consts.event;e.unbind(n.NODECREATED).unbind(n.CLICK).unbind(n.EXPAND).unbind(n.COLLAPSE).unbind(n.ASYNC_SUCCESS).unbind(n.ASYNC_ERROR).unbind(n.REMOVE).unbind(n.SELECTED).unbind(n.UNSELECTED)},_eventProxy=function(t){var e=t.target,n=data.getSetting(t.data.treeId),r="",i=null,o="",a="",s=null,l=null,u=null;if(tools.eqs(t.type,"mousedown")?a="mousedown":tools.eqs(t.type,"mouseup")?a="mouseup":tools.eqs(t.type,"contextmenu")?a="contextmenu":tools.eqs(t.type,"click")?tools.eqs(e.tagName,"span")&&null!==e.getAttribute("treeNode"+consts.id.SWITCH)?(r=tools.getNodeMainDom(e).id,o="switchNode"):(u=tools.getMDom(n,e,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(r=tools.getNodeMainDom(u).id,o="clickNode"):tools.eqs(t.type,"dblclick")&&(a="dblclick",(u=tools.getMDom(n,e,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(r=tools.getNodeMainDom(u).id,o="switchNode")),0<a.length&&0==r.length&&(u=tools.getMDom(n,e,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(r=tools.getNodeMainDom(u).id),0<r.length)switch(i=data.getNodeCache(n,r),o){case"switchNode":data.nodeIsParent(n,i)&&(tools.eqs(t.type,"click")||tools.eqs(t.type,"dblclick")&&tools.apply(n.view.dblClickExpand,[n.treeId,i],n.view.dblClickExpand))?s=handler.onSwitchNode:o="";break;case"clickNode":s=handler.onClickNode}switch(a){case"mousedown":l=handler.onZTreeMousedown;break;case"mouseup":l=handler.onZTreeMouseup;break;case"dblclick":l=handler.onZTreeDblclick;break;case"contextmenu":l=handler.onZTreeContextmenu}return{stop:!1,node:i,nodeEventType:o,nodeEventCallback:s,treeEventType:a,treeEventCallback:l}},_initNode=function(t,e,n,r,i,o,a){if(n){var s=data.getRoot(t),l=data.nodeChildren(t,n);n.level=e,n.tId=t.treeId+"_"+ ++s.zId,n.parentTId=r?r.tId:null,n.open="string"==typeof n.open?tools.eqs(n.open,"true"):!!n.open;var u=data.nodeIsParent(t,n);tools.isArray(l)?(data.nodeIsParent(t,n,!0),n.zAsync=!0):(u=data.nodeIsParent(t,n,u),n.open=!(!u||t.async.enable)&&n.open,n.zAsync=!u),n.isFirstNode=i,n.isLastNode=o,n.getParentNode=function(){return data.getNodeCache(t,n.parentTId)},n.getPreNode=function(){return data.getPreNode(t,n)},n.getNextNode=function(){return data.getNextNode(t,n)},n.getIndex=function(){return data.getNodeIndex(t,n)},n.getPath=function(){return data.getNodePath(t,n)},n.isAjaxing=!1,data.fixPIdKeyValue(t,n)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(t,e){data.getCache(t).nodes[data.getNodeCacheId(e.tId)]=e},getNodeCacheId:function(t){return t.substring(t.lastIndexOf("_")+1)},addAfterA:function(t){_init.afterA.push(t)},addBeforeA:function(t){_init.beforeA.push(t)},addInnerAfterA:function(t){_init.innerAfterA.push(t)},addInnerBeforeA:function(t){_init.innerBeforeA.push(t)},addInitBind:function(t){_init.bind.push(t)},addInitUnBind:function(t){_init.unbind.push(t)},addInitCache:function(t){_init.caches.push(t)},addInitNode:function(t){_init.nodes.push(t)},addInitProxy:function(t,e){e?_init.proxys.splice(0,0,t):_init.proxys.push(t)},addInitRoot:function(t){_init.roots.push(t)},addNodesData:function(t,e,n,r){var i,o=data.nodeChildren(t,e);o?n>=o.length&&(n=-1):(o=data.nodeChildren(t,e,[]),n=-1),0<o.length&&0===n?(o[0].isFirstNode=!1,view.setNodeLineIcos(t,o[0])):0<o.length&&n<0&&(o[o.length-1].isLastNode=!1,view.setNodeLineIcos(t,o[o.length-1])),data.nodeIsParent(t,e,!0),n<0?data.nodeChildren(t,e,o.concat(r)):(i=[n,0].concat(r),o.splice.apply(o,i))},addSelectedNode:function(t,e){var n=data.getRoot(t);data.isSelectedNode(t,e)||n.curSelectedList.push(e)},addCreatedNode:function(t,e){(t.callback.onNodeCreated||t.view.addDiyDom)&&data.getRoot(t).createdNodes.push(e)},addZTreeTools:function(t){_init.zTreeTools.push(t)},exSetting:function(t){$.extend(!0,_setting,t)},fixPIdKeyValue:function(t,e){t.data.simpleData.enable&&(e[t.data.simpleData.pIdKey]=e.parentTId?e.getParentNode()[t.data.simpleData.idKey]:t.data.simpleData.rootPId)},getAfterA:function(t,e,n){for(var r=0,i=_init.afterA.length;r<i;r++)_init.afterA[r].apply(this,arguments)},getBeforeA:function(t,e,n){for(var r=0,i=_init.beforeA.length;r<i;r++)_init.beforeA[r].apply(this,arguments)},getInnerAfterA:function(t,e,n){for(var r=0,i=_init.innerAfterA.length;r<i;r++)_init.innerAfterA[r].apply(this,arguments)},getInnerBeforeA:function(t,e,n){for(var r=0,i=_init.innerBeforeA.length;r<i;r++)_init.innerBeforeA[r].apply(this,arguments)},getCache:function(t){return caches[t.treeId]},getNodeIndex:function(t,e){if(!e)return null;for(var n=e.parentTId?e.getParentNode():data.getRoot(t),r=data.nodeChildren(t,n),i=0,o=r.length-1;i<=o;i++)if(r[i]===e)return i;return-1},getNextNode:function(t,e){if(!e)return null;for(var n=e.parentTId?e.getParentNode():data.getRoot(t),r=data.nodeChildren(t,n),i=0,o=r.length-1;i<=o;i++)if(r[i]===e)return i==o?null:r[i+1];return null},getNodeByParam:function(t,e,n,r){if(!e||!n)return null;for(var i=0,o=e.length;i<o;i++){var a=e[i];if(a[n]==r)return e[i];var s=data.nodeChildren(t,a),l=data.getNodeByParam(t,s,n,r);if(l)return l}return null},getNodeCache:function(t,e){return e&&caches[t.treeId].nodes[data.getNodeCacheId(e)]||null},getNodePath:function(t,e){return e?((n=e.parentTId?e.getParentNode().getPath():[])&&n.push(e),n):null;var n},getNodes:function(t){return data.nodeChildren(t,data.getRoot(t))},getNodesByParam:function(t,e,n,r){if(!e||!n)return[];for(var i=[],o=0,a=e.length;o<a;o++){var s=e[o];s[n]==r&&i.push(s);var l=data.nodeChildren(t,s);i=i.concat(data.getNodesByParam(t,l,n,r))}return i},getNodesByParamFuzzy:function(t,e,n,r){if(!e||!n)return[];var i=[];r=r.toLowerCase();for(var o=0,a=e.length;o<a;o++){var s=e[o];"string"==typeof s[n]&&-1<e[o][n].toLowerCase().indexOf(r)&&i.push(s);var l=data.nodeChildren(t,s);i=i.concat(data.getNodesByParamFuzzy(t,l,n,r))}return i},getNodesByFilter:function(t,e,n,r,i){if(!e)return r?null:[];for(var o=r?null:[],a=0,s=e.length;a<s;a++){var l=e[a];if(tools.apply(n,[l,i],!1)){if(r)return l;o.push(l)}var u=data.nodeChildren(t,l),c=data.getNodesByFilter(t,u,n,r,i);if(r&&c)return c;o=r?c:o.concat(c)}return o},getPreNode:function(t,e){if(!e)return null;for(var n=e.parentTId?e.getParentNode():data.getRoot(t),r=data.nodeChildren(t,n),i=0,o=r.length;i<o;i++)if(r[i]===e)return 0==i?null:r[i-1];return null},getRoot:function(t){return t?roots[t.treeId]:null},getRoots:function(){return roots},getSetting:function(t){return settings[t]},getSettings:function(){return settings},getZTreeTools:function(t){var e=this.getRoot(this.getSetting(t));return e?e.treeTools:null},initCache:function(t){for(var e=0,n=_init.caches.length;e<n;e++)_init.caches[e].apply(this,arguments)},initNode:function(t,e,n,r,i,o){for(var a=0,s=_init.nodes.length;a<s;a++)_init.nodes[a].apply(this,arguments)},initRoot:function(t){for(var e=0,n=_init.roots.length;e<n;e++)_init.roots[e].apply(this,arguments)},isSelectedNode:function(t,e){for(var n=data.getRoot(t),r=0,i=n.curSelectedList.length;r<i;r++)if(e===n.curSelectedList[r])return!0;return!1},nodeChildren:function(t,e,n){if(!e)return null;var r=t.data.key.children;return void 0!==n&&(e[r]=n),e[r]},nodeIsParent:function(t,e,n){if(!e)return!1;var r=t.data.key.isParent;return void 0!==n?("string"==typeof n&&(n=tools.eqs(n,"true")),n=!!n,e[r]=n):"string"==typeof e[r]?e[r]=tools.eqs(e[r],"true"):e[r]=!!e[r],e[r]},nodeName:function(t,e,n){var r=t.data.key.name;void 0!==n&&(e[r]=n);var i=""+e[r];return"function"==typeof t.data.render.name?t.data.render.name.call(this,i,e):i},nodeTitle:function(t,e){var n=""+e[""===t.data.key.title?t.data.key.name:t.data.key.title];return"function"==typeof t.data.render.title?t.data.render.title.call(this,n,e):n},removeNodeCache:function(t,e){var n=data.nodeChildren(t,e);if(n)for(var r=0,i=n.length;r<i;r++)data.removeNodeCache(t,n[r]);data.getCache(t).nodes[data.getNodeCacheId(e.tId)]=null},removeSelectedNode:function(t,e){for(var n=data.getRoot(t),r=0,i=n.curSelectedList.length;r<i;r++)e!==n.curSelectedList[r]&&data.getNodeCache(t,n.curSelectedList[r].tId)||(n.curSelectedList.splice(r,1),t.treeObj.trigger(consts.event.UNSELECTED,[t.treeId,e]),r--,i--)},setCache:function(t,e){caches[t.treeId]=e},setRoot:function(t,e){roots[t.treeId]=e},setZTreeTools:function(t,e){for(var n=0,r=_init.zTreeTools.length;n<r;n++)_init.zTreeTools[n].apply(this,arguments)},transformToArrayFormat:function(t,e){if(!e)return[];var n=[];if(tools.isArray(e))for(var r=0,i=e.length;r<i;r++)o(e[r]);else o(e);return n;function o(e){n.push(e);var r=data.nodeChildren(t,e);r&&(n=n.concat(data.transformToArrayFormat(t,r)))}},transformTozTreeFormat:function(t,e){var n,r,i=t.data.simpleData.idKey,o=t.data.simpleData.pIdKey;if(!i||""==i||!e)return[];if(tools.isArray(e)){var a=[],s={};for(n=0,r=e.length;n<r;n++)s[e[n][i]]=e[n];for(n=0,r=e.length;n<r;n++){var l=s[e[n][o]];if(l&&e[n][i]!=e[n][o]){var u=data.nodeChildren(t,l);(u=u||data.nodeChildren(t,l,[])).push(e[n])}else a.push(e[n])}return a}return[e]}},event={bindEvent:function(t){for(var e=0,n=_init.bind.length;e<n;e++)_init.bind[e].apply(this,arguments)},unbindEvent:function(t){for(var e=0,n=_init.unbind.length;e<n;e++)_init.unbind[e].apply(this,arguments)},bindTree:function(t){var e={treeId:t.treeId},n=t.treeObj;t.view.txtSelectedEnable||n.bind("selectstart",handler.onSelectStart).css({"-moz-user-select":"-moz-none"}),n.bind("click",e,event.proxy),n.bind("dblclick",e,event.proxy),n.bind("mouseover",e,event.proxy),n.bind("mouseout",e,event.proxy),n.bind("mousedown",e,event.proxy),n.bind("mouseup",e,event.proxy),n.bind("contextmenu",e,event.proxy)},unbindTree:function(t){t.treeObj.unbind("selectstart",handler.onSelectStart).unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(t){for(var e=[],n=0,r=_init.proxys.length;n<r;n++){var i=_init.proxys[n].apply(this,arguments);if(e.push(i),i.stop)break}return e},proxy:function(t){var e=data.getSetting(t.data.treeId);if(!tools.uCanDo(e,t))return!0;for(var n=event.doProxy(t),r=!0,i=0,o=n.length;i<o;i++){var a=n[i];a.nodeEventCallback&&(r=a.nodeEventCallback.apply(a,[t,a.node])&&r),a.treeEventCallback&&(r=a.treeEventCallback.apply(a,[t,a.node])&&r)}return r}},handler={onSwitchNode:function(t,e){var n=data.getSetting(t.data.treeId);if(e.open){if(0==tools.apply(n.callback.beforeCollapse,[n.treeId,e],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,e)}else{if(0==tools.apply(n.callback.beforeExpand,[n.treeId,e],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,e)}return!0},onClickNode:function(t,e){var n=data.getSetting(t.data.treeId),r=n.view.autoCancelSelected&&(t.ctrlKey||t.metaKey)&&data.isSelectedNode(n,e)?0:n.view.autoCancelSelected&&(t.ctrlKey||t.metaKey)&&n.view.selectedMulti?2:1;return 0==tools.apply(n.callback.beforeClick,[n.treeId,e,r],!0)||(0==r?view.cancelPreSelectedNode(n,e):view.selectNode(n,e,2==r),n.treeObj.trigger(consts.event.CLICK,[t,n.treeId,e,r])),!0},onZTreeMousedown:function(t,e){var n=data.getSetting(t.data.treeId);return tools.apply(n.callback.beforeMouseDown,[n.treeId,e],!0)&&tools.apply(n.callback.onMouseDown,[t,n.treeId,e]),!0},onZTreeMouseup:function(t,e){var n=data.getSetting(t.data.treeId);return tools.apply(n.callback.beforeMouseUp,[n.treeId,e],!0)&&tools.apply(n.callback.onMouseUp,[t,n.treeId,e]),!0},onZTreeDblclick:function(t,e){var n=data.getSetting(t.data.treeId);return tools.apply(n.callback.beforeDblClick,[n.treeId,e],!0)&&tools.apply(n.callback.onDblClick,[t,n.treeId,e]),!0},onZTreeContextmenu:function(t,e){var n=data.getSetting(t.data.treeId);return tools.apply(n.callback.beforeRightClick,[n.treeId,e],!0)&&tools.apply(n.callback.onRightClick,[t,n.treeId,e]),"function"!=typeof n.callback.onRightClick},onSelectStart:function(t){var e=t.originalEvent.srcElement.nodeName.toLowerCase();return"input"===e||"textarea"===e}},tools={apply:function(t,e,n){return"function"==typeof t?t.apply(zt,e||[]):n},canAsync:function(t,e){var n=data.nodeChildren(t,e),r=data.nodeIsParent(t,e);return t.async.enable&&e&&r&&!(e.zAsync||n&&0<n.length)},clone:function(t){if(null===t)return null;var e=tools.isArray(t)?[]:{};for(var n in t)e[n]=t[n]instanceof Date?new Date(t[n].getTime()):"object"==typeof t[n]?tools.clone(t[n]):t[n];return e},eqs:function(t,e){return t.toLowerCase()===e.toLowerCase()},isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},isElement:function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},$:function(t,e,n){return e&&"string"!=typeof e&&(n=e,e=""),"string"==typeof t?$(t,n?n.treeObj.get(0).ownerDocument:null):$("#"+t.tId+e,n?n.treeObj:null)},getMDom:function(t,e,n){if(!e)return null;for(;e&&e.id!==t.treeId;){for(var r=0,i=n.length;e.tagName&&r<i;r++)if(tools.eqs(e.tagName,n[r].tagName)&&null!==e.getAttribute(n[r].attrName))return e;e=e.parentNode}return null},getNodeMainDom:function(t){return $(t).parent("li").get(0)||$(t).parentsUntil("li").parent().get(0)},isChildOrSelf:function(t,e){return 0<$(t).closest("#"+e).length},uCanDo:function(t,e){return!0}},view={addNodes:function(t,e,n,r,i){var o=data.nodeIsParent(t,e);if(!t.data.keep.leaf||!e||o)if(tools.isArray(r)||(r=[r]),t.data.simpleData.enable&&(r=data.transformTozTreeFormat(t,r)),e){var a=$$(e,consts.id.SWITCH,t),s=$$(e,consts.id.ICON,t),l=$$(e,consts.id.UL,t);e.open||(view.replaceSwitchClass(e,a,consts.folder.CLOSE),view.replaceIcoClass(e,s,consts.folder.CLOSE),e.open=!1,l.css({display:"none"})),data.addNodesData(t,e,n,r),view.createNodes(t,e.level+1,r,e,n),i||view.expandCollapseParentNode(t,e,!0)}else data.addNodesData(t,data.getRoot(t),n,r),view.createNodes(t,0,r,null,n)},appendNodes:function(t,e,n,r,i,o,a){if(!n)return[];var s,l,u=[],c=r||data.getRoot(t),h=data.nodeChildren(t,c);(!h||i>=h.length-n.length)&&(i=-1);for(var p=0,f=n.length;p<f;p++){var d=n[p];o&&(s=(0===i||h.length==n.length)&&0==p,l=i<0&&p==n.length-1,data.initNode(t,e,d,r,s,l,a),data.addNodeCache(t,d));var g=data.nodeIsParent(t,d),y=[],m=data.nodeChildren(t,d);m&&0<m.length&&(y=view.appendNodes(t,e+1,m,d,-1,o,a&&d.open)),a&&(view.makeDOMNodeMainBefore(u,t,d),view.makeDOMNodeLine(u,t,d),data.getBeforeA(t,d,u),view.makeDOMNodeNameBefore(u,t,d),data.getInnerBeforeA(t,d,u),view.makeDOMNodeIcon(u,t,d),data.getInnerAfterA(t,d,u),view.makeDOMNodeNameAfter(u,t,d),data.getAfterA(t,d,u),g&&d.open&&view.makeUlHtml(t,d,u,y.join("")),view.makeDOMNodeMainAfter(u,t,d),data.addCreatedNode(t,d))}return u},appendParentULDom:function(t,e){var n=[],r=$$(e,t);!r.get(0)&&e.parentTId&&(view.appendParentULDom(t,e.getParentNode()),r=$$(e,t));var i=$$(e,consts.id.UL,t);i.get(0)&&i.remove();var o=data.nodeChildren(t,e),a=view.appendNodes(t,e.level+1,o,e,-1,!1,!0);view.makeUlHtml(t,e,n,a.join("")),r.append(n.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l,isParent=data.nodeIsParent(setting,node);if(node&&!isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"",class:consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={},autoParam=tools.apply(setting.async.autoParam,[setting.treeId,node],setting.async.autoParam);for(i=0,l=autoParam.length;node&&i<l;i++){var pKey=autoParam[i].split("="),spKey=pKey;1<pKey.length&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}var otherParam=tools.apply(setting.async.otherParam,[setting.treeId,node],setting.async.otherParam);if(tools.isArray(otherParam))for(i=0,l=otherParam.length;i<l;i+=2)tmpParam[otherParam[i]]=otherParam[i+1];else for(var p in otherParam)tmpParam[p]=otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:-1<setting.async.contentType.indexOf("application/json")?JSON.stringify(tmpParam):tmpParam,dataType:setting.async.dataType,headers:setting.async.headers,xhrFields:setting.async.xhrFields,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(t){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,-1,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,-1,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(t,e,n){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,t,e,n]))}}),!0},cancelPreSelectedNode:function(t,e,n){var r,i,o=data.getRoot(t).curSelectedList;for(r=o.length-1;0<=r;r--)if(e===(i=o[r])||!e&&(!n||n!==i)){if($$(i,consts.id.A,t).removeClass(consts.node.CURSELECTED),e){data.removeSelectedNode(t,e);break}o.splice(r,1),t.treeObj.trigger(consts.event.UNSELECTED,[t.treeId,i])}},createNodeCallback:function(t){if(t.callback.onNodeCreated||t.view.addDiyDom)for(var e=data.getRoot(t);0<e.createdNodes.length;){var n=e.createdNodes.shift();tools.apply(t.view.addDiyDom,[t.treeId,n]),t.callback.onNodeCreated&&t.treeObj.trigger(consts.event.NODECREATED,[t.treeId,n])}},createNodes:function(t,e,n,r,i){if(n&&0!=n.length){var o=data.getRoot(t),a=!r||r.open||!!$$(data.nodeChildren(t,r)[0],t).get(0);o.createdNodes=[];var s,l,u=view.appendNodes(t,e,n,r,i,!0,a);if(r){var c=$$(r,consts.id.UL,t);c.get(0)&&(s=c)}else s=t.treeObj;s&&(0<=i&&(l=s.children()[i]),0<=i&&l?$(l).before(u.join("")):s.append(u.join(""))),view.createNodeCallback(t)}},destroy:function(t){t&&(data.initCache(t),data.initRoot(t),event.unbindTree(t),event.unbindEvent(t),t.treeObj.empty(),delete settings[t.treeId])},expandCollapseNode:function(t,e,n,r,i){var o,a=data.getRoot(t);if(e){var s=data.nodeChildren(t,e),l=data.nodeIsParent(t,e);if(a.expandTriggerFlag&&(o=i,i=function(){o&&o(),e.open?t.treeObj.trigger(consts.event.EXPAND,[t.treeId,e]):t.treeObj.trigger(consts.event.COLLAPSE,[t.treeId,e])},a.expandTriggerFlag=!1),!e.open&&l&&(!$$(e,consts.id.UL,t).get(0)||s&&0<s.length&&!$$(s[0],t).get(0))&&(view.appendParentULDom(t,e),view.createNodeCallback(t)),e.open!=n){var u=$$(e,consts.id.UL,t),c=$$(e,consts.id.SWITCH,t),h=$$(e,consts.id.ICON,t);l?(e.open=!e.open,e.iconOpen&&e.iconClose&&h.attr("style",view.makeNodeIcoStyle(t,e)),e.open?(view.replaceSwitchClass(e,c,consts.folder.OPEN),view.replaceIcoClass(e,h,consts.folder.OPEN),0==r||""==t.view.expandSpeed?(u.show(),tools.apply(i,[])):s&&0<s.length?u.slideDown(t.view.expandSpeed,i):(u.show(),tools.apply(i,[]))):(view.replaceSwitchClass(e,c,consts.folder.CLOSE),view.replaceIcoClass(e,h,consts.folder.CLOSE),0!=r&&""!=t.view.expandSpeed&&s&&0<s.length?u.slideUp(t.view.expandSpeed,i):(u.hide(),tools.apply(i,[])))):tools.apply(i,[])}else tools.apply(i,[])}else tools.apply(i,[])},expandCollapseParentNode:function(t,e,n,r,i){e&&(e.parentTId?(view.expandCollapseNode(t,e,n,r),e.parentTId&&view.expandCollapseParentNode(t,e.getParentNode(),n,r,i)):view.expandCollapseNode(t,e,n,r,i))},expandCollapseSonNode:function(t,e,n,r,i){var o=data.getRoot(t),a=e?data.nodeChildren(t,e):data.nodeChildren(t,o),s=!e&&r,l=data.getRoot(t).expandTriggerFlag;if(data.getRoot(t).expandTriggerFlag=!1,a)for(var u=0,c=a.length;u<c;u++)a[u]&&view.expandCollapseSonNode(t,a[u],n,s);data.getRoot(t).expandTriggerFlag=l,view.expandCollapseNode(t,e,n,r,i)},isSelectedNode:function(t,e){if(!e)return!1;var n,r=data.getRoot(t).curSelectedList;for(n=r.length-1;0<=n;n--)if(e===r[n])return!0;return!1},makeDOMNodeIcon:function(t,e,n){var r=data.nodeName(e,n),i=e.view.nameIsHTML?r:r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");t.push("<span id='",n.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(e,n),"' style='",view.makeNodeIcoStyle(e,n),"'></span><span id='",n.tId,consts.id.SPAN,"' class='",consts.className.NAME,"'>",i,"</span>")},makeDOMNodeLine:function(t,e,n){t.push("<span id='",n.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(e,n),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(t,e,n){t.push("</li>")},makeDOMNodeMainBefore:function(t,e,n){t.push("<li id='",n.tId,"' class='",consts.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(t,e,n){t.push("</a>")},makeDOMNodeNameBefore:function(t,e,n){var r=data.nodeTitle(e,n),i=view.makeNodeUrl(e,n),o=view.makeNodeFontCss(e,n),a=view.makeNodeClasses(e,n),s=[];for(var l in o)s.push(l,":",o[l],";");t.push("<a id='",n.tId,consts.id.A,"' class='",consts.className.LEVEL,n.level,a.add?" "+a.add.join(" "):"","' treeNode",consts.id.A,n.click?' onclick="'+n.click+'"':"",null!=i&&0<i.length?" href='"+i+"'":""," target='",view.makeNodeTarget(n),"' style='",s.join(""),"'"),tools.apply(e.view.showTitle,[e.treeId,n],e.view.showTitle)&&r&&t.push("title='",r.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),t.push(">")},makeNodeFontCss:function(t,e){var n=tools.apply(t.view.fontCss,[t.treeId,e],t.view.fontCss);return n&&"function"!=typeof n?n:{}},makeNodeClasses:function(t,e){var n=tools.apply(t.view.nodeClasses,[t.treeId,e],t.view.nodeClasses);return n&&"function"!=typeof n?n:{add:[],remove:[]}},makeNodeIcoClass:function(t,e){var n=["ico"];if(!e.isAjaxing){var r=data.nodeIsParent(t,e);n[0]=(e.iconSkin?e.iconSkin+"_":"")+n[0],r?n.push(e.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU)}return consts.className.BUTTON+" "+n.join("_")},makeNodeIcoStyle:function(t,e){var n=[];if(!e.isAjaxing){var r=data.nodeIsParent(t,e)&&e.iconOpen&&e.iconClose?e.open?e.iconOpen:e.iconClose:e[t.data.key.icon];r&&n.push("background:url(",r,") 0 0 no-repeat;"),0!=t.view.showIcon&&tools.apply(t.view.showIcon,[t.treeId,e],!0)||n.push("display:none;")}return n.join("")},makeNodeLineClass:function(t,e){var n=[];return t.view.showLine?0==e.level&&e.isFirstNode&&e.isLastNode?n.push(consts.line.ROOT):0==e.level&&e.isFirstNode?n.push(consts.line.ROOTS):e.isLastNode?n.push(consts.line.BOTTOM):n.push(consts.line.CENTER):n.push(consts.line.NOLINE),data.nodeIsParent(t,e)?n.push(e.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU),view.makeNodeLineClassEx(e)+n.join("_")},makeNodeLineClassEx:function(t){return consts.className.BUTTON+" "+consts.className.LEVEL+t.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(t){return t.target||"_blank"},makeNodeUrl:function(t,e){var n=t.data.key.url;return e[n]?e[n]:null},makeUlHtml:function(t,e,n,r){n.push("<ul id='",e.tId,consts.id.UL,"' class='",consts.className.LEVEL,e.level," ",view.makeUlLineClass(t,e),"' style='display:",e.open?"block":"none","'>"),n.push(r),n.push("</ul>")},makeUlLineClass:function(t,e){return t.view.showLine&&!e.isLastNode?consts.line.LINE:""},removeChildNodes:function(t,e){if(e){var n=data.nodeChildren(t,e);if(n){for(var r=0,i=n.length;r<i;r++)data.removeNodeCache(t,n[r]);if(data.removeSelectedNode(t),delete e[t.data.key.children],t.data.keep.parent)$$(e,consts.id.UL,t).empty();else{data.nodeIsParent(t,e,!1),e.open=!1;var o=$$(e,consts.id.SWITCH,t),a=$$(e,consts.id.ICON,t);view.replaceSwitchClass(e,o,consts.folder.DOCU),view.replaceIcoClass(e,a,consts.folder.DOCU),$$(e,consts.id.UL,t).remove()}}}},scrollIntoView:function(t,e){if(e)if("undefined"!=typeof Element&&"undefined"!=typeof HTMLElement)Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){"use strict";function e(t,e){return{start:t,length:e,end:t+e}}function n(e,n){return!1===t||n.start<e.end&&e.start<n.end?Math.max(e.end-n.length,Math.min(n.start,e.start)):(e.start+e.end-n.length)/2}function r(t,e){return{x:t,y:e,translate:function(n,i){return r(t+n,e+i)}}}function i(t,e){for(;t;)e=e.translate(t.offsetLeft,t.offsetTop),t=t.offsetParent;return e}for(var o,a=i(this,r(0,0)),s=r(this.offsetWidth,this.offsetHeight),l=this.parentNode;l instanceof HTMLElement;)o=i(l,r(l.clientLeft,l.clientTop)),l.scrollLeft=n(e(a.x-o.x,s.x),e(l.scrollLeft,l.clientWidth)),l.scrollTop=n(e(a.y-o.y,s.y),e(l.scrollTop,l.clientHeight)),a=a.translate(-l.scrollLeft,-l.scrollTop),l=l.parentNode}),e.scrollIntoViewIfNeeded();else{var n=t.treeObj.get(0).getBoundingClientRect(),r=e.getBoundingClientRect();(r.top<n.top||r.bottom>n.bottom||r.right>n.right||r.left<n.left)&&e.scrollIntoView()}},setFirstNode:function(t,e){var n=data.nodeChildren(t,e);0<n.length&&(n[0].isFirstNode=!0)},setLastNode:function(t,e){var n=data.nodeChildren(t,e);0<n.length&&(n[n.length-1].isLastNode=!0)},removeNode:function(t,e){var n=data.getRoot(t),r=e.parentTId?e.getParentNode():n;if(e.isFirstNode=!1,e.isLastNode=!1,e.getPreNode=function(){return null},e.getNextNode=function(){return null},data.getNodeCache(t,e.tId)){$$(e,t).remove(),data.removeNodeCache(t,e),data.removeSelectedNode(t,e);for(var i=data.nodeChildren(t,r),o=0,a=i.length;o<a;o++)if(i[o].tId==e.tId){i.splice(o,1);break}view.setFirstNode(t,r),view.setLastNode(t,r);var s,l,u,c=i.length;if(t.data.keep.parent||0!=c){if(t.view.showLine&&0<c){var h=i[c-1];if(s=$$(h,consts.id.UL,t),l=$$(h,consts.id.SWITCH,t),u=$$(h,consts.id.ICON,t),r==n)if(1==i.length)view.replaceSwitchClass(h,l,consts.line.ROOT);else{var p=$$(i[0],consts.id.SWITCH,t);view.replaceSwitchClass(i[0],p,consts.line.ROOTS),view.replaceSwitchClass(h,l,consts.line.BOTTOM)}else view.replaceSwitchClass(h,l,consts.line.BOTTOM);s.removeClass(consts.line.LINE)}}else data.nodeIsParent(t,r,!1),r.open=!1,delete r[t.data.key.children],s=$$(r,consts.id.UL,t),l=$$(r,consts.id.SWITCH,t),u=$$(r,consts.id.ICON,t),view.replaceSwitchClass(r,l,consts.folder.DOCU),view.replaceIcoClass(r,u,consts.folder.DOCU),s.css("display","none")}},replaceIcoClass:function(t,e,n){if(e&&!t.isAjaxing){var r=e.attr("class");if(null!=r){var i=r.split("_");switch(n){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:i[i.length-1]=n}e.attr("class",i.join("_"))}}},replaceSwitchClass:function(t,e,n){if(e){var r=e.attr("class");if(null!=r){var i=r.split("_");switch(n){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:i[0]=view.makeNodeLineClassEx(t)+n;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:i[1]=n}e.attr("class",i.join("_")),n!==consts.folder.DOCU?e.removeAttr("disabled"):e.attr("disabled","disabled")}}},selectNode:function(t,e,n){n||view.cancelPreSelectedNode(t,null,e),$$(e,consts.id.A,t).addClass(consts.node.CURSELECTED),data.addSelectedNode(t,e),t.treeObj.trigger(consts.event.SELECTED,[t.treeId,e])},setNodeFontCss:function(t,e){var n=$$(e,consts.id.A,t),r=view.makeNodeFontCss(t,e);r&&n.css(r)},setNodeClasses:function(t,e){var n=$$(e,consts.id.A,t),r=view.makeNodeClasses(t,e);"add"in r&&r.add.length&&n.addClass(r.add.join(" ")),"remove"in r&&r.remove.length&&n.removeClass(r.remove.join(" "))},setNodeLineIcos:function(t,e){if(e){var n=$$(e,consts.id.SWITCH,t),r=$$(e,consts.id.UL,t),i=$$(e,consts.id.ICON,t),o=view.makeUlLineClass(t,e);0==o.length?r.removeClass(consts.line.LINE):r.addClass(o),n.attr("class",view.makeNodeLineClass(t,e)),data.nodeIsParent(t,e)?n.removeAttr("disabled"):n.attr("disabled","disabled"),i.removeAttr("style"),i.attr("style",view.makeNodeIcoStyle(t,e)),i.attr("class",view.makeNodeIcoClass(t,e))}},setNodeName:function(t,e){var n=data.nodeTitle(t,e),r=$$(e,consts.id.SPAN,t);r.empty(),t.view.nameIsHTML?r.html(data.nodeName(t,e)):r.text(data.nodeName(t,e)),tools.apply(t.view.showTitle,[t.treeId,e],t.view.showTitle)&&$$(e,consts.id.A,t).attr("title",n||"")},setNodeTarget:function(t,e){$$(e,consts.id.A,t).attr("target",view.makeNodeTarget(e))},setNodeUrl:function(t,e){var n=$$(e,consts.id.A,t),r=view.makeNodeUrl(t,e);null==r||0==r.length?n.removeAttr("href"):n.attr("href",r)},switchNode:function(t,e){if(e.open||!tools.canAsync(t,e))view.expandCollapseNode(t,e,!e.open);else if(t.async.enable){if(!view.asyncNode(t,e))return void view.expandCollapseNode(t,e,!e.open)}else e&&view.expandCollapseNode(t,e,!e.open)}};$.fn.zTree={consts:_consts,_z:{tools,view,event,data},getZTreeObj:function(t){return data.getZTreeTools(t)||null},destroy:function(t){if(t&&0<t.length)view.destroy(data.getSetting(t));else for(var e in settings)view.destroy(settings[e])},init:function(t,e,n){var r=tools.clone(_setting);$.extend(!0,r,e),r.treeId=t.attr("id"),r.treeObj=t,r.treeObj.empty(),settings[r.treeId]=r,void 0===document.body.style.maxHeight&&(r.view.expandSpeed=""),data.initRoot(r);var i=data.getRoot(r);n=n?tools.clone(tools.isArray(n)?n:[n]):[],r.data.simpleData.enable?data.nodeChildren(r,i,data.transformTozTreeFormat(r,n)):data.nodeChildren(r,i,n),data.initCache(r),event.unbindTree(r),event.bindTree(r),event.unbindEvent(r),event.bindEvent(r);var o={setting:r,addNodes:function(t,e,n,i){t=t||null;var o=data.nodeIsParent(r,t);if(t&&!o&&r.data.keep.leaf)return null;var a=parseInt(e,10);if(e=isNaN(a)?(i=!!n,n=e,-1):a,!n)return null;var s=tools.clone(tools.isArray(n)?n:[n]);function l(){view.addNodes(r,t,e,s,1==i)}return tools.canAsync(r,t)?view.asyncNode(r,t,i,l):l(),s},cancelSelectedNode:function(t){view.cancelPreSelectedNode(r,t)},destroy:function(){view.destroy(r)},expandAll:function(t){return t=!!t,view.expandCollapseSonNode(r,null,t,!0),t},expandNode:function(t,e,n,i,o){return t&&data.nodeIsParent(r,t)?(!0!==e&&!1!==e&&(e=!t.open),(o=!!o)&&e&&0==tools.apply(r.callback.beforeExpand,[r.treeId,t],!0)||o&&!e&&0==tools.apply(r.callback.beforeCollapse,[r.treeId,t],!0)?null:(e&&t.parentTId&&view.expandCollapseParentNode(r,t.getParentNode(),e,!1),e!==t.open||n?(data.getRoot(r).expandTriggerFlag=o,!tools.canAsync(r,t)&&n?view.expandCollapseSonNode(r,t,e,!0,a):(t.open=!e,view.switchNode(this.setting,t),a()),e):null)):null;function a(){var e=$$(t,consts.id.A,r).get(0);e&&!1!==i&&view.scrollIntoView(r,e)}},getNodes:function(){return data.getNodes(r)},getNodeByParam:function(t,e,n){return t?data.getNodeByParam(r,n?data.nodeChildren(r,n):data.getNodes(r),t,e):null},getNodeByTId:function(t){return data.getNodeCache(r,t)},getNodesByParam:function(t,e,n){return t?data.getNodesByParam(r,n?data.nodeChildren(r,n):data.getNodes(r),t,e):null},getNodesByParamFuzzy:function(t,e,n){return t?data.getNodesByParamFuzzy(r,n?data.nodeChildren(r,n):data.getNodes(r),t,e):null},getNodesByFilter:function(t,e,n,i){return e=!!e,t&&"function"==typeof t?data.getNodesByFilter(r,n?data.nodeChildren(r,n):data.getNodes(r),t,e,i):e?null:[]},getNodeIndex:function(t){if(!t)return null;for(var e=t.parentTId?t.getParentNode():data.getRoot(r),n=data.nodeChildren(r,e),i=0,o=n.length;i<o;i++)if(n[i]==t)return i;return-1},getSelectedNodes:function(){for(var t=[],e=data.getRoot(r).curSelectedList,n=0,i=e.length;n<i;n++)t.push(e[n]);return t},isSelectedNode:function(t){return data.isSelectedNode(r,t)},reAsyncChildNodesPromise:function(t,e,n){return new Promise((function(r,i){try{o.reAsyncChildNodes(t,e,n,(function(){r(t)}))}catch(r){i(r)}}))},reAsyncChildNodes:function(t,e,n,i){if(this.setting.async.enable){var o=!t;if(o&&(t=data.getRoot(r)),"refresh"==e){for(var a=data.nodeChildren(r,t),s=0,l=a?a.length:0;s<l;s++)data.removeNodeCache(r,a[s]);data.removeSelectedNode(r),data.nodeChildren(r,t,[]),o?this.setting.treeObj.empty():$$(t,consts.id.UL,r).empty()}view.asyncNode(this.setting,o?null:t,!!n,i)}},refresh:function(){this.setting.treeObj.empty();var t=data.getRoot(r),e=data.nodeChildren(r,t);data.initRoot(r),data.nodeChildren(r,t,e),data.initCache(r),view.createNodes(r,0,data.nodeChildren(r,t),null,-1)},removeChildNodes:function(t){if(!t)return null;var e=data.nodeChildren(r,t);return view.removeChildNodes(r,t),e||null},removeNode:function(t,e){t&&((e=!!e)&&0==tools.apply(r.callback.beforeRemove,[r.treeId,t],!0)||(view.removeNode(r,t),e&&this.setting.treeObj.trigger(consts.event.REMOVE,[r.treeId,t])))},selectNode:function(t,e,n){if(t&&tools.uCanDo(r)){if(e=r.view.selectedMulti&&e,t.parentTId)view.expandCollapseParentNode(r,t.getParentNode(),!0,!1,(function(){if(!n){var e=$$(t,r).get(0);view.scrollIntoView(r,e)}}));else if(!n)try{$$(t,r).focus().blur()}catch(e){}view.selectNode(r,t,e)}},transformTozTreeNodes:function(t){return data.transformTozTreeFormat(r,t)},transformToArray:function(t){return data.transformToArrayFormat(r,t)},updateNode:function(t,e){t&&$$(t,r).get(0)&&tools.uCanDo(r)&&(view.setNodeName(r,t),view.setNodeTarget(r,t),view.setNodeUrl(r,t),view.setNodeLineIcos(r,t),view.setNodeFontCss(r,t),view.setNodeClasses(r,t))}};i.treeTools=o,data.setZTreeTools(r,o);var a=data.nodeChildren(r,i);return a&&0<a.length?view.createNodes(r,0,a,null,-1):r.async.enable&&r.async.url&&""!==r.async.url&&view.asyncNode(r),o}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(t){var e={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},n={check:{enable:!1,autoCheckTrigger:!1,chkStyle:e.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:e.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},r=function(t,e){if(!0===e.chkDisabled)return!1;var n=h.getSetting(t.data.treeId);if(0==l.apply(n.callback.beforeCheck,[n.treeId,e],!0))return!0;var r=h.nodeChecked(n,e);h.nodeChecked(n,e,!r),c.checkNodeRelation(n,e);var i=p(e,u.id.CHECK,n);return c.setChkClass(n,i,e),c.repairParentChkClassWithSelf(n,e),n.treeObj.trigger(u.event.CHECK,[t,n.treeId,e]),!0},i=function(t,e){if(!0===e.chkDisabled)return!1;var n=h.getSetting(t.data.treeId),r=p(e,u.id.CHECK,n);return e.check_Focus=!0,c.setChkClass(n,r,e),!0},o=function(t,e){if(!0===e.chkDisabled)return!1;var n=h.getSetting(t.data.treeId),r=p(e,u.id.CHECK,n);return e.check_Focus=!1,c.setChkClass(n,r,e),!0},a={tools:{},view:{checkNodeRelation:function(t,e){var n,r,i,o=u.radio,a=h.nodeChecked(t,e);if(t.check.chkStyle==o.STYLE){var s=h.getRadioCheckedList(t);if(a)if(t.check.radioType==o.TYPE_ALL){for(r=s.length-1;0<=r;r--)n=s[r],h.nodeChecked(t,n)&&n!=e&&(h.nodeChecked(t,n,!1),s.splice(r,1),c.setChkClass(t,p(n,u.id.CHECK,t),n),n.parentTId!=e.parentTId&&c.repairParentChkClassWithSelf(t,n));s.push(e)}else{var l=e.parentTId?e.getParentNode():h.getRoot(t);for(r=0,i=(f=h.nodeChildren(t,l)).length;r<i;r++)n=f[r],h.nodeChecked(t,n)&&n!=e&&(h.nodeChecked(t,n,!1),c.setChkClass(t,p(n,u.id.CHECK,t),n))}else if(t.check.radioType==o.TYPE_ALL)for(r=0,i=s.length;r<i;r++)if(e==s[r]){s.splice(r,1);break}}else{var f=h.nodeChildren(t,e);a&&(!f||0==f.length||-1<t.check.chkboxType.Y.indexOf("s"))&&c.setSonNodeCheckBox(t,e,!0),a||f&&0!=f.length&&!(-1<t.check.chkboxType.N.indexOf("s"))||c.setSonNodeCheckBox(t,e,!1),a&&-1<t.check.chkboxType.Y.indexOf("p")&&c.setParentNodeCheckBox(t,e,!0),!a&&-1<t.check.chkboxType.N.indexOf("p")&&c.setParentNodeCheckBox(t,e,!1)}},makeChkClass:function(t,e){var n,r=u.checkbox,i=u.radio,o=h.nodeChecked(t,e);n=!0===e.chkDisabled?r.DISABLED:e.halfCheck?r.PART:t.check.chkStyle==i.STYLE?e.check_Child_State<1?r.FULL:r.PART:o?2===e.check_Child_State||-1===e.check_Child_State?r.FULL:r.PART:e.check_Child_State<1?r.FULL:r.PART;var a=t.check.chkStyle+"_"+(o?r.TRUE:r.FALSE)+"_"+n;return a=e.check_Focus&&!0!==e.chkDisabled?a+"_"+r.FOCUS:a,u.className.BUTTON+" "+r.DEFAULT+" "+a},repairAllChk:function(t,e){if(t.check.enable&&t.check.chkStyle===u.checkbox.STYLE)for(var n=h.getRoot(t),r=h.nodeChildren(t,n),i=0,o=r.length;i<o;i++){var a=r[i];!0!==a.nocheck&&!0!==a.chkDisabled&&h.nodeChecked(t,a,e),c.setSonNodeCheckBox(t,a,e)}},repairChkClass:function(t,e){if(e&&(h.makeChkFlag(t,e),!0!==e.nocheck)){var n=p(e,u.id.CHECK,t);c.setChkClass(t,n,e)}},repairParentChkClass:function(t,e){if(e&&e.parentTId){var n=e.getParentNode();c.repairChkClass(t,n),c.repairParentChkClass(t,n)}},repairParentChkClassWithSelf:function(t,e){if(e){var n=h.nodeChildren(t,e);n&&0<n.length?c.repairParentChkClass(t,n[0]):c.repairParentChkClass(t,e)}},repairSonChkDisabled:function(t,e,n,r){if(e){e.chkDisabled!=n&&(e.chkDisabled=n),c.repairChkClass(t,e);var i=h.nodeChildren(t,e);if(i&&r)for(var o=0,a=i.length;o<a;o++){var s=i[o];c.repairSonChkDisabled(t,s,n,r)}}},repairParentChkDisabled:function(t,e,n,r){e&&(e.chkDisabled!=n&&r&&(e.chkDisabled=n),c.repairChkClass(t,e),c.repairParentChkDisabled(t,e.getParentNode(),n,r))},setChkClass:function(t,e,n){e&&(!0===n.nocheck?e.hide():e.show(),e.attr("class",c.makeChkClass(t,n)))},setParentNodeCheckBox:function(t,e,n,r){var i=p(e,u.id.CHECK,t);if(r=r||e,h.makeChkFlag(t,e),!0!==e.nocheck&&!0!==e.chkDisabled&&(h.nodeChecked(t,e,n),c.setChkClass(t,i,e),t.check.autoCheckTrigger&&e!=r&&t.treeObj.trigger(u.event.CHECK,[null,t.treeId,e])),e.parentTId){var o=!0;if(!n)for(var a=h.nodeChildren(t,e.getParentNode()),s=0,l=a.length;s<l;s++){var f=a[s],d=h.nodeChecked(t,f);if(!0!==f.nocheck&&!0!==f.chkDisabled&&d||(!0===f.nocheck||!0===f.chkDisabled)&&0<f.check_Child_State){o=!1;break}}o&&c.setParentNodeCheckBox(t,e.getParentNode(),n,r)}},setSonNodeCheckBox:function(t,e,n,r){if(e){var i=p(e,u.id.CHECK,t);r=r||e;var o=!1,a=h.nodeChildren(t,e);if(a)for(var s=0,l=a.length;s<l;s++){var f=a[s];c.setSonNodeCheckBox(t,f,n,r),!0===f.chkDisabled&&(o=!0)}e!=h.getRoot(t)&&!0!==e.chkDisabled&&(o&&!0!==e.nocheck&&h.makeChkFlag(t,e),!0!==e.nocheck&&!0!==e.chkDisabled?(h.nodeChecked(t,e,n),o||(e.check_Child_State=a&&0<a.length?n?2:0:-1)):e.check_Child_State=-1,c.setChkClass(t,i,e),t.check.autoCheckTrigger&&e!=r&&!0!==e.nocheck&&!0!==e.chkDisabled&&t.treeObj.trigger(u.event.CHECK,[null,t.treeId,e]))}}},event:{},data:{getRadioCheckedList:function(t){for(var e=h.getRoot(t).radioCheckedList,n=0,r=e.length;n<r;n++)h.getNodeCache(t,e[n].tId)||(e.splice(n,1),n--,r--);return e},getCheckStatus:function(t,e){if(!t.check.enable||e.nocheck||e.chkDisabled)return null;var n=h.nodeChecked(t,e);return{checked:n,half:e.halfCheck?e.halfCheck:t.check.chkStyle==u.radio.STYLE?2===e.check_Child_State:n?-1<e.check_Child_State&&e.check_Child_State<2:0<e.check_Child_State}},getTreeCheckedNodes:function(t,e,n,r){if(!e)return[];var i=n&&t.check.chkStyle==u.radio.STYLE&&t.check.radioType==u.radio.TYPE_ALL;r=r||[];for(var o=0,a=e.length;o<a;o++){var s=e[o],l=h.nodeChildren(t,s),c=h.nodeChecked(t,s);if(!0!==s.nocheck&&!0!==s.chkDisabled&&c==n&&(r.push(s),i))break;if(h.getTreeCheckedNodes(t,l,n,r),i&&0<r.length)break}return r},getTreeChangeCheckedNodes:function(t,e,n){if(!e)return[];n=n||[];for(var r=0,i=e.length;r<i;r++){var o=e[r],a=h.nodeChildren(t,o),s=h.nodeChecked(t,o);!0!==o.nocheck&&!0!==o.chkDisabled&&s!=o.checkedOld&&n.push(o),h.getTreeChangeCheckedNodes(t,a,n)}return n},makeChkFlag:function(t,e){if(e){var n=-1,r=h.nodeChildren(t,e);if(r)for(var i=0,o=r.length;i<o;i++){var a=r[i],s=h.nodeChecked(t,a),l=-1;if(t.check.chkStyle==u.radio.STYLE){if(2==(l=!0===a.nocheck||!0===a.chkDisabled?a.check_Child_State:!0===a.halfCheck||s||0<a.check_Child_State?2:0)){n=2;break}0==l&&(n=0)}else if(t.check.chkStyle==u.checkbox.STYLE){if(1===(l=!0===a.nocheck||!0===a.chkDisabled?a.check_Child_State:!0===a.halfCheck?1:s?-1===a.check_Child_State||2===a.check_Child_State?2:1:0<a.check_Child_State?1:0)){n=1;break}if(2===l&&-1<n&&0<i&&l!==n){n=1;break}if(2===n&&-1<l&&l<2){n=1;break}-1<l&&(n=l)}}e.check_Child_State=n}}}};t.extend(!0,t.fn.zTree.consts,e),t.extend(!0,t.fn.zTree._z,a);var s=t.fn.zTree,l=s._z.tools,u=s.consts,c=s._z.view,h=s._z.data,p=(s._z.event,l.$);h.nodeChecked=function(t,e,n){if(!e)return!1;var r=t.data.key.checked;return void 0!==n?("string"==typeof n&&(n=l.eqs(n,"true")),n=!!n,e[r]=n):"string"==typeof e[r]?e[r]=l.eqs(e[r],"true"):e[r]=!!e[r],e[r]},h.exSetting(n),h.addInitBind((function(t){var e=t.treeObj,n=u.event;e.bind(n.CHECK,(function(e,n,r,i){e.srcEvent=n,l.apply(t.callback.onCheck,[e,r,i])}))})),h.addInitUnBind((function(t){var e=t.treeObj,n=u.event;e.unbind(n.CHECK)})),h.addInitCache((function(t){})),h.addInitNode((function(t,e,n,r,i,o,a){if(n){var s=h.nodeChecked(t,n);n.checkedOld=s,"string"==typeof n.nocheck&&(n.nocheck=l.eqs(n.nocheck,"true")),n.nocheck=!!n.nocheck||t.check.nocheckInherit&&r&&!!r.nocheck,"string"==typeof n.chkDisabled&&(n.chkDisabled=l.eqs(n.chkDisabled,"true")),n.chkDisabled=!!n.chkDisabled||t.check.chkDisabledInherit&&r&&!!r.chkDisabled,"string"==typeof n.halfCheck&&(n.halfCheck=l.eqs(n.halfCheck,"true")),n.halfCheck=!!n.halfCheck,n.check_Child_State=-1,n.check_Focus=!1,n.getCheckStatus=function(){return h.getCheckStatus(t,n)},t.check.chkStyle==u.radio.STYLE&&t.check.radioType==u.radio.TYPE_ALL&&s&&h.getRoot(t).radioCheckedList.push(n)}})),h.addInitProxy((function(t){var e=t.target,n=h.getSetting(t.data.treeId),a="",s=null,c="",p=null;if(l.eqs(t.type,"mouseover")?n.check.enable&&l.eqs(e.tagName,"span")&&null!==e.getAttribute("treeNode"+u.id.CHECK)&&(a=l.getNodeMainDom(e).id,c="mouseoverCheck"):l.eqs(t.type,"mouseout")?n.check.enable&&l.eqs(e.tagName,"span")&&null!==e.getAttribute("treeNode"+u.id.CHECK)&&(a=l.getNodeMainDom(e).id,c="mouseoutCheck"):l.eqs(t.type,"click")&&n.check.enable&&l.eqs(e.tagName,"span")&&null!==e.getAttribute("treeNode"+u.id.CHECK)&&(a=l.getNodeMainDom(e).id,c="checkNode"),0<a.length)switch(s=h.getNodeCache(n,a),c){case"checkNode":p=r;break;case"mouseoverCheck":p=i;break;case"mouseoutCheck":p=o}return{stop:"checkNode"===c,node:s,nodeEventType:c,nodeEventCallback:p,treeEventType:"",treeEventCallback:null}}),!0),h.addInitRoot((function(t){h.getRoot(t).radioCheckedList=[]})),h.addBeforeA((function(t,e,n){t.check.enable&&(h.makeChkFlag(t,e),n.push("<span ID='",e.tId,u.id.CHECK,"' class='",c.makeChkClass(t,e),"' treeNode",u.id.CHECK,!0===e.nocheck?" style='display:none;'":"","></span>"))})),h.addZTreeTools((function(t,e){e.checkNode=function(e,n,r,i){var o=h.nodeChecked(t,e);if(!0!==e.chkDisabled&&(!0!==n&&!1!==n&&(n=!o),i=!!i,(o!==n||r)&&(!i||0!=l.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0))&&l.uCanDo(this.setting)&&this.setting.check.enable&&!0!==e.nocheck)){h.nodeChecked(t,e,n);var a=p(e,u.id.CHECK,this.setting);!r&&this.setting.check.chkStyle!==u.radio.STYLE||c.checkNodeRelation(this.setting,e),c.setChkClass(this.setting,a,e),c.repairParentChkClassWithSelf(this.setting,e),i&&this.setting.treeObj.trigger(u.event.CHECK,[null,this.setting.treeId,e])}},e.checkAllNodes=function(t){c.repairAllChk(this.setting,!!t)},e.getCheckedNodes=function(e){e=!1!==e;var n=h.nodeChildren(t,h.getRoot(this.setting));return h.getTreeCheckedNodes(this.setting,n,e)},e.getChangeCheckedNodes=function(){var e=h.nodeChildren(t,h.getRoot(this.setting));return h.getTreeChangeCheckedNodes(this.setting,e)},e.setChkDisabled=function(t,e,n,r){e=!!e,n=!!n,r=!!r,c.repairSonChkDisabled(this.setting,t,e,r),c.repairParentChkDisabled(this.setting,t.getParentNode(),e,n)};var n=e.updateNode;e.updateNode=function(t,r){if(n&&n.apply(e,arguments),t&&this.setting.check.enable&&p(t,this.setting).get(0)&&l.uCanDo(this.setting)){var i=p(t,u.id.CHECK,this.setting);1!=r&&this.setting.check.chkStyle!==u.radio.STYLE||c.checkNodeRelation(this.setting,t),c.setChkClass(this.setting,i,t),c.repairParentChkClassWithSelf(this.setting,t)}}}));var f=c.createNodes;c.createNodes=function(t,e,n,r,i){f&&f.apply(c,arguments),n&&c.repairParentChkClassWithSelf(t,r)};var d=c.removeNode;c.removeNode=function(t,e){var n=e.getParentNode();d&&d.apply(c,arguments),e&&n&&(c.repairChkClass(t,n),c.repairParentChkClass(t,n))};var g=c.appendNodes;c.appendNodes=function(t,e,n,r,i,o,a){var s="";return g&&(s=g.apply(c,arguments)),r&&h.makeChkFlag(t,r),s}}(jQuery),function(t){var e={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},n={onHoverOverNode:function(t,e){var r=l.getSetting(t.data.treeId),i=l.getRoot(r);i.curHoverNode!=e&&n.onHoverOutNode(t),i.curHoverNode=e,s.addHoverDom(r,e)},onHoverOutNode:function(t,e){var n=l.getSetting(t.data.treeId),r=l.getRoot(n);r.curHoverNode&&!l.isSelectedNode(n,r.curHoverNode)&&(s.removeTreeDom(n,r.curHoverNode),r.curHoverNode=null)},onMousedownNode:function(n,r){var i,c,h=l.getSetting(n.data.treeId),p=l.getRoot(h),f=l.getRoots();if(2==n.button||!h.edit.enable||!h.edit.drag.isCopy&&!h.edit.drag.isMove)return!0;var d=n.target,g=l.getRoot(h).curSelectedList,y=[];if(l.isSelectedNode(h,r))for(i=0,c=g.length;i<c;i++){if(g[i].editNameFlag&&o.eqs(d.tagName,"input")&&null!==d.getAttribute("treeNode"+a.id.INPUT))return!0;if(y.push(g[i]),y[0].parentTId!==g[i].parentTId){y=[r];break}}else y=[r];s.editNodeBlur=!0,s.cancelCurEditNode(h);var m,v,w,b,x,_=t(h.treeObj.get(0).ownerDocument),E=t(h.treeObj.get(0).ownerDocument.body),S=!1,C=h,T=h,I=null,A=null,P=null,k=a.move.TYPE_INNER,O=n.clientX,M=n.clientY,N=(new Date).getTime();function L(n){if(0==p.dragFlag&&Math.abs(O-n.clientX)<h.edit.drag.minMoveSize&&Math.abs(M-n.clientY)<h.edit.drag.minMoveSize)return!0;var r,i,c,d,g;if(E.css("cursor","pointer"),0==p.dragFlag){if(0==o.apply(h.callback.beforeDrag,[h.treeId,y],!0))return R(n),!0;for(r=0,i=y.length;r<i;r++)0==r&&(p.dragNodeShowBefore=[]),c=y[r],l.nodeIsParent(h,c)&&c.open?(s.expandCollapseNode(h,c,!c.open),p.dragNodeShowBefore[c.tId]=!0):p.dragNodeShowBefore[c.tId]=!1;p.dragFlag=1,f.showHoverDom=!1,o.showIfameMask(h,!0);var T=!0,L=-1;if(1<y.length){var D=y[0].parentTId?l.nodeChildren(h,y[0].getParentNode()):l.getNodes(h);for(g=[],r=0,i=D.length;r<i;r++)if(void 0!==p.dragNodeShowBefore[D[r].tId]&&(T&&-1<L&&L+1!==r&&(T=!1),g.push(D[r]),L=r),y.length===g.length){y=g;break}}for(T&&(b=y[0].getPreNode(),x=y[y.length-1].getNextNode()),m=u("<ul class='zTreeDragUL'></ul>",h),r=0,i=y.length;r<i;r++)(c=y[r]).editNameFlag=!1,s.selectNode(h,c,0<r),s.removeTreeDom(h,c),r>h.edit.drag.maxShowNodeNum-1||((d=u("<li id='"+c.tId+"_tmp'></li>",h)).append(u(c,a.id.A,h).clone()),d.css("padding","0"),d.children("#"+c.tId+a.id.A).removeClass(a.node.CURSELECTED),m.append(d),r==h.edit.drag.maxShowNodeNum-1&&(d=u("<li id='"+c.tId+"_moretmp'><a>  ...  </a></li>",h),m.append(d)));m.attr("id",y[0].tId+a.id.UL+"_tmp"),m.addClass(h.treeObj.attr("class")),m.appendTo(E),(v=u("<span class='tmpzTreeMove_arrow'></span>",h)).attr("id","zTreeMove_arrow_tmp"),v.appendTo(E),h.treeObj.trigger(a.event.DRAG,[n,h.treeId,y])}if(1==p.dragFlag){if(w&&v.attr("id")==n.target.id&&P&&n.clientX+_.scrollLeft()+2>t("#"+P+a.id.A,w).offset().left){var F=t("#"+P+a.id.A,w);n.target=0<F.length?F.get(0):n.target}else w&&(w.removeClass(a.node.TMPTARGET_TREE),P&&t("#"+P+a.id.A,w).removeClass(a.node.TMPTARGET_NODE+"_"+a.move.TYPE_PREV).removeClass(a.node.TMPTARGET_NODE+"_"+e.move.TYPE_NEXT).removeClass(a.node.TMPTARGET_NODE+"_"+e.move.TYPE_INNER));P=w=null,S=!1,C=h;var j=l.getSettings();for(var z in j)j[z].treeId&&j[z].edit.enable&&j[z].treeId!=h.treeId&&(n.target.id==j[z].treeId||0<t(n.target).parents("#"+j[z].treeId).length)&&(S=!0,C=j[z]);var G=_.scrollTop(),B=_.scrollLeft(),U=C.treeObj.offset(),q=C.treeObj.get(0).scrollHeight,W=C.treeObj.get(0).scrollWidth,V=n.clientY+G-U.top,H=C.treeObj.height()+U.top-n.clientY-G,Y=n.clientX+B-U.left,X=C.treeObj.width()+U.left-n.clientX-B,Z=V<h.edit.drag.borderMax&&V>h.edit.drag.borderMin,K=H<h.edit.drag.borderMax&&H>h.edit.drag.borderMin,J=Y<h.edit.drag.borderMax&&Y>h.edit.drag.borderMin,Q=X<h.edit.drag.borderMax&&X>h.edit.drag.borderMin,$=V>h.edit.drag.borderMin&&H>h.edit.drag.borderMin&&Y>h.edit.drag.borderMin&&X>h.edit.drag.borderMin,tt=Z&&C.treeObj.scrollTop()<=0,et=K&&C.treeObj.scrollTop()+C.treeObj.height()+10>=q,nt=J&&C.treeObj.scrollLeft()<=0,rt=Q&&C.treeObj.scrollLeft()+C.treeObj.width()+10>=W;if(n.target&&o.isChildOrSelf(n.target,C.treeId)){for(var it=n.target;it&&it.tagName&&!o.eqs(it.tagName,"li")&&it.id!=C.treeId;)it=it.parentNode;var ot=!0;for(r=0,i=y.length;r<i;r++){if(c=y[r],it.id===c.tId){ot=!1;break}if(0<u(c,h).find("#"+it.id).length){ot=!1;break}}ot&&n.target&&o.isChildOrSelf(n.target,it.id+a.id.A)&&(w=t(it),P=it.id)}c=y[0],$&&o.isChildOrSelf(n.target,C.treeId)&&(!w&&(n.target.id==C.treeId||tt||et||nt||rt)&&(S||!S&&c.parentTId)&&(w=C.treeObj),Z?C.treeObj.scrollTop(C.treeObj.scrollTop()-10):K&&C.treeObj.scrollTop(C.treeObj.scrollTop()+10),J?C.treeObj.scrollLeft(C.treeObj.scrollLeft()-10):Q&&C.treeObj.scrollLeft(C.treeObj.scrollLeft()+10),w&&w!=C.treeObj&&w.offset().left<C.treeObj.offset().left&&C.treeObj.scrollLeft(C.treeObj.scrollLeft()+w.offset().left-C.treeObj.offset().left)),m.css({top:n.clientY+G+3+"px",left:n.clientX+B+3+"px"});var at=0,st=0;if(w&&w.attr("id")!=C.treeId){var lt=null==P?null:l.getNodeCache(C,P),ut=(n.ctrlKey||n.metaKey)&&h.edit.drag.isMove&&h.edit.drag.isCopy||!h.edit.drag.isMove&&h.edit.drag.isCopy,ct=!(!b||P!==b.tId),ht=!(!x||P!==x.tId),pt=c.parentTId&&c.parentTId==P,ft=(ut||!ht)&&o.apply(C.edit.drag.prev,[C.treeId,y,lt],!!C.edit.drag.prev),dt=(ut||!ct)&&o.apply(C.edit.drag.next,[C.treeId,y,lt],!!C.edit.drag.next),gt=(ut||!pt)&&!(C.data.keep.leaf&&!l.nodeIsParent(h,lt))&&o.apply(C.edit.drag.inner,[C.treeId,y,lt],!!C.edit.drag.inner);function yt(){w=null,P="",k=a.move.TYPE_INNER,v.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}if(ft||dt||gt){var mt=t("#"+P+a.id.A,w),vt=lt.isLastNode?null:t("#"+lt.getNextNode().tId+a.id.A,w.next()),wt=mt.offset().top,bt=mt.offset().left,xt=ft?gt?.25:dt?.5:1:-1,_t=dt?gt?.75:ft?.5:0:-1,Et=(n.clientY+G-wt)/mt.height();if((1==xt||Et<=xt&&-.2<=Et)&&ft?(at=1-v.width(),st=wt-v.height()/2,k=a.move.TYPE_PREV):(0==_t||_t<=Et&&Et<=1.2)&&dt?(at=1-v.width(),st=null==vt||l.nodeIsParent(h,lt)&&lt.open?wt+mt.height()-v.height()/2:vt.offset().top-v.height()/2,k=a.move.TYPE_NEXT):gt?(at=5-v.width(),st=wt,k=a.move.TYPE_INNER):yt(),w&&(v.css({display:"block",top:st+"px",left:bt+at+"px"}),mt.addClass(a.node.TMPTARGET_NODE+"_"+k),I==P&&A==k||(N=(new Date).getTime()),lt&&l.nodeIsParent(h,lt)&&k==a.move.TYPE_INNER)){var St=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==lt.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===lt.tId&&(St=!1),St&&(window.zTreeMoveTimer=setTimeout((function(){k==a.move.TYPE_INNER&&lt&&l.nodeIsParent(h,lt)&&!lt.open&&(new Date).getTime()-N>C.edit.drag.autoOpenTime&&o.apply(C.callback.beforeDragOpen,[C.treeId,lt],!0)&&(s.switchNode(C,lt),C.edit.drag.autoExpandTrigger&&C.treeObj.trigger(a.event.EXPAND,[C.treeId,lt]))}),C.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=lt.tId)}}else yt()}else k=a.move.TYPE_INNER,w&&o.apply(C.edit.drag.inner,[C.treeId,y,null],!!C.edit.drag.inner)?w.addClass(a.node.TMPTARGET_TREE):w=null,v.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);I=P,A=k,h.treeObj.trigger(a.event.DRAGMOVE,[n,h.treeId,y])}return!1}function R(n){if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),A=I=null,_.unbind("mousemove",L),_.unbind("mouseup",R),_.unbind("selectstart",D),E.css("cursor",""),w&&(w.removeClass(a.node.TMPTARGET_TREE),P&&t("#"+P+a.id.A,w).removeClass(a.node.TMPTARGET_NODE+"_"+a.move.TYPE_PREV).removeClass(a.node.TMPTARGET_NODE+"_"+e.move.TYPE_NEXT).removeClass(a.node.TMPTARGET_NODE+"_"+e.move.TYPE_INNER)),o.showIfameMask(h,!1),f.showHoverDom=!0,0!=p.dragFlag){var r,i,c;for(r=p.dragFlag=0,i=y.length;r<i;r++)c=y[r],l.nodeIsParent(h,c)&&p.dragNodeShowBefore[c.tId]&&!c.open&&(s.expandCollapseNode(h,c,!c.open),delete p.dragNodeShowBefore[c.tId]);m&&m.remove(),v&&v.remove();var d=(n.ctrlKey||n.metaKey)&&h.edit.drag.isMove&&h.edit.drag.isCopy||!h.edit.drag.isMove&&h.edit.drag.isCopy;if(!d&&w&&P&&y[0].parentTId&&P==y[0].parentTId&&k==a.move.TYPE_INNER&&(w=null),w){var g=null==P?null:l.getNodeCache(C,P);if(0==o.apply(h.callback.beforeDrop,[C.treeId,y,g,k,d],!0))return void s.selectNodes(T,y);var b=d?o.clone(y):y;function x(){if(S){if(!d)for(var t=0,e=y.length;t<e;t++)s.removeNode(h,y[t]);k==a.move.TYPE_INNER?s.addNodes(C,g,-1,b):s.addNodes(C,g.getParentNode(),k==a.move.TYPE_PREV?g.getIndex():g.getIndex()+1,b)}else if(d&&k==a.move.TYPE_INNER)s.addNodes(C,g,-1,b);else if(d)s.addNodes(C,g.getParentNode(),k==a.move.TYPE_PREV?g.getIndex():g.getIndex()+1,b);else if(k!=a.move.TYPE_NEXT)for(t=0,e=b.length;t<e;t++)s.moveNode(C,g,b[t],k,!1);else for(t=-1,e=b.length-1;t<e;e--)s.moveNode(C,g,b[e],k,!1);s.selectNodes(C,b);var r=u(b[0],h).get(0);s.scrollIntoView(h,r),h.treeObj.trigger(a.event.DROP,[n,C.treeId,b,g,k,d])}k==a.move.TYPE_INNER&&o.canAsync(C,g)?s.asyncNode(C,g,!1,x):x()}else s.selectNodes(T,y),h.treeObj.trigger(a.event.DROP,[n,h.treeId,y,null,null,null])}}function D(){return!1}return o.uCanDo(h)&&_.bind("mousemove",L),_.bind("mouseup",R),_.bind("selectstart",D),!0}},r={tools:{getAbs:function(t){var e=t.getBoundingClientRect(),n=document.body.scrollTop+document.documentElement.scrollTop,r=document.body.scrollLeft+document.documentElement.scrollLeft;return[e.left+r,e.top+n]},inputFocus:function(t){t.get(0)&&(t.focus(),o.setCursorPosition(t.get(0),t.val().length))},inputSelect:function(t){t.get(0)&&(t.focus(),t.select())},setCursorPosition:function(t,e){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},showIfameMask:function(t,e){for(var n=l.getRoot(t);0<n.dragMaskList.length;)n.dragMaskList[0].remove(),n.dragMaskList.shift();if(e)for(var r=u("iframe",t),i=0,a=r.length;i<a;i++){var s=r.get(i),c=o.getAbs(s),h=u("<div id='zTreeMask_"+i+"' class='zTreeMask' style='top:"+c[1]+"px; left:"+c[0]+"px; width:"+s.offsetWidth+"px; height:"+s.offsetHeight+"px;'></div>",t);h.appendTo(u("body",t)),n.dragMaskList.push(h)}}},view:{addEditBtn:function(t,e){if(!(e.editNameFlag||0<u(e,a.id.EDIT,t).length)&&o.apply(t.edit.showRenameBtn,[t.treeId,e],t.edit.showRenameBtn)){var n=u(e,a.id.A,t),r="<span class='"+a.className.BUTTON+" edit' id='"+e.tId+a.id.EDIT+"' title='"+o.apply(t.edit.renameTitle,[t.treeId,e],t.edit.renameTitle)+"' treeNode"+a.id.EDIT+" style='display:none;'></span>";n.append(r),u(e,a.id.EDIT,t).bind("click",(function(){return o.uCanDo(t)&&0!=o.apply(t.callback.beforeEditName,[t.treeId,e],!0)&&s.editNode(t,e),!1})).show()}},addRemoveBtn:function(t,e){if(!(e.editNameFlag||0<u(e,a.id.REMOVE,t).length)&&o.apply(t.edit.showRemoveBtn,[t.treeId,e],t.edit.showRemoveBtn)){var n=u(e,a.id.A,t),r="<span class='"+a.className.BUTTON+" remove' id='"+e.tId+a.id.REMOVE+"' title='"+o.apply(t.edit.removeTitle,[t.treeId,e],t.edit.removeTitle)+"' treeNode"+a.id.REMOVE+" style='display:none;'></span>";n.append(r),u(e,a.id.REMOVE,t).bind("click",(function(){return o.uCanDo(t)&&0!=o.apply(t.callback.beforeRemove,[t.treeId,e],!0)&&(s.removeNode(t,e),t.treeObj.trigger(a.event.REMOVE,[t.treeId,e])),!1})).bind("mousedown",(function(t){return!0})).show()}},addHoverDom:function(t,e){l.getRoots().showHoverDom&&(e.isHover=!0,t.edit.enable&&(s.addEditBtn(t,e),s.addRemoveBtn(t,e)),o.apply(t.view.addHoverDom,[t.treeId,e]))},cancelCurEditNode:function(t,e,n){var r=l.getRoot(t),i=r.curEditNode;if(i){var c=r.curEditInput,h=e||(n?l.nodeName(t,i):c.val());if(!1===o.apply(t.callback.beforeRename,[t.treeId,i,h,n],!0))return!1;l.nodeName(t,i,h),u(i,a.id.A,t).removeClass(a.node.CURSELECTED_EDIT),c.unbind(),s.setNodeName(t,i),i.editNameFlag=!1,r.curEditNode=null,r.curEditInput=null,s.selectNode(t,i,!1),t.treeObj.trigger(a.event.RENAME,[t.treeId,i,n])}return r.noSelection=!0},editNode:function(t,e){var n=l.getRoot(t);if(s.editNodeBlur=!1,l.isSelectedNode(t,e)&&n.curEditNode==e&&e.editNameFlag)setTimeout((function(){o.inputFocus(n.curEditInput)}),0);else{e.editNameFlag=!0,s.removeTreeDom(t,e),s.cancelCurEditNode(t),s.selectNode(t,e,!1),u(e,a.id.SPAN,t).html("<input type=text class='rename' id='"+e.tId+a.id.INPUT+"' treeNode"+a.id.INPUT+" >");var r=u(e,a.id.INPUT,t);r.attr("value",l.nodeName(t,e)),t.edit.editNameSelectAll?o.inputSelect(r):o.inputFocus(r),r.bind("blur",(function(e){s.editNodeBlur||s.cancelCurEditNode(t)})).bind("keydown",(function(e){"13"==e.keyCode?(s.editNodeBlur=!0,s.cancelCurEditNode(t)):"27"==e.keyCode&&s.cancelCurEditNode(t,null,!0)})).bind("click",(function(t){return!1})).bind("dblclick",(function(t){return!1})),u(e,a.id.A,t).addClass(a.node.CURSELECTED_EDIT),n.curEditInput=r,n.noSelection=!1,n.curEditNode=e}},moveNode:function(t,e,n,r,i,o){var c=l.getRoot(t);if(e!=n&&(!t.data.keep.leaf||!e||l.nodeIsParent(t,e)||r!=a.move.TYPE_INNER)){var h=n.parentTId?n.getParentNode():c,p=null===e||e==c;p&&null===e&&(e=c),p&&(r=a.move.TYPE_INNER);var f,d,g=e.parentTId?e.getParentNode():c;if(r!=a.move.TYPE_PREV&&r!=a.move.TYPE_NEXT&&(r=a.move.TYPE_INNER),r==a.move.TYPE_INNER&&(p?n.parentTId=null:(l.nodeIsParent(t,e)||(l.nodeIsParent(t,e,!0),e.open=!!e.open,s.setNodeLineIcos(t,e)),n.parentTId=e.tId)),p)d=f=t.treeObj;else{if(o||r!=a.move.TYPE_INNER?o||s.expandCollapseNode(t,e.getParentNode(),!0,!1):s.expandCollapseNode(t,e,!0,!1),f=u(e,t),d=u(e,a.id.UL,t),f.get(0)&&!d.get(0)){var y=[];s.makeUlHtml(t,e,y,""),f.append(y.join(""))}d=u(e,a.id.UL,t)}var m=u(n,t);m.get(0)?f.get(0)||m.remove():m=s.appendNodes(t,n.level,[n],null,-1,!1,!0).join(""),d.get(0)&&r==a.move.TYPE_INNER?d.append(m):f.get(0)&&r==a.move.TYPE_PREV?f.before(m):f.get(0)&&r==a.move.TYPE_NEXT&&f.after(m);var v,w,b=-1,x=0,_=null,E=null,S=n.level,C=l.nodeChildren(t,h),T=l.nodeChildren(t,g),I=l.nodeChildren(t,e);if(n.isFirstNode)b=0,1<C.length&&((_=C[1]).isFirstNode=!0);else if(n.isLastNode)(_=C[(b=C.length-1)-1]).isLastNode=!0;else for(v=0,w=C.length;v<w;v++)if(C[v].tId==n.tId){b=v;break}if(0<=b&&C.splice(b,1),r!=a.move.TYPE_INNER)for(v=0,w=T.length;v<w;v++)T[v].tId==e.tId&&(x=v);if(r==a.move.TYPE_INNER?(0<(I=I||l.nodeChildren(t,e,[])).length&&((E=I[I.length-1]).isLastNode=!1),I.splice(I.length,0,n),n.isLastNode=!0,n.isFirstNode=1==I.length):e.isFirstNode&&r==a.move.TYPE_PREV?(T.splice(x,0,n),(E=e).isFirstNode=!1,n.parentTId=e.parentTId,n.isFirstNode=!0,n.isLastNode=!1):e.isLastNode&&r==a.move.TYPE_NEXT?(T.splice(x+1,0,n),(E=e).isLastNode=!1,n.parentTId=e.parentTId,n.isFirstNode=!1,n.isLastNode=!0):(r==a.move.TYPE_PREV?T.splice(x,0,n):T.splice(x+1,0,n),n.parentTId=e.parentTId,n.isFirstNode=!1,n.isLastNode=!1),l.fixPIdKeyValue(t,n),l.setSonNodeLevel(t,n.getParentNode(),n),s.setNodeLineIcos(t,n),s.repairNodeLevelClass(t,n,S),!t.data.keep.parent&&C.length<1){l.nodeIsParent(t,h,!1),h.open=!1;var A=u(h,a.id.UL,t),P=u(h,a.id.SWITCH,t),k=u(h,a.id.ICON,t);s.replaceSwitchClass(h,P,a.folder.DOCU),s.replaceIcoClass(h,k,a.folder.DOCU),A.css("display","none")}else _&&s.setNodeLineIcos(t,_);E&&s.setNodeLineIcos(t,E),t.check&&t.check.enable&&s.repairChkClass&&(s.repairChkClass(t,h),s.repairParentChkClassWithSelf(t,h),h!=n.parent&&s.repairParentChkClassWithSelf(t,n)),o||s.expandCollapseParentNode(t,n.getParentNode(),!0,i)}},removeEditBtn:function(t,e){u(e,a.id.EDIT,t).unbind().remove()},removeRemoveBtn:function(t,e){u(e,a.id.REMOVE,t).unbind().remove()},removeTreeDom:function(t,e){e.isHover=!1,s.removeEditBtn(t,e),s.removeRemoveBtn(t,e),o.apply(t.view.removeHoverDom,[t.treeId,e])},repairNodeLevelClass:function(t,e,n){if(n!==e.level){var r=u(e,t),i=u(e,a.id.A,t),o=u(e,a.id.UL,t),s=a.className.LEVEL+n,l=a.className.LEVEL+e.level;r.removeClass(s),r.addClass(l),i.removeClass(s),i.addClass(l),o.removeClass(s),o.addClass(l)}},selectNodes:function(t,e){for(var n=0,r=e.length;n<r;n++)s.selectNode(t,e[n],0<n)}},event:{},data:{setSonNodeLevel:function(t,e,n){if(n){var r=l.nodeChildren(t,n),i=n.level;if(n.level=e?e.level+1:0,s.repairNodeLevelClass(t,n,i),r)for(var o=0,a=r.length;o<a;o++)r[o]&&l.setSonNodeLevel(t,n,r[o])}}}};t.extend(!0,t.fn.zTree.consts,e),t.extend(!0,t.fn.zTree._z,r);var i=t.fn.zTree,o=i._z.tools,a=i.consts,s=i._z.view,l=i._z.data,u=(i._z.event,o.$);l.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}}),l.addInitBind((function(t){var e=t.treeObj,n=a.event;e.bind(n.RENAME,(function(e,n,r,i){o.apply(t.callback.onRename,[e,n,r,i])})),e.bind(n.DRAG,(function(e,n,r,i){o.apply(t.callback.onDrag,[n,r,i])})),e.bind(n.DRAGMOVE,(function(e,n,r,i){o.apply(t.callback.onDragMove,[n,r,i])})),e.bind(n.DROP,(function(e,n,r,i,a,s,l){o.apply(t.callback.onDrop,[n,r,i,a,s,l])}))})),l.addInitUnBind((function(t){var e=t.treeObj,n=a.event;e.unbind(n.RENAME),e.unbind(n.DRAG),e.unbind(n.DRAGMOVE),e.unbind(n.DROP)})),l.addInitCache((function(t){})),l.addInitNode((function(t,e,n,r,i,o,a){n&&(n.isHover=!1,n.editNameFlag=!1)})),l.addInitProxy((function(t){var e=t.target,r=l.getSetting(t.data.treeId),i=t.relatedTarget,s="",u=null,c="",h=null,p=null;if(o.eqs(t.type,"mouseover")?(p=o.getMDom(r,e,[{tagName:"a",attrName:"treeNode"+a.id.A}]))&&(s=o.getNodeMainDom(p).id,c="hoverOverNode"):o.eqs(t.type,"mouseout")?(p=o.getMDom(r,i,[{tagName:"a",attrName:"treeNode"+a.id.A}]))||(s="remove",c="hoverOutNode"):o.eqs(t.type,"mousedown")&&(p=o.getMDom(r,e,[{tagName:"a",attrName:"treeNode"+a.id.A}]))&&(s=o.getNodeMainDom(p).id,c="mousedownNode"),0<s.length)switch(u=l.getNodeCache(r,s),c){case"mousedownNode":h=n.onMousedownNode;break;case"hoverOverNode":h=n.onHoverOverNode;break;case"hoverOutNode":h=n.onHoverOutNode}return{stop:!1,node:u,nodeEventType:c,nodeEventCallback:h,treeEventType:"",treeEventCallback:null}})),l.addInitRoot((function(t){var e=l.getRoot(t),n=l.getRoots();e.curEditNode=null,e.curEditInput=null,e.curHoverNode=null,e.dragFlag=0,e.dragNodeShowBefore=[],e.dragMaskList=new Array,n.showHoverDom=!0})),l.addZTreeTools((function(t,e){e.cancelEditName=function(t){l.getRoot(this.setting).curEditNode&&s.cancelCurEditNode(this.setting,t||null,!0)},e.copyNode=function(e,n,r,i){if(!n)return null;var u=l.nodeIsParent(t,e);if(e&&!u&&this.setting.data.keep.leaf&&r===a.move.TYPE_INNER)return null;var c=this,h=o.clone(n);if(e||(e=null,r=a.move.TYPE_INNER),r==a.move.TYPE_INNER){function p(){s.addNodes(c.setting,e,-1,[h],i)}o.canAsync(this.setting,e)?s.asyncNode(this.setting,e,i,p):p()}else s.addNodes(this.setting,e.parentNode,-1,[h],i),s.moveNode(this.setting,e,h,r,!1,i);return h},e.editName=function(t){t&&t.tId&&t===l.getNodeCache(this.setting,t.tId)&&(t.parentTId&&s.expandCollapseParentNode(this.setting,t.getParentNode(),!0),s.editNode(this.setting,t))},e.moveNode=function(e,n,r,i){if(!n)return n;var c=l.nodeIsParent(t,e);if(e&&!c&&this.setting.data.keep.leaf&&r===a.move.TYPE_INNER)return null;if(e&&(n.parentTId==e.tId&&r==a.move.TYPE_INNER||0<u(n,this.setting).find("#"+e.tId).length))return null;e=e||null;var h=this;function p(){s.moveNode(h.setting,e,n,r,!1,i)}return o.canAsync(this.setting,e)&&r===a.move.TYPE_INNER?s.asyncNode(this.setting,e,i,p):p(),n},e.setEditable=function(t){return this.setting.edit.enable=t,this.refresh()}}));var c=s.cancelPreSelectedNode;s.cancelPreSelectedNode=function(t,e){for(var n=l.getRoot(t).curSelectedList,r=0,i=n.length;r<i&&(e&&e!==n[r]||(s.removeTreeDom(t,n[r]),!e));r++);c&&c.apply(s,arguments)};var h=s.createNodes;s.createNodes=function(t,e,n,r,i){h&&h.apply(s,arguments),n&&s.repairParentChkClassWithSelf&&s.repairParentChkClassWithSelf(t,r)};var p=s.makeNodeUrl;s.makeNodeUrl=function(t,e){return t.edit.enable?null:p.apply(s,arguments)};var f=s.removeNode;s.removeNode=function(t,e){var n=l.getRoot(t);n.curEditNode===e&&(n.curEditNode=null),f&&f.apply(s,arguments)};var d=s.selectNode;s.selectNode=function(t,e,n){var r=l.getRoot(t);return!(l.isSelectedNode(t,e)&&r.curEditNode==e&&e.editNameFlag||(d&&d.apply(s,arguments),s.addHoverDom(t,e),0))};var g=o.uCanDo;o.uCanDo=function(t,e){var n=l.getRoot(t);return!(!e||!(o.eqs(e.type,"mouseover")||o.eqs(e.type,"mouseout")||o.eqs(e.type,"mousedown")||o.eqs(e.type,"mouseup")))||(n.curEditNode&&(s.editNodeBlur=!1,n.curEditInput.focus()),!n.curEditNode&&(!g||g.apply(s,arguments)))}}(jQuery)},1295:(t,e,n)=>{var r={"./10+.png":3202,"./10.png":8113,"./150+.png":399,"./2.png":4609,"./3.png":3922,"./30+.png":8404,"./300+.png":2867,"./4.png":1178,"./5.png":5463,"./6.png":6816,"./7.png":5092,"./8.png":7735,"./9.png":7508,"./90+.png":7672};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=1295},5793:(t,e,n)=>{"use strict";n.d(e,{Z:()=>b});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(1306),n.b),c=new URL(n(7485),n.b),h=new URL(n(5683),n.b),p=new URL(n(7370),n.b),f=new URL(n(3555),n.b),d=a()(i()),g=l()(u),y=l()(c),m=l()(h),v=l()(p),w=l()(f);d.push([t.id,`@charset "UTF-8";\n\n@font-face {\n  font-family: "LED";\n  src: url(${g}) format("woff2"),\n       url(${y}) format("woff"),\n       url(${m}) format("truetype"),\n       url(${v}) format("embedded-opentype"),\n       url(${w}) format("svg");\n  font-weight: normal;\n  font-style: normal;\n}`,""]);const b=d},1209:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,".label-led-container{\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    text-align: center;\n    font-family: 'LED';\n    font-size: 24px;\n    font-weight: 100;\n    margin: 0px;\n    pointer-events: none;\n    background-image: -webkit-linear-gradient(bottom, red, #fd8403, yellow);\n    /* background-image: -webkit-linear-gradient(bottom, yellow, #ffeb3b, #fdfdfc); */\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n}\n",""]);const s=a},8560:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(1545),n.b),c=new URL(n(4198),n.b),h=new URL(n(4884),n.b),p=a()(i()),f=l()(u),d=l()(c),g=l()(h);p.push([t.id,`@font-face {\n  font-family: "iconfont"; /* Project id 3652650 */\n  src: url(${f}) format('woff2'),\n       url(${d}) format('woff'),\n       url(${g}) format('truetype');\n}\n\n.iconfont {\n  font-family: "iconfont" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.icon-esgcc-bianji:before {\n  content: "\\e60c";\n}\n\n.icon-esgcc-chakan:before {\n  content: "\\e60d";\n}\n\n.icon-esgcc-fuzhi:before {\n  content: "\\e60e";\n}\n\n.icon-esgcc-xinjian:before {\n  content: "\\e60f";\n}\n\n.icon-esgcc-dayin:before {\n  content: "\\e610";\n}\n\n.icon-esgcc-mima:before {\n  content: "\\e611";\n}\n\n.icon-esgcc-shanchu:before {\n  content: "\\e612";\n}\n\n.icon-esgcc-gengduo:before {\n  content: "\\e613";\n}\n\n.icon-esgcc-bangzhu:before {\n  content: "\\e614";\n}\n\n.icon-esgcc-pingjia:before {\n  content: "\\e615";\n}\n\n.icon-esgcc-sousuo:before {\n  content: "\\e616";\n}\n\n.icon-esgcc-xiugai:before {\n  content: "\\e617";\n}\n\n.icon-esgcc-yonghuming:before {\n  content: "\\e618";\n}\n\n.icon-esgcc-shezhi:before {\n  content: "\\e619";\n}\n\n.icon-esgcc-shoucang:before {\n  content: "\\e61a";\n}\n\n.icon-esgcc-zhongzhi:before {\n  content: "\\e61b";\n}\n\n.icon-esgcc-guanbi:before {\n  content: "\\e61c";\n}\n\n.icon-esgcc-chexiao:before {\n  content: "\\e61d";\n}\n\n.icon-esgcc-baocun:before {\n  content: "\\e61e";\n}\n\n.icon-esgcc-xinzeng:before {\n  content: "\\e61f";\n}\n\n.icon-esgcc-fanhuidingbu:before {\n  content: "\\e620";\n}\n\n.icon-esgcc-caidan:before {\n  content: "\\e621";\n}\n\n.icon-esgcc-kefu:before {\n  content: "\\e622";\n}\n\n.icon-esgcc-erweima:before {\n  content: "\\e623";\n}\n\n.icon-esgcc-riqi:before {\n  content: "\\e624";\n}\n\n.icon-esgcc-shuaxin:before {\n  content: "\\e625";\n}\n\n.icon-esgcc-wode:before {\n  content: "\\e626";\n}\n\n.icon-esgcc-saoyisao:before {\n  content: "\\e627";\n}\n\n.icon-esgcc-xiaoxi:before {\n  content: "\\e628";\n}\n\n.icon-esgcc--dengru:before {\n  content: "\\e629";\n}\n\n.icon-esgcc--tuichu:before {\n  content: "\\e62a";\n}\n\n.icon-esgcc--daoru:before {\n  content: "\\e62b";\n}\n\n.icon-esgcc--daochu:before {\n  content: "\\e62c";\n}\n\n.icon-esgcc--xiayibu:before {\n  content: "\\e62d";\n}\n\n.icon-esgcc--shangyibu:before {\n  content: "\\e62e";\n}\n\n.icon-esgcc--zuidahua:before {\n  content: "\\e62f";\n}\n\n.icon-esgcc--zuixiaohua:before {\n  content: "\\e630";\n}\n\n.icon-esgcc-fenlei:before {\n  content: "\\e631";\n}\n\n.icon-esgcc-shouye:before {\n  content: "\\e632";\n}\n\n.icon-esgcc--queding:before {\n  content: "\\e633";\n}\n\n.icon-esgcc--quxiao:before {\n  content: "\\e634";\n}\n\n.icon-esgcc-ge_shangchuan:before {\n  content: "\\e635";\n}\n\n.icon-esgcc-ge_xiazai:before {\n  content: "\\e636";\n}\n\n.icon-esgcc-wancheng-:before {\n  content: "\\e637";\n}\n\n.icon-esgcc-dengdai-:before {\n  content: "\\e638";\n}\n\n.icon-esgcc-shaixuan-:before {\n  content: "\\e639";\n}\n\n.icon-esgcc-ge_xingji:before {\n  content: "\\e63a";\n}\n\n.icon-esgcc-shouhuodizhi-:before {\n  content: "\\e645";\n}\n\n.icon-esgcc-bohao:before {\n  content: "\\e708";\n}\n\n.icon-esgcc-daifahuo:before {\n  content: "\\e709";\n}\n\n.icon-esgcc-daizhifu:before {\n  content: "\\e70a";\n}\n\n.icon-esgcc-daishouhuo:before {\n  content: "\\e70b";\n}\n\n.icon-esgcc-dianpu:before {\n  content: "\\e70c";\n}\n\n.icon-esgcc-dianhua:before {\n  content: "\\e70d";\n}\n\n.icon-esgcc-daiqueren:before {\n  content: "\\e70e";\n}\n\n.icon-esgcc-denglu:before {\n  content: "\\e70f";\n}\n\n.icon-esgcc-fahuoshijian:before {\n  content: "\\e710";\n}\n\n.icon-esgcc-dingdan:before {\n  content: "\\e711";\n}\n\n.icon-esgcc-eduguanli:before {\n  content: "\\e712";\n}\n\n.icon-esgcc-fanhui:before {\n  content: "\\e713";\n}\n\n.icon-esgcc-fapiaoxinxi:before {\n  content: "\\e714";\n}\n\n.icon-esgcc-fanhuishouye:before {\n  content: "\\e715";\n}\n\n.icon-esgcc-gengduoquyuanquan:before {\n  content: "\\e716";\n}\n\n.icon-esgcc-gerenxinxi:before {\n  content: "\\e717";\n}\n\n.icon-esgcc-fukuandanshenpi:before {\n  content: "\\e718";\n}\n\n.icon-esgcc-gouwuche:before {\n  content: "\\e719";\n}\n\n.icon-esgcc-fukuandanguanli:before {\n  content: "\\e71a";\n}\n\n.icon-esgcc-fapiaoguanli:before {\n  content: "\\e71b";\n}\n\n.icon-esgcc-guanbicaozuoyangshi:before {\n  content: "\\e71c";\n}\n\n.icon-esgcc-guanbicaozuoyangshi1:before {\n  content: "\\e71d";\n}\n\n.icon-esgcc-huifu:before {\n  content: "\\e71e";\n}\n\n.icon-esgcc-huanyuan:before {\n  content: "\\e71f";\n}\n\n.icon-esgcc-jichushujuguanli:before {\n  content: "\\e720";\n}\n\n.icon-esgcc-jinhuodan:before {\n  content: "\\e721";\n}\n\n.icon-esgcc-jiesuan:before {\n  content: "\\e722";\n}\n\n.icon-esgcc-jiaoseguanli:before {\n  content: "\\e723";\n}\n\n.icon-esgcc-mingxiweihuyichang:before {\n  content: "\\e724";\n}\n\n.icon-esgcc-qinggoudanguanli:before {\n  content: "\\e725";\n}\n\n.icon-esgcc-gonggao:before {\n  content: "\\e726";\n}\n\n.icon-esgcc-qinggoudanshenpi:before {\n  content: "\\e727";\n}\n\n.icon-esgcc-shangyiyedanjiantou:before {\n  content: "\\e728";\n}\n\n.icon-esgcc-quanxianziyuanguanli:before {\n  content: "\\e729";\n}\n\n.icon-esgcc-shouqi:before {\n  content: "\\e72a";\n}\n\n.icon-esgcc-shouhuodizhi:before {\n  content: "\\e72b";\n}\n\n.icon-esgcc-shangchuantupian:before {\n  content: "\\e72c";\n}\n\n.icon-esgcc-shuangjiantouyou:before {\n  content: "\\e72d";\n}\n\n.icon-esgcc-shuangjiantoushang:before {\n  content: "\\e72e";\n}\n\n.icon-esgcc-shouhou:before {\n  content: "\\e72f";\n}\n\n.icon-esgcc-shuangjiantouxia:before {\n  content: "\\e730";\n}\n\n.icon-esgcc-tishi:before {\n  content: "\\e731";\n}\n\n.icon-esgcc-tijiao:before {\n  content: "\\e732";\n}\n\n.icon-esgcc-shuangjiantouzuo:before {\n  content: "\\e733";\n}\n\n.icon-esgcc-wanchengcaozuoyangshi:before {\n  content: "\\e734";\n}\n\n.icon-esgcc-tuihuanhuo:before {\n  content: "\\e735";\n}\n\n.icon-esgcc-weibajiantouxia:before {\n  content: "\\e736";\n}\n\n.icon-esgcc-weibajiantouyou:before {\n  content: "\\e737";\n}\n\n.icon-esgcc-weibajiantoushang:before {\n  content: "\\e738";\n}\n\n.icon-esgcc-tousu:before {\n  content: "\\e739";\n}\n\n.icon-esgcc-wanchengcaozuoyangshi1:before {\n  content: "\\e73a";\n}\n\n.icon-esgcc-weibajiantouzuo:before {\n  content: "\\e73b";\n}\n\n.icon-esgcc-wodezixun:before {\n  content: "\\e73c";\n}\n\n.icon-esgcc-xiayiyedanjiantou:before {\n  content: "\\e73d";\n}\n\n.icon-esgcc-wuliu:before {\n  content: "\\e73e";\n}\n\n.icon-esgcc-xiaoxiliebiao:before {\n  content: "\\e73f";\n}\n\n.icon-esgcc-yishangchuanwenjian:before {\n  content: "\\e740";\n}\n\n.icon-esgcc-zhanneixin:before {\n  content: "\\e741";\n}\n\n.icon-esgcc-zhankai:before {\n  content: "\\e742";\n}\n\n.icon-esgcc-xiugaimima:before {\n  content: "\\e743";\n}\n\n.icon-esgcc-yifukuan:before {\n  content: "\\e744";\n}\n\n.icon-esgcc-yishouhuo:before {\n  content: "\\e745";\n}\n\n.icon-esgcc-zhengdanweihuyichang:before {\n  content: "\\e746";\n}\n\n.icon-esgcc-zhanneixinyidu:before {\n  content: "\\e747";\n}\n\n.icon-esgcc-zhanghaoguanli:before {\n  content: "\\e748";\n}\n\n.icon-esgcc-CAbangdingzhinan:before {\n  content: "\\e749";\n}\n\n.icon-esgcc-CArenzheng:before {\n  content: "\\e74a";\n}\n\n.icon-esgcc-zhuce:before {\n  content: "\\e74b";\n}\n\n.icon-esgcc-shenpibohui:before {\n  content: "\\e74c";\n}\n\n.icon-esgcc-daishenpi:before {\n  content: "\\e74d";\n}\n\n.icon-esgcc-shenpitongguo:before {\n  content: "\\e74e";\n}\n\n.icon-esgcc-shijian:before {\n  content: "\\e7d8";\n}\n\n.icon-esgcc-pinpaiguanli:before {\n  content: "\\e7da";\n}\n\n.icon-esgcc-shangpinguanli:before {\n  content: "\\e7db";\n}\n\n.icon-esgcc-shuxingguanli:before {\n  content: "\\e7dc";\n}\n\n.icon-esgcc-zhidaoshipin:before {\n  content: "\\e7e9";\n}\n\n.icon-esgcc-anzhuangshouce:before {\n  content: "\\e7ea";\n}\n\n.icon-esgcc-canshuxinxi:before {\n  content: "\\e7ec";\n}\n\n`,""]);const y=p},6860:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(5172),n.b),c=new URL(n(4894),n.b),h=new URL(n(9546),n.b),p=a()(i()),f=l()(u),d=l()(c),g=l()(h);p.push([t.id,`@font-face {\n  font-family: "iconfont"; /* Project id 3068445 */\n  src: url(${f}) format('woff2'),\n       url(${d}) format('woff'),\n       url(${g}) format('truetype');\n}\n\n.iconfont {\n  font-family: "iconfont" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.icon-vge-Hailstorm-Night:before {\n  content: "\\e9ad";\n}\n\n.icon-vge-liandong:before {\n  content: "\\e62b";\n}\n\n.icon-vge-tuichu1:before {\n  content: "\\e892";\n}\n\n.icon-vge-biaohui:before {\n  content: "\\e60a";\n}\n\n.icon-vge-tuceng:before {\n  content: "\\e617";\n}\n\n.icon-vge-duoyun:before {\n  content: "\\e601";\n}\n\n.icon-vge-jiejing:before {\n  content: "\\e607";\n}\n\n.icon-vge-weibiaoti-2:before {\n  content: "\\e60f";\n}\n\n.icon-vge-texiao:before {\n  content: "\\ec97";\n}\n\n.icon-vge-fenping:before {\n  content: "\\e6a0";\n}\n\n.icon-vge-feihangmanyou:before {\n  content: "\\e658";\n}\n\n.icon-vge-juanlian:before {\n  content: "\\e67a";\n}\n\n.icon-vge-timeline:before {\n  content: "\\e6b5";\n}\n\n.icon-vge-daohang:before {\n  content: "\\e651";\n}\n\n.icon-vge-biaoqian:before {\n  content: "\\e69f";\n}\n\n.icon-vge-daohang1:before {\n  content: "\\e640";\n}\n\n.icon-vge-fenxi:before {\n  content: "\\e609";\n}\n\n.icon-vge-dingwei:before {\n  content: "\\e618";\n}\n\n.icon-vge-pin-fill:before {\n  content: "\\e87a";\n}\n\n.icon-vge-24gf-printer:before {\n  content: "\\e9c3";\n}\n\n.icon-vge-shuipingliangsuan:before {\n  content: "\\e68a";\n}\n\n.icon-vge-ditu:before {\n  content: "\\e884";\n}\n\n.icon-vge-guanbi2:before {\n  content: "\\e725";\n}\n\n.icon-vge-shipin:before {\n  content: "\\e644";\n}\n\n.icon-vge-zhuanyiluxian:before {\n  content: "\\e657";\n}\n\n.icon-vge-wenjianjia:before {\n  content: "\\ec17";\n}\n\n.icon-vge-mimazhongzhi:before {\n  content: "\\e60e";\n}\n\n.icon-vge-vr:before {\n  content: "\\e6f6";\n}\n\n.icon-vge-shuizhi:before {\n  content: "\\e638";\n}\n\n.icon-vge-moxingbianji:before {\n  content: "\\ec7c";\n}\n\n.icon-vge-sanwei:before {\n  content: "\\e633";\n}\n\n.icon-vge-Icon_lujinghuizhi:before {\n  content: "\\e631";\n}\n\n.icon-vge-liangsuanmianji:before {\n  content: "\\edc8";\n}\n\n.icon-vge-TINdixingcaozuo:before {\n  content: "\\ee2a";\n}\n\n.icon-vge-luopancompass83:before {\n  content: "\\e6a1";\n}\n\n.icon-vge-tuichu:before {\n  content: "\\e688";\n}\n\n.icon-vge-icon_tianjia:before {\n  content: "\\eb89";\n}\n\n.icon-vge-zhongzhi:before {\n  content: "\\e669";\n}\n\n.icon-vge-ditu-youxia-tuceng:before {\n  content: "\\e628";\n}\n\n.icon-vge-changjingjuanlian:before {\n  content: "\\ec64";\n}\n\n.icon-vge-changjing:before {\n  content: "\\ed99";\n}\n\n.icon-vge-jianqie:before {\n  content: "\\e600";\n}\n\n`,""]);const y=p},6841:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,".leaflet-popup-container {\n    position: absolute;\n    text-align: center;\n}\n\n.leaflet-popup-close-button {\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 4px 4px 0 0;\n    text-align: center;\n    width: 18px;\n    height: 14px;\n    font: 16px/14px Tahoma, Verdana, sans-serif;\n    color: #c3c3c3;\n    text-decoration: none;\n    font-weight: bold;\n    background: transparent;\n    cursor: pointer;\n}\n\n.leaflet-popup-content-wrapper {\n    text-align: center;\n    max-height: 200px;\n    overflow-y: auto;\n    background: rgba(63, 72, 84, 0.7);\n    box-shadow: 0 3px 14px rgb(0 0 0 / 40%);\n    padding: 1px;\n    text-align: left;\n    border-radius: 4px;\n    padding: 8px;\n    color: white;\n}\n\n.leaflet-popup-tip-container {\n    margin: 0 auto;\n    width: 40px;\n    height: 20px;\n    position: relative;\n    overflow: hidden;\n}\n\n.leaflet-popup-tip {\n    background: rgba(63, 72, 84, 0.7);\n    box-shadow: 0 3px 14px rgb(0 0 0 / 40%);\n    width: 17px;\n    height: 17px;\n    padding: 1px;\n    margin: -10px auto 0;\n    transform: rotate( 45deg);\n}",""]);const s=a},5013:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,"html, body, #app {\n    height: 100vh;\n    width: 100vw;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n}\n\n.MapContainer{\n    background: rgba(1, 1, 1, 0.5);\n}\n\n/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\n::-webkit-scrollbar {\n    width: 7px;\n    height: 7px;\n    background-color: #F5F5F5;\n}\n\n/*定义滚动条轨道 内阴影+圆角*/\n::-webkit-scrollbar-track {\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px;\n    background-color: #F5F5F5;\n}\n\n/*定义滑块 内阴影+圆角*/\n::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, .1);\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .1);\n    background-color: #c8c8c8;\n}\n\n.cesium-performanceDisplay-defaultContainer {\n    display: none;\n}\n\n.ctrlPanel {\n    position: absolute;\n    top: 50px;\n    left: 50px;\n    padding: 20px;\n    max-width: 500px;\n    border: #0ae9ff solid 1px;\n    z-index: 200;\n    background-color: rgba(78, 84, 101, 0.38);\n    border-radius: 10px;\n    color: white;\n    text-shadow: #000 1px 0 0, #000 0 1px 0, #000 -1px 0 0, #000 0 -1px 0;\n\n\n    .btn-default {\n        padding: 5px 8px;\n        margin-bottom: 5px;\n    }\n}\n\n.ctr-btn-sm {\n    padding: 2px;\n}\n",""]);const s=a},8509:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,"#cesium-image-layer-split:hover {\n    cursor: ew-resize;\n}\n/* 卷帘对比的分界线 */\n#cesium-image-layer-split{\n    position: absolute;\n    left: 50%;\n    top: 0;\n    background-color: #d3d3d3;\n    width: 5px;\n    height: 100%;\n}",""]);const s=a},7475:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,'.MultiFieldAdaptWindow-container {\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    min-width: 350px;\n    min-height: 180px;\n    color: white;\n}\n\n.MultiFieldAdaptWindow-container::before {\n    position: absolute;\n    content: "";\n    top: 100%;\n    left: calc(50% - 20px);\n    border: 20px solid transparent;\n    border-top: 40px solid rgba(30, 32, 42, 0.5);\n}\n\n.MultiFieldAdaptWindow-header {\n    height: 30px;\n    line-height: 30px;\n    color: white;\n    min-width: 200px;\n    padding: 0px 10px;\n    background: #1a4879;\n    border-top-right-radius: 4px;\n    border-top-left-radius: 4px;\n    position: relative;\n    user-select: none;\n}\n\n.MultiFieldAdaptWindow-close {\n    position: absolute;\n    right: 1px;\n    font-size: 25px;\n    cursor: pointer;\n    width: 29px;\n    text-align: center;\n}\n\n.MultiFieldAdaptWindow-close:hover {\n    background: #dc2929b9;\n}\n\n.MultiFieldAdaptWindow-body {\n    padding: 5px;\n    background: linear-gradient(0deg, rgba(30, 32, 42, 0.5), rgba(13, 16, 19, 0.7));\n    border: 1px solid rgb(29, 26, 26);\n    border-top: 0px;\n    border-bottom-right-radius: 4px;\n    border-bottom-left-radius: 4px;\n}\n\n.MultiFieldAdaptWindow-info-item {\n    margin: 14px 0px;\n    max-width: 350px;\n}\n\n.MultiFieldAdaptWindow-ifno-label {\n    display: inline-block;\n    min-width: 60px;\n    text-align: justify;\n    text-align-last: justify;\n    background: #fff6f625;\n}\n\n.MultiFieldAdaptWindow-ifno-text {\n    background: #fff6f60e;\n}\n',""]);const s=a},6043:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,'.popup3d1-container {\n    min-height: 200px;\n    min-width: 350px;\n    background: #3183bdb0;\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    cursor: default;\n}\n\n.popup3d1-container::before {\n    position: absolute;\n    content: "";\n    top: 100%;\n    left: calc(50% - 20px);\n    border: 20px solid transparent;\n    border-top: 40px solid #3183bdb0;\n}\n\n.popup3d1-header {\n    color: white;\n    background: #2152bb;\n    height: 30px;\n    line-height: 30px;\n}\n\n.popup3d1-header-title {\n    display: inline-block;\n    height: 100%;\n    margin-left: 5px;\n}\n\n.popup3d1-close {\n    position: absolute;\n    right: 1px;\n    font-size: 25px;\n    cursor: pointer;\n    width: 29px;\n    text-align: center;\n}\n\n.popup3d1-close:hover {\n    background: #dc2929b9;\n}\n\n.popup3d1-body {\n    padding: 10px;\n    color: white;\n}',""]);const s=a},3587:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(3361),n.b),c=a()(i()),h=l()(u);c.push([t.id,`.popup3d2-container {\n    width: 350px;\n    height: 200px;\n    background: #14193399;\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    cursor: default;\n}\n\n.popup3d2-container::before {\n    content: "";\n    width: calc(100% + 22px);\n    height: 39px;\n    position: absolute;\n    bottom: -39px;\n    left: -22px;\n    background: url(${h}) 0px 0px no-repeat;\n    background-position: 0px 0px;\n}\n\n.popup3d2-header {\n    height: 30px;\n    color: white;\n    background: #1f3f8e;\n    line-height: 30px;\n}\n\n.popup3d2-title {\n    display: inline-block;\n    height: 100%;\n    margin-left: 5px;\n    padding-left: 5px;\n}\n\n.popup3d2-close {\n    position: absolute;\n    right: 1px;\n    font-size: 25px;\n    cursor: pointer;\n    width: 29px;\n    text-align: center;\n}\n\n.popup3d2-close:hover {\n    background: #dc2929b9;\n}\n\n.popup3d2-body {\n    padding: 10px;\n    color: white;\n}`,""]);const p=c},6560:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,'@keyframes dynamic-dynamic-divlabel-animate1 {\n    0%,\n    100% {\n        clip: rect(0px, var(--clip-width-1), 2px, 0px);\n    }\n    25% {\n        clip: rect(0px, 2px, var(--clip-height-1), 0px);\n    }\n    50% {\n        clip: rect( var(--clip-height-2), var(--clip-width-1), var(--clip-width-1), 0px);\n    }\n    75% {\n        clip: rect( 0px, var(--clip-width-1), var(--clip-height-1), var(--clip-width-2));\n    }\n}\n\n.dynamic-divlabel-container {\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    pointer-events: none;\n    cursor: pointer;\n}\n\n.dynamic-divlabel-container1 {\n    --boder-height: 30px;\n    --clip-height-1: 40px;\n    --clip-height-2: 38px;\n    /* --border-color: rgb(24, 144, 255);\n    --box-shadow-color: rgba(24, 144, 255, 0.73); */\n    --text-color: #ccc;\n    --border-color: rgb(21, 209, 242);\n    --box-shadow-color: rgba(21, 209, 242, 0.56);\n    --text-font-size: 14px;\n    --clip-width-1: 165px;\n    --clip-width-2: 163px;\n    --boder-width: 150px;\n    --text-left-position: -75px;\n    --animation-name: dynamic-dynamic-divlabel-animate1;\n}\n\n.sz-component-animate-marker__boder {\n    width: var(--boder-width);\n    height: var(--boder-height);\n    margin: auto;\n    color: var(--border-color);\n    box-shadow: inset 0 0 0 1px var(--box-shadow-color);\n}\n\n.sz-component-animate-marker__text {\n    color: var(--text-color);\n    font-size: var(--text-font-size);\n    display: flex;\n    width: 100%;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n    font-weight: bolder;\n    user-select: none;\n    cursor: pointer;\n}\n\n.sz-component-animate-marker__boder,\n.sz-component-animate-marker__boder::before,\n.sz-component-animate-marker__boder::after {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n\n.sz-component-animate-marker__boder::before,\n.sz-component-animate-marker__boder::after {\n    content: "";\n    margin: -5%;\n    box-shadow: inset 0 0 0 2px;\n    animation: var(--animation-name) 8s linear infinite;\n}\n\n.sz-component-animate-marker__boder::before {\n    animation-delay: -4s;\n}\n',""]);const s=a},3348:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,".div-point-container {\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    display: block;\n}\n\n.divpoint-wrap {\n    position: relative;\n    padding: 30px;\n    overflow: hidden;\n}\n\n.divpoint-theme .arrow,\n.divpoint-theme .title::before {\n    /* background-color: #28bbf0; */\n    background-color: #4984ed;\n}\n\n.divpoint .arrow {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 45px;\n    height: 2px;\n    transform: rotate(-45deg) translate(5px, -15px);\n}\n\n.divpoint-theme .divpoint-area {\n    background-image: linear-gradient( 135deg, transparent 30px, #28bbf06c 30px, #28bbf06c 50%, transparent 50%), linear-gradient( -45deg, transparent 30px, #28bbf06c 30px, #28bbf06c 50.1%, transparent 50%);\n}\n\n.divpoint .divpoint-area {\n    position: relative;\n    min-width: 180px;\n    min-height: 150px;\n}\n\n.divpoint-theme .b-b,\n.divpoint-theme .b-b-r,\n.divpoint-theme .b-l,\n.divpoint-theme .b-r,\n.divpoint-theme .b-t,\n.divpoint-theme .b-t-l {\n    /* background:  #29baf1; */\n    background-color: #4984ed;\n    /* box-shadow: 0 0 10px 2px #29baf1; */\n    box-shadow: 0 0 10px 2px #4984ed;\n}\n\n.divpoint .b-t-l {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 1px;\n    height: 62px;\n    transform: rotate(45deg) translate(52px, -22px);\n    z-index: 10;\n}\n\n.divpoint .b-b-r {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    width: 1px;\n    height: 62px;\n    transform: rotate(45deg) translate(-52px, 22px);\n    z-index: 10;\n}\n\n.divpoint .b-t {\n    position: absolute;\n    top: 0;\n    left: 44px;\n    right: 0;\n    height: 1px;\n    z-index: 10;\n}\n\n.divpoint .b-r {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 44px;\n    width: 1px;\n    z-index: 10;\n}\n\n.divpoint .b-b {\n    position: absolute;\n    left: 0;\n    right: 44px;\n    bottom: 0;\n    height: 1px;\n    z-index: 10;\n}\n\n.divpoint .b-l {\n    position: absolute;\n    top: 44px;\n    left: 0;\n    bottom: 0;\n    width: 1px;\n    z-index: 10;\n}",""]);const s=a},4541:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,'.is-shulie {\n    width: 15px;\n    text-align: center;\n    background: transparent;\n    font-size: 9px;\n    font-weight: 600;\n    color: white;\n    font-family: "Microsoft YaHei", "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Hiragino Sans GB", "PingFang SC", "Helvetica Neue", Helvetica, Arial, sans-serif !important;\n    position: absolute;\n    display: block;\n    box-sizing: border-box;\n    pointer-events: none;\n}\n\n.is-shulie-item {\n    writing-mode: vertical-lr;\n    font-size: 16px;\n    letter-spacing: 4px;\n}\n\n.pre-topCard-list-item-line {\n    display: block;\n    height: 100px;\n    width: 1px;\n    margin-left: calc(50% + 2px);\n    margin-top: 3px;\n    background-color: #fff;\n}\n\n.pre-topCard-list-item-circle {\n    width: 10px;\n    height: 10px;\n    background-color: #fff;\n    border-radius: 50%;\n    margin-left: 5px;\n    margin-top: -10px;\n}',""]);const s=a},4421:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,' .gradient-label {\n     text-align: center;\n     position: absolute;\n     padding: 5px 20px;\n     margin: 0;\n     color: #fff;\n     background: linear-gradient(rgb(7 10 203 / 75%), rgb(16 238 220));\n     -webkit-border-radius: 5px;\n     -moz-border-radius: 5px;\n     border-radius: 5px;\n     max-width: 180px;\n     max-height: 134px;\n     -webkit-user-select: none;\n     -moz-user-select: none;\n     -ms-user-select: none;\n     user-select: none;\n }\n \n .gradient-label:after {\n     content: "";\n     position: absolute;\n     bottom: -60px;\n     left: calc(50% - 3px);\n     display: block;\n     width: 3px;\n     height: 60px;\n     border-right: 3px solid #2bcdbb;\n }',""]);const s=a},3596:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,'.hot-spot {\n    user-select: none;\n    z-index: 999;\n    width: 70px;\n    height: 44px;\n    background-size: cover;\n    left: 0px;\n    bottom: 0px;\n    font-family: "PingFang-SC-Regular", "Helvetica Neue", "PingFang SC", Helvetica, "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;\n}\n\n.hot-spot,\n.hot-spot .hot-spot-board {\n    position: absolute;\n    background-repeat: no-repeat;\n}\n\n.hot-spot .hot-spot-board {\n    top: -240px;\n    transform: translateX(-30%);\n    width: 180px;\n    height: 52px;\n    padding: 15px 0;\n    background-position: 50%;\n    background-size: contain;\n    cursor: pointer;\n}\n\n.hot-spot .hot-spot-board-medium {\n    top: -200px;\n}\n\n.hot-spot .hot-spot-line {\n    position: absolute;\n    top: -158px;\n    left: 35px;\n    width: 2px;\n    height: 180px;\n    background: linear-gradient(180deg, #38c9ff, transparent);\n}\n\n.hot-spot .hot-spot-line:after {\n    height: 60%;\n    left: -5px;\n    animation: rise 3s linear infinite;\n    -webkit-animation: rise 3s linear infinite;\n    -moz-animation: rise 3s linear infinite;\n    -ms-animation: rise 3s linear infinite;\n    -o-animation: rise 3s linear infinite;\n}\n\n.hot-spot .hot-spot-line:after,\n.hot-spot .hot-spot-line:before {\n    content: "";\n    display: block;\n    width: 1px;\n    background: linear-gradient(180deg, #38c9ff, transparent);\n    position: absolute;\n    cursor: pointer;\n}\n\n.hot-spot .hot-spot-line:before {\n    height: 40%;\n    left: 6px;\n    animation: rise 3s linear 1s infinite;\n    -webkit-animation: rise 3s linear 1s infinite;\n    -moz-animation: rise 3s linear 1s infinite;\n    -ms-animation: rise 3s linear 1s infinite;\n    -o-animation: rise 3s linear 1s infinite;\n}\n\n.hot-spot .hot-spot-line-medium {\n    height: 140px;\n    top: -118px;\n}\n\n.hot-spot h5 {\n    font-size: 16px;\n    margin: 0;\n}\n\n.hot-spot h5,\n.hot-spot p {\n    width: 100%;\n    text-align: center;\n    line-height: 24px;\n    color: #beedff;\n}\n\n.hot-spot p {\n    font-size: 12px;\n}\n\n.hot-spot:hover {\n    background-position: 50%;\n    background-size: contain;\n    background-repeat: no-repeat;\n    cursor: pointer;\n}\n\n.hot-spot:hover h5,\n.hot-spot:hover p {\n    color: #fff;\n}\n\n.hot-spot:hover .hot-spot-line {\n    background: linear-gradient(180deg, #ff7a21, transparent);\n    background-size: contain;\n    background-repeat: no-repeat;\n}\n\n.hot-spot:hover .hot-spot-line:after,\n.hot-spot:hover .hot-spot-line:before {\n    background: linear-gradient(180deg, #ff7a21, transparent);\n}\n\n@-webkit-keyframes rise {\n    0% {\n        opacity: 0;\n        top: 75%;\n    }\n    50% {\n        opacity: 1;\n    }\n    to {\n        opacity: 0;\n        top: 0;\n    }\n}\n\n@keyframes rise {\n    0% {\n        opacity: 0;\n        top: 75%;\n    }\n    50% {\n        opacity: 1;\n    }\n    to {\n        opacity: 0;\n        top: 0;\n    }\n}\n\n.board {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100vw;\n    height: 40px;\n    line-height: 40px;\n    background-color: rgba(0, 0, 0, 0.5);\n    color: #fff;\n    text-align: center;\n    font-size: 12px;\n}',""]);const s=a},4577:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(3361),n.b),c=a()(i()),h=l()(u);c.push([t.id,`.point-sample-label-container {\n    min-width: 96px;\n    min-height: 35px;\n    background: linear-gradient(0deg, #1e202a 0%, #0d1013 100%);\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    cursor: default;\n    border-radius: 4px;\n    opacity: 0.96;\n    border: 1px solid #14171c;\n    box-shadow: 0px 2px 21px 0px rgba(33, 34, 39, 0.55);\n    border-radius: 4px;\n    box-sizing: border-box;\n}\n\n.point-sample-label-container::before {\n    content: "";\n    width: calc(100% + 22px);\n    height: 39px;\n    position: absolute;\n    bottom: -39px;\n    left: -22px;\n    background: url(${h}) 0px 0px no-repeat;\n    background-position: 0px 0px;\n}\n\n.point-sample-label-text {\n    width: 100%;\n    height: 100%;\n    text-align: center;\n    padding: 1px;\n    font-size: 14px;\n    font-family: 'MicrosoftYaHei';\n    font-weight: 400;\n    color: #ffffff;\n    line-height: 33px;\n    border: 1px solid #ffffff4f;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.point-sample-label-closeBtn{\n    position: absolute;\n    right: 0;\n    width: 17px;\n    text-align: center;\n    color: white;\n    background-color: rgba(122, 123, 124, 0.7);\n    z-index: 1000;\n}\n.point-sample-label-closeBtn:hover{\n    background: coral;\n}\n`,""]);const p=c},3133:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(5984),n.b),c=a()(i()),h=l()(u);c.push([t.id,`.video-popup3d-container {\n    min-width: 250px;\n    min-height: 200px;\n    max-width: 400px;\n    max-height: 400px;\n    background: #14193399;\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    cursor: default;\n}\n\n.video-popup3d-container::before {\n    content: "";\n    width: calc(100% + 22px);\n    height: 39px;\n    position: absolute;\n    bottom: -39px;\n    left: -22px;\n    background: url(${h}) 0px 0px no-repeat;\n    background-position: 0px 0px;\n}\n\n.video-popup3d-header {\n    height: 30px;\n    color: white;\n    background: #1f3f8e;\n    line-height: 30px;\n}\n\n.video-popup3d-header-title {\n    display: inline-block;\n    height: 100%;\n    margin-left: 5px;\n}\n\n.video-popup3d-close {\n    position: absolute;\n    right: 1px;\n    font-size: 25px;\n    cursor: pointer;\n    width: 29px;\n    text-align: center;\n}\n\n.video-popup3d-close:hover {\n    background: #dc2929b9;\n}\n\n.video-jd-temp {\n    width: 400px;\n    height: 240px;\n}\n`,""]);const p=c},951:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,".div-mask {\n    background: #0000;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    box-shadow: inset 1px 0px 500px 170px #000000;\n    pointer-events: none;\n    z-index: 999;\n}\n",""]);const s=a},533:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(4638),n.b),c=new URL(n(69),n.b),h=a()(i()),p=l()(u),f=l()(c);h.push([t.id,`.device-status-container {\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    min-width: 350px;\n    min-height: 200px;\n    color: white;\n    user-select: none;\n    pointer-events: none;\n}\n\n.device-status-container-green {\n    background: url(${p}) no-repeat;\n}\n\n.device-status-container-yellow {\n    background: url(${f}) no-repeat;\n}\n\n.device-title {\n    position: absolute;\n    left: 60px;\n    top: 32px;\n}\n\n.device-name {\n    position: absolute;\n    left: 30px;\n    top: 58px;\n}\n\n.device-num {\n    position: absolute;\n    left: 30px;\n    top: 80px;\n}\n\n.device-status {\n    position: absolute;\n    left: 30px;\n    top: 102px;\n}\n\n.device-status-t0 {\n    color: #FFE103;\n}\n\n.device-status-t1 {\n    color: #29EA77;\n}\n\n.device-status-t0:before {\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    content: "";\n    background: #FFE103;\n    margin-right: 10px;\n}\n\n.device-status-t1:before {\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    content: "";\n    background: #29EA77;\n    margin-right: 10px;\n}\n`,""]);const d=h},8368:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,'.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid #b3c5db;background-color:rgba(255,255,255,.4)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid #eee;border-top:none;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-step-marker{width:1px;height:15px;background-color:#000;float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:12px;z-index:11;color:#000;text-shadow:-2px 0 #fff,0 2px #fff,2px 0 #fff,0 -2px #fff}.ol-scale-text{position:absolute;font-size:14px;text-align:center;bottom:25px;color:#000;text-shadow:-2px 0 #fff,0 2px #fff,2px 0 #fff,0 -2px #fff}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid #000}.ol-unsupported{display:none}.ol-unselectable,.ol-viewport{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:rgba(255,255,255,.4);border-radius:4px;padding:2px}.ol-control:hover{background-color:rgba(255,255,255,.6)}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:#fff;font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:rgba(0,60,136,.5);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;font-size:1.2em;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:focus,.ol-control button:hover{text-decoration:none;background-color:rgba(0,60,136,.7)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:rgba(0,60,136,.7);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:#000;text-shadow:0 0 2px #fff;font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:2px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-overviewmap-box{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}',""]);const s=a},6577:(t,e,n)=>{"use strict";n.d(e,{Z:()=>v});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o),s=n(2217),l=n.n(s),u=new URL(n(3747),n.b),c=new URL(n(5387),n.b),h=new URL(n(2502),n.b),p=new URL(n(7371),n.b),f=a()(i()),d=l()(u),g=l()(c),y=l()(h),m=l()(p);f.push([t.id,`/*-------------------------------------\nzTree Style\n\nversion:\t3.5.19\nauthor:\t\tHunter.z\nemail:\t\thunter.z@263.net\nwebsite:\thttp://code.google.com/p/jquerytree/\n\n-------------------------------------*/\n\n.ztree * {padding:0; margin:0; font-size:12px; font-family: Verdana, Arial, Helvetica, AppleGothic, sans-serif}\n.ztree {margin:0; padding:5px; color:#333}\n.ztree li{padding:0; margin:0; list-style:none; line-height:14px; text-align:left; white-space:nowrap; outline:0}\n.ztree li ul{ margin:0; padding:0 0 0 18px}\n.ztree li ul.line{ background:url(${d}) 0 0 repeat-y;}\n\n.ztree li a {padding:1px 3px 0 0; margin:0; cursor:pointer; height:17px; color:#333; background-color: transparent;\n\ttext-decoration:none; vertical-align:top; display: inline-block}\n.ztree li a:hover {text-decoration:underline}\n.ztree li a.curSelectedNode {padding-top:0px; background-color:#FFE6B0; color:black; height:16px; border:1px #FFB951 solid; opacity:0.8;}\n.ztree li a.curSelectedNode_Edit {padding-top:0px; background-color:#FFE6B0; color:black; height:16px; border:1px #FFB951 solid; opacity:0.8;}\n.ztree li a.tmpTargetNode_inner {padding-top:0px; background-color:#316AC5; color:white; height:16px; border:1px #316AC5 solid;\n\topacity:0.8; filter:alpha(opacity=80)}\n.ztree li a.tmpTargetNode_prev {}\n.ztree li a.tmpTargetNode_next {}\n.ztree li a input.rename {height:14px; width:80px; padding:0; margin:0;\n\tfont-size:12px; border:1px #7EC4CC solid; *border:0px}\n.ztree li span {line-height:16px; margin-right:2px}\n.ztree li span.button {line-height:0; margin:0; width:16px; height:16px; display: inline-block; vertical-align:middle;\n\tborder:0 none; cursor: pointer;outline:none;\n\tbackground-color:transparent; background-repeat:no-repeat; background-attachment: scroll;\n\tbackground-image:url(${g}); *background-image:url(${y})}\n\n.ztree li span.button.chk {width:13px; height:13px; margin:0 3px 0 0; cursor: auto}\n.ztree li span.button.chk.checkbox_false_full {background-position:0 0}\n.ztree li span.button.chk.checkbox_false_full_focus {background-position:0 -14px}\n.ztree li span.button.chk.checkbox_false_part {background-position:0 -28px}\n.ztree li span.button.chk.checkbox_false_part_focus {background-position:0 -42px}\n.ztree li span.button.chk.checkbox_false_disable {background-position:0 -56px}\n.ztree li span.button.chk.checkbox_true_full {background-position:-14px 0}\n.ztree li span.button.chk.checkbox_true_full_focus {background-position:-14px -14px}\n.ztree li span.button.chk.checkbox_true_part {background-position:-14px -28px}\n.ztree li span.button.chk.checkbox_true_part_focus {background-position:-14px -42px}\n.ztree li span.button.chk.checkbox_true_disable {background-position:-14px -56px}\n.ztree li span.button.chk.radio_false_full {background-position:-28px 0}\n.ztree li span.button.chk.radio_false_full_focus {background-position:-28px -14px}\n.ztree li span.button.chk.radio_false_part {background-position:-28px -28px}\n.ztree li span.button.chk.radio_false_part_focus {background-position:-28px -42px}\n.ztree li span.button.chk.radio_false_disable {background-position:-28px -56px}\n.ztree li span.button.chk.radio_true_full {background-position:-42px 0}\n.ztree li span.button.chk.radio_true_full_focus {background-position:-42px -14px}\n.ztree li span.button.chk.radio_true_part {background-position:-42px -28px}\n.ztree li span.button.chk.radio_true_part_focus {background-position:-42px -42px}\n.ztree li span.button.chk.radio_true_disable {background-position:-42px -56px}\n\n.ztree li span.button.switch {width:18px; height:18px}\n.ztree li span.button.root_open{background-position:-92px -54px}\n.ztree li span.button.root_close{background-position:-74px -54px}\n.ztree li span.button.roots_open{background-position:-92px 0}\n.ztree li span.button.roots_close{background-position:-74px 0}\n.ztree li span.button.center_open{background-position:-92px -18px}\n.ztree li span.button.center_close{background-position:-74px -18px}\n.ztree li span.button.bottom_open{background-position:-92px -36px}\n.ztree li span.button.bottom_close{background-position:-74px -36px}\n.ztree li span.button.noline_open{background-position:-92px -72px}\n.ztree li span.button.noline_close{background-position:-74px -72px}\n.ztree li span.button.root_docu{ background:none;}\n.ztree li span.button.roots_docu{background-position:-56px 0}\n.ztree li span.button.center_docu{background-position:-56px -18px}\n.ztree li span.button.bottom_docu{background-position:-56px -36px}\n.ztree li span.button.noline_docu{ background:none;}\n\n.ztree li span.button.ico_open{margin-right:2px; background-position:-110px -16px; vertical-align:top; *vertical-align:middle}\n.ztree li span.button.ico_close{margin-right:2px; background-position:-110px 0; vertical-align:top; *vertical-align:middle}\n.ztree li span.button.ico_docu{margin-right:2px; background-position:-110px -32px; vertical-align:top; *vertical-align:middle}\n.ztree li span.button.edit {margin-right:2px; background-position:-110px -48px; vertical-align:top; *vertical-align:middle}\n.ztree li span.button.remove {margin-right:2px; background-position:-110px -64px; vertical-align:top; *vertical-align:middle}\n\n.ztree li span.button.ico_loading{margin-right:2px; background:url(${m}) no-repeat scroll 0 0 transparent; vertical-align:top; *vertical-align:middle}\n\nul.tmpTargetzTree {background-color:#FFE6B0; opacity:0.8; filter:alpha(opacity=80)}\n\nspan.tmpzTreeMove_arrow {width:16px; height:16px; display: inline-block; padding:0; margin:2px 0 0 1px; border:0 none; position:absolute;\n\tbackground-color:transparent; background-repeat:no-repeat; background-attachment: scroll;\n\tbackground-position:-110px -80px; background-image:url(${g}); *background-image:url(${y})}\n\nul.ztree.zTreeDragUL {margin:0; padding:0; position:absolute; width:auto; height:auto;overflow:hidden; background-color:#cfcfcf; border:1px #00B83F dotted; opacity:0.8; filter:alpha(opacity=80)}\n.zTreeMask {z-index:10000; background-color:#cfcfcf; opacity:0.0; filter:alpha(opacity=0); position:absolute}\n\n/* level style*/\n/*.ztree li span.button.level0 {\n\tdisplay:none;\n}\n.ztree li ul.level0 {\n\tpadding:0;\n\tbackground:none;\n}*/`,""]);const v=f},6650:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2410),i=n.n(r),o=n(4426),a=n.n(o)()(i());a.push([t.id,".position-info-status-bar {\n    left: 0;\n    right: 0;\n    bottom: 0;\n    display: block;\n    position: absolute;\n    padding: 3px 10px;\n    font-size: 13px;\n    color: #e9e9e9;\n    text-shadow: 2px 2px 2px #000;\n    background-color: rgba(0, 0, 0, .4);\n    pointer-events: none;\n    text-align: right;\n}\n\n.position-info-status-bar div {\n    float: left;\n    margin-right: 30px;\n}",""]);const s=a},4426:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var u=0;u<t.length;u++){var c=[].concat(t[u]);r&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},2217:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},2410:t=>{"use strict";t.exports=function(t){return t[1]}},5159:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(5793),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},648:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(1209),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},2346:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(8560),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},5123:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(6860),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},9699:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(6841),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},185:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(5013),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},4455:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(8509),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},743:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(7475),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},7470:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(6043),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},760:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(3587),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},2371:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(6560),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},4822:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(3348),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},3413:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(4541),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},4742:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(4421),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},4185:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(3596),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},1434:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(4577),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},1532:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(3133),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},92:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(951),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},5573:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(533),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},7273:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(8368),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},8444:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(860),i=n.n(r),o=n(4181),a=n.n(o),s=n(3690),l=n.n(s),u=n(4909),c=n.n(u),h=n(7778),p=n.n(h),f=n(197),d=n.n(f),g=n(6577),y={};y.styleTagTransform=d(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=p(),i()(g.Z,y);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},860:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var l=t[s],u=r.base?l[0]+r.base:l[0],c=o[u]||0,h="".concat(u," ").concat(c);o[u]=c+1;var p=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var d=i(f,r);r.byIndex=s,e.splice(s,0,{identifier:h,updater:d,references:1})}a.push(h)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var l=r(t,i),u=0;u<o.length;u++){var c=n(o[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=l}}},3690:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},7778:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},4909:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},4181:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},197:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},7540:()=>{"use strict";!function(){const t=window.Cesium,e=t.BoxGeometry,n=t.Cartesian3,r=t.defaultValue,i=t.defined,o=t.destroyObject,a=t.DeveloperError,s=t.GeometryPipeline,l=t.Matrix3,u=t.Matrix4,c=t.Transforms,h=t.VertexFormat,p=t.BufferUsage,f=t.CubeMap,d=t.DrawCommand,g=t.loadCubeMap,y=t.RenderState,m=t.VertexArray,v=t.BlendingState,w=t.SceneMode,b=t.ShaderProgram,x=t.ShaderSource,_=t._shadersSkyBoxFS;function E(t){this.sources=t.sources,this._sources=void 0,this.show=r(t.show,!0),this._command=new d({modelMatrix:u.clone(u.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0}const S=new l;E.prototype.update=function(t,r){const o=this;if(!this.show)return;if(t.mode!==w.SCENE3D&&t.mode!==w.MORPHING)return;if(!t.passes.render)return;const l=t.context;if(this._sources!==this.sources){this._sources=this.sources;const t=this.sources;if(!(i(t.positiveX)&&i(t.negativeX)&&i(t.positiveY)&&i(t.negativeY)&&i(t.positiveZ)&&i(t.negativeZ)))throw new a("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof t.positiveX!=typeof t.negativeX||typeof t.positiveX!=typeof t.positiveY||typeof t.positiveX!=typeof t.negativeY||typeof t.positiveX!=typeof t.positiveZ||typeof t.positiveX!=typeof t.negativeZ)throw new a("this.sources properties must all be the same type.");"string"==typeof t.positiveX?g(l,this._sources).then((function(t){o._cubeMap=o._cubeMap&&o._cubeMap.destroy(),o._cubeMap=t})):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new f({context:l,source:t}))}const d=this._command;if(d.modelMatrix=c.eastNorthUpToFixedFrame(t.camera._positionWC),!i(d.vertexArray)){d.uniformMap={u_cubeMap:function(){return o._cubeMap},u_rotateMatrix:function(){return u.getRotation(d.modelMatrix,S)}};const t=e.createGeometry(e.fromDimensions({dimensions:new n(2,2,2),vertexFormat:h.POSITION_ONLY})),r=this._attributeLocations=s.createAttributeLocations(t);d.vertexArray=m.fromGeometry({context:l,geometry:t,attributeLocations:r,bufferUsage:p._DRAW}),d.renderState=y.fromCache({blending:v.ALPHA_BLEND})}if(!i(d.shaderProgram)||this._useHdr!==r){const t=new x({defines:[r?"HDR":""],sources:[_]});d.shaderProgram=b.fromCache({context:l,vertexShaderSource:"\n    in vec3 position;\n    out vec3 v_texCoord;\n    uniform mat3 u_rotateMatrix;\n    void main()\n    {\n        vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n        gl_Position = czm_projection * vec4(p, 1.0);\n        v_texCoord = position.xyz;\n    }\n    ",fragmentShaderSource:t,attributeLocations:this._attributeLocations}),this._useHdr=r}return i(this._cubeMap)?d:void 0},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){const t=this._command;return t.vertexArray=t.vertexArray&&t.vertexArray.destroy(),t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),o(this)},window.Cesium.GroundSkyBox=E}()},7370:(t,e,n)=>{t.exports=n.p+"./css/LED/LED.eot"},5683:(t,e,n)=>{t.exports=n.p+"./css/LED/LED.ttf"},7485:(t,e,n)=>{t.exports=n.p+"./css/LED/LED.woff"},1306:(t,e,n)=>{t.exports=n.p+"./css/LED/LED.woff2"},4884:(t,e,n)=>{t.exports=n.p+"./css/icon-esgcc/iconfont.ttf"},1545:(t,e,n)=>{t.exports=n.p+"./css/icon-esgcc/iconfont.woff2"},4198:(t,e,n)=>{t.exports=n.p+"./css/icon-esgcc/iconfont.woff"},9546:(t,e,n)=>{t.exports=n.p+"./css/icon-vge/iconfont.ttf"},5172:(t,e,n)=>{t.exports=n.p+"./css/icon-vge/iconfont.woff2"},4894:(t,e,n)=>{t.exports=n.p+"./css/icon-vge/iconfont.woff"},3555:(t,e,n)=>{t.exports=n.p+"./css/LED/LED.svg"},3747:(t,e,n)=>{t.exports=n.p+"./ext/ztree/^3.5.48/css/zTreeStyle/img/line_conn.gif"},7371:(t,e,n)=>{t.exports=n.p+"./ext/ztree/^3.5.48/css/zTreeStyle/img/loading.gif"},2502:(t,e,n)=>{t.exports=n.p+"./ext/ztree/^3.5.48/css/zTreeStyle/img/zTreeStandard.gif"},5387:(t,e,n)=>{t.exports=n.p+"./ext/ztree/^3.5.48/css/zTreeStyle/img/zTreeStandard.png"},3700:(t,e,n)=>{t.exports=n.p+"./img/earth/worldimage2.png"},9955:(t,e,n)=>{t.exports=n.p+"./img/excavate/excavate_bottom_min.jpg"},6725:(t,e,n)=>{t.exports=n.p+"./img/excavate/excavate_side_min.jpg"},1259:(t,e,n)=>{t.exports=n.p+"./img/hotspotboard/home_icon_18.png"},9858:(t,e,n)=>{t.exports=n.p+"./img/hotspotboard/home_icon_19.png"},3353:(t,e,n)=>{t.exports=n.p+"./img/hotspotboard/home_icon_20.png"},3118:(t,e,n)=>{t.exports=n.p+"./img/hotspotboard/home_icon_21.png"},2601:(t,e,n)=>{t.exports=n.p+"./img/icon.png"},9196:(t,e,n)=>{t.exports=n.p+"./img/marker/bluecamera.png"},6072:(t,e,n)=>{t.exports=n.p+"./img/marker/float.png"},5305:(t,e,n)=>{t.exports=n.p+"./img/marker/mark3.png"},2145:(t,e,n)=>{t.exports=n.p+"./img/particleSystemImg/0003.png"},9919:(t,e,n)=>{t.exports=n.p+"./img/particleSystemImg/fire.png"},4524:(t,e,n)=>{t.exports=n.p+"./img/particleSystemImg/fountain.png"},1146:(t,e,n)=>{t.exports=n.p+"./img/pathPlaning/end.png"},3357:(t,e,n)=>{t.exports=n.p+"./img/pathPlaning/start.png"},404:(t,e,n)=>{t.exports=n.p+"./img/pathPlaning/tjd.png"},3202:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/10+.png"},8113:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/10.png"},399:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/150+.png"},4609:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/2.png"},3922:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/3.png"},8404:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/30+.png"},2867:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/300+.png"},1178:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/4.png"},5463:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/5.png"},6816:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/6.png"},5092:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/7.png"},7735:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/8.png"},7508:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/9.png"},7672:(t,e,n)=>{t.exports=n.p+"./img/pointcluster/90+.png"},5984:(t,e,n)=>{t.exports=n.p+"./img/popup3d/popup3d.png"},3298:(t,e,n)=>{t.exports=n.p+"./img/tree/geoJson.png"},2703:(t,e,n)=>{t.exports=n.p+"./img/tree/倾斜摄影.png"},1419:(t,e,n)=>{t.exports=n.p+"./img/tree/图层.png"},6900:(t,e,n)=>{t.exports=n.p+"./img/tree/地形.png"},2275:(t,e,n)=>{t.exports=n.p+"./img/tree/模型.png"},9049:(t,e,n)=>{t.exports=n.p+"./img/tree/点.png"},1552:(t,e,n)=>{t.exports=n.p+"./img/水体特效/waterNormals.jpg"},8766:(t,e,n)=>{t.exports=n.p+"./ts/Core/ExpandEntity/Material/Polyline/img/传输线材质.png"},613:(t,e,n)=>{t.exports=n.p+"./ts/Core/ExpandEntity/Material/Polyline/img/箭头线材质.png"},554:(t,e,n)=>{t.exports=n.p+"./ts/Core/ExpandEntity/Material/Polyline/img/精灵线材质01.png"},844:(t,e,n)=>{t.exports=n.p+"./ts/Core/ExpandEntity/Material/Polyline/img/脉冲线材质.png"},6090:(t,e,n)=>{t.exports=n.p+"./ts/Core/ExpandEntity/Material/Polyline/img/超级线材质01.png"},737:(t,e,n)=>{t.exports=n.p+"./ts/Core/ExpandEntity/Material/Polyline/img/迁徙线材质.png"},6642:(t,e,n)=>{t.exports=n.p+"./ts/Plus/SceneHelper/CustomBgImage/img/backGroundImg.jpg"},1521:(t,e,n)=>{t.exports=n.p+"./ts/Plus/SceneHelper/CustomBgImage/img/backGroundImg.png"},4638:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MDM4NzVjMS0xMmVmLTg2NDAtYTBhMS04MzBiY2MwMGRmYTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODkxQzg3MzdDQjFCMTFFQTg3QzhENTA3RDA0QTkyNkIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODkxQzg3MzZDQjFCMTFFQTg3QzhENTA3RDA0QTkyNkIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMwYjc4N2Q4LWY5MTYtNmQ0My05ZmI5LTlkNzYwN2M3NGMyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MDM4NzVjMS0xMmVmLTg2NDAtYTBhMS04MzBiY2MwMGRmYTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz44idiZAAAObElEQVR42uzdCXCU5R3H8T2yR67NQUIgxEAIh8AoeKCi0noAg1ZtsToqWGXGqdpWp45TPFtFOoM4KqO241iPEQvaFvHAVsYWRLwtptgKsSJRMAFCSEIuks2xu2+fJ9k4QLO7b/Luhvd9n+9n5m/Ivrsx87zz/PK++3/3eZ2apjkAqMlJAAAEAAACAAABAIAAAEAAACAAABAAAAgAAAQAAAIAgO0CYFrTPYwQYCOVecuP+t6V7EARtUaUTJX3o4+dG/1e43Ee5/Hj9viwHAFcIepXoi4Q1UHeAmodAbwiag6THzCVObE2JCsALhO1NHqocZjxBkxlY6wNaUn44fJw/1lRFzLOgLUYPQI4SdSfRV0tajvDCagVAGFRN4vazFACprUp2acAuaJKRO0Q9YWeFxxYsbXUU5z5itPtymB/AMkVaeveXnDz9KtjbJ6bzACQE/itaO3Q84LapR/l+Cbm/c0d8Jayq4Dk00KRpjib58Q6ChhsALhF/UlUlagHdE5+j3ds4K9y8ocOdYab133VooW4/BhIBm9ZwJNzUVl2gqfJLoAzGQGwQFSWqCsdca4u6lf/5L9dnuKsl9MK0k+OtPdEGldVNoUOdoTZbUByuLI9ht7HG+yL14m6WFS3vp/ufM4zOvM8rSeiNa7+opnJD5gsQHQ+72eiVkT/3aXnBQd/99ky75isBVpEczSt3dnSvae1h+EGjgtDXYBZou4TNVvv/+3gyn/91Dch9xZ5ktDyelVrcHtDF/sAOG7mGjkCKHP09fmr9Pyf6h6pWOAtz1nucDpcrW9/e7h964Eg4w8cV3OMHAFsFXVA1+R/6NPZvkm5TzldTk97RV1H26bqdsYeOO4MdQGq9Pz1P7Bi62Rfee6LzjSXr3NnU1fzq7vaGHfA3PScApwh6oZ4T6hd9vFI79jAGy6/O9C1p7X70Iv/bXFE6PUDdgiACY6+T/wNPPnlVX5lORvcWZ6inoMdoUMvVDZr3WFmP2Aem4wEQEx7b9/i7r3KL9c3IdzaHW58vrI5EuQyP8BkDHUBQqL8A20QE3+EvMpPi2ha46rK5nBTp6ELffxT8r2TP1lYPvnDa8oLbz0ln/0GJIWhFYE+EfVMvCfIK/169h8OGf0tS1aeV+zO9rpFsLgLb55eMP7lS0vTpxX42H+AIRuNBEC1o++TfymVv2hKjrc04D3qiGDqCH/Z2kvGijDIYx8CyacnAOSqP7ek8pfwlGSlFd0xc2Ss7eJ0oLDspR+U+CfledllwPAGgPwM//xU/hI588uynGkuZ7znpE8vzBj/2g/HFf5iBkcDwOCkpguQLG2bq9tF6bpwqPDnMwrHvXBRia8sx8N+BXSZa+oA6PqmpWffXe/XNTz1n4bg9oaEnx3IOL0oo3z9j8YV3HBSLvsWSMhQF0Cu9vv7VP52aQXp7hO3LpqQPXdsdv0T2xrqVlYcTPgit9M58vbTRo59dt4Y79gARwNAbKnpAoiJ2yC/Oj0uQ0cSoYZguPH5HY2+8lxf6TPzTtCCYW33NW9+27alJuFpQeas4kx5NJB/3dQc9jMwOIa6AOJ8PNIbAPHfv0v8S6SnOeseqWisuuS13cHP64Oj7j2zqOiOmYX1j29r3PvLd/ZpnfEvLRYB5Bx15xlF41ZfVJI1ewyrDgNJDICUdwEmvXdV+fi1l5Z2727pEX/5a/bf/1Gtf0KuT77r78r1uasufnV38/qq5oTvDZxalBGYX5bFbgWOYmhFoBZ5pJ3SFMrwuPzTRvi9pQFPd3Vrz+EtNR2HZxW3uwJeV/EDZ4/q/KKxs+aWzfub1+1qLXn8/OK0fP///d6hxmCobsWnB1s2fMO9CYGjGe4CpA3nbzvy9tMKAvPHBTwjMzy1D3x8QL43MHHzleO94qFd5639pnFVZeORz5dHB+IoYQ+THxiQoRWB5GIgD6fyt4t0hiIuf5pr/MuXjnVomubK9sr7DziCOxqCTWt3tjat+6q15KHvjSr+7TmjR1w3NW/3tRv2NovHci+fGGh7b297x6cHOtnHQEwxVwTScwQglwN7I6W/XnTxEFeWx9U/+Tsq6jr23/vBwf7te5e8e6D6xo01nhOyvSf+c9GEzHOKM+oerWjMPL0oPfuC0kz2MTB4eo4A5IIgC1J5FOBK77u5wZ5FG6q79rR0O11Op7yL0LHPO/zhvuCXp62pGr307MJRd59ZJEvrCms7v/+Xr9mVQGoCYJSoy1J6GhA9OOmuaesJN3dFEj29dulH9c2v7mqVt0SSpweRtu4IuxKIKel3B04JuQ5AqDGoa1GR4Of1XbLYt0BCc1MWAFpY63K6nT6nz+2Uh+ND+Rnyg0BtW2oOyxYg+wpIOkN3B47fBdC03mN4eTXgUBcDrLl1cy37CEgZk3cBABwXepcFX8JQAWoGgPxwzbUMFWBZhlYE0mKdPwCwBHOvCAQgpQytCLRP1DLGELAsQysCHRK1jjEE7EdPAIwRdR9DBagZAPIefVfE2qiFtN7LceWVgAwnYEopvS9A9LO8TgIAMCe6AIDC6AIACqMLAGBoASDfBHyQoQLUDAC5zv5ChgqwLHPfHRhAStEFABRmqAsg3wS8mzEELMtQF0DebeelmFtDkd6bcri8XAkIWI3hLsB36wC6mP+AHQOALgBgbXQBAIXRBQAUZqgLIG/Q+RvGELAsQ10A+S7/HxlDwH70BEC6qMcYKkDNAPCKWsxQAZZFFwBQWAq7AGEtKL+wJiBgWoa6AHKC3xZzq9Z7e2AHKwICpmWoC9AtahVjCNgPXQCAAIiLLgBgbYa6APLGHz7GELAsQ10AeSWgnzEELMtQF0C6iTEELGuj0QB4mjEE7EdvAPyBoQLUDYAbY23QIlrvmoBcCQiYVko/CxDu+0lcCwiYFCsCAQqjCwAojC4AgKEHAF0AQOEAuFpUgOECLMlwF0B+5p93+QFrogsAKMxwF0CuCBRkHAFLitkFSNP5A1bF3BJdE9DlS+MUAbAYvUcAckWg9AHfHNC0SO8/mP6AbQNgsaNvZSAA1sN9AQCF0QUAFEYXAFBYCrsAACxL7xHAg6LyGS5AzQBYKCqL4QIsiS4AoLAUdgEiWkfvD2JNQMCsDHcB7hZ1aMAtmiN6JSDzHzApw12AlxhDwH7oAgAEQEJ0AQDrogsAKIzPAgAKM9wFWCKqlXEELMlwF2AtYwjYj94jgPtEjWG4ADUD4ApHrDZgRGuXX5w+N+8nAOaUui6A9t3dgRllwKToAgAKM9wFWCZqH+MIWJLhLsA6xhCwH7oAAAGQUOwuAACzM9wFiDh4wxCwKsNdgDZR2YwjYEmGuwBvirqOcQQsaaPRANguqnjALeHomoBe7g4MWI3eAPixqMwY20K9/2X6A7YNgDNF+RguwJIMdwHkWgBPMI6AeTjTXM7M00f5e7/R5MdyYjLcBZCH+XsZcsA8kz9/4ZSAf0q+X+uJdIbqO5bFeTpdAMB2k39q3+Tv+rr5J0VLZm6M85IUdgEADN/kd7scg5z8cSWjCwBguCb/oik5yZr8gwmAmaL87ALAkpM/ZhdA78eB5VoAfCQYsOZf/qR0AWoH2qD1rwno5+7AgAkn/1mi1hg9AnhH1OWOvm7AQOHgcOf43P7J+V52GZA8mWeNTu9v9Q1x8r8uarHRAPhS1PnxnuCflOeTxS4DkmuIk//UIyb/W0YD4BJHjI8Da93h6lBT5052E5AaobqOXw/h3f5vRV0l6t24pxiaFvsKwmlN9/T/c2v06xnsDsDU5GF/kaj1A22szFt+1Pd63wQ8JOppxhYw/eSXE79L7wsMdwEAmGbyy3P+6+Od8w81APq7AADMaaIjwRt+A0laFwDAcTFd1NeiVg/lxXqPAOaJymWsAVORC/X8Q9SMof4AvQFwsqhTRN0V/V7eJ6DiiOJxHufx4X/8zeg5/wdDDQC9bUAZAONFbRNVLapQVOkRT63ncR7n8WF/XHbndg9mwh/bBtQbAABsYFABcEQInBs9/Ljt2B8AwLr0vgeQI2oCwwWoGQAACAAAdqL3QiDZZuATf4CiAdASLQAKngLILsBjDBegZgDQBQAUDgAABAAAO6ELABAACdEFABQ+BaALACgcAHQBAIUDAAABAMBO6AIABEBCdAEAhU8B6AIACgcAXQBA4QAAQAAAsBO6AAABkBBdAEDhUwC6AIDCAUAXAFA4AAAQAADshC4AQAAkRBcAUPgUgC4AoHAA0AUAFA4AAAQAADuhCwAQAAnRBQAUPgWgCwAoHAB0AQCFAwAAAQDATugCAARAQnQBAIVPAegCAAoHAF0AQOEAAEAAALATugAAAZAQXQBA4VMAugCAwgFAFwBQOAAAEAAA7IQuAEAAJEQXAFD4FIAuAKBwANAFABQOAAAEAAA7oQsAEAAJ0QUAFD4FoAsAKBwAdAEAhQMAAAEAwE7oAgAEQEJ0AQCFTwHoAgAKBwBdAEDhAABAAACwE7oAAAGQEF0AQOFTALoAgMIBQBcAUDgAABAAAOzEqWnad99Ma7on3ilAoaiqWE+ozFvOaAI2PQKQHYBaUeUMGaBOACwWtc3R9wbg9aLek3/sRV3J0AHWF+86gJWiLhB1U/TQX9aToi4U9aioz+KdEgCwbgAUiBonaraotmO2vS3qFFEawwfY8xSgQdTlA0z+fnLyzxC1niEE7BUA8q//czpe+6Wo+aK8DCNgnwAojJ77J9IpqltUOsMI2CcA9ooqEuVL8Fr5l//jOKcJACwYAHJCbxY1PcFr5V//eaIiDCNgnwCQLhO1VZQnxvZZolYzfIA9A0D+Vc929F30c4ejryXojJ4a3C/qFVFrGD7AngHQfyogjwSmivpE1J2iThKVGz0C+DvDB1hbohWBZKtv8TGPbWLYAHs46tOAAAgAAAQAAAIAAAEAgAAAQAAAIAAAEAAACAAABAAAAgCA6f1PgAEAhYJlHfRnlF0AAAAASUVORK5CYII="},69:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MDM4NzVjMS0xMmVmLTg2NDAtYTBhMS04MzBiY2MwMGRmYTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY3MENDOTFDQjFCMTFFQUI5QUNBMzQ1NUY2MDY0MTciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY3MENDOTBDQjFCMTFFQUI5QUNBMzQ1NUY2MDY0MTciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMwYjc4N2Q4LWY5MTYtNmQ0My05ZmI5LTlkNzYwN2M3NGMyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MDM4NzVjMS0xMmVmLTg2NDAtYTBhMS04MzBiY2MwMGRmYTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6huJ9SAAANxUlEQVR42uzdCZAU1R3H8ek5d2dnL5YFhGUXcDkkakrUEm+NrBGPMiZRSaKpeKBGY8lRKl4Vj6hoQpRgVAq8KkFTGssgImU2MSVoFNRY3mVFlEMQWPbenT1mejrv7Q5KkJnp6Z5xe/p9P1V/Zmt6epl6Xe+33f3v6dEMw/AAUJNGAAAEAAACAAABAIAAAEAAACAAABAAAAgAAAQAAAIAgPsCYIufEQLcpjb+1Y/ePPz6u0XNTv68TpSxVx3H8zzP80PyfOO3sQdwjahLRJ0oqpWoBRxDTnRt3z2AXO7jnyZqvqhjmPyAeucAQqJqRG1kWIHC2APIxTmAQ0RdKaqPyQ84VsP+nrQbAONErRK1nfEFHO0fuQ6Aas/gmcV7RP2N8QUcLeddAHmyb4ao28387/MWR4oPqEo8XxQyRrMtgNxr7/K+f/NF3bOyOQdgpQvgE1Up6t/JyujyhaWBiWP1F0dVJQ5jMwH5EYsbWXffrATAkuTjlWZXqBuV+Iuc/D19WuKhZ4vbO6Ma1x8DOTK5Tg/MaugttbJutgEgr/KbJup7Zle4dXnJ4voa/ZS47jEeeKa4/b1P/f1sMiB3yiOGmXN5DXYD4CxRP04e+0fNrHDTwyXzp9TpP9d1j0f+5WfyA0PGdhdgjWfwEt8mMy++4cHIxZPG6jdqmkd7qrGoY8NHgT62ATBkGq0GgLzQZ64oeerQVL9//uLI6VPq4vf4fB7fmteD3S+9Eexh/IEhNcNOABxh9n+Ze39k2kHj9eVi8gfWfxjofervRV2MPeBMZgJA7rqHzfyyOfdFaifX6s8UBY3wu//19z0ojvu53whQ2AHQKyqQ6UW/vLd0hOz1R8JG1efbfbElTxe3JxIMMOAQlrsAq5OVkrzKb9JYfXV5xKjZ1erVFz0ZbuuL0esHHCTnnwUYcNvyEu/IYYnnqisTEzujWmLRinBre5fG337AWSx3Ac4Q9ULKYwiv55Ex1Ynp8iq/e/8Ubt2+26sz1oDjWO4CpDV+tH6OfJRX+W360hdnnIHCkbObgnKVH6BwAOTCYZPiwdbGpgN3v7T7wNsv6x7G5gFyxvIdgWQH4Mxv4x0+fVf76IpSw1dVnvDdcnH38LefaKk94qB4iG0H2JafLkCuXH1uT3l9jR7c+7lpk+NFbz7WUifCoJLtB9iSny5ALowfrfsXXdM5ItVycThQ/fry1ppD6+NBtiNgieUugLyWP5LPd3b+jL5IwJ+8XVEK0w+Ohd/9c8u4Wy9lbwDIFTMBIPv6vny+iZVrg90r14Y6zbz215d2V7/yUGvNlDo9wOYD8h8AaWmaJyYfQwFDs/o7Pt7kj114a9nO3zxWsnvDR4GMHx0+4bBY+IOnmsddf2G0gk0ImGK5C/CqqONTLeyPeQYu+/Xb+JKxUVUJX8fLTfU/PKmv9JalJbuv/2NkV6Z1fF6PtvCqrhGNS9rGTBzL3gCQgXO7ADuavfrvVoSbp46Ph15a3DY22qsZ0y+p3Lzq1cyHBTOO7C/54MmWcXNmRcvZxkBKlrsA8quF1+XznZUUG9q1SyLNU86v+nz9h4GeJfM7Ry66pqv65odLmn+0oHxbT1/6TxYGxeHHfXO6Rq5b2loz8+j+MNsa+ObfSufuAby4+8C3Hm+p/WSzLyb+8m+dfVfplwdPiIfkWf9hZQnfpHOrPn9idVFbxqT6bix83ozeCNsaMMfvhDcRKTa8h0+JF9XX6IFPv/DFXngtFG04qr+7ImJ4l93YOeo/n/T0nn1txfblzxd3PLuwffSIysQ33vfOFm987v2RXdyCDDDP68Q3tfDKruHnndJXNqY6EbjintIdU8froa3P754wqVYPjDlz+GeLngw37/16uXcg9hI2MfmBlCzfEShtFyAXor1aIlxkeN9+oqXOMDxGecQYuO7gzY/9PUufK+5YtrK4Y8VtHaMeuanjgLmzopXHXlb5xXLx3MVn9ZStfi3U/co7gV62L5CWc7sAieQpvrISw7tn8q99JxC96I6ygXagvLfgT24p23HanIqtE8bowfZ/NtWfelR/+LoHIs0nTusvPvuEvhK2L5BWo9U9AHlb8BWiDs3XOyspGvxqo2NnV275ZIuvX/b45b0F932d/H6BkpOqP126oLN68bzOkbJ6+zVj1OnDN7J9gbRmWA2AtJJXAoaCfo/WPfgVxFZ+x4CN23yx5nZvxvsJXr6wtOnRVUUdsxr6SpetLOrgHoSANbYDoD+m6X6f4RGleTyard8l7wOws8XcPQXXfxjok8UmBIYwAHJBfhBo1avBLtkCZJMAeWG5C/B+Po//pR9cV/4l2wfIK2ffEQhAXtn6duD3GD+goDn3swAAhgYBABAAAFzO8h2B8t4FAJB3eesCDHwfYJCbcgFOZrkLUCtqc6qFsfhgAAxeCQjAoegCACAAABAAgFIsdwG2iKpj/ICCxmcBAIXlpwsAoCDQBQBAAADIIgDaRZWlWrjn24GDAQ8XAgHO1WAnACpTLYzFtYEAkPcFBOBYdAEAhVnuAsiv3W5j/ICCRhcAAAEAgAAAlGKrC1DB+AEFjS4AoDC6AIDCLHcB5Jd1+lIt1DSDKwGBAmUmALpERVItjOtav3z0+wgAwI0BAKDwNdgJAP66A4WNLgCgsEY7AcBH/YDCxmcBABAAAAgAQCl0AQCF5ffbgQN+zhMCDmarC9AjKri/BbG4p28wANhLABzMVhdATvJixhBwF04CAgQAAJfbbxfAb3Jl7ggEFDY+CwAozFYXQN4RqJwxBAoWnwUAQAAAyFUAeLXBKwH9PoMLgQDnyk8XIBbXeuVjMMAIAw5GFwBQmK0uwGZRtYwhULDoAgAgAAAQAIBSbHUB6hg/oKDRBQAURhcAUFh+ugCaZiSvBOSWYEChsR0AcV2LysdggEuBAbcGQEwUF/sChctWF6Ce8QMKGl0AQGG2ugDviTqEMQQKFp8FAEAAACAAAKXY6gIcyvgBBS0/XQBN8+jy0ce+BOBk+ekCxHVPt3zkSkDA0egCALAWAPLOv0UMF6BmAPSJCjFcQMGy1QU4nvEDChqfBQAUZqsLsE7UcYwhULDoAgCwFgDyXMEUhgtQMwDCoq5OsSwh//F5uScg4GANdgLgKlEd+1ug655O+RgKGAwx4Fx0AQCF2eoC/F7UTsYQcJ5IsanP4djqAuwS9RhDDTjLlDo9cMHM3jL5c7RX25zt+mYDQN4SfCLDDThr8s//WbSyKGho25q867fu9P4iXwFQKmo2Qw44c/J/ts135tIFnbE0q9jqAlwnqoVhBwpy8kt0AQA3TP55P41WZDn5JVtdgDtFNTP8wNBP/uKQ4c1y8ku2ugDyYp9l+1tgGJ6BK4C8XAkIOHXyp5ybtrsAekIbuEIwFCAAgHxP/u1N3g1ZTn6pRtSL+1tg9oYge7oA96d6Qf3YeGDOrGg5mwvIranj9eCeyb9xm++MLP/yjxS1VdQZdgJAdgHuTveCYWWGb1hZ3MfmAnLP4uS/T1SdqHNSvchv941192hrPtjo72cTAflhiCPttk5tmYXJP13U99O+0DDSfIpvy1f5sDp5vmAmmwNwvPNEzUtO/vZvLK2NZ70H0JYMAQDOtedE/DPJ+dqdaQWzXYCgqAmML+DoyS93++cMHjVknvzZBIA8u38BYww4evIfLerRbFY0GwC3i2pinAFHuiM5+U/d7zF/GmbPARwgKiLqcFE7RG0TNUrUmL1ew/M8z/ND8/wKUb/NdvJnEwDyOuLRopaKelzUA6JOE/WrvV7D8zzP80P3vLVjB5NtQABusVcbMH0AfB0CFaLqRb2198oACpvZk4AHewbPMgJQMAAAEAAAVAyAtoHjfwCuYvYk4Nc4CQgotwcguwBHMFyAmgFAFwBQOAAAEAAAVAwAugCAC9EFANgDyIguAKBwANAFABQOAAAEAAAVA4AuAOBCdAEA9gAyogsAKBwAdAEAhQMAAAEAQMUAoAsAuBBdAIA9gIzoAgAKBwBdAEDhAABAAABQMQDoAgAuRBcAYA8gI7oAgMIBQBcAUDgAABAAAFQMALoAgAvRBQDYA8iILgCgcADQBQAUDgAABAAAFQOALgDgQnQBAPYAMqILACgcAHQBAIUDAAABAEDFAKALALgQXQCAPYCM6AIACgcAXQBA4QAAQAAAUDEA6AIALkQXAGAPICO6AIDCAUAXAFA4AAAQAABUDAC6AIAL0QUA2APIiC4AoHAA0AUAFA4AAAQAABUDgC4A4EJ0AQD2ADKiCwAoHAB0AQCFAwAAAQBAxQCgCwC4EF0AgD2AjOgCAAoHAF0AQOEAAEAAAFAxAOgCAC70/12Afc/4Z4PuAODaPQDZBThZ1EEcNgBqBIAm6hJRb4saIeocUS+L+kzU5cnlAFx6CPAHUceIumKf4395PcDCZDhs5hAAKFypDvpHihor6iRRXfssk2EwI/lzkahehhFw1yHAzuQuf1eadeXFQY0MIeCuAKgS9ZCJdT8SNVXUcIYRcE8AyBN+M02smxDVmnw9AJcEwKbkXkDYxPprRG1lGAH3BECPqLWijjSx/tWiOhlGwD0BIJ0t6hVRvhTLvyNqg2ewCwDAZQEQT07ud0XdIKou+dpSUQtE/UvUvR5agIArA8CTnNyyFThR1Bui7kwGwGTP4AVCf2X4gMLGh4EAAgAAAQCAAABAAAAgAAAQAAAIAAAEAAACAAABAIAAAFBY/ifAABm8RINNUJWeAAAAAElFTkSuQmCC"},3361:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAB4AAAAAlCAYAAACj1PQVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTJFMTU1RjExN0UzMTFFOTg3RTBFODdGNTY0NThGQkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTJFMTU1RjIxN0UzMTFFOTg3RTBFODdGNTY0NThGQkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMkUxNTVFRjE3RTMxMUU5ODdFMEU4N0Y1NjQ1OEZCRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMkUxNTVGMDE3RTMxMUU5ODdFMEU4N0Y1NjQ1OEZCRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj97JFoAAAV9SURBVHja7N1faJ1nHQfw33nzpuekaZfWNFmbLHXWdf7DWgvebF4M0SEZhTG8mKvFyzG9UJFKh9peVGnd0DkE/10Ic6s6BBEGbshggho3BVGnRnC2s1n/ras2J2uzc05PXp+3yZzSm7XJkvfi84HveZ9z3ve8F7/bL8/71oqiiMs8NhCLsCllfcpfAwAAAAAAAIDlsXM68jfgtl9K2Z3Sa8IAAAAAAAAAb7hjKW8uF9kS3/jdKR9PaZkxAAAAAAAAwPJa6h3A96X0pBxK+bLxAgAAAAAAACyfpSyAP5jy4ZQXUh747687p00ZAAAAAAAAYBlkS3if+xfW+1MuGC0AAAAAAADA8lqqAnh3yvaUZ1MeMlYAAAAAAACA5bcUBXBfyoGF9edSusYKAAAAAAAAsPyWogD+VMpYypMpTxgpAAAAAAAAwMpYbAG8IWVvylzKHuMEAAAAAAAAWDmLLYC/mDKQ8nDKH4wTAAAAAAAAYOUspgC+IeWelNmYL4IBAAAAAAAAWEGLKYAPpfSmfD1lyigBAAAAAAAAVtbVFsA3pdyR8lLMF8EAAAAAAAAArLCrKYBrKfcvHA+kNI0RAAAAAAAAYOVdTQFc7vwtdwA/l/ItIwQAAAAAAACohistgMt3/h5cWO9N6RghAAAAAAAAQDVcaQF8d8rWlImUnxgfAAAAAAAAQHVcSQF8Tcq+lCJlz8IRAAAAAAAAgIq4kgK4fOTzUMzv/J0wOgAAAAAAAIBqeb0F8FjKp2P+nb97jQ0AAAAAAACgel5vAXwgpS/l2ynPGRsAAAAAAABA9eSjd370sh+P7/q/r9tTdqc0Y74IBgAAAAAAAKCC8v9Zl7uB6yn9o4fHG+lYS2n/867Hv5bXivLcoZQzRgYAAAAAAABQTfnw5nvjxWMHe9N6cP+OyVtv2nj2ruFG6209WbGqM5c181rx9m5RO/ngn2/4zlf/tLV2fNfPCmMDAAAAAAAAqJ68LH+HGq2xRz7wu2+8a31zvCgiLs5FlC3vqp4YKS8638mzqZf7tqXlb1MuGBsAAAAAAABA9ZSPdh58tfyd7UScOh9xYjqLszNZlGVwN6U/71z7hR1/e/g9g9NbRg+P9xobAAAAAAAAQPVk+3ZMfujV8vf0TC3WXWzE9ZveHyNjt0UxOxCnp7NotiPWr2pfl67dk/6zxtgAAAAAAAAAqie7eePZXeVO33OtiOGsHqtvfjDi1scibnkkesafipHVI3HuQi3a3Yh3rpsZT/+5ZvTweM3oAAAAAAAAAKolH2q0byzf+dtuZ9G/8b0RW+587ezat0a84xPR+8z+aHU7MVDvbLhl05lrf3FyaGr08Hj5muA4/qMfmiIAAAAAAABABWS1KPJLTW75UR+8/Ir6uksvCi6K+a/Dfa26sQEAAAAAAABUT/ZyJz+Z19IiL6J7eiLi/NRrZ4tuxNEfRzvmorcnoj2XvfL41MZTMV8XAwAAAAAAAFAh2eS5tU9kWcRAo4ipC9MRP98ZMfnNiH/8IOLJO+LMC7+ORl83Gj0RR5r9z8x08nOhAAYAAAAAAAConPyzT2976H1D//7YYL21ZW5NN442n4/ep/ddeuxzK+air68bb2pEdCN75dEj192Xfp4xNgAAAAAAAIDqyWY6+akHnt16d7Oz6uRAPWJkoIi1azuxek0nhge6MdQXUatlrZ8+P/L5706+ZSLKXhgAAAAAAACAyik3+s5+/++bJ+751fbbfv/S+kc7c/l0WQSva0TUe2rtIzNrJr7yxxs/8pnfbPteurY5vPlej38GAAAAAAAAqKC8LHRfPHZw9penNvwl5ZP1nrmB268/MdafX+x96sTQ8aMz/f9K102ntJS/AAAAAAAAANX1HwEGAM75MhcANnAkAAAAAElFTkSuQmCC"},5375:(t,e,n)=>{"use strict";function r(t,e){return Array.from(t.getElementsByTagName(e))}function i(t){return"#"===t[0]?t:`#${t}`}function o(t){return t?.normalize(),t&&t.textContent||""}function a(t,e,n){const r=t.getElementsByTagName(e),i=r.length?r[0]:null;return i&&n&&n(i),i}function s(t,e,n){const r={};if(!t)return r;const i=t.getElementsByTagName(e),o=i.length?i[0]:null;return o&&n?n(o,r):r}function l(t,e,n){const r=o(a(t,e));return r&&n&&n(r)||{}}function u(t,e,n){const r=parseFloat(o(a(t,e)));if(!isNaN(r))return r&&n&&n(r)||{}}function c(t,e,n){const r=parseFloat(o(a(t,e)));if(!isNaN(r))return r&&n&&n(r),r}function h(t,e){const n={};for(const r of e)l(t,r,(t=>{n[r]=t}));return n}function p(t){return 1===t?.nodeType}function f(t){return s(t,"line",(t=>Object.assign({},l(t,"color",(t=>({stroke:`#${t}`}))),u(t,"opacity",(t=>({"stroke-opacity":t}))),u(t,"width",(t=>({"stroke-width":96*t/25.4}))))))}function d(t){let e=[];if(null===t)return e;for(const n of Array.from(t.childNodes)){if(!p(n))continue;const t=g(n.nodeName);if("gpxtpx:TrackPointExtension"===t)e=e.concat(d(n));else{const r=o(n);e.push([t,y(r)])}}return e}function g(t){return["heart","gpxtpx:hr","hr"].includes(t)?"heart":t}function y(t){const e=parseFloat(t);return isNaN(e)?t:e}function m(t){const e=[parseFloat(t.getAttribute("lon")||""),parseFloat(t.getAttribute("lat")||"")];if(isNaN(e[0])||isNaN(e[1]))return null;c(t,"ele",(t=>{e.push(t)}));const n=a(t,"time");return{coordinates:e,time:n?o(n):null,extendedValues:d(a(t,"extensions"))}}function v(t){const e=h(t,["name","cmt","desc","type","time","keywords"]),n=Array.from(t.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*"));for(const r of n)r.parentNode?.parentNode===t&&(e[r.tagName.replace(":","_")]=o(r));const i=r(t,"link");return i.length&&(e.links=i.map((t=>Object.assign({href:t.getAttribute("href")},h(t,["text","type"]))))),e}function w(t,e){const n=r(t,e),i=[],o=[],a={};for(let t=0;t<n.length;t++){const e=m(n[t]);if(e){i.push(e.coordinates),e.time&&o.push(e.time);for(const[r,i]of e.extendedValues){const e="heart"===r?r:r.replace("gpxtpx:","")+"s";a[e]||(a[e]=Array(n.length).fill(null)),a[e][t]=i}}}if(!(i.length<2))return{line:i,times:o,extendedValues:a}}function b(t){const e=w(t,"rtept");if(e)return{type:"Feature",properties:Object.assign({_gpxType:"rte"},v(t),f(a(t,"extensions"))),geometry:{type:"LineString",coordinates:e.line}}}function x(t){const e=r(t,"trkseg"),n=[],i=[],o=[];for(const t of e){const e=w(t,"trkpt");e&&(o.push(e),e.times&&e.times.length&&i.push(e.times))}if(0===o.length)return null;const s=o.length>1,l=Object.assign({_gpxType:"trk"},v(t),f(a(t,"extensions")),i.length?{coordinateProperties:{times:s?i:i[0]}}:{});for(const t of o){n.push(t.line),l.coordinateProperties||(l.coordinateProperties={});const e=l.coordinateProperties,r=Object.entries(t.extendedValues);for(let t=0;t<r.length;t++){const[n,i]=r[t];s?(e[n]||(e[n]=o.map((t=>new Array(t.line.length).fill(null)))),e[n][t]=i):e[n]=i}}return{type:"Feature",properties:l,geometry:s?{type:"MultiLineString",coordinates:n}:{type:"LineString",coordinates:n[0]}}}function _(t){const e=Object.assign(v(t),h(t,["sym"])),n=m(t);return n?{type:"Feature",properties:e,geometry:{type:"Point",coordinates:n.coordinates}}:null}function*E(t){for(const e of r(t,"trk")){const t=x(e);t&&(yield t)}for(const e of r(t,"rte")){const t=b(e);t&&(yield t)}for(const e of r(t,"wpt")){const t=_(e);t&&(yield t)}}function S(t){return{type:"FeatureCollection",features:Array.from(E(t))}}n.r(e),n.d(e,{gpx:()=>S,gpxGen:()=>E,kml:()=>pt,kmlGen:()=>ht,kmlWithFolders:()=>ct,tcx:()=>N,tcxGen:()=>M});const C="http://www.garmin.com/xmlschemas/ActivityExtension/v2",T=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],I=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]];function A(t,e){const n=[];for(const[r,i]of e){let e=a(t,r);if(!e){const n=t.getElementsByTagNameNS(C,r);n.length&&(e=n[0])}const s=parseFloat(o(e));isNaN(s)||n.push([i,s])}return n}function P(t){const e=[c(t,"LongitudeDegrees"),c(t,"LatitudeDegrees")];if(void 0===e[0]||isNaN(e[0])||void 0===e[1]||isNaN(e[1]))return null;const n=a(t,"HeartRateBpm"),r=o(a(t,"Time"));return a(t,"AltitudeMeters",(t=>{const n=parseFloat(o(t));isNaN(n)||e.push(n)})),{coordinates:e,time:r||null,heartRate:n?parseFloat(o(n)):null,extensions:A(t,T)}}function k(t){const e=r(t,"Trackpoint"),n=[],i=[],o=[];if(e.length<2)return null;const a={},s={extendedProperties:a};for(let t=0;t<e.length;t++){const r=P(e[t]);if(null===r)continue;n.push(r.coordinates);const{time:s,heartRate:l,extensions:u}=r;s&&i.push(s),l&&o.push(l);for(const[n,r]of u)a[n]||(a[n]=Array(e.length).fill(null)),a[n][t]=r}return n.length<2?null:Object.assign(s,{line:n,times:i,heartRates:o})}function O(t){const e=r(t,"Track"),n=[],i=[],a=[],l=[];let u;const c=Object.assign(Object.fromEntries(A(t,I)),s(t,"Name",(t=>({name:o(t)}))));for(const t of e)u=k(t),u&&(n.push(u.line),u.times.length&&i.push(u.times),u.heartRates.length&&a.push(u.heartRates),l.push(u.extendedProperties));for(let t=0;t<l.length;t++){const r=l[t];for(const i in r)1===e.length?u&&(c[i]=u.extendedProperties[i]):(c[i]||(c[i]=n.map((t=>Array(t.length).fill(null)))),c[i][t]=r[i])}return 0===n.length?null:((i.length||a.length)&&(c.coordinateProperties=Object.assign(i.length?{times:1===n.length?i[0]:i}:{},a.length?{heart:1===n.length?a[0]:a}:{})),{type:"Feature",properties:c,geometry:1===n.length?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}})}function*M(t){for(const e of r(t,"Lap")){const t=O(e);t&&(yield t)}for(const e of r(t,"Courses")){const t=O(e);t&&(yield t)}}function N(t){return{type:"FeatureCollection",features:Array.from(M(t))}}function L(t,e){const n={},r="stroke"==e||"fill"===e?e:e+"-color";return"#"===t[0]&&(t=t.substring(1)),6===t.length||3===t.length?n[r]="#"+t:8===t.length&&(n[e+"-opacity"]=parseInt(t.substring(0,2),16)/255,n[r]="#"+t.substring(6,8)+t.substring(4,6)+t.substring(2,4)),n}function R(t,e,n){const r={};return c(t,e,(t=>{r[n]=t})),r}function D(t,e){return s(t,"color",(t=>L(o(t),e)))}function F(t){return s(t,"Icon",((t,e)=>(l(t,"href",(t=>{e.icon=t})),e)))}function j(t){return Object.assign({},function(t){return s(t,"PolyStyle",((t,e)=>Object.assign(e,s(t,"color",(t=>L(o(t),"fill"))),l(t,"fill",(t=>{if("0"===t)return{"fill-opacity":0}})),l(t,"outline",(t=>{if("0"===t)return{"stroke-opacity":0}})))))}(t),function(t){return s(t,"LineStyle",(t=>Object.assign(D(t,"stroke"),R(t,"width","stroke-width"))))}(t),function(t){return s(t,"LabelStyle",(t=>Object.assign(D(t,"label"),R(t,"scale","label-scale"))))}(t),function(t){return s(t,"IconStyle",(t=>Object.assign(D(t,"icon"),R(t,"scale","icon-scale"),R(t,"heading","icon-heading"),s(t,"hotSpot",(t=>{const e=parseFloat(t.getAttribute("x")||""),n=parseFloat(t.getAttribute("y")||""),r=t.getAttribute("xunits")||"",i=t.getAttribute("yunits")||"";return isNaN(e)||isNaN(n)?{}:{"icon-offset":[e,n],"icon-offset-units":[r,i]}})),F(t))))}(t))}const z=t=>Number(t),G={string:t=>t,int:z,uint:z,short:z,ushort:z,float:z,double:z,bool:t=>Boolean(t)};function B(t,e){return s(t,"ExtendedData",((t,n)=>{for(const e of r(t,"Data"))n[e.getAttribute("name")||""]=o(a(e,"value"));for(const i of r(t,"SimpleData")){const t=i.getAttribute("name")||"",r=e[t]||G.string;n[t]=r(o(i))}return n}))}function U(t){const e=a(t,"description");for(const t of Array.from(e?.childNodes||[]))if(4===t.nodeType)return{description:{"@type":"html",value:o(t)}};return{}}function q(t){return s(t,"TimeSpan",(t=>({timespan:{begin:o(a(t,"begin")),end:o(a(t,"end"))}})))}function W(t){return s(t,"TimeStamp",(t=>({timestamp:o(a(t,"when"))})))}function V(t,e){return l(t,"styleUrl",(t=>(t=i(t),e[t]?Object.assign({styleUrl:t},e[t]):{styleUrl:t})))}const H=/\s*/g,Y=/^\s*|\s*$/g,X=/\s+/;function Z(t){return t.replace(H,"").split(",").map(parseFloat).filter((t=>!isNaN(t))).slice(0,3)}function K(t){return t.replace(Y,"").split(X).map(Z).filter((t=>t.length>=2))}function J(t){let e=r(t,"coord");var n;0===e.length&&(n=t,"coord","*",e=Array.from(n.getElementsByTagNameNS("*","coord")));const i=e.map((t=>o(t).split(" ").map(parseFloat)));return 0===i.length?null:{geometry:i.length>2?{type:"LineString",coordinates:i}:{type:"Point",coordinates:i[0]},times:r(t,"when").map((t=>o(t)))}}function Q(t){if(0===t.length)return t;const e=t[0],n=t[t.length-1];let r=!0;for(let t=0;t<Math.max(e.length,n.length);t++)if(e[t]!==n[t]){r=!1;break}return r?t:t.concat([t[0]])}function $(t){return o(a(t,"coordinates"))}function tt(t){let e=[],n=[];for(let i=0;i<t.childNodes.length;i++){const o=t.childNodes.item(i);if(p(o))switch(o.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const t=tt(o);e=e.concat(t.geometries),n=n.concat(t.coordTimes);break}case"Point":{const t=Z($(o));t.length>=2&&e.push({type:"Point",coordinates:t});break}case"LineString":{const t=K($(o));t.length>=2&&e.push({type:"LineString",coordinates:t});break}case"Polygon":{const t=[];for(const e of r(o,"LinearRing")){const n=Q(K($(e)));n.length>=4&&t.push(n)}t.length&&e.push({type:"Polygon",coordinates:t});break}case"Track":case"gx:Track":{const t=J(o);if(!t)break;const{times:r,geometry:i}=t;e.push(i),r.length&&n.push(r);break}}}return{geometries:e,coordTimes:n}}function et(t){return 0===t.length?null:1===t.length?t[0]:{type:"GeometryCollection",geometries:t}}function nt(t,e,n){const{coordTimes:r,geometries:i}=tt(t),o={type:"Feature",geometry:et(i),properties:Object.assign(h(t,["name","address","visibility","open","phoneNumber","description"]),U(t),V(t,e),j(t),B(t,n),q(t),W(t),r.length?{coordinateProperties:{times:1===r.length?r[0]:r}}:{})};void 0!==o.properties?.visibility&&(o.properties.visibility="0"!==o.properties.visibility);const a=t.getAttribute("id");return null!==a&&""!==a&&(o.id=a),o}function rt(t){return a(t,"gx:LatLonQuad")?{type:"Polygon",coordinates:[Q(K($(t)))]}:function(t){const e=a(t,"LatLonBox");if(e){const t=c(e,"north"),n=c(e,"west"),r=c(e,"east"),i=c(e,"south"),o=c(e,"rotation");if("number"==typeof t&&"number"==typeof i&&"number"==typeof n&&"number"==typeof r){let e=[[[n,t],[r,t],[r,i],[n,i],[n,t]]];return"number"==typeof o&&(e=function(t,e,n){const r=[(t[0]+t[2])/2,(t[1]+t[3])/2];return[e[0].map((t=>{const e=t[1]-r[1],i=t[0]-r[0],o=Math.sqrt(Math.pow(e,2)+Math.pow(i,2)),a=Math.atan2(e,i)-n*it;return[r[0]+Math.cos(a)*o,r[1]+Math.sin(a)*o]}))]}([n,i,r,t],e,o)),{type:"Polygon",coordinates:e}}}return null}(t)}const it=Math.PI/180;function ot(t,e,n){const r={type:"Feature",geometry:rt(t),properties:Object.assign({"@geometry-type":"groundoverlay"},h(t,["name","address","visibility","open","phoneNumber","description"]),U(t),V(t,e),j(t),F(t),B(t,n),q(t),W(t))};void 0!==r.properties?.visibility&&(r.properties.visibility="0"!==r.properties.visibility);const i=t.getAttribute("id");return null!==i&&""!==i&&(r.id=i),r}function at(t){let e=t.getAttribute("id");const n=t.parentNode;return!e&&p(n)&&"CascadingStyle"===n.localName&&(e=n.getAttribute("kml:id")||n.getAttribute("id")),i(e||"")}function st(t){const e={};for(const n of r(t,"Style"))e[at(n)]=j(n);for(const n of r(t,"StyleMap")){const t=i(n.getAttribute("id")||"");l(n,"styleUrl",(n=>{n=i(n),e[n]&&(e[t]=e[n])}))}return e}function lt(t){const e={};for(const n of r(t,"SimpleField"))e[n.getAttribute("name")||""]=G[n.getAttribute("type")||""]||G.string;return e}const ut=["name","visibility","open","address","description","phoneNumber","visibility"];function ct(t){const e=st(t),n=lt(t),r={type:"root",children:[]};return function t(r,i){if(p(r))switch(r.tagName){case"GroundOverlay":{const t=ot(r,e,n);t&&i.children.push(t);break}case"Placemark":{const t=nt(r,e,n);t&&i.children.push(t);break}case"Folder":{const t=function(t){const e={};for(const n of Array.from(t.childNodes))p(n)&&ut.includes(n.tagName)&&(e[n.tagName]=o(n));return{type:"folder",meta:e,children:[]}}(r);i.children.push(t),i=t;break}}if(r.childNodes)for(let e=0;e<r.childNodes.length;e++)t(r.childNodes[e],i)}(t,r),r}function*ht(t){const e=st(t),n=lt(t);for(const i of r(t,"Placemark")){const t=nt(i,e,n);t&&(yield t)}for(const i of r(t,"GroundOverlay")){const t=ot(i,e,n);t&&(yield t)}}function pt(t){return{type:"FeatureCollection",features:Array.from(ht(t))}}},9078:t=>{"use strict";t.exports=JSON.parse('[{"id":"document","version":"1.0"},{"id":"pathRoamingEntity","availability":"2012-08-04T10:00:00Z/2012-08-04T20:00:00Z","model":{"scale":1,"minimumPixelSize":100,"maximumScale":20},"path":{"material":{"solidColor":{"color":{"rgba":[255,255,0,255]}}},"width":[{"number":5}],"show":[{"boolean":false}],"resolution":5},"orientation":{"velocityReference":"#position"},"viewFrom":{"cartesian":[-2080,-1715,779]},"position":{"interpolationAlgorithm":"LINEAR","epoch":"2012-08-04T10:00:00Z","forwardExtrapolationType":"HOLD","cartographicDegrees":[]}}]')}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!t;)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t})(),__webpack_require__.b=document.baseURI||self.location.href,__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{getCameraHeight:()=>y,getCameraInfo:()=>m,getCameraRectangle:()=>v,getCameraRectangleGeoJson:()=>x,getCameraRectanglePoint:()=>w,getScreenCenterPoint:()=>b});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{FlyCylinder:()=>ki,FlyPath:()=>Oi,GlowLine:()=>Mi,PolylineArrowMaterial:()=>xi,PolylineEnergyTransMaterial:()=>_i,PolylineLightingMaterial:()=>nt,PolylineLinkPulseMaterial:()=>Ei,PolylineMigrateMaterial:()=>Si,PolylineSpriteMaterial:()=>Ci,PolylineSuperMaterial:()=>Ti,PolylineTrailMaterial:()=>Ii,PolylineTrialFlowMaterial:()=>Ai,PolylineVolumeTrialMaterial:()=>Pi});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{Polyline:()=>e});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{BouncePointDecorator:()=>Li,bouncePoint:()=>Ni,buildBillboard:()=>Ri});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{AlertMarker:()=>qi,AreaLabel:()=>Vi,DeviceStatusWindowDecorator:()=>ge,DivPoint:()=>Hi,DynamicDivLabel:()=>Yi,ErectLabelPoint:()=>Xi,FloatMarker:()=>Zi,GradientLabelPoint:()=>Ki,HlsVideoWindow:()=>Ji,HlsVideoWindowDecorator:()=>Re,HotSpotBoardPoint:()=>Qi,LEDLabel:()=>oo,LeafletPopup:()=>$i,Liquidfill:()=>ao,MultiFieldAdaptWindow:()=>so,PointCluster1:()=>xo,PopupWindow1Decorator:()=>ye,PopupWindow2Decorator:()=>me,PrimitiveGradientAppearance:()=>Wi,PrimitiveLabelCol:()=>_o,SimpleLabel:()=>Eo,SimpleLabelDecorator:()=>ae,WaterPolygon:()=>pr});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{Heatmap:()=>oa,MotionBlur:()=>ua,PartVisible:()=>la,PositionEditor:()=>aa,TileSetClip:()=>sa});var a,s={};__webpack_require__.r(s),__webpack_require__.d(s,{AlertMarker:()=>qi,AreaLabel:()=>Vi,AroundPoint:()=>Or,ArrTool:()=>M,AsyncTool:()=>N,BOMTool:()=>L,BaseDecorator:()=>de,BingMapLayerList:()=>l,BookmarkManager:()=>Mr,BouncePointDecorator:()=>Li,CameraEventType:()=>Rt,CameraLimit:()=>Nr,CameraUtils:()=>t,Cartesian3Tool:()=>_,CartographicArrTool:()=>E,CartographicTool:()=>S,ColorTool:()=>R,ConfigEvent:()=>zt,ConfigEventType:()=>Mt,ConfigTool:()=>Y,CreateFrustum:()=>ha,CustomBgImage:()=>Lr,DataEventType:()=>Dt,DateTool:()=>D,DefaultConfig:()=>f,DeviceStatusWindowDecorator:()=>ge,DivMask:()=>Rr,DivPoint:()=>Hi,DomMana:()=>st,DrawShape:()=>at,DynamicCloud:()=>Fr,DynamicDivLabel:()=>Yi,Earth:()=>bi,EchartsLayer:()=>So,EditEntity:()=>Yo,EntityFactory:()=>it,ErectLabelPoint:()=>Xi,EventMana:()=>qt,ExportFile:()=>jr,FirePlot:()=>De,FloatMarker:()=>Zi,FlyCylinder:()=>ki,FlyPath:()=>Oi,FlyToWorkspace:()=>St,FountainPlot:()=>je,GISMathUtils:()=>O,GISTool:()=>F,GlobalRotation:()=>zr,GlowLine:()=>Mi,GradientLabelPoint:()=>Ki,HTTPTool:()=>j,HandlerMana:()=>tt,Heatmap:()=>oa,HlsVideoWindow:()=>Ji,HlsVideoWindowDecorator:()=>Re,HotSpotBoardPoint:()=>Qi,ImageLayerSplit:()=>Gr,InfoBox:()=>kr,Ion:()=>X,KeyboardCamera:()=>Oo,KeyboardModel:()=>Mo,KeyboardModelExt:()=>No,LEDLabel:()=>oo,LeafletPopup:()=>$i,LimitHeight:()=>ea,LinkOLMap23D:()=>_t,Liquidfill:()=>ao,MapBoxLayerList:()=>u,MapVLayer:()=>ko,MarkTool:()=>C,Material:()=>n,MathTool:()=>z,MeasureTool:()=>Sr,MotionBlur:()=>ua,MotionEntity:()=>ar,MultiFieldAdaptWindow:()=>so,NormalEntity:()=>r,OSMLayersList:()=>c,PartVisible:()=>la,PathPlanning:()=>Uo,PathRoaming:()=>Jr,PlotDataSource:()=>qe,PlotTool:()=>Ir,PointCluster1:()=>xo,PolylineArrowMaterial:()=>xi,PolylineEnergyTransMaterial:()=>_i,PolylineLightingMaterial:()=>nt,PolylineLinkPulseMaterial:()=>Ei,PolylineMigrateMaterial:()=>Si,PolylineSpriteMaterial:()=>Ci,PolylineSuperMaterial:()=>Ti,PolylineTrailMaterial:()=>Ii,PolylineTrialFlowMaterial:()=>Ai,PolylineVolumeTrialMaterial:()=>Pi,PopupWindow1Decorator:()=>ye,PopupWindow2Decorator:()=>me,PositionEditor:()=>aa,PositionInfoStatusBar:()=>pi,PrimitiveGradientAppearance:()=>Wi,PrimitiveLabelCol:()=>_o,RegionLabel:()=>Ui,RunEntityController:()=>qo,SafeTool:()=>G,SceneTooltip:()=>fi,SceneUtils:()=>It,ScopeType:()=>Ft,ScreenEvent:()=>Gt,ScreenSpaceEventType:()=>Lt,SightLine:()=>na,SimpleLabel:()=>Eo,SimpleLabelDecorator:()=>ae,SkyBoxOnGround:()=>di,SmokePlot:()=>Fe,SourceEvent:()=>Bt,StartAnimation:()=>gi,StringTool:()=>B,SuperiorEntity:()=>i,SurfaceExcavate:()=>ra,TerrainList:()=>h,TileSetClip:()=>sa,TileSetPlugin:()=>o,TreeMana:()=>Ho,UnderGround:()=>yi,Utils:()=>U,VideoShed:()=>ca,ViewShedStage:()=>ia,ViewerEvent:()=>Ut,ViewerEventType:()=>Nt,ViewerLink:()=>mi,WaterPolygon:()=>pr,WeatherEffect:()=>Tt,WorkSpace:()=>gr,ZTreeMana:()=>Wo,bouncePoint:()=>Ni,buildBillboard:()=>Ri,createNavigation:()=>wt,createOL:()=>bt,debugMana:()=>yt,getCameraHeight:()=>y,getCameraInfo:()=>m,getCameraRectangle:()=>v,getCameraRectangleGeoJson:()=>x,getCameraRectanglePoint:()=>w,getEarth:()=>W,getMainViewer:()=>g,getMostDetailedHeight:()=>rt,getOptions2D:()=>lt,getOptions3D:()=>ut,getScreenCenterPoint:()=>b,getTerrainMostDetailedHeight:()=>mt,initMonitorCoordinates:()=>vt,initViewer2DStata:()=>ft,initViewer3DStata:()=>yr,initViewerStata:()=>pt,loadSource2DData:()=>ct,loadSource3DData:()=>ht,sync2DView:()=>dt}),__webpack_require__(4895),function(t){t.layer="layer",t.terrain="terrain",t.gltf="gltf",t.Cesium3DTile="Cesium3DTile",t.geoJson="geoJson",t.water="water",t.poi="poi"}(a||(a={}));const l=[{pid:"dd7813c4-dd2c-2ce4-7ff3-af62a8b97255",name:"Bing Maps Aerial",catalog:"基础影像",dataType:a.layer,showInTree:!0,defaultLoad:!0,show:!0,offlineCache:!1,properties:{scheme:"IonImageryProvider",assetId:2}},{pid:"5bc9728a-2ad1-8160-70c1-9ae4a14876a3",name:"Bing Maps - 带标注",catalog:"基础影像",dataType:a.layer,showInTree:!0,defaultLoad:!0,show:!0,offlineCache:!1,properties:{scheme:"IonImageryProvider",assetId:3}}],u=[{pid:"8fe81f58-9d74-d69b-77d6-0d74ed44aa",name:"阿里云-全国影像",catalog:"基础影像",dataType:a.layer,showInTree:!0,defaultLoad:!0,show:!0,netRootPaths:["https://vge-webgl.oss-cn-beijing.aliyuncs.com/encrypt/TMS-mapbox.satellite/"],offlineCache:!1,decryptionKey:"SDcVrdKWEgjKPTGQgZ6zop3OTsYo1T3nQ9FwlxROAySNOzXhmdjpVyDn0dMqcODWtC6+62uXM2jbMt24vgGxxHTkguhelh5LXi+zJ9666ryOhtqhvWrBMe9yr2mFNhIKpDsu+2hTSZG7wU5lDvE492Y+Wp0N8BCXOBjwIaaVSQo=",properties:{scheme:"layer-xyz-3857",url:"https://vge-webgl.oss-cn-beijing.aliyuncs.com/encrypt/TMS-mapbox.satellite/{z}/{x}/{y}.webp",minimumLevel:0,maximumLevel:10}}],c=[{pid:"b4d62340-c25a-03b2-460f-4f5d74e31d1e",name:"OSM-标准地图",catalog:"电子地图",dataType:a.layer,showInTree:!0,defaultLoad:!0,show:!0,offlineCache:!1,properties:{scheme:"layer-xyz-3857",url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",minimumLevel:0,maximumLevel:19}},{pid:"4f95a081-89d4-8bc4-3dd8-597a875f49b5",name:"OSM-等高线地图",catalog:"电子地图",dataType:a.layer,showInTree:!0,defaultLoad:!0,show:!0,offlineCache:!1,properties:{scheme:"layer-xyz-3857",url:"https://a.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",minimumLevel:0,maximumLevel:19}}],h=[{pid:"8fe81f58-9d74-d69b-77d6-0d74a8ed44aa",name:"Cesium-在线地形",catalog:"地形图层",dataType:a.terrain,showInTree:!0,defaultLoad:!0,show:!0,offlineCache:!1,netRootPaths:[],properties:{scheme:"CesiumTerrainProvider",url:"default"}},{pid:"edaa73e0-e49b-f701-f212-2556bc279dbd",name:"中国地形-加密版",catalog:"地形图层",dataType:a.terrain,showInTree:!0,netRootPaths:["https://webgpu.top:3006/DBService/中国地形-加密/"],defaultLoad:!0,show:!0,offlineCache:!1,decryptionKey:"SDcVrdKWEgjKPTGQgZ6zogd1U+ipK9DavJ1ewW36F8z8yqDX/9QVR4sAhynFg2Xy/ysWfNtq6fQxaQISn8YvJ4PIYdseKHRCfjGCJME7FOAhbfNve5S5UiBIfNj7fxarGWMMDlIRO/boCyI5n29pgERtTKl/XWDttQTh4gZbFhlguOTJWlryE1YUg4zcLtQdIV1mB90viuoEJNnwa7CG3GVXZD894LKiyZMx1OtkrP+IZyRIRe2mLaH55FHOhqIF",properties:{scheme:"CesiumTerrainProvider",url:"https://webgpu.top:3006/DBService/中国地形-加密/"}}];var p;!function(t){t["layer-wms"]="layer-wms",t["layer-tms"]="layer-tms",t["layer-wmts"]="layer-wmts",t["layer-singleTileImagery"]="layer-singleTileImagery",t["layer-xyz-3857"]="layer-xyz-3857",t["layer-xyz-4326"]="layer-xyz-4326",t["layer-arcgisMapServer"]="layer-arcgisMapServer",t["layer-geoserver"]="layer-geoserver",t.IonImageryProvider="IonImageryProvider"}(p||(p={}));const f={Version:"V2023-12-06",computerSpeed:1,Token:"",appName:"VGEEarth WebGL平台",appTitle:"VGEEarth",appIcon:__webpack_require__(2601),homeView:{longitude:110,latitude:40,height:2e7},startAnimation:!1,GISResourcesUrl:"",demoServerUrl:"http://localhost:3008/",AppBaseUrl:"",layerList:[{pid:"8765c4e9-0e21-1cb9-4f3f-1852c9a67208",name:"全球影像底图",catalog:"基础影像",dataType:a.layer,showInTree:!1,defaultLoad:!0,show:!0,offlineCache:!1,properties:{baseLayer:!0,scheme:p["layer-singleTileImagery"],tileWidth:2048,tileHeight:1024}}],terrainList:[],modelList:[],cesium3DTileSetList:[],geoJsonList:[],poiList:[]};window.VGEEarth_SDK_isLoaded||(window.VGEEarth_SDK_isLoaded=!0,window.jQuery=window.$=__webpack_require__(2380),window.h337=__webpack_require__(3627),window.ol=__webpack_require__(7103),__webpack_require__(7273),window.turf=__webpack_require__(2735),window.DOMParser=__webpack_require__(2350).a,window.toGeoJSON=__webpack_require__(5375),window.tokml=__webpack_require__(9942),__webpack_require__(8951),__webpack_require__(163),__webpack_require__(8444),__webpack_require__(1918),window.Cesium?(console.log(`%c⭐ 开发工具包：%cVGEEarth%c${f.Version}%c，基于 Cesium ^${window.Cesium.VERSION}\n🧑‍💻 版权所有：虚拟地理实验室 VGE-Yao\n📀 帮助文档：http://8.146.208.114:8083`,"color:green;font-size:14px;font-weight: bold;","padding: 0 5px; border-radius: 3px 0 0 3px; color: #fff; background: #e52; font-weight: bold;","padding: 0 5px; border-radius: 0 3px 3px 0; color: #de3; background: #1c1c1c; font-weight: bold;","color:green;font-size:14px;font-weight: bold;"),console.log("%c🎁 预加载第三方模块：","color:green;font-size:14px;font-weight: bold;",{jQuery:"版本号：^2.1.4`",heatmap:"版本号：^2.0.5`",Ol:"版本号：^6.14.1`",Turf:"版本号：^6.5.0`",xmdom:"版本号：^0.6.0`",FileSaver:"版本号：^2.0.5`",toGeoJSON:"版本号：^5.5.0`",Tokml:"版本号：^0.4.0`",ztree:"版本号：^3.5.48`",CesiumNetworkPlug:"版本号：^1.0.6`"})):console.log(`%cSDK版本：VGEEarth ${f.Version}，初始化失败：未检测到 Cesium`,"color: green;"));const d=window.Cesium;function g(){return window.earth.viewer3D}function y(t){let e,n,r=(t=t||g()).scene,i=r.canvas.clientWidth,o=r.canvas.clientHeight,a=r.camera.getPickRay(new d.Cartesian2(i/2|0,o-1)),s=r.camera.getPickRay(new d.Cartesian2(1+i/2|0,o-1)),l=r.globe;if(a&&s&&d.defined(a)&&d.defined(s)&&(e=l.pick(a,r),n=l.pick(s,r)),!d.defined(e)||!d.defined(n))return NaN;let u=l.ellipsoid.cartesianToCartographic(e),c=l.ellipsoid.cartesianToCartographic(n),h=new d.EllipsoidGeodesic;return h.setEndPoints(u,c),100*h.surfaceDistance}function m(){const t=g();let{position:e,heading:n,pitch:r,roll:i}=t.camera,o=d.Cartographic.fromCartesian(e);return o={longitude:Math.floor(1e5*d.Math.toDegrees(o.longitude))/1e5,latitude:Math.floor(1e5*d.Math.toDegrees(o.latitude))/1e5,height:Math.floor(1e5*o.height)/1e5},{destination:e,cartographic:o,orientation:{heading:n,pitch:r,roll:i}}}function v(t="Radian"){let e=g().scene.camera.computeViewRectangle(),n={west:0,south:0,east:0,north:0};return e&&("Degree"===t?(n.west=180/Math.PI*e.west,n.south=180/Math.PI*e.south,n.east=180/Math.PI*e.east,n.north=180/Math.PI*e.north):n=JSON.parse(JSON.stringify(e))),n}function w(t){t||(t=g());let e=t.scene.canvas.width,n=t.scene.canvas.height,r=[];return[{x:10,y:10},{x:10,y:n/10},{x:10,y:n/10*2},{x:10,y:n/10*3},{x:10,y:n/10*4},{x:10,y:n/10*5},{x:10,y:n/10*6},{x:10,y:n/10*7},{x:10,y:n/10*8},{x:10,y:n/10*9},{x:10,y:n-10},{x:e/10,y:n-10},{x:e/10*2,y:n-10},{x:e/10*3,y:n-10},{x:e/10*4,y:n-10},{x:e/10*5,y:n-10},{x:e/10*6,y:n-10},{x:e/10*7,y:n-10},{x:e/10*8,y:n-10},{x:e/10*9,y:n-10},{x:e-10,y:n-10},{x:e-10,y:n/10*9},{x:e-10,y:n/10*8},{x:e-10,y:n/10*7},{x:e-10,y:n/10*6},{x:e-10,y:n/10*5},{x:e-10,y:n/10*4},{x:e-10,y:n/10*3},{x:e-10,y:n/10*2},{x:e-10,y:n/10},{x:e-10,y:10},{x:e/10*9,y:10},{x:e/10*8,y:10},{x:e/10*7,y:10},{x:e/10*6,y:10},{x:e/10*5,y:10},{x:e/10*4,y:10},{x:e/10*3,y:10},{x:e/10*2,y:10},{x:e/10,y:10}].forEach((e=>{let n=new d.Cartesian2(e.x,e.y),i=t.camera.getPickRay(n);if(i){let e=t.scene.globe.pick(i,t.scene);if(e){let t=d.Cartographic.fromCartesian(e),n=[t.longitude/Math.PI*180,t.latitude/Math.PI*180];r.push(n)}}})),r.length>0&&r.push(r[0]),r}function b(){const t=g();let e=new d.Cartesian2(t.scene.canvas.width/2,t.scene.canvas.height/2),n=t.scene.globe.pick(t.camera.getPickRay(e),t.scene),r=d.Cartographic.fromCartesian(n),i=[r.longitude/Math.PI*180,r.latitude/Math.PI*180];return{longitude:i[0],latitude:i[1]}}function x(t){const e=window.turf;let n,r=w(t);if(r.length<4){let t=b();n=e.buffer(e.point([t.longitude,t.latitude]),2500)}else n=e.polygon([r]);return{rectGeoJson:e.bboxPolygon(e.bbox(n)),geoJson:n,area:e.area(n)/1e6+"平方千米"}}const _={formCartographicObj:function(t){return new d.Cartesian3.fromDegrees(t.longitude,t.latitude,t.height)},formCartographicObjS:function(t){let e=[];for(let n=0;n<t.length;n++)e.push(this.formCartographicObj(t[n]));return e},formCartographicArr:function(t){return d.Cartesian3.fromDegrees(t[0],t[1],t[2])},formCartographicArrS:function(t){let e=[];for(let n=0;n<t.length;n++)e.push(d.Cartesian3.fromDegrees(t[n][0],t[n][1],t[n][2]));return e}},E={formCartesian3(t){let e=d.Ellipsoid.WGS84,n=new d.Cartesian3(t.x,t.y,t.z),r=e.cartesianToCartographic(n);return[d.Math.toDegrees(r.longitude),d.Math.toDegrees(r.latitude),r.height]},formCartesian3S(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];e.push(this.formCartesian3(r))}return e}},S={formCartesian3(t){let[e,n,r]=E.formCartesian3(t);return new d.Cartographic(e,n,r)},formCartesian3S(t){let e=[];for(let n=0;n<t.length;n++)e.push(this.formCartesian3(t[n]));return e}};class C{constructor(t){this.imgUrl=t;let e=document.createElement("img");this.mv=e,e.src=this.imgUrl,e.style.position="absolute",e.style.left="-100px",e.style.top="-100px",document.body.append(e),document.onmousemove=function(t){t=t||window.event,e.style.left=t.clientX-e.width/2+"px",e.style.top=t.clientY-e.height+"px"}}remove(){document.onmousemove=null,document.body.removeChild(this.mv)}}function T(t){let e=d.Cartographic.fromCartesian(t);return[d.Math.toDegrees(e.longitude),d.Math.toDegrees(e.latitude)]}function I(t,e,n,r){let i=r*Math.sin(n*Math.PI/180),o=r*Math.cos(n*Math.PI/180),a=6356725+21412*(90-e)/90;return[180*(i/(a*Math.cos(e*Math.PI/180))+t*Math.PI/180)/Math.PI,180*(o/a+e*Math.PI/180)/Math.PI]}function A(t,e,n,r,i){return Math.abs(t-n)<i&&Math.abs(e-r)<i}function P(t){return!(t>180||t<-180)}function k(t){return!(t>90||t<-90)}const O={DeltaDegree:1e-5,DeltaRadian:1e-5*Math.PI/180,lat_to_meter:t=>t/1.57891e-7,lon_to_meter:(t,e)=>t/1.56785e-7*Math.cos(e),meter_to_lat:t=>1.57891e-7*t,meter_to_long:(t,e)=>1.56785e-7*t/Math.cos(e),pointProjectLine:function(t,e,n,r,i,o,a){if(A(n,r,i,o,1e-7))return a[0]=n,a[1]=r,0;if(A(n,r,t,e,1e-7)||A(i,o,t,e,1e-7))return a[0]=t,a[1]=e,0;let s=this.TwoPointsDistance(n,r,t,e),l=this.vecAngle(n,r,i,o),u=this.TwoPointsDistance(n,r,i,o),c=l-this.vecAngle(n,r,t,e),h=Math.cos(c)*s;return a[0]=n+Math.cos(l)*h,a[1]=r+Math.sin(l)*h,h<0?-1:h<=u?0:1},TwoPointsDistance:(t,e,n,r)=>Math.sqrt((t-n)*(t-n)+(e-r)*(e-r)),vecAngle:function(t,e,n,r){let i,o;return i=n-t,o=r-e,this.normalizeVecAngle(Math.atan2(o,i))},normalizeVecAngle:t=>t-~~(t/(2*Math.PI))*(2*Math.PI),polarPoint:function(t,e,n,r){let i=new Array(2);return i[0]=t+r*Math.cos(n),i[1]=e+r*Math.sin(n),i},deltaAngle:function(t,e){return this.normalizeVecAngle(e-t)},InterpolateLineLonlat:function(t,e){if(!t||!e)return null;if(!(t.lon&&t.lat&&e.lon&&e.lat))return null;if(!(P(t.lon)&&P(e.lon)&&k(t.lat)&&k(e.lat)))return null;let n=[];n.push([t.lon,t.lat]);let r=Math.sqrt(Math.pow(e.lon-t.lon,2)+Math.pow(e.lat-t.lat,2));if(r<=this.DeltaDegree)return n.push([e.lon,e.lat]),n;{let i=r/this.DeltaDegree,o=(e.lon-t.lon)/i,a=(e.lat-t.lat)/i;for(let e=0;e<i;e++){let r=t.lon+(e+1)*o,i=t.lat+(e+1)*a;n.push([r,i])}}return n},computeLineNormal:function(t,e,n,r,i){let o=this.lon_to_meter(t,e),a=this.lat_to_meter(e),s=this.lon_to_meter(n,r),l=this.lat_to_meter(r),u=(o+s)/2,c=(a+l)/2,h=this.vecAngle(o,a,s,l)-Math.PI/2,p=this.polarPoint(u,c,h,1),f=this.meter_to_lat(c),g=this.meter_to_long(u,f),y=this.meter_to_lat(p[1]),m=this.meter_to_long(p[0],y),v=d.Cartesian3.fromDegrees(g,f,0),w=d.Cartesian3.fromDegrees(m,y,0),b=new d.Cartesian3(w.x-v.x,w.y-v.y,w.z-v.z);return d.Cartesian3.normalize(b,i)},degree2rad:function(t){return t*Math.PI/180},rad2degree:function(t){return 180*t/Math.PI},computeArea:function(t){let e=t.length;if(e<3)return 0;let n=t[0][1]*(t[e-1][0]-t[1][0]);for(let r=1;r<e;r++)n+=t[r][1]*(t[r-1][0]-t[(r+1)%e][0]);return Math.abs(n/2)},calculationDistance:function(t,e){let n=t.y,r=e.y,i=t.x,o=e.x;return Math.sqrt((o-i)*(o-i)+(r-n)*(r-n))},guid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+t()+t()+t()+t()+t()+t()},calculationIntersection:function(t,e,n){n[0]?n[1]=t[1]+(n[0]-t[0])*(e[1]-t[1])/(e[0]-t[0]):n[0]=t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1])},calculateTriangle:function(t){let e=S.formCartesian3S(t),n=window.turf.point([e[0].longitude,e[0].latitude]),r=window.turf.point([e[1].longitude,e[1].latitude]),i=window.turf.point([e[2].longitude,e[2].latitude]),o=window.turf.bearing(n,r),a=window.turf.bearing(r,i);o=o<0?o+360:o,a=a<0?a+360:a;let s=180-o+a;return s=s>360?s-360:s,s=Math.abs(s),s},booleanClockwise:function(t){let e=[];t.map((t=>{e.push(T(t))})),e.push(e[0]);let n=window.turf.lineString(e);return window.turf.booleanClockwise(n)},getClippingPlanes:function(t){let e=t.length,n=[];for(let r=0;r<e;++r){let i=(r+1)%e,o=d.Cartesian3.add(t[r],t[i],new d.Cartesian3);o=d.Cartesian3.multiplyByScalar(o,.5,o);let a=d.Cartesian3.normalize(o,new d.Cartesian3),s=d.Cartesian3.subtract(t[i],o,new d.Cartesian3);s=d.Cartesian3.normalize(s,s);let l=d.Cartesian3.cross(s,a,new d.Cartesian3);l=d.Cartesian3.normalize(l,l);let u=new d.Plane(l,0),c=d.Plane.getPointDistance(u,o);n.push(new d.ClippingPlane(l,c))}return n},cartesian3ToDegrees:T,getCirclePoint:I,generateCirclePoints:function(t,e,n){let r=[];n=n||360;let i=parseInt(String(360/n));for(let n=0;n<=360;n+=i)r.push(I(t[0],t[1],n,e));return r},getHeight:function(t){let e=d.Cartographic.fromCartesian(t[0]);return(d.Cartographic.fromCartesian(t[1]).height-e.height||0).toFixed(2)}},M={removeNoData:t=>t.filter(Boolean),getEleCount:(t,e)=>t.reduce(((t,n)=>n===e?t+1:t),0),difference:(t,e)=>{const n=new Set(e);return t.filter((t=>!n.has(t)))},removeRepeat:t=>[...new Set(t)],filterNonUnique:t=>t.filter((e=>t.indexOf(e)===t.lastIndexOf(e))),without:(t,...e)=>t.filter((t=>!e.includes(t))),removeArrayItem(t,e){let n=0;for(;n<t.length;)t[n]===e?t.splice(n,1):n++;return t},upsetArr(t){let e=t.length;for(;e;){let n=Math.floor(Math.random()*e--);[t[n],t[e]]=[t[e],t[n]]}return t},sumArr:t=>t.reduce(((t,e)=>t+e)),arrayAverage(t){return this.sumArr(t)/t.length},randomOne:t=>t[Math.floor(Math.random()*t.length)],popRandom(t){let e=this.randomOne(t);return this.removeArrayItem(t,e),e}},N={awaitWrap:async function(t){try{return[null,await t]}catch(t){return[t,null]}},sleep:async function(t){return new Promise((e=>setTimeout(e,t)))}};let L={GetUA:function(){return navigator.userAgent},toClipboard:async function(t){const e=document.createElement("textarea");e.readOnly=!0,e.style.position="absolute",e.style.left="-9999px",e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e)},saveShareContent(t,e){let n=document.createElement("a");n.download=e;let r=new Blob([t]);n.href=URL.createObjectURL(r),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},R={getRandomColor(){const t=[];for(let e=0;e<3;++e){let e=Math.floor(256*Math.random()).toString(16);e=1===e.length?"0"+e:e,t.push(e)}return"#"+t.join("")},hexToRGB(t){const e=3===t.slice(t.startsWith("#")?1:0).length?"#"+(n=t).slice(n.startsWith("#")?1:0).split("").map((t=>t+t)).join(""):t;var n;return`rgb(${parseInt(e.slice(1),16)>>16}, ${(65280&parseInt(e.slice(1),16))>>8}, ${255&parseInt(e.slice(1),16)})`},RGBToHex:(t,e,n)=>((t<<16)+(e<<8)+n).toString(16).padStart(6,"0")},D={fullFormat(t){let e=null;if(t instanceof Date)e=t;else{if("string"!=typeof t)return new Date;e=new Date(t)}return`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日${e.getHours()}时${e.getMinutes()}分${e.getSeconds()}秒${e.getMilliseconds()}毫秒`},simpleFormat(t){let e=null;if(t instanceof Date)e=t;else{if("string"!=typeof t)return new Date;e=new Date(t)}return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`},GetDaysOfMonth:(t,e)=>new Date(t,e,0).getDate(),GetWeekOfDay(t,e,n){let r="";switch(new Date(t,e-1,n).getDay()){case 0:r="星期天";break;case 1:r="星期一";break;case 2:r="星期二";break;case 3:r="星期三";break;case 4:r="星期四";break;case 5:r="星期五";break;case 6:r="星期六";break;default:r="输入数据不正确"}return r},GetNumOfTheDate(t){let e=new Date(t),n=new Date(e.getTime());return n.setMonth(0),n.setDate(1),(e.getTime()-n.getTime())/864e5},GetDayDiffBetweenDates(t,e){let n=new Date(t),r=new Date(e);return(n.getTime()-r.getTime())/864e5}},F={calcTriangleArea(t,e,n){if(t<0||e<0||n<0)return 0;if(!(t+e>n&&t+n>e&&e+n>t))return 0;if(!(t-e<n&&e-t<n&&t-n<e&&n-t<e&&e-n<t&&n-e<t))return 0;let r=(t+e+n)/2;return Math.sqrt(r*(r-t)*(r-e)*(r-n))},VecAngle(t,e,n,r){let i,o;return i=n-t,o=r-e,this.NormalizeVecAngle(Math.atan2(o,i))},NormalizeVecAngle:t=>t-~~(t/(2*Math.PI))*(2*Math.PI),GeoAlgorithm(t,e){return this.NormalizeVecAngle(e-t)}},j={setCookie:function(t,e,n){let r=new Date;r.setDate(r.getDate()+n),document.cookie=t+"="+e+";expires="+r},getCookie:function(t){let e=document.cookie.split("; ");for(let n=0;n<e.length;n++){let r=e[n].split("=");if(r[0]===t)return r[1]}return""},removeCookie:function(t){this.setCookie(t,"1",-1)},urlToBlob(t){let e=t.split(","),n=e[0].match(/:(.*?);/)[1],r=atob(e[1]),i=r.length,o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})},currentURL:()=>window.location.href,isPc:()=>!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},z={calcArr(t){let e=Math.min.apply(null,t),n=Math.max.apply(null,t),r=this.calcAve(t);t.sort((function(t,e){return t-e}));let i=t.length-1,o=Math.floor(i/2);return{arr:t,min:e,max:n,ave:r,median:(t[o]+t[i-o])/2,JenksBreaks:this.getJenksBreaks(t,4)}},calcAve:t=>t.reduce((function(t,e){return t+e})),calcMedian(t){t.sort((function(t,e){return t-e}));let e=t.length-1,n=Math.floor(e/2);return(t[n]+t[e-n])/2},getJenksBreaks:function(t,e){let n=(t=t.map((function(t){return 100*t}))).length;t.sort((function(t,e){return t-e}));let r=[],i=[],o=[];for(let t=0;t<=n;t++){r[t]=[],i[t]=[],o[t]=0;for(let n=0;n<=e;n++)r[t][n]=0,i[t][n]=0}for(let t=1;t<=e;t++){r[1][t]=1,i[1][t]=0;for(let e=2;e<=n;e++)i[e][t]=Number.MAX_VALUE}let a=0;for(let o=2;o<=n;o++){let n=0,s=0,l=0,u=0;for(let c=1;c<=o;c++){u=o-c+1;let h=parseInt(String(t[u-1]));s+=h*h,n+=h,l++,a=s-n*n/l;let p=u-1;if(0!=p)for(let t=2;t<=e;t++)i[o][t]>=a+i[p][t-1]&&(r[o][t]=u,i[o][t]=a+i[p][t-1])}r[o][1]=1,i[o][1]=a}let s=n,l=[];l[e-1]=parseInt(String(t[t.length-1]));for(let n=e;n>=2;n--){let e=parseInt(r[s][n])-2;l[n-2]=parseInt(String(t[e])),s=parseInt(String(r[s][n]-1))}return l=l.map((function(t){return t/100})),l},factorial1(t){let e=1;for(let n=1;n<=t;n++)e*=n;return e},fibonacci:t=>Array(t).fill(0).reduce((function(t,e,n){return[...t,n>1?t[n-1]+t[n-2]:n]}),[]).pop(),lcm:(t,e)=>{const n=(t,e)=>e?n(e,t%e):t;return Math.abs(t*e)/n(t,e)},median:t=>{const e=Math.floor(t.length/2),n=t.sort(((t,e)=>t-e));return t.length%2!=0?n[e]:(n[e-1]+n[e])/2},standardDeviation:(t,e=!1)=>{const n=t.reduce(((t,e)=>t+e),0)/t.length;return Math.sqrt(t.reduce(((t,e)=>[].concat(Math.pow(e-n,2))),[]).reduce(((t,e)=>t+e),0)/(t.length-(e?0:1)))},IsPrimeNum(t){for(let e=2;e<=t-1;e++)if(t%e==0)return!1;return!0},spliceNum2(t){let e=0,n=0,r=[],i=t;for(;i=parseInt(String(i/10)),e++,0!=i;);for(let i=e-1;i>=0;i--)n=t%10,t=Math.floor(t/10),r[i]=n;return r},spliceNum3(t){let e=[],n=t.toString().length;for(let r=0;r<n;r++){let n=t%10;if(t=parseInt(String(t/10)),e.push(n),0==t)break}return e.reverse()},TransferTenToOther:(t,e)=>t.toString(parseInt(e)),transfer:(t,e,n)=>parseInt(t+"",e).toString(n),gys(t,e){for(let n=t<e?t:e;n>=1;n--)if(t%n==0&&e%n==0)return n},rnd:(t,e)=>t+Math.random()*(e-t)},G={randomString(t){t=t||8;let e="";for(let n=0;n<t;n++)e+="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678".charAt(Math.floor(48*Math.random()));return e},uuid(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:7&n|8).toString(16)}))},checkPwd:function(t){let e=0;return t.length<6||(/[0-9]/.test(t)&&e++,/[a-z]/.test(t)&&e++,/[A-Z]/.test(t)&&e++,/[\.|-|_]/.test(t)&&e++),e}},B={illegalFilter:t=>!/[`~!@#$%^&*()_+<>?:"{},.\/;'[\]]/im.test(t)&&!/[·！#￥（——）：；“”‘、，|《。》？、【】[\]]/im.test(t)},U={speechSynthesis:t=>{const e=new SpeechSynthesisUtterance(t);e.voice=window.speechSynthesis.getVoices()[0],window.speechSynthesis.speak(e)},timeTaken(t,...e){console.time("函数耗时");const n=t(...e);return console.timeEnd("函数耗时"),n},cloneMap(t){let e=Object.create(null);for(let[n,r]of t)e[n]=r;e=JSON.stringify(e),e=JSON.parse(e);let n=new Map;for(let t of Object.keys(e))n.set(t,e[t]);return n},MapToJson(t){let e={};for(let[n,r]of t)e[n]=r;return e},readFile({errFunc:t,endFunc:e}){document.getElementById("_ef")?.remove();let n=document.createElement("input");n.setAttribute("id","_ef"),n.setAttribute("type","file"),n.setAttribute("style","display:none"),document.body.appendChild(n),n.onchange=function(r){let i=n.files[0],o=i.name,a=n.value,s=o.substring(o.lastIndexOf(".")),l=new FileReader;l.readAsText(i,"UTF-8"),l.onload=function(n){try{let t=n.target.result;e&&e({fileName:o,filePath:a,fileType:s,fileData:t})}catch(e){t&&t("文件已损坏",e)}}},n.click()}};const q={checkSourceItem(t){let e=!0;return e=e&&!!t,e=e&&!!t.properties,t.decryptionKey&&!t.netRootPaths||t.offlineCache&&!t.netRootPaths?(console.warn("参数异常，资源项的 netRootPaths 参数为必填！：",t),!1):e},completeParams:t=>((t=JSON.parse(JSON.stringify(t))).pid=t.pid||G.uuid(),t.defaultLoad=t.defaultLoad||!1,t.showInTree=!("showInTree"in t)||t.showInTree,t.netRootPaths=t.netRootPaths||[],t)};function W(){let t=window.earth;if(!t)throw new Error("请先初始化 Earth");return t}const V=[{pid:"ba4d5925-2278-0f89-444a-6640795adaa0",name:"高德影像",catalog:"基础影像",dataType:a.layer,showInTree:!0,defaultLoad:!0,show:!0,offlineCache:!1,properties:{scheme:"layer-xyz-3857",url:"http://webst04.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}"}},{pid:"3e50b48c-3fe1-ccba-0935-304f5ffa0785",name:"高德电子地图",catalog:"电子地图",dataType:a.layer,showInTree:!0,defaultLoad:!0,show:!0,offlineCache:!1,properties:{scheme:"layer-xyz-3857",url:"http://webst04.is.autonavi.com/appmaptile?style=7&x={x}&y={y}&z={z}"}}];let H=f;const Y={get config(){if(window.document.title=H.appTitle,![...document.getElementsByTagName("link")].find((t=>"shortcut icon"===t.rel&&"image/x-icon"===t.type))){let t=document.createElement("link");t.href=H.appIcon,t.type="image/x-icon",t.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(t)}return H},loadConfig(t){t&&(t.Token&&(H.Token=t.Token),t.appName&&(H.appName=t.appName),t.appTitle&&(H.appTitle=t.appTitle),t.homeView&&(H.homeView=t.homeView),t.startAnimation&&(H.startAnimation=t.startAnimation),t.AppBaseUrl&&(H.AppBaseUrl=t.AppBaseUrl),t.GISResourcesUrl&&(H.GISResourcesUrl=t.GISResourcesUrl),Array.isArray(t.layerList)&&t.layerList.length>0&&H.layerList.push(...t.layerList),Array.isArray(t.terrainList)&&t.terrainList.length>0&&H.terrainList.push(...t.terrainList),Array.isArray(t.modelList)&&t.modelList.length>0&&H.modelList.push(...t.modelList),Array.isArray(t.cesium3DTileSetList)&&t.cesium3DTileSetList.length>0&&H.cesium3DTileSetList.push(...t.cesium3DTileSetList),Array.isArray(t.geoJsonList)&&t.geoJsonList.length>0&&H.geoJsonList.push(...t.geoJsonList),Array.isArray(t.poiList)&&t.poiList.length>0&&H.poiList.push(...t.poiList),t.terrainList&&function(t){let e=!1;t.length>0&&t.map((t=>(e&&(t.defaultLoad=!1),t.defaultLoad&&(e=!0),t)))}(t.terrainList)),function(t){function e(t=[]){return t.map((t=>q.completeParams(t)))}t.layerList=e(t.layerList),t.terrainList=e(t.terrainList),t.modelList=e(t.modelList),t.cesium3DTileSetList=e(t.cesium3DTileSetList),t.geoJsonList=e(t.geoJsonList),t.poiList=e(t.poiList)}(H)},async addOSMOnLine(t=!1){const e=JSON.parse(JSON.stringify(c[0]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addOSMElevationOnline(t=!1){const e=JSON.parse(JSON.stringify(c[1]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addAMapSatelliteLayerOnLine(t=!1){const e=JSON.parse(JSON.stringify(V[0]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addAMapLayerOnLine(t=!1){const e=JSON.parse(JSON.stringify(V[1]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addMapBoxOnAliYun(t=!1){const e=JSON.parse(JSON.stringify(u[0]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addBingMapOnIon(t=!1){const e=JSON.parse(JSON.stringify(l[0]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addBingMapHasLabelOnIon(t=!1){const e=JSON.parse(JSON.stringify(l[1]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addTerrainOnIon(t=!1){const e=JSON.parse(JSON.stringify(h[0]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addTerrainOnAliYun(t=!1){const e=JSON.parse(JSON.stringify(h[1]));e.defaultLoad=t,e.show=t,await this.addResourceItem(e)},async addResourceItem(t){const e=q.completeParams(t);if(this.getResourcesByPid(e.pid))console.log("无法向配置文件添加重复的资源项");else{switch(String(e.dataType)){case a.layer:H.layerList.push(e);break;case a.terrain:H.terrainList.push(e);break;case a.gltf:H.modelList.push(e);break;case a.Cesium3DTile:H.cesium3DTileSetList.push(e);break;case a.geoJson:H.geoJsonList.push(e);break;case a.poi:H.poiList.push(e);break;case a.water:console.log("暂不支持展示水体")}try{const t=W();t&&t.viewer3DWorkSpace&&await t.viewer3DWorkSpace.addData(e)}catch(t){}}return e},getResourcesByPid(t){return this.getAllSources().find((e=>e.pid===t))},getAllSources(){let t=this.config;return[...t.layerList,...t.terrainList,...t.modelList,...t.cesium3DTileSetList,...t.geoJsonList,...t.poiList]},getBaseLayer(){return this.config.layerList.find((t=>"layer"===t.dataType&&t.properties.baseLayer))},getBaseTerrain(){return this.config.terrainList.find((t=>"terrain"===t.dataType&&t.defaultLoad))}},X={defaultAccessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzN2UwMjViMC0xOTJhLTQxMmItOWEzMS1kMjJiNmZiY2E5N2YiLCJpZCI6MjU5LCJpYXQiOjE3MDE0NTc1NjB9.bMNhc7S4cuG1qUnRUiLxr5lunSH1k6-UfkRXSqVFYyM"};function Z(t,e,n,r,i){let o=d.Cartographic.fromCartesian(t),a=d.Cartographic.fromCartesian(e),s=d.Cartographic.fromCartesian(n),l=(o.longitude+a.longitude)/2,u=(o.latitude+a.latitude)/2,c=O.lon_to_meter(o.longitude-l,o.latitude),h=O.lat_to_meter(o.latitude-u),p=O.lon_to_meter(a.longitude-l,a.latitude),f=O.lat_to_meter(a.latitude-u),g=O.lon_to_meter(s.longitude-l,s.latitude),y=O.lat_to_meter(s.latitude-u),m=[];O.pointProjectLine(g,y,c,h,p,f,m);let v=O.TwoPointsDistance(g,y,m[0],m[1]),w=O.vecAngle(m[0],m[1],g,y),b=O.polarPoint(c,h,w,v),x=O.polarPoint(p,f,w,v),_=O.meter_to_lat(b[1])+u,E=O.meter_to_long(b[0],_)+l,S=O.meter_to_lat(x[1])+u,C=O.meter_to_long(x[0],S)+l;o.longitude=E,o.latitude=_,a.longitude=C,a.latitude=S,d.Cartographic.toCartesian(o,d.Ellipsoid.WGS84,i),d.Cartographic.toCartesian(a,d.Ellipsoid.WGS84,r)}function K(t,e){let n=d.Ellipsoid.WGS84.cartesianToCartographic(t),r=d.Math.toDegrees(n.longitude),i=d.Math.toDegrees(n.latitude),o=d.Ellipsoid.WGS84.cartesianToCartographic(e),a=d.Math.toDegrees(o.longitude),s=d.Math.toDegrees(o.latitude),l=Math.min(r,a),u=Math.max(r,a),c=Math.min(i,s),h=Math.max(i,s),p=d.Cartesian3.fromDegrees(l,h);return[p,d.Cartesian3.fromDegrees(u,h),d.Cartesian3.fromDegrees(u,c),d.Cartesian3.fromDegrees(l,c),p]}var J;!function(t){t.cartesian3="cartesian3",t.cartographicObj="cartographicObj",t.cartographicPoiArr="cartographicPoiArr"}(J||(J={}));const Q=(t=J.cartesian3,e)=>{let n;return n=t===J.cartographicObj?S.formCartesian3S(e):t===J.cartographicPoiArr?E.formCartesian3S(e):e,n},tt={getHandle:(t,e)=>(t=t||g(),{handler:new d.ScreenSpaceEventHandler(t.canvas),errCallback:e||function(){console.log("默认事件监听器，被重置！")}})};class et{constructor(){this._definitionChanged=new d.Event}get definitionChanged(){return this._definitionChanged}get isConstant(){return!1}}class nt extends et{constructor(t){super(),this.color=t,this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}equals(t){return this===t||t instanceof nt&&d.Property.equals(this._color,t._color)}getType(){return"PolylineLighting"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.image=d.Material.PolylineLightingImage,e}init(){d.Material.PolylineLightingType="PolylineLighting",d.Material.PolylineLightingImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAACYCAYAAACS0lH9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAJ0GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgMTE2LjE2NDY1NSwgMjAyMS8wMS8yNi0xNTo0MToyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplODY0YmNmNy1lZGIyLWIyNDQtYWI0NC04OWZkNmMwOTQ4MDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjIyOGMxMDUtODFmZS00MjAxLWIwOTEtZDkwMGI0NTI0NWMwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IjcxNzA5OEJGODAwODNEREJGRDQyQzAzMzQ5NDlDRDFDIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IiIgdGlmZjpJbWFnZVdpZHRoPSI1MTIiIHRpZmY6SW1hZ2VMZW5ndGg9IjE1MiIgdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPSIyIiB0aWZmOlNhbXBsZXNQZXJQaXhlbD0iMyIgdGlmZjpYUmVzb2x1dGlvbj0iMS8xIiB0aWZmOllSZXNvbHV0aW9uPSIxLzEiIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjEiIGV4aWY6RXhpZlZlcnNpb249IjAyMzEiIGV4aWY6Q29sb3JTcGFjZT0iNjU1MzUiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI1MTIiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSIxNTIiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAyLTIzVDEwOjAyOjQxKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmZmYTk5ZjhhLTdiZmQtNDcxNi04MTgwLWJmZTUyMmFmNGUzNSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gaW1hZ2UvanBlZyB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyMjhjMTA1LTgxZmUtNDIwMS1iMDkxLWQ5MDBiNDUyNDVjMCIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmZmYTk5ZjhhLTdiZmQtNDcxNi04MTgwLWJmZTUyMmFmNGUzNSIgc3RSZWY6ZG9jdW1lbnRJRD0iNzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0iNzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUMiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+NzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUM8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHRpZmY6Qml0c1BlclNhbXBsZT4gPHJkZjpTZXE+IDxyZGY6bGk+ODwvcmRmOmxpPiA8cmRmOmxpPjg8L3JkZjpsaT4gPHJkZjpsaT44PC9yZGY6bGk+IDwvcmRmOlNlcT4gPC90aWZmOkJpdHNQZXJTYW1wbGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+h9EbuwAAA01JREFUeJzt3TuOFVkQBNDoJhmEkDBgZv8L5GMgIcRvHg5ryDTiHKn98Co67q16T4/HYwIAVHm+DgAA7FMAAKCQAgAAhSbJ03UIAGCXBQAACikAAFDIEQAAFLIAAEAhBQAACikAAFBoogQAQB0PfwAopAAAQCGvAQJAIQsAABSyAABAIQsAABSyAABAIQUAAAo5AgCAQr4ECACFPPwBoJACAACFHAEAQCEPfwAoZAEAgEIe/gBQyAIAAIU8/AGgkAUAAAr5LQAAKOS/fwAoZAEAgELuAABAIQsAABRSAACgkAIAAIXcAQCAQhYAAChkAQCAQgoAABRSAACgkIc/ABSaJC+uQwAAu7wFAACFFAAAKDR//wCAIhYAACjkEiAAFLIAAEChSfLyOgQAsMuXAAGgkLcAAKCQAgAAhbwFAACFFAAAKOQIAAAKTZJ/rkMAALsUAAAo5AgAAAr5EiAAFFIAAKCQOwAAUEgBAIBCk+TVdQgAYNckeXMdAgDYNUneXocAAHZNkvfXIQCAXZPkv+sQAMCuSfLvdQgAYNckeXcdAgDY5RIgABSaJK+vQwAAu/wWAAAUmiRP1yEAgF2T5HEdAgDYNUl+XocAAHZNkm/XIQCAXZPky3UIAGDXJPl8HQIA2DVJPl6HAAB2TZIP1yEAgF2T5NN1CABgl0uAAFBokny9DgEA7Jok369DAAC7JsmP6xAAwC4FAAAK+S0AACikAABAoUny6zoEALDLHQAAKKQAAEAhRwAAUGiS/L4OAQDsUgAAoJAjAAAopAAAQKFJ8v91CABgly8BAkChSfK4DgEA7PIWAAAUsgAAQCFvAQBAIQsAABRSAACgkEuAAFDo+ToAALDPlwABoJACAACFFAAAKOQtAAAoZAEAgEIWAAAopAAAQCEFAAAKuQMAAIUsAABQyKeAAaCQBQAACrkDAACFHAEAQCELAAAUsgAAQCELAAAUsgAAQCELAAAUsgAAQCEFAAAKOQIAgEIWAAAo5LcAAKCQAgAAhRwBAEAhCwAAFLIAAEAhCwAAFLIAAEAhBQAACvkSIAAUsgAAQCEFAAAKKQAAUMhrgABQyAIAAIUUAAAo5AgAAApZAACgkAIAAIUUAAAo5A4AABT6A6gaPQ6/wRIfAAAAAElFTkSuQmCC",d.Material.PolylineLightingSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n         { czm_material material = czm_getDefaultMaterial(materialInput); vec2 st = materialInput.st;\n            vec4 colorImage = texture(image, vec2(fract(st.s), st.t));\n             material.alpha = colorImage.a * color.a;\n             material.diffuse = (colorImage.rgb + color.rgb)* 1.3 ;\n             return material;}",d.Material._materialCache.addMaterial(d.Material.PolylineLightingType,{fabric:{type:d.Material.PolylineLightingType,uniforms:{color:new d.Color(1,0,0,.5),image:d.Material.PolylineLightingImage},source:d.Material.PolylineLightingSource},translucent:()=>!0})}}async function rt(t){t=JSON.parse(JSON.stringify(t));const e=g();let n=t.map((t=>d.Cartographic.fromDegrees(t.longitude,t.latitude))),r=await e.scene.sampleHeightMostDetailed(n),i=[];e.terrainProvider.availability?i=await d.sampleTerrainMostDetailed(e.terrainProvider,n):console.log("当前区域不存在地形");for(let e=0;e<r.length;e++)0!==r[e].height&&r[e].height>-500?(t[e].height=r[e].height,console.log("模型高度",r[e].height)):i[e]&&i[e].height?(t[e].height=i[e].height,console.log("地形高度",i[e].height)):t[e].height=0;return t}window.Cesium&&Object.defineProperties(nt.prototype,{color:d.createPropertyDescriptor("color")});const it={createPoint:t=>new d.Entity({position:t,point:{color:d.Color.CORNSILK,pixelSize:8,heightReference:d.HeightReference.NONE,disableDepthTestDistance:Number.POSITIVE_INFINITY}}),createRedPoint:t=>new d.Entity({position:t,point:{pixelSize:5,color:d.Color.RED,outlineColor:d.Color.WHITE,outlineWidth:2,disableDepthTestDistance:Number.POSITIVE_INFINITY}}),spaceDistanceLabel(t,e){let n=S.formCartesian3(t),r=S.formCartesian3(e),i=window.turf.point([n.longitude,n.latitude]),o=window.turf.point([r.longitude,r.latitude]),a=window.turf.midpoint(i,o),s=window.turf.rhumbDistance(i,o,{units:"meters"}),l=s>1e3?(s/1e3).toFixed(3)+"km":s.toFixed(3)+"m",u=(n.height+r.height)/2;return new d.Entity({position:d.Cartesian3.fromDegrees(a.geometry.coordinates[0],a.geometry.coordinates[1],u),label:{text:l,font:"21px SimSun",style:d.LabelStyle.FILL_AND_OUTLINE,outlineWidth:2,fillColor:d.Color.WHITE,disableDepthTestDistance:Number.POSITIVE_INFINITY,pixelOffset:new d.Cartesian2(30,-30)}})},async polygonCenterLabel(t,e="周长"){let n=window.turf.center(t),r="";switch(e){case"周长":{let e=window.turf.length(t,{units:"kilometers"});r=e<5e3?"周长："+(1e3*e).toFixed(3)+" m":"周长："+e.toFixed(3)+" km"}break;case"面积":{let e=window.turf.area(t);r=e<2e5?"面积："+e.toFixed(3)+" m2":"面积："+(1e-6*e).toFixed(3)+" km2"}}let[i]=await rt([{longitude:n.geometry.coordinates[0],latitude:n.geometry.coordinates[1],height:0}]);return new d.Entity({position:d.Cartesian3.fromDegrees(i.longitude,i.latitude,i.height),label:{text:r,font:"21px SimSun",style:d.LabelStyle.FILL_AND_OUTLINE,outlineWidth:2,fillColor:d.Color.WHITE,disableDepthTestDistance:Number.POSITIVE_INFINITY,pixelOffset:new d.Cartesian2(30,-30)}})},buildLabelByDegrees(t,e,n={}){let r={position:d.Cartesian3.fromDegrees(t.longitude,t.latitude),label:{text:e,font:"12pt bold monospace",fillColor:d.Color.WHITE,outlineColor:d.Color.BLACK,outlineWidth:4,style:d.LabelStyle.FILL_AND_OUTLINE,horizontalOrigin:d.HorizontalOrigin.LEFT,verticalOrigin:d.VerticalOrigin.BOTTOM,disableDepthTestDistance:Number.POSITIVE_INFINITY,heightReference:d.HeightReference.CLAMP_TO_GROUND}};for(const t in n)"id"===t?r[t]=n[t]:r.label[t]=n[t];return new d.Entity(r)},createLightingLine:t=>new d.Entity({polyline:{positions:t,width:8,clampToGround:!0,arcType:d.ArcType.RHUMB,material:new nt(d.Color.GREEN)}}),createLightingPolygon:t=>new d.Entity({polyline:{positions:new d.CallbackProperty((()=>t),!1),width:12,loop:!0,clampToGround:!0,material:new nt(d.Color.GREEN)},polygon:{hierarchy:new d.CallbackProperty((()=>new d.PolygonHierarchy(t)),!1),material:new d.ColorMaterialProperty(d.Color.LIGHTSKYBLUE.withAlpha(.3)),heightReference:d.HeightReference.NONE}}),PointLabelEntity:(t,e)=>new d.Entity({position:t,point:{pixelSize:5,color:d.Color.RED,outlineColor:d.Color.WHITE,outlineWidth:2,heightReference:d.HeightReference.NONE},label:{showBackground:!0,horizontalOrigin:d.HorizontalOrigin.LEFT,verticalOrigin:d.VerticalOrigin.BOTTOM,text:e,font:"18px sans-serif",fillColor:d.Color.GOLD,outlineWidth:2,disableDepthTestDistance:1e4}}),buildLabel:(t,e)=>new d.Entity({position:t,label:{text:e,font:"14pt bold monospace",fillColor:d.Color.WHITE,outlineColor:d.Color.BLACK,outlineWidth:4,style:d.LabelStyle.FILL_AND_OUTLINE,color:d.Color.RED,backgroundColor:d.Color.RED,heightReference:d.HeightReference.NONE,verticalOrigin:d.VerticalOrigin.TOP,horizontalOrigin:d.HorizontalOrigin.CENTER,disableDepthTestDistance:Number.POSITIVE_INFINITY,pixelOffset:new d.Cartesian2(0,-30)}}),createHeightEllipse(t){let e=function(){let e=d.Cartographic.fromCartesian(t[0]),n=d.Cartographic.fromCartesian(t[1]),r=new d.EllipsoidGeodesic;return r.setEndPoints(e,n),r.surfaceDistance},n={position:new d.CallbackProperty((()=>t[0]),!1),polyline:{positions:new d.CallbackProperty((function(){let e=[];e.push(t[0]);let n=d.Cartographic.fromCartesian(t[0]),r=d.Cartographic.fromCartesian(t[1]),i=d.Cartesian3.fromDegrees(d.Math.toDegrees(n.longitude),d.Math.toDegrees(n.latitude),r.height);return e.push(i),e}),!1),material:d.Color.AQUA,depthFailMaterial:new d.PolylineOutlineMaterialProperty({color:d.Color.RED}),width:2},ellipse:{semiMinorAxis:new d.CallbackProperty(e,!1),semiMajorAxis:new d.CallbackProperty(e,!1),material:d.Color.GREEN.withAlpha(.7),depthFailMaterial:new d.PolylineOutlineMaterialProperty({color:d.Color.RED}),outline:!0,height:new d.CallbackProperty((()=>d.Cartographic.fromCartesian(t[1]).height.toFixed(2)),!1)}};return new d.Entity(n)}},ot=(t,e,n)=>{if("function"==typeof e){let r=t||J.cartesian3;e(Q(r,n))}};class at{constructor(t){this.coordinates=[],this.dynamicNodesPoint=[],this.drawEntities=null,this.endCallback=null,this.moveCallback=null,this.errCallback=null,this.returnPositions=[],this.viewer=t,this.handler=tt.getHandle(t,null).handler,this.dataSourceToo=new d.CustomDataSource("坐标采集工具-实体集合"),t.dataSources.add(this.dataSourceToo).then(),this.isDepthTest=t.scene.globe.depthTestAgainstTerrain}drawPoint({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r,o.setInputAction((function(n){let r=i.viewer.scene.pickPosition(n.position);d.defined(r)&&(i.drawShapeEnd(),ot(t,e,[r]))}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((function(t){let e=i.viewer.scene.pickPosition(t.endPosition);"function"==typeof n&&n(e)}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((()=>{i.drawShapeErrorCallback(null)}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawLine({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r,o.setInputAction((n=>{let r=i.viewer.scene.pickPosition(n.position);d.defined(r)&&(i.dynamicNodesPoint.push(it.createPoint(r)),i.returnPositions=Q(t,i.coordinates),i.drawEntities||(i.drawEntities=i.dataSourceToo.entities.add({polyline:{positions:new d.CallbackProperty((function(){return i.coordinates}),!1),width:12,clampToGround:!0,arcType:d.ArcType.RHUMB,material:new nt(d.Color.GREEN)}})),i.coordinates.length>=2?(ot(t,e,i.coordinates),i.drawShapeEnd()):i.coordinates.push(r))}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((t=>{let e=i.viewer.scene.pickPosition(t.endPosition);d.defined(e)&&(1===i.coordinates.length&&i.coordinates.push(e),i.coordinates.length>=2&&(i.coordinates.pop(),i.coordinates.push(e)),"function"==typeof n&&n(i.coordinates))}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((()=>{i.coordinates.pop(),i.coordinates.length>=1?ot(t,e,i.coordinates):i.drawShapeErrorCallback(null),i.drawShapeEnd()}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawPolyLine({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r,o.setInputAction((e=>{let n=i.viewer.scene.pickPosition(e.position);d.defined(n)&&(i.dynamicNodesPoint.push(it.createPoint(n)),i.coordinates.push(n),i.returnPositions=Q(t,i.coordinates),i.drawEntities||(i.drawEntities=i.dataSourceToo.entities.add({polyline:{positions:new d.CallbackProperty((function(){return i.coordinates}),!1),width:12,clampToGround:!0,arcType:d.ArcType.RHUMB,material:new nt(d.Color.GREEN)}})))}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((t=>{let e=i.viewer.scene.pickPosition(t.endPosition);d.defined(e)&&(1===i.coordinates.length&&i.coordinates.push(e),i.coordinates.length>=2&&(i.coordinates.pop(),i.coordinates.push(e)),"function"==typeof n&&n(i.coordinates))}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((()=>{i.coordinates.pop(),i.coordinates.length>=1?ot(t,e,i.coordinates):i.drawShapeErrorCallback(null),i.drawShapeEnd()}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawTriangle({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r;let a,s=[];o.setInputAction((n=>{let r=i.viewer.scene.pickPosition(n.position);d.defined(r)&&(i.dynamicNodesPoint.push(it.createPoint(r)),s.push(r),i.coordinates.push(r),i.drawEntities||(a=new d.CallbackProperty((function(){return i.coordinates}),!1),i.drawEntities=i.dataSourceToo.entities.add({polyline:{positions:a,width:12,clampToGround:!0,arcType:d.ArcType.RHUMB,material:new nt(d.Color.GREEN)}})),3===s.length&&(ot(t,e,s),i.drawShapeEnd()))}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((e=>{let r=i.viewer.scene.pickPosition(e.endPosition);d.defined(r)&&(1===i.coordinates.length&&i.coordinates.push(r),i.coordinates.length>=2&&(i.coordinates.pop(),i.coordinates.push(r),i.returnPositions=Q(t,i.coordinates)),"function"==typeof n&&n(i.coordinates))}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((()=>{i.drawShapeEnd(),s.length>=2?ot(t,e,s):i.drawShapeErrorCallback(null)}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawPolygon({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r;let a=[];o.setInputAction((e=>{let n=i.viewer.scene.pickPosition(e.position);d.defined(n)&&(i.dynamicNodesPoint.push(it.createPoint(n)),a.push(JSON.parse(JSON.stringify(n))),i.coordinates.push(n),i.returnPositions=Q(t,i.coordinates),2===i.dynamicNodesPoint.length&&(i.drawEntities||(i.drawEntities=i.dataSourceToo.entities.add(it.createLightingPolygon(i.coordinates)))))}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((t=>{let e=i.viewer.scene.pickPosition(t.endPosition);if(d.defined(e)&&(i.coordinates.pop(),i.coordinates.push(e),"function"==typeof n)){let t=JSON.parse(JSON.stringify(a));t.push(JSON.parse(JSON.stringify(e))),n(t)}}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((function(){i.drawShapeEnd(),a.length>=2?(a.push(a[0]),ot(t,e,a)):i.drawShapeErrorCallback(null)}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawCircle({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r;let a=null,s=null,l=0;o.setInputAction((t=>{let n=i.viewer.scene.pickPosition(t.position);d.defined(n)&&(i.dynamicNodesPoint.push(it.createPoint(n)),s?("function"==typeof e&&e({Center:s,EndPoint:n,Radius:l}),i.drawShapeEnd()):s=n)}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((t=>{let e=i.viewer.scene.pickPosition(t.endPosition);if(d.defined(e)&&s){let t=i.viewer.scene.globe.ellipsoid.cartesianToCartographic(s),r=i.viewer.scene.globe.ellipsoid.cartesianToCartographic(e),o=new d.EllipsoidGeodesic(t,r);l=o.surfaceDistance,"function"==typeof n&&n({Center:s,EndPoint:e,Radius:l}),a||(a=new d.CallbackProperty((function(){return l}),!1)),i.drawEntities||(i.drawEntities=i.dataSourceToo.entities.add({position:s,name:"Red ellipse on surface",ellipse:{semiMinorAxis:a,semiMajorAxis:a,material:d.Color.RED.withAlpha(.5)}}))}}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((t=>{i.drawShapeErrorCallback(null)}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawRectangle({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r;let a,s=[],l=[];o.setInputAction((n=>{let r=i.viewer.scene.pickPosition(n.position);d.defined(r)&&(i.dynamicNodesPoint.push(it.createPoint(r)),s.push(r),1===s.length&&(i.drawEntities||(a=new d.CallbackProperty((function(){return new d.PolygonHierarchy(l)}),!1),i.drawEntities=i.dataSourceToo.entities.add({polygon:{hierarchy:a,material:new d.ColorMaterialProperty(d.Color.LIGHTSKYBLUE.withAlpha(.3)),heightReference:d.HeightReference.NONE}}))),2===s.length&&(s[1]=r,l=K(s[0],s[1]),ot(t,e,l),i.drawShapeEnd()))}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((e=>{let r=i.viewer.scene.pickPosition(e.endPosition);1===s.length&&r&&(l=K(s[0],r),"function"==typeof n&&n(Q(t,l)))}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((function(){i.drawShapeErrorCallback(null)}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawInclinedRectangle({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i,o=this,a=o.drawShapeStart();o.endCallback=e,o.moveCallback=n,o.errCallback=r,a.setInputAction((n=>{let r=o.viewer.scene.pickPosition(n.position);d.defined(r)&&(o.dynamicNodesPoint.push(it.createPoint(r)),o.coordinates.length<2&&o.coordinates.push(r),2===o.dynamicNodesPoint.length&&(o.drawEntities||(i=new d.CallbackProperty((function(){return new d.PolygonHierarchy(o.coordinates)}),!1),o.drawEntities=o.dataSourceToo.entities.add({polygon:{hierarchy:i,material:new d.ColorMaterialProperty(d.Color.LIGHTSKYBLUE.withAlpha(.3)),heightReference:d.HeightReference.NONE}}))),3===o.dynamicNodesPoint.length&&(ot(t,e,o.coordinates),o.drawShapeEnd()))}),d.ScreenSpaceEventType.LEFT_CLICK),a.setInputAction((t=>{let e=o.viewer.scene.pickPosition(t.endPosition);if(d.defined(e))if(2===o.coordinates.length){let t=new d.Cartesian3,n=new d.Cartesian3;Z(o.coordinates[0],o.coordinates[1],e,t,n),o.coordinates.push(t,n)}else if(o.coordinates.length>2){o.coordinates.pop(),o.coordinates.pop();let t=new d.Cartesian3,r=new d.Cartesian3;Z(o.coordinates[0],o.coordinates[1],e,t,r),o.coordinates.push(t),o.coordinates.push(r),"function"==typeof n&&n(o.coordinates)}}),d.ScreenSpaceEventType.MOUSE_MOVE),a.setInputAction((function(){o.drawShapeErrorCallback(null)}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawHeightDistinct({coordinateType:t,endCallback:e,moveCallback:n,errCallback:r}){let i=this,o=i.drawShapeStart();i.endCallback=e,i.moveCallback=n,i.errCallback=r,o.setInputAction((n=>{let r=i.viewer.scene.pickPosition(n.position);d.defined(r)&&(0==i.coordinates.length?(i.dynamicNodesPoint.push(it.createPoint(r)),i.coordinates.push(r),i.coordinates.push(r),i.dataSourceToo.entities.add(it.createHeightEllipse(i.coordinates)),i.dataSourceToo.entities.add(it.PointLabelEntity(i.coordinates[0],new d.CallbackProperty((()=>O.getHeight(i.coordinates)+"米"),!1)))):(ot(t,e,i.coordinates),i.drawShapeEnd(),o.destroy()))}),d.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction((t=>{let e=i.viewer.scene.pickPosition(t.endPosition);d.defined(e)&&2===i.coordinates.length&&(i.coordinates[1]=e),"function"==typeof n&&n(i.coordinates)}),d.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction((()=>{0===i.coordinates.length&&ot(t,e,i.coordinates),i.drawShapeEnd(),o.destroy()}),d.ScreenSpaceEventType.RIGHT_CLICK)}drawYPlan({position:t,normal:e,dimensions:n,endCallback:r,moveCallback:i,errCallback:o}){let a,s=this,l=s.drawShapeStart();s.endCallback=r,s.moveCallback=i,s.errCallback=o;let u=0,c=new d.ClippingPlane(e,0);s.drawEntities=s.dataSourceToo.entities.add({position:t,plane:{dimensions:n,material:d.Color.BLUE.withAlpha(.5),plane:new d.CallbackProperty(function(t){return function(){return t.distance=u,t}}(c),!1),outline:!0,outlineColor:d.Color.BLUE}}),s.drawEntities.drawYPlan="drawYPlan",l.setInputAction((t=>{let e=s.viewer.scene.pick(t.position);d.defined(e)&&d.defined(e.id)&&d.defined(e.id.plane)&&"drawYPlan"==e.id.drawYPlan&&(a=e.id.plane,a.material=d.Color.RED.withAlpha(.5),a.outlineColor=d.Color.RED,s.viewer.scene.screenSpaceCameraController.enableInputs=!1)}),d.ScreenSpaceEventType.LEFT_DOWN),l.setInputAction((()=>{d.defined(a)&&(a.material=d.Color.BLUE.withAlpha(.5),a.outlineColor=d.Color.BLUE,a=void 0),"function"==typeof r&&r(u),s.viewer.scene.screenSpaceCameraController.enableInputs=!0}),d.ScreenSpaceEventType.LEFT_UP),l.setInputAction((t=>{if(d.defined(a)){let e=t.startPosition.y-t.endPosition.y;u+=e}}),d.ScreenSpaceEventType.MOUSE_MOVE),l.setInputAction((()=>{s.drawShapeErrorCallback(null)}),d.ScreenSpaceEventType.RIGHT_CLICK)}callStop(){this.returnPositions.length&&this.endCallback&&(this.returnPositions.pop(),this.endCallback(this.returnPositions)),this.drawShapeEnd()}drawShapeErrorCallback(t){let e=this;e.drawShapeEnd(),"function"==typeof e.errCallback&&e.errCallback(t)}drawShapeStart(){let t=this;return t.drawShapeEnd(),window.document.body.style.cursor="crosshair",t.handler=tt.getHandle(t.viewer,t.drawShapeErrorCallback).handler,t.isDepthTest=t.viewer.scene.globe.depthTestAgainstTerrain,t.isDepthTest||(t.viewer.scene.globe.depthTestAgainstTerrain=!0,console.log("%c自动开启深度检测！","color: #43bb88;")),t.handler}drawShapeEnd(){let t=this;window.document.body.style.cursor="auto",t.clearDrawEntity(),t.viewer.scene.globe.depthTestAgainstTerrain=t.isDepthTest,t.handler.isDestroyed()||t.handler.destroy(),t.endCallback=Function,t.moveCallback=Function,t.errCallback=Function}clearDrawEntity(){let t=this;t.coordinates=[],t.dataSourceToo.entities.removeAll(),t.dynamicNodesPoint=[],t.drawEntities=null}}let st={initRootDom(t="MapContainer"){let e=document.getElementById(t);if(e){e.style.cssText="",e.innerHTML="",e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style.display="flex",e.style.minWidth="500px",e.style.minHeight="400px";let t=document.createElement("div"),n=document.createElement("div");t.setAttribute("id","viewer3DDom"),n.setAttribute("id","viewer2DDom"),t.style.height="100%",n.style.height="100%",t.style.width="100%",n.style.width="100%",t.style.display="inline-block",n.style.display="none",e.appendChild(t),e.appendChild(n)}},initCesiumMapLink23d(){let t=document.getElementById("viewer2DDom"),e=document.getElementById("viewer3DDom");t&&(t.style.display="inline-block",t.style.width="50%"),e&&(e.style.display="inline-block",e.style.width="50%")},closeCesiumMapLink23d(){let t=document.getElementById("viewer2DDom"),e=document.getElementById("viewer3DDom");t&&(t.style.display="none",t.style.width="100%"),e&&(e.style.display="inline-block",e.style.width="100%")},initMapLink23d(){let t=document.getElementById("MapContainer"),e=document.getElementById("ol-container"),n=document.getElementById("viewer3DDom");e||(e=document.createElement("div"),e.id="ol-container",t&&t.appendChild(e)),e.style.cssText="\n            width: 50%;\n            height: 100%;\n            display: inline-block;\n            ",n.style.cssText="\n            width: 50%;\n            height: 100%;\n            "},closeOLMapLink23d(){let t=document.getElementById("ol-container"),e=document.getElementById("viewer3DDom");t&&(t.style.cssText="",t.style.display="none"),e&&(e.style.width="100%",e.style.display="inline-block")},initOverviewMapDom(){let t=document.getElementById("MapContainer"),e=document.getElementById("ol-container");e||(e=document.createElement("div"),e.id="ol-container",t&&t.appendChild(e)),e.style.cssText="\n            position: absolute;\n            z-index: 99999px;\n            bottom: 10px;\n            right: 30px;\n            height: 160px;\n            width: 300px;\n            border-radius: 8px;\n            padding: 5px;\n            border: 2px solid rgba(255, 255, 255, 0.637);",e.style.display="inline"},closeOverviewMapDom(){let t=document.getElementById("ol-container");t&&(t.style.display="none")}};function lt(){return{homeButton:!1,fullscreenButton:!1,sceneModePicker:!1,clockViewModel:new d.ClockViewModel,infoBox:!1,geocoder:!1,sceneMode:d.SceneMode.SCENE2D,navigationHelpButton:!1,animation:!1,timeline:!1,baseLayerPicker:!1}}function ut(){return{animation:!1,homeButton:!1,geocoder:!1,baseLayerPicker:!1,timeline:!1,fullscreenButton:!1,scene3DOnly:!0,infoBox:!0,sceneModePicker:!1,navigationInstructionsInitiallyVisible:!1,navigationHelpButton:!1,selectionIndicator:!1,vrButton:!1,orderIndependentTranslucency:!1,shadows:!1,shouldAnimate:!0,contextOptions:{webgl:{requestWebgl2:!0,alpha:!0,preserveDrawingBuffer:!0}}}}async function ct(t,e){t.imageryLayers.removeAll();let n=Y.getBaseLayer();n&&await N.awaitWrap(e.addData(n)),t.scene.skyAtmosphere.show=!0,t.scene.globe.show=!0;for(let t=0;t<Y.getAllSources().length;t++){let r=Y.getAllSources()[t];if(r.defaultLoad&&"layer"===r.dataType){if(n&&r.pid===n.pid)continue;await N.awaitWrap(e.addData(r))}}}async function ht(t,e){t.imageryLayers.removeAll();let n=Y.getBaseTerrain();n&&await N.awaitWrap(e.addData(n));let r=Y.getBaseLayer();r&&await N.awaitWrap(e.addData(r)),t.scene.skyAtmosphere.show=!0,t.scene.globe.show=!0;const i=Y.getAllSources();for(let t=0;t<i.length;t++){let n=i[t];if(n.defaultLoad&&"layer"===n.dataType){if(r&&n.pid===r.pid)continue;await N.awaitWrap(e.addData(n))}}for(let t=0;t<i.length;t++){let r=i[t];if(r.defaultLoad&&"layer"!==r.dataType){if(n&&r.pid===n.pid)continue;await N.awaitWrap(e.addData(r))}}}function pt(t){let e=Y.config;t.scene.skyAtmosphere.show=!1,t.scene.globe.show=!1,t.scene.globe.baseColor=d.Color.BLACK,t._cesiumWidget._creditContainer.style.display="none",t.camera.DEFAULT_VIEW_RECTANGLE=new d.Cartographic(e.homeView.longitude,e.homeView.latitude,e.homeView.height),t.scene.camera.setView({destination:d.Cartesian3.fromDegrees(e.homeView.longitude,e.homeView.latitude,e.homeView.height),orientation:{heading:e.homeView.headingRadians,pitch:e.homeView.pitchRadians,roll:e.homeView.rollRadians}}),t.scene.fxaa=!0,t.scene.postProcessStages.fxaa.enabled=!0}function ft(t){let e=document.getElementById("viewer2DDom");e&&(e.style.display="none"),t.scene.screenSpaceCameraController.enableRotate=!1,t.scene.screenSpaceCameraController.enableTranslate=!1,t.scene.screenSpaceCameraController.enableZoom=!1,t.scene.screenSpaceCameraController.enableTilt=!1,t.scene.screenSpaceCameraController.enableLook=!1}function dt(t,e){let n,r;return function(){let i=new d.Cartesian2(Math.floor(t.canvas.clientWidth/2),Math.floor(t.canvas.clientHeight/2)),o=t.scene.camera.pickEllipsoid(i);d.defined(o)&&(n=o),n&&(r=d.Cartesian3.distance(n,t.scene.camera.positionWC),e.scene.camera.lookAt(n,new d.Cartesian3(0,0,r)))}}const gt={getDom:()=>document.querySelector(".cesium-performanceDisplay-defaultContainer"),open(){const t=this.getDom();t?.style&&(t.style.display="flex")},close(){const t=this.getDom();t?.style&&(t.style.display="none")}};let yt={state:!1,open(){this.state=!0,gt.open()},close(){this.state=!1,gt.close()}};async function mt(t,e){if(await(W()?.thenLoadComplete()),!g().terrainProvider.availability)return console.log("地形为空（标准椭球）"),0;let n=g().terrainProvider,r=await d.sampleTerrainMostDetailed(n,[d.Cartographic.fromDegrees(t,e)]);return r[0]?.height||0}function vt(t,e){!t&&(t=g());let n=t.scene.canvas,r=t.scene.globe.ellipsoid,i=new d.ScreenSpaceEventHandler(n),o=0,a=0,s=0,l=0,u=!0,c=!0,h={};i.setInputAction((n=>{let i=t.camera.pickEllipsoid(n.endPosition,r);if(i){let e=t.scene.globe.ellipsoid.cartesianToCartographic(i);o=d.Math.toDegrees(e.longitude),a=d.Math.toDegrees(e.latitude),u=!0}else u=!1;t.terrainProvider instanceof d.EllipsoidTerrainProvider||c&&(c=!1,mt(o,a).then((function(t){c=!0,s=t}))),l=y(t)||3e6,h=m().orientation,u&&"function"==typeof e&&e(o,a,s,l,h)}),d.ScreenSpaceEventType.MOUSE_MOVE),i.setInputAction((function(){l=y(t)||3e6,u&&"function"==typeof e&&e(o,a,s,l,h)}),d.ScreenSpaceEventType.WHEEL)}function wt(t){!t&&(t=g());let e=Y.config,n={defaultResetView:new d.Cartographic(d.Math.toRadians(e.homeView.longitude||110),d.Math.toRadians(e.homeView.latitude||40),e.homeView.height||0),defaultHeadingPitchRoll:null,enableCompass:!0,enableZoomControls:!0,enableDistanceLegend:!0,enableCompassOuterRing:!0};(e.homeView.headingRadians||e.homeView.pitchRadians||e.homeView.rollRadians)&&(n.defaultHeadingPitchRoll=new d.HeadingPitchRoll(e.homeView.headingRadians||0,e.homeView.pitchRadians||0,e.homeView.rollRadians||0)),t.extend(d.viewerCesiumNavigationMixin,n)}function bt(){const t=window.ol;return new t.Map({target:"ol-container",layers:[new t.layer.Tile({source:new t.source.XYZ({url:"https://t5.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=1814d83db8edd8e5b799a0d2128a9685"})}),new t.layer.Tile({source:new t.source.XYZ({url:"https://webst02.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scale=1&style=8"})})],view:new t.View({center:[108.41,34],zoom:4,projection:"EPSG:4326"}),controls:t.control.defaults({zoom:!1})})}class xt{constructor(t,e){this.viewer=t,this.map=e,this.activateContainer="",this.initEvent(),this.activate(),this.addMapData()}initEvent(){const t=window.ol;this.viewer.scene.postRender.addEventListener((()=>{if("viewer"!==this.activateContainer)return;let e=this.viewer.camera.computeViewRectangle();if(!e)return void console.log("rec is undefined");let n=[d.Math.toDegrees(e.west),d.Math.toDegrees(e.south),d.Math.toDegrees(e.east),d.Math.toDegrees(e.north)];if(t.extent.isEmpty(n))return;const r=this.getPolygonByBbox(n);this.feature.setGeometry(new t.geom.Polygon(r)),this.map.getView().fit(n,{padding:[50,50,50,50]})}))}getPolygonByBbox(t){return[[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],[t[0],t[1]]]]}addMapData(){const t=window.ol;this.feature=new t.Feature(new t.geom.Polygon([[[75,20],[75,40],[120,40],[120,20],[75,20]]]));let e=new t.source.Vector({features:[this.feature]});this.layer=new t.layer.Vector({source:e,style:new t.style.Style({stroke:new t.style.Stroke({color:"red",width:1}),fill:new t.style.Fill({color:"rgba(255, 0, 0, 0.2)"})})}),this.map.addLayer(this.layer)}activate(){this.viewer.container.onmouseenter=()=>{this.activateContainer="viewer"},this.map.getViewport().onmouseenter=()=>{this.activateContainer="map"}}deactivate(){this.viewer.container.onmouseenter=void 0,this.map.getViewport().onmouseenter=void 0,this.activateContainer="",this.map.removeLayer(this.layer)}destroy(){this.deactivate()}}class _t{constructor(t,e){this.activateContainer=null,this.viewer=t,this.map=e,this.activateContainer=null,this.initEvent(),this.activate()}initEvent(){this.map.updateSize(),this.map.getView().on("change:center",(()=>{"map"==this.activateContainer&&this.scene2map()})),this.viewer.scene.postRender.addEventListener((t=>{"viewer"==this.activateContainer&&this.map2scene()}))}activate(){this.viewer.container.onmouseenter=()=>{this.activateContainer="viewer"},this.map.getViewport().onmouseenter=()=>{this.activateContainer="map"}}deactivate(){this.viewer.container.onmouseenter=null,this.map.getViewport().onmouseenter=null,this.activateContainer=null}map2scene(){let t=this.viewer.camera.computeViewRectangle();if(!t)return console.log("rec is undefined"),void this.setMapCenterByCameraPosition();let e=[d.Math.toDegrees(t.west),d.Math.toDegrees(t.south),d.Math.toDegrees(t.east),d.Math.toDegrees(t.north)];if(window.ol.extent.isEmpty(e))return console.log("ol 视角范围为 null"),void this.setMapCenterByCameraPosition();this.map.getView().fit(e)}scene2map(){let t=this.map.getView().calculateExtent(this.map.getSize());this.viewer.camera.setView({destination:d.Rectangle.fromDegrees(t[0],t[1],t[2],t[3])})}setMapCenterByCameraPosition(){let t=this.viewer.camera.position;const e=d.Cartographic.fromCartesian(t),n=d.Math.toDegrees(e.longitude),r=d.Math.toDegrees(e.latitude);this.map.getView().setCenter([n,r])}}class Et{constructor(t){this.viewer=t,this.sourcesItems=[],this.instancesMap=new Map}getInstancesByPid(t){return this.instancesMap.get(t)||null}getSourcesItemsByPid(t){return this.sourcesItems.find((e=>e.pid===t))||null}removeAll(){return this.sourcesItems.forEach((t=>{this.removeByPid(t.pid)})),!0}}let St={contents:[],startFlyCallbacks:[],endFlyCallbacks:[],start(t){const e=g();t&&(this.contents=[]),St.startFlyCallbacks.forEach((t=>{t()})),e.camera.flyTo({destination:this.contents[0],duration:2,complete:function(){e.camera.flyTo({destination:this.contents[1],complete:function(){St.endFlyCallbacks.forEach((t=>{t()}))}})}})},onStartFly(t){"function"==typeof t&&this.startFlyCallbacks.push(t)},onEndFly(t){"function"==typeof t&&this.endFlyCallbacks.push(t)}},Ct=null,Tt={addSnowEffect(){this.removeEffect(),Ct=new d.PostProcessStage({fragmentShader:this.getSnow_fs(),uniforms:{snowSize:function(){return.02},snowSpeed:function(){return 60}}}),g().scene.postProcessStages.add(Ct)},addRainEffect(){this.removeEffect(),Ct=new d.PostProcessStage({fragmentShader:this.getRain_fs()}),g().scene.postProcessStages.add(Ct)},addFogEffect(){this.removeEffect(),Ct=new d.PostProcessStage({fragmentShader:this.getFog_fs()}),g().scene.postProcessStages.add(Ct)},removeEffect(){Ct&&(g().scene.postProcessStages.remove(Ct),Ct=null)},getSnow_fs:()=>"uniform sampler2D colorTexture;\n          in vec2 v_textureCoordinates;\n          uniform float snowSpeed;\n          uniform float snowSize;\n          float snow(vec2 uv,float scale)\n          {\n              float time=czm_frameNumber/snowSpeed;\n              float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;\n              uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;\n              uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;\n              p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);\n              k=smoothstep(0.,k,sin(f.x+f.y)*snowSize);\n              return k*w;\n          }\n          void main(void){\n              vec2 resolution=czm_viewport.zw;\n              vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n              vec3 finalColor=vec3(0);\n              float c=0.;\n              c+=snow(uv,30.)*.0;\n              c+=snow(uv,20.)*.0;\n              c+=snow(uv,15.)*.0;\n              c+=snow(uv,10.);\n              c+=snow(uv,8.);\n              c+=snow(uv,6.);\n              c+=snow(uv,5.);\n              finalColor=(vec3(c));\n              out_FragColor=mix(texture(colorTexture,v_textureCoordinates),vec4(finalColor,1),.5);\n              }\n              ",getRain_fs:()=>"uniform sampler2D colorTexture;\nin vec2 v_textureCoordinates;\n\tfloat hash(float x){\n\t     return fract(sin(x*133.3)*13.13);\n\t }\n\tvoid main(void){\n\t     float time = czm_frameNumber / 600.0;\n\t     vec2 resolution = czm_viewport.zw; \n\t     vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n\t     vec3 c=vec3(.6,.7,.8); \n\t     float a=-.4;\n\t     float si=sin(a),co=cos(a);\n\t     uv*=mat2(co,-si,si,co);\n\t     uv*=length(uv+vec2(0,4.9))*.3+1.;\n\t     float v=1.-sin(hash(floor(uv.x*100.))*2.);\n\t     float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;\n\t     c*=v*b; \n\t     out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(c,1), 0.5); \n\t}",getFog_fs:()=>"uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  in vec2 v_textureCoordinates;\n  void main(void)\n  {\n      vec4 origcolor=texture(colorTexture, v_textureCoordinates);\n      vec4 fogcolor=vec4(0.8,0.8,0.8,0.5);\n      float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n      vec4 depthcolor=texture(depthTexture, v_textureCoordinates);\n      float f=(depthcolor.r-0.7)/0.2;\n      if(f<0.0) f=0.0;\n      else if(f>1.0) f=1.0;\n      out_FragColor = mix(origcolor,fogcolor,f);\n   }"};const It={fullScreen(){d.Fullscreen.requestFullscreen(document.body)},globalView(){g().camera.flyHome(1)},trueNorth(){const t=g();let e=d.Cartographic.fromCartesian(t.camera.position,d.Ellipsoid.WGS84,new d.Cartographic),n=t.scene.pickPosition(new d.Cartesian2(t.canvas.clientWidth/2,t.canvas.clientHeight/2)),r=d.Cartographic.fromCartesian(n,d.Ellipsoid.WGS84,new d.Cartographic);r.height=e.height;let i=d.Cartographic.toCartesian(r,d.Ellipsoid.WGS84,new d.Cartesian3);t.camera.setView({destination:i,orientation:{heading:d.Math.toRadians(0),pitch:t.camera.pitch,roll:t.camera.roll}})},verticalView(){const t=g();let e=d.Cartographic.fromCartesian(t.camera.position,d.Ellipsoid.WGS84,new d.Cartographic),n=t.scene.pickPosition(new d.Cartesian2(t.canvas.clientWidth/2,t.canvas.clientHeight/2)),r=d.Cartographic.fromCartesian(n,d.Ellipsoid.WGS84,new d.Cartographic);r.height=e.height;let i=d.Cartographic.toCartesian(r,d.Ellipsoid.WGS84,new d.Cartesian3);t.camera.setView({destination:i,orientation:{heading:t.camera.heading,pitch:d.Math.toRadians(-90),roll:t.camera.roll}})},lockVerticalView(){const t=g();t.scene.screenSpaceCameraController.enableTilt?(this.verticalView(),t.scene.screenSpaceCameraController.enableTilt=!1):t.scene.screenSpaceCameraController.enableTilt=!0},openPDF(){window.open("_blank").location.href="用户手册.pdf"},viewerCapture(t="jpg",e="scene.png",n=""){"jpg"===t&&function(t="",e="导出图片",n="",r){let i=document.getElementById(t);const o=document.querySelector("#navigationDiv");o?.style.setProperty("display","none");const a={scale:window.devicePixelRatio,useCORS:!0,allowTaint:!1};window.html2canvas(i,a).then((async t=>{let i="";n&&(t=await function(t,e){return new Promise((async(n,r)=>{let i=t.getContext("2d");i.fillStyle="rgba(255,255,255,0.34)",i.fillRect(t.width/2-300,10,600,40),i.font="30px 宋体",i.fillStyle="rgb(5,28,67)",i.textAlign="center",i.fillText(e,t.width/2,45),t.toBlob((async t=>{t&&function(t){return new Promise(((e,n)=>{let r=new FileReader;r.addEventListener("load",(()=>{let t=new Image;t.src=r.result,t.addEventListener("load",(()=>e(t)))})),r.readAsDataURL(t)}))}(t).then((t=>{let e=function(t){let e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}(t);n(e)}))}))}))}(t,n)),i=t.toDataURL("image/jpeg");let a=document.createElement("a");a.download=e,a.href=i,a.click(),o?.style.setProperty("display","block"),"function"==typeof r&&r()}))}("MapContainer",e,n)},viewerFlyToLonLat:(t,e,n=2e5)=>new Promise((r=>{g().camera.flyTo({destination:d.Cartesian3.fromDegrees(t,e,n),complete:()=>{r(!0)}})})),runFunByName(t){"fullScreen"===t?this.fullScreen():"trueNorth"===t?this.trueNorth():"verticalView"===t?this.verticalView():"lockVerticalView"===t?this.lockVerticalView():"surroundBrowse"===t||"surfaceTransparent"===t||("openPDF"===t?this.openPDF():"viewerCapture"===t?this.viewerCapture(""):"resetMap"===t||console.log("未识别的操作"))}};class At extends Et{constructor(t){super(t)}async addData(t){let e=t.properties,n=e.url,r=null;switch(e.scheme){case p["layer-wms"]:r=this.addWebMapTileServiceImageryProvider(n,t);break;case p["layer-tms"]:r=this.addImageryXYZ_TMS_Provider(n,t);break;case p["layer-wmts"]:r=this.addWebMapTileServiceImageryProvider(n,t);break;case p["layer-singleTileImagery"]:r=this.addSingleTileImagery(n,t);break;case p["layer-xyz-3857"]:r=this.addImageryXYZ_3857_Provider(n,t);break;case p["layer-xyz-4326"]:r=this.addImageryXYZ_4326_Provider(n,t);break;case p["layer-arcgisMapServer"]:r=this.addArcGisMapServerImagery(n,t);break;case p["layer-geoserver"]:r=this.addGeoserverWMS(n,t);break;case p.IonImageryProvider:{let e=await d.IonImageryProvider.fromAssetId(t.properties.assetId);r=this.addImageryProvider(e,t);break}default:return console.log("数据项，缺少图层类型标识符",e),null}return r}async flyToByPid(t){let e=this.getSourcesItemsByPid(t);if(!e)return!1;let n=e?.properties?.rectangle;return n?new Promise((()=>{this.viewer.camera.flyTo({destination:d.Rectangle.fromDegrees(n.west,n.south,n.east,n.north)})})):await It.viewerFlyToLonLat(110,40,15e6)}removeByPid(t){let e=!1,n=this.getInstancesByPid(t);return this.sourcesItems=this.sourcesItems.filter((e=>e.pid!==t)),n&&(e=this.viewer.imageryLayers.remove(n),n.isDestroyed()||n.destroy(),this.instancesMap.delete(t)),e}addSingleTileImagery(t,e){t=t||__webpack_require__(3700);let n=e.properties.layerRectangle;return n=Array.isArray(n)?d.Rectangle.fromDegrees(...n):d.Rectangle.MAX_VALUE,this.addImageryProvider(new d.SingleTileImageryProvider({url:t,rectangle:n,show:e.show||!0,tileWidth:e.properties.tileWidth||256,tileHeight:e.properties.tileHeight||256}),e)}addWebMapTileServiceImageryProvider(t,e){let n=e.properties.queryParameters||{},r=new d.Resource({url:t,queryParameters:n}),i=new d.WebMapTileServiceImageryProvider({layer:"",style:"",tileMatrixSetID:"",url:r,show:e.show||!0,format:"image/jpeg"});return this.addImageryProvider(i,e)}addImageryXYZ_TMS_Provider(t,e){let n=e.properties.queryParameters||{},r=new d.Resource({url:t,queryParameters:n}),i=new d.TileMapServiceImageryProvider({url:r,show:e.show||!0,minimumLevel:e.properties.minimumLevel||0,maximumLevel:e.properties.maximumLevel||22});return this.addImageryProvider(i,e)}addImageryXYZ_3857_Provider(t,e){let n=e.properties.queryParameters||{},r=new d.Resource({url:t,queryParameters:n}),i=d.Rectangle.MAX_VALUE;function o(t){return t*Math.PI/180}e.properties.rectangle&&(i=new d.Rectangle(o(e.properties.rectangle.west),o(e.properties.rectangle.south),o(e.properties.rectangle.east),o(e.properties.rectangle.north)));let a=new d.UrlTemplateImageryProvider({url:r,show:e.show||!0,tilingScheme:new d.WebMercatorTilingScheme,minimumLevel:e.properties.minimumLevel||0,maximumLevel:e.properties.maximumLevel||22,rectangle:i});return this.addImageryProvider(a,e)}addImageryXYZ_4326_Provider(t,e){let n=e.properties.queryParameters||{},r=new d.Resource({url:t,queryParameters:n}),i=new d.UrlTemplateImageryProvider({url:r,show:e.show||!0,tilingScheme:new d.GeographicTilingScheme({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1}),minimumLevel:e.properties.minimumLevel||0,maximumLevel:e.properties.maximumLevel||22});return this.addImageryProvider(i,e)}addArcGisMapServerImagery(t,e){let n=e.properties.queryParameters||{},r=new d.Resource({url:t,queryParameters:n}),i=new d.ArcGisMapServerImageryProvider({url:r,show:e.show||!0,enablePickFeatures:!1});return this.addImageryProvider(i,e)}addGeoserverWMS(t,e){let n=e.properties.queryParameters||{},r=new d.Resource({url:t,queryParameters:n});const i=new d.WebMapServiceImageryProvider({url:r,show:e.show||!0,layers:e.properties.layers,parameters:{service:"WMS",format:"image/png",transparent:!0}});return this.addImageryProvider(i,e)}addImageryProvider(t,e){const n=this.viewer.imageryLayers.addImageryProvider(t);return n&&(n.pid=e.pid,n.param=e,e.properties.baseLayer&&this.viewer.imageryLayers.lowerToBottom(n),this.instancesMap.set(e.pid,n),this.sourcesItems.push(e)),n}destroy(){return this.removeAll()}}class Pt extends Et{constructor(t){super(t),this.dataSourceToo=new d.CustomDataSource("工作区 geoJson - 标注点"),this.viewer.dataSources.add(this.dataSourceToo).then()}async addData(t){let e=t.pid,{longitude:n,latitude:r}=t.properties.position,i=t.properties.text_string,o=t.properties.image_path,a=this.dataSourceToo.entities.add({id:e,name:" mark",position:d.Cartesian3.fromDegrees(n,r),billboard:{image:o,width:15,height:15,scaleByDistance:new d.NearFarScalar(150,2,15e6,.5),disableDepthTestDistance:Number.POSITIVE_INFINITY,heightReference:d.HeightReference.RELATIVE_TO_GROUND,verticalOrigin:d.VerticalOrigin.BOTTOM},label:{text:i,font:"12pt bold monospace",fillColor:d.Color.WHITE,outlineColor:d.Color.BLACK,outlineWidth:4,style:d.LabelStyle.FILL_AND_OUTLINE,horizontalOrigin:d.HorizontalOrigin.LEFT,verticalOrigin:d.VerticalOrigin.BOTTOM,pixelOffset:new d.Cartesian2(20,0),disableDepthTestDistance:Number.POSITIVE_INFINITY,heightReference:d.HeightReference.RELATIVE_TO_GROUND}});return this.sourcesItems.push(t),this.instancesMap.set(e,a),a}async flyToByPid(t){let e=this.getInstancesByPid(t);return!!e&&this.viewer.flyTo(e,{offset:new d.HeadingPitchRange(0,-1.57,0)}).then((()=>!0)).catch((()=>!1))}removeByPid(t){let e=!1,n=this.instancesMap.get(t);return this.sourcesItems=this.sourcesItems.filter((e=>e.pid!==t)),n&&(e=this.dataSourceToo.entities.remove(n),this.instancesMap.delete(t)),e}destroy(){return this.removeAll()}}class kt extends Et{constructor(t){super(t)}async addData(t){let e,n=this.viewer.scene,r=t.properties,i=r.url,o=r.queryParameters||{},a=r.scheme||"CesiumTerrainProvider";if("default"===i)e=await d.createWorldTerrainAsync({requestWaterMask:!0,requestVertexNormals:!0});else{let t=new d.Resource({url:i,queryParameters:o});e="VRTheWorldTerrainProvider"===a?await d.VRTheWorldTerrainProvider.fromUrl(t,{credit:"Terrain data courtesy VT M?K"}):await d.CesiumTerrainProvider.fromUrl(t,{requestVertexNormals:!1,requestWaterMask:!1,credit:void 0})}return this.removeAll(),n.terrainProvider=e,this.sourcesItems.push(t),this.instancesMap.set(t.pid,e),e}async flyToByPid(t){let e=this.getSourcesItemsByPid(t);if(!e)return!1;let n=e?.properties?.rectangle;return n?new Promise((()=>{this.viewer.camera.flyTo({destination:d.Rectangle.fromDegrees(n.west,n.south,n.east,n.north)})})):await It.viewerFlyToLonLat(110,40,15e6)}removeByPid(t){return!!this.getSourcesItemsByPid(t)&&this.removeAll()}removeAll(){return this.viewer.scene.terrainProvider=new d.EllipsoidTerrainProvider({}),this.sourcesItems=[],this.instancesMap.clear(),!0}destroy(){return this.removeAll()}}class Ot extends Et{constructor(t){super(t),this.loadTileCallFunMap=new Map}async addData(t){let e=t.properties,n=e.url,r=e.queryParameters||{};this.viewer.scene.globe.depthTestAgainstTerrain=!0;let i=new d.Resource({url:n,queryParameters:r}),o={};for(const t in e)o[t]=e[t];let a=await d.Cesium3DTileset.fromUrl(i,o);this.instancesMap.set(t.pid,a),this.sourcesItems.push(t);let s=e.offset,l=s?.lon,u=s?.lat,c=s?.height;return s&&function(t,e=0,n=0,r=0){let i=d.Cartographic.fromCartesian(t.boundingSphere.center),o=d.Cartesian3.fromRadians(i.longitude,i.latitude,i.height),a=d.Cartesian3.fromRadians(i.longitude+e,i.latitude+n,i.height+r),s=d.Cartesian3.subtract(a,o,new d.Cartesian3);t.modelMatrix=d.Matrix4.fromTranslation(s)}(a,l,u,c),a=this.viewer.scene.primitives.add(a),a.loadProgress.addEventListener(((e,n)=>{for(let[r,i]of this.loadTileCallFunMap)i(t,e,n)})),a}async flyToByPid(t){let e=this.getInstancesByPid(t);return!!e&&this.viewer.flyTo(e,{offset:new d.HeadingPitchRange(0,-1.57,0)}).then((()=>!0)).catch((()=>!1))}removeByPid(t){let e=!1,n=this.getInstancesByPid(t);return this.sourcesItems=this.sourcesItems.filter((e=>e.pid!==t)),n&&!n.isDestroyed()&&(e=this.viewer.scene.primitives.remove(n),n.destroy(),this.instancesMap.delete(t)),e}destroy(){return this.removeAll()}}var Mt,Nt,Lt,Rt,Dt,Ft;!function(t){t[t.addData=0]="addData"}(Mt||(Mt={})),function(t){t[t.init=0]="init",t[t.hide=1]="hide",t[t.show=2]="show",t[t.destroy=3]="destroy"}(Nt||(Nt={})),function(t){t[t.LEFT_DOWN=0]="LEFT_DOWN",t[t.LEFT_UP=1]="LEFT_UP",t[t.LEFT_CLICK=2]="LEFT_CLICK",t[t.LEFT_DOUBLE_CLICK=3]="LEFT_DOUBLE_CLICK",t[t.RIGHT_DOWN=5]="RIGHT_DOWN",t[t.RIGHT_UP=6]="RIGHT_UP",t[t.RIGHT_CLICK=7]="RIGHT_CLICK",t[t.MIDDLE_DOWN=10]="MIDDLE_DOWN",t[t.MIDDLE_UP=11]="MIDDLE_UP",t[t.MIDDLE_CLICK=12]="MIDDLE_CLICK",t[t.MOUSE_MOVE=15]="MOUSE_MOVE",t[t.WHEEL=16]="WHEEL",t[t.PINCH_START=17]="PINCH_START",t[t.PINCH_END=18]="PINCH_END",t[t.PINCH_MOVE=19]="PINCH_MOVE"}(Lt||(Lt={})),function(t){t[t.LEFT_DRAG=0]="LEFT_DRAG",t[t.RIGHT_DRAG=1]="RIGHT_DRAG",t[t.MIDDLE_DRAG=2]="MIDDLE_DRAG",t[t.WHEEL=3]="WHEEL",t[t.PINCH=4]="PINCH"}(Rt||(Rt={})),function(t){t[t.addData=0]="addData",t[t.removeData=1]="removeData",t[t.changedData=2]="changedData"}(Dt||(Dt={})),function(t){t[t.global=0]="global",t[t.Viewer3D=1]="Viewer3D",t[t.Viewer2D=2]="Viewer2D",t[t.initOL=3]="initOL"}(Ft||(Ft={}));class jt{constructor(){this.listenCallbacks=[]}addEventListener(t,e,n){return!this.listenCallbacks.find((r=>r.listenType===t&&r.scope===e&&r.callback===n))&&(this.listenCallbacks.push({listenType:t,callback:n,scope:e}),!0)}raiseEvent(t,e,n){this.listenCallbacks.forEach((r=>{r.listenType===t&&r.scope===e&&"function"==typeof r.callback&&r.callback(n)}))}removeEventListener(t){return!!this.listenCallbacks.find((e=>e.callback===t))&&(this.listenCallbacks=this.listenCallbacks.filter((e=>e.callback!==t)),!0)}}class zt extends jt{constructor(){super()}}class Gt extends jt{constructor(){super()}}class Bt extends jt{constructor(){super()}}class Ut extends jt{constructor(){super()}}const qt={ScopeType:Ft,ListenType:{ConfigEventType:Mt,ViewerEventType:Nt,ScreenSpaceEventType:Lt,CameraEventType:Rt,DataEventType:Dt},configEvent:new zt,screenEvent:new Gt,sourceEvent:new Bt,viewerEvent:new Ut};var Wt,Vt,Ht,Yt,Xt,Zt,Kt,Jt,Qt,$t,te,ee,ne,re,ie=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},oe=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class ae{constructor(t,e,n=!1){Wt.add(this),Vt.set(this,void 0),Ht.set(this,void 0),Yt.set(this,void 0),Xt.set(this,!0),Zt.set(this,void 0),Kt.set(this,!1),Jt.set(this,void 0),Qt.set(this,""),$t.set(this,void 0),ie(this,Vt,g(),"f"),ie(this,Ht,t,"f"),ie(this,Zt,document.createElement("div"),"f"),oe(this,Zt,"f").style.minWidth="200px",oe(this,Zt,"f").style.minHeight="100px",e instanceof HTMLDivElement?ie(this,Jt,e,"f"):(ie(this,Qt,e,"f"),ie(this,Jt,document.createElement("div"),"f"));const r=oe(this,Jt,"f");if(r&&(r.style.display="none"),ie(this,Xt,n,"f"),ie(this,$t,oe(this,Wt,"m",ee).bind(this),"f"),oe(this,Ht,"f").position&&(ie(this,Yt,oe(this,Ht,"f").position.getValue(oe(this,Vt,"f").clock.currentTime),"f"),oe(this,Yt,"f")&&oe(this,Xt,"f"))){let t=S.formCartesian3(oe(this,Yt,"f"));mt(t.longitude,t.latitude).then((e=>{ie(this,Yt,d.Cartesian3.fromDegrees(t.longitude,t.latitude,e),"f")}))}oe(this,Wt,"m",te).call(this)}closeWindow(){oe(this,Kt,"f")&&(oe(this,Vt,"f").scene.postRender.removeEventListener(oe(this,Wt,"m",re).bind(this)),oe(this,Zt,"f").innerHTML="",oe(this,Zt,"f").remove(),ie(this,Kt,!1,"f"))}destroy(){this.closeWindow(),qt.screenEvent.removeEventListener(oe(this,$t,"f"))}}Vt=new WeakMap,Ht=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,Wt=new WeakSet,te=function(){let t=this;oe(this,Vt,"f").scene.postRender.addEventListener(oe(this,Wt,"m",re).bind(this)),qt.screenEvent.addEventListener(qt.ListenType.ScreenSpaceEventType.LEFT_CLICK,qt.ScopeType.Viewer3D,oe(t,$t,"f")),oe(this,Ht,"f").entityCollection.collectionChanged.addEventListener((function(e){void 0===e._entities._array.find((e=>e.id===oe(t,Ht,"f").id))&&t.destroy()}))},ee=function(t){let e=this;if(oe(e,Kt,"f"))return;let n=oe(e,Vt,"f").scene.pick(t.position);n&&n.id===oe(e,Ht,"f")&&oe(e,Wt,"m",ne).call(e)},ne=function(){ie(this,Kt,!0,"f"),oe(this,Zt,"f").classList.add("point-sample-label-container");let t=document.createElement("div");t.classList.add("point-sample-label-closeBtn"),t.innerHTML="×",t.addEventListener("click",this.closeWindow.bind(this),!1),oe(this,Zt,"f").appendChild(t);let e=document.createElement("div");e.classList.add("point-sample-label-text"),oe(this,Qt,"f")?e.innerText=oe(this,Qt,"f"):e.appendChild(oe(this,Jt,"f")),oe(this,Zt,"f").appendChild(e),oe(this,Vt,"f").cesiumWidget.container.appendChild(oe(this,Zt,"f"))},re=function(){const t=oe(this,Jt,"f");t&&(t.style.display="block");const e=oe(this,Vt,"f").scene.canvas.height,n=new d.Cartesian2;let r=oe(this,Yt,"f");d.SceneTransforms.wgs84ToWindowCoordinates(oe(this,Vt,"f").scene,r,n),oe(this,Zt,"f").style.bottom=e-n.y+100+"px",oe(this,Zt,"f").style.left=n.x+20+"px"};var se,le,ue,ce,he,pe=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},fe=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class de{constructor(t,e,n=!1){if(se.add(this),this.decoratorOpen=!1,le.set(this,!0),ue.set(this,void 0),this.viewer=g(),this.entity=t,pe(this,le,n,"f"),pe(this,ue,fe(this,se,"m",he).bind(this),"f"),this.entity.position&&(this.cartesian3Position=this.entity.position?.getValue(this.viewer.clock.currentTime),this.cartesian3Position&&fe(this,le,"f"))){let t=S.formCartesian3(this.cartesian3Position);mt(t.longitude,t.latitude).then((e=>{this.cartesian3Position=d.Cartesian3.fromDegrees(t.longitude,t.latitude,e)}))}fe(this,se,"m",ce).call(this)}destroy(){this.removeDecorator(),qt.screenEvent.removeEventListener(fe(this,ue,"f"))}}le=new WeakMap,ue=new WeakMap,se=new WeakSet,ce=function(){let t=this;this.viewer.scene.postRender.addEventListener(this.postRenderEvent.bind(this)),qt.screenEvent.addEventListener(qt.ListenType.ScreenSpaceEventType.LEFT_CLICK,qt.ScopeType.Viewer3D,fe(t,ue,"f")),this.entity.entityCollection.collectionChanged.addEventListener((function(e){void 0===e._entities._array.find((e=>e.id===t.entity.id))&&t.destroy()}))},he=function(t){let e=this;if(e.decoratorOpen)return;let n=e.viewer.scene.pick(t.position);n&&n.id===e.entity&&e.createDecorator()};class ge extends de{constructor(t,e={},n=!1){super(t,e,n),this.id=G.uuid(),this.title=e.title||"弹窗",this.html=e.html||"测试div",this.color="green","green"!==e.color&&"yellow"!==e.color||(this.color=e.color),this.container=document.createElement("div"),this.viewer.selectedEntityChanged.addEventListener((e=>{t?.id!==e?.id&&this.decoratorOpen&&(this.viewer.trackedEntity=void 0,this.removeDecorator())}))}postRenderEvent(){const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;let n=this.entity.position?.getValue(this.viewer.clock.currentTime);d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,n,e),this.container.style.position="absolute",this.container.style.bottom=t-e.y+50+"px",this.container.style.left=e.x-10+"px",this.container.classList.contains("device-status-container-green")&&"yellow"===this.color?(this.container.classList.remove("device-status-container-green"),this.container.classList.add("device-status-container-yellow")):this.container.classList.contains("device-status-container-yellow")&&"green"===this.color&&(this.container.classList.remove("device-status-container-yellow"),this.container.classList.add("device-status-container-green"));let r=this.container.querySelector(".device-title");r&&(r.innerHTML=this.title);let i=this.container.querySelector(".device-name");i&&(this.html instanceof HTMLElement?i.innerHTML="":i.innerHTML=this.html)}createDecorator(){if(this.decoratorOpen)return;this.decoratorOpen=!0,this.viewer.cesiumWidget.container.appendChild(this.container),this.container.classList.add("device-status-container"),this.container.classList.add(`device-status-container-${this.color}`);let t=document.createElement("div");t.classList.add("device-title"),this.container.appendChild(t),t.innerHTML=this.title;let e=document.createElement("div");e.classList.add("device-name"),this.container.appendChild(e),this.html instanceof HTMLElement?e.appendChild(this.html):e.innerHTML=this.html}removeDecorator(){this.decoratorOpen&&(this.decoratorOpen=!1,this.container.innerHTML="",this.container.remove())}}class ye extends de{constructor(t,e={},n=!1){super(t,e,n),this.id=G.uuid(),this.title=e.title||"弹窗",this.html=e.html||"测试div",this.container=document.createElement("div")}postRenderEvent(){const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;let n=this.cartesian3Position;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,n,e),this.container.style.position="absolute",this.container.style.bottom=t-e.y+90+"px",this.container.style.left=e.x-175+"px"}createDecorator(){if(this.decoratorOpen)return;this.decoratorOpen=!0,this.viewer.cesiumWidget.container.appendChild(this.container);let t=this.id;this.container.innerHTML=`\n        <div class="popup3d1-container">\n          <div class="popup3d1-header">\n            <span class="popup3d1-header-title">${this.title}</span>\n            <span class="popup3d1-close" title="关闭" id="${t}-close">×</span>\n          </div>\n          <div class="popup3d1-body">${this.html}</div>\n        </div>\n        `;let e=document.getElementById(t+"-close");e&&e.addEventListener("click",this.removeDecorator.bind(this),!1)}removeDecorator(){this.decoratorOpen&&(this.decoratorOpen=!1,this.container.remove())}}class me extends de{constructor(t,e={},n=!1){super(t,e,n),this.id=G.uuid(),this.title=e.title||"弹窗",this.html=e.html||"测试div",this.container=document.createElement("div")}postRenderEvent(){const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;let n=this.cartesian3Position;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,n,e),this.container.style.position="absolute",this.container.style.bottom=t-e.y+90+"px",this.container.style.left=e.x+30+"px"}createDecorator(){if(this.decoratorOpen)return;this.decoratorOpen=!0,this.viewer.cesiumWidget.container.appendChild(this.container);let t=this.id;this.container.innerHTML=`\n        <div class="popup3d2-container" v-if="show">\n            <div class="popup3d2-header">\n                <span class="popup3d2-title">${this.title}</span>\n                <span class="popup3d2-close" title="关闭" id="${t}-close">×</span>\n            </div>\n            <div class="popup3d1-body">${this.html}</div>\n        </div>\n        `;let e=document.getElementById(t+"-close");e&&e.addEventListener("click",this.removeDecorator.bind(this),!1)}removeDecorator(){this.decoratorOpen&&(this.decoratorOpen=!1,this.container.remove())}}var ve,we,be,xe,_e,Ee,Se,Ce,Te,Ie,Ae,Pe,ke,Oe,Me,Ne=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},Le=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class Re{constructor(t,e,n=!1){ve.add(this),we.set(this,void 0),be.set(this,void 0),xe.set(this,void 0),_e.set(this,!0),Ee.set(this,void 0),Se.set(this,void 0),Ce.set(this,!1),Te.set(this,void 0),Ie.set(this,void 0),Ae.set(this,void 0),Ne(this,we,g(),"f"),Ne(this,be,t,"f"),Ne(this,Se,document.createElement("div"),"f"),Ne(this,Te,e,"f"),Ne(this,_e,n,"f"),Ne(this,Ae,Le(this,ve,"m",ke).bind(this),"f"),Le(this,be,"f").billboard=new d.BillboardGraphics({image:__webpack_require__(9196),scaleByDistance:new d.NearFarScalar(500,1,1200,.8),distanceDisplayCondition:new d.DistanceDisplayCondition(0,1e4),verticalOrigin:d.VerticalOrigin.BOTTOM}),Le(this,ve,"m",Pe).call(this)}createDom(){Ne(this,Ce,!0,"f"),Le(this,Se,"f").classList.add("video-popup3d-container");let t=document.createElement("div");t.classList.add("video-popup3d-header"),Le(this,Se,"f").appendChild(t);let e=document.createElement("span");e.innerHTML=Le(this,Te,"f").title,e.classList.add("video-popup3d-header-title"),t.appendChild(e);let n=document.createElement("span");n.innerHTML="×",n.classList.add("video-popup3d-close"),t.appendChild(n),n.addEventListener("click",this.closeWindow.bind(this),!1);let r=document.createElement("div");r.classList.add("video-popup3d-body"),Le(this,Se,"f").appendChild(r),Ne(this,Ee,r,"f"),Le(this,we,"f").cesiumWidget.container.append(Le(this,Se,"f")),n.onclick=t=>{this.closeWindow()},Le(this,ve,"m",Oe).call(this)}closeWindow(){Le(this,Ce,"f")&&(Le(this,Ie,"f")&&Le(this,Ie,"f"),Le(this,we,"f").scene.postRender.removeEventListener(Le(this,ve,"m",Me).bind(this)),Le(this,Se,"f").innerHTML="",Le(this,Se,"f").remove(),Ne(this,Ce,!1,"f"))}destroy(){this.closeWindow(),qt.screenEvent.removeEventListener(Le(this,Ae,"f"))}}we=new WeakMap,be=new WeakMap,xe=new WeakMap,_e=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Ce=new WeakMap,Te=new WeakMap,Ie=new WeakMap,Ae=new WeakMap,ve=new WeakSet,Pe=function(){let t=this;Le(this,we,"f").scene.postRender.addEventListener(Le(this,ve,"m",Me).bind(this)),qt.screenEvent.addEventListener(qt.ListenType.ScreenSpaceEventType.LEFT_CLICK,qt.ScopeType.Viewer3D,Le(t,Ae,"f")),Le(this,be,"f").entityCollection.collectionChanged.addEventListener((function(e){void 0===e._entities._array.find((e=>e.id===Le(t,be,"f").id))&&t.destroy()}))},ke=function(t){let e=this;if(Le(e,Ce,"f"))return;let n=Le(e,we,"f").scene.pick(t.position);n&&n.id===Le(e,be,"f")&&e.createDom()},Oe=function(){let t=this,e=document.createElement("video");e.classList.add("video-js"),e.classList.add("vjs-default-skin"),e.setAttribute("controls",String(!0)),e.setAttribute("autoplay","autoplay"),e.setAttribute("preload","auto"),e.setAttribute("muted",String(!0)),Le(t,Ee,"f").appendChild(e);let n="vid"+(new Date).getTime();e.setAttribute("id",n);let r=window.videojs(n);r.ready((()=>{let e=[{src:Le(t,Te,"f").url,type:"m3u8"===Le(t,Te,"f").type?"application/x-mpegURL":null}];r.src(e),r.load()})),Ne(t,Ie,r,"f")},Me=function(){const t=Le(this,we,"f").scene.canvas.height,e=new d.Cartesian2;if(!Le(this,be,"f").position)return console.log("entity.position is undefined"),this.closeWindow();Ne(this,xe,Le(this,be,"f").position.getValue(Le(this,we,"f").clock.currentTime),"f"),d.SceneTransforms.wgs84ToWindowCoordinates(Le(this,we,"f").scene,Le(this,xe,"f"),e),Le(this,Se,"f").style.bottom=t-e.y+100+"px",Le(this,Se,"f").style.left=e.x+20+"px"};class De{constructor(t,e={}){this.isStart=!1,this.viewer=g(),this.entity=t,this.entity.show=!1,this.style=Object.assign(this.getDefaultStyle(),e),this.init(),this.entity.entityCollection.collectionChanged.addEventListener((t=>{let e=this;void 0===t._entities._array.find((t=>t.id===e.entity.id))&&e.remove()}))}init(){this.particleSystem=this.createParticleSystem();let t=this.viewer.scene.primitives.add(this.particleSystem);return this.addEvent(),this.isStart=!0,!!t}remove(){return this.removeEvent(),this.viewer.scene.primitives.remove(this.particleSystem),this.viewer.entities.remove(this.entity),this.isStart=!1,!0}updateStyle(t){this.particleSystem.startScale=t.startScale||this.style.startScale,this.particleSystem.endScale=t.endScale||this.style.endScale,this.particleSystem.minimumParticleLife=t.minimumParticleLife||this.style.minimumParticleLife,this.particleSystem.maximumParticleLife=t.maximumParticleLife||this.style.maximumParticleLife,this.particleSystem.minimumSpeed=t.minimumSpeed||this.style.minimumSpeed,this.particleSystem.maximumSpeed=t.maximumSpeed||this.style.maximumSpeed,this.particleSystem.maximumSpeed=t.particleSize?new d.Cartesian2(t.particleSize,t.particleSize):new d.Cartesian2(this.style.particleSize,this.style.particleSize),this.particleSystem.maximumSpeed=t.emissionRate||this.style.emissionRate}getDefaultStyle(){return{image:__webpack_require__(9919),startScale:3,endScale:1.5,minimumParticleLife:1.5,maximumParticleLife:1.8,minimumSpeed:7,maximumSpeed:9,particleSize:2,emissionRate:200}}addEvent(){this.emitterModelMatrix=new d.Matrix4,this.translation=new d.Cartesian3,this.rotation=new d.Quaternion,this.hpr=new d.HeadingPitchRoll,this.trs=new d.TranslationRotationScale,this.viewer.scene.preUpdate.addEventListener(this.preUpdateEvent,this)}removeEvent(){this.viewer.scene.preUpdate.removeEventListener(this.preUpdateEvent,this),this.emitterModelMatrix=void 0,this.translation=void 0,this.rotation=void 0,this.hpr=void 0,this.trs=void 0}preUpdateEvent(t){this.particleSystem.modelMatrix=this.entity.computeModelMatrix(t,new d.Matrix4),this.hpr=d.HeadingPitchRoll.fromDegrees(0,0,0,this.hpr),this.trs.translation=d.Cartesian3.fromElements(0,0,0,this.translation),this.trs.rotation=d.Quaternion.fromHeadingPitchRoll(this.hpr,this.rotation),this.particleSystem.emitterModelMatrix=d.Matrix4.fromTranslationRotationScale(this.trs,this.emitterModelMatrix)}createParticleSystem(){return new d.ParticleSystem({image:this.style.image,startColor:new d.Color(1,1,1,1),endColor:new d.Color(.5,0,0,0),startScale:this.style.startScale,endScale:this.style.endScale,minimumParticleLife:this.style.minimumParticleLife,maximumParticleLife:this.style.maximumParticleLife,minimumSpeed:this.style.minimumSpeed,maximumSpeed:this.style.maximumSpeed,imageSize:new d.Cartesian2(this.style.particleSize,this.style.particleSize),emissionRate:this.style.emissionRate,lifetime:16,loop:!0,emitter:new d.ConeEmitter(d.Math.toRadians(45)),sizeInMeters:!0})}}class Fe{constructor(t,e={}){this.gravityScratch=new d.Cartesian3,this.isStart=!1,this.viewer=g(),this.entity=t,this.entity.show=!1,this.style=Object.assign(this.getDefaultStyle(),e),this.init(),this.entity.entityCollection.collectionChanged.addEventListener((t=>{let e=this;void 0===t._entities._array.find((t=>t.id===e.entity.id))&&e.remove()}))}init(){this.particleSystem=this.createParticleSystem();let t=this.viewer.scene.primitives.add(this.particleSystem);return this.addEvent(),this.isStart=!0,!!t}updateOrientation(t){let e=this.getHeadingByOString(t);if("无风"===e)return this.style.heading=180,void(this.style.pitch=0);this.style.heading=e+90,this.style.pitch=60}updateStyle(t){this.particleSystem.startScale=t.startScale||this.style.startScale,this.particleSystem.endScale=t.endScale||this.style.endScale,this.particleSystem.minimumParticleLife=t.minimumParticleLife||this.style.minimumParticleLife,this.particleSystem.maximumParticleLife=t.maximumParticleLife||this.style.maximumParticleLife,this.particleSystem.minimumSpeed=t.minimumSpeed||this.style.minimumSpeed,this.particleSystem.maximumSpeed=t.maximumSpeed||this.style.maximumSpeed,this.particleSystem.imageSize=t.particleSize?new d.Cartesian2(t.particleSize,t.particleSize):new d.Cartesian2(this.style.particleSize,this.style.particleSize),this.particleSystem.emissionRate=t.emissionRate||this.style.emissionRate}remove(){return this.removeEvent(),this.viewer.scene.primitives.remove(this.particleSystem),this.viewer.entities.remove(this.entity),this.isStart=!1,!0}getDefaultStyle(){return{image:__webpack_require__(2145),emissionRate:40,gravity:-.54,minimumParticleLife:5,maximumParticleLife:5,minimumSpeed:9,maximumSpeed:9.5,startScale:1,endScale:7,particleSize:1,heading:180,pitch:0}}addEvent(){this.emitterModelMatrix=new d.Matrix4,this.translation=new d.Cartesian3,this.rotation=new d.Quaternion,this.hpr=new d.HeadingPitchRoll,this.trs=new d.TranslationRotationScale,this.viewer.scene.preUpdate.addEventListener(this.preUpdateEvent,this)}removeEvent(){this.viewer.scene.preUpdate.removeEventListener(this.preUpdateEvent,this),this.emitterModelMatrix=void 0,this.translation=void 0,this.rotation=void 0,this.hpr=void 0,this.trs=void 0}preUpdateEvent(t){this.particleSystem.modelMatrix=this.entity.computeModelMatrix(t,new d.Matrix4),this.hpr=d.HeadingPitchRoll.fromDegrees(this.style.heading,this.style.pitch,0,this.hpr),this.trs.translation=d.Cartesian3.fromElements(0,0,0,this.translation),this.trs.rotation=d.Quaternion.fromHeadingPitchRoll(this.hpr,this.rotation),this.particleSystem.emitterModelMatrix=d.Matrix4.fromTranslationRotationScale(this.trs,this.emitterModelMatrix)}getHeadingByOString(t){switch(t){case"北风":return 180;case"东北风":return 225;case"东风":return 270;case"东南风":return 315;case"南风":return 360;case"西南风":return 45;case"西风":return 90;case"西北风":return 135;default:return"无风"}}createParticleSystem(){return this.gravityScratch=new d.Cartesian3,new d.ParticleSystem({image:this.style.image,startColor:new d.Color(0,0,0,.6),endColor:new d.Color(0,0,0,.8),startScale:this.style.startScale,endScale:this.style.endScale,minimumParticleLife:this.style.minimumParticleLife,maximumParticleLife:this.style.maximumParticleLife,minimumSpeed:this.style.minimumSpeed,maximumSpeed:this.style.maximumSpeed,imageSize:new d.Cartesian2(this.style.particleSize,this.style.particleSize),emissionRate:this.style.emissionRate,lifetime:16,emitter:new d.CircleEmitter(.2),updateCallback:(t,e)=>this.applyGravity(t,e),sizeInMeters:!0,performance:!1})}applyGravity(t,e){d.Cartesian3.normalize(t.position,this.gravityScratch),d.Cartesian3.multiplyByScalar(this.gravityScratch,this.style.gravity*e,this.gravityScratch),t.velocity=d.Cartesian3.add(t.velocity,this.gravityScratch,t.velocity)}}class je{constructor(t,e={}){this.gravityScratch=new d.Cartesian3,this.isStart=!1,this.viewer=g(),this.entity=t,this.entity.show=!1,this.style=Object.assign(this.getDefaultStyle(),e),this.init(),this.entity.entityCollection.collectionChanged.addEventListener((t=>{let e=this;void 0===t._entities._array.find((t=>t.id===e.entity.id))&&e.remove()}))}init(){this.particleSystem=this.createParticleSystem();let t=this.viewer.scene.primitives.add(this.particleSystem);return this.addEvent(),this.isStart=!0,!!t}updateStyle(t){this.particleSystem.startScale=t.startScale||this.style.startScale,this.particleSystem.endScale=t.endScale||this.style.endScale,this.particleSystem.minimumParticleLife=t.minimumParticleLife||this.style.minimumParticleLife,this.particleSystem.maximumParticleLife=t.maximumParticleLife||this.style.maximumParticleLife,this.particleSystem.minimumSpeed=t.minimumSpeed||this.style.minimumSpeed,this.particleSystem.maximumSpeed=t.maximumSpeed||this.style.maximumSpeed,this.particleSystem.imageSize=t.particleSize?new d.Cartesian2(t.particleSize,t.particleSize):new d.Cartesian2(this.style.particleSize,this.style.particleSize),this.particleSystem.emissionRate=t.emissionRate||this.style.emissionRate,this.particleSystem.gravity=t.gravity||this.style.gravity}remove(){return this.removeEvent(),this.viewer.scene.primitives.remove(this.particleSystem),this.viewer.entities.remove(this.entity),this.isStart=!1,!0}getDefaultStyle(){return{image:__webpack_require__(4524),emissionRate:40,gravity:-3.5,minimumParticleLife:6,maximumParticleLife:7,minimumSpeed:9,maximumSpeed:9.5,startScale:1,endScale:7,particleSize:1}}addEvent(){this.emitterModelMatrix=new d.Matrix4,this.translation=new d.Cartesian3,this.rotation=new d.Quaternion,this.hpr=new d.HeadingPitchRoll,this.trs=new d.TranslationRotationScale,this.viewer.scene.preUpdate.addEventListener(this.preUpdateEvent,this)}removeEvent(){this.viewer.scene.preUpdate.removeEventListener(this.preUpdateEvent,this),this.emitterModelMatrix=void 0,this.translation=void 0,this.rotation=void 0,this.hpr=void 0,this.trs=void 0}preUpdateEvent(t){this.particleSystem.modelMatrix=this.entity.computeModelMatrix(t,new d.Matrix4),this.hpr=d.HeadingPitchRoll.fromDegrees(0,0,0,this.hpr),this.trs.translation=d.Cartesian3.fromElements(0,0,0,this.translation),this.trs.rotation=d.Quaternion.fromHeadingPitchRoll(this.hpr,this.rotation),this.particleSystem.emitterModelMatrix=d.Matrix4.fromTranslationRotationScale(this.trs,this.emitterModelMatrix)}createParticleSystem(){return this.gravityScratch=new d.Cartesian3,new d.ParticleSystem({image:this.style.image,startColor:new d.Color(1,1,1,.6),endColor:new d.Color(.8,.86,1,.4),startScale:this.style.startScale,endScale:this.style.endScale,minimumParticleLife:this.style.minimumParticleLife,maximumParticleLife:this.style.maximumParticleLife,minimumSpeed:this.style.minimumSpeed,maximumSpeed:this.style.maximumSpeed,imageSize:new d.Cartesian2(this.style.particleSize,this.style.particleSize),emissionRate:this.style.emissionRate,lifetime:16,emitter:new d.CircleEmitter(.2),updateCallback:(t,e)=>this.applyGravity(t,e),sizeInMeters:!0,performance:!1})}applyGravity(t,e){d.Cartesian3.normalize(t.position,this.gravityScratch),d.Cartesian3.multiplyByScalar(this.gravityScratch,this.style.gravity*e,this.gravityScratch),t.velocity=d.Cartesian3.add(t.velocity,this.gravityScratch,t.velocity)}}let ze=[{name:"粒子数量",paramName:"startScale",min:0,max:1e3},{name:"粒子大小",paramName:"endScale",min:0,max:60},{name:"最小速度",paramName:"minimumSpeed",min:0,max:30},{name:"最大速度",paramName:"maximumSpeed",min:0,max:30},{name:"初始比例",paramName:"particleSize",min:0,max:10},{name:"终止比例",paramName:"emissionRate",min:0,max:10},{name:"最小生命周期",paramName:"minimumParticleLife",min:.1,max:5},{name:"最大生命周期",paramName:"maximumParticleLife",min:.1,max:5}],Ge=[{name:"粒子数量",paramName:"startScale",min:0,max:1e3},{name:"粒子大小",paramName:"endScale",min:0,max:60},{name:"最小速度",paramName:"minimumSpeed",min:0,max:30},{name:"最大速度",paramName:"maximumSpeed",min:0,max:30},{name:"初始比例",paramName:"particleSize",min:0,max:10},{name:"终止比例",paramName:"emissionRate",min:0,max:10},{name:"重力大小",paramName:"gravity",min:-20,max:20},{name:"最小生命周期",paramName:"minimumParticleLife",min:.1,max:5},{name:"最大生命周期",paramName:"maximumParticleLife",min:.1,max:5}],Be=[{name:"风向"},{name:"粒子数量",paramName:"startScale",min:0,max:1e3},{name:"粒子大小",paramName:"endScale",min:0,max:60},{name:"最小速度",paramName:"minimumSpeed",min:0,max:30},{name:"最大速度",paramName:"maximumSpeed",min:0,max:30},{name:"初始比例",paramName:"particleSize",min:0,max:10},{name:"终止比例",paramName:"emissionRate",min:0,max:10},{name:"重力大小",paramName:"gravity",min:-20,max:20},{name:"最小生命周期",paramName:"minimumParticleLife",min:.1,max:5},{name:"最大生命周期",paramName:"maximumParticleLife",min:.1,max:5}];function Ue(t,e=[]){let n={},r=[];if("fire"===t)r=ze;else if("fountain"===t)r=Ge;else{if("smoke"!==t)return n;r=Be}return r.forEach((t=>{if("风向"===t.name){let r=e.find((e=>e.name===t.name||{}))?.value;return void(r&&(n.heading=r.heading,n.pitch=r.pitch))}let r=parseFloat((e.find((e=>e.name===t.name))||{}).value);t.min<=r&&r<=t.max&&(n[t.paramName]=r)})),n}class qe{constructor(t){this._name=t,this._changed=new Qe,this._error=new Qe,this._isLoading=!1,this._loading=new Qe,this._entityCollection=new wn(this),this._promises=[],this._pinBuilder=new tn,this._entityCluster=new vn,this._credit=void 0,this._resourceCredits=[]}load(t,e){return(new qe).load(t,e)}}let We=d.ArcType,Ve=d.Cartesian2,He=d.Cartesian3,Ye=d.Color,Xe=d.createGuid,Ze=d.Credit,Ke=d.defaultValue,Je=d.DeveloperError,Qe=d.Event,$e=d.getFilenameFromUri,tn=d.PinBuilder,en=d.PolygonHierarchy,nn=d.Resource,rn=d.RuntimeError,on=d.HeightReference,an=d.NearFarScalar,sn=d.HorizontalOrigin,ln=d.LabelGraphics,un=d.LabelStyle,cn=d.VerticalOrigin,hn=d.topojson,pn=d.BillboardGraphics,fn=d.CallbackProperty,dn=d.ColorMaterialProperty,gn=d.ConstantPositionProperty,yn=d.ConstantProperty,mn=d.DataSource,vn=d.EntityCluster,wn=d.EntityCollection,bn=d.PolygonGraphics,xn=d.PolylineGraphics,_n=d.defined;function En(t){return He.fromDegrees(t[0],t[1],t[2])}const Sn={"urn:ogc:def:crs:OGC:1.3:CRS84":En,"EPSG:4326":En,"urn:ogc:def:crs:EPSG::4326":En},Cn={},Tn={};let In,An=48,Pn=Ye.ROYALBLUE,kn=Ye.YELLOW,On=1,Mn=Ye.fromBytes(255,255,0,100),Nn=!1;const Ln={small:24,medium:48,large:64},Rn=32,Dn=2414016,Fn=1,jn=16093e3,zn=.1,Gn=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function Bn(t,e){let n="";for(const r in t)if(t.hasOwnProperty(r)){if(r===e||-1!==Gn.indexOf(r))continue;const i=t[r];_n(i)&&(n+="object"==typeof i?`<tr><th>${r}</th><td>${Bn(i)}</td></tr>`:`<tr><th>${r}</th><td>${i}</td></tr>`)}return n.length>0&&(n=`<table class="cesium-infoBox-defaultTable"><tbody>${n}</tbody></table>`),n}function Un(t,e){return new fn(function(t,e,n){let r;return function(i,o){return _n(r)||(r=t(e,n)),r}}(Bn,t,e),!0)}function qn(t,e,n){let r=t.id||t.properties.id;if(_n(r)&&"Feature"===t.type){let t=2,n=r;for(;_n(e.getById(n));)n=`${r}_${t}`,t++;r=n}else r=Xe();const i=e.getOrCreateEntity(r),o=t.properties;if(_n(o)){let t;i.properties=o;const e=o.title;if(_n(e))i.name=e,t="title";else{let e=Number.MAX_VALUE;for(const n in o)if(o.hasOwnProperty(n)&&o[n]){const r=n.toLowerCase();if(e>1&&"title"===r){e=1,t=n;break}e>2&&"name"===r?(e=2,t=n):e>3&&/title/i.test(n)?(e=3,t=n):e>4&&/name/i.test(n)&&(e=4,t=n)}_n(t)&&(i.name=o[t])}const r=o.description;null!==r&&(i.description=_n(r)?new yn(r):n(o,t))}return i}function Wn(t,e){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e(t[r]);return n}const Vn={Feature:Yn,FeatureCollection:function(t,e,n,r,i){const o=e.features;for(let e=0,n=o.length;e<n;e++)Yn(t,o[e],0,r,i)},GeometryCollection:Xn,LineString:$n,MultiLineString:tr,MultiPoint:Jn,MultiPolygon:rr,Point:Kn,Polygon:nr,Topology:ir},Hn={GeometryCollection:Xn,LineString:$n,MultiLineString:tr,MultiPoint:Jn,MultiPolygon:rr,Point:Kn,Polygon:nr,Topology:ir};function Yn(t,e,n,r,i){if(null===e.geometry)return void qn(e,t._entityCollection,i.describe);if(!_n(e.geometry))throw new rn("feature.geometry is required.");const o=e.geometry.type,a=Hn[o];if(!_n(a))throw new rn(`Unknown geometry type: ${o}`);a(t,e,e.geometry,r,i)}function Xn(t,e,n,r,i){const o=n.geometries;for(let n=0,a=o.length;n<a;n++){const a=o[n],s=a.type,l=Hn[s];if(!_n(l))throw new rn(`Unknown geometry type: ${s}`);l(t,e,a,r,i)}}function Zn(t,e,n,r,i){let o=i.name,a=i.markerSymbol,s=i.markerColor,l=i.markerSize,u=null;const c=e.properties;if(_n(c)){const t=c["marker-color"];_n(t)&&(s=Ye.fromCssColorString(t)),l=Ke(Ln[c["marker-size"]],l);const e=c["marker-symbol"];_n(e)&&(a=e),u=c["model-url"]}const h=qn(e,t._entityCollection,i.describe);if(h.position=new gn(n(r)),_n(c.name)&&(h.name=o,h.label=function(t="标记"){const e=new ln;return e.translucencyByDistance=new an(3e6,1,5e6,0),e.pixelOffset=new Ve(0,-45),e.horizontalOrigin=sn.CENTER,e.font="16px sans-serif",e.style=un.FILL_AND_OUTLINE,e.text=t,e.font="12pt bold monospace",e.fillColor=d.Color.WHITE,e.outlineColor=d.Color.BLACK,e.outlineWidth=4,e.style=d.LabelStyle.FILL_AND_OUTLINE,e.disableDepthTestDistance=Number.POSITIVE_INFINITY,e}(c.name)),a){let e;if(_n(a)){let n=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");e=a.indexOf("data:image/")>-1||n.test(a)?a:1===a.length?t._pinBuilder.fromText(a.toUpperCase(),s,l):t._pinBuilder.fromMakiIconId(a,s,l)}else e=t._pinBuilder.fromColor(s,l);const n=new pn;n.verticalOrigin=new yn(cn.BOTTOM),n.width=Rn,n.height=Rn,n.scaleByDistance=new an(Dn,Fn,jn,zn),n.pixelOffsetScaleByDistance=new an(Dn,Fn,jn,zn),n.disableDepthTestDistance=Number.POSITIVE_INFINITY,(2===r.length||i.clampToGround)&&(n.heightReference=on.CLAMP_TO_GROUND),h.billboard=n,Promise.resolve(e).then((function(t){n.image=new yn(t)})).catch((function(){n.image=new yn(t._pinBuilder.fromColor(s,l))}))}if(u&&(h.model=new d.ModelGraphics({uri:u,minimumPixelSize:64,maximumScale:2e3})),"winInfo-SimpleLabel"===c.code&&new ae(h,c["内容"]),"winInfo-Bubble-1"===c.code&&new ye(h,{title:c.paramList[0].value,html:c.paramList[1].value}),"winInfo-Bubble-2"===c.code&&new me(h,{title:c.paramList[0].value,html:c.paramList[1].value}),"winInfo-device"===c.code&&new ge(h,{title:c.paramList[0].value,html:c.paramList[1].value,color:c["颜色"]}),"winInfo-HLS"===c.code&&new Re(h,{title:c.paramList[0].value,url:c.paramList[1].value}),"particleSystem-fire"===c.code){let t=Ue("fire",c.paramList);new De(h,t)}if("particleSystem-fountain"===c.code){let t=Ue("fountain",c.paramList);new je(h,t)}if("particleSystem-smoke"===c.code){let t=Ue("smoke",c.paramList);new Fe(h,t)}}function Kn(t,e,n,r,i){Zn(t,e,r,n.coordinates,i)}function Jn(t,e,n,r,i){const o=n.coordinates;for(let n=0;n<o.length;n++)Zn(t,e,r,o[n],i)}function Qn(t,e,n,r,i){let o,a=i.strokeMaterialProperty;const s=e.properties;if(_n(s)){const t=s["stroke-material"]||"normal",e=s["stroke-width"]||12;switch(o=new yn(e),t){case"PolylineArrowMaterial":a=new VGEEarth.Material.Polyline.PolylineArrowMaterial({color:d.Color.AQUA,duration:800,count:3});break;case"PolylineEnergyTransMaterial":a=new VGEEarth.Material.Polyline.PolylineEnergyTransMaterial({color:d.Color.AQUA,duration:800,count:3});break;case"PolylineLightingMaterial":a=new VGEEarth.Material.Polyline.PolylineLightingMaterial;break;case"PolylineLinkPulseMaterial":a=new VGEEarth.Material.Polyline.PolylineLinkPulseMaterial({color:d.Color.AQUA,duration:5e3});break;case"PolylineSpriteMaterial":a=new VGEEarth.Material.Polyline.PolylineSpriteMaterial({color:d.Color.AQUA,duration:2e3});break;case"PolylineSuperMaterial":a=new VGEEarth.Material.Polyline.PolylineSuperMaterial({color:d.Color.AQUA,duration:2e3});break;case"PolylineTrailMaterial":a=new VGEEarth.Material.Polyline.PolylineTrailMaterial({speed:5*Math.random(),color:d.Color.CYAN,percent:.5,gradient:.01});break;default:{const t=s["stroke-width"];let e;o=_n(t)?new yn(12):i.strokeWidthProperty;const n=s.stroke;_n(n)&&(e=Ye.fromCssColorString(n));const r=s["stroke-opacity"];_n(r)&&1!==r&&(_n(e)||(e=a.color.getValue().clone()),e.alpha=r),_n(e)&&(a=new dn(e))}}}const l=qn(e,t._entityCollection,i.describe),u=new xn;l.polyline=u,u.clampToGround=i.clampToGround,u.material=a,u.width=o,u.positions=new yn(Wn(r,n)),u.arcType=We.GEODESIC}function $n(t,e,n,r,i){Qn(t,e,r,n.coordinates,i)}function tr(t,e,n,r,i){const o=n.coordinates;for(let n=0;n<o.length;n++)Qn(t,e,r,o[n],i)}function er(t,e,n,r,i){if(0===r.length||0===r[0].length)return;let o=i.fillMaterialProperty,a=i.strokeWidthProperty;const s=e.properties||{};if(_n(s)){let t;const e=s.fill,n=o.color.getValue();_n(e)&&(t=Ye.fromCssColorString(e),t.alpha=n.alpha);let r=s["fill-opacity"];_n(r)&&r!==n.alpha&&(_n(t)||(t=n.clone()),t.alpha=r),_n(t)&&(o=new dn(t))}const l=new bn;l.material=o,l.arcType=We.GEODESIC;const u=new xn;u.clampToGround=i.clampToGround,u.material=s.stroke?new dn(Ye.fromCssColorString(s.stroke)):i.strokeMaterialProperty,u.width=s["stroke-width"]||a,u.alpha=s["stroke-opacity"]||1,u.positions=new yn(Wn(r[0],n)),u.arcType=We.GEODESIC;const c=[];for(let t=1,e=r.length;t<e;t++)c.push(new en(Wn(r[t],n)));const h=r[0];l.hierarchy=new yn(new en(Wn(h,n),c)),h[0].length>2?l.perPositionHeight=new yn(!0):i.clampToGround||(l.height=0);const p=qn(e,t._entityCollection,i.describe);p.polygon=l,p.polyline=u}function nr(t,e,n,r,i){er(t,e,r,n.coordinates,i)}function rr(t,e,n,r,i){const o=n.coordinates;for(let n=0;n<o.length;n++)er(t,e,r,o[n],i)}function ir(t,e,n,r,i){for(const e in n.objects)if(n.objects.hasOwnProperty(e)){const o=hn.feature(n,n.objects[e]);(0,Vn[o.type])(t,o,o,r,i)}}Object.defineProperties(qe,{markerSize:{get:function(){return An},set:function(t){An=t}},markerSymbol:{get:function(){return In},set:function(t){In=t}},markerColor:{get:function(){return Pn},set:function(t){Pn=t}},stroke:{get:function(){return kn},set:function(t){kn=t}},strokeWidth:{get:function(){return On},set:function(t){On=t}},fill:{get:function(){return Mn},set:function(t){Mn=t}},clampToGround:{get:function(){return Nn},set:function(t){Nn=t}},crsNames:{get:function(){return Sn}},crsLinkHrefs:{get:function(){return Cn}},crsLinkTypes:{get:function(){return Tn}}}),Object.defineProperties(qe.prototype,{name:{get:function(){return this._name},set:function(t){this._name!==t&&(this._name=t,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(t){this._entityCollection.show=t}},clustering:{get:function(){return this._entityCluster},set:function(t){if(!_n(t))throw new Je("value must be defined.");this._entityCluster=t}},credit:{get:function(){return this._credit}}}),qe.prototype.load=function(t,e){if(!_n(t))throw new Je("data is required.");mn.setLoading(this,!0);let n=(e=Ke(e,Ke.EMPTY_OBJECT)).credit;"string"==typeof n&&(n=new Ze(n)),this._credit=n;let r=t,i=e.sourceUri;if("string"==typeof t||t instanceof nn){r=(t=nn.createIfNeeded(t)).fetchJson(),i=Ke(i,t.getUrlComponent());const e=this._resourceCredits,n=t.credits;if(_n(n)){const t=n.length;for(let r=0;r<t;r++)e.push(n[r])}}e={describe:Ke(e.describe,Un),markerSize:Ke(e.markerSize,An),markerSymbol:Ke(e.markerSymbol,In),markerColor:Ke(e.markerColor,Pn),strokeWidthProperty:new yn(Ke(e.strokeWidth,On)),strokeMaterialProperty:new dn(Ke(e.stroke,kn)),fillMaterialProperty:new dn(Ke(e.fill,Mn)),clampToGround:Ke(e.clampToGround,Nn)};const o=this;return Promise.resolve(r).then((function(t){return function(t,e,n,r){let i;_n(r)&&(i=$e(r)),_n(i)&&t._name!==i&&(t._name=i,t._changed.raiseEvent(t));const o=Vn[e.type];if(!_n(o))throw new rn(`Unsupported GeoJSON object type: ${e.type}`);const a=e.crs;let s=null!==a?En:null;if(_n(a)){if(!_n(a.properties))throw new rn("crs.properties is undefined.");const t=a.properties;if("name"===a.type){if(s=Sn[t.name],!_n(s))throw new rn(`Unknown crs name: ${t.name}`)}else if("link"===a.type){let e=Cn[t.href];if(_n(e)||(e=Tn[t.type]),!_n(e))throw new rn(`Unable to resolve crs link: ${JSON.stringify(t)}`);s=e(t)}else{if("EPSG"!==a.type)throw new rn(`Unknown crs type: ${a.type}`);if(s=Sn[`EPSG:${t.code}`],!_n(s))throw new rn(`Unknown crs EPSG code: ${t.code}`)}}return Promise.resolve(s).then((function(r){return t._entityCollection.removeAll(),null!==r&&o(t,e,e,r,n),Promise.all(t._promises).then((function(){return t._promises.length=0,mn.setLoading(t,!1),t}))}))}(o,t,e,i)})).catch((function(t){return mn.setLoading(o,!1),o._error.raiseEvent(o,t),Promise.reject(t)}))},qe.prototype.update=function(t){return!0};class or extends Et{constructor(t){super(t)}async addData(t){const e=t.properties,n=e.url,r=t.pid,[i,o]=await N.awaitWrap(fetch(n).then((t=>t.json())));let a=null;if(o){let n=new qe("VGEGeoJson");if(n.name=t.name,n.load(o,{clampToGround:!0}).then((function(t){t.entities.values.forEach((t=>{e.symbol&&e.symbol.lineArrow&&t.polyline&&(t.polyline.material=new d.PolylineArrowMaterialProperty(d.Color.RED),t.polyline.width=15)}))})),e.label){let t=window.turf.center(o).geometry.coordinates,i={id:r};e.label.pixelOffset&&(i.pixelOffset=new d.Cartesian2(e.label.pixelOffset.x,e.label.pixelOffset.y)),n.entities.add(it.buildLabelByDegrees({longitude:t[0],latitude:t[1],height:0},e.label.text,i))}this.instancesMap.set(r,n),this.sourcesItems.push(t),a=await this.viewer.dataSources.add(n)}return a}async flyToByPid(t){let e=this.getInstancesByPid(t);return!!e&&this.viewer.flyTo(e,{offset:new d.HeadingPitchRange(0,-1.57,0)}).then((()=>!0)).catch((()=>!1))}removeByPid(t){let e=!1,n=this.getInstancesByPid(t);return this.sourcesItems=this.sourcesItems.filter((e=>e.pid!==t)),n&&(e=this.viewer.dataSources.remove(n),this.instancesMap.delete(t)),e}destroy(){return this.removeAll()}}function ar(t,e,n){let r=d.JulianDate.fromDate(new Date),i=window.turf.length(e,{units:"meters"})/n;t.position=new d.CallbackProperty((function(t){let o=t.secondsOfDay-r.secondsOfDay;if(o<0)return;let a=n*(o%i),s=window.turf.along(e,a,{units:"meters"}).geometry.coordinates;return d.Cartesian3.fromDegrees(s[0],s[1],400)}))}class sr extends Et{constructor(t){super(t),this.dataSourceToo=new d.CustomDataSource("工作区 GLTF - 附加实体集合"),this.viewer.dataSources.add(this.dataSourceToo)}async addData(t){let e=t.properties,n=e.url,r=e.queryParameters||{},i=e.scale||1;this.viewer.scene.globe.depthTestAgainstTerrain=!0;let o=new d.Resource({url:n,queryParameters:r}),a=d.Cartesian3.fromDegrees(e.position.longitude,e.position.latitude,e.position.height||0),s=d.Math.toRadians(135),l=new d.HeadingPitchRoll(s,0,0),u=t.properties.orientation?t.properties.orientation:d.Transforms.headingPitchRollQuaternion(a,l),c={id:t.pid,name:t.name,position:a,orientation:u,model:{uri:o,scale:i}};if(null===e.position.height&&(c.model.heightReference=d.HeightReference.CLAMP_TO_GROUND),e.DistanceDisplayCondition){let t=e.DistanceDisplayCondition.near,n=e.DistanceDisplayCondition.far;c.model.distanceDisplayCondition=new d.DistanceDisplayCondition(t,n)}e.minimumPixelSize&&(c.model.minimumPixelSize=e.minimumPixelSize);let h=this.dataSourceToo.entities.add(c);return e?.motion?.path&&e?.motion?.speed&&ar(h,window.turf.lineString(e.motion.path),e.motion.speed),this.sourcesItems.push(t),this.instancesMap.set(h.id,h),h}async flyToByPid(t){let e=this.getInstancesByPid(t);return!!e&&this.viewer.flyTo(e,{offset:new d.HeadingPitchRange(0,-1.57,0)}).then((()=>!0)).catch((()=>!1))}removeByPid(t){let e=!1,n=this.getInstancesByPid(t);return this.sourcesItems=this.sourcesItems.filter((e=>e.pid!==t)),n&&(e=this.dataSourceToo.entities.removeById(t),this.instancesMap.delete(t)),e}destroy(){return this.removeAll()}}var lr,ur,cr=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},hr=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class pr{constructor(t,e,n=11.7){this.height=11.7,this.red=0,this.green=.2941177,this.blue=.2078431,this.alpha=.7,this.frequency=20,this.animationSpeed=.005,this.amplitude=1,lr.set(this,void 0),ur.set(this,void 0),cr(this,lr,t,"f"),cr(this,ur,new d.PrimitiveCollection,"f");let r=(e=window.turf.flatten(e)).features.reduce(((t,e)=>window.turf.union(t,e)));this.geoJson=window.turf.flatten(r),this.boxPolygon=window.turf.bboxPolygon(window.turf.bbox(e)),this.height=n,this.reLoad()}reLoad(){let t=this;hr(t,ur,"f").removeAll(),window.turf.geomEach(t.geoJson,(e=>{let n=e.coordinates[0].map((e=>d.Cartesian3.fromDegrees(e[0],e[1],e[2]||t.height))),r=new fr(n,{baseWaterColor:new d.Color(t.red,t.green,t.blue,t.alpha),normalMap:__webpack_require__(1552),frequency:t.frequency,animationSpeed:t.animationSpeed,amplitude:t.amplitude});hr(t,ur,"f").add(r)})),hr(t,lr,"f").scene.primitives.add(hr(t,ur,"f"))}async flyTo(){return!!this.boxPolygon&&new Promise((t=>{hr(this,lr,"f").camera.flyTo({destination:d.Rectangle.fromDegrees(...this.boxPolygon.bbox),complete:()=>{t(!0)}})}))}destroy(){return hr(this,lr,"f").scene.primitives.remove(hr(this,ur,"f"))}}lr=new WeakMap,ur=new WeakMap;class fr{constructor(t,e){return this.positions=t,this.options=e,this.createPrimitive()}createPrimitive(){let t=new d.PolygonGeometry({polygonHierarchy:new d.PolygonHierarchy(this.positions),perPositionHeight:!0,vertexFormat:d.EllipsoidSurfaceAppearance.VERTEX_FORMAT});return new d.Primitive({geometryInstances:new d.GeometryInstance({geometry:t}),appearance:this.getApper(),show:!0})}getApper(){let t=new d.EllipsoidSurfaceAppearance({aboveGround:!0});return t.material=new d.Material({fabric:{type:"Water",uniforms:{baseWaterColor:this.options.baseWaterColor,normalMap:this.options.normalMap,frequency:this.options.frequency,animationSpeed:this.options.animationSpeed,amplitude:this.options.amplitude}}}),t}}class dr extends Et{constructor(t){super(t),this.options={red:0,green:.2941177,blue:.2078431,alpha:.7,frequency:20,animationSpeed:.005,amplitude:1,height:1}}async addData(t){let e=this,n=t.properties,r=JSON.parse(JSON.stringify(n));r.red&&(e.options.red=r.red),r.green&&(e.options.green=r.green),r.blue&&(e.options.blue=r.blue),r.alpha&&(e.options.alpha=r.alpha),r.frequency&&(e.options.frequency=r.frequency),r.animationSpeed&&(e.options.animationSpeed=r.animationSpeed),r.amplitude&&(e.options.amplitude=r.amplitude),r.height&&(e.options.height=r.height);let i=r.geoJsonUrl;if(this.getSourcesItemsByPid(t.pid))return console.log("不允许重复添加"),null;e.sourcesItems.push(t);let o=await fetch(i).then((t=>t.json()));e.instancesMap.get(t.pid)?.destroy();let a=new pr(e.viewer,o,e.options.height);return e.reLoad(),e.instancesMap.set(t.pid,a),a}reLoad(){let t=this;for(const[e,n]of this.instancesMap)n.red=t.options.red,n.green=t.options.green,n.blue=t.options.blue,n.alpha=t.options.alpha,n.frequency=t.options.frequency,n.animationSpeed=t.options.animationSpeed,n.amplitude=t.options.amplitude,n.height=t.options.height,n.reLoad()}async flyToByPid(t){let e=this.instancesMap.get(t);return!!e&&e.flyTo()}removeByPid(t){let e=!1;this.sourcesItems=this.sourcesItems.filter((e=>e.pid!==t));let n=this.getInstancesByPid(t);return n&&(e=n.destroy(),this.instancesMap.delete(t)),e}destroy(){return this.removeAll()}}class gr{constructor(t,e){this.listenSource=()=>{this.viewer.scene.globe.imageryLayersUpdatedEvent.addEventListener((async()=>{await N.sleep(100),this.getNodes().forEach((t=>{"layer"===t.dataType&&(this.viewer.imageryLayers._layers.find((e=>(e.param||{}).pid===t.pid))||(this.removeDataByPid(t.pid),this.sourceEvent.raiseEvent(Dt.removeData,Ft.Viewer3D,{})))}))}))},this.addData=async t=>{let e,n=null;if(!q.checkSourceItem(t))return console.log("该资源项不合法",t),null;if(t=q.completeParams(t),this.getNodes().find((e=>t.pid===e.pid)))return console.warn("工作区已加载该数据!不允许重复加载：",t.name),this.getInstances(t.pid);{let e=Ft[this.scopeType]+" 正在加载数据："+t.name;e=t.offlineCache?e+"，已开启 IndexDB 缓存":e,console.info("%c"+e,"color:green")}switch(t.decryptionKey&&t.netRootPaths?.forEach((e=>{window.CesiumNetworkPlug.DecryptionController.ruleMap.set(t.netRootPaths,t.decryptionKey)})),t.offlineCache&&t.netRootPaths?.forEach((t=>{window.CesiumNetworkPlug.OfflineCacheController.ruleList.add(t)})),String(t.dataType)){case a.layer:[e,n]=await N.awaitWrap(this.layerMana.addData(t));break;case a.terrain:[e,n]=await N.awaitWrap(this.terrainMana.addData(t));break;case a.gltf:[e,n]=await N.awaitWrap(this.gltfMana.addData(t));break;case a.Cesium3DTile:[e,n]=await N.awaitWrap(this._3DTileMana.addData(t));break;case a.geoJson:[e,n]=await N.awaitWrap(this.geoJsonMana.addData(t));break;case a.water:[e,n]=await N.awaitWrap(this.waterMana.addData(t));break;case a.poi:[e,n]=await N.awaitWrap(this.poiMana.addData(t));break;default:console.log("无效资源项")}return e?(console.error("加载数据失败：",t.name,e),null):(this.sourceEvent.raiseEvent(Dt.addData,this.scopeType,t),n)},this.removeDataByPid=t=>{let e=this.getNodeByPid(t),n=!1;return n=n||this.layerMana.removeByPid(t),n=n||this.terrainMana.removeByPid(t),n=n||this._3DTileMana.removeByPid(t),n=n||this.geoJsonMana.removeByPid(t),n=n||this.waterMana.removeByPid(t),n=n||this.gltfMana.removeByPid(t),n=n||this.poiMana.removeByPid(t),n&&this.sourceEvent.raiseEvent(Dt.removeData,this.scopeType,e),n},this.flyToDataByPid=t=>{this.layerMana.getSourcesItemsByPid(t)&&this.layerMana.flyToByPid(t),this.terrainMana.getSourcesItemsByPid(t)&&this.terrainMana.flyToByPid(t),this._3DTileMana.getSourcesItemsByPid(t)&&this._3DTileMana.flyToByPid(t),this.geoJsonMana.getSourcesItemsByPid(t)&&this.geoJsonMana.flyToByPid(t),this.waterMana.getSourcesItemsByPid(t)&&this.waterMana.flyToByPid(t),this.gltfMana.getSourcesItemsByPid(t)&&this.gltfMana.flyToByPid(t),this.poiMana.getSourcesItemsByPid(t)&&this.poiMana.flyToByPid(t)},this.getNodeByPid=t=>this.getNodes().find((e=>e.pid===t)),this.scopeType=e,this.viewer=t,this.terrainMana=new kt(t),this.layerMana=new At(t),this.gltfMana=new sr(t),this.poiMana=new Pt(t),this._3DTileMana=new Ot(t),this.geoJsonMana=new or(t),this.waterMana=new dr(t),this.sourceEvent=qt.sourceEvent,this.listenSource()}getNodes(){let t=[];return t=t.concat(this.layerMana.sourcesItems),t=t.concat(this.terrainMana.sourcesItems),t=t.concat(this._3DTileMana.sourcesItems),t=t.concat(this.geoJsonMana.sourcesItems),t=t.concat(this.waterMana.sourcesItems),t=t.concat(this.gltfMana.sourcesItems),t=t.concat(this.poiMana.sourcesItems),t}getInstances(t){let e=this.layerMana.instancesMap.get(t);return e=e||this.terrainMana.instancesMap.get(t),e=e||this._3DTileMana.instancesMap.get(t),e=e||this.geoJsonMana.instancesMap.get(t),e=e||this.waterMana.instancesMap.get(t),e=e||this.gltfMana.instancesMap.get(t),e=e||this.poiMana.instancesMap.get(t),e}}function yr(t){t.scene.msaaSamples=8}var mr,vr,wr,br,xr,_r=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},Er=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class Sr{constructor(t){mr.set(this,void 0),vr.set(this,void 0),wr.set(this,void 0),_r(this,mr,t,"f"),_r(this,vr,new d.CustomDataSource("测量工具-实体集合"),"f"),Er(this,mr,"f").dataSources.add(Er(this,vr,"f")).then(),_r(this,wr,new at(t),"f")}measureHeight(){let t=this;Er(t,wr,"f").drawPoint({endCallback:async function(e){let n=S.formCartesian3(e[0]),r="计算中...";Er(t,vr,"f").entities.add(it.createRedPoint(e[0])),Er(t,vr,"f").entities.add(it.buildLabel(e[0],new d.CallbackProperty((()=>r),!1)));let i=d.Cartographic.fromCartesian(e[0]),[o]=await rt([{longitude:180*i.longitude/Math.PI,latitude:180*i.latitude/Math.PI,height:0}]),a=o.height;(0===a||a<-500)&&(a=await mt(n.longitude,n.latitude)||0),r=a.toFixed(3)+" m"}})}verticalDistance(){let t=this;Er(t,wr,"f").drawHeightDistinct({endCallback:e=>{2===e.length&&(Er(t,vr,"f").entities.add(it.createHeightEllipse(e)),Er(t,vr,"f").entities.add(it.PointLabelEntity(e[0],new d.CallbackProperty((()=>O.getHeight(e)+"米"),!1))))}})}CesiumTriangle(){}measureTriangle(){let t=this;Er(t,wr,"f").drawTriangle({endCallback:function(e){if(3===e.length){for(let n in e)Er(t,vr,"f").entities.add(it.createRedPoint(e[n]));Er(t,vr,"f").entities.add(it.createLightingLine(e));let n=O.calculateTriangle(e).toFixed(3)+"度",r=it.buildLabel(e[1],n);Er(t,vr,"f").entities.add(r)}}})}spaceDistance(){let t=this;Er(this,wr,"f").drawPolyLine({endCallback:e=>{if(e.length>=2){for(let n in e)Er(t,vr,"f").entities.add(it.createRedPoint(e[n]));Er(t,vr,"f").entities.add(it.createLightingLine(e));for(let n=0;n<e.length-1;n++){let r=e[n],i=e[n+1];Er(t,vr,"f").entities.add(it.spaceDistanceLabel(r,i))}}}})}surfaceArea(){let t=this;Er(this,wr,"f").drawPolygon({endCallback:async function(e){if(e.length>3){e.push(e[0]),Er(t,vr,"f").entities.add(it.createLightingPolygon(e));let n={type:"Polygon",coordinates:[S.formCartesian3S(e).map((t=>[t.longitude,t.latitude]))]};Er(t,vr,"f").entities.add(await it.polygonCenterLabel(n,"面积"))}else console.error("绘制失败")}})}perimeter(){let t=this;Er(this,wr,"f").drawPolygon({endCallback:async e=>{if(e.length>3){e.push(e[0]),Er(t,vr,"f").entities.add(it.createLightingPolygon(e));let n={type:"Polygon",coordinates:[S.formCartesian3S(e).map((t=>[t.longitude,t.latitude]))]};Er(t,vr,"f").entities.add(await it.polygonCenterLabel(n,"周长"))}else console.error("绘制失败")}})}stopMeasure(){Er(this,wr,"f").callStop()}removeAll(){Er(this,vr,"f").entities.removeAll()}}mr=new WeakMap,vr=new WeakMap,wr=new WeakMap;let Cr="",Tr="";class Ir{constructor(t){br.set(this,""),xr.set(this,""),this.viewer=t,this.fileName="",this.GeoJson=window.turf.featureCollection([]),this.GeoJsonBackups=[],this.clampToGround=!0,this.dataSourceToo=new qe("标绘工具-实体集合"),this.drawShape=new at(t),this.DrawType=[{fillColor:"rgb(238, 204, 204)",fillStyle:"./icon/full.png",borderColor:"rgb(252, 220, 113)",borderWidth:"5px",borderStyle:"solid",opacity:"0.5"},{fillColor:"rgb(2,0,255)",fillStyle:"solid",lineWidth:"5",opacity:"0.5"},{}],t.scene.globe.depthTestAgainstTerrain=!0,t.dataSources.add(this.dataSourceToo).then(),this.initEvent()}initEvent(){qt.screenEvent.addEventListener(qt.ListenType.ScreenSpaceEventType.MOUSE_MOVE,qt.ScopeType.Viewer3D,Ar),qt.screenEvent.addEventListener(qt.ListenType.ScreenSpaceEventType.LEFT_CLICK,qt.ScopeType.Viewer3D,Pr)}inputFileData({errFunc:t,endFunc:e}={errFunc:Function,endFunc:Function}){let n=this;!function({errFunc:t,endFunc:e}={errFunc:Function,endFunc:Function}){document.getElementById("_ef")?.remove();let n=document.createElement("input");n.setAttribute("id","_ef"),n.setAttribute("type","file"),n.setAttribute("style","display:none"),document.body.appendChild(n),n.onchange=function(){let r=n.files[0],i=r.name,o=n.value,a=function(t){let e="";return e=(t=t.toLowerCase()).indexOf("on")>-1?"geoJson":e,e=t.indexOf(".geojson")>-1?"geoJson":e,e=t.indexOf(".xml")>-1?"kml":e,e=t.indexOf(".kml")>-1?"kml":e,e}(i),s=new FileReader;s.readAsText(r,"UTF-8"),a?"geoJson"===a?s.onload=function(n){try{let t=JSON.parse(n.target.result);e&&e({fileName:i,filePath:o,fileType:a,geoJson:t})}catch(e){console.log(e),t&&t("文件已损坏")}}:"kml"===a&&(s.onload=function(n){let r=new DOMParser;try{let s=r.parseFromString(n.target.result,"text/xml"),l=window.toGeoJSON.kml(s);if(0===l.features.length)return console.log("数据为空：",l),void(t&&t("文件已损坏"));"function"==typeof e&&e({fileName:i,filePath:o,fileType:a,geoJson:l})}catch(e){t&&t("文件已损坏")}}):t&&t("文件类型无法失败，只支持kml、GeoJson格式")},n.click()}({errFunc:e=>{"function"==typeof t&&t(e)},endFunc:t=>{const{fileName:r,filePath:i,fileType:o,geoJson:a}=t;n.fileName=r,n.addGeoJsonBackupBefore(),"FeatureCollection"===a.type?n.GeoJson=a:n.GeoJson=window.turf.featureCollection([a]),n.addGeoJsonBackupAfter(),"function"==typeof e&&e(r)}})}SaveAsGeoJson(t){L.saveShareContent(JSON.stringify(this.GeoJson),"导出.GeoJson"),"function"==typeof t&&t("导出 GeoJson 文件成功")}SaveAsKML(t){let e=window.tokml(this.GeoJson);L.saveShareContent(e,"export.kml"),"function"==typeof t&&t("导出 KML 文件成功")}addPoint(t){let e=this;e.drawShape.drawPoint({coordinateType:J.cartographicPoiArr,endCallback:function(n){e.addGeoJsonBackupBefore();let r={id:"Point-"+G.uuid(),"marker-symbol":"null"};for(let e in t)r[e]=t[e];let i=window.turf.point(n[0],r);e.GeoJson.features.push(i),e.addGeoJsonBackupAfter()}})}addMultiLine(t,e,n){let r=this;r.drawShape.drawPolyLine({coordinateType:J.cartographicPoiArr,endCallback:function(i){r.addGeoJsonBackupBefore();let o=window.turf.lineString(i,{id:"Line-"+G.uuid(),"stroke-material":t||"normal","stroke-width":e||12,name:"多段线"});r.GeoJson.features.push(o),r.addGeoJsonBackupAfter(),"function"==typeof n&&n({message:"添加多段线",width:320},"success",2e3,o)}})}addPolygon(t=!1,e){let n=this;n.drawShape.drawPolygon({coordinateType:J.cartographicPoiArr,endCallback:function(r){n.addGeoJsonBackupBefore(),t||r.map((t=>{t[2]&&t.pop()}));let i=window.turf.polygon([r],{id:"Polygon-"+G.uuid(),fill:"rgba(128,224,245,0.5)",name:"面"});n.GeoJson.features.push(i),n.addGeoJsonBackupAfter(),"function"==typeof e&&e({message:"添加面",width:320},"success",2e3)}})}async addModel(t,e,n=0,r,i,o){let a=this;a.drawShape.drawPoint({coordinateType:J.cartographicPoiArr,endCallback:function(e){a.addGeoJsonBackupBefore();let r={id:"model-"+G.uuid(),"model-url":t};e[0][2]+=n;let i=window.turf.point(e[0],r);a.GeoJson.features.push(i),a.addGeoJsonBackupAfter()}})}delEntity(t){let e=this;e.addGeoJsonBackupBefore(),e.dataSourceToo.entities.removeById(Tr);let n=window.turf.featureCollection([]);window.turf.featureEach(e.GeoJson,(function(t){t.properties?.id!==Tr&&n.features.push(t)})),e.GeoJson=n,e.addGeoJsonBackupAfter(),"function"==typeof t&&t({message:"删除实体",width:320},"success",2e3)}analyticGeometry(){let t=this;t.dataSourceToo.entities.removeAll(),t.dataSourceToo.load(t.GeoJson,{clampToGround:t.clampToGround})}revoke(){this.GeoJsonBackups.length>0&&(this.GeoJson=this.GeoJsonBackups.pop(),this.analyticGeometry())}addGeoJsonBackupAfter(){this.analyticGeometry()}addGeoJsonBackupBefore(){let t=JSON.parse(JSON.stringify(this.GeoJson));this.GeoJsonBackups.push(t)}removeAll(){this.dataSourceToo.entities.removeAll(),this.GeoJson=window.turf.featureCollection([]),this.GeoJsonBackups=[]}destroy(){this.dataSourceToo.entities.removeAll(),this.viewer.dataSources.remove(this.dataSourceToo),qt.screenEvent.removeEventListener(Pr),qt.screenEvent.removeEventListener(Ar),document.body.style.cursor="default"}}function Ar(t){let e=g().scene.pick(t?.endPosition);e?.id&&(Cr=e?.id?.id)}function Pr(t){let e=g().scene.pick(t?.position);e?.id&&(Tr=e?.id?.id)}br=new WeakMap,xr=new WeakMap;class kr{constructor(t){const e=document.createElement("div");e.className="cesium-viewer-infoBoxContainer",t.container.appendChild(e);let n=new d.InfoBox(e);const r=document.querySelector(".cesium-infoBox");r&&(r.style.top="105px"),n.viewModel.closeClicked.addEventListener((()=>{n.viewModel.showInfo=!1})),this.viewModel=n.viewModel}}class Or{constructor(t,e,n,r){this.pause=!0,this.minRange=1e3,this.maxRange=3e3,this.viewer=t,this.position=e,this.angleSpeed=n||Math.PI/180*.1,this.once=r||!0,this.heading=0,this.offset=new d.HeadingPitchRange(d.Math.toRadians(this.heading),d.Math.toRadians(-45),3e3),this.postRenderEventBind=this.postRenderEvent.bind(this)}async activate(t=!0){this.deactivate(),this.pause=!1,this.offset.range=this.maxRange,void 0===this.entity&&(this.entity=this.viewer.entities.add({position:this.position,point:{pixelSize:10,color:d.Color.RED.withAlpha(.01)}})),this.viewer.scene.screenSpaceCameraController.enableInputs=!1,this.entity&&t&&(await this.viewer.flyTo(this.entity,{offset:this.offset}),await N.sleep(500)),await this.postRenderEventBind()}async flyToClose(){this.offset.range=this.minRange,this.entity&&await this.viewer.flyTo(this.entity,{offset:this.offset})}async postRenderEvent(){const t=new Date;for(;!this.pause;){const e=(new Date).getTime()-t.getTime();if(this.offset.heading=-e*this.angleSpeed,this.entity&&await this.viewer.zoomTo(this.entity,this.offset),this.once&&this.offset.heading<2*-Math.PI){this.offset.heading=0,this.deactivate();break}}}deactivate(){this.pause=!0,this.viewer.scene.screenSpaceCameraController.enableInputs=!0}destroy(){this.entity&&this.viewer.entities.remove(this.entity)}}class Mr{constructor(t,e){this.json={markList:[],description:""},this.viewer=t,this.bookmarkList=e}add(t){this.bookmarkList.find((e=>e.id===t.id))||this.bookmarkList.push(t)}getBookmarkList(){return this.bookmarkList}createBookmark(t,e,n){let r=this.viewer.scene;return new Promise(((i,o)=>{this.getSceneImage(e,n).then((e=>{i({id:(new Date).getTime(),img:e,name:t,cameraView:{destination:{x:r.camera.position.x,y:r.camera.position.y,z:r.camera.position.z},orientation:{heading:r.camera.heading,pitch:r.camera.pitch,roll:r.camera.roll}}})}))}))}getBookmark(t){for(let e=0;e<this.bookmarkList.length;e++)if(this.bookmarkList[e].id===t)return this.bookmarkList[e]}saveMark(t,e=this.bookmarkList,n={}){L.saveShareContent(JSON.stringify({markList:e,description:n}),`${t}.json`)}loadMark(t=(()=>{})){return U.readFile({errFunc:t=>{console.log(t)},endFunc:({fileData:e})=>{this.json=JSON.parse(e||"{}"),this.json.markList.forEach(((e,n)=>{this.add(e),t(this.json.description,n)}))}}),this.json}removeBookmark(t){for(let e=0;e<this.bookmarkList.length;e++)if(this.bookmarkList[e].id===t){this.bookmarkList.splice(e,1);break}}getSceneImage(t,e){let n=this.viewer.scene.canvas,r=new Image;return r.src=n.toDataURL("image/png"),new Promise(((i,o)=>{r.onload=function(){n=document.createElement("canvas"),n.width=e,n.height=t,n.getContext("2d").drawImage(r,0,0,n.width,n.height),i(n.toDataURL("image/jpeg"))}}))}}class Nr{constructor(t,e,n,r={destination:t.scene.camera.position,orientation:{heading:t.scene.camera.heading,pitch:t.scene.camera.pitch,roll:t.scene.camera.roll},duration:1}){this._viewer=t,this._position=e,this._options=n||{},this._defaultView=r,this._ellipsoid=new d.Entity}initLimit(){this._options.debugExtent&&this._addLimitEllipsoid(this._position,this._options.radius||1e3),this._viewer.camera.moveEnd.addEventListener(this._cameraMoveEndEventHnadle,this)}destroy(){this._viewer.camera.moveEnd.removeEventListener(this._cameraMoveEndEventHnadle,this),this._viewer.entities.remove(this._ellipsoid)}_addLimitEllipsoid(t,e){this._ellipsoid=this._viewer.entities.add({position:t,show:this._options.debugExtent,ellipsoid:{radii:new d.Cartesian3(e,e,e),maximumCone:d.Math.toRadians(90),material:d.Color.RED.withAlpha(.1),subdivisions:128,stackPartitions:32,slicePartitions:32,outline:!0,outlineColor:d.Color.AQUA.withAlpha(1)}})}_cameraMoveEndEventHnadle(){let t=this._viewer.camera.position;d.Cartesian3.distance(t,this._defaultView.destination)>(this._options.radius||2e3)?this._viewer.camera.flyTo(this._defaultView):this._defaultView={destination:d.Cartesian3.clone(this._viewer.camera.position),orientation:{heading:this._viewer.camera.heading,pitch:this._viewer.camera.pitch,roll:this._viewer.camera.roll},duration:1}}}class Lr{constructor(t,e=0){this.viewer=t;let n=[__webpack_require__(6642),__webpack_require__(1521)];this.bgUrl="number"==typeof e?n[e]:e,this.init()}init(){this.viewer.scene.skyBox.show=!1,this.viewer.scene.backgroundColor=new d.Color(0,0,0,0),this.viewer.container.style.backgroundImage=" url("+this.bgUrl+")",this.viewer.container.style.backgroundSize="cover"}remove(){this.viewer.scene.skyBox.show=!0,this.viewer.scene.backgroundColor=new d.Color(0,0,0,0),this.viewer.container.style.backgroundImage="",this.viewer.container.style.backgroundSize="auto"}}class Rr{constructor(t,e){this.viewer=t,this.style=e||{},this.container=document.createElement("div"),this.container.classList.add("div-mask"),this.viewer.cesiumWidget.container.appendChild(this.container),this.style.color&&(this.container.style.boxShadow="inset 1px 0px 500px 170px "+this.style.color,this.container.style.zIndex=String(this.style.zIndex||999))}remove(){this.viewer.cesiumWidget.container.removeChild(this.container)}}function Dr(t){this._definitionChanged=new d.Event,this.colorSubscription=void 0,this.color=t.color,this.duration=t.duration,this.url=t.imgUrl,this._time=(new Date).getTime()}window.Cesium&&(Object.defineProperties(Dr.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:d.createPropertyDescriptor("color")}),Dr.prototype.getType=function(t){return"Cloud"},Dr.prototype.getValue=function(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this.color,t,d.Color.WHITE,e.color),e.image=this.url,e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e},Dr.prototype.equals=function(t){return this===t||t instanceof Dr&&d.Property.equals(this.color,t.color)},d.CloudMaterialProperty=Dr,d.Material.CloudType="Cloud",d.Material.CloudSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n    {\n         czm_material material = czm_getDefaultMaterial(materialInput);\n         vec2 st = materialInput.st;\n         vec4 colorImage = texture(image,   vec2(fract(st.s + time),fract(st.t)));\n         material.alpha = colorImage.a * color.a  ;\n         material.diffuse =  1.3 * color.rgb  ;\n         return material;\n     }",d.Material._materialCache.addMaterial(d.Material.CloudType,{fabric:{type:d.Material.CloudType,uniforms:{color:new d.Color(1,0,0,.5),image:"",time:0},source:d.Material.CloudSource},translucent:function(t){return!0}}));class Fr{constructor(t,e){this.cloudEntity=null,this.viewer=t,this.options=e,this.addCloudEntity()}addCloudEntity(){this.cloudEntity=this.viewer.entities.add({rectangle:{coordinates:d.Rectangle.fromDegrees(-180,-90,180,90),material:new d.CloudMaterialProperty({color:d.Color.WHITE.withAlpha(.8),duration:this.options.duration||1e5,imgUrl:this.options.imgUrl}),height:this.options.height||8e3,distanceDisplayCondition:new d.DistanceDisplayCondition(3e6,1e8)}})}remove(){this.cloudEntity&&this.viewer.entities.remove(this.cloudEntity)}}class jr{constructor(t){this.viewer=t}exportImage(){let t=this.viewer.scene.canvas.toDataURL("image/png").replace("image/png","image/octet-stream"),e=document.createElement("a"),n=this.dataURLtoBlob(t),r=URL.createObjectURL(n);e.download="scene.png",e.href=r,e.click()}dataURLtoBlob(t=""){const e=t.split(","),n=e[0].match(/:(.*?);/)[1],r=atob(e[1]);let i=r.length;const o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}exportSmallImage(){let t=this.viewer.scene.canvas,e=new Image;e.src=t.toDataURL("image/png");let n=this;e.onload=function(){let t=n.imageToCanvas(e).toDataURL("image/jpeg"),r=document.createElement("a"),i=new MouseEvent("click");r.download="scene.png",r.href=t,r.dispatchEvent(i)}}imageToCanvas(t){let e=document.createElement("canvas");return e.width=t.width/3,e.height=t.height/3,e.getContext("2d")?.drawImage(t,0,0,e.width,e.height),e}}class zr{constructor(t){this.endRoteTime=null,this.preRoteTime=0,this.delayTime=60,this.interval=null,this.roteSpeed=5,this.initHeight=24678990.67414785,this.viewer=t,this.rotateBind=this.rotate.bind(this)}rotateInit(){let t=new d.ScreenSpaceEventHandler(this.viewer.scene.canvas);this.startRote(),t.setInputAction((()=>{this.endRote(),t.removeInputAction(d.ScreenSpaceEventType.LEFT_CLICK)}),d.ScreenSpaceEventType.LEFT_CLICK)}endRote(){this.viewer&&(this.viewer.clock.onTick.removeEventListener(this.rotateBind),this.interval||(this.interval=window.setInterval(this.clock,500)),this.endRoteTime=new Date)}rotate(){let t=this.viewer.camera.positionCartographic.height,e=Date.now(),n=(e-this.preRoteTime)/1e3*this.roteSpeed/180*Math.PI*(t/this.initHeight);this.preRoteTime=e,this.viewer.scene.camera.rotate(d.Cartesian3.UNIT_Z,-n)}clock(){let t=new Date;this.endRoteTime&&t.getTime()-this.endRoteTime.getTime()>1e3*this.delayTime&&this.startRote()}startRote(){this.preRoteTime=Date.now(),this.viewer.clock.onTick.addEventListener(this.rotateBind),this.interval&&window.clearInterval(this.interval),this.interval=null}}class Gr{constructor(t,e,n){this.splitLayer=null,this.viewer=t,this.splitLayer=t.imageryLayers.addImageryProvider(e),this.splitLayer.splitDirection=n,this.initSlider()}initSlider(){let t,e=document.getElementById("cesium-image-layer-split");e?t=e:(t=document.createElement("div"),t.id="cesium-image-layer-split",this.viewer.cesiumWidget.container.appendChild(t)),t.style.display="",this.slider=t,this.registEvent(t),this.viewer.scene.splitPosition=t.offsetLeft/t.parentElement.offsetWidth}registEvent(t){let e=new d.ScreenSpaceEventHandler(t),n=!1;e.setInputAction((()=>{n=!0}),d.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction((e=>{if(!n)return;let r=(t.offsetLeft+e.endPosition.x)/t.parentElement.offsetWidth;t.style.left=100*r+"%",this.viewer.scene.splitPosition=r}),d.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction((()=>{n=!1}),d.ScreenSpaceEventType.LEFT_UP),this.handler=e}removeSplitLayer(){this.splitLayer&&(this.splitLayer&&this.viewer.imageryLayers.remove(this.splitLayer),this.splitLayer=null),this.slider&&(this.slider.style.display="none"),this.handler&&this.handler.destroy()}destroy(){this.removeSplitLayer()}remove(){this.removeSplitLayer()}}var Br,Ur,qr,Wr,Vr,Hr,Yr,Xr=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},Zr=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};const Kr=__webpack_require__(9078);class Jr{constructor(t,e={}){this.speed=10,this.multiplier=1,this.roamingType="车辆漫游",Br.set(this,void 0),Ur.set(this,void 0),qr.set(this,void 0),Wr.set(this,!1),Vr.set(this,void 0),Hr.set(this,void 0),Yr.set(this,!1),this.viewer=t,this.multiplier=e.multiplier||this.multiplier,this.roamingType=e.roamingType||this.roamingType,Xr(this,Br,[],"f"),this.viewer.clock.multiplier=this.multiplier,this.pathEntity=new d.Entity,t.entities.add(this.pathEntity)}get showPath(){return this.pathEntity.show}set showPath(t){this.pathEntity.show=t}drawLine(t){return this.stopRoaming(),new Promise(((e,n)=>{W().drawShape.drawPolyLine({coordinateType:J.cartographicPoiArr,endCallback:async n=>{if(Zr(this,Yr,"f"))return;let r=window.turf.lineString(n),i=[];if(t){let e=n.reduce(((t,e)=>t+e[2]),0)/n.length;i=r.geometry.coordinates.map((n=>[n[0],n[1],e+t]))}else{let t=window.turf.length(r,{units:"meters"});window.turf.lineChunk(r,t/50,{units:"meters"}).features.forEach((t=>{i.push(...t.geometry.coordinates)})),i=i.map((t=>({longitude:t[0],latitude:t[1],height:0}))),i=await rt(i),i=i.map((t=>[t.longitude,t.latitude,t.height]))}this.setRoamingPath(i),this.pathEntity=it.createLightingLine(_.formCartographicArrS(n)),this.viewer.entities.add(this.pathEntity),e(null)}})}))}buildCZML(t){this.setRoamingType(this.roamingType);let e=JSON.parse(JSON.stringify(Kr));const n=d.JulianDate.fromIso8601("2012-08-04T10:00:00Z");let r=n.clone(),i=null;for(let n=0;n<t.length;n++){if(i){let e=window.turf.point(i),o=window.turf.point(t[n]),a=window.turf.distance(e,o,{units:"meters"});r=d.JulianDate.addSeconds(r,Math.ceil(a/this.speed),r)}e[1].position.cartographicDegrees.push(d.JulianDate.toIso8601(r)),e[1].position.cartographicDegrees.push(t[n][0]),e[1].position.cartographicDegrees.push(t[n][1]),e[1].position.cartographicDegrees.push(t[n][2]),i=t[n]}return e[1].availability=`${n}/${r}`,e}setRoamingType(t){switch(this.roamingType=t,t){case"贴地漫游":Kr[1].model={};break;case"行人漫游":Kr[1].model.gltf="https://vge-webgl.oss-cn-beijing.aliyuncs.com/Model/workingMan/scene.gltf",Kr[1].model.scale=.01;break;case"车辆漫游":Kr[1].model.gltf="https://vge-webgl.oss-cn-beijing.aliyuncs.com/Model/CesiumMilkTruck.glb",Kr[1].model.scale=.1;break;case"飞行漫游":Kr[1].model.gltf="https://vge-webgl.oss-cn-beijing.aliyuncs.com/Model/UAV.glb",Kr[1].model.scale=.1}}setRoamingPath(t){this.stopRoaming(),Xr(this,Br,t,"f")}startRoaming(){if(0!==Zr(this,Br,"f").length)if(Zr(this,Wr,"f"))this.viewer.clock.shouldAnimate=!0;else{let t=this;Xr(this,Ur,this.buildCZML(Zr(this,Br,"f")),"f"),this.viewer.dataSources.add(d.CzmlDataSource.load(Zr(this,Ur,"f"))).then((e=>{Xr(this,qr,e,"f"),Xr(t,Hr,e.entities.getById("pathRoamingEntity"),"f"),t.viewer.trackedEntity=Zr(t,Hr,"f"),Xr(t,Vr,t.viewer.scene.postRender.addEventListener((()=>{if(Zr(t,Hr,"f")&&t.viewer.clock.shouldAnimate){let e=Zr(t,Hr,"f")?.position?.getValue(t.viewer.clock.currentTime);e&&t.viewer.scene.clampToHeight(e,[])}})),"f")})),this.multiplier=1,this.viewer.clock.shouldAnimate=!0,Xr(this,Wr,!0,"f")}else console.log("漫游路径为空")}pauseRoaming(){Xr(this,Hr,void 0,"f"),this.viewer.clock.shouldAnimate=!1}stopRoaming(){this.viewer.clock.shouldAnimate=!1,Xr(this,Wr,!1,"f"),this.viewer.scene.postRender.removeEventListener(Zr(this,Vr,"f")),this.viewer.dataSources.remove(Zr(this,qr,"f")),this.viewer.trackedEntity=void 0,Xr(this,Hr,void 0,"f"),Xr(this,Ur,JSON.parse(JSON.stringify(Kr)),"f"),this.viewer.entities.remove(this.pathEntity)}setRoamingSpeed(t){this.multiplier=t,this.viewer.clock.multiplier=this.multiplier}getRoamingSpeed(){return this.multiplier}destroy(){Xr(this,Yr,!0,"f"),this.startRoaming()}}Br=new WeakMap,Ur=new WeakMap,qr=new WeakMap,Wr=new WeakMap,Vr=new WeakMap,Hr=new WeakMap,Yr=new WeakMap;var Qr=__webpack_require__(860),$r=__webpack_require__.n(Qr),ti=__webpack_require__(4181),ei=__webpack_require__.n(ti),ni=__webpack_require__(3690),ri=__webpack_require__.n(ni),ii=__webpack_require__(4909),oi=__webpack_require__.n(ii),ai=__webpack_require__(7778),si=__webpack_require__.n(ai),li=__webpack_require__(197),ui=__webpack_require__.n(li),ci=__webpack_require__(6650),hi={};hi.styleTagTransform=ui(),hi.setAttributes=oi(),hi.insert=ri().bind(null,"head"),hi.domAPI=ei(),hi.insertStyleElement=si(),$r()(ci.Z,hi),ci.Z&&ci.Z.locals&&ci.Z.locals;class pi{constructor(t){this.container=document.createElement("div"),this.divLng=document.createElement("div"),this.divLat=document.createElement("div"),this.divH=document.createElement("div"),this.divHeading=document.createElement("div"),this.divPitch=document.createElement("div"),this.divCH=document.createElement("div"),this.viewer=t,this.createDom(),this.initEvent()}createDom(){this.container.className="position-info-status-bar",this.viewer.cesiumWidget.container.appendChild(this.container),this.container.appendChild(this.divLng),this.container.appendChild(this.divLat),this.container.appendChild(this.divH),this.container.appendChild(this.divHeading),this.container.appendChild(this.divPitch),this.container.appendChild(this.divCH)}initEvent(){const t=new d.ScreenSpaceEventHandler(this.viewer.scene.canvas);t.setInputAction((t=>{let e=null;t.startPosition&&(e=this.viewer.scene.pickPosition(t.startPosition)),e&&this.handleMouseMoveEvent(e)}),d.ScreenSpaceEventType.MOUSE_MOVE),this.eventHandler=t,this.viewer.scene.camera.moveEnd.addEventListener(this.handleCameraMoveEvent,this)}handleMouseMoveEvent(t){let e=this.catesian3ToDegrees(t);this.divLng.innerHTML="经度："+e.x.toFixed(6),this.divLat.innerHTML="纬度："+e.y.toFixed(6),this.divH.innerHTML="高度："+e.z.toFixed(6)}handleCameraMoveEvent(){this.divHeading.innerHTML="方向："+d.Math.toDegrees(this.viewer.scene.camera.heading).toFixed(0)+"度",this.divPitch.innerHTML="俯仰角："+d.Math.toDegrees(this.viewer.scene.camera.pitch).toFixed(0)+"度";let t=this.catesian3ToDegrees(this.viewer.scene.camera.position);this.divCH.innerHTML="视高："+t.z.toFixed(6)+"米"}catesian3ToDegrees(t){const e=d.Cartographic.fromCartesian(t);return{x:d.Math.toDegrees(e.longitude),y:d.Math.toDegrees(e.latitude),z:e.height}}show(){this.container.style.display="block"}hide(){this.container.style.display="none"}remove(){this.eventHandler?.destroy(),this.viewer.scene.camera.moveEnd.removeEventListener(this.handleCameraMoveEvent,this),this.container.remove()}}class fi{constructor(t){this.viewer=t,this.initEvent()}initEvent(){const t=new d.ScreenSpaceEventHandler(this.viewer.scene.canvas);t.setInputAction((t=>{let e=this.viewer.scene.pick(t.endPosition);if(!e||!e.id)return void this.hide();if(!e.id.tooltip)return;let n=this.viewer.scene.camera.pickEllipsoid(t.endPosition,this.viewer.scene.globe.ellipsoid);n&&this.show(e.id.tooltip,n)}),d.ScreenSpaceEventType.MOUSE_MOVE),this.handler=t}initDom(){this.htmlContainer=document.createElement("div"),this.htmlContainer.classList.add("tooltip-container"),this.viewer.cesiumWidget.container.appendChild(this.htmlContainer)}show(t,e){this.htmlContainer||this.initDom(),this.htmlContainer&&(this.htmlContainer.style.display="block",this.htmlContainer.innerHTML=t),this.setPosition(e)}setPosition(t){const e=this.viewer.scene.canvas.height,n=new d.Cartesian2;if(d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,t,n),this.htmlContainer){this.htmlContainer.style.bottom=e-n.y+20+"px";const t=this.htmlContainer.offsetWidth;this.htmlContainer.style.left=n.x-t/2+"px"}}hide(){this.htmlContainer&&(this.htmlContainer.style.display="none")}remove(){this.handler?.destroy(),this.htmlContainer?.remove()}}__webpack_require__(7540);class di{constructor(t){this.farSkyBox=null,this.groundSkyBox=null,this.farSkyBoxList=[],this.groundSkyBoxList=[],this.viewer=t,this.InstanceListenerSkybox=this.listenerSkybox.bind(this),this.skyAtmosphereState=this.viewer.scene.skyAtmosphere.show,this.viewer.scene.skyAtmosphere.show=!1,this.viewer.scene.postRender.addEventListener(this.InstanceListenerSkybox)}flyToHome(){this.viewer.scene.camera.flyTo({destination:new d.Cartesian3(-45802988.9566341,-41512897.1313383,42860387.48041018),orientation:{heading:1.2536256744910776,pitch:-1.49857771791951,roll:.03727351623405806}})}setFarSkyBox(t){this.viewer.scene.skyBox=this.farSkyBox=this.farSkyBoxList[t]}setGroundSkyBox(t){console.log(this.groundSkyBoxList[t]),this.viewer.scene.skyBox=this.groundSkyBox=this.groundSkyBoxList[t]}reset(){this.viewer.scene.skyBox=this.farSkyBoxList[0],this.viewer.scene.skyAtmosphere.show=this.skyAtmosphereState}destroy(){this.reset(),this.viewer.scene.postRender.removeEventListener(this.InstanceListenerSkybox),this.viewer.scene.skyAtmosphere.show=!0}listenerSkybox(){let t=this.viewer.camera.position;d.Cartographic.fromCartesian(t).height<2500?this.groundSkyBox&&(this.viewer.scene.skyBox=this.groundSkyBox,this.viewer.scene.skyAtmosphere.show=!1):this.farSkyBox&&(this.viewer.scene.skyBox=this.farSkyBox)}}class gi{constructor(t,e){this.isFlyAnimation=!1,this.viewer=t,this.options=e}async activate(){let t=this.options||{center:null,callback:null,duration1:null,duration2:null,duration3:null},e=this;const n=this.viewer;let r=t?.center||this.getCameraView(this.viewer);this.isFlyAnimation=!0,await new Promise(((t,e)=>{n.camera.flyTo({destination:d.Cartesian3.fromDegrees(-85.16,13.71,23e6),duration:2,complete(){t(null)}})})),n.camera.flyTo({destination:d.Cartesian3.fromDegrees(r.x,r.y,23e6),duration:t.duration1||2,easingFunction:d.EasingFunction.LINEAR_NONE,complete:function(){let i=d.defaultValue(r.z,9e4);i<2e5&&-90!=r.pitch?(i=1.2*i+8e3,n.camera.flyTo({destination:d.Cartesian3.fromDegrees(r.x,r.y,i),duration:t.duration2||2,complete:function(){e.centerAt(r,{duration:t.duration3||2,complete:function(){e.isFlyAnimation=!1,t.callback&&t.callback()}})}})):e.centerAt(r,{duration:t.duration3||2,complete:function(){e.isFlyAnimation=!1,t.callback&&t.callback()}})}})}getCameraView(t){let e=t.camera,n=e.positionCartographic;return{y:d.Math.toDegrees(n.latitude),x:d.Math.toDegrees(n.longitude),z:n.height,heading:d.Math.toDegrees(e.heading||0)%360,pitch:d.Math.toDegrees(e.pitch||0)%360,roll:d.Math.toDegrees(e.roll||0)%360}}centerAt(t,e){if(null==e&&(e={}),null==t&&(e.isWgs84=!0,t=this.config.extent||this.config.center),null==t)return;let n={};for(let t in e)n[t]=e[t];if(t.xmin&&t.xmax&&t.ymin&&t.ymax){let e=t.xmin,n=t.xmax,r=t.ymin,i=t.ymax,o=(e+n)/2,a=(r+i)/2,s=d.Rectangle.fromDegrees(e,r,n,i),l=Math.max(s.height,s.width),u=d.Math.chordLength(l,this.viewer.scene.globe.ellipsoid.maximumRadius),c=d.defaultValue(t.height,0);this.viewer.camera.flyTo({destination:d.Cartesian3.fromDegrees(o,a,u+c),orientation:{heading:d.Math.toRadians(d.defaultValue(t.heading,0)),pitch:d.Math.toRadians(d.defaultValue(t.pitch,-90)),roll:d.Math.toRadians(d.defaultValue(t.roll,0))}})}else{let e=2500;this.viewer.camera.positionCartographic.height<e&&(e=this.viewer.camera.positionCartographic.height),null!=t.z&&0!=t.z&&(e=t.z),this.viewer.camera.flyTo({destination:d.Cartesian3.fromDegrees(t.x,t.y,e),orientation:{heading:d.Math.toRadians(d.defaultValue(t.heading,0)),pitch:d.Math.toRadians(d.defaultValue(t.pitch,-90)),roll:d.Math.toRadians(d.defaultValue(t.roll,0))}})}}deactivate(){this.viewer.camera.cancelFlight()}}class yi{constructor(t){this.viewer=t}setAlpha(t){this.viewer.scene.globe.translucency.frontFaceAlpha=t}activate(){this.viewer.scene.screenSpaceCameraController.enableCollisionDetection=!1,this.viewer.scene.globe.translucency.enabled=!0,this.viewer.scene.globe.translucency.frontFaceAlpha=.8}deactivate(){this.viewer.scene.screenSpaceCameraController.enableCollisionDetection=!0,this.viewer.scene.globe.translucency.enabled=!1}}class mi{constructor(t,e){this.isSync=!1,this.focusIndex=0,this.viewer1=t,this.viewer2=e}activate(){this.cancelSync(),this.isSync=!0,this.startSync()}deactivate(){this.isSync=!1,this.cancelSync()}startSync(){this.viewer1.scene.postRender.addEventListener(this.syncVEventHandle,this);let t=this;this.viewer1.container.onmouseenter=e=>{t.focusIndex=0},t.viewer2.container.onmouseenter=e=>{t.focusIndex=1}}cancelSync(){this.viewer1.container.onmouseenter=void 0,this.viewer2.container.onmouseenter=void 0,this.viewer1.scene.postRender.removeEventListener(this.syncVEventHandle,this)}syncVEventHandle(){this.isSync&&(0==this.focusIndex?this.syncV2ToV1():this.syncV1ToV2())}syncV2ToV1(){this.viewer2.camera.setView({destination:this.viewer1.camera.position,orientation:{direction:this.viewer1.camera._direction,up:this.viewer1.camera.up,heading:this.viewer1.camera.heading,pitch:this.viewer1.camera.pitch,roll:this.viewer1.camera.roll}})}syncV1ToV2(){this.viewer1.camera.setView({destination:this.viewer2.camera.position,orientation:{direction:this.viewer2.camera._direction,up:this.viewer2.camera.up,heading:this.viewer2.camera.heading,pitch:this.viewer2.camera.pitch,roll:this.viewer2.camera.roll}})}}var vi,wi;class bi{constructor(t,e={}){vi.add(this),this.is2D3D=!1,this.isOpenOverviewMap=!1,this.loadComplete=!1,this.config=Y,this.initMonitorCoordinates=vt,st.initRootDom(t);let n={animation:!1,homeButton:!1,geocoder:!1,baseLayerPicker:!1,timeline:!1,fullscreenButton:!1,scene3DOnly:!0,infoBox:!0,sceneModePicker:!1,navigationInstructionsInitiallyVisible:!1,navigationHelpButton:!1,selectionIndicator:!1,vrButton:!1,orderIndependentTranslucency:!1,shadows:!1,shouldAnimate:!0,contextOptions:{webgl:{requestWebgl2:!0,alpha:!0,preserveDrawingBuffer:!0}}};Object.assign(n,e),this.viewer3D=new d.Viewer("viewer3DDom",n),this.addCache(),function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}(this,vi,"m",wi).call(this),pt(this.viewer3D),yr(this.viewer3D),this.viewer3DWorkSpace=new gr(this.viewer3D,Ft.Viewer3D),qt.viewerEvent.raiseEvent(Nt.init,Ft.Viewer3D,{}),qt.viewerEvent.raiseEvent(Nt.init,Ft.global,{}),this.startAnimation=new gi(this.viewer3D,null),ht(this.viewer3D,this.viewer3DWorkSpace).then((async()=>{this.loadComplete=!0,Y.config.startAnimation&&this.startAnimation.activate()})),window.earth=this,this.viewer3D.scene.debugShowFramesPerSecond=!0,this.drawShape=new at(this.viewer3D),this.measureTool=new Sr(this.viewer3D),this.plotTool=new Ir(this.viewer3D),this.infoBox=new kr(this.viewer3D),this.viewer3D.scene.screenSpaceCameraController._zoomFactor=3}async thenLoadComplete(){for(;!this.loadComplete;)await N.sleep(500);return!0}async openCesiumMapLink23d(){if(!this.viewer2D){let t=new d.Viewer("viewer2DDom",lt()),e=new gr(t,Ft.Viewer2D);pt(t),this.viewer3D.camera.changed.addEventListener(dt(this.viewer3D,t)),this.viewer3D.camera.percentageChanged=.01,ft(t),await ct(t,e),qt.viewerEvent.raiseEvent(Nt.init,Ft.Viewer2D,{}),this.viewer2DWorkSpace=e,this.viewer2D=t}st.initCesiumMapLink23d()}closeCesiumMapLink23d(){st.closeCesiumMapLink23d()}toggleCesiumMapLink23d(){this.is2D3D?this.closeCesiumMapLink23d():this.openCesiumMapLink23d(),this.is2D3D=!this.is2D3D}openOverviewMap(){st.initOverviewMapDom(),this.viewerOl||(this.viewerOl=bt()),this.overviewMap||(this.overviewMap=new xt(this.viewer3D,this.viewerOl)),this.isOpenOverviewMap=!0}closeOverviewMap(){this.overviewMap&&(this.overviewMap.destroy(),this.overviewMap=void 0),this.isOpenOverviewMap=!1,st.closeOverviewMapDom()}openOLMapLink23d(){st.initMapLink23d(),this.viewerOl||(this.viewerOl=bt()),this.linkOLMap23D||(this.linkOLMap23D=new _t(this.viewer3D,this.viewerOl)),this.linkOLMap23D.activate()}closeOLMapLink23d(){this.linkOLMap23D&&(st.closeOLMapLink23d(),this.linkOLMap23D.deactivate())}toggleOLMapLink23d(){this.is2D3D?this.closeOLMapLink23d():this.openOLMapLink23d(),this.is2D3D=!this.is2D3D}toggleOverviewMap(){this.isOpenOverviewMap?this.openOverviewMap():this.closeOverviewMap(),this.isOpenOverviewMap=!this.isOpenOverviewMap}openDeBug(){let t=setInterval((()=>{this.loadComplete&&(yt.open(),window.CesiumNetworkPlug.OfflineCacheController.getDiskSpeed().then((t=>{f.computerSpeed=t})),clearInterval(t))}),100)}closeDeBug(){yt.close()}addCache(){const t=window.CesiumNetworkPlug;t.OfflineCacheController.ruleList.add("aliyuncs.com"),t.OfflineCacheController.ruleList.add("webst04.is.autonavi.com"),t.OfflineCacheController.ruleList.add("openstreetmap"),t.OfflineCacheController.ruleList.add("api.mapbox.com"),t.OfflineCacheController.ruleList.add("assets.cesium.com")}clearCache(){window.CesiumNetworkPlug.OfflineCacheController.clear()}getFPS(){const t=this.viewer3D.scene._performanceDisplay._fpsText?.data;return Number(t?.replace(" FPS",""))}getCurrentJSPath(){let t=new Error("err").stack||"";return(/(?:http|https|file):\/\/.*?\/.+?/.exec(t)||[])[0]||""}createNavigation(){wt(this.viewer3D)}}vi=new WeakSet,wi=function(){const t=this.viewer3D;let e=new d.ScreenSpaceEventHandler(t.scene.canvas);for(const t in Lt)e.setInputAction((function(e){qt.screenEvent.raiseEvent(Number(Lt[t]),Ft.global,e),qt.screenEvent.raiseEvent(Number(Lt[t]),Ft.Viewer3D,e)}),d.ScreenSpaceEventType[t])};class xi extends et{constructor(t){super(),this._time=(new Date).getTime(),this.color=t.color,this.duration=t.duration,this.url=t.url||__webpack_require__(613),this.repeatCount=t.repeatCount,this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineArrowOpacity"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.image=this.url,e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e.repeatCount=this.repeatCount||4,e}equals(t){return this===t||t instanceof xi&&d.Property.equals(this._color,t._color)&&this.duration==t.duration&&this.repeatCount==t.repeatCount}init(){d.Material.PolylineArrowOpacityType="PolylineArrowOpacity",d.Material.PolylineArrowOpacitySource="czm_material czm_getMaterial(czm_materialInput materialInput)\n         { czm_material material = czm_getDefaultMaterial(materialInput); vec2 st = materialInput.st;\n            vec4 colorImage = texture(image, vec2(fract( count * st.s - time),fract(st.t)));\n             material.alpha =  colorImage.a * color.a;\n             material.diffuse =  color.rgb * 3.0 ;\n             return material;}",d.Material._materialCache.addMaterial(d.Material.PolylineArrowOpacityType,{fabric:{type:d.Material.PolylineArrowOpacityType,uniforms:{color:new d.Color(1,0,0,.5),image:"",time:20,count:this.repeatCount||4},source:d.Material.PolylineArrowOpacitySource},translucent:()=>!0})}}window.Cesium&&Object.defineProperties(xi.prototype,{color:d.createPropertyDescriptor("color")});class _i extends et{constructor(t){super(),this._time=(new Date).getTime(),this.color=t.color,this.duration=t.duration,this.url=t.url||__webpack_require__(8766),this.repeatCount=t.repeatCount,this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineEnergyTransOpacity"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.image=this.url,e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e.repeatCount=this.repeatCount||4,e}equals(t){return this===t||t instanceof _i&&d.Property.equals(this._color,t._color)&&this.duration==t.duration&&this.repeatCount==t.repeatCount}init(){d.Material.PolylineEnergyTransOpacityType="PolylineEnergyTransOpacity",d.Material.PolylineEnergyTransOpacitySource="czm_material czm_getMaterial(czm_materialInput materialInput)\n         { czm_material material = czm_getDefaultMaterial(materialInput); vec2 st = materialInput.st;\n            vec4 colorImage = texture(image, vec2(fract( count * st.s - time),fract(st.t)));\n             material.alpha =  colorImage.a * color.a;\n             material.diffuse =  color.rgb * 3.0 ;\n             return material;}",d.Material._materialCache.addMaterial(d.Material.PolylineEnergyTransOpacityType,{fabric:{type:d.Material.PolylineEnergyTransOpacityType,uniforms:{color:new d.Color(1,0,0,.5),image:"",time:20,count:this.repeatCount||4},source:d.Material.PolylineEnergyTransOpacitySource},translucent:()=>!0})}}window.Cesium&&Object.defineProperties(_i.prototype,{color:d.createPropertyDescriptor("color")});class Ei extends et{constructor(t){super(),this._time=(new Date).getTime(),this._definitionChanged=new d.Event,this._color=void 0,this.color=t.color,this.duration=t.duration,this.url=t.url||__webpack_require__(844),this._time=(new Date).getTime(),this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineLinkPulse"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.image=this.url,e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e}equals(t){return this===t||t instanceof Ei&&d.Property.equals(this._color,t._color)}init(){d.Material.PolylineLinkPulseType="PolylineLinkPulse",d.Material.PolylineLinkPulseSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n         { czm_material material = czm_getDefaultMaterial(materialInput); vec2 st = materialInput.st;\n            vec4 colorImage = texture(image, vec2(fract(st.s - time), st.t));\n             material.alpha = colorImage.a * color.a;\n             material.diffuse = (colorImage.rgb + color.rgb)* 2.5 ;\n             return material;}",d.Material._materialCache.addMaterial(d.Material.PolylineLinkPulseType,{fabric:{type:d.Material.PolylineLinkPulseType,uniforms:{color:new d.Color(1,0,0,.5),image:"",time:20},source:d.Material.PolylineLinkPulseSource},translucent:function(){return!0}})}}window.Cesium&&Object.defineProperties(Ei.prototype,{color:d.createPropertyDescriptor("color")});class Si extends et{constructor(t){super(),t=d.defaultValue(t,d.defaultValue.EMPTY_OBJECT),this._color=void 0,this.color=t.color,this.duration=t.duration,this.url=t.url||__webpack_require__(737),this._time=performance.now(),this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineMigrate"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.image=this.url,e.time=(performance.now()-this._time)%this.duration/this.duration,e}equals(t){return this===t||t instanceof Si&&d.Property.equals(this._color,t._color)&&this.duration==t.duration}init(){d.Material.PolylineMigrateType="PolylineMigrate",d.Material.PolylineMigrateSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n              {\n                    czm_material material = czm_getDefaultMaterial(materialInput);\n                    vec2 st = materialInput.st;\n                    vec4 colorImage = texture(image, vec2(fract(st.s - time), st.t));\n                    material.alpha = colorImage.a * color.a;\n                    material.diffuse = color.rgb*1.5;\n                    return material;\n            }",d.Material._materialCache.addMaterial(d.Material.PolylineMigrateType,{fabric:{type:d.Material.PolylineMigrateType,uniforms:{color:new d.Color(1,0,0,.5),image:"",transparent:!0,time:20},source:d.Material.PolylineMigrateSource},translucent:function(){return!0}})}}window.Cesium&&Object.defineProperties(Si.prototype,{color:d.createPropertyDescriptor("color")});class Ci extends et{constructor(t){super(),this.duration=t.duration||2e3,this.url=t.url||__webpack_require__(554),this._time=performance.now(),this.init()}equals(t){return this===t||t instanceof Ci&&this.duration===t.duration}getType(){return"PolylineSprite"}getValue(t,e){return d.defined(e)||(e={}),e.image=this.url,e.time=(performance.now()-this._time)%this.duration/this.duration,e}init(){d.Material.PolylineSpriteType="PolylineSprite",d.Material.PolylineSpriteSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n              {\n                    czm_material material = czm_getDefaultMaterial(materialInput);\n                    vec2 st = materialInput.st;\n                    vec4 colorImage = texture(image, vec2(fract(st.s - time), st.t));\n                    material.alpha = colorImage.a;\n                    material.diffuse = colorImage.rgb * 1.5 ;\n                    return material;\n            }",d.Material._materialCache.addMaterial(d.Material.PolylineSpriteType,{fabric:{type:d.Material.PolylineSpriteType,uniforms:{color:new d.Color(1,0,0,.5),image:"",transparent:!0,time:20},source:d.Material.PolylineSpriteSource},translucent:()=>!0})}}window.Cesium&&Object.defineProperties(Ci.prototype,{color:d.createPropertyDescriptor("color")});class Ti extends et{constructor(t){super(),this._time=(new Date).getTime(),this._color=void 0,this.color=t.color,this.duration=t.duration,this.count=t.count,this.url=t.url||__webpack_require__(6090),this._time=(new Date).getTime(),this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineSuper"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.image=this.url,e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e.count=this.count||4,e}equals(t){return this===t||t instanceof Ti&&d.Property.equals(this._color,t._color)&&this.duration==t.duration&&this.count==t.count&&this.url==t.url}init(){d.Material.PolylineSuperType="PolylineSuper",d.Material.PolylineSuperSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n         { czm_material material = czm_getDefaultMaterial(materialInput); vec2 st = materialInput.st;\n            vec4 colorImage = texture(image, vec2(fract( count * st.s - time),fract(st.t)));\n             material.alpha =  colorImage.a * color.a;\n             material.diffuse =  color.rgb * 1.5 ;\n             return material;}",d.Material._materialCache.addMaterial(d.Material.PolylineSuperType,{fabric:{type:d.Material.PolylineSuperType,uniforms:{color:new d.Color(1,0,0,.5),image:"",time:20,count:4},source:d.Material.PolylineSuperSource},translucent:function(){return!0}})}}window.Cesium&&Object.defineProperties(Ti.prototype,{color:d.createPropertyDescriptor("color")});class Ii extends et{constructor(t){super(),t=d.defaultValue(t,d.defaultValue.EMPTY_OBJECT),this.colorSubscription=void 0,this.speed=t.speed||6*Math.random(),this.color=t.color||d.Color.RED,this.percent=t.percent||.1,this.gradient=t.gradient||.01,this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineTrail"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this.color,t,d.Color.WHITE,e.color),e.speed=this.speed,e.gradient=this.gradient,e.percent=this.percent,e}equals(t){return this===t||t instanceof Ii&&this.speed==t.speed&&d.Property.equals(this.color,t.color)}init(){d.Material.PolylineTrailType="PolylineTrail",d.Material.PolylineTrailSource="uniform vec4 color;\n        uniform float speed;\n        uniform float percent;\n        uniform float gradient;\n        \n        czm_material czm_getMaterial(czm_materialInput materialInput){\n            czm_material material = czm_getDefaultMaterial(materialInput);\n            vec2 st = materialInput.st;\n            float t =fract(czm_frameNumber * speed / 1000.0);\n            t *= (1.0 + percent);\n            float alpha = smoothstep(t- percent, t, st.s) * step(-t, -st.s);\n            alpha += gradient;\n            material.diffuse = color.rgb;\n            material.alpha = alpha;\n            return material;\n        }",d.Material._materialCache.addMaterial(d.Material.PolylineTrailType,{fabric:{type:d.Material.PolylineTrailType,uniforms:{color:new d.Color(1,0,0,.5),transparent:!0,speed:0,gradient:.01,percent:.1},source:d.Material.PolylineTrailSource},translucent:function(){return!0}})}}window.Cesium&&Object.defineProperties(Ii.prototype,{color:d.createPropertyDescriptor("color")});class Ai extends et{constructor(t){super(),t=d.defaultValue(t,d.defaultValue.EMPTY_OBJECT),this._color=void 0,this._colorSubscription=void 0,this.color=t.color,this.duration=t.duration,this._time=performance.now(),this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineTrialFlow"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.time=(performance.now()-this._time)%this.duration/this.duration,e}equals(t){return this===t||t instanceof Ai&&this.duration==t.duration&&d.Property.equals(this._color,t._color)}init(){d.Material.PolylineTrialFlowType="PolylineTrialFlow",d.Material.PolylineTrialFlowSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    vec2 st = materialInput.st;\n    float t = time;\n    t *= 1.03;\n    float alpha = smoothstep(t- 0.1, t, st.s) * step(-t, -st.s);\n    alpha += 0.1;\n    material.diffuse= color.rgb;\n    material.alpha = alpha;\n    return material;\n}\n",d.Material._materialCache.addMaterial(d.Material.PolylineTrialFlowType,{fabric:{type:d.Material.PolylineTrialFlowType,uniforms:{color:new d.Color(1,0,0,.5),transparent:!0,time:20},source:d.Material.PolylineTrialFlowSource},translucent:function(){return!0}})}}window.Cesium&&Object.defineProperties(Ai.prototype,{color:d.createPropertyDescriptor("color")});class Pi extends et{constructor(t){super(),this._time=(new Date).getTime(),this._color=void 0,this.color=t.color,this.duration=t.duration,this.count=t.count,this.url=t.url||__webpack_require__(613),this._time=(new Date).getTime(),this.init()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}getType(){return"PolylineVolumeTrial"}getValue(t,e){return d.defined(e)||(e={}),e.color=d.Property.getValueOrClonedDefault(this._color,t,d.Color.WHITE,e.color),e.image=this.url,e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e.count=this.count||4,e}equals(t){return this===t||t instanceof Pi&&d.Property.equals(this._color,t._color)&&this.duration==t.duration&&this.count==t.count}init(){d.Material.PolylineVolumeTrialType="PolylineVolumeTrial",d.Material.PolylineVolumeTrialSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n         { czm_material material = czm_getDefaultMaterial(materialInput); vec2 st = materialInput.st;\n            vec4 colorImage = texture(image, vec2(fract( count * st.s - time),fract(st.t)));\n             material.alpha =  colorImage.a * color.a;\n             material.diffuse =  color.rgb *1.5 ;\n             return material;}",d.Material._materialCache.addMaterial(d.Material.PolylineVolumeTrialType,{fabric:{type:d.Material.PolylineVolumeTrialType,uniforms:{color:new d.Color(1,0,0,.5),image:"",time:20,count:4},source:d.Material.PolylineVolumeTrialSource},translucent:function(){return!0}})}}window.Cesium&&Object.defineProperties(Pi.prototype,{color:d.createPropertyDescriptor("color")});class ki{constructor(t,e,n){this.cylinder=null,this.viewer=t,this.property=e,this.style=n||{},this.addCylinder()}addCylinder(){let t;this.cylinder=this.viewer.entities.add({position:new d.CallbackProperty((e=>{const n=this.getPosition();return n?(t=n,n):t||new d.Cartesian3(0,0,0)}),!1),cylinder:{length:this.style.length||200,topRadius:this.style.topRadius||0,bottomRadius:this.style.bottomRadius||240,material:this.style.material||d.Color.RED.withAlpha(.3)}})}getPosition(){const t=this.property.getValue(this.viewer.clock.currentTime);if(t){const e=d.Cartographic.fromCartesian(t);return d.Cartesian3.fromRadians(e.longitude,e.latitude,e.height-(this.style.length||100))}return null}remove(){this.cylinder&&this.viewer.entities.remove(this.cylinder)}}class Oi{constructor(t,e=[],n){this.uid=G.uuid(),this.flyCylinder=null,this.flyPathBuffer=null,this.pathPositionsWithJulianDate=[],this.viewer=t,this.pathEntity=null,this.pathPointsDataSource=new d.CustomDataSource("pathPoints-"+this.uid),this.viewer.dataSources.add(this.pathPointsDataSource),this.pathPositionsWithJulianDate=e.map((t=>({longitude:t.longitude,latitude:t.latitude,height:t.height,julianDate:d.JulianDate.fromIso8601(t.isoTime)}))),this.params={style:n.style||{},model:{uri:n.model?.uri||"https://vge-webgl.oss-cn-beijing.aliyuncs.com/Model/wrj.glb",colorBlendMode:n.model?.colorBlendMode||d.ColorBlendMode.HIGHLIGHT,color:n.model?.color||d.Color.WHITE,scale:n.model?.scale||.1,minimumPixelSize:n.model?.minimumPixelSize||50},label:{text:n.label?.text||"侦查无人机",color:n.label?.color||d.Color.AZURE,outline:n.label?.outline||!0,outlineColor:n.label?.outlineColor||d.Color.BLACK,outlineWidth:n.label?.outlineWidth||2,horizontalOrigin:n.label?.horizontalOrigin||d.HorizontalOrigin.CENTER,verticalOrigin:n.label?.verticalOrigin||d.VerticalOrigin.BOTTOM,pixelOffset:n.label?.pixelOffset||new d.Cartesian2(10,-25),scaleByDistance:n.label?.scaleByDistance||new d.NearFarScalar(500,1,1500,.4)}},this.addPath()}addPathPoints(){this.pathPointsDataSource.entities.removeAll(),this.pathPositionsWithJulianDate.forEach((t=>{const e=d.Cartesian3.fromDegrees(t.longitude,t.latitude,t.height);this.pathPointsDataSource.entities.add({position:e,point:{pixelSize:4,color:d.Color.WHITE.withAlpha(.8)}})}))}addPathBuffer(){this.flyPathBuffer=this.viewer.entities.add({name:"飞行路线缓冲区",corridor:{positions:new d.CallbackProperty(((t,e)=>{const n=this.pathPositionsWithJulianDate;let r=[];return n.find((e=>!(e.julianDate<=t&&(r.push(e.longitude),r.push(e.latitude),1)))),d.Cartesian3.fromDegreesArray(r)}),!1),width:700,material:d.Color.GREEN.withAlpha(.5)}})}addPath(){let t=d.JulianDate.fromIso8601(""),e=d.JulianDate.fromIso8601("");const n=new d.SampledPositionProperty;this.pathPositionsWithJulianDate.forEach(((r,i)=>{const o=d.Cartesian3.fromDegrees(r.longitude,r.latitude,r.height),a=r.julianDate;n.addSample(a,o),t=0===i?a:t,e=i===this.pathPositionsWithJulianDate.length-1?a:e})),this.viewer.clock.startTime=t.clone(),this.viewer.clock.stopTime=e.clone(),this.viewer.clock.currentTime=t.clone(),this.viewer.clock.shouldAnimate=!0,this.viewer.clock.clockRange=d.ClockRange.LOOP_STOP,this.viewer.clock.multiplier=100,this.viewer.timeline&&this.viewer.timeline.zoomTo(t,e),this.pathEntity=this.viewer.entities.add({position:n,orientation:new d.VelocityOrientationProperty(n),model:this.params.model,label:this.params.label,path:new d.PathGraphics({show:!0,width:3,leadTime:0,trailTime:3600,material:d.Color.fromRandom(),...this.params.style})}),this.flyCylinder=new ki(this.viewer,n)}remove(){this.pathPointsDataSource.entities.removeAll(),this.viewer.dataSources.remove(this.pathPointsDataSource),this.pathEntity&&this.viewer.entities.remove(this.pathEntity),this.flyCylinder&&this.flyCylinder.remove(),this.flyPathBuffer&&this.viewer.entities.remove(this.flyPathBuffer)}}async function Mi(t,e=12,n={color:d.Color.fromCssColorString("#FF4500"),glowPower:.2,opacity:.8}){let r=await d.GeoJsonDataSource.load(t);if(!r)return;let i=r.entities.values;for(var o=0;o<i.length;o++){var a=i[o];a.polyline.material=new d.PolylineGlowMaterialProperty({color:n.color,glowPower:n.glowPower,opacity:n.opacity}),a.polyline.width=e}return r}class Ni{constructor(t,e,n){this.viewer=t,this.position=e;let r=d.Cartographic.fromCartesian(e);this.lng=d.Math.toDegrees(r.longitude),this.lat=d.Math.toDegrees(r.latitude),this.height=r.height,this.style={image:n?.image||__webpack_require__(5305),bounceHeight:n?.bounceHeight||100,increment:n?.increment||.05},this.add()}add(){let t=this.height+this.style.bounceHeight,e=0,n=0;this.bounceMarker=this.viewer.entities.add({position:new d.CallbackProperty((r=>(n+=this.style.increment,e+=n,e>this.style.bounceHeight&&(e=this.style.bounceHeight,n*=-1,n*=.55),d.Cartesian3.fromDegrees(this.lng,this.lat,t-e)))),billboard:{image:this.style.image,heightReference:d.HeightReference.RELATIVE_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY}}),this.bounceMarker.bounce=t=>{this.bounce()}}bounce(){this.remove(),this.add()}remove(){this.viewer.entities.remove(this.bounceMarker)}}class Li{constructor(t,e){this.entity=t,__webpack_require__(5305)}bounce(){}}function Ri(t,e,n){let r={param:JSON.stringify(n),position:d.Cartesian3.fromDegrees(t,e),billboard:{image:n.imgUrl,width:void 0,height:void 0,scaleByDistance:new d.NearFarScalar(150,2,15e6,.5),disableDepthTestDistance:Number.POSITIVE_INFINITY,heightReference:d.HeightReference.RELATIVE_TO_GROUND,verticalOrigin:d.VerticalOrigin.BOTTOM}};return n.name&&(r.param=n.name),n.height&&(r.billboard.height=n.height),n.width&&(r.billboard.width=n.width),new d.Entity(r)}var Di,Fi,ji,zi,Gi=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},Bi=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class Ui{constructor(t,e,n){Di.set(this,void 0),Fi.set(this,void 0),ji.set(this,void 0),zi.set(this,void 0),Gi(this,zi,[],"f"),Gi(this,Di,t,"f"),Gi(this,Fi,e,"f"),Gi(this,ji,n,"f"),this.init()}init(){this.addPeripheryRegion(),this.addPolyline(),this.addRegion()}addPeripheryRegion(){let t=Bi(this,ji,"f")[0];for(let e=0;e<t.length;e++){const n=t[e];let r=this.getDegreesArrayHeights(n),i=Bi(this,Di,"f").entities.add({polyline:{positions:d.Cartesian3.fromDegreesArrayHeights(this.getDegreesArrayHeights(n,500)),width:3,material:d.Color(Bi(this,Fi,"f").colorLine)},polygon:{hierarchy:d.Cartesian3.fromDegreesArrayHeights(r),height:0,extrudedHeight:n.properties.height,material:new d.ImageMaterialProperty({image:Bi(this,Fi,"f").backGround,repeat:new d.Cartesian2(10,10),color:new d.Color(Bi(this,Fi,"f").colorPolygon)})}});Bi(this,zi,"f").push(i)}}addPolyline(){let t=Bi(this,ji,"f")[1];for(let i=0;i<t.length;i++){const o=t[i];let a=this.getDegreesArrayHeights(o,1e4),s=Bi(this,Di,"f").entities.add({polyline:{positions:d.Cartesian3.fromDegreesArrayHeights(a),width:3,material:d.Color.fromCssColorString("#ccc").withAlpha(.4)}});Bi(this,zi,"f").push(s);var e=d.Cartographic.fromCartesian(d.BoundingSphere.fromPoints(d.Cartesian3.fromDegreesArrayHeights(a)).center),n=d.Math.toDegrees(e.longitude),r=d.Math.toDegrees(e.latitude);s=Bi(this,Di,"f").entities.add({position:d.Cartesian3.fromDegrees(n,r,12e3),label:{text:o.properties.name,fillColor:d.Color.WHITE,scale:Bi(this,Fi,"f").size,font:"normal 84px MicroSoft YaHei",distanceDisplayCondition:new d.DistanceDisplayCondition(0,9e6),scaleByDistance:new d.NearFarScalar(5e4,1,5e5,.5),verticalOrigin:d.VerticalOrigin.BOTTOM,style:d.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new d.Cartesian2(0,-10),outlineWidth:20,outlineColor:d.Color.BLACK}}),Bi(this,zi,"f").push(s)}}addRegion(){let t=Bi(this,ji,"f")[1];for(let e=0;e<t.length;e++){const n=t[e];let r=this.getDegreesArrayHeights(n),i=Bi(this,Di,"f").entities.add({polygon:{hierarchy:d.Cartesian3.fromDegreesArrayHeights(r),height:1e4,material:new d.ImageMaterialProperty({image:Bi(this,Fi,"f").backGround,repeat:new d.Cartesian2(0,1),color:d.Color.fromCssColorString("#2F5981").withAlpha(.8)})},wall:{positions:d.Cartesian3.fromDegreesArrayHeights(this.getDegreesArrayHeights(n,1e4)),material:new d.ImageMaterialProperty({image:Bi(this,Fi,"f").wallgradients,repeat:new d.Cartesian2(0,1),transparent:!0,color:d.Color.fromCssColorString("#106C9D")})}});Bi(this,zi,"f").push(i)}}getDegreesArrayHeights(t,e){let n,r=[];"MultiPolygon"==t.geometry.type?n=t.geometry.coordinates[0][0]:"Polygon"==t.geometry.type&&(n=t.geometry.coordinates[0]);for(let t=0;t<n.length;t++){const i=n[t];r.push(i[0]),r.push(i[1]),r.push(e||0)}return r}remove(){for(let t=0;Bi(this,zi,"f")[t];t++)Bi(this,Di,"f").entities.remove(Bi(this,zi,"f")[t])}}Di=new WeakMap,Fi=new WeakMap,ji=new WeakMap,zi=new WeakMap;class qi{constructor(t,e,n){this.viewer=t,this.position=e,this.color=n.color||d.Color.RED,this.iconUrl=n.iconUrl,this.pixelSize=n.pixelSize||10,this.pixelMax=n.pixelMax||50,this.outWidth=n.outWidth||20}async init(){await this.createMarker()}async createMarker(){let t=1,e=!0,n=this.pixelSize,r=!0,i=.7,o=!0,a=this.pixelMax,s=await mt(this.position.longitude,this.position.latitude);console.log(this.position,s,d.Cartographic.fromDegrees(this.position.longitude,this.position.latitude,s)),this.markerEntity=this.viewer.entities.add({position:d.Cartesian3.fromDegrees(this.position.longitude,this.position.latitude,s)}),this.markerEntity.point={disableDepthTestDistance:Number.POSITIVE_INFINITY,color:new d.CallbackProperty((()=>(e?(t-=.03,t<=0&&(e=!1)):(t=1,e=!0),this.color.withAlpha(t))),!1),pixelSize:new d.CallbackProperty((()=>(r?(n+=2,n>=a&&(r=!1)):(n=10,r=!0),n)),!1),outlineColor:new d.CallbackProperty((()=>(o?(i-=.035,i<=0&&(o=!1)):(i=.7,o=!0),this.color.withAlpha(i))),!1),outlineWidth:this.outWidth,scaleByDistance:new d.NearFarScalar(1200,1,5200,.4)},this.iconUrl&&(this.markerEntity.billboard={image:this.iconUrl,scaleByDistance:new d.NearFarScalar(1200,1,5200,.4),distanceDisplayCondition:new d.DistanceDisplayCondition(0,1e4),disableDepthTestDistance:Number.POSITIVE_INFINITY})}remove(){this.viewer.entities.remove(this.markerEntity),this.markerEntity=void 0}}class Wi{constructor(t){return new d.MaterialAppearance({material:new d.Material({fabric:{uniforms:{color:t},source:"\n                    uniform vec4 color; \n                    czm_material czm_getMaterial(czm_materialInput materialInput)\n                    {\n                        czm_material material = czm_getDefaultMaterial(materialInput); \n                        vec2 st = materialInput.st;                        \n                        float alpha = distance(st,vec2(0.5, 0.5)); \n                        material.alpha = color.a  * alpha  * 1.5; \n                        material.diffuse = color.rgb * 1.3;                            \n                        return material;\n                    }\n                    "},translucent:!0}),faceForward:!1,closed:!1})}}class Vi{constructor(t,e,n,r){this.viewer=t,this.color=e,this.label=n,this.features=r,this.entitys=[],this.primitives=[]}init(){let t=this;t.features.forEach(((e,n)=>{t._addRegion(e,n)}))}_addRegion(t,e){let n=this,r=n._getDegreesArrayHeights(t),i=d.Cartesian3.fromDegreesArrayHeights(r),o=new d.PolygonGeometry({polygonHierarchy:new d.PolygonHierarchy(i),vertexFormat:d.VertexFormat.ALL}),a=d.PolygonGeometry.createGeometry(o),s=new d.GeometryInstance({geometry:a});n.primitives.push(n.viewer.scene.primitives.add(new d.Primitive({geometryInstances:s,appearance:new Wi(n.color[e])}))),n.entitys.push(n.viewer.entities.add({polyline:{positions:i,width:2,material:new d.PolylineDashMaterialProperty({color:n.color[e].withAlpha(1)})}})),n.entitys.push(n.viewer.entities.add({position:n.label[e].position,label:{text:n.label[e].label,fillColor:n.color[e],scale:.5,font:"normal 45px MicroSoft YaHei",distanceDisplayCondition:new d.DistanceDisplayCondition(0,9e6),scaleByDistance:new d.NearFarScalar(5e4,1,5e5,.5),verticalOrigin:d.VerticalOrigin.BOTTOM,style:d.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new d.Cartesian2(0,-10),outlineWidth:10,outlineColor:d.Color.BLACK}}))}_getDegreesArrayHeights(t){let e=[],n=[];"MultiPolygon"==t.geometry.type?n=t.geometry.coordinates[0][0]:"Polygon"==t.geometry.type&&(n=t.geometry.coordinates[0]);for(let t=0;t<n.length;t++){const r=n[t];e.push(r[0]),e.push(r[1]),e.push(r[2]||100)}return e}destroy(){let t=this;t.entitys.forEach((e=>{t.viewer.entities.remove(e)})),t.entitys=[],t.primitives.forEach((e=>{t.viewer.scene.primitives.remove(e)})),t.primitives=[]}}class Hi{constructor(t,e,n){this._WorldDegree=e,this._position=new d.Cartesian3,this._viewer=t,this._label=n,this._$container=document.createElement("div")}async init(){this._$container.style.display="none",this._addDom();let t=await mt(this._WorldDegree.longitude,this._WorldDegree.latitude);this._position=d.Cartesian3.fromDegrees(this._WorldDegree.longitude,this._WorldDegree.latitude,t+(this._WorldDegree.height||0)),this._addPostRender()}remove(){this._viewer.scene.postRender.removeEventListener(this._postRender,this),this._$container.remove()}getPosition(){return this._position}_addDom(){this._$container.innerHTML=' \n              <div class="div-point-container">\n                  <div class="divpoint divpoint-theme">\n                      <div class="divpoint-wrap">\n                          <div class="divpoint-area">\n                              <div class="arrow-lt"></div>\n                              <div class="b-t"></div>\n                              <div class="b-r"></div>\n                              <div class="b-b"></div>\n                              <div class="b-l"></div>\n                              <div class="arrow-rb"></div>\n                          </div>\n                          <div class="b-t-l"></div>\n                          <div class="b-b-r"></div>\n                      </div>\n                      <div class="arrow"></div>\n                  </div>\n              </div>\n          ',this._$container.querySelector(".arrow-rb").after(this._label),this._viewer.cesiumWidget.container.appendChild(this._$container)}_addPostRender(){this._viewer.scene.postRender.addEventListener(this._postRender,this)}_postRender(){if(!this._$container)return;const t=this._viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this._viewer.scene,this._position,e),this._$container.style.position="absolute",this._$container.style.bottom=t-e.y+10+"px",this._$container.style.left=e.x+"px",this._viewer.camera.positionCartographic.height>14e3?this._$container.style.display="none":this._$container.style.display="block"}}class Yi{constructor(t,e,n){this.position=new d.Cartesian3,this._WorldDegree=e,this.viewer=t,this.$label=n,this.$container=document.createElement("div"),this.viewer.cesiumWidget.container.appendChild(this.$container),this.p=new d.Entity}async init(){this.$container.style.display="none",this._addDom(),this._addPoint();let t=await mt(this._WorldDegree.longitude,this._WorldDegree.latitude);this.position=d.Cartesian3.fromDegrees(this._WorldDegree.longitude,this._WorldDegree.latitude,t+(this._WorldDegree.height||0)),this.p.position=this.position,this._addPostRender()}_addDom(){if(this.$container.classList.add("dynamic-divlabel-container"),this.$container.classList.add("dynamic-divlabel-container1"),this.$body=document.createElement("div"),this.$body.classList.add("sz-component-animate-marker__boder"),console.log(this.$label),"string"==typeof this.$label){let t=document.createElement("div");t.innerHTML=this.$label,this.$label=t}else if(this.$label instanceof HTMLElement){let t=document.createElement("div");t.appendChild(this.$label),this.$label=t}else console.error("传入的label参数不是HTMLElement或string类型");this.$label.classList.add("sz-component-animate-marker__text"),this.$body.appendChild(this.$label),this.$container.appendChild(this.$body)}_addPoint(){this.p=this.viewer.entities.add({position:this.position,point:new d.PointGraphics({pixelSize:10,disableDepthTestDistance:Number.POSITIVE_INFINITY,color:d.Color.RED})})}_addPostRender(){this.viewer.scene.postRender.addEventListener(this._postRender,this)}_postRender(){if(!this.$container||!this.$container.style)return;const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,this.position,e);const n=this.$container.firstChild.offsetHeight;this.$container.style.bottom=t-e.y+n+"px";const r=this.$container.firstChild.offsetWidth;this.$container.style.left=e.x-r/2+"px",this.viewer.camera.positionCartographic.height>14e3?this.$container.style.display="none":this.$container.style.display="block"}remove(){this.$container.remove(),this.viewer.scene.postRender.removeEventListener(this._postRender,this),this.viewer.entities.remove(this.p)}}class Xi{constructor(t,e,n){this._WorldDegree=e,this._position=new d.Cartesian3.fromDegrees,this._viewer=t,this._label=n,this._$container=document.createElement("div")}async init(){this._addDom();let t=await mt(this._WorldDegree.longitude,this._WorldDegree.latitude);this._position=d.Cartesian3.fromDegrees(this._WorldDegree.longitude,this._WorldDegree.latitude,t+(this._WorldDegree.height||0)),this._addPostRender()}remove(){this._viewer.scene.postRender.removeEventListener(this._postRender,this),this._viewer.cesiumWidget.container.removeChild(this._$container)}getPosition(){return this._position}_addDom(){this._$container.classList.add("is-shulie");let t=document.createElement("div");t.appendChild(this._label),t.classList.add("is-shulie-item"),this._$container.appendChild(t);let e=document.createElement("div");e.classList.add("pre-topCard-list-item-line"),this._$container.appendChild(e);let n=document.createElement("div");n.classList.add("pre-topCard-list-item-circle"),this._$container.appendChild(n),this._viewer.cesiumWidget.container.appendChild(this._$container)}_addPostRender(){this._viewer.scene.postRender.addEventListener(this._postRender,this)}_postRender(){if(!this._$container)return;if(!this._position)return;const t=this._viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this._viewer.scene,this._position,e),this._$container.style.bottom=t-e.y+10+"px";const n=this._$container.offsetWidth;this._$container.style.left=e.x-n/2+"px",this._viewer.camera.positionCartographic.height>4e3?this._$container.style.display="none":this._$container.style.display="block"}}class Zi{constructor(t,e,n){let r={image:__webpack_require__(6072),lineHeight:16,bounceHeight:1,increment:.008};this.viewer=t,this.lng=e.longitude,this.lat=e.latitude,this.height=e.height||0,this.style=n?r:Object.assign(r,n)}init(){this._add()}_add(){let t=this.height+this.style.lineHeight,e=t,n=!0,r=t+this.style.bounceHeight;this.floatMarker=this.viewer.entities.add({position:new d.CallbackProperty((i=>(n?(e+=this.style.increment,e>r&&(n=!1)):(e-=this.style.increment,e<t&&(n=!0)),d.Cartesian3.fromDegrees(this.lng,this.lat,e)))),billboard:{image:this.style.image,height:78,width:42,heightReference:d.HeightReference.RELATIVE_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY,distanceDisplayCondition:new d.DistanceDisplayCondition(0,2e3)}}),this.line=this.viewer.entities.add({polyline:{positions:d.Cartesian3.fromDegreesArrayHeights([this.lng,this.lat,this.height,this.lng,this.lat,t]),material:new d.PolylineDashMaterialProperty({color:d.Color.AQUA}),width:2,distanceDisplayCondition:new d.DistanceDisplayCondition(0,2e3)}})}remove(){this.viewer.entities.remove(this.floatMarker),this.viewer.entities.remove(this.line)}}class Ki{constructor(t,e,n){this._WorldDegree=e,this._position=new d.Cartesian3.fromDegrees,this.viewer=t,this._label=n,this._$container=document.createElement("div"),this.p=new d.Entity}async init(){this._addDom();let t=await mt(this._WorldDegree.longitude,this._WorldDegree.latitude);this._position=d.Cartesian3.fromDegrees(this._WorldDegree.longitude,this._WorldDegree.latitude,t+(this._WorldDegree.height||0)),this._addPoint(),this._addPostRender()}remove(){this.viewer.scene.postRender.removeEventListener(this._postRender,this),this.viewer.cesiumWidget.container.removeChild(this._$container),this.viewer.entities.remove(this.p)}getPosition(){return this._position}_addPoint(){this.p=this.viewer.entities.add({position:this._position,point:new d.PointGraphics({pixelSize:10,disableDepthTestDistance:Number.POSITIVE_INFINITY,color:d.Color.RED})})}_addDom(){this._$container.classList.add("gradient-label");let t=document.createElement("div");t.appendChild(this._label),this._$container.appendChild(t),this.viewer.cesiumWidget.container.appendChild(this._$container)}_addPostRender(){this.viewer.scene.postRender.addEventListener(this._postRender,this)}_postRender(){if(!this._$container)return;if(!this._position)return;const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,this._position,e),this._$container.style.position="absolute",this._$container.style.bottom=t-e.y+67+"px";const n=this._$container.offsetWidth;this._$container.style.left=e.x-n/2-2+"px",this.viewer.camera.positionCartographic.height>4e3?this._$container.style.display="none":this._$container.style.display="block"}}class Ji{constructor(t,e){this.viewer=t,this.position=d.Cartographic.fromDegrees(e.position.longitude,e.position.latitude),this.videoInfo=e,this.videoInfo.id||(this.videoInfo.id="HlsVideoWindow"+G.uuid()),this.isDestroyWindow=!1,this.screenEvent=qt.screenEvent}async load(){let t=this,e=new d.Cartesian3;t.entity||(t.entity=t.viewer.entities.add({id:t.videoInfo.id,name:t.videoInfo.name,position:e,billboard:{image:__webpack_require__(9196),scaleByDistance:new d.NearFarScalar(500,1,1200,.8),distanceDisplayCondition:new d.DistanceDisplayCondition(0,1e4),verticalOrigin:d.VerticalOrigin.BOTTOM}}));let n=await mt(t.videoInfo.position.longitude,t.videoInfo.position.latitude);this.position=d.Cartographic.fromDegrees(t.videoInfo.position.longitude,t.videoInfo.position.latitude,n),e=d.Cartesian3.fromDegrees(t.videoInfo.position.longitude,t.videoInfo.position.latitude,n),t.entity.position=e,t.screenEvent.addEventListener(Lt.LEFT_CLICK,Ft.Viewer3D,t.clickEntity.bind(t))}clickEntity(t){if(t&&t.position){let e=this.viewer.scene.pick(t.position),n=e?.id?.id;this.videoInfo.id===n&&this.init()}}async init(){this.closeWindow(),this.createDom(),this.load(),this.addEvent(),this.isDestroyWindow=!1}createDom(){this.containerDom=document.createElement("div"),this.containerDom.classList.add("video-popup3d-container");let t=document.createElement("div");t.classList.add("video-popup3d-header"),this.containerDom.appendChild(t);let e=document.createElement("span");e.innerHTML=this.videoInfo.name,e.classList.add("video-popup3d-header-title"),t.appendChild(e);let n=document.createElement("span");n.innerHTML="×",n.classList.add("video-popup3d-close"),t.appendChild(n);let r=document.createElement("div");r.classList.add("video-popup3d-body"),this.containerDom.appendChild(r),this.popup3dDom=r,this.viewer.cesiumWidget.container.append(this.containerDom),n.onclick=()=>{this.closeWindow()},this.createVideo()}createVideo(){let t=document.createElement("video");t.classList.add("video-js"),t.classList.add("vjs-default-skin"),t.setAttribute("controls",String(!0)),t.setAttribute("autoplay","autoplay"),t.setAttribute("preload","auto"),t.setAttribute("muted",String(!0)),this.popup3dDom.appendChild(t);let e="vid"+(new Date).getTime();t.setAttribute("id",e);let n=window.videojs(e);n.ready((()=>{let t=[{src:this.videoInfo.url,type:"application/x-mpegURL"}];n.src(t),n.load()})),this.player=n}addEvent(){this.viewer.scene.postRender.addEventListener(this.postRenderEvent,this)}postRenderEvent(){let t=this;const e=this.viewer.scene.canvas.height,n=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,d.Cartesian3.fromDegrees(t.videoInfo.position.longitude,t.videoInfo.position.latitude,t.position.height),n),this.containerDom.style.bottom=e-n.y+80+"px",this.containerDom.style.left=n.x+20+"px"}closeWindow(){this.isDestroyWindow||(this.player&&this.player.dispose(),this.viewer.scene.postRender.removeEventListener(this.postRenderEvent,this),this.containerDom&&this.containerDom.remove(),this.isDestroyWindow=!0)}destroy(){this.closeWindow(),this.viewer.entities.remove(this.entity)}}class Qi{constructor(t,e,n){this._WorldDegree=e,this._position=new d.Cartesian3.fromDegrees,this._viewer=t,this._label=n,this._$container=document.createElement("div")}async init(){this._$container.style.display="none",this._addDom();let t=await mt(this._WorldDegree.longitude,this._WorldDegree.latitude);this._position=d.Cartesian3.fromDegrees(this._WorldDegree.longitude,this._WorldDegree.latitude,t+(this._WorldDegree.height||0)),this._addPostRender()}remove(){this._$container.remove(),this._viewer.scene.postRender.removeEventListener(this._postRender,this)}getPosition(){return this._position}_addDom(){this._$container.innerHTML='<div class="hot-spot">\n            <div class="hot-spot-board hot-spot-board-medium"></div>\n            <div class="hot-spot-line hot-spot-line-medium"></div>\n        </div>';let t=this._$container.querySelector(".hot-spot"),e=this._$container.querySelector(".hot-spot-board");e.appendChild(this._label),this._viewer.cesiumWidget.container.appendChild(this._$container),t.style.backgroundImage=`url(${__webpack_require__(1259)})`,e.style.backgroundImage=`url(${__webpack_require__(9858)})`,this._$container.onmouseover=n=>{t.style.backgroundImage=`url(${__webpack_require__(3118)})`,e.style.backgroundImage=`url(${__webpack_require__(3353)})`},this._$container.onmouseout=n=>{t.style.backgroundImage=`url(${__webpack_require__(1259)})`,e.style.backgroundImage=`url(${__webpack_require__(9858)})`}}_addPostRender(){this._viewer.scene.postRender.addEventListener(this._postRender,this)}_postRender(){if(!this._$container)return;const t=this._viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this._viewer.scene,this._position,e),this._$container.style.position="absolute",this._$container.style.bottom=t-e.y+10+"px";const n=this._$container.offsetWidth;this._$container.style.left=e.x-n/2+"px",this._viewer.camera.positionCartographic.height>5e3?this._$container.style.display="none":this._$container.style.display="block"}}class $i{constructor(t,e,n,r){this.viewer=t,this.position=e,this.fields=n,this.values=r,this.init()}init(){this.createDom(),this.addEvent()}createDom(){let t=document.createElement("div");t.classList.add("leaflet-popup-container");let e=document.createElement("span");e.innerHTML="×",e.classList.add("leaflet-popup-close-button"),t.appendChild(e);let n=document.createElement("div");n.classList.add("leaflet-popup-content-wrapper"),t.appendChild(n),this.createContent(n);let r=document.createElement("div");r.classList.add("leaflet-popup-tip-container"),t.appendChild(r);let i=document.createElement("div");i.classList.add("leaflet-popup-tip"),r.appendChild(i),this.$container=t,this.$body=n,this.viewer.cesiumWidget.container.append(t),e.onclick=t=>{this.close()}}createContent(t){let e="";for(let t=0;t<this.values.length;t++)e+=`\n                <tr>\n                  <td><label style="color:#e0f102;">${this.fields[t]}</label>：${this.values[t]}</td>\n                </tr>`;let n=` <table>${e}</table> `;t.innerHTML=n}addEvent(){this.viewer.scene.postRender.addEventListener(this.postRenderEvent,this)}postRenderEvent(){const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,this.position,e),this.$container.style.bottom=t-e.y+30+"px";const n=this.$container.offsetWidth;this.$container.style.left=e.x-n/2+"px",this.viewer.camera.positionCartographic.height>4e3?this.$container.style.display="none":this.$container.style.display="block"}close(){this.viewer.scene.postRender.removeEventListener(this.postRenderEvent,this),this.$container.remove()}}var to,eo,no,ro=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},io=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class oo{constructor(t,e,n){to.set(this,void 0),eo.set(this,void 0),no.set(this,void 0),ro(this,to,t,"f"),ro(this,eo,e,"f"),ro(this,no,n,"f"),this.initDom(),this.initEvent()}initDom(){this.$htmlContainer=document.createElement("h3"),this.$htmlContainer.classList.add("label-led-container"),this.$htmlContainer.innerHTML=io(this,no,"f"),io(this,to,"f").cesiumWidget.container.appendChild(this.$htmlContainer)}initEvent(){io(this,to,"f").scene.postRender.addEventListener(this.postRenderEventHandle,this)}postRenderEventHandle(){const t=io(this,to,"f").scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(io(this,to,"f").scene,io(this,eo,"f"),e),this.$htmlContainer.style.bottom=t+30-e.y+"px";const n=this.$htmlContainer.offsetWidth;this.$htmlContainer.style.left=e.x-n/2+"px";const r=io(this,to,"f").camera.position;let i=io(this,to,"f").scene.globe.ellipsoid.cartesianToCartographic(r).height;i+=io(this,to,"f").scene.globe.ellipsoid.maximumRadius,d.Cartesian3.distance(r,io(this,eo,"f"))>i?this.$htmlContainer.style.display="none":(this.$htmlContainer.style.display="block",io(this,to,"f").camera.positionCartographic.height>4e5?this.$htmlContainer.style.display="none":this.$htmlContainer.style.display="block")}remove(){this.$htmlContainer.parentNode.removeChild(this.$htmlContainer),io(this,to,"f").scene.postRender.removeEventListener(this.postRenderEventHandle,this)}}to=new WeakMap,eo=new WeakMap,no=new WeakMap;class ao{constructor(t,e,n,r){this.viewer=t,this.WorldDegree=e,this.position=new d.Cartesian3.fromDegrees,this.option=r,this.domId="liquidfill_"+(new Date).getTime(),this.container=document.createElement("div"),this.init()}async init(){this.container.style.display="none",this._addDom();let t=await mt(this.WorldDegree.longitude,this.WorldDegree.latitude);console.log(t),this.position=d.Cartesian3.fromDegrees(this.WorldDegree.longitude,this.WorldDegree.latitude,t+(this.WorldDegree.height||0)),this._addPostRender(),this.initChart()}getPosition(){return this.position}_addPostRender(){this.viewer.scene.postRender.addEventListener(this._postRender,this)}_postRender(){if(!this.container||!this.container.style)return;if(!this.position)return;const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,this.position,e),this.container.style.bottom=t-e.y+10+"px";const n=this.container.offsetWidth;this.container.style.left=e.x-n/2+"px",this.viewer.camera.positionCartographic.height>5e3?this.container.style.display="none":this.container.style.display="block"}remove(){this.viewer.scene.postRender.removeEventListener(this._postRender,this),this.chart.dispose(),this.viewer.cesiumWidget.container.removeChild(this.container)}_addDom(){this.container=document.createElement("div"),this.container.style.cssText="position:absolute;height:80px;width:80px;pointer-events:none",this.container.setAttribute("id",this.domId),this.viewer.cesiumWidget.container.appendChild(this.container)}initChart(){this.chart=echarts.init(this.container),this.option||(this.option=this.getOption()),this.chart.setOption(this.option)}getOption(){return{series:[{type:"liquidFill",data:[.51],radius:"90%",outline:{show:!1},label:{position:["50%","65%"],textStyle:{fontSize:15,fontFamily:"Lobster Two"}},itemStyle:{color:"#ff9501"}}]}}}class so{constructor(t,e,n,r,i){if(!Array.isArray(r)||!Array.isArray(i))throw"字段和值必须为数组类型";if(r.length!=i.length)throw"字段和值数组长度不一致！";this.viewer=t,this.position=e,this.title=n,this.fields=r,this.values=i,this.createDom(),t.cesiumWidget.container.appendChild(this.container),this.initDom(),this.initEvent(),this.addPostRender()}createDom(){this.container=document.createElement("div"),this.container.innerHTML='  <div class="MultiFieldAdaptWindow-container" v-if="show">\n          <div class="MultiFieldAdaptWindow-header">\n            <span class="MultiFieldAdaptWindow-title">  '+this.title+'</span>\n            <span class="MultiFieldAdaptWindow-close" title="关闭"  >×</span>\n          </div>\n          <div class="MultiFieldAdaptWindow-body">\n           \x3c!-- <div v-for="(field,index) in fields" :key="index" class="MultiFieldAdaptWindow-info-item">\n              <span class="MultiFieldAdaptWindow-ifno-label" :style="getFieldStyle()">{{field}}：</span>\n              <span class="MultiFieldAdaptWindow-ifno-text">{{formatValue(values[index])}}</span>\n            </div>--\x3e\n          </div>\n        </div>'}initDom(){for(let t=0;t<this.values.length;t++){let e=document.createElement("div");e.classList.add("MultiFieldAdaptWindow-info-item");let n=document.createElement("span");n.classList.add("MultiFieldAdaptWindow-ifno-label"),n.innerHTML=this.fields[t]+"：",e.appendChild(n),n=document.createElement("span"),n.classList.add("MultiFieldAdaptWindow-ifno-text"),n.innerHTML=this.values[t],e.appendChild(n),this.container.getElementsByClassName("MultiFieldAdaptWindow-body")[0].appendChild(e)}}initEvent(){this.container.getElementsByClassName("MultiFieldAdaptWindow-close")[0].onclick=t=>{this.close()}}addPostRender(){this.viewer.scene.postRender.addEventListener(this.postRender,this)}postRender(){if(!this.container||!this.container.style)return;const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,this.position,e),this.container.style.position="absolute",this.container.style.bottom=t-e.y+80+"px";const n=this.container.scrollWidth;this.container.style.left=e.x-n/2+"px"}close(){this.container.remove(),this.viewer.scene.postRender.removeEventListener(this.postRender,this)}}var lo,uo,co,ho,po,fo,go,yo,mo,vo,wo=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},bo=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class xo{constructor(t,e,n){lo.add(this),uo.set(this,void 0),co.set(this,void 0),ho.set(this,void 0),po.set(this,void 0),fo.set(this,void 0),go.set(this,void 0),wo(this,uo,t,"f"),wo(this,co,e,"f"),wo(this,ho,n||{},"f"),this.DataLoadedEvent=new d.Event,wo(this,go,new d.GeoJsonDataSource,"f"),wo(this,po,!1,"f")}init(){wo(this,po,!0,"f"),bo(this,lo,"m",yo).call(this)}getOptions(){return bo(this,ho,"f")}destroy(){bo(this,po,"f")&&(bo(this,go,"f").clustering.clusterEvent.removeEventListener(bo(this,fo,"f")),bo(this,uo,"f").dataSources.remove(bo(this,go,"f")))}}uo=new WeakMap,co=new WeakMap,ho=new WeakMap,po=new WeakMap,fo=new WeakMap,go=new WeakMap,lo=new WeakSet,yo=function(){(new d.GeoJsonDataSource).load(bo(this,co,"f")).then((t=>{wo(this,go,t,"f"),bo(this,uo,"f").dataSources.add(t),t.clustering.enabled=!0,t.clustering.pixelRange=bo(this,ho,"f").pixelRange||30,t.clustering.minimumClusterSize=bo(this,ho,"f").minimumClusterSize||3,bo(this,lo,"m",mo).call(this,t),t.entities.values.forEach((t=>{t.billboard.image=bo(this,ho,"f").billboardImg||__webpack_require__(9196),t.type="cluster1"}))}))},mo=function(t){wo(this,fo,t.clustering.clusterEvent.addEventListener(((t,e)=>{e.billboard.id=e.label.id,e.billboard.show=bo(this,lo,"m",vo).call(this,bo(this,ho,"f").billboard,!0),e.point.show=bo(this,lo,"m",vo).call(this,bo(this,ho,"f").point,!1),e.label.show=bo(this,lo,"m",vo).call(this,bo(this,ho,"f").label,!1),e.billboard.verticalOrigin=d.VerticalOrigin.BOTTOM,e.billboard.disableDepthTestDistance=Number.POSITIVE_INFINITY,e.billboard.heightReference=d.HeightReference.RELATIVE_TO_GROUND,e.point.disableDepthTestDistance=Number.POSITIVE_INFINITY,e.label.verticalOrigin=d.VerticalOrigin.BOTTOM,e.label.disableDepthTestDistance=Number.POSITIVE_INFINITY,e.label.heightReference=d.HeightReference.RELATIVE_TO_GROUND,bo(this,ho,"f").isExample?t.length>=300?e.billboard.image=__webpack_require__(2867):t.length>=150?e.billboard.image=__webpack_require__(399):t.length>=90?e.billboard.image=__webpack_require__(7672):t.length>=30?e.billboard.image=__webpack_require__(8404):t.length>10?e.billboard.image=__webpack_require__(3202):e.billboard.image=__webpack_require__(1295)(`./${t.length}.png`):e.billboard.image=bo(this,ho,"f").billboardImg||__webpack_require__(9196)})),"f")},vo=function(t,e){return void 0===t?e:t};class _o{constructor(t){this.viewer=t,this.billboards=this.viewer.scene.primitives.add(new d.BillboardCollection),this.labels=this.viewer.scene.primitives.add(new d.LabelCollection)}_add(t,e,n){this.addBillboard(t,n),this.addLabel(t,e)}addBillboard(t,e){this.billboards.add({position:t,heightReference:d.HeightReference.RELATIVE_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY,image:e,scale:.6,verticalOrigin:d.VerticalOrigin.BOTTOM,scaleByDistance:new d.NearFarScalar(5e4,1,1e6,.4)})}addLabel(t,e){this.labels.add({position:t,text:e,fillColor:d.Color.WHITE,heightReference:d.HeightReference.RELATIVE_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY,scale:.4,font:"normal 40px MicroSoft YaHei",distanceDisplayCondition:new d.DistanceDisplayCondition(0,5e5),scaleByDistance:new d.NearFarScalar(5e4,1,1e6,.4),verticalOrigin:d.VerticalOrigin.BOTTOM,style:d.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new d.Cartesian2(14,-4),outlineWidth:20,outlineColor:d.Color.BLACK})}remove(){this.viewer.scene.primitives.remove(this.billboards),this.viewer.scene.primitives.remove(this.labels)}}class Eo{constructor(t,e,n,r=!0){this.viewer=t,this.worldDegree=n,this.closeSurface=r,this.isDestroyWindow=!1,this.windowDom=document.createElement("div"),this.containerDom=e||document.createElement("div")}async initWindow(){this.windowDom.style.display="none",this.isDestroyWindow=!1,this.createDom(),this.closeSurface&&(this.worldDegree.height=await mt(this.worldDegree.longitude,this.worldDegree.latitude)),this.addEvent()}destroyWindow(){this.isDestroyWindow||(this.isDestroyWindow=!0,this.windowDom.remove(),this.viewer.scene.postRender.removeEventListener(this.postRenderEvent,this))}createDom(){this.windowDom.classList.add("point-sample-label-container");let t=document.createElement("div");t.classList.add("point-sample-label-closeBtn"),t.innerHTML="×",t.addEventListener("click",this.destroyWindow.bind(this),!1),this.windowDom.appendChild(t);let e=document.createElement("div");e.classList.add("point-sample-label-text"),e.appendChild(this.containerDom),this.windowDom.appendChild(e),this.viewer.cesiumWidget.container.appendChild(this.windowDom)}addEvent(){this.viewer.scene.postRender.addEventListener(this.postRenderEvent,this)}postRenderEvent(){const t=this.viewer.scene.canvas.height,e=new d.Cartesian2;d.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,d.Cartesian3.fromDegrees(this.worldDegree.longitude,this.worldDegree.latitude,this.worldDegree.height),e),this.windowDom.style.bottom=t-e.y+10+"px",this.windowDom.style.left=e.x+20+"px",this.windowDom.style.display="block"}}class So{constructor(t,e){echarts.registerCoordinateSystem("cesium",this.getE3CoordinateSystem(t)),this.init(t,e),this.visible=!0,this.setChartOption(e)}init(t,e){this.setBaseViewer(t),this.createLayer()}setBaseViewer(t){this._viewer=t}setChartOption(t){this.chartOption=t,this.setCharts()}setVisible(t){this.box&&this.visible!==t&&(this.box.hidden=!t,this.visible=t,!0===t&&setCharts())}refreshBegin(){this.box.hidden=!0}refreshing(){this.setCharts()}refreshEnd(){this.box.hidden=!1}on(t,e,n){this.chart.on(t,e,n)}off(t,e,n){this.chart.off(t,e,n)}setCharts(){this.visible&&null!=this.chartOption&&"undefined"!=this.chartOption&&(this.chart.setOption(this.chartOption),this.chartOption.animation=!1)}createLayer(){const t=this._viewer.scene;t.canvas.setAttribute("tabIndex",0);const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width=t.canvas.width+"px",e.style.height=t.canvas.height+"px",e.style.pointerEvents="none",e.setAttribute("class","echartMap"),this.box=e,this._viewer.container.appendChild(e),this.chart=echarts.init(e),this.startSceneEventListeners()}removeLayer(){this.box.outerHTML="",this.box=null,this.chart=null,this.chartOption=null,this._viewer.scene.postRender.removeEventListener(this.moveHandler,this),this._viewer=void 0}remove(){this.removeLayer()}startSceneEventListeners(){this._viewer.scene.postRender.addEventListener(this.moveHandler,this)}moveHandler(){this.visible&&(this.setCharts(),this.chart.resize({width:this._viewer.canvas.width,height:this._viewer.canvas.height}),this.box.hidden=!1)}getE3CoordinateSystem(t){var e=function(t){this._viewer=t,this._mapOffset=[0,0]};return e.create=function(n){n.eachSeries((function(n){"cesium"===n.get("coordinateSystem")&&(n.coordinateSystem=new e(t))}))},e.getDimensionsInfo=function(){return["x","y"]},e.dimensions=["x","y"],e.prototype.dimensions=["x","y"],e.prototype.setMapOffset=function(t){this._mapOffset=t},e.prototype.dataToPoint=function(t){let e=this._viewer.scene,n=[0,0],r=d.Cartesian3.fromDegrees(t[0],t[1]);if(!r)return n;if(e.mode===d.SceneMode.SCENE3D&&d.Cartesian3.angleBetween(e.camera.position,r)>d.Math.toRadians(80))return!1;let i=e.cartesianToCanvasCoordinates(r);return i?[i.x-this._mapOffset[0],i.y-this._mapOffset[1]]:n},e.prototype.pointToData=function(e){let n=this._mapOffset,r=t.scene.globe.ellipsoid,i=new d.cartesian3(e[1]+n[1],e[2]+n[2],0),o=r.cartesianToCartographic(i);return o?[o.lng,o.lat]:[0,0]},e.prototype.getviewerRect=function(){let t=this._viewer.canvas;return new echarts.graphic.BoundingRect(0,0,t.width,t.height)},e.prototype.getRoamTransform=function(){return matrix.create()},e}}let Co=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},To=function(){function t(t,e){for(let n=0;n<e.length;n++){let r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Io=function t(e,n,r){null===e&&(e=Function.prototype);let i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){let i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in i)return i.value;{let t=i.get;if(void 0===t)return;return t.call(r)}},Ao=Function,Po=function(t){if(!t)return!1;function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);let o=Co(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return Ao?(o.map=t,o.scene=t.scene,o.dataSet=n,r=r||{},o.init(r),o.argCheck(r),o.initDevicePixelRatio(),o.canvasLayer=i,o.stopAniamation=!1,o.animation=r.animation,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o.bindEvent(),o):Co(o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),To(e,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function(t){let n=t.point,r=e.prototype.__proto__||Object.getPrototypeOf(e.prototype);Io(r,"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){let n=t.point,r=e.prototype.__proto__||Object.getPrototypeOf(e.prototype);Io(r,"mousemoveEvent",this).call(this,n,t)}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){let t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(){this.options.methods&&(this.options.methods.click,this.options.methods.mousemove)}},{key:"unbindEvent",value:function(){this.map}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"_canvasUpdate",value:function(t){let e=this.scene;if(this.canvasLayer&&!this.stopAniamation){let n=this.options.animation,r=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(let t in this.options)r[t]=this.options[t];else r.clear(r.COLOR_BUFFER_BIT);let i={transferCoordinate:function(t){let n=[99999,99999],r=Cesium.Cartesian3.fromDegrees(t[0],t[1]);if(!r)return n;let i=e.cartesianToCanvasCoordinates(r);return i?!(e.mode===Cesium.SceneMode.SCENE3D&&Cesium.Cartesian3.angleBetween(e.camera.position,r)>Cesium.Math.toRadians(80))&&[i.x,i.y]:n}};t&&(i.filter=function(e){let r=n.trails||10;return!!(t&&e.time>t-r&&e.time<t)});let o=this.dataSet.get(i);this.processData(o),"m"===this.options.unit&&this.options.size&&(this.options._size=this.options.size);let a=Cesium.SceneTransforms.wgs84ToWindowCoordinates(e,Cesium.Cartesian3.fromDegrees(0,0));this.drawContext(r,new mapv.DataSet(o),this.options,a),this.options.updateCallback&&this.options.updateCallback(t)}}},{key:"updateData",value:function(t,n){if(t){let r=t.get(),i=e.prototype.__proto__||Object.getPrototypeOf(e.prototype);this.dataSet.set(r),Io(i,"update",this).call(this,{options:n})}}},{key:"addData",value:function(t,e){if(t){let n=t.get;this.dataSet.add(n),this.update({options:e})}}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){let e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&(this.dataSet.clear(),this.update({options:null}))}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){t&&t.hasOwnProperty("clearRect")&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"destroy",value:function(){this.unbindEvent(),this.clear(this.getContext()),this.clearData(),this.animator&&(this.animator.stop(),this.animator=null,this.canvasLayer=null)}}]),e}(window?.mapv?.baseLayer),ko=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);let o=this;o.map=e,o.scene=e.scene,o.mapvBaseLayer=new Po(e,n,r,o),o.mapVOptions=r,o.initDevicePixelRatio(),o.canvas=o._createCanvas(),o.render=o.render.bind(o),i?(o.container=i,i.appendChild(o.canvas)):(o.container=e.container,o.addInnerContainer()),o.bindEvent(),o._reset()}return e=t,(n=[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){let t=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);let e=new d.ScreenSpaceEventHandler(this.canvas);e.setInputAction((function(e){t.innerMoveEnd()}),d.ScreenSpaceEventType.LEFT_UP),e.setInputAction((function(e){t.innerMoveEnd()}),d.ScreenSpaceEventType.MIDDLE_UP),this.handler=e}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer&&(this.mapvBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this))}},{key:"moveEndEvent",value:function(){this.scene.postRender.removeEventListener(this._reset,this),this.mapvBaseLayer&&this.mapvBaseLayer.animatorMoveendEvent(),this._reset()}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(t,e){this.mapvBaseLayer&&this.mapvBaseLayer.addData(t,e)}},{key:"updateData",value:function(t,e){this.mapvBaseLayer&&this.mapvBaseLayer.updateData(t,e)}},{key:"getData",value:function(){if(this.mapvBaseLayer)return this.dataSet=this.mapvBaseLayer.getData(),this.dataSet}},{key:"removeData",value:function(t){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)}},{key:"removeAllData",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block"}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none"}},{key:"_createCanvas",value:function(){let t=0,e=document.createElement("canvas");e.id=this.mapVOptions.layerid||"mapv"+t++,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.mapVOptions.zIndex||100,e.width=parseInt(this.map.canvas.width),e.height=parseInt(this.map.canvas.height),e.style.width=this.map.canvas.style.width,e.style.height=this.map.canvas.style.height;let n=this.devicePixelRatio;return"2d"===this.mapVOptions.context&&e.getContext(this.mapVOptions.context)?.scale(n,n),e}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.unbindEvent(),this.remove()}},{key:"remove",value:function(){this.mapvBaseLayer&&(this.removeAllData(),this.mapvBaseLayer.destroy(),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(t){t&&this.updateData(t.data,t.options)}},{key:"resizeCanvas",value:function(){if(this.canvas){let t=this.canvas;t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.width=parseInt(this.map.canvas.width),t.height=parseInt(this.map.canvas.height),t.style.width=this.map.canvas.style.width,t.style.height=this.map.canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer._canvasUpdate()}}])&&function(t,e){for(let n=0;n<e.length;n++){let r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),t;var e,n}();class Oo{constructor(t){this.viewer=t,this.initKeyEvent(),this.isActivate=!0}activate(){this.isActivate=!0}initKeyEvent(){let t=this.viewer.canvas;t.setAttribute("tabindex","0"),t.focus(),t.onclick=function(){t.focus()};let e={};t.addEventListener("keydown",(t=>{this.changeFlagForKeyCode(t.keyCode,e,!0)}),!1),t.addEventListener("keyup",(t=>{this.changeFlagForKeyCode(t.keyCode,e,!1)}),!1);let n=this.viewer.camera,r=this.viewer.scene.globe.ellipsoid;this.viewer.clock.onTick.addEventListener((t=>{this.isActivate&&this.setCamera(e,n,r)}))}setCamera(t,e,n){let r=n.cartesianToCartographic(e.position).height/100;t.moveForward&&e.moveForward(r),t.moveBackward&&e.moveBackward(r),t.moveUp&&e.moveUp(r),t.moveDown&&e.moveDown(r),t.moveLeft&&e.moveLeft(r),t.moveRight&&e.moveRight(r)}changeFlagForKeyCode(t,e,n){switch(t){case"W".charCodeAt(0):return void(e.moveForward=n);case"S".charCodeAt(0):return void(e.moveBackward=n);case"Q".charCodeAt(0):return void(e.moveUp=n);case"E".charCodeAt(0):return void(e.moveDown=n);case"D".charCodeAt(0):return void(e.moveRight=n);case"A".charCodeAt(0):return void(e.moveLeft=n);default:return}}deactivate(){this.isActivate=!1}}class Mo{constructor(t,e,n){this.viewer=t,this.position=e,this.modelUrl=n.modelUrl,this.enable=!1,this.options=n,this.radian=d.Math.toRadians(n.angle||1),this.speed=n.speed||1,this.speedVector=new d.Cartesian3,this.flag={moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1}}activate(){let t=this.viewer.canvas;t.setAttribute("tabindex","0"),t.focus(),this.enable||(this.hpRoll=new d.HeadingPitchRoll,this.fixedFrameTransforms=d.Transforms.localFrameToFixedFrameGenerator("north","west"),this.addModelPrimitive(),this.registerEvens(),this.enable=!0)}addModelPrimitive(){this.moveModel=this.viewer.scene.primitives.add(d.Model.fromGltf({url:this.modelUrl,modelMatrix:d.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,d.Ellipsoid.WGS84,this.fixedFrameTransforms),scale:this.options.scale,minimumPixelSize:this.options.minimumPixelSize}))}registerEvens(){let t=this.viewer.canvas;t.addEventListener("keydown",(t=>{this.setFlagStatus(t,!0)}),!1),t.addEventListener("keyup",(t=>{this.setFlagStatus(t,!1)}),!1),this.viewer.clock.onTick.addEventListener(this.tickEventHandler,this)}tickEventHandler(){const t=this.flag;let e=this.hpRoll;const n=this.radian;t.moveUp&&(t.moveLeft&&(e.heading-=n),t.moveRight&&(e.heading+=n),this.moveModelByKey(!0)),t.moveDown&&(t.moveLeft&&(e.heading-=n),t.moveRight&&(e.heading+=n),this.moveModelByKey(!1)),!t.moveLeft||t.moveDown||t.moveUp||t.moveRight||(e.heading-=n,d.Transforms.headingPitchRollToFixedFrame(this.position,e,d.Ellipsoid.WGS84,this.fixedFrameTransforms,this.moveModel.modelMatrix)),!t.moveRight||t.moveDown||t.moveUp||t.moveLeft||(e.heading+=n,d.Transforms.headingPitchRollToFixedFrame(this.position,e,d.Ellipsoid.WGS84,this.fixedFrameTransforms,this.moveModel.modelMatrix))}moveModelByKey(t){this.speedVector=t?d.Cartesian3.multiplyByScalar(d.Cartesian3.UNIT_X,this.speed,this.speedVector):d.Cartesian3.multiplyByScalar(d.Cartesian3.UNIT_X,-this.speed,this.speedVector);let e=d.Matrix4.multiplyByPoint(this.moveModel.modelMatrix,this.speedVector,this.position);d.Transforms.headingPitchRollToFixedFrame(e,this.hpRoll,d.Ellipsoid.WGS84,this.fixedFrameTransforms,this.moveModel.modelMatrix)}setFlagStatus(t,e){switch(t.keyCode){case 65:this.flag.moveLeft=e;break;case 87:this.flag.moveUp=e;break;case 68:this.flag.moveRight=e;break;case 83:this.flag.moveDown=e}}deactivate(){this.unRegisterEvents(),this.removeModelPrimitive(),this.enable=!1}removeModelPrimitive(){this.viewer.scene.primitives.remove(this.moveModel)}unRegisterEvents(){this.viewer.clock.onTick.removeEventListener(this.tickEventHandler,this)}}class No{constructor(t,e,n){this.viewer=t,this.position=e,this.enable=!1,this.keyboardModelExtOptions=n,this.keyboardModelExtOptions.speed=n.speed||1,this.keyboardModelExtOptions.aotuPickHeight=n.aotuPickHeight||!0,this.speedVector=new d.Cartesian3,this.radian=d.Math.toRadians(n.angle||1),this.hpRange=new d.HeadingPitchRange,this.role=n.role||0,this.flag={moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1}}activate(){let t=this.viewer.canvas;t.setAttribute("tabindex","0"),t.focus(),this.enable||(this.hpRoll=new d.HeadingPitchRoll,this.fixedFrameTransforms=d.Transforms.localFrameToFixedFrameGenerator("north","west"),this.addModelPrimitive(),this.registerEvens(),this.enable=!0)}addModelPrimitive(){this.moveModel=this.viewer.scene.primitives.add(d.Model.fromGltf({url:this.keyboardModelExtOptions.modelUrl,modelMatrix:d.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,d.Ellipsoid.WGS84,this.fixedFrameTransforms),scale:this.keyboardModelExtOptions.scale,minimumPixelSize:this.keyboardModelExtOptions.minimumPixelSize}))}registerEvens(){let t=this.viewer.canvas;t.addEventListener("keydown",(t=>{this.setFlagStatus(t,!0)}),!1),t.addEventListener("keyup",(t=>{this.setFlagStatus(t,!1)}),!1),this.viewer.clock.onTick.addEventListener(this.tickEventHandler,this)}tickEventHandler(){const t=this.flag;let e=this.hpRoll;const n=this.radian;t.moveUp&&(t.moveLeft&&(e.heading-=n),t.moveRight&&(e.heading+=n),this.moveModelByKey(!0)),t.moveDown&&(t.moveLeft&&(e.heading-=n),t.moveRight&&(e.heading+=n),this.moveModelByKey(!1)),!t.moveLeft||t.moveDown||t.moveUp||t.moveRight||(e.heading-=n,d.Transforms.headingPitchRollToFixedFrame(this.position,e,d.Ellipsoid.WGS84,this.fixedFrameTransforms,this.moveModel.modelMatrix)),!t.moveRight||t.moveDown||t.moveUp||t.moveLeft||(e.heading+=n,d.Transforms.headingPitchRollToFixedFrame(this.position,e,d.Ellipsoid.WGS84,this.fixedFrameTransforms,this.moveModel.modelMatrix)),t.moveLeft||t.moveDown||t.moveUp||t.moveRight?this.lookAt():this.viewer.camera.lookAtTransform(d.Matrix4.IDENTITY)}lookAt(){if(!this.role)return;let t=2*Math.max(this.moveModel.boundingSphere.radius,this.viewer.camera.frustum.near),e=new d.Cartesian3;d.Matrix4.multiplyByPoint(this.moveModel.modelMatrix,e,this.position),this.hpRange.heading=this.hpRoll.heading,this.hpRange.pitch=this.hpRoll.pitch-d.Math.toRadians(30),this.hpRange.range=5*t,this.viewer.camera.lookAt(this.position,this.hpRange)}moveModelByKey(t){this.speedVector=t?d.Cartesian3.multiplyByScalar(d.Cartesian3.UNIT_X,this.keyboardModelExtOptions.speed,this.speedVector):d.Cartesian3.multiplyByScalar(d.Cartesian3.UNIT_X,-this.keyboardModelExtOptions.speed,this.speedVector);let e=d.Matrix4.multiplyByPoint(this.moveModel.modelMatrix,this.speedVector,this.position);this.keyboardModelExtOptions.aotuPickHeight&&(e=this.getPositionByHeight(e)),d.Transforms.headingPitchRollToFixedFrame(e,this.hpRoll,d.Ellipsoid.WGS84,this.fixedFrameTransforms,this.moveModel.modelMatrix)}getPositionByHeight(t){let e=d.Cartographic.fromCartesian(t),n=this.viewer.scene.sampleHeight(e,[this.moveModel]);return e.height=n,d.Cartographic.toCartesian(e,d.Ellipsoid.WGS84)}setFlagStatus(t,e){switch(t.keyCode){case 65:this.flag.moveLeft=e;break;case 87:this.flag.moveUp=e;break;case 68:this.flag.moveRight=e;break;case 83:this.flag.moveDown=e}}deactivate(){this.unRegisterEvents(),this.removeModelPrimitive(),this.enable=!1}removeModelPrimitive(){this.viewer.scene.primitives.remove(this.moveModel)}unRegisterEvents(){this.viewer.clock.onTick.removeEventListener(this.tickEventHandler,this)}}let Lo={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(t,e){let n=6378245,r=.006693421622965943,i=this.transformLat(e-105,t-35),o=this.transformLon(e-105,t-35),a=t/180*this.PI,s=Math.sin(a);s=1-r*s*s;let l=Math.sqrt(s);return i=180*i/(n*(1-r)/(s*l)*this.PI),o=180*o/(n/l*Math.cos(a)*this.PI),{lat:i,lon:o}},gcj_encrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lon:e};let n=this.delta(t,e);return{lat:t+n.lat,lon:e+n.lon}},gcj_decrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lon:e};let n=this.delta(t,e);return{lat:t-n.lat,lon:e-n.lon}},gcj_decrypt_exact:function(t,e){let n,r,i=.01,o=.01,a=t-i,s=e-o,l=t+i,u=e+o,c=0;for(;;){n=(a+l)/2,r=(s+u)/2;let h=this.gcj_encrypt(n,r);if(i=h.lat-t,o=h.lon-e,Math.abs(i)<1e-9&&Math.abs(o)<1e-9)break;if(i>0?l=n:a=n,o>0?u=r:s=r,++c>1e4)break}return{lat:n,lon:r}},bd_encrypt:function(t,e){let n=e,r=t,i=Math.sqrt(n*n+r*r)+2e-5*Math.sin(r*this.x_pi),o=Math.atan2(r,n)+3e-6*Math.cos(n*this.x_pi),a=i*Math.cos(o)+.0065;return{lat:i*Math.sin(o)+.006,lon:a}},bd_decrypt:function(t,e){let n=e-.0065,r=t-.006,i=Math.sqrt(n*n+r*r)-2e-5*Math.sin(r*this.x_pi),o=Math.atan2(r,n)-3e-6*Math.cos(n*this.x_pi),a=i*Math.cos(o);return{lat:i*Math.sin(o),lon:a}},mercator_encrypt:function(t,e){let n=20037508.34*e/180,r=Math.log(Math.tan((90+t)*this.PI/360))/(this.PI/180);return r=20037508.34*r/180,{lat:r,lon:n}},mercator_decrypt:function(t,e){let n=e/20037508.34*180,r=t/20037508.34*180;return r=180/this.PI*(2*Math.atan(Math.exp(r*this.PI/180))-this.PI/2),{lat:r,lon:n}},distance:function(t,e,n,r){let i=Math.cos(t*this.PI/180)*Math.cos(n*this.PI/180)*Math.cos((e-r)*this.PI/180)+Math.sin(t*this.PI/180)*Math.sin(n*this.PI/180);return i>1&&(i=1),i<-1&&(i=-1),6371e3*Math.acos(i)},outOfChina:function(t,e){return e<72.004||e>137.8347||t<.8293||t>55.8271},transformLat:function(t,e){let n=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,n+=2*(20*Math.sin(e*this.PI)+40*Math.sin(e/3*this.PI))/3,n+=2*(160*Math.sin(e/12*this.PI)+320*Math.sin(e*this.PI/30))/3,n},transformLon:function(t,e){let n=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,n+=2*(20*Math.sin(t*this.PI)+40*Math.sin(t/3*this.PI))/3,n+=2*(150*Math.sin(t/12*this.PI)+300*Math.sin(t/30*this.PI))/3,n}};function Ro(t){let e=Lo.gcj_decrypt(t.latitude,t.longitude);return{longitude:e.lon,latitude:e.lat}}function Do(t){let e=Lo.gcj_encrypt(t.latitude,t.longitude);return{longitude:e.lon,latitude:e.lat}}let Fo={key:"745ba982f4eb68c773bd0cb3a2e51358",navigation:async function(t,e,n=[],r=[]){let i=Do(t||{longitude:108.46385538126562,latitude:30.7851146657642}),o=i.longitude+","+i.latitude,a=Do(e||{longitude:108.47119096640783,latitude:30.78348048735882}),s=a.longitude+","+a.latitude,l="";(n=n||[{longitude:108.46359783343034,latitude:30.783531080888885}]).forEach((t=>{let e=Do(t);l+=`${e.longitude},${e.latitude};`}));let u="";r.forEach((t=>{t.forEach((t=>{let e=Do(t);u+=`${e.longitude},${e.latitude};`})),u+="|"}));let c=`https://restapi.amap.com/v3/direction/driving?key=${this.key}&output=json&extensions=all&strategy=11&origin=${o}&destination=${s}&waypoints=${l};&avoidpolygons=${u}`,h=(await fetch(c).then((t=>t.json()))).route;return h.origin=Ro({longitude:h.origin.split(",")[0],latitude:h.origin.split(",")[0],height:0}),h.destination=Ro({longitude:h.destination.split(",")[0],latitude:h.destination.split(",")[0],height:0}),h.paths.forEach((t=>{t.steps.forEach((t=>{let e=[];e.push(...t.polyline.split(";")),e=e.map((t=>{let e=Lo.gcj_decrypt(1*t.split(",")[1],1*t.split(",")[0]);return{longitude:e.lon,latitude:e.lat}})),t.polyline=e}))})),h},entityNaviLine:function(t=[],e=""){const n=[];return t.forEach((t=>{n.push(t.longitude,t.latitude)})),new d.Entity({id:"路径规划-方案-"+e,name:"路径规划-方案-"+e,polyline:{positions:d.Cartesian3.fromDegreesArray(n),width:15,material:new Ei({color:d.Color.fromRandom().withAlpha(.7),duration:5e3}),clampToGround:!0}})},entityAvoidRange:function(t=[]){const e=[];return t.forEach((t=>{e.push(t.longitude,t.latitude)})),new d.Entity({name:"避让区",polygon:{hierarchy:d.Cartesian3.fromDegreesArray(e),material:d.Color.CRIMSON.withAlpha(.4)},polyline:{positions:d.Cartesian3.fromDegreesArray(e),width:2,material:new d.PolylineDashMaterialProperty({color:d.Color.WHITE}),clampToGround:!0}})}},jo=__webpack_require__(3357),zo=__webpack_require__(1146),Go=__webpack_require__(404);var Bo;!function(t){t.AMap="AMap",t.GraphHopper="GraphHopper"}(Bo||(Bo={}));class Uo{constructor(t,e){this.avoidRanges=[],this.dataSourceToo=new d.CustomDataSource("路径规划-实体集合"),this.drawShape=new at(t),this.startingPointEntity=null,this.endPointEntity=null,this.passPointEntityArr=[],this.avoidRangeEntityArr=[],this.roadEntityArr=[],this.startingPoint={longitude:0,latitude:0,height:0},this.endPoint={longitude:0,latitude:0,height:0},this.passPointArr=[],this.avoidRanges=[],this.routingServiceType=e||Bo.AMap,this.naviData=null,this.viewer=t,t.dataSources.add(this.dataSourceToo).then()}async takeStartingPoint(){let t=new C(jo);this.clearRoads(),this.startingPointEntity&&this.dataSourceToo.entities.remove(this.startingPointEntity);let e=await this.takePoint();e&&(this.startingPoint=e,this.startingPointEntity=this.addMarkEntity(e.longitude,e.latitude,jo)),t.remove()}async takeEndPoint(){let t=new C(zo);this.clearRoads(),this.endPointEntity&&this.dataSourceToo.entities.remove(this.endPointEntity);let e=await this.takePoint();e&&(this.endPoint=e,this.endPointEntity=this.addMarkEntity(e.longitude,e.latitude,zo)),t.remove()}async takePassPoint(){let t=new C(Go);this.clearRoads();let e=await this.takePoint();e&&(this.passPointArr.push(e),this.passPointEntityArr.push(this.addMarkEntity(e.longitude,e.latitude,Go))),t.remove()}async takeAvoidRange(){return this.clearRoads(),new Promise(((t,e)=>{this.drawShape.drawPolygon({coordinateType:J.cartographicObj,endCallback:e=>{this.avoidRanges.push(e);let n=this.dataSourceToo.entities.add(Fo.entityAvoidRange(e));this.avoidRangeEntityArr.push(n),t(this.avoidRangeEntityArr)},errCallback:()=>{e([])}})}))}clearPassPoint(){this.passPointArr=[],this.passPointEntityArr.forEach((t=>{this.dataSourceToo.entities.remove(t)}))}clearAvoidRanges(){this.avoidRanges=[],this.avoidRangeEntityArr.forEach((t=>{this.dataSourceToo.entities.remove(t)}))}clearRoads(){this.roadEntityArr.forEach((t=>{this.dataSourceToo.entities.remove(t)}))}buildPathEntity(t=0){this.naviData&&(this.dataSourceToo.entities.removeAll(),this.startingPointEntity=this.addMarkEntity(this.startingPoint.longitude,this.startingPoint.latitude,jo),this.endPointEntity=this.addMarkEntity(this.endPoint.longitude,this.endPoint.latitude,zo),this.passPointArr.forEach((t=>this.passPointEntityArr.push(this.addMarkEntity(t.longitude,t.latitude,Go)))),this.avoidRanges.forEach((t=>{this.avoidRangeEntityArr.push(this.dataSourceToo.entities.add(Fo.entityAvoidRange(t)))})),this.routingServiceType===Bo.AMap?(console.log("使用高德地图服务"),this.naviData.paths.forEach(((e,n)=>{if(n!==t)return;let r=[];r.push(this.startingPoint),e.steps.forEach((t=>{r.push(...t.polyline)})),r.push(this.endPoint);let i=this.dataSourceToo.entities.add(Fo.entityNaviLine(r,String(n+1)));this.roadEntityArr.push(i)}))):(console.log("使用GraphHopper服务"),this.naviData.forEach(((e,n)=>{if(n!==t)return;let r=[];r.push(this.startingPoint),e.points.coordinates.forEach((t=>{r.push({longitude:t[0],latitude:t[1],height:0})})),r.push(this.endPoint);let i=this.dataSourceToo.entities.add(function(t=[],e=""){const n=[];return t.forEach((t=>{n.push(t.longitude,t.latitude)})),new d.Entity({id:"路径规划-方案-"+e,name:"路径规划-方案-"+e,polyline:{positions:d.Cartesian3.fromDegreesArray(n),width:15,material:new Ei({color:d.Color.fromRandom().withAlpha(.7),duration:5e3}),clampToGround:!0}})}(r,String(n+1)));this.roadEntityArr.push(i)}))))}async runNavigation(){let t;return t=this.routingServiceType===Bo.AMap?await Fo.navigation(this.startingPoint,this.endPoint,this.passPointArr,this.avoidRanges):await async function(t,e,n=[],r=[]){let i=t||{longitude:108.46385538126562,latitude:30.7851146657642},o="point="+i.latitude+","+i.longitude;n.forEach((t=>{o+="&point="+t.latitude+","+t.longitude}));let a=e||{longitude:108.47119096640783,latitude:30.78348048735882};o+="&point="+a.latitude+","+a.longitude;let s="";r.forEach((t=>{""!=s&&(s+=";");let e="";t.forEach((t=>{""!=e&&(e+=","),e+=`${t.latitude},${t.longitude}`})),s+=e}));let l,u,c=`http://122.227.134.126:98/route?${o}&locale=zh-CN&profile=car&points_encoded=false&ch.disable=true&block_area=${s}`;try{u=await fetch(c).then((t=>t.json())),l=u.paths}catch(t){console.error("GraphHopper服务出现了错误，可能是您的URL出错了。您可以检查是否输入了不存在的点或者两个点相距太远。")}return l}(this.startingPoint,this.endPoint,this.passPointArr,this.avoidRanges),null==t||(this.naviData=t,this.buildPathEntity()),t}resetNavigation(){this.clearAvoidRanges(),this.clearPassPoint(),this.clearRoads(),this.avoidRanges=[],this.dataSourceToo.entities.removeAll(),this.startingPointEntity=null,this.endPointEntity=null,this.naviData=null,this.startingPoint={longitude:0,latitude:0,height:0},this.endPoint={longitude:0,latitude:0,height:0}}destroy(){this.resetNavigation(),this.viewer.dataSources.remove(this.dataSourceToo)}takePoint(){return new Promise((t=>{this.drawShape.drawPoint({coordinateType:J.cartographicObj,endCallback:e=>{let n=Math.floor(1e5*e[0].longitude)/1e5,r=Math.floor(1e5*e[0].latitude)/1e5;t({longitude:n,latitude:r,height:0})},errCallback:()=>{t(null)}})}))}addMarkEntity(t,e,n){return this.dataSourceToo.entities.add(Ri(t,e,{imgUrl:n,width:15,height:21}))}}class qo{constructor(t,e,n,r,i=!0,o=!0){this.playEndFunc=null,this.viewer=t,this.entity=e,this.lineGeoJson=n,this.speed=r,this.loop=i,this.clampToGround=o,this.rawPosition=e.position,this.pathDataSources=new d.CustomDataSource,this.playing=!0,this.playEndFunc=null}play(t=null){"function"==typeof t&&(this.playEndFunc=t);const e=d.JulianDate.fromDate(new Date),n=window.turf.length(this.lineGeoJson,{units:"meters"});let r=[];this.entity.position=new d.CallbackProperty(((t,i)=>{if(!this.playing&&r.length>=2)return d.Cartesian3.fromDegrees(...r);const o=n/this.speed;let a=0;this.loop?a=this.speed*((t.secondsOfDay-e.secondsOfDay)%o):(a=this.speed*(t.secondsOfDay-e.secondsOfDay),a>n&&(a=n,this.playing=!1)),a>=n&&this.playEndFunc&&this.playEndFunc(),a=a<0?0:a;const s=window.turf.along(this.lineGeoJson,a,{units:"meters"});let l=[],u=0,c=0,h=0,p=0;for(let t=0;t<this.lineGeoJson.geometry.coordinates.length;t++){let e=this.lineGeoJson.geometry.coordinates[t];if(0===t){l=e,u=0,c=0,h=0,p=0;continue}let n=window.turf.distance(window.turf.point(l),window.turf.point(e),{units:"meters"});if(c=u,h=u+n,u>a){p=e[2]+(e[2]-l[2])/n*(a-c),p=p||0;break}u+=n,l=e}const f=s.geometry.coordinates,g=d.Cartesian3.fromDegrees(f[0],f[1],p||0);if(r.length>0&&(f[0]!==r[0]||f[1]!==r[1])){let t=window.turf.point([f[0],f[1]]),e=window.turf.point([r[0],r[1]]),n=window.turf.bearing(e,t);n<0&&(n+=360);let i=d.Math.toRadians(-90+n);this.entity.orientation=d.Transforms.headingPitchRollQuaternion(g,new d.HeadingPitchRoll(i,0,0))}return r=[f[0],f[1],p],this.clampToGround?this.viewer.scene.clampToHeight(g,[this.entity]):g}))}addPath(){let t=new d.Entity({polyline:{positions:d.Cartesian3.fromDegreesArray(this.lineGeoJson.geometry.coordinates.map((t=>[t[0],t[1]])).flat()),width:12,material:new Ei({color:d.Color.AQUA,duration:5e3}),clampToGround:!0}});this.pathDataSources.entities.add(t),this.viewer.dataSources.add(this.pathDataSources)}removePath(){this.pathDataSources.entities.removeAll(),this.viewer.dataSources.remove(this.pathDataSources)}destroy(){this.entity.position=this.rawPosition,this.removePath(),this.playEndFunc=null}}class Wo{constructor(t,e=Ft.Viewer3D,n={}){this.viewer=t,this.scopeType=e,this.customOption=n,this.workSpace=e===Ft.Viewer3D?W().viewer3DWorkSpace:W().viewer2DWorkSpace,this.treeNodes=this.getTreeNodeByConfig(),$.fn.zTree.init($("#treeDom"),this.getSetting(),this.treeNodes),this.initEvent(),this.treeNodes=this.reFreshTreeNodeByWorkSpace(),$.fn.zTree.init($("#treeDom"),this.getSetting(),this.treeNodes)}initEvent(){let t=this;qt.sourceEvent.addEventListener(Dt.addData,Ft.Viewer3D,(()=>{t.treeNodes=t.reFreshTreeNodeByWorkSpace(),$.fn.zTree.init($("#treeDom"),this.getSetting(),t.treeNodes)})),qt.sourceEvent.addEventListener(Dt.removeData,Ft.Viewer3D,(()=>{t.treeNodes=t.reFreshTreeNodeByWorkSpace(),$.fn.zTree.init($("#treeDom"),this.getSetting(),t.treeNodes)}))}getTreeNodeByConfig(){let t=[],e=Y.getAllSources();e=e.filter((t=>t.showInTree));let n=function(t,e){let n=[],r=[],i=new Map;t.forEach((t=>{let r=i.get(t[e]);r?r.push(t):(n.push(t[e]),i.set(t[e],[t]))})),n=n.sort(((t,e)=>t.localeCompare(e)));for(let t=0;t<n.length;t++)r.push(i.get(n[t]));return r}(e,"catalog"),r=["基础影像","电子地图","地形图层"];for(let t=0;t<r.length;t++)for(let e=0;e<n.length;e++){let a=n[e];r[t]===a[0].catalog&&(i=n,0!=(o=e)&&i.unshift(i.splice(o,1)[0]),n=i)}var i,o;for(let e=0;e<n.length;e++){let r=n[e],i={name:r[0].catalog,open:!1,children:[],checked:!1,font:this.customOption.font};i={...i,...this.customOption},r.forEach((t=>{let e=null;"layer"===t.dataType?e=__webpack_require__(1419):"terrain"===t.dataType?e=__webpack_require__(6900):"3DTiles"===t.dataType?e=__webpack_require__(2703):"gltf"===t.dataType?e=__webpack_require__(2275):"poi"===t.dataType?e=__webpack_require__(9049):"geoJson"===t.dataType&&(e=__webpack_require__(3298));let n={id:t.pid,name:t.name,checked:!1,nodeData:t,icon:e,font:this.customOption.font};n={...n,...this.customOption},i.children.push(n)})),t.push(i)}return t}reFreshTreeNodeByWorkSpace(){let t=$.fn.zTree.getZTreeObj("treeDom").getNodes();for(let e=0;e<t.length;e++){let n=t[e],r=!0;for(let t=0;t<n.children.length;t++){let e=n.children[t];this.workSpace.getNodeByPid(e.id)?e.checked=!0:(e.checked=!1,r=!1)}n.checked=r}return t}getSetting(){let t=this;return{view:{fontCss:Vo,nameIsHTML:!0},check:{enable:!0,chkboxType:{Y:"ps",N:"ps"}},callback:{onCheck:function(e,n,r){let i=$.fn.zTree.getZTreeObj("treeDom").transformToArray(r);r.checked?i.forEach((e=>{!e.children&&e.nodeData&&t.workSpace.addData(e.nodeData).then()})):i.forEach((e=>{!e.children&&e.nodeData&&t.workSpace.removeDataByPid(e.nodeData.pid)}))},onClick:function(e,n,r){r.children||t.workSpace.flyToDataByPid(r.nodeData.pid)}},data:{simpleData:{enable:!0}}}}}function Vo(t,e){return e.font?e.font:{}}let Ho={ZTreeMana:Wo};class Yo{constructor(t,e){this.leftDownFlag=!1,this.viewer=g(),this.entity=t,this.moveCallback=e;const n=new d.ScreenSpaceEventHandler(this.viewer.canvas);n.setInputAction((t=>{this.leftDownAction(t)}),d.ScreenSpaceEventType.LEFT_DOWN),n.setInputAction((t=>{this.mouseMoveAction(t)}),d.ScreenSpaceEventType.MOUSE_MOVE),n.setInputAction((t=>{this.leftUpAction(t)}),d.ScreenSpaceEventType.LEFT_UP),this.handler=n}leftDownAction(t){let e=this.viewer.scene.pick(t.position);e?.id===this.entity&&(this.leftDownFlag=!0,document.body.style.cursor="move",this.viewer.scene.screenSpaceCameraController.enableRotate=!1)}mouseMoveAction(t){if(this.leftDownFlag){let e=this.viewer.camera.getPickRay(t.endPosition);if(e){document.body.style.cursor="move";let t=this.viewer.scene.globe.pick(e,this.viewer.scene);if(t){let e=d.Cartographic.fromCartesian(t);this.moveCallback&&this.moveCallback({longitude:d.Math.toDegrees(e.longitude),latitude:d.Math.toDegrees(e.latitude),height:e.height}),this.entity.position=new d.CallbackProperty((function(){return t}),!1)}}}}leftUpAction(t){document.body.style.cursor="default",this.leftDownFlag=!1,this.viewer.scene.screenSpaceCameraController.enableRotate=!0}destroy(){this.handler.destroy()}}var Xo,Zo,Ko,Jo,Qo,$o=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},ta=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class ea{constructor(t,e,n,r){Xo.set(this,void 0),Zo.set(this,void 0),Ko.set(this,void 0),Jo.set(this,void 0),Qo.set(this,void 0),$o(this,Xo,t,"f"),$o(this,Zo,e,"f"),this.height=n,$o(this,Ko,r||{},"f"),this.init()}init(){ta(this,Xo,"f").scene.invertClassification=!0,ta(this,Xo,"f").scene.invertClassificationColor=ta(this,Ko,"f").color||new d.Color(1,1,1,1),this.addBottomPolygon(),this.addPrimitive()}addBottomPolygon(){$o(this,Jo,ta(this,Xo,"f").entities.add({polygon:{hierarchy:new d.PolygonHierarchy(d.Cartesian3.fromDegreesArray(ta(this,Zo,"f"))),height:new d.CallbackProperty((()=>this.height),!1),material:d.Color.YELLOW.withAlpha(.2),outline:!0,outlineColor:d.Color.RED}}),"f")}addPrimitive(){let t=this.createGeometry();this.addClassificationPrimitive(t)}setHeight(t){this.height=t||100,this.removePrimitive(),this.addPrimitive()}createGeometry(){return new d.PolygonGeometry({polygonHierarchy:new d.PolygonHierarchy(d.Cartesian3.fromDegreesArray(ta(this,Zo,"f"))),perPositionHeight:!0,height:this.height,extrudedHeight:2e5})}addClassificationPrimitive(t){$o(this,Qo,ta(this,Xo,"f").scene.primitives.add(new d.ClassificationPrimitive({geometryInstances:new d.GeometryInstance({geometry:d.PolygonGeometry.createGeometry(t),attributes:{color:d.ColorGeometryInstanceAttribute.fromColor(d.Color.RED.withAlpha(.6)),show:new d.ShowGeometryInstanceAttribute(!0)}}),classificationType:d.ClassificationType.CESIUM_3D_TILE,asynchronous:!1})),"f")}removePrimitive(){ta(this,Xo,"f").scene.primitives.remove(ta(this,Qo,"f"))}remove(){this.removePrimitive(),ta(this,Xo,"f").scene.invertClassification=!1,ta(this,Xo,"f").entities.remove(ta(this,Jo,"f"))}}Xo=new WeakMap,Zo=new WeakMap,Ko=new WeakMap,Jo=new WeakMap,Qo=new WeakMap;let na={Circle:class{constructor(t){this.positions=[],this.tempPositions=[],this.viewer=t,this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(d.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.initEvents()}activate(){this.deactivate(),this.clear(),this.positions=[],this.tempPositions=[],this.registerEvents(),this.enableCursorStyle.enableCursorStyle=!1,this.viewer.container.style.cursor="default"}deactivate(){this.unRegisterEvents(),this.enableCursorStyle.enableCursorStyle=!0,this.viewer.container.style.cursor="pointer"}clear(){this.circleEntity&&(this.viewer.entities.remove(this.circleEntity),this.circleEntity=void 0),this.viewEntity&&(this.viewer.entities.remove(this.viewEntity),this.viewEntity=void 0),this.resultPolylines&&this.resultPolylines.forEach((t=>{this.viewer.entities.remove(t)}))}initEvents(){this.handler=new d.ScreenSpaceEventHandler(this.viewer.scene.canvas)}registerEvents(){this.leftClickEvent(),this.rightClickEvent(),this.mouseMoveEvent()}leftClickEvent(){this.handler.setInputAction((t=>{this.viewer.container.style.cursor="default";let e=this.viewer.scene.pickPosition(t.position);e||(e=this.viewer.scene.camera.pickEllipsoid(t.position,this.viewer.scene.globe.ellipsoid)),e&&(this.positions.push(e),1==this.positions.length?(this.tempPositions.push(e),this.handleFirstPosition()):this.drawEnd())}),d.ScreenSpaceEventType.LEFT_CLICK)}handleFirstPosition(){this.generateView(),this.generateCircle()}generateCircle(){this.circleEntity=this.viewer.entities.add({position:this.positions[0],ellipse:{semiMinorAxis:new d.CallbackProperty((t=>this.getRadius()),!1),semiMajorAxis:new d.CallbackProperty((t=>this.getRadius()),!1),material:d.Color.RED.withAlpha(.6),classificationType:d.ClassificationType.BOTH}})}getRadius(){let t=this.tempPositions[0],e=this.tempPositions[0];this.tempPositions.length>1&&(e=this.tempPositions[1]);let n=d.Cartesian3.distance(t,e);return 0==n?1e-6:n}generateView(){this.viewEntity=this.viewer.entities.add({position:this.positions[0],label:{text:"观察位置",fillColor:d.Color.WHITE,scale:.5,font:"normal 34px MicroSoft YaHei",distanceDisplayCondition:new d.DistanceDisplayCondition(0,5e3),scaleByDistance:new d.NearFarScalar(500,1,1500,.4),verticalOrigin:d.VerticalOrigin.BOTTOM,style:d.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new d.Cartesian2(0,-20),outlineWidth:3,outlineColor:d.Color.BLACK},point:{color:d.Color.DODGERBLUE,pixelSize:5,outlineColor:d.Color.WHITE,outlineWidth:2,scaleByDistance:new d.NearFarScalar(1e3,1,4200,.4),disableDepthTestDistance:500}})}mouseMoveEvent(){this.handler.setInputAction((t=>{this.viewer.container.style.cursor="default";let e=this.viewer.scene.pickPosition(t.endPosition);e||(e=this.viewer.scene.camera.pickEllipsoid(t.startPosition,this.viewer.scene.globe.ellipsoid)),e&&this.circleEntity&&(this.tempPositions=this.positions.concat([e]))}),d.ScreenSpaceEventType.MOUSE_MOVE)}rightClickEvent(){this.handler.setInputAction((t=>{if(this.circleEntity)return this.positions.length<2?(this.clear(),void this.deactivate()):void 0;this.deactivate()}),d.ScreenSpaceEventType.RIGHT_CLICK)}unRegisterEvents(){this.handler.removeInputAction(d.ScreenSpaceEventType.RIGHT_CLICK),this.handler.removeInputAction(d.ScreenSpaceEventType.LEFT_CLICK),this.handler.removeInputAction(d.ScreenSpaceEventType.MOUSE_MOVE),this.handler.removeInputAction(d.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}drawEnd(){this.startnalysis(),this.viewer.entities.remove(this.circleEntity),this.deactivate()}startnalysis(){const t=d.Cartographic.fromCartesian(this.positions[0]),e=[d.Math.toDegrees(t.longitude),d.Math.toDegrees(t.latitude)];let n,r,i,o,a=O.generateCirclePoints(e,this.getRadius()),s=this.point2dToPoint3d(a);this.resultPolylines=[];for(let t=0;t<s.length;t++)n=d.Cartesian3.normalize(d.Cartesian3.subtract(s[t],this.positions[0],new d.Cartesian3),new d.Cartesian3),r=new d.Ray(this.positions[0],n),i=this.viewer.scene.pickFromRay(r,[this.viewEntity,this.targetEntity]),o=this.showIntersection(i,s[t],this.positions[0]),this.resultPolylines=this.resultPolylines.concat(o)}point2dToPoint3d(t){let e=[];for(let n=0;n<t.length;n++){const r=t[n],i=d.Cartesian3.fromDegrees(r[0],r[1],0),o=this.viewer.scene.clampToHeight(i);e.push(o)}return e}showIntersection(t,e,n){let r,i=[];return d.defined(t)&&d.defined(t.object)?(r=this.drawResultLine(t.position,n,d.Color.CHARTREUSE),i.push(r),r=this.drawResultLine(t.position,e,d.Color.RED),i.push(r)):(r=this.drawResultLine(n,e,d.Color.CHARTREUSE),i.push(r)),i}drawResultLine(t,e,n){return this.viewer.entities.add({polyline:{positions:[t,e],width:2,material:n,depthFailMaterial:n}})}},SingleLine:class{constructor(t){this.positions=[],this.tempPositions=[],this.viewer=t,this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(d.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.initEvents()}activate(){this.deactivate(),this.clear(),this.positions=[],this.tempPositions=[],this.registerEvents(),this.viewer.container.style.cursor="default"}deactivate(){this.unRegisterEvents(),this.viewer.container.style.cursor="pointer"}clear(){this.polylineEntity&&(this.viewer.entities.remove(this.polylineEntity),this.polylineEntity=void 0),this.viewEntity&&(this.viewer.entities.remove(this.viewEntity),this.viewEntity=void 0),this.targetEntity&&(this.viewer.entities.remove(this.targetEntity),this.targetEntity=void 0),this.resultPolylines&&this.resultPolylines.forEach((t=>{this.viewer.entities.remove(t)}))}initEvents(){this.handler=new d.ScreenSpaceEventHandler(this.viewer.scene.canvas)}registerEvents(){this.leftClickEvent(),this.rightClickEvent(),this.mouseMoveEvent()}leftClickEvent(){this.handler.setInputAction((t=>{this.viewer.container.style.cursor="default";let e=this.viewer.scene.pickPosition(t.position);e||(e=this.viewer.scene.camera.pickEllipsoid(t.position,this.viewer.scene.globe.ellipsoid)),e&&(this.positions.push(e),1==this.positions.length?this.handleFirstPosition():this.drawEnd())}),d.ScreenSpaceEventType.LEFT_CLICK)}handleFirstPosition(){this.generateView(),this.generatePolyline()}generatePolyline(){this.polylineEntity=this.viewer.entities.add({polyline:{positions:new d.CallbackProperty((()=>this.tempPositions),!1),width:2,material:new d.PolylineDashMaterialProperty({color:d.Color.YELLOW}),depthFailMaterial:new d.PolylineDashMaterialProperty({color:d.Color.YELLOW})}})}generateView(){this.viewEntity=this.viewer.entities.add({position:this.positions[0],label:{text:"观察位置",fillColor:d.Color.WHITE,scale:.5,font:"normal 34px MicroSoft YaHei",distanceDisplayCondition:new d.DistanceDisplayCondition(0,5e3),scaleByDistance:new d.NearFarScalar(500,1,1500,.4),verticalOrigin:d.VerticalOrigin.BOTTOM,style:d.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new d.Cartesian2(0,-20),outlineWidth:3,outlineColor:d.Color.BLACK},point:{color:d.Color.DODGERBLUE,pixelSize:5,outlineColor:d.Color.WHITE,outlineWidth:2,scaleByDistance:new d.NearFarScalar(1e3,1,4200,.4),disableDepthTestDistance:500}})}generateEndPoint(){this.targetEntity=this.viewer.entities.add({position:this.positions[1],label:{text:"目标位置",fillColor:d.Color.WHITE,scale:.5,font:"normal 34px MicroSoft YaHei",distanceDisplayCondition:new d.DistanceDisplayCondition(0,5e3),scaleByDistance:new d.NearFarScalar(500,1,1500,.4),verticalOrigin:d.VerticalOrigin.BOTTOM,style:d.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new d.Cartesian2(0,-20),outlineWidth:3,outlineColor:d.Color.BLACK},point:{color:d.Color.DODGERBLUE,pixelSize:5,outlineColor:d.Color.WHITE,outlineWidth:2,scaleByDistance:new d.NearFarScalar(1e3,1,4200,.4),disableDepthTestDistance:500}})}mouseMoveEvent(){this.handler.setInputAction((t=>{this.viewer.container.style.cursor="default";let e=this.viewer.scene.pickPosition(t.endPosition);e||(e=this.viewer.scene.camera.pickEllipsoid(t.startPosition,this.viewer.scene.globe.ellipsoid)),e&&this.polylineEntity&&(this.tempPositions=this.positions.concat([e]))}),d.ScreenSpaceEventType.MOUSE_MOVE)}rightClickEvent(){this.handler.setInputAction((()=>{if(this.polylineEntity)return this.positions.length<2?(this.clear(),void this.deactivate()):void 0;this.deactivate()}),d.ScreenSpaceEventType.RIGHT_CLICK)}unRegisterEvents(){this.handler.removeInputAction(d.ScreenSpaceEventType.RIGHT_CLICK),this.handler.removeInputAction(d.ScreenSpaceEventType.LEFT_CLICK),this.handler.removeInputAction(d.ScreenSpaceEventType.MOUSE_MOVE),this.handler.removeInputAction(d.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}drawEnd(){this.generateEndPoint(),this.startnalysis(),this.viewer.entities.remove(this.polylineEntity),this.deactivate()}startnalysis(){var t=d.Cartesian3.normalize(d.Cartesian3.subtract(this.positions[1],this.positions[0],new d.Cartesian3),new d.Cartesian3),e=new d.Ray(this.positions[0],t),n=this.viewer.scene.pickFromRay(e,[this.viewEntity,this.targetEntity]);this.resultPolylines=this.showIntersection(n,this.positions[1],this.positions[0])}showIntersection(t,e,n){let r,i=[];return d.defined(t)&&d.defined(t.object)?(r=this.drawResultLine(t.position,n,d.Color.CHARTREUSE),i.push(r),r=this.drawResultLine(t.position,e,d.Color.RED),i.push(r)):(r=this.drawResultLine(n,e,d.Color.CHARTREUSE),i.push(r)),i}drawResultLine(t,e,n){return this.viewer.entities.add({polyline:{positions:[t,e],width:2,material:n,depthFailMaterial:n}})}}};class ra{constructor(t){this.viewer=t}add(t,e){e||(e={}),this.excavateDepth=e.excavateDepth||200,this.bottomImage=e.bottomImage||__webpack_require__(9955),this.sideImage=e.sideImage||__webpack_require__(6725),this.clear(),O.booleanClockwise(t)&&(t=t.reverse());let n=O.getClippingPlanes(t);this.viewer.scene.globe.clippingPlanes=new d.ClippingPlaneCollection({planes:n,edgeWidth:1,edgeColor:d.Color.WHITE}),this.addBottomPolygon(t),this.addSideWall(t)}addBottomPolygon(t){this.bottomPolygon=this.viewer.entities.add({polygon:{hierarchy:t,material:this.bottomImage,height:-this.excavateDepth}})}addSideWall(t){t.push(t[0]);let e=new Array(t.length).fill(-this.excavateDepth);this.sideWall=this.viewer.entities.add({wall:{positions:t,minimumHeights:e,material:this.sideImage}})}clear(){this.viewer.scene.globe.clippingPlanes&&!this.viewer.scene.globe.clippingPlanes.isDestroyed()&&this.viewer.scene.globe.clippingPlanes.destroy(),this.viewer.entities.remove(this.bottomPolygon),this.viewer.entities.remove(this.sideWall)}}class ia{constructor(t,e){this.viewer=t,this.viewPosition=e.viewPosition,this.viewPositionEnd=e.viewPositionEnd,this.viewDistance=this.viewPositionEnd?d.Cartesian3.distance(this.viewPosition,this.viewPositionEnd):e.viewDistance||100,this.viewHeading=this.viewPositionEnd?this.getHeading(this.viewPosition,this.viewPositionEnd):e.viewHeading||0,this.viewPitch=this.viewPositionEnd?this.getPitch(this.viewPosition,this.viewPositionEnd):e.viewPitch||0,this.horizontalViewAngle=e.horizontalViewAngle||90,this.verticalViewAngle=e.verticalViewAngle||60,this.visibleAreaColor=e.visibleAreaColor||d.Color.GREEN,this.invisibleAreaColor=e.invisibleAreaColor||d.Color.RED,this.enabled="boolean"!=typeof e.enabled||e.enabled,this.softShadows="boolean"!=typeof e.softShadows||e.softShadows,this.size=e.size||1024,this.update()}update(){this.clear(),this.createLightCamera(),this.createShadowMap()}clear(){this.sketch&&(this.viewer.entities.removeById(this.sketch.id),this.sketch=null),this.frustumOutline&&(this.frustumOutline.destroy(),this.frustumOutline=null),this.postStage&&(this.viewer.scene.postProcessStages.remove(this.postStage),this.postStage=null)}createLightCamera(){this.lightCamera=new d.Camera(this.viewer.scene),this.lightCamera.position=this.viewPosition,this.lightCamera.frustum.near=.001*this.viewDistance,this.lightCamera.frustum.far=this.viewDistance;const t=d.Math.toRadians(this.horizontalViewAngle),e=d.Math.toRadians(this.verticalViewAngle),n=this.viewDistance*Math.tan(t/2)*2/(this.viewDistance*Math.tan(e/2)*2);this.lightCamera.frustum.aspectRatio=n,this.lightCamera.frustum.fov=t>e?t:e,this.lightCamera.setView({destination:this.viewPosition,orientation:{heading:d.Math.toRadians(this.viewHeading||0),pitch:d.Math.toRadians(this.viewPitch||0),roll:0}})}createShadowMap(){this.shadowMap=new d.ShadowMap({context:this.viewer.scene.context,lightCamera:this.lightCamera,enabled:this.enabled,isPointLight:!0,pointLightRadius:this.viewDistance,cascadesEnabled:!1,size:this.size,softShadows:this.softShadows,normalOffset:!1,fromLightSource:!1}),this.viewer.scene.shadowMap=this.shadowMap}createPostStage(){const t=new d.PostProcessStage({fragmentShader:"\n #define USE_CUBE_MAP_SHADOW true\n uniform sampler2D colorTexture;\n uniform sampler2D depthTexture;\n varying vec2 v_textureCoordinates;\n uniform mat4 camera_projection_matrix;\n uniform mat4 camera_view_matrix;\n uniform samplerCube shadowMap_textureCube;\n uniform mat4 shadowMap_matrix;\n uniform vec4 shadowMap_lightPositionEC;\n uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;\n uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;\n uniform float helsing_viewDistance;\n uniform vec4 helsing_visibleAreaColor;\n uniform vec4 helsing_invisibleAreaColor;\n struct zx_shadowParameters\n {\n     vec3 texCoords;\n     float depthBias;\n     float depth;\n     float nDotL;\n     vec2 texelStepSize;\n     float normalShadingSmooth;\n     float darkness;\n };\n float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)\n {\n     float depthBias = shadowParameters.depthBias;\n     float depth = shadowParameters.depth;\n     float nDotL = shadowParameters.nDotL;\n     float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n     float darkness = shadowParameters.darkness;\n     vec3 uvw = shadowParameters.texCoords;\n     depth -= depthBias;\n     float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);\n     return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);\n }\n vec4 getPositionEC(){\n     return czm_windowToEyeCoordinates(gl_FragCoord);\n }\n vec3 getNormalEC(){\n     return vec3(1.);\n }\n vec4 toEye(in vec2 uv,in float depth){\n     vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));\n     vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);\n     posInCamera=posInCamera/posInCamera.w;\n     return posInCamera;\n }\n vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){\n     vec3 v01=point-planeOrigin;\n     float d=dot(planeNormal,v01);\n     return(point-planeNormal*d);\n }\n float getDepth(in vec4 depth){\n     float z_window=czm_unpackDepth(depth);\n     z_window=czm_reverseLogDepth(z_window);\n     float n_range=czm_depthRange.near;\n     float f_range=czm_depthRange.far;\n     return(2.*z_window-n_range-f_range)/(f_range-n_range);\n }\n float shadow(in vec4 positionEC){\n     vec3 normalEC=getNormalEC();\n     zx_shadowParameters shadowParameters;\n     shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;\n     shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;\n     shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;\n     shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;\n     vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;\n     float distance=length(directionEC);\n     directionEC=normalize(directionEC);\n     float radius=shadowMap_lightPositionEC.w;\n     if(distance>radius)\n     {\n         return 2.0;\n     }\n     vec3 directionWC=czm_inverseViewRotation*directionEC;\n     shadowParameters.depth=distance/radius-0.0003;\n     shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);\n     shadowParameters.texCoords=directionWC;\n     float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);\n     return visibility;\n }\n bool visible(in vec4 result)\n {\n     result.x/=result.w;\n     result.y/=result.w;\n     result.z/=result.w;\n     return result.x>=-1.&&result.x<=1.\n     &&result.y>=-1.&&result.y<=1.\n     &&result.z>=-1.&&result.z<=1.;\n }\n void main(){\n     // 釉色 = 结构二维(颜色纹理, 纹理坐标)\n     gl_FragColor = texture(colorTexture, v_textureCoordinates);\n     // 深度 = 获取深度(结构二维(深度纹理, 纹理坐标))\n     float depth = getDepth(texture(depthTexture, v_textureCoordinates));\n     // 视角 = (纹理坐标, 深度)\n     vec4 viewPos = toEye(v_textureCoordinates, depth);\n     // 世界坐标\n     vec4 wordPos = czm_inverseView * viewPos;\n     // 虚拟相机中坐标\n     vec4 vcPos = camera_view_matrix * wordPos;\n     float near = .001 * helsing_viewDistance;\n     float dis = length(vcPos.xyz);\n     if(dis > near && dis < helsing_viewDistance){\n         // 透视投影\n         vec4 posInEye = camera_projection_matrix * vcPos;\n         // 可视区颜色\n         // vec4 helsing_visibleAreaColor=vec4(0.,1.,0.,.5);\n         // vec4 helsing_invisibleAreaColor=vec4(1.,0.,0.,.5);\n         if(visible(posInEye)){\n             float vis = shadow(viewPos);\n             if(vis > 0.3){\n                 gl_FragColor = mix(gl_FragColor,helsing_visibleAreaColor,.5);\n             } else{\n                 gl_FragColor = mix(gl_FragColor,helsing_invisibleAreaColor,.5);\n             }\n         }\n     }\n }",uniforms:{shadowMap_textureCube:()=>(this.shadowMap.update(Reflect.get(this.viewer.scene,"_frameState")),Reflect.get(this.shadowMap,"_shadowMapTexture")),shadowMap_matrix:()=>(this.shadowMap.update(Reflect.get(this.viewer.scene,"_frameState")),Reflect.get(this.shadowMap,"_shadowMapMatrix")),shadowMap_lightPositionEC:()=>(this.shadowMap.update(Reflect.get(this.viewer.scene,"_frameState")),Reflect.get(this.shadowMap,"_lightPositionEC")),shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:()=>{this.shadowMap.update(Reflect.get(this.viewer.scene,"_frameState"));const t=this.shadowMap._pointBias;return d.Cartesian4.fromElements(t.normalOffsetScale,this.shadowMap._distance,this.shadowMap.maximumDistance,0,new d.Cartesian4)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:()=>{this.shadowMap.update(Reflect.get(this.viewer.scene,"_frameState"));const t=this.shadowMap._pointBias,e=new d.Cartesian2;return e.x=1/this.shadowMap._textureSize.x,e.y=1/this.shadowMap._textureSize.y,d.Cartesian4.fromElements(e.x,e.y,t.depthBias,t.normalShadingSmooth,new d.Cartesian4)},camera_projection_matrix:this.lightCamera.frustum.projectionMatrix,camera_view_matrix:this.lightCamera.viewMatrix,helsing_viewDistance:()=>this.viewDistance,helsing_visibleAreaColor:this.visibleAreaColor,helsing_invisibleAreaColor:this.invisibleAreaColor}});this.postStage=this.viewer.scene.postProcessStages.add(t)}drawFrustumOutline(){const t=new d.Cartesian3,e=new d.Matrix3,n=new d.Quaternion,r=(this.lightCamera.positionWC,this.lightCamera.directionWC),i=this.lightCamera.upWC;let o=this.lightCamera.rightWC;o=d.Cartesian3.negate(o,t);let a=e;d.Matrix3.setColumn(a,0,o,a),d.Matrix3.setColumn(a,1,i,a),d.Matrix3.setColumn(a,2,r,a);let s=d.Quaternion.fromRotationMatrix(a,n),l=new d.GeometryInstance({geometry:new d.FrustumOutlineGeometry({frustum:this.lightCamera.frustum,origin:this.viewPosition,orientation:s}),id:Math.random().toString(36).substr(2),attributes:{color:d.ColorGeometryInstanceAttribute.fromColor(d.Color.YELLOWGREEN),show:new d.ShowGeometryInstanceAttribute(!0)}});this.frustumOutline=this.viewer.scene.primitives.add(new d.Primitive({geometryInstances:[l],appearance:new d.PerInstanceColorAppearance({flat:!0,translucent:!1})}))}drawSketch(){this.sketch=this.viewer.entities.add({name:"sketch",position:this.viewPosition,orientation:d.Transforms.headingPitchRollQuaternion(this.viewPosition,d.HeadingPitchRoll.fromDegrees(this.viewHeading-90,this.viewPitch,0)),ellipsoid:{radii:new d.Cartesian3(this.viewDistance,this.viewDistance,this.viewDistance),minimumClock:d.Math.toRadians(-this.horizontalViewAngle/2),maximumClock:d.Math.toRadians(this.horizontalViewAngle/2),minimumCone:d.Math.toRadians(90-this.verticalViewAngle),maximumCone:d.Math.toRadians(90+this.verticalViewAngle),fill:!1,outline:!0,subdivisions:256,stackPartitions:64,slicePartitions:64,outlineColor:d.Color.YELLOWGREEN}})}getHeading(t,e){let n=new d.Cartesian3,r=d.Transforms.eastNorthUpToFixedFrame(t);return d.Matrix4.inverse(r,r),d.Matrix4.multiplyByPoint(r,e,n),d.Cartesian3.normalize(n,n),d.Math.toDegrees(Math.atan2(n.x,n.y))}getPitch(t,e){let n=new d.Cartesian3,r=d.Transforms.eastNorthUpToFixedFrame(t);return d.Matrix4.inverse(r,r),d.Matrix4.multiplyByPoint(r,e,n),d.Cartesian3.normalize(n,n),d.Math.toDegrees(Math.asin(n.z))}}class oa{constructor(t,e,n=[-180,-90,180,90],r={enabled:!0,min:6375e3,max:1e7,maxRadius:40,minRadius:10},i={},o={totalArea:1036800,autoResize:!0,width:0,height:0}){if(this.cameraMoveEnd=null,this.boxMeta={top:0,left:0,height:0,width:0},this.viewer=t,this.bbox=n,this.autoRadiusConfig=r,this.max=1,this.min=.01,this.mountPoint=null,this.canvasConfig=o,"undefined"==typeof window)return;const[a,s,l,u]=n;let c=u-s,h=l-a;if(this.boxMeta={top:u,left:a,height:c,width:h},o.autoResize){if(!o.totalArea)throw"specify totalArea if auto resize";const t=Math.floor(Math.sqrt(c*o.totalArea)),e=Math.floor(t*h/c);this.canvasConfig.height=t,this.canvasConfig.width=e}else{if(!o.width||!o.height)throw"specify width and height if not auto resize";this.canvasConfig=o}let p,f={container:null,...i};if(f.container||(this.mountPoint=this.newDiv({position:"absolute",top:0,left:0,"z-index":-100,overflow:"hidden",width:0,height:0},document.body),f.container=this.newDiv({width:this.canvasConfig.width,height:this.canvasConfig.height},this.mountPoint)),this.heatmapConfig=f,this.heatmap=h337.create(f),p={data:e.data||null,autoMaxMin:e.autoMaxMin||!0,min:e.min||0,max:e.max||0},!p.autoMaxMin){if(!p.min||!p.max)throw"need max and min when not auto";this.min=p.min,this.max=p.max}let g=p.data.map((t=>(this.updateMaxMin(t.z),this.convertData(t))));this.dataConfig={autoMaxMin:p.autoMaxMin,max:p.max,min:p.min},this.data=g;let y={max:this.max,min:this.min,data:g};this.heatmap.setData(y),this.updateCesium(r.enabled),this.cameraMoveEnd=()=>this.updateCesium(!0),r.enabled&&this.viewer.camera.moveEnd.addEventListener(this.cameraMoveEnd),this.rectangleEntity=this.viewer.entities.add({polygon:{material:this.heatmap.getDataURL(),hierarchy:d.Cartesian3.fromDegreesArray(this.recToPolygon())}})}updateHeatmap(){let t=this.viewer.camera.getMagnitude();const{min:e,max:n,minRadius:r,maxRadius:i}=this.autoRadiusConfig;let o=parseInt(String(r+(i-r)*(t-e)/(n-e)));this.heatmap.setData({max:this.max,min:this.min,data:this.data?.map((({x:t,y:e,value:n})=>({x:t,y:e,value:n,radius:o})))})}updateCesium(t){t&&this.updateHeatmap(),this.rectangleEntity?.polygon?.material&&(this.rectangleEntity.polygon.material=this.heatmap.getDataURL())}recToPolygon(){return[this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[1],this.bbox[2],this.bbox[3],this.bbox[0],this.bbox[3],this.bbox[0],this.bbox[1]]}convertData(t){let[e,n]=this.gps2point([t.x,t.y]);return{x:e,y:n,value:t.z}}updateMaxMin(t){void 0===this.max?this.max=t:this.max=Math.max(t,this.max),void 0===this.min?this.min=t:this.min=Math.min(t,this.min)}gps2point(t){let[e,n]=t,{top:r,left:i,height:o,width:a}=this.boxMeta,s=this.canvasConfig;return[parseInt(String((e-i)/a*s.width)),parseInt(String((r-n)/o*s.height))]}newDiv(t,e){let n,r=document.createElement("div");for(n in e&&e.append(r),t)"number"!=typeof t[n]?r.style[n]=t[n]:r.style[n]=t[n]+"px";return r}destroy(){this.viewer.camera.moveEnd.removeEventListener(this.cameraMoveEnd),this.rectangleEntity&&this.viewer.entities.remove(this.rectangleEntity),this.mountPoint&&this.mountPoint.remove()}remove(){this.destroy()}}class aa{constructor(t,e,n){this.viewer=t,this.tileset=e,this.moveing=!1,this.axisList=[],this.moveType="",this.params=n||{scale:1,longitude:0,latitude:0,height:0,rx:0,ry:0,rz:0};let r=d.Cartographic.fromCartesian(this.tileset.boundingSphere.center);this.params.longitude=d.Math.toDegrees(r.longitude),this.params.latitude=d.Math.toDegrees(r.latitude),this.params.height=r.height,this.highlightAxis={polyline:{},color:d.Color.TRANSPARENT},this.activate()}activate(){this.deactivate(),this.axisList=[],this.createAxis(),this.registerEvents()}deactivate(){this.eventHandler&&(this.eventHandler.destroy(),this.eventHandler=void 0,this.axisList.forEach((t=>{this.viewer.entities.remove(t)})))}createAxis(){let t=this.createXaxis();this.axisList.push(t),t=this.createYaxis(),this.axisList.push(t),t=this.createZaxis(),this.axisList.push(t)}createXaxis(){return this.viewer.entities.add({type:"axis",subType:"xaxis",polyline:{positions:new d.CallbackProperty((()=>d.Cartesian3.fromDegreesArrayHeights([this.params.longitude,this.params.latitude,this.params.height,this.params.longitude+.001,this.params.latitude,this.params.height])),!1),width:20,material:new d.PolylineArrowMaterialProperty(d.Color.BLUE)}})}createYaxis(){return this.viewer.entities.add({type:"axis",subType:"yaxis",polyline:{positions:new d.CallbackProperty((()=>d.Cartesian3.fromDegreesArrayHeights([this.params.longitude,this.params.latitude,this.params.height,this.params.longitude,this.params.latitude+.001,this.params.height])),!1),width:20,material:new d.PolylineArrowMaterialProperty(d.Color.GREEN)}})}createZaxis(){return this.viewer.entities.add({type:"axis",subType:"zaxis",polyline:{positions:new d.CallbackProperty((()=>d.Cartesian3.fromDegreesArrayHeights([this.params.longitude,this.params.latitude,this.params.height,this.params.longitude,this.params.latitude,this.params.height+60])),!1),width:20,material:new d.PolylineArrowMaterialProperty(d.Color.RED)}})}registerEvents(){this.eventHandler=new d.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.registerLeftDownEvent(),this.registerLeftUpEvent(),this.registerMouseMoveEvent()}registerLeftDownEvent(){this.eventHandler.setInputAction((t=>{let e=this.viewer.scene.pick(t.position);e&&e.id&&"axis"===e.id.type&&(this.moveType=e.id.subType,this.highlightAxis.color=e.id.polyline.material.color,this.highlightAxis.polyline=e.id.polyline,this.highlightAxis.polyline.material.color=d.Color.YELLOW,this.viewer.enableCursorStyle=!1,document.body.style.cursor="move",this.moveing=!0,this.viewer.scene.screenSpaceCameraController.enableRotate=!1)}),d.ScreenSpaceEventType.LEFT_DOWN)}registerLeftUpEvent(){this.eventHandler.setInputAction((()=>{this.moveing&&(this.viewer.enableCursorStyle=!0,document.body.style.cursor="default",this.highlightAxis.polyline.material.color=this.highlightAxis.color,this.highlightAxis={polyline:{},color:d.Color.TRANSPARENT},this.moveing=!1,this.viewer.scene.screenSpaceCameraController.enableRotate=!0)}),d.ScreenSpaceEventType.LEFT_UP)}registerMouseMoveEvent(){this.eventHandler.setInputAction((t=>{if(!this.moveing)return;if("zaxis"==this.moveType)return this.params.height+=t.startPosition.y-t.endPosition.y,void this.updateModelMatrix();let e=this.viewer.scene.pickPosition(t.endPosition),n=this.viewer.scene.pickPosition(t.startPosition);if(!e||!n)return;let r=d.Cartographic.fromCartesian(e),i=d.Cartographic.fromCartesian(n);return"xaxis"==this.moveType?(this.params.longitude+=d.Math.toDegrees(r.longitude-i.longitude),void this.updateModelMatrix()):"yaxis"==this.moveType?(this.params.latitude+=d.Math.toDegrees(r.latitude-i.latitude),void this.updateModelMatrix()):void 0}),d.ScreenSpaceEventType.MOUSE_MOVE)}updateModelMatrix(){if(!this.tileset)return;let t=d.Matrix3.fromRotationX(d.Math.toRadians(this.params.rx)),e=d.Matrix3.fromRotationY(d.Math.toRadians(this.params.ry)),n=d.Matrix3.fromRotationZ(d.Math.toRadians(this.params.rz)),r=d.Matrix4.fromRotationTranslation(t),i=d.Matrix4.fromRotationTranslation(e),o=d.Matrix4.fromRotationTranslation(n),a=d.Cartesian3.fromDegrees(this.params.longitude,this.params.latitude,this.params.height),s=d.Transforms.eastNorthUpToFixedFrame(a);d.Matrix4.multiply(s,r,s),d.Matrix4.multiply(s,i,s),d.Matrix4.multiply(s,o,s);let l=d.Matrix4.fromUniformScale(this.params.scale);d.Matrix4.multiply(s,l,s),this.tileset._root.transform=s}getParams(){return this.params}}class sa{constructor(t){this.viewer=t,this.tiles=null}add(t,e){this.tiles=e,this.clear(),this.booleanClockwise(t)&&(t=t.reverse()),this.addClippingPlanes(t)}addClippingPlanes(t){let e,n,r,i=this.getInverseTransform(this.tiles),o=t.length,a=[];for(let s=0;s<o;++s){let l=(s+1)%o;e=t[s],n=t[l],r=this.createPlane(e,n,i),a.push(r)}this.tiles.clippingPlanes=new d.ClippingPlaneCollection({planes:a,edgeWidth:1,edgeColor:d.Color.WHITE})}getInverseTransform(t){let e,n=t.root.transform;return e=n&&n.equals(d.Matrix4.IDENTITY)||!n?d.Transforms.eastNorthUpToFixedFrame(t.boundingSphere.center):d.Matrix4.fromArray(t.root.transform),d.Matrix4.inverseTransformation(e,new d.Matrix4)}getOriginCoordinateSystemPoint(t,e){return d.Matrix4.multiplyByPoint(e,t,new d.Cartesian3(0,0,0))}createPlane(t,e,n){let r=this.getOriginCoordinateSystemPoint(t,n),i=this.getOriginCoordinateSystemPoint(e,n),o=new d.Cartesian3(0,0,10),a=d.Cartesian3.subtract(i,r,new d.Cartesian3),s=d.Cartesian3.cross(a,o,new d.Cartesian3);s=d.Cartesian3.normalize(s,s);let l=d.Plane.fromPointNormal(r,s);return d.ClippingPlane.fromPlane(l)}booleanClockwise(t){let e=[];t.forEach((t=>{e.push(this.cartesian3ToDegrees(t))})),e.push(e[0]);let n=window.turf.lineString(e);return window.turf.booleanClockwise(n)}cartesian3ToDegrees(t){let e=d.Cartographic.fromCartesian(t);return[d.Math.toDegrees(e.longitude),d.Math.toDegrees(e.latitude)]}clear(){this.tiles&&(this.tiles.clippingPlanes=new d.ClippingPlaneCollection({planes:[],edgeWidth:1,edgeColor:d.Color.WHITE}))}}class la{constructor(t){this.viewer=t,this.primitives=[],this.invisibleColor=new d.Color(.25,.25,.25,1)}addVisibleRegion(t){let e=this.createGeometry(t,1e5),n=this.addPrimitive(e);this.primitives.push(n),this.viewer.scene.invertClassification=!0,this.viewer.scene.invertClassificationColor=this.invisibleColor}setInvisibleColorAlpha(t){this.viewer.scene.invertClassificationColor=this.invisibleColor.withAlpha(t)}activate(){this.viewer.scene.invertClassification=!0}deactivate(){this.viewer.scene.invertClassification=!1}addPrimitive(t){return this.viewer.scene.primitives.add(new d.ClassificationPrimitive({geometryInstances:new d.GeometryInstance({geometry:d.PolygonGeometry.createGeometry(t),attributes:{color:d.ColorGeometryInstanceAttribute.fromColor(d.Color.fromRandom({alpha:.8})),show:new d.ShowGeometryInstanceAttribute(!1)}}),classificationType:d.ClassificationType.CESIUM_3D_TILE}))}createGeometry(t,e){return new d.PolygonGeometry({polygonHierarchy:new d.PolygonHierarchy(t),perPositionHeight:!0,extrudedHeight:e})}removeAll(){this.viewer.scene.invertClassification=!1,this.primitives.forEach((t=>{this.viewer.scene.primitives.remove(t)}))}}class ua{constructor(t,e){this.fineModel=!1,this.cameraInfo="",this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.fineModelLevel=8,this.coarseModelLevel=32,this.listenerTileSet=()=>(t,e)=>{this.numberOfPendingRequests=t,this.numberOfTilesProcessing=e},this.listenerClock=t=>{const e=JSON.stringify(m());let n;this.fineModel?e!==this.cameraInfo?(this.cameraInfo=e,n=this.coarseModelLevel,this.fineModel=!1):(0!==this.numberOfPendingRequests||this.numberOfTilesProcessing,n=this.fineModelLevel):e!==this.cameraInfo?(this.cameraInfo=e,n=this.coarseModelLevel):0!==this.numberOfPendingRequests||0!==this.numberOfTilesProcessing?n=this.coarseModelLevel:(n=this.fineModelLevel,this.fineModel=!0),this.tileSet.maximumScreenSpaceError=n||this.fineModelLevel},this.tileSet=e,this.viewer=t,this.fineModelLevel=e.maximumScreenSpaceError,this.coarseModelLevel=4*e.maximumScreenSpaceError,this.coarseModelLevel=this.coarseModelLevel<16?16:this.coarseModelLevel,this.coarseModelLevel=this.coarseModelLevel>128?128:this.coarseModelLevel,e.loadProgress.addEventListener(this.listenerTileSet),t.clock.onTick.addEventListener(this.listenerClock)}destroy(){this.tileSet.loadProgress.removeEventListener(this.listenerTileSet),this.viewer.clock.onTick.removeEventListener(this.listenerClock)}}class ca{constructor(t){this.viewer=g()}addCameraFrustum(){}destroy(){}}class ha{constructor(t){this.frustumPrimitive=null,this.outlinePrimitive=null,this.viewer=g(),this.position=t.position,this.orientation=t.orientation,this.fov=t.fov||30,this.near=t.near||10,this.far=t.far||100,this.aspectRatio=t.aspectRatio,this.add()}update(t,e){this.position=t,this.orientation=e,this.add()}add(){this.clear(),this.addFrustum(),this.addOutline()}clear(){this.clearFrustum(),this.clearOutline()}clearFrustum(){this.frustumPrimitive&&(this.viewer.scene.primitives.remove(this.frustumPrimitive),this.frustumPrimitive=null)}clearOutline(){this.outlinePrimitive&&(this.viewer.scene.primitives.remove(this.outlinePrimitive),this.outlinePrimitive=null)}addFrustum(){let t=new d.PerspectiveFrustum({fov:d.Math.toRadians(this.fov),aspectRatio:this.aspectRatio,near:this.near,far:this.far}),e=new d.FrustumGeometry({frustum:t,origin:this.position,orientation:this.orientation}),n=new d.GeometryInstance({geometry:e,attributes:{color:d.ColorGeometryInstanceAttribute.fromColor(new d.Color(1,0,0,.2))}}),r=new d.Primitive({geometryInstances:n,appearance:new d.PerInstanceColorAppearance({closed:!0,flat:!0}),asynchronous:!1});this.frustumPrimitive=this.viewer.scene.primitives.add(r)}addOutline(){let t=new d.PerspectiveFrustum({fov:d.Math.toRadians(this.fov),aspectRatio:this.aspectRatio,near:this.near,far:this.far}),e=new d.FrustumOutlineGeometry({frustum:t,origin:this.position,orientation:this.orientation}),n=new d.GeometryInstance({geometry:e,attributes:{color:d.ColorGeometryInstanceAttribute.fromColor(new d.Color(1,1,0,1))}}),r=new d.Primitive({geometryInstances:n,appearance:new d.PerInstanceColorAppearance({closed:!0,flat:!0}),asynchronous:!1});this.outlinePrimitive=this.viewer.scene.primitives.add(r)}}s.VERSION=Y.config.Version,window.VGEEarth=s,d.Ion.defaultAccessToken=X.defaultAccessToken})()})();